<%= form.label :post_type_id, class: "form-label" do %>
  投稿タイプ
  <span class="text-danger">*</span>
  <small class="text-muted">(公開時は必須)</small>
<% end %>
<div class="d-flex gap-2 mb-2">
  <%= form.collection_select :post_type_id, PostType.all.order(:name), :id, :display_name,
                             { prompt: "投稿タイプを選択してください" },
                             { class: "form-select #{'is-invalid' if post.errors[:post_type_id].any?}", id: "postTypeSelect" } %>
  <button type="button" class="btn btn-outline-primary btn-sm" id="addPostTypeBtn" style="white-space: nowrap;">
    <i class="fas fa-plus"></i> 追加
  </button>
</div>

<!-- 新規投稿タイプ追加フォーム（初期は非表示） -->
<div id="newPostTypeForm" class="card" style="display: none;">
  <div class="card-body p-3">
    <h6 class="card-title">新しい投稿タイプを追加</h6>
    <div class="mb-2">
      <label for="newPostTypeName" class="form-label form-label-sm">投稿タイプ名</label>
      <input type="text" id="newPostTypeName" name="newPostTypeName" class="form-control form-control-sm"
             placeholder="投稿タイプ名" maxlength="50">
    </div>
    <div class="mb-2">
      <label for="newPostTypeDescription" class="form-label form-label-sm">説明（任意）</label>
      <textarea id="newPostTypeDescription" class="form-control form-control-sm"
                placeholder="説明（任意）" rows="2" maxlength="200"></textarea>
    </div>
    <div class="d-flex gap-2">
      <button type="button" class="btn btn-success btn-sm" id="savePostTypeBtn">
        <i class="fas fa-save"></i> 保存
      </button>
      <button type="button" class="btn btn-secondary btn-sm" id="cancelPostTypeBtn">
        キャンセル
      </button>
    </div>
    <div id="postTypeError" class="alert alert-danger mt-2" style="display: none;"></div>
    <div id="postTypeSuccess" class="alert alert-success mt-2" style="display: none;"></div>
  </div>
</div>
<div class="form-text">この投稿の主な目的を選択してください。</div>