
<div class="container mt-4">
  <div class="row">
    <div class="col-lg-8 mx-auto">
      <div class="card">
        <div class="card-header">
          <h1 class="h3 mb-0"><%= @user.name %>さんのプロフィール</h1>
        </div>
        <div class="card-body">
          <div class="row">
            <div class="col-md-4">
              <div class="user-info">
                <p><strong>名前:</strong> <%= @user.name %></p>
                <p><strong>メール:</strong> <%= @user.email if user_signed_in? && @user == current_user %></p>
                <p><strong>登録日:</strong> <%= @user.created_at.strftime("%Y年%m月%d日") %></p>
              </div>
            </div>
            <div class="col-md-8">
              <div class="user-stats">
                <div class="row text-center">
                  <div class="col-4">
                    <div class="stat">
                      <h4 class="mb-0 text-primary"><%= @user.posts.count %></h4>
                      <small class="text-muted">投稿数</small>
                    </div>
                  </div>
                  <div class="col-4">
                    <div class="stat">
                      <h4 class="mb-0 text-success"><%= @user.comments.count %></h4>
                      <small class="text-muted">コメント数</small>
                    </div>
                  </div>
                  <div class="col-4">
                    <div class="stat">
                      <h4 class="mb-0 text-danger"><%= @user.likes.count %></h4>
                      <small class="text-muted">いいね数</small>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <% if user_signed_in? && @user == current_user %>
            <hr>
            <div class="text-center">
              <%= link_to "プロフィール編集", edit_user_account_path, class: "btn btn-primary me-2" %>
              <%= link_to "新規投稿", new_post_path, class: "btn btn-success" %>
            </div>
          <% end %>
        </div>
      </div>

      <!-- ユーザーの投稿一覧 -->
      <div class="card mt-4">
        <div class="card-header">
          <h5 class="mb-0"><%= @user.name %>さんの投稿</h5>
        </div>
        <div class="card-body">
          <% if @user.posts.any? %>
            <% @user.posts.order(created_at: :desc).each do |post| %>
              <div class="border-bottom py-3">
                <h6 class="mb-2">
                  <%= link_to post.title, post_path(post), class: "text-decoration-none" %>
                </h6>
                <div class="text-muted small mb-2">
                  <i class="bi bi-calendar"></i> <%= post.created_at.strftime("%Y年%m月%d日") %>
                  <% if post.category %>
                    <span class="mx-2">|</span>
                    <i class="bi bi-folder"></i> <%= post.category.name %>
                  <% end %>
                  <span class="mx-2">|</span>
                  <i class="bi bi-heart"></i> <%= post.likes.count %>
                  <span class="mx-2">|</span>
                  <i class="bi bi-chat"></i> <%= post.comments.count %>
                </div>
                <p class="mb-0 text-muted">
                  <%= truncate(strip_tags(post.content), length: 100) %>
                </p>
              </div>
            <% end %>
          <% else %>
            <p class="text-muted text-center py-4">
              <i class="bi bi-file-text"></i><br>
              まだ投稿がありません。
            </p>
          <% end %>
        </div>
      </div>

      <!-- 戻るボタン -->
      <div class="mt-4 text-center">
        <%= link_to "トップページに戻る", root_path, class: "btn btn-secondary" %>
      </div>
    </div>
  </div>
</div>