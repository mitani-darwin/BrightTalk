<!DOCTYPE html>
<html>
<head>
  <title>BrightTalk</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <%= csrf_meta_tags %>
  <%= csp_meta_tag %>
  <meta name="csp-nonce" content="<%= content_security_policy_nonce %>">
  <%= favicon_link_tag '/favicon.ico' %>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js" nonce="<%= content_security_policy_nonce %>"></script>

  <%= render "shared/tailwind_styles" %>

  <!-- Google Analytics (GA4) -->
  <% if Rails.env.production? && ENV['GOOGLE_ANALYTICS_ID'].present? %>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=<%= ENV['GOOGLE_ANALYTICS_ID'] %>"></script>
    <script nonce="<%= content_security_policy_nonce %>">
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', '<%= ENV['GOOGLE_ANALYTICS_ID'] %>');
    </script>
  <% end %>

  <!-- Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer"/>

  <!-- Vite client (dev only) and application entry -->
  <%= vite_client_tag if Rails.env.development? %>
  <%= vite_javascript_tag 'application' %>

</head>

<body class="tw min-h-screen bg-slate-50 text-slate-900 antialiased flex flex-col">
<%= render 'shared/navigation' %>

<main class="flex-1 w-full max-w-screen-xl mx-auto px-4 sm:px-6 lg:px-10 py-8">
  <%= render 'shared/flash_messages' %>
  <%= yield %>
</main>
<%= render 'shared/footer' %>
</body>
</html>
