const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/new-Df5F4foJ.js","assets/passkey-r8IpbBKX.js"])))=>i.map(i=>d[i]);
var rD=Object.defineProperty;var ky=r=>{throw TypeError(r)};var sD=(r,e,t)=>e in r?rD(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var ue=(r,e,t)=>sD(r,typeof e!="symbol"?e+"":e,t),Ef=(r,e,t)=>e.has(r)||ky("Cannot "+t);var De=(r,e,t)=>(Ef(r,e,"read from private field"),t?t.call(r):e.get(r)),Xe=(r,e,t)=>e.has(r)?ky("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,t),it=(r,e,t,i)=>(Ef(r,e,"write to private field"),i?i.call(r,t):e.set(r,t),t),Le=(r,e,t)=>(Ef(r,e,"access private method"),t);import{s as nD,a as aD}from"./passkey-r8IpbBKX.js";const oD="modulepreload",lD=function(r){return"/vite/"+r},Ey={},uD=function(e,t,i){let s=Promise.resolve();if(t&&t.length>0){let a=function(u){return Promise.all(u.map(c=>Promise.resolve(c).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=a(t.map(u=>{if(u=lD(u),u in Ey)return;Ey[u]=!0;const c=u.endsWith(".css"),h=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${h}`))return;const f=document.createElement("link");if(f.rel=c?"stylesheet":oD,c||(f.as="script"),f.crossOrigin="",f.href=u,l&&f.setAttribute("nonce",l),document.head.appendChild(f),c)return new Promise((m,S)=>{f.addEventListener("load",m),f.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${u}`)))})}))}function n(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return s.then(a=>{for(const o of a||[])o.status==="rejected"&&n(o.reason);return e().catch(n)})};class cD{constructor(e,t,i){this.eventTarget=e,this.eventName=t,this.eventOptions=i,this.unorderedBindings=new Set}connect(){this.eventTarget.addEventListener(this.eventName,this,this.eventOptions)}disconnect(){this.eventTarget.removeEventListener(this.eventName,this,this.eventOptions)}bindingConnected(e){this.unorderedBindings.add(e)}bindingDisconnected(e){this.unorderedBindings.delete(e)}handleEvent(e){const t=hD(e);for(const i of this.bindings){if(t.immediatePropagationStopped)break;i.handleEvent(t)}}hasBindings(){return this.unorderedBindings.size>0}get bindings(){return Array.from(this.unorderedBindings).sort((e,t)=>{const i=e.index,s=t.index;return i<s?-1:i>s?1:0})}}function hD(r){if("immediatePropagationStopped"in r)return r;{const{stopImmediatePropagation:e}=r;return Object.assign(r,{immediatePropagationStopped:!1,stopImmediatePropagation(){this.immediatePropagationStopped=!0,e.call(this)}})}}class dD{constructor(e){this.application=e,this.eventListenerMaps=new Map,this.started=!1}start(){this.started||(this.started=!0,this.eventListeners.forEach(e=>e.connect()))}stop(){this.started&&(this.started=!1,this.eventListeners.forEach(e=>e.disconnect()))}get eventListeners(){return Array.from(this.eventListenerMaps.values()).reduce((e,t)=>e.concat(Array.from(t.values())),[])}bindingConnected(e){this.fetchEventListenerForBinding(e).bindingConnected(e)}bindingDisconnected(e,t=!1){this.fetchEventListenerForBinding(e).bindingDisconnected(e),t&&this.clearEventListenersForBinding(e)}handleError(e,t,i={}){this.application.handleError(e,`Error ${t}`,i)}clearEventListenersForBinding(e){const t=this.fetchEventListenerForBinding(e);t.hasBindings()||(t.disconnect(),this.removeMappedEventListenerFor(e))}removeMappedEventListenerFor(e){const{eventTarget:t,eventName:i,eventOptions:s}=e,n=this.fetchEventListenerMapForEventTarget(t),a=this.cacheKey(i,s);n.delete(a),n.size==0&&this.eventListenerMaps.delete(t)}fetchEventListenerForBinding(e){const{eventTarget:t,eventName:i,eventOptions:s}=e;return this.fetchEventListener(t,i,s)}fetchEventListener(e,t,i){const s=this.fetchEventListenerMapForEventTarget(e),n=this.cacheKey(t,i);let a=s.get(n);return a||(a=this.createEventListener(e,t,i),s.set(n,a)),a}createEventListener(e,t,i){const s=new cD(e,t,i);return this.started&&s.connect(),s}fetchEventListenerMapForEventTarget(e){let t=this.eventListenerMaps.get(e);return t||(t=new Map,this.eventListenerMaps.set(e,t)),t}cacheKey(e,t){const i=[e];return Object.keys(t).sort().forEach(s=>{i.push(`${t[s]?"":"!"}${s}`)}),i.join(":")}}const fD={stop({event:r,value:e}){return e&&r.stopPropagation(),!0},prevent({event:r,value:e}){return e&&r.preventDefault(),!0},self({event:r,value:e,element:t}){return e?t===r.target:!0}},pD=/^(?:(?:([^.]+?)\+)?(.+?)(?:\.(.+?))?(?:@(window|document))?->)?(.+?)(?:#([^:]+?))(?::(.+))?$/;function mD(r){const t=r.trim().match(pD)||[];let i=t[2],s=t[3];return s&&!["keydown","keyup","keypress"].includes(i)&&(i+=`.${s}`,s=""),{eventTarget:gD(t[4]),eventName:i,eventOptions:t[7]?OD(t[7]):{},identifier:t[5],methodName:t[6],keyFilter:t[1]||s}}function gD(r){if(r=="window")return window;if(r=="document")return document}function OD(r){return r.split(":").reduce((e,t)=>Object.assign(e,{[t.replace(/^!/,"")]:!/^!/.test(t)}),{})}function yD(r){if(r==window)return"window";if(r==document)return"document"}function Vg(r){return r.replace(/(?:[_-])([a-z0-9])/g,(e,t)=>t.toUpperCase())}function tm(r){return Vg(r.replace(/--/g,"-").replace(/__/g,"_"))}function ku(r){return r.charAt(0).toUpperCase()+r.slice(1)}function nT(r){return r.replace(/([A-Z])/g,(e,t)=>`-${t.toLowerCase()}`)}function bD(r){return r.match(/[^\s]+/g)||[]}function Ay(r){return r!=null}function im(r,e){return Object.prototype.hasOwnProperty.call(r,e)}const Py=["meta","ctrl","alt","shift"];class vD{constructor(e,t,i,s){this.element=e,this.index=t,this.eventTarget=i.eventTarget||e,this.eventName=i.eventName||SD(e)||Oc("missing event name"),this.eventOptions=i.eventOptions||{},this.identifier=i.identifier||Oc("missing identifier"),this.methodName=i.methodName||Oc("missing method name"),this.keyFilter=i.keyFilter||"",this.schema=s}static forToken(e,t){return new this(e.element,e.index,mD(e.content),t)}toString(){const e=this.keyFilter?`.${this.keyFilter}`:"",t=this.eventTargetName?`@${this.eventTargetName}`:"";return`${this.eventName}${e}${t}->${this.identifier}#${this.methodName}`}shouldIgnoreKeyboardEvent(e){if(!this.keyFilter)return!1;const t=this.keyFilter.split("+");if(this.keyFilterDissatisfied(e,t))return!0;const i=t.filter(s=>!Py.includes(s))[0];return i?(im(this.keyMappings,i)||Oc(`contains unknown key filter: ${this.keyFilter}`),this.keyMappings[i].toLowerCase()!==e.key.toLowerCase()):!1}shouldIgnoreMouseEvent(e){if(!this.keyFilter)return!1;const t=[this.keyFilter];return!!this.keyFilterDissatisfied(e,t)}get params(){const e={},t=new RegExp(`^data-${this.identifier}-(.+)-param$`,"i");for(const{name:i,value:s}of Array.from(this.element.attributes)){const n=i.match(t),a=n&&n[1];a&&(e[Vg(a)]=TD(s))}return e}get eventTargetName(){return yD(this.eventTarget)}get keyMappings(){return this.schema.keyMappings}keyFilterDissatisfied(e,t){const[i,s,n,a]=Py.map(o=>t.includes(o));return e.metaKey!==i||e.ctrlKey!==s||e.altKey!==n||e.shiftKey!==a}}const Dy={a:()=>"click",button:()=>"click",form:()=>"submit",details:()=>"toggle",input:r=>r.getAttribute("type")=="submit"?"click":"input",select:()=>"change",textarea:()=>"input"};function SD(r){const e=r.tagName.toLowerCase();if(e in Dy)return Dy[e](r)}function Oc(r){throw new Error(r)}function TD(r){try{return JSON.parse(r)}catch{return r}}class _D{constructor(e,t){this.context=e,this.action=t}get index(){return this.action.index}get eventTarget(){return this.action.eventTarget}get eventOptions(){return this.action.eventOptions}get identifier(){return this.context.identifier}handleEvent(e){const t=this.prepareActionEvent(e);this.willBeInvokedByEvent(e)&&this.applyEventModifiers(t)&&this.invokeWithEvent(t)}get eventName(){return this.action.eventName}get method(){const e=this.controller[this.methodName];if(typeof e=="function")return e;throw new Error(`Action "${this.action}" references undefined method "${this.methodName}"`)}applyEventModifiers(e){const{element:t}=this.action,{actionDescriptorFilters:i}=this.context.application,{controller:s}=this.context;let n=!0;for(const[a,o]of Object.entries(this.eventOptions))if(a in i){const l=i[a];n=n&&l({name:a,value:o,event:e,element:t,controller:s})}else continue;return n}prepareActionEvent(e){return Object.assign(e,{params:this.action.params})}invokeWithEvent(e){const{target:t,currentTarget:i}=e;try{this.method.call(this.controller,e),this.context.logDebugActivity(this.methodName,{event:e,target:t,currentTarget:i,action:this.methodName})}catch(s){const{identifier:n,controller:a,element:o,index:l}=this,u={identifier:n,controller:a,element:o,index:l,event:e};this.context.handleError(s,`invoking action "${this.action}"`,u)}}willBeInvokedByEvent(e){const t=e.target;return e instanceof KeyboardEvent&&this.action.shouldIgnoreKeyboardEvent(e)||e instanceof MouseEvent&&this.action.shouldIgnoreMouseEvent(e)?!1:this.element===t?!0:t instanceof Element&&this.element.contains(t)?this.scope.containsElement(t):this.scope.containsElement(this.action.element)}get controller(){return this.context.controller}get methodName(){return this.action.methodName}get element(){return this.scope.element}get scope(){return this.context.scope}}class aT{constructor(e,t){this.mutationObserverInit={attributes:!0,childList:!0,subtree:!0},this.element=e,this.started=!1,this.delegate=t,this.elements=new Set,this.mutationObserver=new MutationObserver(i=>this.processMutations(i))}start(){this.started||(this.started=!0,this.mutationObserver.observe(this.element,this.mutationObserverInit),this.refresh())}pause(e){this.started&&(this.mutationObserver.disconnect(),this.started=!1),e(),this.started||(this.mutationObserver.observe(this.element,this.mutationObserverInit),this.started=!0)}stop(){this.started&&(this.mutationObserver.takeRecords(),this.mutationObserver.disconnect(),this.started=!1)}refresh(){if(this.started){const e=new Set(this.matchElementsInTree());for(const t of Array.from(this.elements))e.has(t)||this.removeElement(t);for(const t of Array.from(e))this.addElement(t)}}processMutations(e){if(this.started)for(const t of e)this.processMutation(t)}processMutation(e){e.type=="attributes"?this.processAttributeChange(e.target,e.attributeName):e.type=="childList"&&(this.processRemovedNodes(e.removedNodes),this.processAddedNodes(e.addedNodes))}processAttributeChange(e,t){this.elements.has(e)?this.delegate.elementAttributeChanged&&this.matchElement(e)?this.delegate.elementAttributeChanged(e,t):this.removeElement(e):this.matchElement(e)&&this.addElement(e)}processRemovedNodes(e){for(const t of Array.from(e)){const i=this.elementFromNode(t);i&&this.processTree(i,this.removeElement)}}processAddedNodes(e){for(const t of Array.from(e)){const i=this.elementFromNode(t);i&&this.elementIsActive(i)&&this.processTree(i,this.addElement)}}matchElement(e){return this.delegate.matchElement(e)}matchElementsInTree(e=this.element){return this.delegate.matchElementsInTree(e)}processTree(e,t){for(const i of this.matchElementsInTree(e))t.call(this,i)}elementFromNode(e){if(e.nodeType==Node.ELEMENT_NODE)return e}elementIsActive(e){return e.isConnected!=this.element.isConnected?!1:this.element.contains(e)}addElement(e){this.elements.has(e)||this.elementIsActive(e)&&(this.elements.add(e),this.delegate.elementMatched&&this.delegate.elementMatched(e))}removeElement(e){this.elements.has(e)&&(this.elements.delete(e),this.delegate.elementUnmatched&&this.delegate.elementUnmatched(e))}}class oT{constructor(e,t,i){this.attributeName=t,this.delegate=i,this.elementObserver=new aT(e,this)}get element(){return this.elementObserver.element}get selector(){return`[${this.attributeName}]`}start(){this.elementObserver.start()}pause(e){this.elementObserver.pause(e)}stop(){this.elementObserver.stop()}refresh(){this.elementObserver.refresh()}get started(){return this.elementObserver.started}matchElement(e){return e.hasAttribute(this.attributeName)}matchElementsInTree(e){const t=this.matchElement(e)?[e]:[],i=Array.from(e.querySelectorAll(this.selector));return t.concat(i)}elementMatched(e){this.delegate.elementMatchedAttribute&&this.delegate.elementMatchedAttribute(e,this.attributeName)}elementUnmatched(e){this.delegate.elementUnmatchedAttribute&&this.delegate.elementUnmatchedAttribute(e,this.attributeName)}elementAttributeChanged(e,t){this.delegate.elementAttributeValueChanged&&this.attributeName==t&&this.delegate.elementAttributeValueChanged(e,t)}}function xD(r,e,t){lT(r,e).add(t)}function wD(r,e,t){lT(r,e).delete(t),CD(r,e)}function lT(r,e){let t=r.get(e);return t||(t=new Set,r.set(e,t)),t}function CD(r,e){const t=r.get(e);t!=null&&t.size==0&&r.delete(e)}class Bn{constructor(){this.valuesByKey=new Map}get keys(){return Array.from(this.valuesByKey.keys())}get values(){return Array.from(this.valuesByKey.values()).reduce((t,i)=>t.concat(Array.from(i)),[])}get size(){return Array.from(this.valuesByKey.values()).reduce((t,i)=>t+i.size,0)}add(e,t){xD(this.valuesByKey,e,t)}delete(e,t){wD(this.valuesByKey,e,t)}has(e,t){const i=this.valuesByKey.get(e);return i!=null&&i.has(t)}hasKey(e){return this.valuesByKey.has(e)}hasValue(e){return Array.from(this.valuesByKey.values()).some(i=>i.has(e))}getValuesForKey(e){const t=this.valuesByKey.get(e);return t?Array.from(t):[]}getKeysForValue(e){return Array.from(this.valuesByKey).filter(([t,i])=>i.has(e)).map(([t,i])=>t)}}class kD{constructor(e,t,i,s){this._selector=t,this.details=s,this.elementObserver=new aT(e,this),this.delegate=i,this.matchesByElement=new Bn}get started(){return this.elementObserver.started}get selector(){return this._selector}set selector(e){this._selector=e,this.refresh()}start(){this.elementObserver.start()}pause(e){this.elementObserver.pause(e)}stop(){this.elementObserver.stop()}refresh(){this.elementObserver.refresh()}get element(){return this.elementObserver.element}matchElement(e){const{selector:t}=this;if(t){const i=e.matches(t);return this.delegate.selectorMatchElement?i&&this.delegate.selectorMatchElement(e,this.details):i}else return!1}matchElementsInTree(e){const{selector:t}=this;if(t){const i=this.matchElement(e)?[e]:[],s=Array.from(e.querySelectorAll(t)).filter(n=>this.matchElement(n));return i.concat(s)}else return[]}elementMatched(e){const{selector:t}=this;t&&this.selectorMatched(e,t)}elementUnmatched(e){const t=this.matchesByElement.getKeysForValue(e);for(const i of t)this.selectorUnmatched(e,i)}elementAttributeChanged(e,t){const{selector:i}=this;if(i){const s=this.matchElement(e),n=this.matchesByElement.has(i,e);s&&!n?this.selectorMatched(e,i):!s&&n&&this.selectorUnmatched(e,i)}}selectorMatched(e,t){this.delegate.selectorMatched(e,t,this.details),this.matchesByElement.add(t,e)}selectorUnmatched(e,t){this.delegate.selectorUnmatched(e,t,this.details),this.matchesByElement.delete(t,e)}}class ED{constructor(e,t){this.element=e,this.delegate=t,this.started=!1,this.stringMap=new Map,this.mutationObserver=new MutationObserver(i=>this.processMutations(i))}start(){this.started||(this.started=!0,this.mutationObserver.observe(this.element,{attributes:!0,attributeOldValue:!0}),this.refresh())}stop(){this.started&&(this.mutationObserver.takeRecords(),this.mutationObserver.disconnect(),this.started=!1)}refresh(){if(this.started)for(const e of this.knownAttributeNames)this.refreshAttribute(e,null)}processMutations(e){if(this.started)for(const t of e)this.processMutation(t)}processMutation(e){const t=e.attributeName;t&&this.refreshAttribute(t,e.oldValue)}refreshAttribute(e,t){const i=this.delegate.getStringMapKeyForAttribute(e);if(i!=null){this.stringMap.has(e)||this.stringMapKeyAdded(i,e);const s=this.element.getAttribute(e);if(this.stringMap.get(e)!=s&&this.stringMapValueChanged(s,i,t),s==null){const n=this.stringMap.get(e);this.stringMap.delete(e),n&&this.stringMapKeyRemoved(i,e,n)}else this.stringMap.set(e,s)}}stringMapKeyAdded(e,t){this.delegate.stringMapKeyAdded&&this.delegate.stringMapKeyAdded(e,t)}stringMapValueChanged(e,t,i){this.delegate.stringMapValueChanged&&this.delegate.stringMapValueChanged(e,t,i)}stringMapKeyRemoved(e,t,i){this.delegate.stringMapKeyRemoved&&this.delegate.stringMapKeyRemoved(e,t,i)}get knownAttributeNames(){return Array.from(new Set(this.currentAttributeNames.concat(this.recordedAttributeNames)))}get currentAttributeNames(){return Array.from(this.element.attributes).map(e=>e.name)}get recordedAttributeNames(){return Array.from(this.stringMap.keys())}}class uT{constructor(e,t,i){this.attributeObserver=new oT(e,t,this),this.delegate=i,this.tokensByElement=new Bn}get started(){return this.attributeObserver.started}start(){this.attributeObserver.start()}pause(e){this.attributeObserver.pause(e)}stop(){this.attributeObserver.stop()}refresh(){this.attributeObserver.refresh()}get element(){return this.attributeObserver.element}get attributeName(){return this.attributeObserver.attributeName}elementMatchedAttribute(e){this.tokensMatched(this.readTokensForElement(e))}elementAttributeValueChanged(e){const[t,i]=this.refreshTokensForElement(e);this.tokensUnmatched(t),this.tokensMatched(i)}elementUnmatchedAttribute(e){this.tokensUnmatched(this.tokensByElement.getValuesForKey(e))}tokensMatched(e){e.forEach(t=>this.tokenMatched(t))}tokensUnmatched(e){e.forEach(t=>this.tokenUnmatched(t))}tokenMatched(e){this.delegate.tokenMatched(e),this.tokensByElement.add(e.element,e)}tokenUnmatched(e){this.delegate.tokenUnmatched(e),this.tokensByElement.delete(e.element,e)}refreshTokensForElement(e){const t=this.tokensByElement.getValuesForKey(e),i=this.readTokensForElement(e),s=PD(t,i).findIndex(([n,a])=>!DD(n,a));return s==-1?[[],[]]:[t.slice(s),i.slice(s)]}readTokensForElement(e){const t=this.attributeName,i=e.getAttribute(t)||"";return AD(i,e,t)}}function AD(r,e,t){return r.trim().split(/\s+/).filter(i=>i.length).map((i,s)=>({element:e,attributeName:t,content:i,index:s}))}function PD(r,e){const t=Math.max(r.length,e.length);return Array.from({length:t},(i,s)=>[r[s],e[s]])}function DD(r,e){return r&&e&&r.index==e.index&&r.content==e.content}class cT{constructor(e,t,i){this.tokenListObserver=new uT(e,t,this),this.delegate=i,this.parseResultsByToken=new WeakMap,this.valuesByTokenByElement=new WeakMap}get started(){return this.tokenListObserver.started}start(){this.tokenListObserver.start()}stop(){this.tokenListObserver.stop()}refresh(){this.tokenListObserver.refresh()}get element(){return this.tokenListObserver.element}get attributeName(){return this.tokenListObserver.attributeName}tokenMatched(e){const{element:t}=e,{value:i}=this.fetchParseResultForToken(e);i&&(this.fetchValuesByTokenForElement(t).set(e,i),this.delegate.elementMatchedValue(t,i))}tokenUnmatched(e){const{element:t}=e,{value:i}=this.fetchParseResultForToken(e);i&&(this.fetchValuesByTokenForElement(t).delete(e),this.delegate.elementUnmatchedValue(t,i))}fetchParseResultForToken(e){let t=this.parseResultsByToken.get(e);return t||(t=this.parseToken(e),this.parseResultsByToken.set(e,t)),t}fetchValuesByTokenForElement(e){let t=this.valuesByTokenByElement.get(e);return t||(t=new Map,this.valuesByTokenByElement.set(e,t)),t}parseToken(e){try{return{value:this.delegate.parseValueForToken(e)}}catch(t){return{error:t}}}}class MD{constructor(e,t){this.context=e,this.delegate=t,this.bindingsByAction=new Map}start(){this.valueListObserver||(this.valueListObserver=new cT(this.element,this.actionAttribute,this),this.valueListObserver.start())}stop(){this.valueListObserver&&(this.valueListObserver.stop(),delete this.valueListObserver,this.disconnectAllActions())}get element(){return this.context.element}get identifier(){return this.context.identifier}get actionAttribute(){return this.schema.actionAttribute}get schema(){return this.context.schema}get bindings(){return Array.from(this.bindingsByAction.values())}connectAction(e){const t=new _D(this.context,e);this.bindingsByAction.set(e,t),this.delegate.bindingConnected(t)}disconnectAction(e){const t=this.bindingsByAction.get(e);t&&(this.bindingsByAction.delete(e),this.delegate.bindingDisconnected(t))}disconnectAllActions(){this.bindings.forEach(e=>this.delegate.bindingDisconnected(e,!0)),this.bindingsByAction.clear()}parseValueForToken(e){const t=vD.forToken(e,this.schema);if(t.identifier==this.identifier)return t}elementMatchedValue(e,t){this.connectAction(t)}elementUnmatchedValue(e,t){this.disconnectAction(t)}}class ID{constructor(e,t){this.context=e,this.receiver=t,this.stringMapObserver=new ED(this.element,this),this.valueDescriptorMap=this.controller.valueDescriptorMap}start(){this.stringMapObserver.start(),this.invokeChangedCallbacksForDefaultValues()}stop(){this.stringMapObserver.stop()}get element(){return this.context.element}get controller(){return this.context.controller}getStringMapKeyForAttribute(e){if(e in this.valueDescriptorMap)return this.valueDescriptorMap[e].name}stringMapKeyAdded(e,t){const i=this.valueDescriptorMap[t];this.hasValue(e)||this.invokeChangedCallback(e,i.writer(this.receiver[e]),i.writer(i.defaultValue))}stringMapValueChanged(e,t,i){const s=this.valueDescriptorNameMap[t];e!==null&&(i===null&&(i=s.writer(s.defaultValue)),this.invokeChangedCallback(t,e,i))}stringMapKeyRemoved(e,t,i){const s=this.valueDescriptorNameMap[e];this.hasValue(e)?this.invokeChangedCallback(e,s.writer(this.receiver[e]),i):this.invokeChangedCallback(e,s.writer(s.defaultValue),i)}invokeChangedCallbacksForDefaultValues(){for(const{key:e,name:t,defaultValue:i,writer:s}of this.valueDescriptors)i!=null&&!this.controller.data.has(e)&&this.invokeChangedCallback(t,s(i),void 0)}invokeChangedCallback(e,t,i){const s=`${e}Changed`,n=this.receiver[s];if(typeof n=="function"){const a=this.valueDescriptorNameMap[e];try{const o=a.reader(t);let l=i;i&&(l=a.reader(i)),n.call(this.receiver,o,l)}catch(o){throw o instanceof TypeError&&(o.message=`Stimulus Value "${this.context.identifier}.${a.name}" - ${o.message}`),o}}}get valueDescriptors(){const{valueDescriptorMap:e}=this;return Object.keys(e).map(t=>e[t])}get valueDescriptorNameMap(){const e={};return Object.keys(this.valueDescriptorMap).forEach(t=>{const i=this.valueDescriptorMap[t];e[i.name]=i}),e}hasValue(e){const t=this.valueDescriptorNameMap[e],i=`has${ku(t.name)}`;return this.receiver[i]}}class RD{constructor(e,t){this.context=e,this.delegate=t,this.targetsByName=new Bn}start(){this.tokenListObserver||(this.tokenListObserver=new uT(this.element,this.attributeName,this),this.tokenListObserver.start())}stop(){this.tokenListObserver&&(this.disconnectAllTargets(),this.tokenListObserver.stop(),delete this.tokenListObserver)}tokenMatched({element:e,content:t}){this.scope.containsElement(e)&&this.connectTarget(e,t)}tokenUnmatched({element:e,content:t}){this.disconnectTarget(e,t)}connectTarget(e,t){var i;this.targetsByName.has(t,e)||(this.targetsByName.add(t,e),(i=this.tokenListObserver)===null||i===void 0||i.pause(()=>this.delegate.targetConnected(e,t)))}disconnectTarget(e,t){var i;this.targetsByName.has(t,e)&&(this.targetsByName.delete(t,e),(i=this.tokenListObserver)===null||i===void 0||i.pause(()=>this.delegate.targetDisconnected(e,t)))}disconnectAllTargets(){for(const e of this.targetsByName.keys)for(const t of this.targetsByName.getValuesForKey(e))this.disconnectTarget(t,e)}get attributeName(){return`data-${this.context.identifier}-target`}get element(){return this.context.element}get scope(){return this.context.scope}}function Eu(r,e){const t=hT(r);return Array.from(t.reduce((i,s)=>(QD(s,e).forEach(n=>i.add(n)),i),new Set))}function LD(r,e){return hT(r).reduce((i,s)=>(i.push(...$D(s,e)),i),[])}function hT(r){const e=[];for(;r;)e.push(r),r=Object.getPrototypeOf(r);return e.reverse()}function QD(r,e){const t=r[e];return Array.isArray(t)?t:[]}function $D(r,e){const t=r[e];return t?Object.keys(t).map(i=>[i,t[i]]):[]}class BD{constructor(e,t){this.started=!1,this.context=e,this.delegate=t,this.outletsByName=new Bn,this.outletElementsByName=new Bn,this.selectorObserverMap=new Map,this.attributeObserverMap=new Map}start(){this.started||(this.outletDefinitions.forEach(e=>{this.setupSelectorObserverForOutlet(e),this.setupAttributeObserverForOutlet(e)}),this.started=!0,this.dependentContexts.forEach(e=>e.refresh()))}refresh(){this.selectorObserverMap.forEach(e=>e.refresh()),this.attributeObserverMap.forEach(e=>e.refresh())}stop(){this.started&&(this.started=!1,this.disconnectAllOutlets(),this.stopSelectorObservers(),this.stopAttributeObservers())}stopSelectorObservers(){this.selectorObserverMap.size>0&&(this.selectorObserverMap.forEach(e=>e.stop()),this.selectorObserverMap.clear())}stopAttributeObservers(){this.attributeObserverMap.size>0&&(this.attributeObserverMap.forEach(e=>e.stop()),this.attributeObserverMap.clear())}selectorMatched(e,t,{outletName:i}){const s=this.getOutlet(e,i);s&&this.connectOutlet(s,e,i)}selectorUnmatched(e,t,{outletName:i}){const s=this.getOutletFromMap(e,i);s&&this.disconnectOutlet(s,e,i)}selectorMatchElement(e,{outletName:t}){const i=this.selector(t),s=this.hasOutlet(e,t),n=e.matches(`[${this.schema.controllerAttribute}~=${t}]`);return i?s&&n&&e.matches(i):!1}elementMatchedAttribute(e,t){const i=this.getOutletNameFromOutletAttributeName(t);i&&this.updateSelectorObserverForOutlet(i)}elementAttributeValueChanged(e,t){const i=this.getOutletNameFromOutletAttributeName(t);i&&this.updateSelectorObserverForOutlet(i)}elementUnmatchedAttribute(e,t){const i=this.getOutletNameFromOutletAttributeName(t);i&&this.updateSelectorObserverForOutlet(i)}connectOutlet(e,t,i){var s;this.outletElementsByName.has(i,t)||(this.outletsByName.add(i,e),this.outletElementsByName.add(i,t),(s=this.selectorObserverMap.get(i))===null||s===void 0||s.pause(()=>this.delegate.outletConnected(e,t,i)))}disconnectOutlet(e,t,i){var s;this.outletElementsByName.has(i,t)&&(this.outletsByName.delete(i,e),this.outletElementsByName.delete(i,t),(s=this.selectorObserverMap.get(i))===null||s===void 0||s.pause(()=>this.delegate.outletDisconnected(e,t,i)))}disconnectAllOutlets(){for(const e of this.outletElementsByName.keys)for(const t of this.outletElementsByName.getValuesForKey(e))for(const i of this.outletsByName.getValuesForKey(e))this.disconnectOutlet(i,t,e)}updateSelectorObserverForOutlet(e){const t=this.selectorObserverMap.get(e);t&&(t.selector=this.selector(e))}setupSelectorObserverForOutlet(e){const t=this.selector(e),i=new kD(document.body,t,this,{outletName:e});this.selectorObserverMap.set(e,i),i.start()}setupAttributeObserverForOutlet(e){const t=this.attributeNameForOutletName(e),i=new oT(this.scope.element,t,this);this.attributeObserverMap.set(e,i),i.start()}selector(e){return this.scope.outlets.getSelectorForOutletName(e)}attributeNameForOutletName(e){return this.scope.schema.outletAttributeForScope(this.identifier,e)}getOutletNameFromOutletAttributeName(e){return this.outletDefinitions.find(t=>this.attributeNameForOutletName(t)===e)}get outletDependencies(){const e=new Bn;return this.router.modules.forEach(t=>{const i=t.definition.controllerConstructor;Eu(i,"outlets").forEach(n=>e.add(n,t.identifier))}),e}get outletDefinitions(){return this.outletDependencies.getKeysForValue(this.identifier)}get dependentControllerIdentifiers(){return this.outletDependencies.getValuesForKey(this.identifier)}get dependentContexts(){const e=this.dependentControllerIdentifiers;return this.router.contexts.filter(t=>e.includes(t.identifier))}hasOutlet(e,t){return!!this.getOutlet(e,t)||!!this.getOutletFromMap(e,t)}getOutlet(e,t){return this.application.getControllerForElementAndIdentifier(e,t)}getOutletFromMap(e,t){return this.outletsByName.getValuesForKey(t).find(i=>i.element===e)}get scope(){return this.context.scope}get schema(){return this.context.schema}get identifier(){return this.context.identifier}get application(){return this.context.application}get router(){return this.application.router}}let ND=class{constructor(e,t){this.logDebugActivity=(i,s={})=>{const{identifier:n,controller:a,element:o}=this;s=Object.assign({identifier:n,controller:a,element:o},s),this.application.logDebugActivity(this.identifier,i,s)},this.module=e,this.scope=t,this.controller=new e.controllerConstructor(this),this.bindingObserver=new MD(this,this.dispatcher),this.valueObserver=new ID(this,this.controller),this.targetObserver=new RD(this,this),this.outletObserver=new BD(this,this);try{this.controller.initialize(),this.logDebugActivity("initialize")}catch(i){this.handleError(i,"initializing controller")}}connect(){this.bindingObserver.start(),this.valueObserver.start(),this.targetObserver.start(),this.outletObserver.start();try{this.controller.connect(),this.logDebugActivity("connect")}catch(e){this.handleError(e,"connecting controller")}}refresh(){this.outletObserver.refresh()}disconnect(){try{this.controller.disconnect(),this.logDebugActivity("disconnect")}catch(e){this.handleError(e,"disconnecting controller")}this.outletObserver.stop(),this.targetObserver.stop(),this.valueObserver.stop(),this.bindingObserver.stop()}get application(){return this.module.application}get identifier(){return this.module.identifier}get schema(){return this.application.schema}get dispatcher(){return this.application.dispatcher}get element(){return this.scope.element}get parentElement(){return this.element.parentElement}handleError(e,t,i={}){const{identifier:s,controller:n,element:a}=this;i=Object.assign({identifier:s,controller:n,element:a},i),this.application.handleError(e,`Error ${t}`,i)}targetConnected(e,t){this.invokeControllerMethod(`${t}TargetConnected`,e)}targetDisconnected(e,t){this.invokeControllerMethod(`${t}TargetDisconnected`,e)}outletConnected(e,t,i){this.invokeControllerMethod(`${tm(i)}OutletConnected`,e,t)}outletDisconnected(e,t,i){this.invokeControllerMethod(`${tm(i)}OutletDisconnected`,e,t)}invokeControllerMethod(e,...t){const i=this.controller;typeof i[e]=="function"&&i[e](...t)}};function FD(r){return UD(r,qD(r))}function UD(r,e){const t=zD(r),i=VD(r.prototype,e);return Object.defineProperties(t.prototype,i),t}function qD(r){return Eu(r,"blessings").reduce((t,i)=>{const s=i(r);for(const n in s){const a=t[n]||{};t[n]=Object.assign(a,s[n])}return t},{})}function VD(r,e){return jD(e).reduce((t,i)=>{const s=XD(r,e,i);return s&&Object.assign(t,{[i]:s}),t},{})}function XD(r,e,t){const i=Object.getOwnPropertyDescriptor(r,t);if(!(i&&"value"in i)){const n=Object.getOwnPropertyDescriptor(e,t).value;return i&&(n.get=i.get||n.get,n.set=i.set||n.set),n}}const jD=typeof Object.getOwnPropertySymbols=="function"?r=>[...Object.getOwnPropertyNames(r),...Object.getOwnPropertySymbols(r)]:Object.getOwnPropertyNames,zD=(()=>{function r(t){function i(){return Reflect.construct(t,arguments,new.target)}return i.prototype=Object.create(t.prototype,{constructor:{value:i}}),Reflect.setPrototypeOf(i,t),i}function e(){const i=r(function(){this.a.call(this)});return i.prototype.a=function(){},new i}try{return e(),r}catch{return i=>class extends i{}}})();function ZD(r){return{identifier:r.identifier,controllerConstructor:FD(r.controllerConstructor)}}class WD{constructor(e,t){this.application=e,this.definition=ZD(t),this.contextsByScope=new WeakMap,this.connectedContexts=new Set}get identifier(){return this.definition.identifier}get controllerConstructor(){return this.definition.controllerConstructor}get contexts(){return Array.from(this.connectedContexts)}connectContextForScope(e){const t=this.fetchContextForScope(e);this.connectedContexts.add(t),t.connect()}disconnectContextForScope(e){const t=this.contextsByScope.get(e);t&&(this.connectedContexts.delete(t),t.disconnect())}fetchContextForScope(e){let t=this.contextsByScope.get(e);return t||(t=new ND(this,e),this.contextsByScope.set(e,t)),t}}class HD{constructor(e){this.scope=e}has(e){return this.data.has(this.getDataKey(e))}get(e){return this.getAll(e)[0]}getAll(e){const t=this.data.get(this.getDataKey(e))||"";return bD(t)}getAttributeName(e){return this.data.getAttributeNameForKey(this.getDataKey(e))}getDataKey(e){return`${e}-class`}get data(){return this.scope.data}}class YD{constructor(e){this.scope=e}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get(e){const t=this.getAttributeNameForKey(e);return this.element.getAttribute(t)}set(e,t){const i=this.getAttributeNameForKey(e);return this.element.setAttribute(i,t),this.get(e)}has(e){const t=this.getAttributeNameForKey(e);return this.element.hasAttribute(t)}delete(e){if(this.has(e)){const t=this.getAttributeNameForKey(e);return this.element.removeAttribute(t),!0}else return!1}getAttributeNameForKey(e){return`data-${this.identifier}-${nT(e)}`}}class GD{constructor(e){this.warnedKeysByObject=new WeakMap,this.logger=e}warn(e,t,i){let s=this.warnedKeysByObject.get(e);s||(s=new Set,this.warnedKeysByObject.set(e,s)),s.has(t)||(s.add(t),this.logger.warn(i,e))}}function rm(r,e){return`[${r}~="${e}"]`}class KD{constructor(e){this.scope=e}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get schema(){return this.scope.schema}has(e){return this.find(e)!=null}find(...e){return e.reduce((t,i)=>t||this.findTarget(i)||this.findLegacyTarget(i),void 0)}findAll(...e){return e.reduce((t,i)=>[...t,...this.findAllTargets(i),...this.findAllLegacyTargets(i)],[])}findTarget(e){const t=this.getSelectorForTargetName(e);return this.scope.findElement(t)}findAllTargets(e){const t=this.getSelectorForTargetName(e);return this.scope.findAllElements(t)}getSelectorForTargetName(e){const t=this.schema.targetAttributeForScope(this.identifier);return rm(t,e)}findLegacyTarget(e){const t=this.getLegacySelectorForTargetName(e);return this.deprecate(this.scope.findElement(t),e)}findAllLegacyTargets(e){const t=this.getLegacySelectorForTargetName(e);return this.scope.findAllElements(t).map(i=>this.deprecate(i,e))}getLegacySelectorForTargetName(e){const t=`${this.identifier}.${e}`;return rm(this.schema.targetAttribute,t)}deprecate(e,t){if(e){const{identifier:i}=this,s=this.schema.targetAttribute,n=this.schema.targetAttributeForScope(i);this.guide.warn(e,`target:${t}`,`Please replace ${s}="${i}.${t}" with ${n}="${t}". The ${s} attribute is deprecated and will be removed in a future version of Stimulus.`)}return e}get guide(){return this.scope.guide}}class JD{constructor(e,t){this.scope=e,this.controllerElement=t}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get schema(){return this.scope.schema}has(e){return this.find(e)!=null}find(...e){return e.reduce((t,i)=>t||this.findOutlet(i),void 0)}findAll(...e){return e.reduce((t,i)=>[...t,...this.findAllOutlets(i)],[])}getSelectorForOutletName(e){const t=this.schema.outletAttributeForScope(this.identifier,e);return this.controllerElement.getAttribute(t)}findOutlet(e){const t=this.getSelectorForOutletName(e);if(t)return this.findElement(t,e)}findAllOutlets(e){const t=this.getSelectorForOutletName(e);return t?this.findAllElements(t,e):[]}findElement(e,t){return this.scope.queryElements(e).filter(s=>this.matchesElement(s,e,t))[0]}findAllElements(e,t){return this.scope.queryElements(e).filter(s=>this.matchesElement(s,e,t))}matchesElement(e,t,i){const s=e.getAttribute(this.scope.schema.controllerAttribute)||"";return e.matches(t)&&s.split(" ").includes(i)}}class Xg{constructor(e,t,i,s){this.targets=new KD(this),this.classes=new HD(this),this.data=new YD(this),this.containsElement=n=>n.closest(this.controllerSelector)===this.element,this.schema=e,this.element=t,this.identifier=i,this.guide=new GD(s),this.outlets=new JD(this.documentScope,t)}findElement(e){return this.element.matches(e)?this.element:this.queryElements(e).find(this.containsElement)}findAllElements(e){return[...this.element.matches(e)?[this.element]:[],...this.queryElements(e).filter(this.containsElement)]}queryElements(e){return Array.from(this.element.querySelectorAll(e))}get controllerSelector(){return rm(this.schema.controllerAttribute,this.identifier)}get isDocumentScope(){return this.element===document.documentElement}get documentScope(){return this.isDocumentScope?this:new Xg(this.schema,document.documentElement,this.identifier,this.guide.logger)}}class eM{constructor(e,t,i){this.element=e,this.schema=t,this.delegate=i,this.valueListObserver=new cT(this.element,this.controllerAttribute,this),this.scopesByIdentifierByElement=new WeakMap,this.scopeReferenceCounts=new WeakMap}start(){this.valueListObserver.start()}stop(){this.valueListObserver.stop()}get controllerAttribute(){return this.schema.controllerAttribute}parseValueForToken(e){const{element:t,content:i}=e;return this.parseValueForElementAndIdentifier(t,i)}parseValueForElementAndIdentifier(e,t){const i=this.fetchScopesByIdentifierForElement(e);let s=i.get(t);return s||(s=this.delegate.createScopeForElementAndIdentifier(e,t),i.set(t,s)),s}elementMatchedValue(e,t){const i=(this.scopeReferenceCounts.get(t)||0)+1;this.scopeReferenceCounts.set(t,i),i==1&&this.delegate.scopeConnected(t)}elementUnmatchedValue(e,t){const i=this.scopeReferenceCounts.get(t);i&&(this.scopeReferenceCounts.set(t,i-1),i==1&&this.delegate.scopeDisconnected(t))}fetchScopesByIdentifierForElement(e){let t=this.scopesByIdentifierByElement.get(e);return t||(t=new Map,this.scopesByIdentifierByElement.set(e,t)),t}}class tM{constructor(e){this.application=e,this.scopeObserver=new eM(this.element,this.schema,this),this.scopesByIdentifier=new Bn,this.modulesByIdentifier=new Map}get element(){return this.application.element}get schema(){return this.application.schema}get logger(){return this.application.logger}get controllerAttribute(){return this.schema.controllerAttribute}get modules(){return Array.from(this.modulesByIdentifier.values())}get contexts(){return this.modules.reduce((e,t)=>e.concat(t.contexts),[])}start(){this.scopeObserver.start()}stop(){this.scopeObserver.stop()}loadDefinition(e){this.unloadIdentifier(e.identifier);const t=new WD(this.application,e);this.connectModule(t);const i=e.controllerConstructor.afterLoad;i&&i.call(e.controllerConstructor,e.identifier,this.application)}unloadIdentifier(e){const t=this.modulesByIdentifier.get(e);t&&this.disconnectModule(t)}getContextForElementAndIdentifier(e,t){const i=this.modulesByIdentifier.get(t);if(i)return i.contexts.find(s=>s.element==e)}proposeToConnectScopeForElementAndIdentifier(e,t){const i=this.scopeObserver.parseValueForElementAndIdentifier(e,t);i?this.scopeObserver.elementMatchedValue(i.element,i):console.error(`Couldn't find or create scope for identifier: "${t}" and element:`,e)}handleError(e,t,i){this.application.handleError(e,t,i)}createScopeForElementAndIdentifier(e,t){return new Xg(this.schema,e,t,this.logger)}scopeConnected(e){this.scopesByIdentifier.add(e.identifier,e);const t=this.modulesByIdentifier.get(e.identifier);t&&t.connectContextForScope(e)}scopeDisconnected(e){this.scopesByIdentifier.delete(e.identifier,e);const t=this.modulesByIdentifier.get(e.identifier);t&&t.disconnectContextForScope(e)}connectModule(e){this.modulesByIdentifier.set(e.identifier,e),this.scopesByIdentifier.getValuesForKey(e.identifier).forEach(i=>e.connectContextForScope(i))}disconnectModule(e){this.modulesByIdentifier.delete(e.identifier),this.scopesByIdentifier.getValuesForKey(e.identifier).forEach(i=>e.disconnectContextForScope(i))}}const iM={controllerAttribute:"data-controller",actionAttribute:"data-action",targetAttribute:"data-target",targetAttributeForScope:r=>`data-${r}-target`,outletAttributeForScope:(r,e)=>`data-${r}-${e}-outlet`,keyMappings:Object.assign(Object.assign({enter:"Enter",tab:"Tab",esc:"Escape",space:" ",up:"ArrowUp",down:"ArrowDown",left:"ArrowLeft",right:"ArrowRight",home:"Home",end:"End",page_up:"PageUp",page_down:"PageDown"},My("abcdefghijklmnopqrstuvwxyz".split("").map(r=>[r,r]))),My("0123456789".split("").map(r=>[r,r])))};function My(r){return r.reduce((e,[t,i])=>Object.assign(Object.assign({},e),{[t]:i}),{})}class rM{constructor(e=document.documentElement,t=iM){this.logger=console,this.debug=!1,this.logDebugActivity=(i,s,n={})=>{this.debug&&this.logFormattedMessage(i,s,n)},this.element=e,this.schema=t,this.dispatcher=new dD(this),this.router=new tM(this),this.actionDescriptorFilters=Object.assign({},fD)}static start(e,t){const i=new this(e,t);return i.start(),i}async start(){await sM(),this.logDebugActivity("application","starting"),this.dispatcher.start(),this.router.start(),this.logDebugActivity("application","start")}stop(){this.logDebugActivity("application","stopping"),this.dispatcher.stop(),this.router.stop(),this.logDebugActivity("application","stop")}register(e,t){this.load({identifier:e,controllerConstructor:t})}registerActionOption(e,t){this.actionDescriptorFilters[e]=t}load(e,...t){(Array.isArray(e)?e:[e,...t]).forEach(s=>{s.controllerConstructor.shouldLoad&&this.router.loadDefinition(s)})}unload(e,...t){(Array.isArray(e)?e:[e,...t]).forEach(s=>this.router.unloadIdentifier(s))}get controllers(){return this.router.contexts.map(e=>e.controller)}getControllerForElementAndIdentifier(e,t){const i=this.router.getContextForElementAndIdentifier(e,t);return i?i.controller:null}handleError(e,t,i){var s;this.logger.error(`%s

%o

%o`,t,e,i),(s=window.onerror)===null||s===void 0||s.call(window,t,"",0,0,e)}logFormattedMessage(e,t,i={}){i=Object.assign({application:this},i),this.logger.groupCollapsed(`${e} #${t}`),this.logger.log("details:",Object.assign({},i)),this.logger.groupEnd()}}function sM(){return new Promise(r=>{document.readyState=="loading"?document.addEventListener("DOMContentLoaded",()=>r()):r()})}function nM(r){return Eu(r,"classes").reduce((t,i)=>Object.assign(t,aM(i)),{})}function aM(r){return{[`${r}Class`]:{get(){const{classes:e}=this;if(e.has(r))return e.get(r);{const t=e.getAttributeName(r);throw new Error(`Missing attribute "${t}"`)}}},[`${r}Classes`]:{get(){return this.classes.getAll(r)}},[`has${ku(r)}Class`]:{get(){return this.classes.has(r)}}}}function oM(r){return Eu(r,"outlets").reduce((t,i)=>Object.assign(t,lM(i)),{})}function Iy(r,e,t){return r.application.getControllerForElementAndIdentifier(e,t)}function Ry(r,e,t){let i=Iy(r,e,t);if(i||(r.application.router.proposeToConnectScopeForElementAndIdentifier(e,t),i=Iy(r,e,t),i))return i}function lM(r){const e=tm(r);return{[`${e}Outlet`]:{get(){const t=this.outlets.find(r),i=this.outlets.getSelectorForOutletName(r);if(t){const s=Ry(this,t,r);if(s)return s;throw new Error(`The provided outlet element is missing an outlet controller "${r}" instance for host controller "${this.identifier}"`)}throw new Error(`Missing outlet element "${r}" for host controller "${this.identifier}". Stimulus couldn't find a matching outlet element using selector "${i}".`)}},[`${e}Outlets`]:{get(){const t=this.outlets.findAll(r);return t.length>0?t.map(i=>{const s=Ry(this,i,r);if(s)return s;console.warn(`The provided outlet element is missing an outlet controller "${r}" instance for host controller "${this.identifier}"`,i)}).filter(i=>i):[]}},[`${e}OutletElement`]:{get(){const t=this.outlets.find(r),i=this.outlets.getSelectorForOutletName(r);if(t)return t;throw new Error(`Missing outlet element "${r}" for host controller "${this.identifier}". Stimulus couldn't find a matching outlet element using selector "${i}".`)}},[`${e}OutletElements`]:{get(){return this.outlets.findAll(r)}},[`has${ku(e)}Outlet`]:{get(){return this.outlets.has(r)}}}}function uM(r){return Eu(r,"targets").reduce((t,i)=>Object.assign(t,cM(i)),{})}function cM(r){return{[`${r}Target`]:{get(){const e=this.targets.find(r);if(e)return e;throw new Error(`Missing target element "${r}" for "${this.identifier}" controller`)}},[`${r}Targets`]:{get(){return this.targets.findAll(r)}},[`has${ku(r)}Target`]:{get(){return this.targets.has(r)}}}}function hM(r){const e=LD(r,"values"),t={valueDescriptorMap:{get(){return e.reduce((i,s)=>{const n=dT(s,this.identifier),a=this.data.getAttributeNameForKey(n.key);return Object.assign(i,{[a]:n})},{})}}};return e.reduce((i,s)=>Object.assign(i,dM(s)),t)}function dM(r,e){const t=dT(r,e),{key:i,name:s,reader:n,writer:a}=t;return{[s]:{get(){const o=this.data.get(i);return o!==null?n(o):t.defaultValue},set(o){o===void 0?this.data.delete(i):this.data.set(i,a(o))}},[`has${ku(s)}`]:{get(){return this.data.has(i)||t.hasCustomDefaultValue}}}}function dT([r,e],t){return gM({controller:t,token:r,typeDefinition:e})}function vh(r){switch(r){case Array:return"array";case Boolean:return"boolean";case Number:return"number";case Object:return"object";case String:return"string"}}function Ql(r){switch(typeof r){case"boolean":return"boolean";case"number":return"number";case"string":return"string"}if(Array.isArray(r))return"array";if(Object.prototype.toString.call(r)==="[object Object]")return"object"}function fM(r){const{controller:e,token:t,typeObject:i}=r,s=Ay(i.type),n=Ay(i.default),a=s&&n,o=s&&!n,l=!s&&n,u=vh(i.type),c=Ql(r.typeObject.default);if(o)return u;if(l)return c;if(u!==c){const h=e?`${e}.${t}`:t;throw new Error(`The specified default value for the Stimulus Value "${h}" must match the defined type "${u}". The provided default value of "${i.default}" is of type "${c}".`)}if(a)return u}function pM(r){const{controller:e,token:t,typeDefinition:i}=r,n=fM({controller:e,token:t,typeObject:i}),a=Ql(i),o=vh(i),l=n||a||o;if(l)return l;const u=e?`${e}.${i}`:t;throw new Error(`Unknown value type "${u}" for "${t}" value`)}function mM(r){const e=vh(r);if(e)return Ly[e];const t=im(r,"default"),i=im(r,"type"),s=r;if(t)return s.default;if(i){const{type:n}=s,a=vh(n);if(a)return Ly[a]}return r}function gM(r){const{token:e,typeDefinition:t}=r,i=`${nT(e)}-value`,s=pM(r);return{type:s,key:i,name:Vg(i),get defaultValue(){return mM(t)},get hasCustomDefaultValue(){return Ql(t)!==void 0},reader:OM[s],writer:Qy[s]||Qy.default}}const Ly={get array(){return[]},boolean:!1,number:0,get object(){return{}},string:""},OM={array(r){const e=JSON.parse(r);if(!Array.isArray(e))throw new TypeError(`expected value of type "array" but instead got value "${r}" of type "${Ql(e)}"`);return e},boolean(r){return!(r=="0"||String(r).toLowerCase()=="false")},number(r){return Number(r.replace(/_/g,""))},object(r){const e=JSON.parse(r);if(e===null||typeof e!="object"||Array.isArray(e))throw new TypeError(`expected value of type "object" but instead got value "${r}" of type "${Ql(e)}"`);return e},string(r){return r}},Qy={default:yM,array:$y,object:$y};function $y(r){return JSON.stringify(r)}function yM(r){return`${r}`}class ea{constructor(e){this.context=e}static get shouldLoad(){return!0}static afterLoad(e,t){}get application(){return this.context.application}get scope(){return this.context.scope}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get targets(){return this.scope.targets}get outlets(){return this.scope.outlets}get classes(){return this.scope.classes}get data(){return this.scope.data}initialize(){}connect(){}disconnect(){}dispatch(e,{target:t=this.element,detail:i={},prefix:s=this.identifier,bubbles:n=!0,cancelable:a=!0}={}){const o=s?`${s}:${e}`:e,l=new CustomEvent(o,{detail:i,bubbles:n,cancelable:a});return t.dispatchEvent(l),l}}ea.blessings=[nM,uM,hM,oM];ea.targets=[];ea.outlets=[];ea.values={};/*!
Turbo 8.0.17
Copyright © 2025 37signals LLC
 */(function(r){if(typeof r.requestSubmit=="function")return;r.requestSubmit=function(i){i?(e(i,this),i.click()):(i=document.createElement("input"),i.type="submit",i.hidden=!0,this.appendChild(i),i.click(),this.removeChild(i))};function e(i,s){i instanceof HTMLElement||t(TypeError,"parameter 1 is not of type 'HTMLElement'"),i.type=="submit"||t(TypeError,"The specified element is not a submit button"),i.form==s||t(DOMException,"The specified element is not owned by this form element","NotFoundError")}function t(i,s,n){throw new i("Failed to execute 'requestSubmit' on 'HTMLFormElement': "+s+".",n)}})(HTMLFormElement.prototype);const fT=new WeakMap;function bM(r){const e=r instanceof Element?r:r instanceof Node?r.parentElement:null,t=e?e.closest("input, button"):null;return(t==null?void 0:t.type)=="submit"?t:null}function vM(r){const e=bM(r.target);e&&e.form&&fT.set(e.form,e)}(function(){if("submitter"in Event.prototype)return;let r=window.Event.prototype;if("SubmitEvent"in window){const e=window.SubmitEvent.prototype;if(/Apple Computer/.test(navigator.vendor)&&!("submitter"in e))r=e;else return}addEventListener("click",vM,!0),Object.defineProperty(r,"submitter",{get(){if(this.type=="submit"&&this.target instanceof HTMLFormElement)return fT.get(this.target)}})})();const ya={eager:"eager",lazy:"lazy"},_d=class _d extends HTMLElement{constructor(){super();ue(this,"loaded",Promise.resolve());this.delegate=new _d.delegateConstructor(this)}static get observedAttributes(){return["disabled","loading","src"]}connectedCallback(){this.delegate.connect()}disconnectedCallback(){this.delegate.disconnect()}reload(){return this.delegate.sourceURLReloaded()}attributeChangedCallback(t){t=="loading"?this.delegate.loadingStyleChanged():t=="src"?this.delegate.sourceURLChanged():t=="disabled"&&this.delegate.disabledChanged()}get src(){return this.getAttribute("src")}set src(t){t?this.setAttribute("src",t):this.removeAttribute("src")}get refresh(){return this.getAttribute("refresh")}set refresh(t){t?this.setAttribute("refresh",t):this.removeAttribute("refresh")}get shouldReloadWithMorph(){return this.src&&this.refresh==="morph"}get loading(){return SM(this.getAttribute("loading")||"")}set loading(t){t?this.setAttribute("loading",t):this.removeAttribute("loading")}get disabled(){return this.hasAttribute("disabled")}set disabled(t){t?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get autoscroll(){return this.hasAttribute("autoscroll")}set autoscroll(t){t?this.setAttribute("autoscroll",""):this.removeAttribute("autoscroll")}get complete(){return!this.delegate.isLoading}get isActive(){return this.ownerDocument===document&&!this.isPreview}get isPreview(){var t,i;return(i=(t=this.ownerDocument)==null?void 0:t.documentElement)==null?void 0:i.hasAttribute("data-turbo-preview")}};ue(_d,"delegateConstructor");let _r=_d;function SM(r){switch(r.toLowerCase()){case"lazy":return ya.lazy;default:return ya.eager}}const TM={enabled:!0,progressBarDelay:500,unvisitableExtensions:new Set([".7z",".aac",".apk",".avi",".bmp",".bz2",".css",".csv",".deb",".dmg",".doc",".docx",".exe",".gif",".gz",".heic",".heif",".ico",".iso",".jpeg",".jpg",".js",".json",".m4a",".mkv",".mov",".mp3",".mp4",".mpeg",".mpg",".msi",".ogg",".ogv",".pdf",".pkg",".png",".ppt",".pptx",".rar",".rtf",".svg",".tar",".tif",".tiff",".txt",".wav",".webm",".webp",".wma",".wmv",".xls",".xlsx",".xml",".zip"])};function $l(r){if(r.getAttribute("data-turbo-eval")=="false")return r;{const e=document.createElement("script"),t=bT();return t&&(e.nonce=t),e.textContent=r.textContent,e.async=!1,_M(e,r),e}}function _M(r,e){for(const{name:t,value:i}of e.attributes)r.setAttribute(t,i)}function xM(r){const e=document.createElement("template");return e.innerHTML=r,e.content}function wt(r,{target:e,cancelable:t,detail:i}={}){const s=new CustomEvent(r,{cancelable:t,bubbles:!0,composed:!0,detail:i});return e&&e.isConnected?e.dispatchEvent(s):document.documentElement.dispatchEvent(s),s}function By(r){r.preventDefault(),r.stopImmediatePropagation()}function bl(){return document.visibilityState==="hidden"?mT():pT()}function pT(){return new Promise(r=>requestAnimationFrame(()=>r()))}function mT(){return new Promise(r=>setTimeout(()=>r(),0))}function wM(){return Promise.resolve()}function gT(r=""){return new DOMParser().parseFromString(r,"text/html")}function OT(r,...e){const t=CM(r,e).replace(/^\n/,"").split(`
`),i=t[0].match(/^\s+/),s=i?i[0].length:0;return t.map(n=>n.slice(s)).join(`
`)}function CM(r,e){return r.reduce((t,i,s)=>{const n=e[s]==null?"":e[s];return t+i+n},"")}function nn(){return Array.from({length:36}).map((r,e)=>e==8||e==13||e==18||e==23?"-":e==14?"4":e==19?(Math.floor(Math.random()*4)+8).toString(16):Math.floor(Math.random()*15).toString(16)).join("")}function Sh(r,...e){for(const t of e.map(i=>i==null?void 0:i.getAttribute(r)))if(typeof t=="string")return t;return null}function kM(r,...e){return e.some(t=>t&&t.hasAttribute(r))}function Th(...r){for(const e of r)e.localName=="turbo-frame"&&e.setAttribute("busy",""),e.setAttribute("aria-busy","true")}function _h(...r){for(const e of r)e.localName=="turbo-frame"&&e.removeAttribute("busy"),e.removeAttribute("aria-busy")}function EM(r,e=2e3){return new Promise(t=>{const i=()=>{r.removeEventListener("error",i),r.removeEventListener("load",i),t()};r.addEventListener("load",i,{once:!0}),r.addEventListener("error",i,{once:!0}),setTimeout(t,e)})}function yT(r){switch(r){case"replace":return history.replaceState;case"advance":case"restore":return history.pushState}}function AM(r){return r=="advance"||r=="replace"||r=="restore"}function Nn(...r){const e=Sh("data-turbo-action",...r);return AM(e)?e:null}function jg(r){return document.querySelector(`meta[name="${r}"]`)}function xh(r){const e=jg(r);return e&&e.content}function bT(){const r=jg("csp-nonce");if(r){const{nonce:e,content:t}=r;return e==""?t:e}}function PM(r,e){let t=jg(r);return t||(t=document.createElement("meta"),t.setAttribute("name",r),document.head.appendChild(t)),t.setAttribute("content",e),t}function Ca(r,e){var t;if(r instanceof Element)return r.closest(e)||Ca(r.assignedSlot||((t=r.getRootNode())==null?void 0:t.host),e)}function zg(r){return!!r&&r.closest("[inert], :disabled, [hidden], details:not([open]), dialog:not([open])")==null&&typeof r.focus=="function"}function vT(r){return Array.from(r.querySelectorAll("[autofocus]")).find(zg)}async function DM(r,e){const t=e();r(),await pT();const i=e();return[t,i]}function ST(r){if(r==="_blank")return!1;if(r){for(const e of document.getElementsByName(r))if(e instanceof HTMLIFrameElement)return!1;return!0}else return!0}function TT(r){const e=Ca(r,"a[href], a[xlink\\:href]");return!e||e.hasAttribute("download")||e.hasAttribute("target")&&e.target!=="_self"?null:e}function _T(r){return ri(r.getAttribute("href")||"")}function MM(r,e){let t=null;return(...i)=>{const s=()=>r.apply(this,i);clearTimeout(t),t=setTimeout(s,e)}}const IM={"aria-disabled":{beforeSubmit:r=>{r.setAttribute("aria-disabled","true"),r.addEventListener("click",By)},afterSubmit:r=>{r.removeAttribute("aria-disabled"),r.removeEventListener("click",By)}},disabled:{beforeSubmit:r=>r.disabled=!0,afterSubmit:r=>r.disabled=!1}};var pu,sT;let RM=(sT=class{constructor(e){Xe(this,pu,null);Object.assign(this,e)}get submitter(){return De(this,pu)}set submitter(e){it(this,pu,IM[e]||e)}},pu=new WeakMap,sT);const LM=new RM({mode:"on",submitter:"disabled"}),zt={drive:TM,forms:LM};function ri(r){return new URL(r.toString(),document.baseURI)}function Fn(r){let e;if(r.hash)return r.hash.slice(1);if(e=r.href.match(/#(.*)$/))return e[1]}function Zg(r,e){const t=(e==null?void 0:e.getAttribute("formaction"))||r.getAttribute("action")||r.action;return ri(t)}function QM(r){return(NM(r).match(/\.[^.]*$/)||[])[0]||""}function $M(r,e){const t=Ny(e.origin+e.pathname);return Ny(r.href)===t||r.href.startsWith(t)}function Hs(r,e){return $M(r,e)&&!zt.drive.unvisitableExtensions.has(QM(r))}function sm(r){const e=Fn(r);return e!=null?r.href.slice(0,-(e.length+1)):r.href}function yc(r){return sm(r)}function xT(r,e){return ri(r).href==ri(e).href}function BM(r){return r.pathname.split("/").slice(1)}function NM(r){return BM(r).slice(-1)[0]}function Ny(r){return r.endsWith("/")?r:r+"/"}class Wg{constructor(e){this.response=e}get succeeded(){return this.response.ok}get failed(){return!this.succeeded}get clientError(){return this.statusCode>=400&&this.statusCode<=499}get serverError(){return this.statusCode>=500&&this.statusCode<=599}get redirected(){return this.response.redirected}get location(){return ri(this.response.url)}get isHTML(){return this.contentType&&this.contentType.match(/^(?:text\/([^\s;,]+\b)?html|application\/xhtml\+xml)\b/)}get statusCode(){return this.response.status}get contentType(){return this.header("Content-Type")}get responseText(){return this.response.clone().text()}get responseHTML(){return this.isHTML?this.response.clone().text():Promise.resolve(void 0)}header(e){return this.response.headers.get(e)}}class FM extends Set{constructor(e){super(),this.maxSize=e}add(e){if(this.size>=this.maxSize){const i=this.values().next().value;this.delete(i)}super.add(e)}}const wT=new FM(20);function CT(r,e={}){const t=new Headers(e.headers||{}),i=nn();return wT.add(i),t.append("X-Turbo-Request-Id",i),window.fetch(r,{...e,headers:t})}function Hg(r){switch(r.toLowerCase()){case"get":return ir.get;case"post":return ir.post;case"put":return ir.put;case"patch":return ir.patch;case"delete":return ir.delete}}const ir={get:"get",post:"post",put:"put",patch:"patch",delete:"delete"};function UM(r){switch(r.toLowerCase()){case Cn.multipart:return Cn.multipart;case Cn.plain:return Cn.plain;default:return Cn.urlEncoded}}const Cn={urlEncoded:"application/x-www-form-urlencoded",multipart:"multipart/form-data",plain:"text/plain"};var mu,yo,kT,ET;class Au{constructor(e,t,i,s=new URLSearchParams,n=null,a=Cn.urlEncoded){Xe(this,yo);ue(this,"abortController",new AbortController);Xe(this,mu,e=>{});var u;const[o,l]=Fy(ri(i),t,s,a);this.delegate=e,this.url=o,this.target=n,this.fetchOptions={credentials:"same-origin",redirect:"follow",method:t.toUpperCase(),headers:{...this.defaultHeaders},body:l,signal:this.abortSignal,referrer:(u=this.delegate.referrer)==null?void 0:u.href},this.enctype=a}get method(){return this.fetchOptions.method}set method(e){const t=this.isSafe?this.url.searchParams:this.fetchOptions.body||new FormData,i=Hg(e)||ir.get;this.url.search="";const[s,n]=Fy(this.url,i,t,this.enctype);this.url=s,this.fetchOptions.body=n,this.fetchOptions.method=i.toUpperCase()}get headers(){return this.fetchOptions.headers}set headers(e){this.fetchOptions.headers=e}get body(){return this.isSafe?this.url.searchParams:this.fetchOptions.body}set body(e){this.fetchOptions.body=e}get location(){return this.url}get params(){return this.url.searchParams}get entries(){return this.body?Array.from(this.body.entries()):[]}cancel(){this.abortController.abort()}async perform(){const{fetchOptions:e}=this;this.delegate.prepareRequest(this);const t=await Le(this,yo,kT).call(this,e);try{this.delegate.requestStarted(this),t.detail.fetchRequest?this.response=t.detail.fetchRequest.response:this.response=CT(this.url.href,e);const i=await this.response;return await this.receive(i)}catch(i){if(i.name!=="AbortError")throw Le(this,yo,ET).call(this,i)&&this.delegate.requestErrored(this,i),i}finally{this.delegate.requestFinished(this)}}async receive(e){const t=new Wg(e);return wt("turbo:before-fetch-response",{cancelable:!0,detail:{fetchResponse:t},target:this.target}).defaultPrevented?this.delegate.requestPreventedHandlingResponse(this,t):t.succeeded?this.delegate.requestSucceededWithResponse(this,t):this.delegate.requestFailedWithResponse(this,t),t}get defaultHeaders(){return{Accept:"text/html, application/xhtml+xml"}}get isSafe(){return Yg(this.method)}get abortSignal(){return this.abortController.signal}acceptResponseType(e){this.headers.Accept=[e,this.headers.Accept].join(", ")}}mu=new WeakMap,yo=new WeakSet,kT=async function(e){const t=new Promise(s=>it(this,mu,s)),i=wt("turbo:before-fetch-request",{cancelable:!0,detail:{fetchOptions:e,url:this.url,resume:De(this,mu)},target:this.target});return this.url=i.detail.url,i.defaultPrevented&&await t,i},ET=function(e){return!wt("turbo:fetch-request-error",{target:this.target,cancelable:!0,detail:{request:this,error:e}}).defaultPrevented};function Yg(r){return Hg(r)==ir.get}function Fy(r,e,t,i){const s=Array.from(t).length>0?new URLSearchParams(AT(t)):r.searchParams;return Yg(e)?[qM(r,s),null]:i==Cn.urlEncoded?[r,s]:[r,t]}function AT(r){const e=[];for(const[t,i]of r)i instanceof File||e.push([t,i]);return e}function qM(r,e){const t=new URLSearchParams(AT(e));return r.search=t.toString(),r}class VM{constructor(e,t){ue(this,"started",!1);ue(this,"intersect",e=>{const t=e.slice(-1)[0];t!=null&&t.isIntersecting&&this.delegate.elementAppearedInViewport(this.element)});this.delegate=e,this.element=t,this.intersectionObserver=new IntersectionObserver(this.intersect)}start(){this.started||(this.started=!0,this.intersectionObserver.observe(this.element))}stop(){this.started&&(this.started=!1,this.intersectionObserver.unobserve(this.element))}}class ta{static wrap(e){return typeof e=="string"?new this(xM(e)):e}constructor(e){this.fragment=XM(e)}}ue(ta,"contentType","text/vnd.turbo-stream.html");function XM(r){for(const e of r.querySelectorAll("turbo-stream")){const t=document.importNode(e,!0);for(const i of t.templateElement.content.querySelectorAll("script"))i.replaceWith($l(i));e.replaceWith(t)}return r}const jM=100;var Qn,vs;class zM{constructor(){Xe(this,Qn,null);Xe(this,vs,null)}get(e){if(De(this,vs)&&De(this,vs).url===e&&De(this,vs).expire>Date.now())return De(this,vs).request}setLater(e,t,i){this.clear(),it(this,Qn,setTimeout(()=>{t.perform(),this.set(e,t,i),it(this,Qn,null)},jM))}set(e,t,i){it(this,vs,{url:e,request:t,expire:new Date(new Date().getTime()+i)})}clear(){De(this,Qn)&&clearTimeout(De(this,Qn)),it(this,vs,null)}}Qn=new WeakMap,vs=new WeakMap;const ZM=10*1e3,ba=new zM,ua={initialized:"initialized",requesting:"requesting",waiting:"waiting",receiving:"receiving",stopping:"stopping",stopped:"stopped"};class Cd{constructor(e,t,i,s=!1){ue(this,"state",ua.initialized);const n=JM(t,i),a=KM(GM(t,i),n),o=WM(t,i),l=eI(t,i);this.delegate=e,this.formElement=t,this.submitter=i,this.fetchRequest=new Au(this,n,a,o,t,l),this.mustRedirect=s}static confirmMethod(e){return Promise.resolve(confirm(e))}get method(){return this.fetchRequest.method}set method(e){this.fetchRequest.method=e}get action(){return this.fetchRequest.url.toString()}set action(e){this.fetchRequest.url=ri(e)}get body(){return this.fetchRequest.body}get enctype(){return this.fetchRequest.enctype}get isSafe(){return this.fetchRequest.isSafe}get location(){return this.fetchRequest.url}async start(){const{initialized:e,requesting:t}=ua,i=Sh("data-turbo-confirm",this.submitter,this.formElement);if(!(typeof i=="string"&&!await(typeof zt.forms.confirm=="function"?zt.forms.confirm:Cd.confirmMethod)(i,this.formElement,this.submitter))&&this.state==e)return this.state=t,this.fetchRequest.perform()}stop(){const{stopping:e,stopped:t}=ua;if(this.state!=e&&this.state!=t)return this.state=e,this.fetchRequest.cancel(),!0}prepareRequest(e){if(!e.isSafe){const t=HM(xh("csrf-param"))||xh("csrf-token");t&&(e.headers["X-CSRF-Token"]=t)}this.requestAcceptsTurboStreamResponse(e)&&e.acceptResponseType(ta.contentType)}requestStarted(e){this.state=ua.waiting,this.submitter&&zt.forms.submitter.beforeSubmit(this.submitter),this.setSubmitsWith(),Th(this.formElement),wt("turbo:submit-start",{target:this.formElement,detail:{formSubmission:this}}),this.delegate.formSubmissionStarted(this)}requestPreventedHandlingResponse(e,t){ba.clear(),this.result={success:t.succeeded,fetchResponse:t}}requestSucceededWithResponse(e,t){if(t.clientError||t.serverError){this.delegate.formSubmissionFailedWithResponse(this,t);return}if(ba.clear(),this.requestMustRedirect(e)&&YM(t)){const i=new Error("Form responses must redirect to another location");this.delegate.formSubmissionErrored(this,i)}else this.state=ua.receiving,this.result={success:!0,fetchResponse:t},this.delegate.formSubmissionSucceededWithResponse(this,t)}requestFailedWithResponse(e,t){this.result={success:!1,fetchResponse:t},this.delegate.formSubmissionFailedWithResponse(this,t)}requestErrored(e,t){this.result={success:!1,error:t},this.delegate.formSubmissionErrored(this,t)}requestFinished(e){this.state=ua.stopped,this.submitter&&zt.forms.submitter.afterSubmit(this.submitter),this.resetSubmitterText(),_h(this.formElement),wt("turbo:submit-end",{target:this.formElement,detail:{formSubmission:this,...this.result}}),this.delegate.formSubmissionFinished(this)}setSubmitsWith(){if(!(!this.submitter||!this.submitsWith)){if(this.submitter.matches("button"))this.originalSubmitText=this.submitter.innerHTML,this.submitter.innerHTML=this.submitsWith;else if(this.submitter.matches("input")){const e=this.submitter;this.originalSubmitText=e.value,e.value=this.submitsWith}}}resetSubmitterText(){if(!(!this.submitter||!this.originalSubmitText)){if(this.submitter.matches("button"))this.submitter.innerHTML=this.originalSubmitText;else if(this.submitter.matches("input")){const e=this.submitter;e.value=this.originalSubmitText}}}requestMustRedirect(e){return!e.isSafe&&this.mustRedirect}requestAcceptsTurboStreamResponse(e){return!e.isSafe||kM("data-turbo-stream",this.submitter,this.formElement)}get submitsWith(){var e;return(e=this.submitter)==null?void 0:e.getAttribute("data-turbo-submits-with")}}function WM(r,e){const t=new FormData(r),i=e==null?void 0:e.getAttribute("name"),s=e==null?void 0:e.getAttribute("value");return i&&t.append(i,s||""),t}function HM(r){if(r!=null){const t=(document.cookie?document.cookie.split("; "):[]).find(i=>i.startsWith(r));if(t){const i=t.split("=").slice(1).join("=");return i?decodeURIComponent(i):void 0}}}function YM(r){return r.statusCode==200&&!r.redirected}function GM(r,e){const t=typeof r.action=="string"?r.action:null;return e!=null&&e.hasAttribute("formaction")?e.getAttribute("formaction")||"":r.getAttribute("action")||t||""}function KM(r,e){const t=ri(r);return Yg(e)&&(t.search=""),t}function JM(r,e){const t=(e==null?void 0:e.getAttribute("formmethod"))||r.getAttribute("method")||"";return Hg(t.toLowerCase())||ir.get}function eI(r,e){return UM((e==null?void 0:e.getAttribute("formenctype"))||r.enctype)}class kd{constructor(e){this.element=e}get activeElement(){return this.element.ownerDocument.activeElement}get children(){return[...this.element.children]}hasAnchor(e){return this.getElementForAnchor(e)!=null}getElementForAnchor(e){return e?this.element.querySelector(`[id='${e}'], a[name='${e}']`):null}get isConnected(){return this.element.isConnected}get firstAutofocusableElement(){return vT(this.element)}get permanentElements(){return DT(this.element)}getPermanentElementById(e){return PT(this.element,e)}getPermanentElementMapForSnapshot(e){const t={};for(const i of this.permanentElements){const{id:s}=i,n=e.getPermanentElementById(s);n&&(t[s]=[i,n])}return t}}function PT(r,e){return r.querySelector(`#${e}[data-turbo-permanent]`)}function DT(r){return r.querySelectorAll("[id][data-turbo-permanent]")}class Gg{constructor(e,t){ue(this,"started",!1);ue(this,"submitCaptured",()=>{this.eventTarget.removeEventListener("submit",this.submitBubbled,!1),this.eventTarget.addEventListener("submit",this.submitBubbled,!1)});ue(this,"submitBubbled",e=>{if(!e.defaultPrevented){const t=e.target instanceof HTMLFormElement?e.target:void 0,i=e.submitter||void 0;t&&tI(t,i)&&iI(t,i)&&this.delegate.willSubmitForm(t,i)&&(e.preventDefault(),e.stopImmediatePropagation(),this.delegate.formSubmitted(t,i))}});this.delegate=e,this.eventTarget=t}start(){this.started||(this.eventTarget.addEventListener("submit",this.submitCaptured,!0),this.started=!0)}stop(){this.started&&(this.eventTarget.removeEventListener("submit",this.submitCaptured,!0),this.started=!1)}}function tI(r,e){return((e==null?void 0:e.getAttribute("formmethod"))||r.getAttribute("method"))!="dialog"}function iI(r,e){const t=(e==null?void 0:e.getAttribute("formtarget"))||r.getAttribute("target");return ST(t)}var gu,Ou;class MT{constructor(e,t){Xe(this,gu,e=>{});Xe(this,Ou,e=>{});this.delegate=e,this.element=t}scrollToAnchor(e){const t=this.snapshot.getElementForAnchor(e);t?(this.focusElement(t),this.scrollToElement(t)):this.scrollToPosition({x:0,y:0})}scrollToAnchorFromLocation(e){this.scrollToAnchor(Fn(e))}scrollToElement(e){e.scrollIntoView()}focusElement(e){e instanceof HTMLElement&&(e.hasAttribute("tabindex")?e.focus():(e.setAttribute("tabindex","-1"),e.focus(),e.removeAttribute("tabindex")))}scrollToPosition({x:e,y:t}){this.scrollRoot.scrollTo(e,t)}scrollToTop(){this.scrollToPosition({x:0,y:0})}get scrollRoot(){return window}async render(e){const{isPreview:t,shouldRender:i,willRender:s,newSnapshot:n}=e,a=s;if(i)try{this.renderPromise=new Promise(c=>it(this,gu,c)),this.renderer=e,await this.prepareToRenderSnapshot(e);const o=new Promise(c=>it(this,Ou,c)),l={resume:De(this,Ou),render:this.renderer.renderElement,renderMethod:this.renderer.renderMethod};this.delegate.allowsImmediateRender(n,l)||await o,await this.renderSnapshot(e),this.delegate.viewRenderedSnapshot(n,t,this.renderer.renderMethod),this.delegate.preloadOnLoadLinksForView(this.element),this.finishRenderingSnapshot(e)}finally{delete this.renderer,De(this,gu).call(this,void 0),delete this.renderPromise}else a&&this.invalidate(e.reloadReason)}invalidate(e){this.delegate.viewInvalidated(e)}async prepareToRenderSnapshot(e){this.markAsPreview(e.isPreview),await e.prepareToRender()}markAsPreview(e){e?this.element.setAttribute("data-turbo-preview",""):this.element.removeAttribute("data-turbo-preview")}markVisitDirection(e){this.element.setAttribute("data-turbo-visit-direction",e)}unmarkVisitDirection(){this.element.removeAttribute("data-turbo-visit-direction")}async renderSnapshot(e){await e.render()}finishRenderingSnapshot(e){e.finishRendering()}}gu=new WeakMap,Ou=new WeakMap;class rI extends MT{missing(){this.element.innerHTML='<strong class="turbo-frame-error">Content missing</strong>'}get snapshot(){return new kd(this.element)}}class IT{constructor(e,t){ue(this,"clickBubbled",e=>{this.clickEventIsSignificant(e)?this.clickEvent=e:delete this.clickEvent});ue(this,"linkClicked",e=>{this.clickEvent&&this.clickEventIsSignificant(e)&&this.delegate.shouldInterceptLinkClick(e.target,e.detail.url,e.detail.originalEvent)&&(this.clickEvent.preventDefault(),e.preventDefault(),this.delegate.linkClickIntercepted(e.target,e.detail.url,e.detail.originalEvent)),delete this.clickEvent});ue(this,"willVisit",e=>{delete this.clickEvent});this.delegate=e,this.element=t}start(){this.element.addEventListener("click",this.clickBubbled),document.addEventListener("turbo:click",this.linkClicked),document.addEventListener("turbo:before-visit",this.willVisit)}stop(){this.element.removeEventListener("click",this.clickBubbled),document.removeEventListener("turbo:click",this.linkClicked),document.removeEventListener("turbo:before-visit",this.willVisit)}clickEventIsSignificant(e){var s;const t=e.composed?(s=e.target)==null?void 0:s.parentElement:e.target,i=TT(t)||t;return i instanceof Element&&i.closest("turbo-frame, html")==this.element}}class RT{constructor(e,t){ue(this,"started",!1);ue(this,"clickCaptured",()=>{this.eventTarget.removeEventListener("click",this.clickBubbled,!1),this.eventTarget.addEventListener("click",this.clickBubbled,!1)});ue(this,"clickBubbled",e=>{if(e instanceof MouseEvent&&this.clickEventIsSignificant(e)){const t=e.composedPath&&e.composedPath()[0]||e.target,i=TT(t);if(i&&ST(i.target)){const s=_T(i);this.delegate.willFollowLinkToLocation(i,s,e)&&(e.preventDefault(),this.delegate.followedLinkToLocation(i,s))}}});this.delegate=e,this.eventTarget=t}start(){this.started||(this.eventTarget.addEventListener("click",this.clickCaptured,!0),this.started=!0)}stop(){this.started&&(this.eventTarget.removeEventListener("click",this.clickCaptured,!0),this.started=!1)}clickEventIsSignificant(e){return!(e.target&&e.target.isContentEditable||e.defaultPrevented||e.which>1||e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)}}class LT{constructor(e,t){this.delegate=e,this.linkInterceptor=new RT(this,t)}start(){this.linkInterceptor.start()}stop(){this.linkInterceptor.stop()}canPrefetchRequestToLocation(e,t){return!1}prefetchAndCacheRequestToLocation(e,t){}willFollowLinkToLocation(e,t,i){return this.delegate.willSubmitFormLinkToLocation(e,t,i)&&(e.hasAttribute("data-turbo-method")||e.hasAttribute("data-turbo-stream"))}followedLinkToLocation(e,t){const i=document.createElement("form"),s="hidden";for(const[h,f]of t.searchParams)i.append(Object.assign(document.createElement("input"),{type:s,name:h,value:f}));const n=Object.assign(t,{search:""});i.setAttribute("data-turbo","true"),i.setAttribute("action",n.href),i.setAttribute("hidden","");const a=e.getAttribute("data-turbo-method");a&&i.setAttribute("method",a);const o=e.getAttribute("data-turbo-frame");o&&i.setAttribute("data-turbo-frame",o);const l=Nn(e);l&&i.setAttribute("data-turbo-action",l);const u=e.getAttribute("data-turbo-confirm");u&&i.setAttribute("data-turbo-confirm",u),e.hasAttribute("data-turbo-stream")&&i.setAttribute("data-turbo-stream",""),this.delegate.submittedFormLinkToLocation(e,t,i),document.body.appendChild(i),i.addEventListener("turbo:submit-end",()=>i.remove(),{once:!0}),requestAnimationFrame(()=>i.requestSubmit())}}class QT{static async preservingPermanentElements(e,t,i){const s=new this(e,t);s.enter(),await i(),s.leave()}constructor(e,t){this.delegate=e,this.permanentElementMap=t}enter(){for(const e in this.permanentElementMap){const[t,i]=this.permanentElementMap[e];this.delegate.enteringBardo(t,i),this.replaceNewPermanentElementWithPlaceholder(i)}}leave(){for(const e in this.permanentElementMap){const[t]=this.permanentElementMap[e];this.replaceCurrentPermanentElementWithClone(t),this.replacePlaceholderWithPermanentElement(t),this.delegate.leavingBardo(t)}}replaceNewPermanentElementWithPlaceholder(e){const t=sI(e);e.replaceWith(t)}replaceCurrentPermanentElementWithClone(e){const t=e.cloneNode(!0);e.replaceWith(t)}replacePlaceholderWithPermanentElement(e){const t=this.getPlaceholderById(e.id);t==null||t.replaceWith(e)}getPlaceholderById(e){return this.placeholders.find(t=>t.content==e)}get placeholders(){return[...document.querySelectorAll("meta[name=turbo-permanent-placeholder][content]")]}}function sI(r){const e=document.createElement("meta");return e.setAttribute("name","turbo-permanent-placeholder"),e.setAttribute("content",r.id),e}var Ss;class Kg{constructor(e,t,i,s=!0){Xe(this,Ss,null);this.currentSnapshot=e,this.newSnapshot=t,this.isPreview=i,this.willRender=s,this.renderElement=this.constructor.renderElement,this.promise=new Promise((n,a)=>this.resolvingFunctions={resolve:n,reject:a})}static renderElement(e,t){}get shouldRender(){return!0}get shouldAutofocus(){return!0}get reloadReason(){}prepareToRender(){}render(){}finishRendering(){this.resolvingFunctions&&(this.resolvingFunctions.resolve(),delete this.resolvingFunctions)}async preservingPermanentElements(e){await QT.preservingPermanentElements(this,this.permanentElementMap,e)}focusFirstAutofocusableElement(){if(this.shouldAutofocus){const e=this.connectedSnapshot.firstAutofocusableElement;e&&e.focus()}}enteringBardo(e){De(this,Ss)||e.contains(this.currentSnapshot.activeElement)&&it(this,Ss,this.currentSnapshot.activeElement)}leavingBardo(e){e.contains(De(this,Ss))&&De(this,Ss)instanceof HTMLElement&&(De(this,Ss).focus(),it(this,Ss,null))}get connectedSnapshot(){return this.newSnapshot.isConnected?this.newSnapshot:this.currentSnapshot}get currentElement(){return this.currentSnapshot.element}get newElement(){return this.newSnapshot.element}get permanentElementMap(){return this.currentSnapshot.getPermanentElementMapForSnapshot(this.newSnapshot)}get renderMethod(){return"replace"}}Ss=new WeakMap;class Jg extends Kg{static renderElement(e,t){var a;const i=document.createRange();i.selectNodeContents(e),i.deleteContents();const s=t,n=(a=s.ownerDocument)==null?void 0:a.createRange();n&&(n.selectNodeContents(s),e.appendChild(n.extractContents()))}constructor(e,t,i,s,n,a=!0){super(t,i,s,n,a),this.delegate=e}get shouldRender(){return!0}async render(){await bl(),this.preservingPermanentElements(()=>{this.loadFrameElement()}),this.scrollFrameIntoView(),await bl(),this.focusFirstAutofocusableElement(),await bl(),this.activateScriptElements()}loadFrameElement(){this.delegate.willRenderFrame(this.currentElement,this.newElement),this.renderElement(this.currentElement,this.newElement)}scrollFrameIntoView(){if(this.currentElement.autoscroll||this.newElement.autoscroll){const e=this.currentElement.firstElementChild,t=nI(this.currentElement.getAttribute("data-autoscroll-block"),"end"),i=aI(this.currentElement.getAttribute("data-autoscroll-behavior"),"auto");if(e)return e.scrollIntoView({block:t,behavior:i}),!0}return!1}activateScriptElements(){for(const e of this.newScriptElements){const t=$l(e);e.replaceWith(t)}}get newScriptElements(){return this.currentElement.querySelectorAll("script")}}function nI(r,e){return r=="end"||r=="start"||r=="center"||r=="nearest"?r:e}function aI(r,e){return r=="auto"||r=="smooth"?r:e}var oI=(function(){const r=()=>{},e={morphStyle:"outerHTML",callbacks:{beforeNodeAdded:r,afterNodeAdded:r,beforeNodeMorphed:r,afterNodeMorphed:r,beforeNodeRemoved:r,afterNodeRemoved:r,beforeAttributeUpdated:r},head:{style:"merge",shouldPreserve:f=>f.getAttribute("im-preserve")==="true",shouldReAppend:f=>f.getAttribute("im-re-append")==="true",shouldRemove:r,afterHeadMorphed:r},restoreFocus:!0};function t(f,m,S={}){f=c(f);const y=h(m),E=u(f,y,S),C=s(E,()=>o(E,f,y,_=>_.morphStyle==="innerHTML"?(n(_,f,y),Array.from(f.childNodes)):i(_,f,y)));return E.pantry.remove(),C}function i(f,m,S){const y=h(m);let E=Array.from(y.childNodes);const C=E.indexOf(m),_=E.length-(C+1);return n(f,y,S,m,m.nextSibling),E=Array.from(y.childNodes),E.slice(C,E.length-_)}function s(f,m){var b;if(!f.config.restoreFocus)return m();let S=document.activeElement;if(!(S instanceof HTMLInputElement||S instanceof HTMLTextAreaElement))return m();const{id:y,selectionStart:E,selectionEnd:C}=S,_=m();return y&&y!==((b=document.activeElement)==null?void 0:b.id)&&(S=f.target.querySelector(`#${y}`),S==null||S.focus()),S&&!S.selectionEnd&&C&&S.setSelectionRange(E,C),_}const n=(function(){function f(T,w,A,I=null,N=null){w instanceof HTMLTemplateElement&&A instanceof HTMLTemplateElement&&(w=w.content,A=A.content),I||(I=w.firstChild);for(const P of A.childNodes){if(I&&I!=N){const X=S(T,P,I,N);if(X){X!==I&&E(T,I,X),a(X,P,T),I=X.nextSibling;continue}}if(P instanceof Element&&T.persistentIds.has(P.id)){const X=C(w,P.id,I,T);a(X,P,T),I=X.nextSibling;continue}const R=m(w,P,I,T);R&&(I=R.nextSibling)}for(;I&&I!=N;){const P=I;I=I.nextSibling,y(T,P)}}function m(T,w,A,I){if(I.callbacks.beforeNodeAdded(w)===!1)return null;if(I.idMap.has(w)){const N=document.createElement(w.tagName);return T.insertBefore(N,A),a(N,w,I),I.callbacks.afterNodeAdded(N),N}else{const N=document.importNode(w,!0);return T.insertBefore(N,A),I.callbacks.afterNodeAdded(N),N}}const S=(function(){function T(I,N,P,R){let X=null,j=N.nextSibling,Z=0,Y=P;for(;Y&&Y!=R;){if(A(Y,N)){if(w(I,Y,N))return Y;X===null&&(I.idMap.has(Y)||(X=Y))}if(X===null&&j&&A(Y,j)&&(Z++,j=j.nextSibling,Z>=2&&(X=void 0)),Y.contains(document.activeElement))break;Y=Y.nextSibling}return X||null}function w(I,N,P){let R=I.idMap.get(N),X=I.idMap.get(P);if(!X||!R)return!1;for(const j of R)if(X.has(j))return!0;return!1}function A(I,N){const P=I,R=N;return P.nodeType===R.nodeType&&P.tagName===R.tagName&&(!P.id||P.id===R.id)}return T})();function y(T,w){var A;if(T.idMap.has(w))b(T.pantry,w,null);else{if(T.callbacks.beforeNodeRemoved(w)===!1)return;(A=w.parentNode)==null||A.removeChild(w),T.callbacks.afterNodeRemoved(w)}}function E(T,w,A){let I=w;for(;I&&I!==A;){let N=I;I=I.nextSibling,y(T,N)}return I}function C(T,w,A,I){const N=I.target.querySelector(`#${w}`)||I.pantry.querySelector(`#${w}`);return _(N,I),b(T,N,A),N}function _(T,w){const A=T.id;for(;T=T.parentNode;){let I=w.idMap.get(T);I&&(I.delete(A),I.size||w.idMap.delete(T))}}function b(T,w,A){if(T.moveBefore)try{T.moveBefore(w,A)}catch{T.insertBefore(w,A)}else T.insertBefore(w,A)}return f})(),a=(function(){function f(_,b,T){return T.ignoreActive&&_===document.activeElement?null:(T.callbacks.beforeNodeMorphed(_,b)===!1||(_ instanceof HTMLHeadElement&&T.head.ignore||(_ instanceof HTMLHeadElement&&T.head.style!=="morph"?l(_,b,T):(m(_,b,T),C(_,T)||n(T,_,b))),T.callbacks.afterNodeMorphed(_,b)),_)}function m(_,b,T){let w=b.nodeType;if(w===1){const A=_,I=b,N=A.attributes,P=I.attributes;for(const R of P)E(R.name,A,"update",T)||A.getAttribute(R.name)!==R.value&&A.setAttribute(R.name,R.value);for(let R=N.length-1;0<=R;R--){const X=N[R];if(X&&!I.hasAttribute(X.name)){if(E(X.name,A,"remove",T))continue;A.removeAttribute(X.name)}}C(A,T)||S(A,I,T)}(w===8||w===3)&&_.nodeValue!==b.nodeValue&&(_.nodeValue=b.nodeValue)}function S(_,b,T){if(_ instanceof HTMLInputElement&&b instanceof HTMLInputElement&&b.type!=="file"){let w=b.value,A=_.value;y(_,b,"checked",T),y(_,b,"disabled",T),b.hasAttribute("value")?A!==w&&(E("value",_,"update",T)||(_.setAttribute("value",w),_.value=w)):E("value",_,"remove",T)||(_.value="",_.removeAttribute("value"))}else if(_ instanceof HTMLOptionElement&&b instanceof HTMLOptionElement)y(_,b,"selected",T);else if(_ instanceof HTMLTextAreaElement&&b instanceof HTMLTextAreaElement){let w=b.value,A=_.value;if(E("value",_,"update",T))return;w!==A&&(_.value=w),_.firstChild&&_.firstChild.nodeValue!==w&&(_.firstChild.nodeValue=w)}}function y(_,b,T,w){const A=b[T],I=_[T];if(A!==I){const N=E(T,_,"update",w);N||(_[T]=b[T]),A?N||_.setAttribute(T,""):E(T,_,"remove",w)||_.removeAttribute(T)}}function E(_,b,T,w){return _==="value"&&w.ignoreActiveValue&&b===document.activeElement?!0:w.callbacks.beforeAttributeUpdated(_,b,T)===!1}function C(_,b){return!!b.ignoreActiveValue&&_===document.activeElement&&_!==document.body}return f})();function o(f,m,S,y){if(f.head.block){const E=m.querySelector("head"),C=S.querySelector("head");if(E&&C){const _=l(E,C,f);return Promise.all(_).then(()=>{const b=Object.assign(f,{head:{block:!1,ignore:!0}});return y(b)})}}return y(f)}function l(f,m,S){let y=[],E=[],C=[],_=[],b=new Map;for(const w of m.children)b.set(w.outerHTML,w);for(const w of f.children){let A=b.has(w.outerHTML),I=S.head.shouldReAppend(w),N=S.head.shouldPreserve(w);A||N?I?E.push(w):(b.delete(w.outerHTML),C.push(w)):S.head.style==="append"?I&&(E.push(w),_.push(w)):S.head.shouldRemove(w)!==!1&&E.push(w)}_.push(...b.values());let T=[];for(const w of _){let A=document.createRange().createContextualFragment(w.outerHTML).firstChild;if(S.callbacks.beforeNodeAdded(A)!==!1){if("href"in A&&A.href||"src"in A&&A.src){let I,N=new Promise(function(P){I=P});A.addEventListener("load",function(){I()}),T.push(N)}f.appendChild(A),S.callbacks.afterNodeAdded(A),y.push(A)}}for(const w of E)S.callbacks.beforeNodeRemoved(w)!==!1&&(f.removeChild(w),S.callbacks.afterNodeRemoved(w));return S.head.afterHeadMorphed(f,{added:y,kept:C,removed:E}),T}const u=(function(){function f(b,T,w){const{persistentIds:A,idMap:I}=C(b,T),N=m(w),P=N.morphStyle||"outerHTML";if(!["innerHTML","outerHTML"].includes(P))throw`Do not understand how to morph style ${P}`;return{target:b,newContent:T,config:N,morphStyle:P,ignoreActive:N.ignoreActive,ignoreActiveValue:N.ignoreActiveValue,restoreFocus:N.restoreFocus,idMap:I,persistentIds:A,pantry:S(),callbacks:N.callbacks,head:N.head}}function m(b){let T=Object.assign({},e);return Object.assign(T,b),T.callbacks=Object.assign({},e.callbacks,b.callbacks),T.head=Object.assign({},e.head,b.head),T}function S(){const b=document.createElement("div");return b.hidden=!0,document.body.insertAdjacentElement("afterend",b),b}function y(b){let T=Array.from(b.querySelectorAll("[id]"));return b.id&&T.push(b),T}function E(b,T,w,A){for(const I of A)if(T.has(I.id)){let N=I;for(;N;){let P=b.get(N);if(P==null&&(P=new Set,b.set(N,P)),P.add(I.id),N===w)break;N=N.parentElement}}}function C(b,T){const w=y(b),A=y(T),I=_(w,A);let N=new Map;E(N,I,b,w);const P=T.__idiomorphRoot||T;return E(N,I,P,A),{persistentIds:I,idMap:N}}function _(b,T){let w=new Set,A=new Map;for(const{id:N,tagName:P}of b)A.has(N)?w.add(N):A.set(N,P);let I=new Set;for(const{id:N,tagName:P}of T)I.has(N)?w.add(N):A.get(N)===P&&I.add(N);for(const N of w)I.delete(N);return I}return f})(),{normalizeElement:c,normalizeParent:h}=(function(){const f=new WeakSet;function m(C){return C instanceof Document?C.documentElement:C}function S(C){if(C==null)return document.createElement("div");if(typeof C=="string")return S(E(C));if(f.has(C))return C;if(C instanceof Node){if(C.parentNode)return y(C);{const _=document.createElement("div");return _.append(C),_}}else{const _=document.createElement("div");for(const b of[...C])_.append(b);return _}}function y(C){return{childNodes:[C],querySelectorAll:_=>{const b=C.querySelectorAll(_);return C.matches(_)?[C,...b]:b},insertBefore:(_,b)=>C.parentNode.insertBefore(_,b),moveBefore:(_,b)=>C.parentNode.moveBefore(_,b),get __idiomorphRoot(){return C}}}function E(C){let _=new DOMParser,b=C.replace(/<svg(\s[^>]*>|>)([\s\S]*?)<\/svg>/gim,"");if(b.match(/<\/html>/)||b.match(/<\/head>/)||b.match(/<\/body>/)){let T=_.parseFromString(C,"text/html");if(b.match(/<\/html>/))return f.add(T),T;{let w=T.firstChild;return w&&f.add(w),w}}else{let w=_.parseFromString("<body><template>"+C+"</template></body>","text/html").body.querySelector("template").content;return f.add(w),w}}return{normalizeElement:m,normalizeParent:S}})();return{morph:t,defaults:e}})();function Ed(r,e,{callbacks:t,...i}={}){oI.morph(r,e,{...i,callbacks:new lI(t)})}function e0(r,e,t={}){Ed(r,e.childNodes,{...t,morphStyle:"innerHTML"})}function $T(r,e){return r instanceof _r&&e instanceof Element&&e.nodeName==="TURBO-FRAME"&&r.shouldReloadWithMorph&&r.id===e.id&&(!e.getAttribute("src")||xT(r.src,e.getAttribute("src")))&&!r.closest("[data-turbo-permanent]")}function BT(r){return r.parentElement.closest("turbo-frame[src][refresh=morph]")}var yu;class lI{constructor({beforeNodeMorphed:e}={}){Xe(this,yu);ue(this,"beforeNodeAdded",e=>!(e.id&&e.hasAttribute("data-turbo-permanent")&&document.getElementById(e.id)));ue(this,"beforeNodeMorphed",(e,t)=>{if(e instanceof Element)return!e.hasAttribute("data-turbo-permanent")&&De(this,yu).call(this,e,t)?!wt("turbo:before-morph-element",{cancelable:!0,target:e,detail:{currentElement:e,newElement:t}}).defaultPrevented:!1});ue(this,"beforeAttributeUpdated",(e,t,i)=>!wt("turbo:before-morph-attribute",{cancelable:!0,target:t,detail:{attributeName:e,mutationType:i}}).defaultPrevented);ue(this,"beforeNodeRemoved",e=>this.beforeNodeMorphed(e));ue(this,"afterNodeMorphed",(e,t)=>{e instanceof Element&&wt("turbo:morph-element",{target:e,detail:{currentElement:e,newElement:t}})});it(this,yu,e||(()=>!0))}}yu=new WeakMap;class NT extends Jg{static renderElement(e,t){wt("turbo:before-frame-morph",{target:e,detail:{currentElement:e,newElement:t}}),e0(e,t,{callbacks:{beforeNodeMorphed:(i,s)=>$T(i,s)&&BT(i)===e?(i.reload(),!1):!0}})}async preservingPermanentElements(e){return await e()}}const ys=class ys{constructor(){ue(this,"hiding",!1);ue(this,"value",0);ue(this,"visible",!1);ue(this,"trickle",()=>{this.setValue(this.value+Math.random()/100)});this.stylesheetElement=this.createStylesheetElement(),this.progressElement=this.createProgressElement(),this.installStylesheetElement(),this.setValue(0)}static get defaultCSS(){return OT`
      .turbo-progress-bar {
        position: fixed;
        display: block;
        top: 0;
        left: 0;
        height: 3px;
        background: #0076ff;
        z-index: 2147483647;
        transition:
          width ${ys.animationDuration}ms ease-out,
          opacity ${ys.animationDuration/2}ms ${ys.animationDuration/2}ms ease-in;
        transform: translate3d(0, 0, 0);
      }
    `}show(){this.visible||(this.visible=!0,this.installProgressElement(),this.startTrickling())}hide(){this.visible&&!this.hiding&&(this.hiding=!0,this.fadeProgressElement(()=>{this.uninstallProgressElement(),this.stopTrickling(),this.visible=!1,this.hiding=!1}))}setValue(e){this.value=e,this.refresh()}installStylesheetElement(){document.head.insertBefore(this.stylesheetElement,document.head.firstChild)}installProgressElement(){this.progressElement.style.width="0",this.progressElement.style.opacity="1",document.documentElement.insertBefore(this.progressElement,document.body),this.refresh()}fadeProgressElement(e){this.progressElement.style.opacity="0",setTimeout(e,ys.animationDuration*1.5)}uninstallProgressElement(){this.progressElement.parentNode&&document.documentElement.removeChild(this.progressElement)}startTrickling(){this.trickleInterval||(this.trickleInterval=window.setInterval(this.trickle,ys.animationDuration))}stopTrickling(){window.clearInterval(this.trickleInterval),delete this.trickleInterval}refresh(){requestAnimationFrame(()=>{this.progressElement.style.width=`${10+this.value*90}%`})}createStylesheetElement(){const e=document.createElement("style");e.type="text/css",e.textContent=ys.defaultCSS;const t=bT();return t&&(e.nonce=t),e}createProgressElement(){const e=document.createElement("div");return e.className="turbo-progress-bar",e}};ue(ys,"animationDuration",300);let nm=ys;class uI extends kd{constructor(){super(...arguments);ue(this,"detailsByOuterHTML",this.children.filter(t=>!fI(t)).map(t=>gI(t)).reduce((t,i)=>{const{outerHTML:s}=i,n=s in t?t[s]:{type:cI(i),tracked:hI(i),elements:[]};return{...t,[s]:{...n,elements:[...n.elements,i]}}},{}))}get trackedElementSignature(){return Object.keys(this.detailsByOuterHTML).filter(t=>this.detailsByOuterHTML[t].tracked).join("")}getScriptElementsNotInSnapshot(t){return this.getElementsMatchingTypeNotInSnapshot("script",t)}getStylesheetElementsNotInSnapshot(t){return this.getElementsMatchingTypeNotInSnapshot("stylesheet",t)}getElementsMatchingTypeNotInSnapshot(t,i){return Object.keys(this.detailsByOuterHTML).filter(s=>!(s in i.detailsByOuterHTML)).map(s=>this.detailsByOuterHTML[s]).filter(({type:s})=>s==t).map(({elements:[s]})=>s)}get provisionalElements(){return Object.keys(this.detailsByOuterHTML).reduce((t,i)=>{const{type:s,tracked:n,elements:a}=this.detailsByOuterHTML[i];return s==null&&!n?[...t,...a]:a.length>1?[...t,...a.slice(1)]:t},[])}getMetaValue(t){const i=this.findMetaElementByName(t);return i?i.getAttribute("content"):null}findMetaElementByName(t){return Object.keys(this.detailsByOuterHTML).reduce((i,s)=>{const{elements:[n]}=this.detailsByOuterHTML[s];return mI(n,t)?n:i},void 0|void 0)}}function cI(r){if(dI(r))return"script";if(pI(r))return"stylesheet"}function hI(r){return r.getAttribute("data-turbo-track")=="reload"}function dI(r){return r.localName=="script"}function fI(r){return r.localName=="noscript"}function pI(r){const e=r.localName;return e=="style"||e=="link"&&r.getAttribute("rel")=="stylesheet"}function mI(r,e){return r.localName=="meta"&&r.getAttribute("name")==e}function gI(r){return r.hasAttribute("nonce")&&r.setAttribute("nonce",""),r}class Sr extends kd{static fromHTMLString(e=""){return this.fromDocument(gT(e))}static fromElement(e){return this.fromDocument(e.ownerDocument)}static fromDocument({documentElement:e,body:t,head:i}){return new this(e,t,new uI(i))}constructor(e,t,i){super(t),this.documentElement=e,this.headSnapshot=i}clone(){const e=this.element.cloneNode(!0),t=this.element.querySelectorAll("select"),i=e.querySelectorAll("select");for(const[s,n]of t.entries()){const a=i[s];for(const o of a.selectedOptions)o.selected=!1;for(const o of n.selectedOptions)a.options[o.index].selected=!0}for(const s of e.querySelectorAll('input[type="password"]'))s.value="";return new Sr(this.documentElement,e,this.headSnapshot)}get lang(){return this.documentElement.getAttribute("lang")}get headElement(){return this.headSnapshot.element}get rootLocation(){const e=this.getSetting("root")??"/";return ri(e)}get cacheControlValue(){return this.getSetting("cache-control")}get isPreviewable(){return this.cacheControlValue!="no-preview"}get isCacheable(){return this.cacheControlValue!="no-cache"}get isVisitable(){return this.getSetting("visit-control")!="reload"}get prefersViewTransitions(){return(this.getSetting("view-transition")==="true"||this.headSnapshot.getMetaValue("view-transition")==="same-origin")&&!window.matchMedia("(prefers-reduced-motion: reduce)").matches}get shouldMorphPage(){return this.getSetting("refresh-method")==="morph"}get shouldPreserveScrollPosition(){return this.getSetting("refresh-scroll")==="preserve"}getSetting(e){return this.headSnapshot.getMetaValue(`turbo-${e}`)}}var bu,Gs;class OI{constructor(){Xe(this,bu,!1);Xe(this,Gs,Promise.resolve())}renderChange(e,t){return e&&this.viewTransitionsAvailable&&!De(this,bu)?(it(this,bu,!0),it(this,Gs,De(this,Gs).then(async()=>{await document.startViewTransition(t).finished}))):it(this,Gs,De(this,Gs).then(t)),De(this,Gs)}get viewTransitionsAvailable(){return document.startViewTransition}}bu=new WeakMap,Gs=new WeakMap;const yI={action:"advance",historyChanged:!1,visitCachedSnapshot:()=>{},willRender:!0,updateHistory:!0,shouldCacheSnapshot:!0,acceptsStreamResponse:!1},bc={visitStart:"visitStart",requestStart:"requestStart",requestEnd:"requestEnd",visitEnd:"visitEnd"},ms={initialized:"initialized",started:"started",canceled:"canceled",failed:"failed",completed:"completed"},ka={networkFailure:0,timeoutFailure:-1,contentTypeMismatch:-2},bI={advance:"forward",restore:"back",replace:"none"};class vI{constructor(e,t,i,s={}){ue(this,"identifier",nn());ue(this,"timingMetrics",{});ue(this,"followedRedirect",!1);ue(this,"historyChanged",!1);ue(this,"scrolled",!1);ue(this,"shouldCacheSnapshot",!0);ue(this,"acceptsStreamResponse",!1);ue(this,"snapshotCached",!1);ue(this,"state",ms.initialized);ue(this,"viewTransitioner",new OI);this.delegate=e,this.location=t,this.restorationIdentifier=i||nn();const{action:n,historyChanged:a,referrer:o,snapshot:l,snapshotHTML:u,response:c,visitCachedSnapshot:h,willRender:f,updateHistory:m,shouldCacheSnapshot:S,acceptsStreamResponse:y,direction:E}={...yI,...s};this.action=n,this.historyChanged=a,this.referrer=o,this.snapshot=l,this.snapshotHTML=u,this.response=c,this.isSamePage=this.delegate.locationWithActionIsSamePage(this.location,this.action),this.isPageRefresh=this.view.isPageRefresh(this),this.visitCachedSnapshot=h,this.willRender=f,this.updateHistory=m,this.scrolled=!f,this.shouldCacheSnapshot=S,this.acceptsStreamResponse=y,this.direction=E||bI[n]}get adapter(){return this.delegate.adapter}get view(){return this.delegate.view}get history(){return this.delegate.history}get restorationData(){return this.history.getRestorationDataForIdentifier(this.restorationIdentifier)}get silent(){return this.isSamePage}start(){this.state==ms.initialized&&(this.recordTimingMetric(bc.visitStart),this.state=ms.started,this.adapter.visitStarted(this),this.delegate.visitStarted(this))}cancel(){this.state==ms.started&&(this.request&&this.request.cancel(),this.cancelRender(),this.state=ms.canceled)}complete(){this.state==ms.started&&(this.recordTimingMetric(bc.visitEnd),this.adapter.visitCompleted(this),this.state=ms.completed,this.followRedirect(),this.followedRedirect||this.delegate.visitCompleted(this))}fail(){this.state==ms.started&&(this.state=ms.failed,this.adapter.visitFailed(this),this.delegate.visitCompleted(this))}changeHistory(){var e;if(!this.historyChanged&&this.updateHistory){const t=this.location.href===((e=this.referrer)==null?void 0:e.href)?"replace":this.action,i=yT(t);this.history.update(i,this.location,this.restorationIdentifier),this.historyChanged=!0}}issueRequest(){this.hasPreloadedResponse()?this.simulateRequest():this.shouldIssueRequest()&&!this.request&&(this.request=new Au(this,ir.get,this.location),this.request.perform())}simulateRequest(){this.response&&(this.startRequest(),this.recordResponse(),this.finishRequest())}startRequest(){this.recordTimingMetric(bc.requestStart),this.adapter.visitRequestStarted(this)}recordResponse(e=this.response){if(this.response=e,e){const{statusCode:t}=e;Uy(t)?this.adapter.visitRequestCompleted(this):this.adapter.visitRequestFailedWithStatusCode(this,t)}}finishRequest(){this.recordTimingMetric(bc.requestEnd),this.adapter.visitRequestFinished(this)}loadResponse(){if(this.response){const{statusCode:e,responseHTML:t}=this.response;this.render(async()=>{if(this.shouldCacheSnapshot&&this.cacheSnapshot(),this.view.renderPromise&&await this.view.renderPromise,Uy(e)&&t!=null){const i=Sr.fromHTMLString(t);await this.renderPageSnapshot(i,!1),this.adapter.visitRendered(this),this.complete()}else await this.view.renderError(Sr.fromHTMLString(t),this),this.adapter.visitRendered(this),this.fail()})}}getCachedSnapshot(){const e=this.view.getCachedSnapshotForLocation(this.location)||this.getPreloadedSnapshot();if(e&&(!Fn(this.location)||e.hasAnchor(Fn(this.location)))&&(this.action=="restore"||e.isPreviewable))return e}getPreloadedSnapshot(){if(this.snapshotHTML)return Sr.fromHTMLString(this.snapshotHTML)}hasCachedSnapshot(){return this.getCachedSnapshot()!=null}loadCachedSnapshot(){const e=this.getCachedSnapshot();if(e){const t=this.shouldIssueRequest();this.render(async()=>{this.cacheSnapshot(),this.isSamePage||this.isPageRefresh?this.adapter.visitRendered(this):(this.view.renderPromise&&await this.view.renderPromise,await this.renderPageSnapshot(e,t),this.adapter.visitRendered(this),t||this.complete())})}}followRedirect(){var e;this.redirectedToLocation&&!this.followedRedirect&&((e=this.response)!=null&&e.redirected)&&(this.adapter.visitProposedToLocation(this.redirectedToLocation,{action:"replace",response:this.response,shouldCacheSnapshot:!1,willRender:!1}),this.followedRedirect=!0)}goToSamePageAnchor(){this.isSamePage&&this.render(async()=>{this.cacheSnapshot(),this.performScroll(),this.changeHistory(),this.adapter.visitRendered(this)})}prepareRequest(e){this.acceptsStreamResponse&&e.acceptResponseType(ta.contentType)}requestStarted(){this.startRequest()}requestPreventedHandlingResponse(e,t){}async requestSucceededWithResponse(e,t){const i=await t.responseHTML,{redirected:s,statusCode:n}=t;i==null?this.recordResponse({statusCode:ka.contentTypeMismatch,redirected:s}):(this.redirectedToLocation=t.redirected?t.location:void 0,this.recordResponse({statusCode:n,responseHTML:i,redirected:s}))}async requestFailedWithResponse(e,t){const i=await t.responseHTML,{redirected:s,statusCode:n}=t;i==null?this.recordResponse({statusCode:ka.contentTypeMismatch,redirected:s}):this.recordResponse({statusCode:n,responseHTML:i,redirected:s})}requestErrored(e,t){this.recordResponse({statusCode:ka.networkFailure,redirected:!1})}requestFinished(){this.finishRequest()}performScroll(){!this.scrolled&&!this.view.forceReloaded&&!this.view.shouldPreserveScrollPosition(this)&&(this.action=="restore"?this.scrollToRestoredPosition()||this.scrollToAnchor()||this.view.scrollToTop():this.scrollToAnchor()||this.view.scrollToTop(),this.isSamePage&&this.delegate.visitScrolledToSamePageLocation(this.view.lastRenderedLocation,this.location),this.scrolled=!0)}scrollToRestoredPosition(){const{scrollPosition:e}=this.restorationData;if(e)return this.view.scrollToPosition(e),!0}scrollToAnchor(){const e=Fn(this.location);if(e!=null)return this.view.scrollToAnchor(e),!0}recordTimingMetric(e){this.timingMetrics[e]=new Date().getTime()}getTimingMetrics(){return{...this.timingMetrics}}hasPreloadedResponse(){return typeof this.response=="object"}shouldIssueRequest(){return this.isSamePage?!1:this.action=="restore"?!this.hasCachedSnapshot():this.willRender}cacheSnapshot(){this.snapshotCached||(this.view.cacheSnapshot(this.snapshot).then(e=>e&&this.visitCachedSnapshot(e)),this.snapshotCached=!0)}async render(e){this.cancelRender(),await new Promise(t=>{this.frame=document.visibilityState==="hidden"?setTimeout(()=>t(),0):requestAnimationFrame(()=>t())}),await e(),delete this.frame}async renderPageSnapshot(e,t){await this.viewTransitioner.renderChange(this.view.shouldTransitionTo(e),async()=>{await this.view.renderPage(e,t,this.willRender,this),this.performScroll()})}cancelRender(){this.frame&&(cancelAnimationFrame(this.frame),delete this.frame)}}function Uy(r){return r>=200&&r<300}class SI{constructor(e){ue(this,"progressBar",new nm);ue(this,"showProgressBar",()=>{this.progressBar.show()});this.session=e}visitProposedToLocation(e,t){Hs(e,this.navigator.rootLocation)?this.navigator.startVisit(e,(t==null?void 0:t.restorationIdentifier)||nn(),t):window.location.href=e.toString()}visitStarted(e){this.location=e.location,this.redirectedToLocation=null,e.loadCachedSnapshot(),e.issueRequest(),e.goToSamePageAnchor()}visitRequestStarted(e){this.progressBar.setValue(0),e.hasCachedSnapshot()||e.action!="restore"?this.showVisitProgressBarAfterDelay():this.showProgressBar()}visitRequestCompleted(e){e.loadResponse(),e.response.redirected&&(this.redirectedToLocation=e.redirectedToLocation)}visitRequestFailedWithStatusCode(e,t){switch(t){case ka.networkFailure:case ka.timeoutFailure:case ka.contentTypeMismatch:return this.reload({reason:"request_failed",context:{statusCode:t}});default:return e.loadResponse()}}visitRequestFinished(e){}visitCompleted(e){this.progressBar.setValue(1),this.hideVisitProgressBar()}pageInvalidated(e){this.reload(e)}visitFailed(e){this.progressBar.setValue(1),this.hideVisitProgressBar()}visitRendered(e){}linkPrefetchingIsEnabledForLocation(e){return!0}formSubmissionStarted(e){this.progressBar.setValue(0),this.showFormProgressBarAfterDelay()}formSubmissionFinished(e){this.progressBar.setValue(1),this.hideFormProgressBar()}showVisitProgressBarAfterDelay(){this.visitProgressBarTimeout=window.setTimeout(this.showProgressBar,this.session.progressBarDelay)}hideVisitProgressBar(){this.progressBar.hide(),this.visitProgressBarTimeout!=null&&(window.clearTimeout(this.visitProgressBarTimeout),delete this.visitProgressBarTimeout)}showFormProgressBarAfterDelay(){this.formProgressBarTimeout==null&&(this.formProgressBarTimeout=window.setTimeout(this.showProgressBar,this.session.progressBarDelay))}hideFormProgressBar(){this.progressBar.hide(),this.formProgressBarTimeout!=null&&(window.clearTimeout(this.formProgressBarTimeout),delete this.formProgressBarTimeout)}reload(e){var t;wt("turbo:reload",{detail:e}),window.location.href=((t=this.redirectedToLocation||this.location)==null?void 0:t.toString())||window.location.href}get navigator(){return this.session.navigator}}class TI{constructor(){ue(this,"selector","[data-turbo-temporary]");ue(this,"deprecatedSelector","[data-turbo-cache=false]");ue(this,"started",!1);ue(this,"removeTemporaryElements",e=>{for(const t of this.temporaryElements)t.remove()})}start(){this.started||(this.started=!0,addEventListener("turbo:before-cache",this.removeTemporaryElements,!1))}stop(){this.started&&(this.started=!1,removeEventListener("turbo:before-cache",this.removeTemporaryElements,!1))}get temporaryElements(){return[...document.querySelectorAll(this.selector),...this.temporaryElementsWithDeprecation]}get temporaryElementsWithDeprecation(){const e=document.querySelectorAll(this.deprecatedSelector);return e.length&&console.warn(`The ${this.deprecatedSelector} selector is deprecated and will be removed in a future version. Use ${this.selector} instead.`),[...e]}}var ur,FT,eh,th;class _I{constructor(e,t){Xe(this,ur);this.session=e,this.element=t,this.linkInterceptor=new IT(this,t),this.formSubmitObserver=new Gg(this,t)}start(){this.linkInterceptor.start(),this.formSubmitObserver.start()}stop(){this.linkInterceptor.stop(),this.formSubmitObserver.stop()}shouldInterceptLinkClick(e,t,i){return Le(this,ur,eh).call(this,e)}linkClickIntercepted(e,t,i){const s=Le(this,ur,th).call(this,e);s&&s.delegate.linkClickIntercepted(e,t,i)}willSubmitForm(e,t){return e.closest("turbo-frame")==null&&Le(this,ur,FT).call(this,e,t)&&Le(this,ur,eh).call(this,e,t)}formSubmitted(e,t){const i=Le(this,ur,th).call(this,e,t);i&&i.delegate.formSubmitted(e,t)}}ur=new WeakSet,FT=function(e,t){const i=Zg(e,t),s=this.element.ownerDocument.querySelector('meta[name="turbo-root"]'),n=ri((s==null?void 0:s.content)??"/");return Le(this,ur,eh).call(this,e,t)&&Hs(i,n)},eh=function(e,t){if(e instanceof HTMLFormElement?this.session.submissionIsNavigatable(e,t):this.session.elementIsNavigatable(e)){const s=Le(this,ur,th).call(this,e,t);return s?s!=e.closest("turbo-frame"):!1}else return!1},th=function(e,t){const i=(t==null?void 0:t.getAttribute("data-turbo-frame"))||e.getAttribute("data-turbo-frame");if(i&&i!="_top"){const s=this.element.querySelector(`#${i}:not([disabled])`);if(s instanceof _r)return s}};class xI{constructor(e){ue(this,"location");ue(this,"restorationIdentifier",nn());ue(this,"restorationData",{});ue(this,"started",!1);ue(this,"pageLoaded",!1);ue(this,"currentIndex",0);ue(this,"onPopState",e=>{if(this.shouldHandlePopState()){const{turbo:t}=e.state||{};if(t){this.location=new URL(window.location.href);const{restorationIdentifier:i,restorationIndex:s}=t;this.restorationIdentifier=i;const n=s>this.currentIndex?"forward":"back";this.delegate.historyPoppedToLocationWithRestorationIdentifierAndDirection(this.location,i,n),this.currentIndex=s}}});ue(this,"onPageLoad",async e=>{await wM(),this.pageLoaded=!0});this.delegate=e}start(){var e,t;this.started||(addEventListener("popstate",this.onPopState,!1),addEventListener("load",this.onPageLoad,!1),this.currentIndex=((t=(e=history.state)==null?void 0:e.turbo)==null?void 0:t.restorationIndex)||0,this.started=!0,this.replace(new URL(window.location.href)))}stop(){this.started&&(removeEventListener("popstate",this.onPopState,!1),removeEventListener("load",this.onPageLoad,!1),this.started=!1)}push(e,t){this.update(history.pushState,e,t)}replace(e,t){this.update(history.replaceState,e,t)}update(e,t,i=nn()){e===history.pushState&&++this.currentIndex;const s={turbo:{restorationIdentifier:i,restorationIndex:this.currentIndex}};e.call(history,s,"",t.href),this.location=t,this.restorationIdentifier=i}getRestorationDataForIdentifier(e){return this.restorationData[e]||{}}updateRestorationData(e){const{restorationIdentifier:t}=this,i=this.restorationData[t];this.restorationData[t]={...i,...e}}assumeControlOfScrollRestoration(){this.previousScrollRestoration||(this.previousScrollRestoration=history.scrollRestoration??"auto",history.scrollRestoration="manual")}relinquishControlOfScrollRestoration(){this.previousScrollRestoration&&(history.scrollRestoration=this.previousScrollRestoration,delete this.previousScrollRestoration)}shouldHandlePopState(){return this.pageIsLoaded()}pageIsLoaded(){return this.pageLoaded||document.readyState=="complete"}}var ja,vu,Su,Tu,xd,_u,bo,UT,qT;class wI{constructor(e,t){Xe(this,bo);ue(this,"started",!1);Xe(this,ja,null);Xe(this,vu,()=>{this.eventTarget.addEventListener("mouseenter",De(this,Su),{capture:!0,passive:!0}),this.eventTarget.addEventListener("mouseleave",De(this,Tu),{capture:!0,passive:!0}),this.eventTarget.addEventListener("turbo:before-fetch-request",De(this,_u),!0),this.started=!0});Xe(this,Su,e=>{if(xh("turbo-prefetch")==="false")return;const t=e.target;if(t.matches&&t.matches("a[href]:not([target^=_]):not([download])")&&Le(this,bo,qT).call(this,t)){const s=t,n=_T(s);if(this.delegate.canPrefetchRequestToLocation(s,n)){it(this,ja,s);const a=new Au(this,ir.get,n,new URLSearchParams,t);a.fetchOptions.priority="low",ba.setLater(n.toString(),a,De(this,bo,UT))}}});Xe(this,Tu,e=>{e.target===De(this,ja)&&De(this,xd).call(this)});Xe(this,xd,()=>{ba.clear(),it(this,ja,null)});Xe(this,_u,e=>{if(e.target.tagName!=="FORM"&&e.detail.fetchOptions.method==="GET"){const t=ba.get(e.detail.url.toString());t&&(e.detail.fetchRequest=t),ba.clear()}});this.delegate=e,this.eventTarget=t}start(){this.started||(this.eventTarget.readyState==="loading"?this.eventTarget.addEventListener("DOMContentLoaded",De(this,vu),{once:!0}):De(this,vu).call(this))}stop(){this.started&&(this.eventTarget.removeEventListener("mouseenter",De(this,Su),{capture:!0,passive:!0}),this.eventTarget.removeEventListener("mouseleave",De(this,Tu),{capture:!0,passive:!0}),this.eventTarget.removeEventListener("turbo:before-fetch-request",De(this,_u),!0),this.started=!1)}prepareRequest(e){const t=e.target;e.headers["X-Sec-Purpose"]="prefetch";const i=t.closest("turbo-frame"),s=t.getAttribute("data-turbo-frame")||(i==null?void 0:i.getAttribute("target"))||(i==null?void 0:i.id);s&&s!=="_top"&&(e.headers["Turbo-Frame"]=s)}requestSucceededWithResponse(){}requestStarted(e){}requestErrored(e){}requestFinished(e){}requestPreventedHandlingResponse(e,t){}requestFailedWithResponse(e,t){}}ja=new WeakMap,vu=new WeakMap,Su=new WeakMap,Tu=new WeakMap,xd=new WeakMap,_u=new WeakMap,bo=new WeakSet,UT=function(){return Number(xh("turbo-prefetch-cache-time"))||ZM},qT=function(e){return!(!e.getAttribute("href")||CI(e)||kI(e)||EI(e)||AI(e)||DI(e))};const CI=r=>r.origin!==document.location.origin||!["http:","https:"].includes(r.protocol)||r.hasAttribute("target"),kI=r=>r.pathname+r.search===document.location.pathname+document.location.search||r.href.startsWith("#"),EI=r=>{if(r.getAttribute("data-turbo-prefetch")==="false"||r.getAttribute("data-turbo")==="false")return!0;const e=Ca(r,"[data-turbo-prefetch]");return!!(e&&e.getAttribute("data-turbo-prefetch")==="false")},AI=r=>{const e=r.getAttribute("data-turbo-method");return!!(e&&e.toLowerCase()!=="get"||PI(r)||r.hasAttribute("data-turbo-confirm")||r.hasAttribute("data-turbo-stream"))},PI=r=>r.hasAttribute("data-remote")||r.hasAttribute("data-behavior")||r.hasAttribute("data-confirm")||r.hasAttribute("data-method"),DI=r=>wt("turbo:before-prefetch",{target:r,cancelable:!0}).defaultPrevented;var vo,VT,XT;class MI{constructor(e){Xe(this,vo);this.delegate=e}proposeVisit(e,t={}){this.delegate.allowsVisitingLocationWithAction(e,t.action)&&this.delegate.visitProposedToLocation(e,t)}startVisit(e,t,i={}){this.stop(),this.currentVisit=new vI(this,ri(e),t,{referrer:this.location,...i}),this.currentVisit.start()}submitForm(e,t){this.stop(),this.formSubmission=new Cd(this,e,t,!0),this.formSubmission.start()}stop(){this.formSubmission&&(this.formSubmission.stop(),delete this.formSubmission),this.currentVisit&&(this.currentVisit.cancel(),delete this.currentVisit)}get adapter(){return this.delegate.adapter}get view(){return this.delegate.view}get rootLocation(){return this.view.snapshot.rootLocation}get history(){return this.delegate.history}formSubmissionStarted(e){typeof this.adapter.formSubmissionStarted=="function"&&this.adapter.formSubmissionStarted(e)}async formSubmissionSucceededWithResponse(e,t){if(e==this.formSubmission){const i=await t.responseHTML;if(i){const s=e.isSafe;s||this.view.clearSnapshotCache();const{statusCode:n,redirected:a}=t,l={action:Le(this,vo,VT).call(this,e,t),shouldCacheSnapshot:s,response:{statusCode:n,responseHTML:i,redirected:a}};this.proposeVisit(t.location,l)}}}async formSubmissionFailedWithResponse(e,t){const i=await t.responseHTML;if(i){const s=Sr.fromHTMLString(i);t.serverError?await this.view.renderError(s,this.currentVisit):await this.view.renderPage(s,!1,!0,this.currentVisit),s.shouldPreserveScrollPosition||this.view.scrollToTop(),this.view.clearSnapshotCache()}}formSubmissionErrored(e,t){console.error(t)}formSubmissionFinished(e){typeof this.adapter.formSubmissionFinished=="function"&&this.adapter.formSubmissionFinished(e)}linkPrefetchingIsEnabledForLocation(e){return typeof this.adapter.linkPrefetchingIsEnabledForLocation=="function"?this.adapter.linkPrefetchingIsEnabledForLocation(e):!0}visitStarted(e){this.delegate.visitStarted(e)}visitCompleted(e){this.delegate.visitCompleted(e),delete this.currentVisit}locationWithActionIsSamePage(e,t){const i=Fn(e),s=Fn(this.view.lastRenderedLocation),n=t==="restore"&&typeof i>"u";return t!=="replace"&&sm(e)===sm(this.view.lastRenderedLocation)&&(n||i!=null&&i!==s)}visitScrolledToSamePageLocation(e,t){this.delegate.visitScrolledToSamePageLocation(e,t)}get location(){return this.history.location}get restorationIdentifier(){return this.history.restorationIdentifier}}vo=new WeakSet,VT=function(e,t){const{submitter:i,formElement:s}=e;return Nn(i,s)||Le(this,vo,XT).call(this,t)},XT=function(e){var i;return e.redirected&&e.location.href===((i=this.location)==null?void 0:i.href)?"replace":"advance"};const bn={initial:0,loading:1,interactive:2,complete:3};class II{constructor(e){ue(this,"stage",bn.initial);ue(this,"started",!1);ue(this,"interpretReadyState",()=>{const{readyState:e}=this;e=="interactive"?this.pageIsInteractive():e=="complete"&&this.pageIsComplete()});ue(this,"pageWillUnload",()=>{this.delegate.pageWillUnload()});this.delegate=e}start(){this.started||(this.stage==bn.initial&&(this.stage=bn.loading),document.addEventListener("readystatechange",this.interpretReadyState,!1),addEventListener("pagehide",this.pageWillUnload,!1),this.started=!0)}stop(){this.started&&(document.removeEventListener("readystatechange",this.interpretReadyState,!1),removeEventListener("pagehide",this.pageWillUnload,!1),this.started=!1)}pageIsInteractive(){this.stage==bn.loading&&(this.stage=bn.interactive,this.delegate.pageBecameInteractive())}pageIsComplete(){this.pageIsInteractive(),this.stage==bn.interactive&&(this.stage=bn.complete,this.delegate.pageLoaded())}get readyState(){return document.readyState}}class RI{constructor(e){ue(this,"started",!1);ue(this,"onScroll",()=>{this.updatePosition({x:window.pageXOffset,y:window.pageYOffset})});this.delegate=e}start(){this.started||(addEventListener("scroll",this.onScroll,!1),this.onScroll(),this.started=!0)}stop(){this.started&&(removeEventListener("scroll",this.onScroll,!1),this.started=!1)}updatePosition(e){this.delegate.scrollPositionChanged(e)}}class LI{render({fragment:e}){QT.preservingPermanentElements(this,QI(e),()=>{$I(e,()=>{BI(()=>{document.documentElement.appendChild(e)})})})}enteringBardo(e,t){t.replaceWith(e.cloneNode(!0))}leavingBardo(){}}function QI(r){const e=DT(document.documentElement),t={};for(const i of e){const{id:s}=i;for(const n of r.querySelectorAll("turbo-stream")){const a=PT(n.templateElement.content,s);a&&(t[s]=[i,a])}}return t}async function $I(r,e){const t=`turbo-stream-autofocus-${nn()}`,i=r.querySelectorAll("turbo-stream"),s=NI(i);let n=null;if(s&&(s.id?n=s.id:n=t,s.id=n),e(),await bl(),(document.activeElement==null||document.activeElement==document.body)&&n){const o=document.getElementById(n);zg(o)&&o.focus(),o&&o.id==t&&o.removeAttribute("id")}}async function BI(r){const[e,t]=await DM(r,()=>document.activeElement),i=e&&e.id;if(i){const s=document.getElementById(i);zg(s)&&s!=t&&s.focus()}}function NI(r){for(const e of r){const t=vT(e.templateElement.content);if(t)return t}return null}var Ks;class FI{constructor(e){ue(this,"sources",new Set);Xe(this,Ks,!1);ue(this,"inspectFetchResponse",e=>{const t=UI(e);t&&qI(t)&&(e.preventDefault(),this.receiveMessageResponse(t))});ue(this,"receiveMessageEvent",e=>{De(this,Ks)&&typeof e.data=="string"&&this.receiveMessageHTML(e.data)});this.delegate=e}start(){De(this,Ks)||(it(this,Ks,!0),addEventListener("turbo:before-fetch-response",this.inspectFetchResponse,!1))}stop(){De(this,Ks)&&(it(this,Ks,!1),removeEventListener("turbo:before-fetch-response",this.inspectFetchResponse,!1))}connectStreamSource(e){this.streamSourceIsConnected(e)||(this.sources.add(e),e.addEventListener("message",this.receiveMessageEvent,!1))}disconnectStreamSource(e){this.streamSourceIsConnected(e)&&(this.sources.delete(e),e.removeEventListener("message",this.receiveMessageEvent,!1))}streamSourceIsConnected(e){return this.sources.has(e)}async receiveMessageResponse(e){const t=await e.responseHTML;t&&this.receiveMessageHTML(t)}receiveMessageHTML(e){this.delegate.receivedMessageFromStream(ta.wrap(e))}}Ks=new WeakMap;function UI(r){var t;const e=(t=r.detail)==null?void 0:t.fetchResponse;if(e instanceof Wg)return e}function qI(r){return(r.contentType??"").startsWith(ta.contentType)}class VI extends Kg{static renderElement(e,t){const{documentElement:i,body:s}=document;i.replaceChild(t,s)}async render(){this.replaceHeadAndBody(),this.activateScriptElements()}replaceHeadAndBody(){const{documentElement:e,head:t}=document;e.replaceChild(this.newHead,t),this.renderElement(this.currentElement,this.newElement)}activateScriptElements(){for(const e of this.scriptElements){const t=e.parentNode;if(t){const i=$l(e);t.replaceChild(i,e)}}}get newHead(){return this.newSnapshot.headSnapshot.element}get scriptElements(){return document.documentElement.querySelectorAll("script")}}var wd,jT;class t0 extends Kg{constructor(){super(...arguments);Xe(this,wd)}static renderElement(t,i){document.body&&i instanceof HTMLBodyElement?document.body.replaceWith(i):document.documentElement.appendChild(i)}get shouldRender(){return this.newSnapshot.isVisitable&&this.trackedElementsAreIdentical}get reloadReason(){if(!this.newSnapshot.isVisitable)return{reason:"turbo_visit_control_is_reload"};if(!this.trackedElementsAreIdentical)return{reason:"tracked_element_mismatch"}}async prepareToRender(){Le(this,wd,jT).call(this),await this.mergeHead()}async render(){this.willRender&&await this.replaceBody()}finishRendering(){super.finishRendering(),this.isPreview||this.focusFirstAutofocusableElement()}get currentHeadSnapshot(){return this.currentSnapshot.headSnapshot}get newHeadSnapshot(){return this.newSnapshot.headSnapshot}get newElement(){return this.newSnapshot.element}async mergeHead(){const t=this.mergeProvisionalElements(),i=this.copyNewHeadStylesheetElements();this.copyNewHeadScriptElements(),await t,await i,this.willRender&&this.removeUnusedDynamicStylesheetElements()}async replaceBody(){await this.preservingPermanentElements(async()=>{this.activateNewBody(),await this.assignNewBody()})}get trackedElementsAreIdentical(){return this.currentHeadSnapshot.trackedElementSignature==this.newHeadSnapshot.trackedElementSignature}async copyNewHeadStylesheetElements(){const t=[];for(const i of this.newHeadStylesheetElements)t.push(EM(i)),document.head.appendChild(i);await Promise.all(t)}copyNewHeadScriptElements(){for(const t of this.newHeadScriptElements)document.head.appendChild($l(t))}removeUnusedDynamicStylesheetElements(){for(const t of this.unusedDynamicStylesheetElements)document.head.removeChild(t)}async mergeProvisionalElements(){const t=[...this.newHeadProvisionalElements];for(const i of this.currentHeadProvisionalElements)this.isCurrentElementInElementList(i,t)||document.head.removeChild(i);for(const i of t)document.head.appendChild(i)}isCurrentElementInElementList(t,i){for(const[s,n]of i.entries()){if(t.tagName=="TITLE"){if(n.tagName!="TITLE")continue;if(t.innerHTML==n.innerHTML)return i.splice(s,1),!0}if(n.isEqualNode(t))return i.splice(s,1),!0}return!1}removeCurrentHeadProvisionalElements(){for(const t of this.currentHeadProvisionalElements)document.head.removeChild(t)}copyNewHeadProvisionalElements(){for(const t of this.newHeadProvisionalElements)document.head.appendChild(t)}activateNewBody(){document.adoptNode(this.newElement),this.activateNewBodyScriptElements()}activateNewBodyScriptElements(){for(const t of this.newBodyScriptElements){const i=$l(t);t.replaceWith(i)}}async assignNewBody(){await this.renderElement(this.currentElement,this.newElement)}get unusedDynamicStylesheetElements(){return this.oldHeadStylesheetElements.filter(t=>t.getAttribute("data-turbo-track")==="dynamic")}get oldHeadStylesheetElements(){return this.currentHeadSnapshot.getStylesheetElementsNotInSnapshot(this.newHeadSnapshot)}get newHeadStylesheetElements(){return this.newHeadSnapshot.getStylesheetElementsNotInSnapshot(this.currentHeadSnapshot)}get newHeadScriptElements(){return this.newHeadSnapshot.getScriptElementsNotInSnapshot(this.currentHeadSnapshot)}get currentHeadProvisionalElements(){return this.currentHeadSnapshot.provisionalElements}get newHeadProvisionalElements(){return this.newHeadSnapshot.provisionalElements}get newBodyScriptElements(){return this.newElement.querySelectorAll("script")}}wd=new WeakSet,jT=function(){const{documentElement:t}=this.currentSnapshot,{lang:i}=this.newSnapshot;i?t.setAttribute("lang",i):t.removeAttribute("lang")};class zT extends t0{static renderElement(e,t){Ed(e,t,{callbacks:{beforeNodeMorphed:(i,s)=>$T(i,s)&&!BT(i)?(i.reload(),!1):!0}}),wt("turbo:morph",{detail:{currentElement:e,newElement:t}})}async preservingPermanentElements(e){return await e()}get renderMethod(){return"morph"}get shouldAutofocus(){return!1}}class XI{constructor(e){ue(this,"keys",[]);ue(this,"snapshots",{});this.size=e}has(e){return yc(e)in this.snapshots}get(e){if(this.has(e)){const t=this.read(e);return this.touch(e),t}}put(e,t){return this.write(e,t),this.touch(e),t}clear(){this.snapshots={}}read(e){return this.snapshots[yc(e)]}write(e,t){this.snapshots[yc(e)]=t}touch(e){const t=yc(e),i=this.keys.indexOf(t);i>-1&&this.keys.splice(i,1),this.keys.unshift(t),this.trim()}trim(){for(const e of this.keys.splice(this.size))delete this.snapshots[e]}}class jI extends MT{constructor(){super(...arguments);ue(this,"snapshotCache",new XI(10));ue(this,"lastRenderedLocation",new URL(location.href));ue(this,"forceReloaded",!1)}shouldTransitionTo(t){return this.snapshot.prefersViewTransitions&&t.prefersViewTransitions}renderPage(t,i=!1,s=!0,n){const o=this.isPageRefresh(n)&&this.snapshot.shouldMorphPage?zT:t0,l=new o(this.snapshot,t,i,s);return l.shouldRender?n==null||n.changeHistory():this.forceReloaded=!0,this.render(l)}renderError(t,i){i==null||i.changeHistory();const s=new VI(this.snapshot,t,!1);return this.render(s)}clearSnapshotCache(){this.snapshotCache.clear()}async cacheSnapshot(t=this.snapshot){if(t.isCacheable){this.delegate.viewWillCacheSnapshot();const{lastRenderedLocation:i}=this;await mT();const s=t.clone();return this.snapshotCache.put(i,s),s}}getCachedSnapshotForLocation(t){return this.snapshotCache.get(t)}isPageRefresh(t){return!t||this.lastRenderedLocation.pathname===t.location.pathname&&t.action==="replace"}shouldPreserveScrollPosition(t){return this.isPageRefresh(t)&&this.snapshot.shouldPreserveScrollPosition}get snapshot(){return Sr.fromElement(this.element)}}var xu;class zI{constructor(e,t){ue(this,"selector","a[data-turbo-preload]");Xe(this,xu,()=>{this.preloadOnLoadLinksForView(document.body)});this.delegate=e,this.snapshotCache=t}start(){document.readyState==="loading"?document.addEventListener("DOMContentLoaded",De(this,xu)):this.preloadOnLoadLinksForView(document.body)}stop(){document.removeEventListener("DOMContentLoaded",De(this,xu))}preloadOnLoadLinksForView(e){for(const t of e.querySelectorAll(this.selector))this.delegate.shouldPreloadLink(t)&&this.preloadURL(t)}async preloadURL(e){const t=new URL(e.href);if(this.snapshotCache.has(t))return;await new Au(this,ir.get,t,new URLSearchParams,e).perform()}prepareRequest(e){e.headers["X-Sec-Purpose"]="prefetch"}async requestSucceededWithResponse(e,t){try{const i=await t.responseHTML,s=Sr.fromHTMLString(i);this.snapshotCache.put(e.url,s)}catch{}}requestStarted(e){}requestErrored(e){}requestFinished(e){}requestPreventedHandlingResponse(e,t){}requestFailedWithResponse(e,t){}}xu=new WeakMap;var za,ih;class ZI{constructor(e){Xe(this,za);this.session=e}clear(){this.session.clearCache()}resetCacheControl(){Le(this,za,ih).call(this,"")}exemptPageFromCache(){Le(this,za,ih).call(this,"no-cache")}exemptPageFromPreview(){Le(this,za,ih).call(this,"no-preview")}}za=new WeakSet,ih=function(e){PM("turbo-cache-control",e)};var wu;class WI{constructor(e){ue(this,"navigator",new MI(this));ue(this,"history",new xI(this));ue(this,"view",new jI(this,document.documentElement));ue(this,"adapter",new SI(this));ue(this,"pageObserver",new II(this));ue(this,"cacheObserver",new TI);ue(this,"linkPrefetchObserver",new wI(this,document));ue(this,"linkClickObserver",new RT(this,window));ue(this,"formSubmitObserver",new Gg(this,document));ue(this,"scrollObserver",new RI(this));ue(this,"streamObserver",new FI(this));ue(this,"formLinkClickObserver",new LT(this,document.documentElement));ue(this,"frameRedirector",new _I(this,document.documentElement));ue(this,"streamMessageRenderer",new LI);ue(this,"cache",new ZI(this));ue(this,"enabled",!0);ue(this,"started",!1);Xe(this,wu,150);this.recentRequests=e,this.preloader=new zI(this,this.view.snapshotCache),this.debouncedRefresh=this.refresh,this.pageRefreshDebouncePeriod=this.pageRefreshDebouncePeriod}start(){this.started||(this.pageObserver.start(),this.cacheObserver.start(),this.linkPrefetchObserver.start(),this.formLinkClickObserver.start(),this.linkClickObserver.start(),this.formSubmitObserver.start(),this.scrollObserver.start(),this.streamObserver.start(),this.frameRedirector.start(),this.history.start(),this.preloader.start(),this.started=!0,this.enabled=!0)}disable(){this.enabled=!1}stop(){this.started&&(this.pageObserver.stop(),this.cacheObserver.stop(),this.linkPrefetchObserver.stop(),this.formLinkClickObserver.stop(),this.linkClickObserver.stop(),this.formSubmitObserver.stop(),this.scrollObserver.stop(),this.streamObserver.stop(),this.frameRedirector.stop(),this.history.stop(),this.preloader.stop(),this.started=!1)}registerAdapter(e){this.adapter=e}visit(e,t={}){const i=t.frame?document.getElementById(t.frame):null;if(i instanceof _r){const s=t.action||Nn(i);i.delegate.proposeVisitIfNavigatedWithAction(i,s),i.src=e.toString()}else this.navigator.proposeVisit(ri(e),t)}refresh(e,t){const i=t&&this.recentRequests.has(t),s=e===document.baseURI;!i&&!this.navigator.currentVisit&&s&&this.visit(e,{action:"replace",shouldCacheSnapshot:!1})}connectStreamSource(e){this.streamObserver.connectStreamSource(e)}disconnectStreamSource(e){this.streamObserver.disconnectStreamSource(e)}renderStreamMessage(e){this.streamMessageRenderer.render(ta.wrap(e))}clearCache(){this.view.clearSnapshotCache()}setProgressBarDelay(e){console.warn("Please replace `session.setProgressBarDelay(delay)` with `session.progressBarDelay = delay`. The function is deprecated and will be removed in a future version of Turbo.`"),this.progressBarDelay=e}set progressBarDelay(e){zt.drive.progressBarDelay=e}get progressBarDelay(){return zt.drive.progressBarDelay}set drive(e){zt.drive.enabled=e}get drive(){return zt.drive.enabled}set formMode(e){zt.forms.mode=e}get formMode(){return zt.forms.mode}get location(){return this.history.location}get restorationIdentifier(){return this.history.restorationIdentifier}get pageRefreshDebouncePeriod(){return De(this,wu)}set pageRefreshDebouncePeriod(e){this.refresh=MM(this.debouncedRefresh.bind(this),e),it(this,wu,e)}shouldPreloadLink(e){const t=e.hasAttribute("data-turbo-method"),i=e.hasAttribute("data-turbo-stream"),s=e.getAttribute("data-turbo-frame"),n=s=="_top"?null:document.getElementById(s)||Ca(e,"turbo-frame:not([disabled])");if(t||i||n instanceof _r)return!1;{const a=new URL(e.href);return this.elementIsNavigatable(e)&&Hs(a,this.snapshot.rootLocation)}}historyPoppedToLocationWithRestorationIdentifierAndDirection(e,t,i){this.enabled?this.navigator.startVisit(e,t,{action:"restore",historyChanged:!0,direction:i}):this.adapter.pageInvalidated({reason:"turbo_disabled"})}scrollPositionChanged(e){this.history.updateRestorationData({scrollPosition:e})}willSubmitFormLinkToLocation(e,t){return this.elementIsNavigatable(e)&&Hs(t,this.snapshot.rootLocation)}submittedFormLinkToLocation(){}canPrefetchRequestToLocation(e,t){return this.elementIsNavigatable(e)&&Hs(t,this.snapshot.rootLocation)&&this.navigator.linkPrefetchingIsEnabledForLocation(t)}willFollowLinkToLocation(e,t,i){return this.elementIsNavigatable(e)&&Hs(t,this.snapshot.rootLocation)&&this.applicationAllowsFollowingLinkToLocation(e,t,i)}followedLinkToLocation(e,t){const i=this.getActionForLink(e),s=e.hasAttribute("data-turbo-stream");this.visit(t.href,{action:i,acceptsStreamResponse:s})}allowsVisitingLocationWithAction(e,t){return this.locationWithActionIsSamePage(e,t)||this.applicationAllowsVisitingLocation(e)}visitProposedToLocation(e,t){qy(e),this.adapter.visitProposedToLocation(e,t)}visitStarted(e){e.acceptsStreamResponse||(Th(document.documentElement),this.view.markVisitDirection(e.direction)),qy(e.location),e.silent||this.notifyApplicationAfterVisitingLocation(e.location,e.action)}visitCompleted(e){this.view.unmarkVisitDirection(),_h(document.documentElement),this.notifyApplicationAfterPageLoad(e.getTimingMetrics())}locationWithActionIsSamePage(e,t){return this.navigator.locationWithActionIsSamePage(e,t)}visitScrolledToSamePageLocation(e,t){this.notifyApplicationAfterVisitingSamePageLocation(e,t)}willSubmitForm(e,t){const i=Zg(e,t);return this.submissionIsNavigatable(e,t)&&Hs(ri(i),this.snapshot.rootLocation)}formSubmitted(e,t){this.navigator.submitForm(e,t)}pageBecameInteractive(){this.view.lastRenderedLocation=this.location,this.notifyApplicationAfterPageLoad()}pageLoaded(){this.history.assumeControlOfScrollRestoration()}pageWillUnload(){this.history.relinquishControlOfScrollRestoration()}receivedMessageFromStream(e){this.renderStreamMessage(e)}viewWillCacheSnapshot(){var e;(e=this.navigator.currentVisit)!=null&&e.silent||this.notifyApplicationBeforeCachingSnapshot()}allowsImmediateRender({element:e},t){const i=this.notifyApplicationBeforeRender(e,t),{defaultPrevented:s,detail:{render:n}}=i;return this.view.renderer&&n&&(this.view.renderer.renderElement=n),!s}viewRenderedSnapshot(e,t,i){this.view.lastRenderedLocation=this.history.location,this.notifyApplicationAfterRender(i)}preloadOnLoadLinksForView(e){this.preloader.preloadOnLoadLinksForView(e)}viewInvalidated(e){this.adapter.pageInvalidated(e)}frameLoaded(e){this.notifyApplicationAfterFrameLoad(e)}frameRendered(e,t){this.notifyApplicationAfterFrameRender(e,t)}applicationAllowsFollowingLinkToLocation(e,t,i){return!this.notifyApplicationAfterClickingLinkToLocation(e,t,i).defaultPrevented}applicationAllowsVisitingLocation(e){return!this.notifyApplicationBeforeVisitingLocation(e).defaultPrevented}notifyApplicationAfterClickingLinkToLocation(e,t,i){return wt("turbo:click",{target:e,detail:{url:t.href,originalEvent:i},cancelable:!0})}notifyApplicationBeforeVisitingLocation(e){return wt("turbo:before-visit",{detail:{url:e.href},cancelable:!0})}notifyApplicationAfterVisitingLocation(e,t){return wt("turbo:visit",{detail:{url:e.href,action:t}})}notifyApplicationBeforeCachingSnapshot(){return wt("turbo:before-cache")}notifyApplicationBeforeRender(e,t){return wt("turbo:before-render",{detail:{newBody:e,...t},cancelable:!0})}notifyApplicationAfterRender(e){return wt("turbo:render",{detail:{renderMethod:e}})}notifyApplicationAfterPageLoad(e={}){return wt("turbo:load",{detail:{url:this.location.href,timing:e}})}notifyApplicationAfterVisitingSamePageLocation(e,t){dispatchEvent(new HashChangeEvent("hashchange",{oldURL:e.toString(),newURL:t.toString()}))}notifyApplicationAfterFrameLoad(e){return wt("turbo:frame-load",{target:e})}notifyApplicationAfterFrameRender(e,t){return wt("turbo:frame-render",{detail:{fetchResponse:e},target:t,cancelable:!0})}submissionIsNavigatable(e,t){if(zt.forms.mode=="off")return!1;{const i=t?this.elementIsNavigatable(t):!0;return zt.forms.mode=="optin"?i&&e.closest('[data-turbo="true"]')!=null:i&&this.elementIsNavigatable(e)}}elementIsNavigatable(e){const t=Ca(e,"[data-turbo]"),i=Ca(e,"turbo-frame");return zt.drive.enabled||i?t?t.getAttribute("data-turbo")!="false":!0:t?t.getAttribute("data-turbo")=="true":!1}getActionForLink(e){return Nn(e)||"advance"}get snapshot(){return this.view.snapshot}}wu=new WeakMap;function qy(r){Object.defineProperties(r,HI)}const HI={absoluteURL:{get(){return this.toString()}}},Mt=new WI(wT),{cache:YI,navigator:GI}=Mt;function ZT(){Mt.start()}function KI(r){Mt.registerAdapter(r)}function JI(r,e){Mt.visit(r,e)}function WT(r){Mt.connectStreamSource(r)}function HT(r){Mt.disconnectStreamSource(r)}function eR(r){Mt.renderStreamMessage(r)}function tR(){console.warn("Please replace `Turbo.clearCache()` with `Turbo.cache.clear()`. The top-level function is deprecated and will be removed in a future version of Turbo.`"),Mt.clearCache()}function iR(r){console.warn("Please replace `Turbo.setProgressBarDelay(delay)` with `Turbo.config.drive.progressBarDelay = delay`. The top-level function is deprecated and will be removed in a future version of Turbo.`"),zt.drive.progressBarDelay=r}function rR(r){console.warn("Please replace `Turbo.setConfirmMethod(confirmMethod)` with `Turbo.config.forms.confirm = confirmMethod`. The top-level function is deprecated and will be removed in a future version of Turbo.`"),zt.forms.confirm=r}function sR(r){console.warn("Please replace `Turbo.setFormMode(mode)` with `Turbo.config.forms.mode = mode`. The top-level function is deprecated and will be removed in a future version of Turbo.`"),zt.forms.mode=r}function nR(r,e){zT.renderElement(r,e)}function aR(r,e){NT.renderElement(r,e)}var oR=Object.freeze({__proto__:null,navigator:GI,session:Mt,cache:YI,PageRenderer:t0,PageSnapshot:Sr,FrameRenderer:Jg,fetch:CT,config:zt,start:ZT,registerAdapter:KI,visit:JI,connectStreamSource:WT,disconnectStreamSource:HT,renderStreamMessage:eR,clearCache:tR,setProgressBarDelay:iR,setConfirmMethod:rR,setFormMode:sR,morphBodyElements:nR,morphTurboFrameElements:aR,morphChildren:e0,morphElements:Ed});class lR extends Error{}var Za,Ur,Js,Cu,Wa,Ha,Ne,fa,YT,GT,KT,JT,e_,t_,i_,am,pa,r_,rh,s_,n_,a_;class uR{constructor(e){Xe(this,Ne);ue(this,"fetchResponseLoaded",e=>Promise.resolve());Xe(this,Za,null);Xe(this,Ur,()=>{});Xe(this,Js,!1);Xe(this,Cu,!1);Xe(this,Wa,new Set);Xe(this,Ha,!1);ue(this,"action",null);ue(this,"visitCachedSnapshot",({element:e})=>{const t=e.querySelector("#"+this.element.id);t&&this.previousFrameElement&&t.replaceChildren(...this.previousFrameElement.children),delete this.previousFrameElement});this.element=e,this.view=new rI(this,this.element),this.appearanceObserver=new VM(this,this.element),this.formLinkClickObserver=new LT(this,this.element),this.linkInterceptor=new IT(this,this.element),this.restorationIdentifier=nn(),this.formSubmitObserver=new Gg(this,this.element)}connect(){De(this,Js)||(it(this,Js,!0),this.loadingStyle==ya.lazy?this.appearanceObserver.start():Le(this,Ne,fa).call(this),this.formLinkClickObserver.start(),this.linkInterceptor.start(),this.formSubmitObserver.start())}disconnect(){De(this,Js)&&(it(this,Js,!1),this.appearanceObserver.stop(),this.formLinkClickObserver.stop(),this.linkInterceptor.stop(),this.formSubmitObserver.stop())}disabledChanged(){this.loadingStyle==ya.eager&&Le(this,Ne,fa).call(this)}sourceURLChanged(){Le(this,Ne,s_).call(this,"src")||(this.element.isConnected&&(this.complete=!1),(this.loadingStyle==ya.eager||De(this,Cu))&&Le(this,Ne,fa).call(this))}sourceURLReloaded(){const{refresh:e,src:t}=this.element;return it(this,Ha,t&&e==="morph"),this.element.removeAttribute("complete"),this.element.src=null,this.element.src=t,this.element.loaded}loadingStyleChanged(){this.loadingStyle==ya.lazy?this.appearanceObserver.start():(this.appearanceObserver.stop(),Le(this,Ne,fa).call(this))}async loadResponse(e){(e.redirected||e.succeeded&&e.isHTML)&&(this.sourceURL=e.response.url);try{const t=await e.responseHTML;if(t){const i=gT(t);Sr.fromDocument(i).isVisitable?await Le(this,Ne,YT).call(this,e,i):await Le(this,Ne,JT).call(this,e)}}finally{it(this,Ha,!1),this.fetchResponseLoaded=()=>Promise.resolve()}}elementAppearedInViewport(e){this.proposeVisitIfNavigatedWithAction(e,Nn(e)),Le(this,Ne,fa).call(this)}willSubmitFormLinkToLocation(e){return Le(this,Ne,rh).call(this,e)}submittedFormLinkToLocation(e,t,i){const s=Le(this,Ne,pa).call(this,e);s&&i.setAttribute("data-turbo-frame",s.id)}shouldInterceptLinkClick(e,t,i){return Le(this,Ne,rh).call(this,e)}linkClickIntercepted(e,t){Le(this,Ne,KT).call(this,e,t)}willSubmitForm(e,t){return e.closest("turbo-frame")==this.element&&Le(this,Ne,rh).call(this,e,t)}formSubmitted(e,t){this.formSubmission&&this.formSubmission.stop(),this.formSubmission=new Cd(this,e,t);const{fetchRequest:i}=this.formSubmission;this.prepareRequest(i),this.formSubmission.start()}prepareRequest(e){var t;e.headers["Turbo-Frame"]=this.id,(t=this.currentNavigationElement)!=null&&t.hasAttribute("data-turbo-stream")&&e.acceptResponseType(ta.contentType)}requestStarted(e){Th(this.element)}requestPreventedHandlingResponse(e,t){De(this,Ur).call(this)}async requestSucceededWithResponse(e,t){await this.loadResponse(t),De(this,Ur).call(this)}async requestFailedWithResponse(e,t){await this.loadResponse(t),De(this,Ur).call(this)}requestErrored(e,t){console.error(t),De(this,Ur).call(this)}requestFinished(e){_h(this.element)}formSubmissionStarted({formElement:e}){Th(e,Le(this,Ne,pa).call(this,e))}formSubmissionSucceededWithResponse(e,t){const i=Le(this,Ne,pa).call(this,e.formElement,e.submitter);i.delegate.proposeVisitIfNavigatedWithAction(i,Nn(e.submitter,e.formElement,i)),i.delegate.loadResponse(t),e.isSafe||Mt.clearCache()}formSubmissionFailedWithResponse(e,t){this.element.delegate.loadResponse(t),Mt.clearCache()}formSubmissionErrored(e,t){console.error(t)}formSubmissionFinished({formElement:e}){_h(e,Le(this,Ne,pa).call(this,e))}allowsImmediateRender({element:e},t){const i=wt("turbo:before-frame-render",{target:this.element,detail:{newFrame:e,...t},cancelable:!0}),{defaultPrevented:s,detail:{render:n}}=i;return this.view.renderer&&n&&(this.view.renderer.renderElement=n),!s}viewRenderedSnapshot(e,t,i){}preloadOnLoadLinksForView(e){Mt.preloadOnLoadLinksForView(e)}viewInvalidated(){}willRenderFrame(e,t){this.previousFrameElement=e.cloneNode(!0)}proposeVisitIfNavigatedWithAction(e,t=null){if(this.action=t,this.action){const i=Sr.fromElement(e).clone(),{visitCachedSnapshot:s}=e.delegate;e.delegate.fetchResponseLoaded=async n=>{if(e.src){const{statusCode:a,redirected:o}=n,l=await n.responseHTML,c={response:{statusCode:a,redirected:o,responseHTML:l},visitCachedSnapshot:s,willRender:!1,updateHistory:!1,restorationIdentifier:this.restorationIdentifier,snapshot:i};this.action&&(c.action=this.action),Mt.visit(e.src,c)}}}}changeHistory(){if(this.action){const e=yT(this.action);Mt.history.update(e,ri(this.element.src||""),this.restorationIdentifier)}}async extractForeignFrameElement(e){let t;const i=CSS.escape(this.id);try{if(t=Xy(e.querySelector(`turbo-frame#${i}`),this.sourceURL),t)return t;if(t=Xy(e.querySelector(`turbo-frame[src][recurse~=${i}]`),this.sourceURL),t)return await t.loaded,await this.extractForeignFrameElement(t)}catch(s){return console.error(s),new _r}return null}get id(){return this.element.id}get enabled(){return!this.element.disabled}get sourceURL(){if(this.element.src)return this.element.src}set sourceURL(e){Le(this,Ne,n_).call(this,"src",()=>{this.element.src=e??null})}get loadingStyle(){return this.element.loading}get isLoading(){return this.formSubmission!==void 0||De(this,Ur).call(this)!==void 0}get complete(){return this.element.hasAttribute("complete")}set complete(e){e?this.element.setAttribute("complete",""):this.element.removeAttribute("complete")}get isActive(){return this.element.isActive&&De(this,Js)}get rootLocation(){const e=this.element.ownerDocument.querySelector('meta[name="turbo-root"]'),t=(e==null?void 0:e.content)??"/";return ri(t)}}Za=new WeakMap,Ur=new WeakMap,Js=new WeakMap,Cu=new WeakMap,Wa=new WeakMap,Ha=new WeakMap,Ne=new WeakSet,fa=async function(){this.enabled&&this.isActive&&!this.complete&&this.sourceURL&&(this.element.loaded=Le(this,Ne,GT).call(this,ri(this.sourceURL)),this.appearanceObserver.stop(),await this.element.loaded,it(this,Cu,!0))},YT=async function(e,t){const i=await this.extractForeignFrameElement(t.body),s=De(this,Ha)?NT:Jg;if(i){const n=new kd(i),a=new s(this,this.view.snapshot,n,!1,!1);this.view.renderPromise&&await this.view.renderPromise,this.changeHistory(),await this.view.render(a),this.complete=!0,Mt.frameRendered(e,this.element),Mt.frameLoaded(this.element),await this.fetchResponseLoaded(e)}else Le(this,Ne,e_).call(this,e)&&Le(this,Ne,t_).call(this,e)},GT=async function(e){var i;const t=new Au(this,ir.get,e,new URLSearchParams,this.element);return(i=De(this,Za))==null||i.cancel(),it(this,Za,t),new Promise(s=>{it(this,Ur,()=>{it(this,Ur,()=>{}),it(this,Za,null),s()}),t.perform()})},KT=function(e,t,i){const s=Le(this,Ne,pa).call(this,e,i);s.delegate.proposeVisitIfNavigatedWithAction(s,Nn(i,e,s)),Le(this,Ne,a_).call(this,e,()=>{s.src=t})},JT=async function(e){console.warn(`The response (${e.statusCode}) from <turbo-frame id="${this.element.id}"> is performing a full page visit due to turbo-visit-control.`),await Le(this,Ne,am).call(this,e.response)},e_=function(e){this.element.setAttribute("complete","");const t=e.response,i=async(n,a)=>{n instanceof Response?Le(this,Ne,am).call(this,n):Mt.visit(n,a)};return!wt("turbo:frame-missing",{target:this.element,detail:{response:t,visit:i},cancelable:!0}).defaultPrevented},t_=function(e){this.view.missing(),Le(this,Ne,i_).call(this,e)},i_=function(e){const t=`The response (${e.statusCode}) did not contain the expected <turbo-frame id="${this.element.id}"> and will be ignored. To perform a full page visit instead, set turbo-visit-control to reload.`;throw new lR(t)},am=async function(e){const t=new Wg(e),i=await t.responseHTML,{location:s,redirected:n,statusCode:a}=t;return Mt.visit(s,{response:{redirected:n,statusCode:a,responseHTML:i}})},pa=function(e,t){const i=Sh("data-turbo-frame",t,e)||this.element.getAttribute("target");return Vy(i)??this.element},r_=function(e,t){const i=Zg(e,t);return Hs(ri(i),this.rootLocation)},rh=function(e,t){const i=Sh("data-turbo-frame",t,e)||this.element.getAttribute("target");if(e instanceof HTMLFormElement&&!Le(this,Ne,r_).call(this,e,t)||!this.enabled||i=="_top")return!1;if(i){const s=Vy(i);if(s)return!s.disabled}return!(!Mt.elementIsNavigatable(e)||t&&!Mt.elementIsNavigatable(t))},s_=function(e){return De(this,Wa).has(e)},n_=function(e,t){De(this,Wa).add(e),t(),De(this,Wa).delete(e)},a_=function(e,t){this.currentNavigationElement=e,t(),delete this.currentNavigationElement};function Vy(r){if(r!=null){const e=document.getElementById(r);if(e instanceof _r)return e}}function Xy(r,e){if(r){const t=r.getAttribute("src");if(t!=null&&e!=null&&xT(t,e))throw new Error(`Matching <turbo-frame id="${r.id}"> element has a source URL which references itself`);if(r.ownerDocument!==document&&(r=document.importNode(r,!0)),r instanceof _r)return r.connectedCallback(),r.disconnectedCallback(),r}}const o_={after(){this.targetElements.forEach(r=>{var e;return(e=r.parentElement)==null?void 0:e.insertBefore(this.templateContent,r.nextSibling)})},append(){this.removeDuplicateTargetChildren(),this.targetElements.forEach(r=>r.append(this.templateContent))},before(){this.targetElements.forEach(r=>{var e;return(e=r.parentElement)==null?void 0:e.insertBefore(this.templateContent,r)})},prepend(){this.removeDuplicateTargetChildren(),this.targetElements.forEach(r=>r.prepend(this.templateContent))},remove(){this.targetElements.forEach(r=>r.remove())},replace(){const r=this.getAttribute("method");this.targetElements.forEach(e=>{r==="morph"?Ed(e,this.templateContent):e.replaceWith(this.templateContent)})},update(){const r=this.getAttribute("method");this.targetElements.forEach(e=>{r==="morph"?e0(e,this.templateContent):(e.innerHTML="",e.append(this.templateContent))})},refresh(){Mt.refresh(this.baseURI,this.requestId)}};var $n,ul;const BO=class BO extends HTMLElement{constructor(){super(...arguments);Xe(this,$n)}static async renderElement(t){await t.performAction()}async connectedCallback(){try{await this.render()}catch(t){console.error(t)}finally{this.disconnect()}}async render(){return this.renderPromise??(this.renderPromise=(async()=>{const t=this.beforeRenderEvent;this.dispatchEvent(t)&&(await bl(),await t.detail.render(this))})())}disconnect(){try{this.remove()}catch{}}removeDuplicateTargetChildren(){this.duplicateChildren.forEach(t=>t.remove())}get duplicateChildren(){var s;const t=this.targetElements.flatMap(n=>[...n.children]).filter(n=>!!n.getAttribute("id")),i=[...((s=this.templateContent)==null?void 0:s.children)||[]].filter(n=>!!n.getAttribute("id")).map(n=>n.getAttribute("id"));return t.filter(n=>i.includes(n.getAttribute("id")))}get performAction(){if(this.action){const t=o_[this.action];if(t)return t;Le(this,$n,ul).call(this,"unknown action")}Le(this,$n,ul).call(this,"action attribute is missing")}get targetElements(){if(this.target)return this.targetElementsById;if(this.targets)return this.targetElementsByQuery;Le(this,$n,ul).call(this,"target or targets attribute is missing")}get templateContent(){return this.templateElement.content.cloneNode(!0)}get templateElement(){if(this.firstElementChild===null){const t=this.ownerDocument.createElement("template");return this.appendChild(t),t}else if(this.firstElementChild instanceof HTMLTemplateElement)return this.firstElementChild;Le(this,$n,ul).call(this,"first child element must be a <template> element")}get action(){return this.getAttribute("action")}get target(){return this.getAttribute("target")}get targets(){return this.getAttribute("targets")}get requestId(){return this.getAttribute("request-id")}get description(){return(this.outerHTML.match(/<[^>]+>/)??[])[0]??"<turbo-stream>"}get beforeRenderEvent(){return new CustomEvent("turbo:before-stream-render",{bubbles:!0,cancelable:!0,detail:{newStream:this,render:BO.renderElement}})}get targetElementsById(){var i;const t=(i=this.ownerDocument)==null?void 0:i.getElementById(this.target);return t!==null?[t]:[]}get targetElementsByQuery(){var i;const t=(i=this.ownerDocument)==null?void 0:i.querySelectorAll(this.targets);return t.length!==0?Array.prototype.slice.call(t):[]}};$n=new WeakSet,ul=function(t){throw new Error(`${this.description}: ${t}`)};let om=BO;class cR extends HTMLElement{constructor(){super(...arguments);ue(this,"streamSource",null)}connectedCallback(){this.streamSource=this.src.match(/^ws{1,2}:/)?new WebSocket(this.src):new EventSource(this.src),WT(this.streamSource)}disconnectedCallback(){this.streamSource&&(this.streamSource.close(),HT(this.streamSource))}get src(){return this.getAttribute("src")||""}}_r.delegateConstructor=uR;customElements.get("turbo-frame")===void 0&&customElements.define("turbo-frame",_r);customElements.get("turbo-stream")===void 0&&customElements.define("turbo-stream",om);customElements.get("turbo-stream-source")===void 0&&customElements.define("turbo-stream-source",cR);(()=>{let r=document.currentScript;if(r&&!r.hasAttribute("data-turbo-suppress-warning"))for(r=r.parentElement;r;){if(r==document.body)return console.warn(OT`
        You are loading Turbo from a <script> element inside the <body> element. This is probably not what you meant to do!

        Load your application’s JavaScript bundle inside the <head> element instead. <script> elements in <body> are evaluated with each page change.

        For more information, see: https://turbo.hotwired.dev/handbook/building#working-with-script-elements

        ——
        Suppress this warning by adding a "data-turbo-suppress-warning" attribute to: %s
      `,r.outerHTML);r=r.parentElement}})();window.Turbo={...oR,StreamActions:o_};ZT();var l_={exports:{}};(function(r,e){(function(t){r.exports=t()})((function(t){var i=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function s(C,_){var b=C[0],T=C[1],w=C[2],A=C[3];b+=(T&w|~T&A)+_[0]-680876936|0,b=(b<<7|b>>>25)+T|0,A+=(b&T|~b&w)+_[1]-389564586|0,A=(A<<12|A>>>20)+b|0,w+=(A&b|~A&T)+_[2]+606105819|0,w=(w<<17|w>>>15)+A|0,T+=(w&A|~w&b)+_[3]-1044525330|0,T=(T<<22|T>>>10)+w|0,b+=(T&w|~T&A)+_[4]-176418897|0,b=(b<<7|b>>>25)+T|0,A+=(b&T|~b&w)+_[5]+1200080426|0,A=(A<<12|A>>>20)+b|0,w+=(A&b|~A&T)+_[6]-1473231341|0,w=(w<<17|w>>>15)+A|0,T+=(w&A|~w&b)+_[7]-45705983|0,T=(T<<22|T>>>10)+w|0,b+=(T&w|~T&A)+_[8]+1770035416|0,b=(b<<7|b>>>25)+T|0,A+=(b&T|~b&w)+_[9]-1958414417|0,A=(A<<12|A>>>20)+b|0,w+=(A&b|~A&T)+_[10]-42063|0,w=(w<<17|w>>>15)+A|0,T+=(w&A|~w&b)+_[11]-1990404162|0,T=(T<<22|T>>>10)+w|0,b+=(T&w|~T&A)+_[12]+1804603682|0,b=(b<<7|b>>>25)+T|0,A+=(b&T|~b&w)+_[13]-40341101|0,A=(A<<12|A>>>20)+b|0,w+=(A&b|~A&T)+_[14]-1502002290|0,w=(w<<17|w>>>15)+A|0,T+=(w&A|~w&b)+_[15]+1236535329|0,T=(T<<22|T>>>10)+w|0,b+=(T&A|w&~A)+_[1]-165796510|0,b=(b<<5|b>>>27)+T|0,A+=(b&w|T&~w)+_[6]-1069501632|0,A=(A<<9|A>>>23)+b|0,w+=(A&T|b&~T)+_[11]+643717713|0,w=(w<<14|w>>>18)+A|0,T+=(w&b|A&~b)+_[0]-373897302|0,T=(T<<20|T>>>12)+w|0,b+=(T&A|w&~A)+_[5]-701558691|0,b=(b<<5|b>>>27)+T|0,A+=(b&w|T&~w)+_[10]+38016083|0,A=(A<<9|A>>>23)+b|0,w+=(A&T|b&~T)+_[15]-660478335|0,w=(w<<14|w>>>18)+A|0,T+=(w&b|A&~b)+_[4]-405537848|0,T=(T<<20|T>>>12)+w|0,b+=(T&A|w&~A)+_[9]+568446438|0,b=(b<<5|b>>>27)+T|0,A+=(b&w|T&~w)+_[14]-1019803690|0,A=(A<<9|A>>>23)+b|0,w+=(A&T|b&~T)+_[3]-187363961|0,w=(w<<14|w>>>18)+A|0,T+=(w&b|A&~b)+_[8]+1163531501|0,T=(T<<20|T>>>12)+w|0,b+=(T&A|w&~A)+_[13]-1444681467|0,b=(b<<5|b>>>27)+T|0,A+=(b&w|T&~w)+_[2]-51403784|0,A=(A<<9|A>>>23)+b|0,w+=(A&T|b&~T)+_[7]+1735328473|0,w=(w<<14|w>>>18)+A|0,T+=(w&b|A&~b)+_[12]-1926607734|0,T=(T<<20|T>>>12)+w|0,b+=(T^w^A)+_[5]-378558|0,b=(b<<4|b>>>28)+T|0,A+=(b^T^w)+_[8]-2022574463|0,A=(A<<11|A>>>21)+b|0,w+=(A^b^T)+_[11]+1839030562|0,w=(w<<16|w>>>16)+A|0,T+=(w^A^b)+_[14]-35309556|0,T=(T<<23|T>>>9)+w|0,b+=(T^w^A)+_[1]-1530992060|0,b=(b<<4|b>>>28)+T|0,A+=(b^T^w)+_[4]+1272893353|0,A=(A<<11|A>>>21)+b|0,w+=(A^b^T)+_[7]-155497632|0,w=(w<<16|w>>>16)+A|0,T+=(w^A^b)+_[10]-1094730640|0,T=(T<<23|T>>>9)+w|0,b+=(T^w^A)+_[13]+681279174|0,b=(b<<4|b>>>28)+T|0,A+=(b^T^w)+_[0]-358537222|0,A=(A<<11|A>>>21)+b|0,w+=(A^b^T)+_[3]-722521979|0,w=(w<<16|w>>>16)+A|0,T+=(w^A^b)+_[6]+76029189|0,T=(T<<23|T>>>9)+w|0,b+=(T^w^A)+_[9]-640364487|0,b=(b<<4|b>>>28)+T|0,A+=(b^T^w)+_[12]-421815835|0,A=(A<<11|A>>>21)+b|0,w+=(A^b^T)+_[15]+530742520|0,w=(w<<16|w>>>16)+A|0,T+=(w^A^b)+_[2]-995338651|0,T=(T<<23|T>>>9)+w|0,b+=(w^(T|~A))+_[0]-198630844|0,b=(b<<6|b>>>26)+T|0,A+=(T^(b|~w))+_[7]+1126891415|0,A=(A<<10|A>>>22)+b|0,w+=(b^(A|~T))+_[14]-1416354905|0,w=(w<<15|w>>>17)+A|0,T+=(A^(w|~b))+_[5]-57434055|0,T=(T<<21|T>>>11)+w|0,b+=(w^(T|~A))+_[12]+1700485571|0,b=(b<<6|b>>>26)+T|0,A+=(T^(b|~w))+_[3]-1894986606|0,A=(A<<10|A>>>22)+b|0,w+=(b^(A|~T))+_[10]-1051523|0,w=(w<<15|w>>>17)+A|0,T+=(A^(w|~b))+_[1]-2054922799|0,T=(T<<21|T>>>11)+w|0,b+=(w^(T|~A))+_[8]+1873313359|0,b=(b<<6|b>>>26)+T|0,A+=(T^(b|~w))+_[15]-30611744|0,A=(A<<10|A>>>22)+b|0,w+=(b^(A|~T))+_[6]-1560198380|0,w=(w<<15|w>>>17)+A|0,T+=(A^(w|~b))+_[13]+1309151649|0,T=(T<<21|T>>>11)+w|0,b+=(w^(T|~A))+_[4]-145523070|0,b=(b<<6|b>>>26)+T|0,A+=(T^(b|~w))+_[11]-1120210379|0,A=(A<<10|A>>>22)+b|0,w+=(b^(A|~T))+_[2]+718787259|0,w=(w<<15|w>>>17)+A|0,T+=(A^(w|~b))+_[9]-343485551|0,T=(T<<21|T>>>11)+w|0,C[0]=b+C[0]|0,C[1]=T+C[1]|0,C[2]=w+C[2]|0,C[3]=A+C[3]|0}function n(C){var _=[],b;for(b=0;b<64;b+=4)_[b>>2]=C.charCodeAt(b)+(C.charCodeAt(b+1)<<8)+(C.charCodeAt(b+2)<<16)+(C.charCodeAt(b+3)<<24);return _}function a(C){var _=[],b;for(b=0;b<64;b+=4)_[b>>2]=C[b]+(C[b+1]<<8)+(C[b+2]<<16)+(C[b+3]<<24);return _}function o(C){var _=C.length,b=[1732584193,-271733879,-1732584194,271733878],T,w,A,I,N,P;for(T=64;T<=_;T+=64)s(b,n(C.substring(T-64,T)));for(C=C.substring(T-64),w=C.length,A=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],T=0;T<w;T+=1)A[T>>2]|=C.charCodeAt(T)<<(T%4<<3);if(A[T>>2]|=128<<(T%4<<3),T>55)for(s(b,A),T=0;T<16;T+=1)A[T]=0;return I=_*8,I=I.toString(16).match(/(.*?)(.{0,8})$/),N=parseInt(I[2],16),P=parseInt(I[1],16)||0,A[14]=N,A[15]=P,s(b,A),b}function l(C){var _=C.length,b=[1732584193,-271733879,-1732584194,271733878],T,w,A,I,N,P;for(T=64;T<=_;T+=64)s(b,a(C.subarray(T-64,T)));for(C=T-64<_?C.subarray(T-64):new Uint8Array(0),w=C.length,A=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],T=0;T<w;T+=1)A[T>>2]|=C[T]<<(T%4<<3);if(A[T>>2]|=128<<(T%4<<3),T>55)for(s(b,A),T=0;T<16;T+=1)A[T]=0;return I=_*8,I=I.toString(16).match(/(.*?)(.{0,8})$/),N=parseInt(I[2],16),P=parseInt(I[1],16)||0,A[14]=N,A[15]=P,s(b,A),b}function u(C){var _="",b;for(b=0;b<4;b+=1)_+=i[C>>b*8+4&15]+i[C>>b*8&15];return _}function c(C){var _;for(_=0;_<C.length;_+=1)C[_]=u(C[_]);return C.join("")}c(o("hello")),typeof ArrayBuffer<"u"&&!ArrayBuffer.prototype.slice&&(function(){function C(_,b){return _=_|0||0,_<0?Math.max(_+b,0):Math.min(_,b)}ArrayBuffer.prototype.slice=function(_,b){var T=this.byteLength,w=C(_,T),A=T,I,N,P,R;return b!==t&&(A=C(b,T)),w>A?new ArrayBuffer(0):(I=A-w,N=new ArrayBuffer(I),P=new Uint8Array(N),R=new Uint8Array(this,w,I),P.set(R),N)}})();function h(C){return/[\u0080-\uFFFF]/.test(C)&&(C=unescape(encodeURIComponent(C))),C}function f(C,_){var b=C.length,T=new ArrayBuffer(b),w=new Uint8Array(T),A;for(A=0;A<b;A+=1)w[A]=C.charCodeAt(A);return _?w:T}function m(C){return String.fromCharCode.apply(null,new Uint8Array(C))}function S(C,_,b){var T=new Uint8Array(C.byteLength+_.byteLength);return T.set(new Uint8Array(C)),T.set(new Uint8Array(_),C.byteLength),T}function y(C){var _=[],b=C.length,T;for(T=0;T<b-1;T+=2)_.push(parseInt(C.substr(T,2),16));return String.fromCharCode.apply(String,_)}function E(){this.reset()}return E.prototype.append=function(C){return this.appendBinary(h(C)),this},E.prototype.appendBinary=function(C){this._buff+=C,this._length+=C.length;var _=this._buff.length,b;for(b=64;b<=_;b+=64)s(this._hash,n(this._buff.substring(b-64,b)));return this._buff=this._buff.substring(b-64),this},E.prototype.end=function(C){var _=this._buff,b=_.length,T,w=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],A;for(T=0;T<b;T+=1)w[T>>2]|=_.charCodeAt(T)<<(T%4<<3);return this._finish(w,b),A=c(this._hash),C&&(A=y(A)),this.reset(),A},E.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},E.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},E.prototype.setState=function(C){return this._buff=C.buff,this._length=C.length,this._hash=C.hash,this},E.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},E.prototype._finish=function(C,_){var b=_,T,w,A;if(C[b>>2]|=128<<(b%4<<3),b>55)for(s(this._hash,C),b=0;b<16;b+=1)C[b]=0;T=this._length*8,T=T.toString(16).match(/(.*?)(.{0,8})$/),w=parseInt(T[2],16),A=parseInt(T[1],16)||0,C[14]=w,C[15]=A,s(this._hash,C)},E.hash=function(C,_){return E.hashBinary(h(C),_)},E.hashBinary=function(C,_){var b=o(C),T=c(b);return _?y(T):T},E.ArrayBuffer=function(){this.reset()},E.ArrayBuffer.prototype.append=function(C){var _=S(this._buff.buffer,C),b=_.length,T;for(this._length+=C.byteLength,T=64;T<=b;T+=64)s(this._hash,a(_.subarray(T-64,T)));return this._buff=T-64<b?new Uint8Array(_.buffer.slice(T-64)):new Uint8Array(0),this},E.ArrayBuffer.prototype.end=function(C){var _=this._buff,b=_.length,T=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],w,A;for(w=0;w<b;w+=1)T[w>>2]|=_[w]<<(w%4<<3);return this._finish(T,b),A=c(this._hash),C&&(A=y(A)),this.reset(),A},E.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},E.ArrayBuffer.prototype.getState=function(){var C=E.prototype.getState.call(this);return C.buff=m(C.buff),C},E.ArrayBuffer.prototype.setState=function(C){return C.buff=f(C.buff,!0),E.prototype.setState.call(this,C)},E.ArrayBuffer.prototype.destroy=E.prototype.destroy,E.ArrayBuffer.prototype._finish=E.prototype._finish,E.ArrayBuffer.hash=function(C,_){var b=l(new Uint8Array(C)),T=c(b);return _?y(T):T},E}))})(l_);var hR=l_.exports;const dR=File.prototype.slice||File.prototype.mozSlice||File.prototype.webkitSlice;class i0{static create(e,t){new i0(e).create(t)}constructor(e){this.file=e,this.chunkSize=2097152,this.chunkCount=Math.ceil(this.file.size/this.chunkSize),this.chunkIndex=0}create(e){this.callback=e,this.md5Buffer=new hR.ArrayBuffer,this.fileReader=new FileReader,this.fileReader.addEventListener("load",(t=>this.fileReaderDidLoad(t))),this.fileReader.addEventListener("error",(t=>this.fileReaderDidError(t))),this.readNextChunk()}fileReaderDidLoad(e){if(this.md5Buffer.append(e.target.result),!this.readNextChunk()){const t=this.md5Buffer.end(!0),i=btoa(t);this.callback(null,i)}}fileReaderDidError(e){this.callback(`Error reading ${this.file.name}`)}readNextChunk(){if(this.chunkIndex<this.chunkCount||this.chunkIndex==0&&this.chunkCount==0){const e=this.chunkIndex*this.chunkSize,t=Math.min(e+this.chunkSize,this.file.size),i=dR.call(this.file,e,t);return this.fileReader.readAsArrayBuffer(i),this.chunkIndex++,!0}else return!1}}function fR(r){const e=u_(document.head,`meta[name="${r}"]`);if(e)return e.getAttribute("content")}function pR(r,e){typeof r=="string"&&(e=r,r=document);const t=r.querySelectorAll(e);return c_(t)}function u_(r,e){return typeof r=="string"&&(e=r,r=document),r.querySelector(e)}function r0(r,e,t={}){const{disabled:i}=r,{bubbles:s,cancelable:n,detail:a}=t,o=document.createEvent("Event");o.initEvent(e,s||!0,n||!0),o.detail=a||{};try{r.disabled=!1,r.dispatchEvent(o)}finally{r.disabled=i}return o}function c_(r){return Array.isArray(r)?r:Array.from?Array.from(r):[].slice.call(r)}class mR{constructor(e,t,i,s={}){this.file=e,this.attributes={filename:e.name,content_type:e.type||"application/octet-stream",byte_size:e.size,checksum:t},this.xhr=new XMLHttpRequest,this.xhr.open("POST",i,!0),this.xhr.responseType="json",this.xhr.setRequestHeader("Content-Type","application/json"),this.xhr.setRequestHeader("Accept","application/json"),this.xhr.setRequestHeader("X-Requested-With","XMLHttpRequest"),Object.keys(s).forEach((a=>{this.xhr.setRequestHeader(a,s[a])}));const n=fR("csrf-token");n!=null&&this.xhr.setRequestHeader("X-CSRF-Token",n),this.xhr.addEventListener("load",(a=>this.requestDidLoad(a))),this.xhr.addEventListener("error",(a=>this.requestDidError(a)))}get status(){return this.xhr.status}get response(){const{responseType:e,response:t}=this.xhr;return e=="json"?t:JSON.parse(t)}create(e){this.callback=e,this.xhr.send(JSON.stringify({blob:this.attributes}))}requestDidLoad(e){if(this.status>=200&&this.status<300){const{response:t}=this,{direct_upload:i}=t;delete t.direct_upload,this.attributes=t,this.directUploadData=i,this.callback(null,this.toJSON())}else this.requestDidError(e)}requestDidError(e){this.callback(`Error creating Blob for "${this.file.name}". Status: ${this.status}`)}toJSON(){const e={};for(const t in this.attributes)e[t]=this.attributes[t];return e}}class gR{constructor(e){this.blob=e,this.file=e.file;const{url:t,headers:i}=e.directUploadData;this.xhr=new XMLHttpRequest,this.xhr.open("PUT",t,!0),this.xhr.responseType="text";for(const s in i)this.xhr.setRequestHeader(s,i[s]);this.xhr.addEventListener("load",(s=>this.requestDidLoad(s))),this.xhr.addEventListener("error",(s=>this.requestDidError(s)))}create(e){this.callback=e,this.xhr.send(this.file.slice())}requestDidLoad(e){const{status:t,response:i}=this.xhr;t>=200&&t<300?this.callback(null,i):this.requestDidError(e)}requestDidError(e){this.callback(`Error storing "${this.file.name}". Status: ${this.xhr.status}`)}}let OR=0;class h_{constructor(e,t,i,s={}){this.id=++OR,this.file=e,this.url=t,this.delegate=i,this.customHeaders=s}create(e){i0.create(this.file,((t,i)=>{if(t){e(t);return}const s=new mR(this.file,i,this.url,this.customHeaders);jy(this.delegate,"directUploadWillCreateBlobWithXHR",s.xhr),s.create((n=>{if(n)e(n);else{const a=new gR(s);jy(this.delegate,"directUploadWillStoreFileWithXHR",a.xhr),a.create((o=>{o?e(o):e(null,s.toJSON())}))}}))}))}}function jy(r,e,...t){if(r&&typeof r[e]=="function")return r[e](...t)}class d_{constructor(e,t){this.input=e,this.file=t,this.directUpload=new h_(this.file,this.url,this),this.dispatch("initialize")}start(e){const t=document.createElement("input");t.type="hidden",t.name=this.input.name,this.input.insertAdjacentElement("beforebegin",t),this.dispatch("start"),this.directUpload.create(((i,s)=>{i?(t.parentNode.removeChild(t),this.dispatchError(i)):t.value=s.signed_id,this.dispatch("end"),e(i)}))}uploadRequestDidProgress(e){const t=e.loaded/e.total*100;t&&this.dispatch("progress",{progress:t})}get url(){return this.input.getAttribute("data-direct-upload-url")}dispatch(e,t={}){return t.file=this.file,t.id=this.directUpload.id,r0(this.input,`direct-upload:${e}`,{detail:t})}dispatchError(e){this.dispatch("error",{error:e}).defaultPrevented||alert(e)}directUploadWillCreateBlobWithXHR(e){this.dispatch("before-blob-request",{xhr:e})}directUploadWillStoreFileWithXHR(e){this.dispatch("before-storage-request",{xhr:e}),e.upload.addEventListener("progress",(t=>this.uploadRequestDidProgress(t)))}}const yR="input[type=file][data-direct-upload-url]:not([disabled])";class f_{constructor(e){this.form=e,this.inputs=pR(e,yR).filter((t=>t.files.length))}start(e){const t=this.createDirectUploadControllers(),i=()=>{const s=t.shift();s?s.start((n=>{n?(e(n),this.dispatch("end")):i()})):(e(),this.dispatch("end"))};this.dispatch("start"),i()}createDirectUploadControllers(){const e=[];return this.inputs.forEach((t=>{c_(t.files).forEach((i=>{const s=new d_(t,i);e.push(s)}))})),e}dispatch(e,t={}){return r0(this.form,`direct-uploads:${e}`,{detail:t})}}const Af="data-direct-uploads-processing",lm=new WeakMap;let zy=!1;function s0(){zy||(zy=!0,document.addEventListener("click",bR,!0),document.addEventListener("submit",vR,!0),document.addEventListener("ajax:before",SR))}function bR(r){const e=r.target.closest("button, input");e&&e.type==="submit"&&e.form&&lm.set(e.form,e)}function vR(r){p_(r)}function SR(r){r.target.tagName=="FORM"&&p_(r)}function p_(r){const e=r.target;if(e.hasAttribute(Af)){r.preventDefault();return}const t=new f_(e),{inputs:i}=t;i.length&&(r.preventDefault(),e.setAttribute(Af,""),i.forEach(_R),t.start((s=>{e.removeAttribute(Af),s?i.forEach(xR):TR(e)})))}function TR(r){let e=lm.get(r)||u_(r,"input[type=submit], button[type=submit]");if(e){const{disabled:t}=e;e.disabled=!1,e.focus(),e.click(),e.disabled=t}else e=document.createElement("input"),e.type="submit",e.style.display="none",r.appendChild(e),e.click(),r.removeChild(e);lm.delete(r)}function _R(r){r.disabled=!0}function xR(r){r.disabled=!1}function wR(){window.ActiveStorage&&s0()}setTimeout(wR,1);const CR=Object.freeze(Object.defineProperty({__proto__:null,DirectUpload:h_,DirectUploadController:d_,DirectUploadsController:f_,dispatchEvent:r0,start:s0},Symbol.toStringTag,{value:"Module"}));var wh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Pu(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function kR(r){if(Object.prototype.hasOwnProperty.call(r,"__esModule"))return r;var e=r.default;if(typeof e=="function"){var t=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(i){var s=Object.getOwnPropertyDescriptor(r,i);Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:function(){return r[i]}})}),t}var Pf,Zy;function Ad(){if(Zy)return Pf;Zy=1;var r;return typeof window<"u"?r=window:typeof wh<"u"?r=wh:typeof self<"u"?r=self:r={},Pf=r,Pf}var ER=Ad();const q=Pu(ER),AR={},PR=Object.freeze(Object.defineProperty({__proto__:null,default:AR},Symbol.toStringTag,{value:"Module"})),DR=kR(PR);var Df,Wy;function m_(){if(Wy)return Df;Wy=1;var r=typeof wh<"u"?wh:typeof window<"u"?window:{},e=DR,t;return typeof document<"u"?t=document:(t=r["__GLOBAL_DOCUMENT_CACHE@4"],t||(t=r["__GLOBAL_DOCUMENT_CACHE@4"]=e)),Df=t,Df}var MR=m_();const ce=Pu(MR);var vc={exports:{}},Mf={exports:{}},Hy;function IR(){return Hy||(Hy=1,(function(r){function e(){return r.exports=e=Object.assign?Object.assign.bind():function(t){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var n in s)({}).hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},r.exports.__esModule=!0,r.exports.default=r.exports,e.apply(null,arguments)}r.exports=e,r.exports.__esModule=!0,r.exports.default=r.exports})(Mf)),Mf.exports}var If,Yy;function RR(){if(Yy)return If;Yy=1,If=e;var r=Object.prototype.toString;function e(t){if(!t)return!1;var i=r.call(t);return i==="[object Function]"||typeof t=="function"&&i!=="[object RegExp]"||typeof window<"u"&&(t===window.setTimeout||t===window.alert||t===window.confirm||t===window.prompt)}return If}var Rf,Gy;function LR(){if(Gy)return Rf;Gy=1;function r(s,n){var a=typeof Symbol<"u"&&s[Symbol.iterator]||s["@@iterator"];if(a)return(a=a.call(s)).next.bind(a);if(Array.isArray(s)||(a=e(s))||n){a&&(s=a);var o=0;return function(){return o>=s.length?{done:!0}:{done:!1,value:s[o++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function e(s,n){if(s){if(typeof s=="string")return t(s,n);var a=Object.prototype.toString.call(s).slice(8,-1);if(a==="Object"&&s.constructor&&(a=s.constructor.name),a==="Map"||a==="Set")return Array.from(s);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return t(s,n)}}function t(s,n){(n==null||n>s.length)&&(n=s.length);for(var a=0,o=new Array(n);a<n;a++)o[a]=s[a];return o}var i=(function(){function s(){this.typeToInterceptorsMap_=new Map,this.enabled_=!1}var n=s.prototype;return n.getIsEnabled=function(){return this.enabled_},n.enable=function(){this.enabled_=!0},n.disable=function(){this.enabled_=!1},n.reset=function(){this.typeToInterceptorsMap_=new Map,this.enabled_=!1},n.addInterceptor=function(o,l){this.typeToInterceptorsMap_.has(o)||this.typeToInterceptorsMap_.set(o,new Set);var u=this.typeToInterceptorsMap_.get(o);return u.has(l)?!1:(u.add(l),!0)},n.removeInterceptor=function(o,l){var u=this.typeToInterceptorsMap_.get(o);return u&&u.has(l)?(u.delete(l),!0):!1},n.clearInterceptorsByType=function(o){var l=this.typeToInterceptorsMap_.get(o);return l?(this.typeToInterceptorsMap_.delete(o),this.typeToInterceptorsMap_.set(o,new Set),!0):!1},n.clear=function(){return this.typeToInterceptorsMap_.size?(this.typeToInterceptorsMap_=new Map,!0):!1},n.getForType=function(o){return this.typeToInterceptorsMap_.get(o)||new Set},n.execute=function(o,l){for(var u=this.getForType(o),c=r(u),h;!(h=c()).done;){var f=h.value;try{l=f(l)}catch{}}return l},s})();return Rf=i,Rf}var Lf,Ky;function QR(){if(Ky)return Lf;Ky=1;var r=(function(){function t(){this.maxAttempts_=1,this.delayFactor_=.1,this.fuzzFactor_=.1,this.initialDelay_=1e3,this.enabled_=!1}var i=t.prototype;return i.getIsEnabled=function(){return this.enabled_},i.enable=function(){this.enabled_=!0},i.disable=function(){this.enabled_=!1},i.reset=function(){this.maxAttempts_=1,this.delayFactor_=.1,this.fuzzFactor_=.1,this.initialDelay_=1e3,this.enabled_=!1},i.getMaxAttempts=function(){return this.maxAttempts_},i.setMaxAttempts=function(n){this.maxAttempts_=n},i.getDelayFactor=function(){return this.delayFactor_},i.setDelayFactor=function(n){this.delayFactor_=n},i.getFuzzFactor=function(){return this.fuzzFactor_},i.setFuzzFactor=function(n){this.fuzzFactor_=n},i.getInitialDelay=function(){return this.initialDelay_},i.setInitialDelay=function(n){this.initialDelay_=n},i.createRetry=function(n){var a=n===void 0?{}:n,o=a.maxAttempts,l=a.delayFactor,u=a.fuzzFactor,c=a.initialDelay;return new e({maxAttempts:o||this.maxAttempts_,delayFactor:l||this.delayFactor_,fuzzFactor:u||this.fuzzFactor_,initialDelay:c||this.initialDelay_})},t})(),e=(function(){function t(s){this.maxAttempts_=s.maxAttempts,this.delayFactor_=s.delayFactor,this.fuzzFactor_=s.fuzzFactor,this.currentDelay_=s.initialDelay,this.currentAttempt_=1}var i=t.prototype;return i.moveToNextAttempt=function(){this.currentAttempt_++;var n=this.currentDelay_*this.delayFactor_;this.currentDelay_=this.currentDelay_+n},i.shouldRetry=function(){return this.currentAttempt_<this.maxAttempts_},i.getCurrentDelay=function(){return this.currentDelay_},i.getCurrentMinPossibleDelay=function(){return(1-this.fuzzFactor_)*this.currentDelay_},i.getCurrentMaxPossibleDelay=function(){return(1+this.fuzzFactor_)*this.currentDelay_},i.getCurrentFuzzedDelay=function(){var n=this.getCurrentMinPossibleDelay(),a=this.getCurrentMaxPossibleDelay();return n+Math.random()*(a-n)},t})();return Lf=r,Lf}var Qf,Jy;function $R(){if(Jy)return Qf;Jy=1;var r=Ad(),e=function(s,n){return n===void 0&&(n=!1),function(a,o,l){if(a){s(a);return}if(o.statusCode>=400&&o.statusCode<=599){var u=l;if(n)if(r.TextDecoder){var c=t(o.headers&&o.headers["content-type"]);try{u=new TextDecoder(c).decode(l)}catch{}}else u=String.fromCharCode.apply(null,new Uint8Array(l));s({cause:u});return}s(null,l)}};function t(i){return i===void 0&&(i=""),i.toLowerCase().split(";").reduce(function(s,n){var a=n.split("="),o=a[0],l=a[1];return o.trim()==="charset"?l.trim():s},"utf-8")}return Qf=e,Qf}var eb;function BR(){if(eb)return vc.exports;eb=1;var r=Ad(),e=IR(),t=RR(),i=LR(),s=QR();u.httpHandler=$R(),u.requestInterceptorsStorage=new i,u.responseInterceptorsStorage=new i,u.retryManager=new s;/**
 * @license
 * slighly modified parse-headers 2.0.2 <https://github.com/kesla/parse-headers/>
 * Copyright (c) 2014 David Björklund
 * Available under the MIT license
 * <https://github.com/kesla/parse-headers/blob/master/LICENCE>
 */var n=function(S){var y={};return S&&S.trim().split(`
`).forEach(function(E){var C=E.indexOf(":"),_=E.slice(0,C).trim().toLowerCase(),b=E.slice(C+1).trim();typeof y[_]>"u"?y[_]=b:Array.isArray(y[_])?y[_].push(b):y[_]=[y[_],b]}),y};vc.exports=u,vc.exports.default=u,u.XMLHttpRequest=r.XMLHttpRequest||f,u.XDomainRequest="withCredentials"in new u.XMLHttpRequest?u.XMLHttpRequest:r.XDomainRequest,a(["get","put","post","patch","head","delete"],function(m){u[m==="delete"?"del":m]=function(S,y,E){return y=l(S,y,E),y.method=m.toUpperCase(),c(y)}});function a(m,S){for(var y=0;y<m.length;y++)S(m[y])}function o(m){for(var S in m)if(m.hasOwnProperty(S))return!1;return!0}function l(m,S,y){var E=m;return t(S)?(y=S,typeof m=="string"&&(E={uri:m})):E=e({},S,{uri:m}),E.callback=y,E}function u(m,S,y){return S=l(m,S,y),c(S)}function c(m){if(typeof m.callback>"u")throw new Error("callback argument missing");if(m.requestType&&u.requestInterceptorsStorage.getIsEnabled()){var S={uri:m.uri||m.url,headers:m.headers||{},body:m.body,metadata:m.metadata||{},retry:m.retry,timeout:m.timeout},y=u.requestInterceptorsStorage.execute(m.requestType,S);m.uri=y.uri,m.headers=y.headers,m.body=y.body,m.metadata=y.metadata,m.retry=y.retry,m.timeout=y.timeout}var E=!1,C=function(re,J,ne){E||(E=!0,m.callback(re,J,ne))};function _(){A.readyState===4&&!u.responseInterceptorsStorage.getIsEnabled()&&setTimeout(w,0)}function b(){var G=void 0;if(A.response?G=A.response:G=A.responseText||h(A),Y)try{G=JSON.parse(G)}catch{}return G}function T(G){if(clearTimeout(te),clearTimeout(m.retryTimeout),G instanceof Error||(G=new Error(""+(G||"Unknown XMLHttpRequest Error"))),G.statusCode=0,!N&&u.retryManager.getIsEnabled()&&m.retry&&m.retry.shouldRetry()){m.retryTimeout=setTimeout(function(){m.retry.moveToNextAttempt(),m.xhr=A,c(m)},m.retry.getCurrentFuzzedDelay());return}if(m.requestType&&u.responseInterceptorsStorage.getIsEnabled()){var re={headers:le.headers||{},body:le.body,responseUrl:A.responseURL,responseType:A.responseType},J=u.responseInterceptorsStorage.execute(m.requestType,re);le.body=J.body,le.headers=J.headers}return C(G,le)}function w(){if(!N){var G;clearTimeout(te),clearTimeout(m.retryTimeout),m.useXDR&&A.status===void 0?G=200:G=A.status===1223?204:A.status;var re=le,J=null;if(G!==0?(re={body:b(),statusCode:G,method:R,headers:{},url:P,rawRequest:A},A.getAllResponseHeaders&&(re.headers=n(A.getAllResponseHeaders()))):J=new Error("Internal XMLHttpRequest Error"),m.requestType&&u.responseInterceptorsStorage.getIsEnabled()){var ne={headers:re.headers||{},body:re.body,responseUrl:A.responseURL,responseType:A.responseType},ae=u.responseInterceptorsStorage.execute(m.requestType,ne);re.body=ae.body,re.headers=ae.headers}return C(J,re,re.body)}}var A=m.xhr||null;A||(m.cors||m.useXDR?A=new u.XDomainRequest:A=new u.XMLHttpRequest);var I,N,P=A.url=m.uri||m.url,R=A.method=m.method||"GET",X=m.body||m.data,j=A.headers=m.headers||{},Z=!!m.sync,Y=!1,te,le={body:void 0,headers:{},statusCode:0,method:R,url:P,rawRequest:A};if("json"in m&&m.json!==!1&&(Y=!0,j.accept||j.Accept||(j.Accept="application/json"),R!=="GET"&&R!=="HEAD"&&(j["content-type"]||j["Content-Type"]||(j["Content-Type"]="application/json"),X=JSON.stringify(m.json===!0?X:m.json))),A.onreadystatechange=_,A.onload=w,A.onerror=T,A.onprogress=function(){},A.onabort=function(){N=!0,clearTimeout(m.retryTimeout)},A.ontimeout=T,A.open(R,P,!Z,m.username,m.password),Z||(A.withCredentials=!!m.withCredentials),!Z&&m.timeout>0&&(te=setTimeout(function(){if(!N){N=!0,A.abort("timeout");var G=new Error("XMLHttpRequest timeout");G.code="ETIMEDOUT",T(G)}},m.timeout)),A.setRequestHeader)for(I in j)j.hasOwnProperty(I)&&A.setRequestHeader(I,j[I]);else if(m.headers&&!o(m.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in m&&(A.responseType=m.responseType),"beforeSend"in m&&typeof m.beforeSend=="function"&&m.beforeSend(A),A.send(X||null),A}function h(m){try{if(m.responseType==="document")return m.responseXML;var S=m.responseXML&&m.responseXML.documentElement.nodeName==="parsererror";if(m.responseType===""&&!S)return m.responseXML}catch{}return null}function f(){}return vc.exports}var NR=BR();const g_=Pu(NR);var $f={exports:{}},Bf,tb;function FR(){if(tb)return Bf;tb=1;var r=m_(),e=Object.create||(function(){function P(){}return function(R){if(arguments.length!==1)throw new Error("Object.create shim only accepts one parameter.");return P.prototype=R,new P}})();function t(P,R){this.name="ParsingError",this.code=P.code,this.message=R||P.message}t.prototype=e(Error.prototype),t.prototype.constructor=t,t.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}};function i(P){function R(j,Z,Y,te){return(j|0)*3600+(Z|0)*60+(Y|0)+(te|0)/1e3}var X=P.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);return X?X[3]?R(X[1],X[2],X[3].replace(":",""),X[4]):X[1]>59?R(X[1],X[2],0,X[4]):R(0,X[1],X[2],X[4]):null}function s(){this.values=e(null)}s.prototype={set:function(P,R){!this.get(P)&&R!==""&&(this.values[P]=R)},get:function(P,R,X){return X?this.has(P)?this.values[P]:R[X]:this.has(P)?this.values[P]:R},has:function(P){return P in this.values},alt:function(P,R,X){for(var j=0;j<X.length;++j)if(R===X[j]){this.set(P,R);break}},integer:function(P,R){/^-?\d+$/.test(R)&&this.set(P,parseInt(R,10))},percent:function(P,R){return R.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(R=parseFloat(R),R>=0&&R<=100)?(this.set(P,R),!0):!1}};function n(P,R,X,j){var Z=j?P.split(j):[P];for(var Y in Z)if(typeof Z[Y]=="string"){var te=Z[Y].split(X);if(te.length===2){var le=te[0].trim(),G=te[1].trim();R(le,G)}}}function a(P,R,X){var j=P;function Z(){var le=i(P);if(le===null)throw new t(t.Errors.BadTimeStamp,"Malformed timestamp: "+j);return P=P.replace(/^[^\sa-zA-Z-]+/,""),le}function Y(le,G){var re=new s;n(le,function(J,ne){switch(J){case"region":for(var ae=X.length-1;ae>=0;ae--)if(X[ae].id===ne){re.set(J,X[ae].region);break}break;case"vertical":re.alt(J,ne,["rl","lr"]);break;case"line":var Se=ne.split(","),we=Se[0];re.integer(J,we),re.percent(J,we)&&re.set("snapToLines",!1),re.alt(J,we,["auto"]),Se.length===2&&re.alt("lineAlign",Se[1],["start","center","end"]);break;case"position":Se=ne.split(","),re.percent(J,Se[0]),Se.length===2&&re.alt("positionAlign",Se[1],["start","center","end"]);break;case"size":re.percent(J,ne);break;case"align":re.alt(J,ne,["start","center","end","left","right"]);break}},/:/,/\s/),G.region=re.get("region",null),G.vertical=re.get("vertical","");try{G.line=re.get("line","auto")}catch{}G.lineAlign=re.get("lineAlign","start"),G.snapToLines=re.get("snapToLines",!0),G.size=re.get("size",100);try{G.align=re.get("align","center")}catch{G.align=re.get("align","middle")}try{G.position=re.get("position","auto")}catch{G.position=re.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},G.align)}G.positionAlign=re.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},G.align)}function te(){P=P.replace(/^\s+/,"")}if(te(),R.startTime=Z(),te(),P.substr(0,3)!=="-->")throw new t(t.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '-->'): "+j);P=P.substr(3),te(),R.endTime=Z(),te(),Y(P,R)}var o=r.createElement&&r.createElement("textarea"),l={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},u={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},c={v:"title",lang:"lang"},h={rt:"ruby"};function f(P,R){function X(){if(!R)return null;function we(Te){return R=R.substr(Te.length),Te}var Me=R.match(/^([^<]*)(<[^>]*>?)?/);return we(Me[1]?Me[1]:Me[2])}function j(we){return o.innerHTML=we,we=o.textContent,o.textContent="",we}function Z(we,Me){return!h[Me.localName]||h[Me.localName]===we.localName}function Y(we,Me){var Te=l[we];if(!Te)return null;var dt=P.document.createElement(Te),bt=c[we];return bt&&Me&&(dt[bt]=Me.trim()),dt}for(var te=P.document.createElement("div"),le=te,G,re=[];(G=X())!==null;){if(G[0]==="<"){if(G[1]==="/"){re.length&&re[re.length-1]===G.substr(2).replace(">","")&&(re.pop(),le=le.parentNode);continue}var J=i(G.substr(1,G.length-2)),ne;if(J){ne=P.document.createProcessingInstruction("timestamp",J),le.appendChild(ne);continue}var ae=G.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!ae||(ne=Y(ae[1],ae[3]),!ne)||!Z(le,ne))continue;if(ae[2]){var Se=ae[2].split(".");Se.forEach(function(we){var Me=/^bg_/.test(we),Te=Me?we.slice(3):we;if(u.hasOwnProperty(Te)){var dt=Me?"background-color":"color",bt=u[Te];ne.style[dt]=bt}}),ne.className=Se.join(" ")}re.push(ae[1]),le.appendChild(ne),le=ne;continue}le.appendChild(P.document.createTextNode(j(G)))}return te}var m=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function S(P){for(var R=0;R<m.length;R++){var X=m[R];if(P>=X[0]&&P<=X[1])return!0}return!1}function y(P){var R=[],X="",j;if(!P||!P.childNodes)return"ltr";function Z(le,G){for(var re=G.childNodes.length-1;re>=0;re--)le.push(G.childNodes[re])}function Y(le){if(!le||!le.length)return null;var G=le.pop(),re=G.textContent||G.innerText;if(re){var J=re.match(/^.*(\n|\r)/);return J?(le.length=0,J[0]):re}if(G.tagName==="ruby")return Y(le);if(G.childNodes)return Z(le,G),Y(le)}for(Z(R,P);X=Y(R);)for(var te=0;te<X.length;te++)if(j=X.charCodeAt(te),S(j))return"rtl";return"ltr"}function E(P){if(typeof P.line=="number"&&(P.snapToLines||P.line>=0&&P.line<=100))return P.line;if(!P.track||!P.track.textTrackList||!P.track.textTrackList.mediaElement)return-1;for(var R=P.track,X=R.textTrackList,j=0,Z=0;Z<X.length&&X[Z]!==R;Z++)X[Z].mode==="showing"&&j++;return++j*-1}function C(){}C.prototype.applyStyles=function(P,R){R=R||this.div;for(var X in P)P.hasOwnProperty(X)&&(R.style[X]=P[X])},C.prototype.formatStyle=function(P,R){return P===0?0:P+R};function _(P,R,X){C.call(this),this.cue=R,this.cueDiv=f(P,R.text);var j={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:R.vertical===""?"horizontal-tb":R.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(j,this.cueDiv),this.div=P.document.createElement("div"),j={direction:y(this.cueDiv),writingMode:R.vertical===""?"horizontal-tb":R.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:R.align==="middle"?"center":R.align,font:X.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(j),this.div.appendChild(this.cueDiv);var Z=0;switch(R.positionAlign){case"start":case"line-left":Z=R.position;break;case"center":Z=R.position-R.size/2;break;case"end":case"line-right":Z=R.position-R.size;break}R.vertical===""?this.applyStyles({left:this.formatStyle(Z,"%"),width:this.formatStyle(R.size,"%")}):this.applyStyles({top:this.formatStyle(Z,"%"),height:this.formatStyle(R.size,"%")}),this.move=function(Y){this.applyStyles({top:this.formatStyle(Y.top,"px"),bottom:this.formatStyle(Y.bottom,"px"),left:this.formatStyle(Y.left,"px"),right:this.formatStyle(Y.right,"px"),height:this.formatStyle(Y.height,"px"),width:this.formatStyle(Y.width,"px")})}}_.prototype=e(C.prototype),_.prototype.constructor=_;function b(P){var R,X,j,Z;if(P.div){X=P.div.offsetHeight,j=P.div.offsetWidth,Z=P.div.offsetTop;var Y=(Y=P.div.childNodes)&&(Y=Y[0])&&Y.getClientRects&&Y.getClientRects();P=P.div.getBoundingClientRect(),R=Y?Math.max(Y[0]&&Y[0].height||0,P.height/Y.length):0}this.left=P.left,this.right=P.right,this.top=P.top||Z,this.height=P.height||X,this.bottom=P.bottom||Z+(P.height||X),this.width=P.width||j,this.lineHeight=R!==void 0?R:P.lineHeight}b.prototype.move=function(P,R){switch(R=R!==void 0?R:this.lineHeight,P){case"+x":this.left+=R,this.right+=R;break;case"-x":this.left-=R,this.right-=R;break;case"+y":this.top+=R,this.bottom+=R;break;case"-y":this.top-=R,this.bottom-=R;break}},b.prototype.overlaps=function(P){return this.left<P.right&&this.right>P.left&&this.top<P.bottom&&this.bottom>P.top},b.prototype.overlapsAny=function(P){for(var R=0;R<P.length;R++)if(this.overlaps(P[R]))return!0;return!1},b.prototype.within=function(P){return this.top>=P.top&&this.bottom<=P.bottom&&this.left>=P.left&&this.right<=P.right},b.prototype.overlapsOppositeAxis=function(P,R){switch(R){case"+x":return this.left<P.left;case"-x":return this.right>P.right;case"+y":return this.top<P.top;case"-y":return this.bottom>P.bottom}},b.prototype.intersectPercentage=function(P){var R=Math.max(0,Math.min(this.right,P.right)-Math.max(this.left,P.left)),X=Math.max(0,Math.min(this.bottom,P.bottom)-Math.max(this.top,P.top)),j=R*X;return j/(this.height*this.width)},b.prototype.toCSSCompatValues=function(P){return{top:this.top-P.top,bottom:P.bottom-this.bottom,left:this.left-P.left,right:P.right-this.right,height:this.height,width:this.width}},b.getSimpleBoxPosition=function(P){var R=P.div?P.div.offsetHeight:P.tagName?P.offsetHeight:0,X=P.div?P.div.offsetWidth:P.tagName?P.offsetWidth:0,j=P.div?P.div.offsetTop:P.tagName?P.offsetTop:0;P=P.div?P.div.getBoundingClientRect():P.tagName?P.getBoundingClientRect():P;var Z={left:P.left,right:P.right,top:P.top||j,height:P.height||R,bottom:P.bottom||j+(P.height||R),width:P.width||X};return Z};function T(P,R,X,j){function Z(Te,dt){for(var bt,rt=new b(Te),At=1,xi=0;xi<dt.length;xi++){for(;Te.overlapsOppositeAxis(X,dt[xi])||Te.within(X)&&Te.overlapsAny(j);)Te.move(dt[xi]);if(Te.within(X))return Te;var Qt=Te.intersectPercentage(X);At>Qt&&(bt=new b(Te),At=Qt),Te=new b(rt)}return bt||rt}var Y=new b(R),te=R.cue,le=E(te),G=[];if(te.snapToLines){var re;switch(te.vertical){case"":G=["+y","-y"],re="height";break;case"rl":G=["+x","-x"],re="width";break;case"lr":G=["-x","+x"],re="width";break}var J=Y.lineHeight,ne=J*Math.round(le),ae=X[re]+J,Se=G[0];Math.abs(ne)>ae&&(ne=ne<0?-1:1,ne*=Math.ceil(ae/J)*J),le<0&&(ne+=te.vertical===""?X.height:X.width,G=G.reverse()),Y.move(Se,ne)}else{var we=Y.lineHeight/X.height*100;switch(te.lineAlign){case"center":le-=we/2;break;case"end":le-=we;break}switch(te.vertical){case"":R.applyStyles({top:R.formatStyle(le,"%")});break;case"rl":R.applyStyles({left:R.formatStyle(le,"%")});break;case"lr":R.applyStyles({right:R.formatStyle(le,"%")});break}G=["+y","-x","+x","-y"],Y=new b(R)}var Me=Z(Y,G);R.move(Me.toCSSCompatValues(X))}function w(){}w.StringDecoder=function(){return{decode:function(P){if(!P)return"";if(typeof P!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(P))}}},w.convertCueToDOMTree=function(P,R){return!P||!R?null:f(P,R)};var A=.05,I="sans-serif",N="1.5%";return w.processCues=function(P,R,X){if(!P||!R||!X)return null;for(;X.firstChild;)X.removeChild(X.firstChild);var j=P.document.createElement("div");j.style.position="absolute",j.style.left="0",j.style.right="0",j.style.top="0",j.style.bottom="0",j.style.margin=N,X.appendChild(j);function Z(J){for(var ne=0;ne<J.length;ne++)if(J[ne].hasBeenReset||!J[ne].displayState)return!0;return!1}if(!Z(R)){for(var Y=0;Y<R.length;Y++)j.appendChild(R[Y].displayState);return}var te=[],le=b.getSimpleBoxPosition(j),G=Math.round(le.height*A*100)/100,re={font:G+"px "+I};(function(){for(var J,ne,ae=0;ae<R.length;ae++)ne=R[ae],J=new _(P,ne,re),j.appendChild(J.div),T(P,J,le,te),ne.displayState=J.div,te.push(b.getSimpleBoxPosition(J))})()},w.Parser=function(P,R,X){X||(X=R,R={}),R||(R={}),this.window=P,this.vttjs=R,this.state="INITIAL",this.buffer="",this.decoder=X||new TextDecoder("utf8"),this.regionList=[]},w.Parser.prototype={reportOrThrowError:function(P){if(P instanceof t)this.onparsingerror&&this.onparsingerror(P);else throw P},parse:function(P){var R=this;P&&(R.buffer+=R.decoder.decode(P,{stream:!0}));function X(){for(var J=R.buffer,ne=0;ne<J.length&&J[ne]!=="\r"&&J[ne]!==`
`;)++ne;var ae=J.substr(0,ne);return J[ne]==="\r"&&++ne,J[ne]===`
`&&++ne,R.buffer=J.substr(ne),ae}function j(J){var ne=new s;if(n(J,function(Se,we){switch(Se){case"id":ne.set(Se,we);break;case"width":ne.percent(Se,we);break;case"lines":ne.integer(Se,we);break;case"regionanchor":case"viewportanchor":var Me=we.split(",");if(Me.length!==2)break;var Te=new s;if(Te.percent("x",Me[0]),Te.percent("y",Me[1]),!Te.has("x")||!Te.has("y"))break;ne.set(Se+"X",Te.get("x")),ne.set(Se+"Y",Te.get("y"));break;case"scroll":ne.alt(Se,we,["up"]);break}},/=/,/\s/),ne.has("id")){var ae=new(R.vttjs.VTTRegion||R.window.VTTRegion);ae.width=ne.get("width",100),ae.lines=ne.get("lines",3),ae.regionAnchorX=ne.get("regionanchorX",0),ae.regionAnchorY=ne.get("regionanchorY",100),ae.viewportAnchorX=ne.get("viewportanchorX",0),ae.viewportAnchorY=ne.get("viewportanchorY",100),ae.scroll=ne.get("scroll",""),R.onregion&&R.onregion(ae),R.regionList.push({id:ne.get("id"),region:ae})}}function Z(J){var ne=new s;n(J,function(ae,Se){switch(ae){case"MPEGT":ne.integer(ae+"S",Se);break;case"LOCA":ne.set(ae+"L",i(Se));break}},/[^\d]:/,/,/),R.ontimestampmap&&R.ontimestampmap({MPEGTS:ne.get("MPEGTS"),LOCAL:ne.get("LOCAL")})}function Y(J){J.match(/X-TIMESTAMP-MAP/)?n(J,function(ne,ae){switch(ne){case"X-TIMESTAMP-MAP":Z(ae);break}},/=/):n(J,function(ne,ae){switch(ne){case"Region":j(ae);break}},/:/)}try{var te;if(R.state==="INITIAL"){if(!/\r\n|\n/.test(R.buffer))return this;te=X();var le=te.match(/^WEBVTT([ \t].*)?$/);if(!le||!le[0])throw new t(t.Errors.BadSignature);R.state="HEADER"}for(var G=!1;R.buffer;){if(!/\r\n|\n/.test(R.buffer))return this;switch(G?G=!1:te=X(),R.state){case"HEADER":/:/.test(te)?Y(te):te||(R.state="ID");continue;case"NOTE":te||(R.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(te)){R.state="NOTE";break}if(!te)continue;R.cue=new(R.vttjs.VTTCue||R.window.VTTCue)(0,0,"");try{R.cue.align="center"}catch{R.cue.align="middle"}if(R.state="CUE",te.indexOf("-->")===-1){R.cue.id=te;continue}case"CUE":try{a(te,R.cue,R.regionList)}catch(J){R.reportOrThrowError(J),R.cue=null,R.state="BADCUE";continue}R.state="CUETEXT";continue;case"CUETEXT":var re=te.indexOf("-->")!==-1;if(!te||re&&(G=!0)){R.oncue&&R.oncue(R.cue),R.cue=null,R.state="ID";continue}R.cue.text&&(R.cue.text+=`
`),R.cue.text+=te.replace(/\u2028/g,`
`).replace(/u2029/g,`
`);continue;case"BADCUE":te||(R.state="ID");continue}}}catch(J){R.reportOrThrowError(J),R.state==="CUETEXT"&&R.cue&&R.oncue&&R.oncue(R.cue),R.cue=null,R.state=R.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this},flush:function(){var P=this;try{if(P.buffer+=P.decoder.decode(),(P.cue||P.state==="HEADER")&&(P.buffer+=`

`,P.parse()),P.state==="INITIAL")throw new t(t.Errors.BadSignature)}catch(R){P.reportOrThrowError(R)}return P.onflush&&P.onflush(),this}},Bf=w,Bf}var Nf,ib;function UR(){if(ib)return Nf;ib=1;var r="auto",e={"":1,lr:1,rl:1},t={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};function i(a){if(typeof a!="string")return!1;var o=e[a.toLowerCase()];return o?a.toLowerCase():!1}function s(a){if(typeof a!="string")return!1;var o=t[a.toLowerCase()];return o?a.toLowerCase():!1}function n(a,o,l){this.hasBeenReset=!1;var u="",c=!1,h=a,f=o,m=l,S=null,y="",E=!0,C="auto",_="start",b="auto",T="auto",w=100,A="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return u},set:function(I){u=""+I}},pauseOnExit:{enumerable:!0,get:function(){return c},set:function(I){c=!!I}},startTime:{enumerable:!0,get:function(){return h},set:function(I){if(typeof I!="number")throw new TypeError("Start time must be set to a number.");h=I,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return f},set:function(I){if(typeof I!="number")throw new TypeError("End time must be set to a number.");f=I,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return m},set:function(I){m=""+I,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return S},set:function(I){S=I,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return y},set:function(I){var N=i(I);if(N===!1)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");y=N,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return E},set:function(I){E=!!I,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return C},set:function(I){if(typeof I!="number"&&I!==r)throw new SyntaxError("Line: an invalid number or illegal string was specified.");C=I,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return _},set:function(I){var N=s(I);N?(_=N,this.hasBeenReset=!0):console.warn("lineAlign: an invalid or illegal string was specified.")}},position:{enumerable:!0,get:function(){return b},set:function(I){if(I<0||I>100)throw new Error("Position must be between 0 and 100.");b=I,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return T},set:function(I){var N=s(I);N?(T=N,this.hasBeenReset=!0):console.warn("positionAlign: an invalid or illegal string was specified.")}},size:{enumerable:!0,get:function(){return w},set:function(I){if(I<0||I>100)throw new Error("Size must be between 0 and 100.");w=I,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return A},set:function(I){var N=s(I);if(!N)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");A=N,this.hasBeenReset=!0}}}),this.displayState=void 0}return n.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)},Nf=n,Nf}var Ff,rb;function qR(){if(rb)return Ff;rb=1;var r={"":!0,up:!0};function e(s){if(typeof s!="string")return!1;var n=r[s.toLowerCase()];return n?s.toLowerCase():!1}function t(s){return typeof s=="number"&&s>=0&&s<=100}function i(){var s=100,n=3,a=0,o=100,l=0,u=100,c="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return s},set:function(h){if(!t(h))throw new Error("Width must be between 0 and 100.");s=h}},lines:{enumerable:!0,get:function(){return n},set:function(h){if(typeof h!="number")throw new TypeError("Lines must be set to a number.");n=h}},regionAnchorY:{enumerable:!0,get:function(){return o},set:function(h){if(!t(h))throw new Error("RegionAnchorX must be between 0 and 100.");o=h}},regionAnchorX:{enumerable:!0,get:function(){return a},set:function(h){if(!t(h))throw new Error("RegionAnchorY must be between 0 and 100.");a=h}},viewportAnchorY:{enumerable:!0,get:function(){return u},set:function(h){if(!t(h))throw new Error("ViewportAnchorY must be between 0 and 100.");u=h}},viewportAnchorX:{enumerable:!0,get:function(){return l},set:function(h){if(!t(h))throw new Error("ViewportAnchorX must be between 0 and 100.");l=h}},scroll:{enumerable:!0,get:function(){return c},set:function(h){var f=e(h);f===!1?console.warn("Scroll: an invalid or illegal string was specified."):c=f}}})}return Ff=i,Ff}var sb;function VR(){if(sb)return $f.exports;sb=1;var r=Ad(),e=$f.exports={WebVTT:FR(),VTTCue:UR(),VTTRegion:qR()};r.vttjs=e,r.WebVTT=e.WebVTT;var t=e.VTTCue,i=e.VTTRegion,s=r.VTTCue,n=r.VTTRegion;return e.shim=function(){r.VTTCue=t,r.VTTRegion=i},e.restore=function(){r.VTTCue=s,r.VTTRegion=n},r.VTTCue||e.shim(),$f.exports}var XR=VR();const nb=Pu(XR);function Lt(){return Lt=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},Lt.apply(null,arguments)}var ab="https://example.com",Pd=function(e,t){if(/^[a-z]+:/i.test(t))return t;/^data:/.test(e)&&(e=q.location&&q.location.href||"");var i=/^\/\//.test(e),s=!q.location&&!/\/\//i.test(e);e=new q.URL(e,q.location||ab);var n=new URL(t,e);return s?n.href.slice(ab.length):i?n.href.slice(n.protocol.length):n.href},n0=(function(){function r(){this.listeners={}}var e=r.prototype;return e.on=function(i,s){this.listeners[i]||(this.listeners[i]=[]),this.listeners[i].push(s)},e.off=function(i,s){if(!this.listeners[i])return!1;var n=this.listeners[i].indexOf(s);return this.listeners[i]=this.listeners[i].slice(0),this.listeners[i].splice(n,1),n>-1},e.trigger=function(i){var s=this.listeners[i];if(s)if(arguments.length===2)for(var n=s.length,a=0;a<n;++a)s[a].call(this,arguments[1]);else for(var o=Array.prototype.slice.call(arguments,1),l=s.length,u=0;u<l;++u)s[u].apply(this,o)},e.dispose=function(){this.listeners={}},e.pipe=function(i){this.on("data",function(s){i.push(s)})},r})(),jR=function(e){return q.atob?q.atob(e):Buffer.from(e,"base64").toString("binary")};function O_(r){for(var e=jR(r),t=new Uint8Array(e.length),i=0;i<e.length;i++)t[i]=e.charCodeAt(i);return t}/*! @name m3u8-parser @version 7.2.0 @license Apache-2.0 */class zR extends n0{constructor(){super(),this.buffer=""}push(e){let t;for(this.buffer+=e,t=this.buffer.indexOf(`
`);t>-1;t=this.buffer.indexOf(`
`))this.trigger("data",this.buffer.substring(0,t)),this.buffer=this.buffer.substring(t+1)}}const ZR="	",Uf=function(r){const e=/([0-9.]*)?@?([0-9.]*)?/.exec(r||""),t={};return e[1]&&(t.length=parseInt(e[1],10)),e[2]&&(t.offset=parseInt(e[2],10)),t},WR=function(){const t="(?:"+"[^=]*"+")=(?:"+'"[^"]*"|[^,]*'+")";return new RegExp("(?:^|,)("+t+")")},gi=function(r){const e={};if(!r)return e;const t=r.split(WR());let i=t.length,s;for(;i--;)t[i]!==""&&(s=/([^=]*)=(.*)/.exec(t[i]).slice(1),s[0]=s[0].replace(/^\s+|\s+$/g,""),s[1]=s[1].replace(/^\s+|\s+$/g,""),s[1]=s[1].replace(/^['"](.*)['"]$/g,"$1"),e[s[0]]=s[1]);return e},ob=r=>{const e=r.split("x"),t={};return e[0]&&(t.width=parseInt(e[0],10)),e[1]&&(t.height=parseInt(e[1],10)),t};class HR extends n0{constructor(){super(),this.customParsers=[],this.tagMappers=[]}push(e){let t,i;if(e=e.trim(),e.length===0)return;if(e[0]!=="#"){this.trigger("data",{type:"uri",uri:e});return}this.tagMappers.reduce((n,a)=>{const o=a(e);return o===e?n:n.concat([o])},[e]).forEach(n=>{for(let a=0;a<this.customParsers.length;a++)if(this.customParsers[a].call(this,n))return;if(n.indexOf("#EXT")!==0){this.trigger("data",{type:"comment",text:n.slice(1)});return}if(n=n.replace("\r",""),t=/^#EXTM3U/.exec(n),t){this.trigger("data",{type:"tag",tagType:"m3u"});return}if(t=/^#EXTINF:([0-9\.]*)?,?(.*)?$/.exec(n),t){i={type:"tag",tagType:"inf"},t[1]&&(i.duration=parseFloat(t[1])),t[2]&&(i.title=t[2]),this.trigger("data",i);return}if(t=/^#EXT-X-TARGETDURATION:([0-9.]*)?/.exec(n),t){i={type:"tag",tagType:"targetduration"},t[1]&&(i.duration=parseInt(t[1],10)),this.trigger("data",i);return}if(t=/^#EXT-X-VERSION:([0-9.]*)?/.exec(n),t){i={type:"tag",tagType:"version"},t[1]&&(i.version=parseInt(t[1],10)),this.trigger("data",i);return}if(t=/^#EXT-X-MEDIA-SEQUENCE:(\-?[0-9.]*)?/.exec(n),t){i={type:"tag",tagType:"media-sequence"},t[1]&&(i.number=parseInt(t[1],10)),this.trigger("data",i);return}if(t=/^#EXT-X-DISCONTINUITY-SEQUENCE:(\-?[0-9.]*)?/.exec(n),t){i={type:"tag",tagType:"discontinuity-sequence"},t[1]&&(i.number=parseInt(t[1],10)),this.trigger("data",i);return}if(t=/^#EXT-X-PLAYLIST-TYPE:(.*)?$/.exec(n),t){i={type:"tag",tagType:"playlist-type"},t[1]&&(i.playlistType=t[1]),this.trigger("data",i);return}if(t=/^#EXT-X-BYTERANGE:(.*)?$/.exec(n),t){i=Lt(Uf(t[1]),{type:"tag",tagType:"byterange"}),this.trigger("data",i);return}if(t=/^#EXT-X-ALLOW-CACHE:(YES|NO)?/.exec(n),t){i={type:"tag",tagType:"allow-cache"},t[1]&&(i.allowed=!/NO/.test(t[1])),this.trigger("data",i);return}if(t=/^#EXT-X-MAP:(.*)$/.exec(n),t){if(i={type:"tag",tagType:"map"},t[1]){const a=gi(t[1]);a.URI&&(i.uri=a.URI),a.BYTERANGE&&(i.byterange=Uf(a.BYTERANGE))}this.trigger("data",i);return}if(t=/^#EXT-X-STREAM-INF:(.*)$/.exec(n),t){i={type:"tag",tagType:"stream-inf"},t[1]&&(i.attributes=gi(t[1]),i.attributes.RESOLUTION&&(i.attributes.RESOLUTION=ob(i.attributes.RESOLUTION)),i.attributes.BANDWIDTH&&(i.attributes.BANDWIDTH=parseInt(i.attributes.BANDWIDTH,10)),i.attributes["FRAME-RATE"]&&(i.attributes["FRAME-RATE"]=parseFloat(i.attributes["FRAME-RATE"])),i.attributes["PROGRAM-ID"]&&(i.attributes["PROGRAM-ID"]=parseInt(i.attributes["PROGRAM-ID"],10))),this.trigger("data",i);return}if(t=/^#EXT-X-MEDIA:(.*)$/.exec(n),t){i={type:"tag",tagType:"media"},t[1]&&(i.attributes=gi(t[1])),this.trigger("data",i);return}if(t=/^#EXT-X-ENDLIST/.exec(n),t){this.trigger("data",{type:"tag",tagType:"endlist"});return}if(t=/^#EXT-X-DISCONTINUITY/.exec(n),t){this.trigger("data",{type:"tag",tagType:"discontinuity"});return}if(t=/^#EXT-X-PROGRAM-DATE-TIME:(.*)$/.exec(n),t){i={type:"tag",tagType:"program-date-time"},t[1]&&(i.dateTimeString=t[1],i.dateTimeObject=new Date(t[1])),this.trigger("data",i);return}if(t=/^#EXT-X-KEY:(.*)$/.exec(n),t){i={type:"tag",tagType:"key"},t[1]&&(i.attributes=gi(t[1]),i.attributes.IV&&(i.attributes.IV.substring(0,2).toLowerCase()==="0x"&&(i.attributes.IV=i.attributes.IV.substring(2)),i.attributes.IV=i.attributes.IV.match(/.{8}/g),i.attributes.IV[0]=parseInt(i.attributes.IV[0],16),i.attributes.IV[1]=parseInt(i.attributes.IV[1],16),i.attributes.IV[2]=parseInt(i.attributes.IV[2],16),i.attributes.IV[3]=parseInt(i.attributes.IV[3],16),i.attributes.IV=new Uint32Array(i.attributes.IV))),this.trigger("data",i);return}if(t=/^#EXT-X-START:(.*)$/.exec(n),t){i={type:"tag",tagType:"start"},t[1]&&(i.attributes=gi(t[1]),i.attributes["TIME-OFFSET"]=parseFloat(i.attributes["TIME-OFFSET"]),i.attributes.PRECISE=/YES/.test(i.attributes.PRECISE)),this.trigger("data",i);return}if(t=/^#EXT-X-CUE-OUT-CONT:(.*)?$/.exec(n),t){i={type:"tag",tagType:"cue-out-cont"},t[1]?i.data=t[1]:i.data="",this.trigger("data",i);return}if(t=/^#EXT-X-CUE-OUT:(.*)?$/.exec(n),t){i={type:"tag",tagType:"cue-out"},t[1]?i.data=t[1]:i.data="",this.trigger("data",i);return}if(t=/^#EXT-X-CUE-IN:?(.*)?$/.exec(n),t){i={type:"tag",tagType:"cue-in"},t[1]?i.data=t[1]:i.data="",this.trigger("data",i);return}if(t=/^#EXT-X-SKIP:(.*)$/.exec(n),t&&t[1]){i={type:"tag",tagType:"skip"},i.attributes=gi(t[1]),i.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(i.attributes["SKIPPED-SEGMENTS"]=parseInt(i.attributes["SKIPPED-SEGMENTS"],10)),i.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(i.attributes["RECENTLY-REMOVED-DATERANGES"]=i.attributes["RECENTLY-REMOVED-DATERANGES"].split(ZR)),this.trigger("data",i);return}if(t=/^#EXT-X-PART:(.*)$/.exec(n),t&&t[1]){i={type:"tag",tagType:"part"},i.attributes=gi(t[1]),["DURATION"].forEach(function(a){i.attributes.hasOwnProperty(a)&&(i.attributes[a]=parseFloat(i.attributes[a]))}),["INDEPENDENT","GAP"].forEach(function(a){i.attributes.hasOwnProperty(a)&&(i.attributes[a]=/YES/.test(i.attributes[a]))}),i.attributes.hasOwnProperty("BYTERANGE")&&(i.attributes.byterange=Uf(i.attributes.BYTERANGE)),this.trigger("data",i);return}if(t=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(n),t&&t[1]){i={type:"tag",tagType:"server-control"},i.attributes=gi(t[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach(function(a){i.attributes.hasOwnProperty(a)&&(i.attributes[a]=parseFloat(i.attributes[a]))}),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach(function(a){i.attributes.hasOwnProperty(a)&&(i.attributes[a]=/YES/.test(i.attributes[a]))}),this.trigger("data",i);return}if(t=/^#EXT-X-PART-INF:(.*)$/.exec(n),t&&t[1]){i={type:"tag",tagType:"part-inf"},i.attributes=gi(t[1]),["PART-TARGET"].forEach(function(a){i.attributes.hasOwnProperty(a)&&(i.attributes[a]=parseFloat(i.attributes[a]))}),this.trigger("data",i);return}if(t=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(n),t&&t[1]){i={type:"tag",tagType:"preload-hint"},i.attributes=gi(t[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach(function(a){if(i.attributes.hasOwnProperty(a)){i.attributes[a]=parseInt(i.attributes[a],10);const o=a==="BYTERANGE-LENGTH"?"length":"offset";i.attributes.byterange=i.attributes.byterange||{},i.attributes.byterange[o]=i.attributes[a],delete i.attributes[a]}}),this.trigger("data",i);return}if(t=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(n),t&&t[1]){i={type:"tag",tagType:"rendition-report"},i.attributes=gi(t[1]),["LAST-MSN","LAST-PART"].forEach(function(a){i.attributes.hasOwnProperty(a)&&(i.attributes[a]=parseInt(i.attributes[a],10))}),this.trigger("data",i);return}if(t=/^#EXT-X-DATERANGE:(.*)$/.exec(n),t&&t[1]){i={type:"tag",tagType:"daterange"},i.attributes=gi(t[1]),["ID","CLASS"].forEach(function(o){i.attributes.hasOwnProperty(o)&&(i.attributes[o]=String(i.attributes[o]))}),["START-DATE","END-DATE"].forEach(function(o){i.attributes.hasOwnProperty(o)&&(i.attributes[o]=new Date(i.attributes[o]))}),["DURATION","PLANNED-DURATION"].forEach(function(o){i.attributes.hasOwnProperty(o)&&(i.attributes[o]=parseFloat(i.attributes[o]))}),["END-ON-NEXT"].forEach(function(o){i.attributes.hasOwnProperty(o)&&(i.attributes[o]=/YES/i.test(i.attributes[o]))}),["SCTE35-CMD"," SCTE35-OUT","SCTE35-IN"].forEach(function(o){i.attributes.hasOwnProperty(o)&&(i.attributes[o]=i.attributes[o].toString(16))});const a=/^X-([A-Z]+-)+[A-Z]+$/;for(const o in i.attributes){if(!a.test(o))continue;const l=/[0-9A-Fa-f]{6}/g.test(i.attributes[o]),u=/^\d+(\.\d+)?$/.test(i.attributes[o]);i.attributes[o]=l?i.attributes[o].toString(16):u?parseFloat(i.attributes[o]):String(i.attributes[o])}this.trigger("data",i);return}if(t=/^#EXT-X-INDEPENDENT-SEGMENTS/.exec(n),t){this.trigger("data",{type:"tag",tagType:"independent-segments"});return}if(t=/^#EXT-X-I-FRAMES-ONLY/.exec(n),t){this.trigger("data",{type:"tag",tagType:"i-frames-only"});return}if(t=/^#EXT-X-CONTENT-STEERING:(.*)$/.exec(n),t){i={type:"tag",tagType:"content-steering"},i.attributes=gi(t[1]),this.trigger("data",i);return}if(t=/^#EXT-X-I-FRAME-STREAM-INF:(.*)$/.exec(n),t){i={type:"tag",tagType:"i-frame-playlist"},i.attributes=gi(t[1]),i.attributes.URI&&(i.uri=i.attributes.URI),i.attributes.BANDWIDTH&&(i.attributes.BANDWIDTH=parseInt(i.attributes.BANDWIDTH,10)),i.attributes.RESOLUTION&&(i.attributes.RESOLUTION=ob(i.attributes.RESOLUTION)),i.attributes["AVERAGE-BANDWIDTH"]&&(i.attributes["AVERAGE-BANDWIDTH"]=parseInt(i.attributes["AVERAGE-BANDWIDTH"],10)),i.attributes["FRAME-RATE"]&&(i.attributes["FRAME-RATE"]=parseFloat(i.attributes["FRAME-RATE"])),this.trigger("data",i);return}if(t=/^#EXT-X-DEFINE:(.*)$/.exec(n),t){i={type:"tag",tagType:"define"},i.attributes=gi(t[1]),this.trigger("data",i);return}this.trigger("data",{type:"tag",data:n.slice(4)})})}addParser({expression:e,customType:t,dataParser:i,segment:s}){typeof i!="function"&&(i=n=>n),this.customParsers.push(n=>{if(e.exec(n))return this.trigger("data",{type:"custom",data:i(n),customType:t,segment:s}),!0})}addTagMapper({expression:e,map:t}){const i=s=>e.test(s)?t(s):s;this.tagMappers.push(i)}}const YR=r=>r.toLowerCase().replace(/-(\w)/g,e=>e[1].toUpperCase()),Us=function(r){const e={};return Object.keys(r).forEach(function(t){e[YR(t)]=r[t]}),e},qf=function(r){const{serverControl:e,targetDuration:t,partTargetDuration:i}=r;if(!e)return;const s="#EXT-X-SERVER-CONTROL",n="holdBack",a="partHoldBack",o=t&&t*3,l=i&&i*2;t&&!e.hasOwnProperty(n)&&(e[n]=o,this.trigger("info",{message:`${s} defaulting HOLD-BACK to targetDuration * 3 (${o}).`})),o&&e[n]<o&&(this.trigger("warn",{message:`${s} clamping HOLD-BACK (${e[n]}) to targetDuration * 3 (${o})`}),e[n]=o),i&&!e.hasOwnProperty(a)&&(e[a]=i*3,this.trigger("info",{message:`${s} defaulting PART-HOLD-BACK to partTargetDuration * 3 (${e[a]}).`})),i&&e[a]<l&&(this.trigger("warn",{message:`${s} clamping PART-HOLD-BACK (${e[a]}) to partTargetDuration * 2 (${l}).`}),e[a]=l)};let GR=class extends n0{constructor(e={}){super(),this.lineStream=new zR,this.parseStream=new HR,this.lineStream.pipe(this.parseStream),this.mainDefinitions=e.mainDefinitions||{},this.params=new URL(e.uri,"https://a.com").searchParams,this.lastProgramDateTime=null;const t=this,i=[];let s={},n,a,o=!1;const l=function(){},u={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},c="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed";let h=0;this.manifest={allowCache:!0,discontinuityStarts:[],dateRanges:[],iFramePlaylists:[],segments:[]};let f=0,m=0;const S={};this.on("end",()=>{s.uri||!s.parts&&!s.preloadHints||(!s.map&&n&&(s.map=n),!s.key&&a&&(s.key=a),!s.timeline&&typeof h=="number"&&(s.timeline=h),this.manifest.preloadSegment=s)}),this.parseStream.on("data",function(y){let E,C;if(t.manifest.definitions){for(const _ in t.manifest.definitions)if(y.uri&&(y.uri=y.uri.replace(`{$${_}}`,t.manifest.definitions[_])),y.attributes)for(const b in y.attributes)typeof y.attributes[b]=="string"&&(y.attributes[b]=y.attributes[b].replace(`{$${_}}`,t.manifest.definitions[_]))}({tag(){({version(){y.version&&(this.manifest.version=y.version)},"allow-cache"(){this.manifest.allowCache=y.allowed,"allowed"in y||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange(){const _={};"length"in y&&(s.byterange=_,_.length=y.length,"offset"in y||(y.offset=f)),"offset"in y&&(s.byterange=_,_.offset=y.offset),f=_.offset+_.length},endlist(){this.manifest.endList=!0},inf(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),y.title&&(s.title=y.title),y.duration>0&&(s.duration=y.duration),y.duration===0&&(s.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=i},key(){if(!y.attributes){this.trigger("warn",{message:"ignoring key declaration without attribute list"});return}if(y.attributes.METHOD==="NONE"){a=null;return}if(!y.attributes.URI){this.trigger("warn",{message:"ignoring key declaration without URI"});return}if(y.attributes.KEYFORMAT==="com.apple.streamingkeydelivery"){this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:y.attributes};return}if(y.attributes.KEYFORMAT==="com.microsoft.playready"){this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.microsoft.playready"]={uri:y.attributes.URI};return}if(y.attributes.KEYFORMAT===c){if(["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(y.attributes.METHOD)===-1){this.trigger("warn",{message:"invalid key method provided for Widevine"});return}if(y.attributes.METHOD==="SAMPLE-AES-CENC"&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),y.attributes.URI.substring(0,23)!=="data:text/plain;base64,"){this.trigger("warn",{message:"invalid key URI provided for Widevine"});return}if(!(y.attributes.KEYID&&y.attributes.KEYID.substring(0,2)==="0x")){this.trigger("warn",{message:"invalid key ID provided for Widevine"});return}this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:y.attributes.KEYFORMAT,keyId:y.attributes.KEYID.substring(2)},pssh:O_(y.attributes.URI.split(",")[1])};return}y.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),a={method:y.attributes.METHOD||"AES-128",uri:y.attributes.URI},typeof y.attributes.IV<"u"&&(a.iv=y.attributes.IV)},"media-sequence"(){if(!isFinite(y.number)){this.trigger("warn",{message:"ignoring invalid media sequence: "+y.number});return}this.manifest.mediaSequence=y.number},"discontinuity-sequence"(){if(!isFinite(y.number)){this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+y.number});return}this.manifest.discontinuitySequence=y.number,h=y.number},"playlist-type"(){if(!/VOD|EVENT/.test(y.playlistType)){this.trigger("warn",{message:"ignoring unknown playlist type: "+y.playlist});return}this.manifest.playlistType=y.playlistType},map(){n={},y.uri&&(n.uri=y.uri),y.byterange&&(n.byterange=y.byterange),a&&(n.key=a)},"stream-inf"(){if(this.manifest.playlists=i,this.manifest.mediaGroups=this.manifest.mediaGroups||u,!y.attributes){this.trigger("warn",{message:"ignoring empty stream-inf attributes"});return}s.attributes||(s.attributes={}),Lt(s.attributes,y.attributes)},media(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||u,!(y.attributes&&y.attributes.TYPE&&y.attributes["GROUP-ID"]&&y.attributes.NAME)){this.trigger("warn",{message:"ignoring incomplete or missing media group"});return}const _=this.manifest.mediaGroups[y.attributes.TYPE];_[y.attributes["GROUP-ID"]]=_[y.attributes["GROUP-ID"]]||{},E=_[y.attributes["GROUP-ID"]],C={default:/yes/i.test(y.attributes.DEFAULT)},C.default?C.autoselect=!0:C.autoselect=/yes/i.test(y.attributes.AUTOSELECT),y.attributes.LANGUAGE&&(C.language=y.attributes.LANGUAGE),y.attributes.URI&&(C.uri=y.attributes.URI),y.attributes["INSTREAM-ID"]&&(C.instreamId=y.attributes["INSTREAM-ID"]),y.attributes.CHARACTERISTICS&&(C.characteristics=y.attributes.CHARACTERISTICS),y.attributes.FORCED&&(C.forced=/yes/i.test(y.attributes.FORCED)),E[y.attributes.NAME]=C},discontinuity(){h+=1,s.discontinuity=!0,this.manifest.discontinuityStarts.push(i.length)},"program-date-time"(){typeof this.manifest.dateTimeString>"u"&&(this.manifest.dateTimeString=y.dateTimeString,this.manifest.dateTimeObject=y.dateTimeObject),s.dateTimeString=y.dateTimeString,s.dateTimeObject=y.dateTimeObject;const{lastProgramDateTime:_}=this;this.lastProgramDateTime=new Date(y.dateTimeString).getTime(),_===null&&this.manifest.segments.reduceRight((b,T)=>(T.programDateTime=b-T.duration*1e3,T.programDateTime),this.lastProgramDateTime)},targetduration(){if(!isFinite(y.duration)||y.duration<0){this.trigger("warn",{message:"ignoring invalid target duration: "+y.duration});return}this.manifest.targetDuration=y.duration,qf.call(this,this.manifest)},start(){if(!y.attributes||isNaN(y.attributes["TIME-OFFSET"])){this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"});return}this.manifest.start={timeOffset:y.attributes["TIME-OFFSET"],precise:y.attributes.PRECISE}},"cue-out"(){s.cueOut=y.data},"cue-out-cont"(){s.cueOutCont=y.data},"cue-in"(){s.cueIn=y.data},skip(){this.manifest.skip=Us(y.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",y.attributes,["SKIPPED-SEGMENTS"])},part(){o=!0;const _=this.manifest.segments.length,b=Us(y.attributes);s.parts=s.parts||[],s.parts.push(b),b.byterange&&(b.byterange.hasOwnProperty("offset")||(b.byterange.offset=m),m=b.byterange.offset+b.byterange.length);const T=s.parts.length-1;this.warnOnMissingAttributes_(`#EXT-X-PART #${T} for segment #${_}`,y.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach((w,A)=>{w.hasOwnProperty("lastPart")||this.trigger("warn",{message:`#EXT-X-RENDITION-REPORT #${A} lacks required attribute(s): LAST-PART`})})},"server-control"(){const _=this.manifest.serverControl=Us(y.attributes);_.hasOwnProperty("canBlockReload")||(_.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),qf.call(this,this.manifest),_.canSkipDateranges&&!_.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint"(){const _=this.manifest.segments.length,b=Us(y.attributes),T=b.type&&b.type==="PART";s.preloadHints=s.preloadHints||[],s.preloadHints.push(b),b.byterange&&(b.byterange.hasOwnProperty("offset")||(b.byterange.offset=T?m:0,T&&(m=b.byterange.offset+b.byterange.length)));const w=s.preloadHints.length-1;if(this.warnOnMissingAttributes_(`#EXT-X-PRELOAD-HINT #${w} for segment #${_}`,y.attributes,["TYPE","URI"]),!!b.type)for(let A=0;A<s.preloadHints.length-1;A++){const I=s.preloadHints[A];I.type&&I.type===b.type&&this.trigger("warn",{message:`#EXT-X-PRELOAD-HINT #${w} for segment #${_} has the same TYPE ${b.type} as preload hint #${A}`})}},"rendition-report"(){const _=Us(y.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(_);const b=this.manifest.renditionReports.length-1,T=["LAST-MSN","URI"];o&&T.push("LAST-PART"),this.warnOnMissingAttributes_(`#EXT-X-RENDITION-REPORT #${b}`,y.attributes,T)},"part-inf"(){this.manifest.partInf=Us(y.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",y.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),qf.call(this,this.manifest)},daterange(){this.manifest.dateRanges.push(Us(y.attributes));const _=this.manifest.dateRanges.length-1;this.warnOnMissingAttributes_(`#EXT-X-DATERANGE #${_}`,y.attributes,["ID","START-DATE"]);const b=this.manifest.dateRanges[_];b.endDate&&b.startDate&&new Date(b.endDate)<new Date(b.startDate)&&this.trigger("warn",{message:"EXT-X-DATERANGE END-DATE must be equal to or later than the value of the START-DATE"}),b.duration&&b.duration<0&&this.trigger("warn",{message:"EXT-X-DATERANGE DURATION must not be negative"}),b.plannedDuration&&b.plannedDuration<0&&this.trigger("warn",{message:"EXT-X-DATERANGE PLANNED-DURATION must not be negative"});const T=!!b.endOnNext;if(T&&!b.class&&this.trigger("warn",{message:"EXT-X-DATERANGE with an END-ON-NEXT=YES attribute must have a CLASS attribute"}),T&&(b.duration||b.endDate)&&this.trigger("warn",{message:"EXT-X-DATERANGE with an END-ON-NEXT=YES attribute must not contain DURATION or END-DATE attributes"}),b.duration&&b.endDate){const A=b.startDate.getTime()+b.duration*1e3;this.manifest.dateRanges[_].endDate=new Date(A)}if(!S[b.id])S[b.id]=b;else{for(const A in S[b.id])if(b[A]&&JSON.stringify(S[b.id][A])!==JSON.stringify(b[A])){this.trigger("warn",{message:"EXT-X-DATERANGE tags with the same ID in a playlist must have the same attributes values"});break}const w=this.manifest.dateRanges.findIndex(A=>A.id===b.id);this.manifest.dateRanges[w]=Lt(this.manifest.dateRanges[w],b),S[b.id]=Lt(S[b.id],b),this.manifest.dateRanges.pop()}},"independent-segments"(){this.manifest.independentSegments=!0},"i-frames-only"(){this.manifest.iFramesOnly=!0,this.requiredCompatibilityversion(this.manifest.version,4)},"content-steering"(){this.manifest.contentSteering=Us(y.attributes),this.warnOnMissingAttributes_("#EXT-X-CONTENT-STEERING",y.attributes,["SERVER-URI"])},define(){this.manifest.definitions=this.manifest.definitions||{};const _=(b,T)=>{if(b in this.manifest.definitions){this.trigger("error",{message:`EXT-X-DEFINE: Duplicate name ${b}`});return}this.manifest.definitions[b]=T};if("QUERYPARAM"in y.attributes){if("NAME"in y.attributes||"IMPORT"in y.attributes){this.trigger("error",{message:"EXT-X-DEFINE: Invalid attributes"});return}const b=this.params.get(y.attributes.QUERYPARAM);if(!b){this.trigger("error",{message:`EXT-X-DEFINE: No query param ${y.attributes.QUERYPARAM}`});return}_(y.attributes.QUERYPARAM,decodeURIComponent(b));return}if("NAME"in y.attributes){if("IMPORT"in y.attributes){this.trigger("error",{message:"EXT-X-DEFINE: Invalid attributes"});return}if(!("VALUE"in y.attributes)||typeof y.attributes.VALUE!="string"){this.trigger("error",{message:`EXT-X-DEFINE: No value for ${y.attributes.NAME}`});return}_(y.attributes.NAME,y.attributes.VALUE);return}if("IMPORT"in y.attributes){if(!this.mainDefinitions[y.attributes.IMPORT]){this.trigger("error",{message:`EXT-X-DEFINE: No value ${y.attributes.IMPORT} to import, or IMPORT used on main playlist`});return}_(y.attributes.IMPORT,this.mainDefinitions[y.attributes.IMPORT]);return}this.trigger("error",{message:"EXT-X-DEFINE: No attribute"})},"i-frame-playlist"(){this.manifest.iFramePlaylists.push({attributes:y.attributes,uri:y.uri,timeline:h}),this.warnOnMissingAttributes_("#EXT-X-I-FRAME-STREAM-INF",y.attributes,["BANDWIDTH","URI"])}}[y.tagType]||l).call(t)},uri(){s.uri=y.uri,i.push(s),this.manifest.targetDuration&&!("duration"in s)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),s.duration=this.manifest.targetDuration),a&&(s.key=a),s.timeline=h,n&&(s.map=n),m=0,this.lastProgramDateTime!==null&&(s.programDateTime=this.lastProgramDateTime,this.lastProgramDateTime+=s.duration*1e3),s={}},comment(){},custom(){y.segment?(s.custom=s.custom||{},s.custom[y.customType]=y.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[y.customType]=y.data)}})[y.type].call(t)})}requiredCompatibilityversion(e,t){(e<t||!e)&&this.trigger("warn",{message:`manifest must be at least version ${t}`})}warnOnMissingAttributes_(e,t,i){const s=[];i.forEach(function(n){t.hasOwnProperty(n)||s.push(n)}),s.length&&this.trigger("warn",{message:`${e} lacks required attribute(s): ${s.join(", ")}`})}push(e){this.lineStream.push(e)}end(){this.lineStream.push(`
`),this.manifest.dateRanges.length&&this.lastProgramDateTime===null&&this.trigger("warn",{message:"A playlist with EXT-X-DATERANGE tag must contain atleast one EXT-X-PROGRAM-DATE-TIME tag"}),this.lastProgramDateTime=null,this.trigger("end")}addParser(e){this.parseStream.addParser(e)}addTagMapper(e){this.parseStream.addTagMapper(e)}};var Un={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},KR=["video","audio","text"],lb=["Video","Audio","Text"],y_=function(e){return e&&e.replace(/avc1\.(\d+)\.(\d+)/i,function(t,i,s){var n=("00"+Number(i).toString(16)).slice(-2),a=("00"+Number(s).toString(16)).slice(-2);return"avc1."+n+"00"+a})},Fr=function(e){e===void 0&&(e="");var t=e.split(","),i=[];return t.forEach(function(s){s=s.trim();var n;KR.forEach(function(a){var o=Un[a].exec(s.toLowerCase());if(!(!o||o.length<=1)){n=a;var l=s.substring(0,o[1].length),u=s.replace(l,"");i.push({type:l,details:u,mediaType:a})}}),n||i.push({type:s,details:"",mediaType:"unknown"})}),i},JR=function(e,t){if(!e.mediaGroups.AUDIO||!t)return null;var i=e.mediaGroups.AUDIO[t];if(!i)return null;for(var s in i){var n=i[s];if(n.default&&n.playlists)return Fr(n.playlists[0].attributes.CODECS)}return null},b_=function(e){return e===void 0&&(e=""),Un.audio.test(e.trim().toLowerCase())},eL=function(e){return e===void 0&&(e=""),Un.text.test(e.trim().toLowerCase())},Ya=function(e){if(!(!e||typeof e!="string")){var t=e.toLowerCase().split(",").map(function(n){return y_(n.trim())}),i="video";t.length===1&&b_(t[0])?i="audio":t.length===1&&eL(t[0])&&(i="application");var s="mp4";return t.every(function(n){return Un.mp4.test(n)})?s="mp4":t.every(function(n){return Un.webm.test(n)})?s="webm":t.every(function(n){return Un.ogg.test(n)})&&(s="ogg"),i+"/"+s+';codecs="'+e+'"'}},vl=function(e,t){return e===void 0&&(e=""),t===void 0&&(t=!1),q.MediaSource&&q.MediaSource.isTypeSupported&&q.MediaSource.isTypeSupported(Ya(e))||t&&q.ManagedMediaSource&&q.ManagedMediaSource.isTypeSupported&&q.ManagedMediaSource.isTypeSupported(Ya(e))||!1},Vf=function(e){return e===void 0&&(e=""),e.toLowerCase().split(",").every(function(t){t=t.trim();for(var i=0;i<lb.length;i++){var s=lb[i];if(Un["muxer"+s].test(t))return!0}return!1})},ub="mp4a.40.2",tL="avc1.4d400d",iL=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,rL=/^application\/dash\+xml/i,v_=function(e){return iL.test(e)?"hls":rL.test(e)?"dash":e==="application/vnd.videojs.vhs+json"?"vhs-json":null},sL=function(e){return e.toString(2).length},nL=function(e){return Math.ceil(sL(e)/8)},S_=function(e){return ArrayBuffer.isView==="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer},aL=function(e){return S_(e)},Ee=function(e){return e instanceof Uint8Array?e:(!Array.isArray(e)&&!aL(e)&&!(e instanceof ArrayBuffer)&&(typeof e!="number"||typeof e=="number"&&e!==e?e=0:e=[e]),new Uint8Array(e&&e.buffer||e,e&&e.byteOffset||0,e&&e.byteLength||0))},ei=q.BigInt||Number,um=[ei("0x1"),ei("0x100"),ei("0x10000"),ei("0x1000000"),ei("0x100000000"),ei("0x10000000000"),ei("0x1000000000000"),ei("0x100000000000000"),ei("0x10000000000000000")];(function(){var r=new Uint16Array([65484]),e=new Uint8Array(r.buffer,r.byteOffset,r.byteLength);return e[0]===255?"big":e[0]===204?"little":"unknown"})();var oL=function(e,t){var i=t===void 0?{}:t,s=i.signed,n=s===void 0?!1:s,a=i.le,o=a===void 0?!1:a;e=Ee(e);var l=o?"reduce":"reduceRight",u=e[l]?e[l]:Array.prototype[l],c=u.call(e,function(f,m,S){var y=o?S:Math.abs(S+1-e.length);return f+ei(m)*um[y]},ei(0));if(n){var h=um[e.length]/ei(2)-ei(1);c=ei(c),c>h&&(c-=h,c-=h,c-=ei(2))}return Number(c)},lL=function(e,t){var i={},s=i.le,n=s===void 0?!1:s;(typeof e!="bigint"&&typeof e!="number"||typeof e=="number"&&e!==e)&&(e=0),e=ei(e);for(var a=nL(e),o=new Uint8Array(new ArrayBuffer(a)),l=0;l<a;l++){var u=n?l:Math.abs(l+1-o.length);o[u]=Number(e/um[l]&ei(255)),e<0&&(o[u]=Math.abs(~o[u]),o[u]-=l===0?1:2)}return o},T_=function(e,t){if(typeof e!="string"&&e&&typeof e.toString=="function"&&(e=e.toString()),typeof e!="string")return new Uint8Array;t||(e=unescape(encodeURIComponent(e)));for(var i=new Uint8Array(e.length),s=0;s<e.length;s++)i[s]=e.charCodeAt(s);return i},uL=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];if(t=t.filter(function(o){return o&&(o.byteLength||o.length)&&typeof o!="string"}),t.length<=1)return Ee(t[0]);var s=t.reduce(function(o,l,u){return o+(l.byteLength||l.length)},0),n=new Uint8Array(s),a=0;return t.forEach(function(o){o=Ee(o),n.set(o,a),a+=o.byteLength}),n},vt=function(e,t,i){var s=i===void 0?{}:i,n=s.offset,a=n===void 0?0:n,o=s.mask,l=o===void 0?[]:o;e=Ee(e),t=Ee(t);var u=t.every?t.every:Array.prototype.every;return t.length&&e.length-a>=t.length&&u.call(t,function(c,h){var f=l[h]?l[h]&e[a+h]:e[a+h];return c===f})},cL=function(e,t,i){t.forEach(function(s){for(var n in e.mediaGroups[s])for(var a in e.mediaGroups[s][n]){var o=e.mediaGroups[s][n][a];i(o,s,n,a)}})},Ho={},gs={},vn={},cb;function Dd(){if(cb)return vn;cb=1;function r(n,a,o){if(o===void 0&&(o=Array.prototype),n&&typeof o.find=="function")return o.find.call(n,a);for(var l=0;l<n.length;l++)if(Object.prototype.hasOwnProperty.call(n,l)){var u=n[l];if(a.call(void 0,u,l,n))return u}}function e(n,a){return a===void 0&&(a=Object),a&&typeof a.freeze=="function"?a.freeze(n):n}function t(n,a){if(n===null||typeof n!="object")throw new TypeError("target is not an object");for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o]);return n}var i=e({HTML:"text/html",isHTML:function(n){return n===i.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),s=e({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(n){return n===s.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});return vn.assign=t,vn.find=r,vn.freeze=e,vn.MIME_TYPE=i,vn.NAMESPACE=s,vn}var hb;function __(){if(hb)return gs;hb=1;var r=Dd(),e=r.find,t=r.NAMESPACE;function i(M){return M!==""}function s(M){return M?M.split(/[\t\n\f\r ]+/).filter(i):[]}function n(M,L){return M.hasOwnProperty(L)||(M[L]=!0),M}function a(M){if(!M)return[];var L=s(M);return Object.keys(L.reduce(n,{}))}function o(M){return function(L){return M&&M.indexOf(L)!==-1}}function l(M,L){for(var x in M)Object.prototype.hasOwnProperty.call(M,x)&&(L[x]=M[x])}function u(M,L){var x=M.prototype;if(!(x instanceof L)){let D=function(){};D.prototype=L.prototype,D=new D,l(x,D),M.prototype=x=D}x.constructor!=M&&(typeof M!="function"&&console.error("unknown Class:"+M),x.constructor=M)}var c={},h=c.ELEMENT_NODE=1,f=c.ATTRIBUTE_NODE=2,m=c.TEXT_NODE=3,S=c.CDATA_SECTION_NODE=4,y=c.ENTITY_REFERENCE_NODE=5,E=c.ENTITY_NODE=6,C=c.PROCESSING_INSTRUCTION_NODE=7,_=c.COMMENT_NODE=8,b=c.DOCUMENT_NODE=9,T=c.DOCUMENT_TYPE_NODE=10,w=c.DOCUMENT_FRAGMENT_NODE=11,A=c.NOTATION_NODE=12,I={},N={};I.INDEX_SIZE_ERR=(N[1]="Index size error",1),I.DOMSTRING_SIZE_ERR=(N[2]="DOMString size error",2);var P=I.HIERARCHY_REQUEST_ERR=(N[3]="Hierarchy request error",3);I.WRONG_DOCUMENT_ERR=(N[4]="Wrong document",4),I.INVALID_CHARACTER_ERR=(N[5]="Invalid character",5),I.NO_DATA_ALLOWED_ERR=(N[6]="No data allowed",6),I.NO_MODIFICATION_ALLOWED_ERR=(N[7]="No modification allowed",7);var R=I.NOT_FOUND_ERR=(N[8]="Not found",8);I.NOT_SUPPORTED_ERR=(N[9]="Not supported",9);var X=I.INUSE_ATTRIBUTE_ERR=(N[10]="Attribute in use",10);I.INVALID_STATE_ERR=(N[11]="Invalid state",11),I.SYNTAX_ERR=(N[12]="Syntax error",12),I.INVALID_MODIFICATION_ERR=(N[13]="Invalid modification",13),I.NAMESPACE_ERR=(N[14]="Invalid namespace",14),I.INVALID_ACCESS_ERR=(N[15]="Invalid access",15);function j(M,L){if(L instanceof Error)var x=L;else x=this,Error.call(this,N[M]),this.message=N[M],Error.captureStackTrace&&Error.captureStackTrace(this,j);return x.code=M,L&&(this.message=this.message+": "+L),x}j.prototype=Error.prototype,l(I,j);function Z(){}Z.prototype={length:0,item:function(M){return M>=0&&M<this.length?this[M]:null},toString:function(M,L){for(var x=[],D=0;D<this.length;D++)Ir(this[D],x,M,L);return x.join("")},filter:function(M){return Array.prototype.filter.call(this,M)},indexOf:function(M){return Array.prototype.indexOf.call(this,M)}};function Y(M,L){this._node=M,this._refresh=L,te(this)}function te(M){var L=M._node._inc||M._node.ownerDocument._inc;if(M._inc!==L){var x=M._refresh(M._node);if(wi(M,"length",x.length),!M.$$length||x.length<M.$$length)for(var D=x.length;D in M;D++)Object.prototype.hasOwnProperty.call(M,D)&&delete M[D];l(x,M),M._inc=L}}Y.prototype.item=function(M){return te(this),this[M]||null},u(Y,Z);function le(){}function G(M,L){for(var x=M.length;x--;)if(M[x]===L)return x}function re(M,L,x,D){if(D?L[G(L,D)]=x:L[L.length++]=x,M){x.ownerElement=M;var B=M.ownerDocument;B&&(D&&dt(B,M,D),Te(B,M,x))}}function J(M,L,x){var D=G(L,x);if(D>=0){for(var B=L.length-1;D<B;)L[D]=L[++D];if(L.length=B,M){var W=M.ownerDocument;W&&(dt(W,M,x),x.ownerElement=null)}}else throw new j(R,new Error(M.tagName+"@"+x))}le.prototype={length:0,item:Z.prototype.item,getNamedItem:function(M){for(var L=this.length;L--;){var x=this[L];if(x.nodeName==M)return x}},setNamedItem:function(M){var L=M.ownerElement;if(L&&L!=this._ownerElement)throw new j(X);var x=this.getNamedItem(M.nodeName);return re(this._ownerElement,this,M,x),x},setNamedItemNS:function(M){var L=M.ownerElement,x;if(L&&L!=this._ownerElement)throw new j(X);return x=this.getNamedItemNS(M.namespaceURI,M.localName),re(this._ownerElement,this,M,x),x},removeNamedItem:function(M){var L=this.getNamedItem(M);return J(this._ownerElement,this,L),L},removeNamedItemNS:function(M,L){var x=this.getNamedItemNS(M,L);return J(this._ownerElement,this,x),x},getNamedItemNS:function(M,L){for(var x=this.length;x--;){var D=this[x];if(D.localName==L&&D.namespaceURI==M)return D}return null}};function ne(){}ne.prototype={hasFeature:function(M,L){return!0},createDocument:function(M,L,x){var D=new Me;if(D.implementation=this,D.childNodes=new Z,D.doctype=x||null,x&&D.appendChild(x),L){var B=D.createElementNS(M,L);D.appendChild(B)}return D},createDocumentType:function(M,L,x){var D=new Mr;return D.name=M,D.nodeName=M,D.publicId=L||"",D.systemId=x||"",D}};function ae(){}ae.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(M,L){return Kt(this,M,L)},replaceChild:function(M,L){Kt(this,M,L,ni),L&&this.removeChild(L)},removeChild:function(M){return rt(this,M)},appendChild:function(M){return this.insertBefore(M,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(M){return hs(this.ownerDocument||this,this,M)},normalize:function(){for(var M=this.firstChild;M;){var L=M.nextSibling;L&&L.nodeType==m&&M.nodeType==m?(this.removeChild(L),M.appendData(L.data)):(M.normalize(),M=L)}},isSupported:function(M,L){return this.ownerDocument.implementation.hasFeature(M,L)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(M){for(var L=this;L;){var x=L._nsMap;if(x){for(var D in x)if(Object.prototype.hasOwnProperty.call(x,D)&&x[D]===M)return D}L=L.nodeType==f?L.ownerDocument:L.parentNode}return null},lookupNamespaceURI:function(M){for(var L=this;L;){var x=L._nsMap;if(x&&Object.prototype.hasOwnProperty.call(x,M))return x[M];L=L.nodeType==f?L.ownerDocument:L.parentNode}return null},isDefaultNamespace:function(M){var L=this.lookupPrefix(M);return L==null}};function Se(M){return M=="<"&&"&lt;"||M==">"&&"&gt;"||M=="&"&&"&amp;"||M=='"'&&"&quot;"||"&#"+M.charCodeAt()+";"}l(c,ae),l(c,ae.prototype);function we(M,L){if(L(M))return!0;if(M=M.firstChild)do if(we(M,L))return!0;while(M=M.nextSibling)}function Me(){this.ownerDocument=this}function Te(M,L,x){M&&M._inc++;var D=x.namespaceURI;D===t.XMLNS&&(L._nsMap[x.prefix?x.localName:""]=x.value)}function dt(M,L,x,D){M&&M._inc++;var B=x.namespaceURI;B===t.XMLNS&&delete L._nsMap[x.prefix?x.localName:""]}function bt(M,L,x){if(M&&M._inc){M._inc++;var D=L.childNodes;if(x)D[D.length++]=x;else{for(var B=L.firstChild,W=0;B;)D[W++]=B,B=B.nextSibling;D.length=W,delete D[D.length]}}}function rt(M,L){var x=L.previousSibling,D=L.nextSibling;return x?x.nextSibling=D:M.firstChild=D,D?D.previousSibling=x:M.lastChild=x,L.parentNode=null,L.previousSibling=null,L.nextSibling=null,bt(M.ownerDocument,M),L}function At(M){return M&&(M.nodeType===ae.DOCUMENT_NODE||M.nodeType===ae.DOCUMENT_FRAGMENT_NODE||M.nodeType===ae.ELEMENT_NODE)}function xi(M){return M&&($t(M)||Dr(M)||Qt(M)||M.nodeType===ae.DOCUMENT_FRAGMENT_NODE||M.nodeType===ae.COMMENT_NODE||M.nodeType===ae.PROCESSING_INSTRUCTION_NODE)}function Qt(M){return M&&M.nodeType===ae.DOCUMENT_TYPE_NODE}function $t(M){return M&&M.nodeType===ae.ELEMENT_NODE}function Dr(M){return M&&M.nodeType===ae.TEXT_NODE}function Bt(M,L){var x=M.childNodes||[];if(e(x,$t)||Qt(L))return!1;var D=e(x,Qt);return!(L&&D&&x.indexOf(D)>x.indexOf(L))}function gr(M,L){var x=M.childNodes||[];function D(W){return $t(W)&&W!==L}if(e(x,D))return!1;var B=e(x,Qt);return!(L&&B&&x.indexOf(B)>x.indexOf(L))}function Pt(M,L,x){if(!At(M))throw new j(P,"Unexpected parent node type "+M.nodeType);if(x&&x.parentNode!==M)throw new j(R,"child not in parent");if(!xi(L)||Qt(L)&&M.nodeType!==ae.DOCUMENT_NODE)throw new j(P,"Unexpected node type "+L.nodeType+" for parent node type "+M.nodeType)}function as(M,L,x){var D=M.childNodes||[],B=L.childNodes||[];if(L.nodeType===ae.DOCUMENT_FRAGMENT_NODE){var W=B.filter($t);if(W.length>1||e(B,Dr))throw new j(P,"More than one element or text in fragment");if(W.length===1&&!Bt(M,x))throw new j(P,"Element in fragment can not be inserted before doctype")}if($t(L)&&!Bt(M,x))throw new j(P,"Only one element can be added and only after doctype");if(Qt(L)){if(e(D,Qt))throw new j(P,"Only one doctype is allowed");var oe=e(D,$t);if(x&&D.indexOf(oe)<D.indexOf(x))throw new j(P,"Doctype can only be inserted before an element");if(!x&&oe)throw new j(P,"Doctype can not be appended since element is present")}}function ni(M,L,x){var D=M.childNodes||[],B=L.childNodes||[];if(L.nodeType===ae.DOCUMENT_FRAGMENT_NODE){var W=B.filter($t);if(W.length>1||e(B,Dr))throw new j(P,"More than one element or text in fragment");if(W.length===1&&!gr(M,x))throw new j(P,"Element in fragment can not be inserted before doctype")}if($t(L)&&!gr(M,x))throw new j(P,"Only one element can be added and only after doctype");if(Qt(L)){if(e(D,function(Ce){return Qt(Ce)&&Ce!==x}))throw new j(P,"Only one doctype is allowed");var oe=e(D,$t);if(x&&D.indexOf(oe)<D.indexOf(x))throw new j(P,"Doctype can only be inserted before an element")}}function Kt(M,L,x,D){Pt(M,L,x),M.nodeType===ae.DOCUMENT_NODE&&(D||as)(M,L,x);var B=L.parentNode;if(B&&B.removeChild(L),L.nodeType===w){var W=L.firstChild;if(W==null)return L;var oe=L.lastChild}else W=oe=L;var de=x?x.previousSibling:M.lastChild;W.previousSibling=de,oe.nextSibling=x,de?de.nextSibling=W:M.firstChild=W,x==null?M.lastChild=oe:x.previousSibling=oe;do{W.parentNode=M;var Ce=M.ownerDocument||M;Ue(W,Ce)}while(W!==oe&&(W=W.nextSibling));return bt(M.ownerDocument||M,M),L.nodeType==w&&(L.firstChild=L.lastChild=null),L}function Ue(M,L){if(M.ownerDocument!==L){if(M.ownerDocument=L,M.nodeType===h&&M.attributes)for(var x=0;x<M.attributes.length;x++){var D=M.attributes.item(x);D&&(D.ownerDocument=L)}for(var B=M.firstChild;B;)Ue(B,L),B=B.nextSibling}}function ot(M,L){L.parentNode&&L.parentNode.removeChild(L),L.parentNode=M,L.previousSibling=M.lastChild,L.nextSibling=null,L.previousSibling?L.previousSibling.nextSibling=L:M.firstChild=L,M.lastChild=L,bt(M.ownerDocument,M,L);var x=M.ownerDocument||M;return Ue(L,x),L}Me.prototype={nodeName:"#document",nodeType:b,doctype:null,documentElement:null,_inc:1,insertBefore:function(M,L){if(M.nodeType==w){for(var x=M.firstChild;x;){var D=x.nextSibling;this.insertBefore(x,L),x=D}return M}return Kt(this,M,L),Ue(M,this),this.documentElement===null&&M.nodeType===h&&(this.documentElement=M),M},removeChild:function(M){return this.documentElement==M&&(this.documentElement=null),rt(this,M)},replaceChild:function(M,L){Kt(this,M,L,ni),Ue(M,this),L&&this.removeChild(L),$t(M)&&(this.documentElement=M)},importNode:function(M,L){return cs(this,M,L)},getElementById:function(M){var L=null;return we(this.documentElement,function(x){if(x.nodeType==h&&x.getAttribute("id")==M)return L=x,!0}),L},getElementsByClassName:function(M){var L=a(M);return new Y(this,function(x){var D=[];return L.length>0&&we(x.documentElement,function(B){if(B!==x&&B.nodeType===h){var W=B.getAttribute("class");if(W){var oe=M===W;if(!oe){var de=a(W);oe=L.every(o(de))}oe&&D.push(B)}}}),D})},createElement:function(M){var L=new lt;L.ownerDocument=this,L.nodeName=M,L.tagName=M,L.localName=M,L.childNodes=new Z;var x=L.attributes=new le;return x._ownerElement=L,L},createDocumentFragment:function(){var M=new Ze;return M.ownerDocument=this,M.childNodes=new Z,M},createTextNode:function(M){var L=new Ki;return L.ownerDocument=this,L.appendData(M),L},createComment:function(M){var L=new os;return L.ownerDocument=this,L.appendData(M),L},createCDATASection:function(M){var L=new Or;return L.ownerDocument=this,L.appendData(M),L},createProcessingInstruction:function(M,L){var x=new gn;return x.ownerDocument=this,x.tagName=x.nodeName=x.target=M,x.nodeValue=x.data=L,x},createAttribute:function(M){var L=new Yi;return L.ownerDocument=this,L.name=M,L.nodeName=M,L.localName=M,L.specified=!0,L},createEntityReference:function(M){var L=new Qs;return L.ownerDocument=this,L.nodeName=M,L},createElementNS:function(M,L){var x=new lt,D=L.split(":"),B=x.attributes=new le;return x.childNodes=new Z,x.ownerDocument=this,x.nodeName=L,x.tagName=L,x.namespaceURI=M,D.length==2?(x.prefix=D[0],x.localName=D[1]):x.localName=L,B._ownerElement=x,x},createAttributeNS:function(M,L){var x=new Yi,D=L.split(":");return x.ownerDocument=this,x.nodeName=L,x.name=L,x.namespaceURI=M,x.specified=!0,D.length==2?(x.prefix=D[0],x.localName=D[1]):x.localName=L,x}},u(Me,ae);function lt(){this._nsMap={}}lt.prototype={nodeType:h,hasAttribute:function(M){return this.getAttributeNode(M)!=null},getAttribute:function(M){var L=this.getAttributeNode(M);return L&&L.value||""},getAttributeNode:function(M){return this.attributes.getNamedItem(M)},setAttribute:function(M,L){var x=this.ownerDocument.createAttribute(M);x.value=x.nodeValue=""+L,this.setAttributeNode(x)},removeAttribute:function(M){var L=this.getAttributeNode(M);L&&this.removeAttributeNode(L)},appendChild:function(M){return M.nodeType===w?this.insertBefore(M,null):ot(this,M)},setAttributeNode:function(M){return this.attributes.setNamedItem(M)},setAttributeNodeNS:function(M){return this.attributes.setNamedItemNS(M)},removeAttributeNode:function(M){return this.attributes.removeNamedItem(M.nodeName)},removeAttributeNS:function(M,L){var x=this.getAttributeNodeNS(M,L);x&&this.removeAttributeNode(x)},hasAttributeNS:function(M,L){return this.getAttributeNodeNS(M,L)!=null},getAttributeNS:function(M,L){var x=this.getAttributeNodeNS(M,L);return x&&x.value||""},setAttributeNS:function(M,L,x){var D=this.ownerDocument.createAttributeNS(M,L);D.value=D.nodeValue=""+x,this.setAttributeNode(D)},getAttributeNodeNS:function(M,L){return this.attributes.getNamedItemNS(M,L)},getElementsByTagName:function(M){return new Y(this,function(L){var x=[];return we(L,function(D){D!==L&&D.nodeType==h&&(M==="*"||D.tagName==M)&&x.push(D)}),x})},getElementsByTagNameNS:function(M,L){return new Y(this,function(x){var D=[];return we(x,function(B){B!==x&&B.nodeType===h&&(M==="*"||B.namespaceURI===M)&&(L==="*"||B.localName==L)&&D.push(B)}),D})}},Me.prototype.getElementsByTagName=lt.prototype.getElementsByTagName,Me.prototype.getElementsByTagNameNS=lt.prototype.getElementsByTagNameNS,u(lt,ae);function Yi(){}Yi.prototype.nodeType=f,u(Yi,ae);function Gi(){}Gi.prototype={data:"",substringData:function(M,L){return this.data.substring(M,M+L)},appendData:function(M){M=this.data+M,this.nodeValue=this.data=M,this.length=M.length},insertData:function(M,L){this.replaceData(M,0,L)},appendChild:function(M){throw new Error(N[P])},deleteData:function(M,L){this.replaceData(M,L,"")},replaceData:function(M,L,x){var D=this.data.substring(0,M),B=this.data.substring(M+L);x=D+x+B,this.nodeValue=this.data=x,this.length=x.length}},u(Gi,ae);function Ki(){}Ki.prototype={nodeName:"#text",nodeType:m,splitText:function(M){var L=this.data,x=L.substring(M);L=L.substring(0,M),this.data=this.nodeValue=L,this.length=L.length;var D=this.ownerDocument.createTextNode(x);return this.parentNode&&this.parentNode.insertBefore(D,this.nextSibling),D}},u(Ki,Gi);function os(){}os.prototype={nodeName:"#comment",nodeType:_},u(os,Gi);function Or(){}Or.prototype={nodeName:"#cdata-section",nodeType:S},u(Or,Gi);function Mr(){}Mr.prototype.nodeType=T,u(Mr,ae);function Ls(){}Ls.prototype.nodeType=A,u(Ls,ae);function mn(){}mn.prototype.nodeType=E,u(mn,ae);function Qs(){}Qs.prototype.nodeType=y,u(Qs,ae);function Ze(){}Ze.prototype.nodeName="#document-fragment",Ze.prototype.nodeType=w,u(Ze,ae);function gn(){}gn.prototype.nodeType=C,u(gn,ae);function ls(){}ls.prototype.serializeToString=function(M,L,x){return st.call(M,L,x)},ae.prototype.toString=st;function st(M,L){var x=[],D=this.nodeType==9&&this.documentElement||this,B=D.prefix,W=D.namespaceURI;if(W&&B==null){var B=D.lookupPrefix(W);if(B==null)var oe=[{namespace:W,prefix:null}]}return Ir(this,x,M,L,oe),x.join("")}function $s(M,L,x){var D=M.prefix||"",B=M.namespaceURI;if(!B||D==="xml"&&B===t.XML||B===t.XMLNS)return!1;for(var W=x.length;W--;){var oe=x[W];if(oe.prefix===D)return oe.namespace!==B}return!0}function us(M,L,x){M.push(" ",L,'="',x.replace(/[<>&"\t\n\r]/g,Se),'"')}function Ir(M,L,x,D,B){if(B||(B=[]),D)if(M=D(M),M){if(typeof M=="string"){L.push(M);return}}else return;switch(M.nodeType){case h:var W=M.attributes,oe=W.length,We=M.firstChild,de=M.tagName;x=t.isHTML(M.namespaceURI)||x;var Ce=de;if(!x&&!M.prefix&&M.namespaceURI){for(var ye,Pe=0;Pe<W.length;Pe++)if(W.item(Pe).name==="xmlns"){ye=W.item(Pe).value;break}if(!ye)for(var ge=B.length-1;ge>=0;ge--){var _e=B[ge];if(_e.prefix===""&&_e.namespace===M.namespaceURI){ye=_e.namespace;break}}if(ye!==M.namespaceURI)for(var ge=B.length-1;ge>=0;ge--){var _e=B[ge];if(_e.namespace===M.namespaceURI){_e.prefix&&(Ce=_e.prefix+":"+de);break}}}L.push("<",Ce);for(var Ie=0;Ie<oe;Ie++){var _t=W.item(Ie);_t.prefix=="xmlns"?B.push({prefix:_t.localName,namespace:_t.value}):_t.nodeName=="xmlns"&&B.push({prefix:"",namespace:_t.value})}for(var Ie=0;Ie<oe;Ie++){var _t=W.item(Ie);if($s(_t,x,B)){var xt=_t.prefix||"",ai=_t.namespaceURI;us(L,xt?"xmlns:"+xt:"xmlns",ai),B.push({prefix:xt,namespace:ai})}Ir(_t,L,x,D,B)}if(de===Ce&&$s(M,x,B)){var xt=M.prefix||"",ai=M.namespaceURI;us(L,xt?"xmlns:"+xt:"xmlns",ai),B.push({prefix:xt,namespace:ai})}if(We||x&&!/^(?:meta|link|img|br|hr|input)$/i.test(de)){if(L.push(">"),x&&/^script$/i.test(de))for(;We;)We.data?L.push(We.data):Ir(We,L,x,D,B.slice()),We=We.nextSibling;else for(;We;)Ir(We,L,x,D,B.slice()),We=We.nextSibling;L.push("</",Ce,">")}else L.push("/>");return;case b:case w:for(var We=M.firstChild;We;)Ir(We,L,x,D,B.slice()),We=We.nextSibling;return;case f:return us(L,M.name,M.value);case m:return L.push(M.data.replace(/[<&>]/g,Se));case S:return L.push("<![CDATA[",M.data,"]]>");case _:return L.push("<!--",M.data,"-->");case T:var ds=M.publicId,Ve=M.systemId;if(L.push("<!DOCTYPE ",M.name),ds)L.push(" PUBLIC ",ds),Ve&&Ve!="."&&L.push(" ",Ve),L.push(">");else if(Ve&&Ve!=".")L.push(" SYSTEM ",Ve,">");else{var ia=M.internalSubset;ia&&L.push(" [",ia,"]"),L.push(">")}return;case C:return L.push("<?",M.target," ",M.data,"?>");case y:return L.push("&",M.nodeName,";");default:L.push("??",M.nodeName)}}function cs(M,L,x){var D;switch(L.nodeType){case h:D=L.cloneNode(!1),D.ownerDocument=M;case w:break;case f:x=!0;break}if(D||(D=L.cloneNode(!1)),D.ownerDocument=M,D.parentNode=null,x)for(var B=L.firstChild;B;)D.appendChild(cs(M,B,x)),B=B.nextSibling;return D}function hs(M,L,x){var D=new L.constructor;for(var B in L)if(Object.prototype.hasOwnProperty.call(L,B)){var W=L[B];typeof W!="object"&&W!=D[B]&&(D[B]=W)}switch(L.childNodes&&(D.childNodes=new Z),D.ownerDocument=M,D.nodeType){case h:var oe=L.attributes,de=D.attributes=new le,Ce=oe.length;de._ownerElement=D;for(var ye=0;ye<Ce;ye++)D.setAttributeNode(hs(M,oe.item(ye),!0));break;case f:x=!0}if(x)for(var Pe=L.firstChild;Pe;)D.appendChild(hs(M,Pe,x)),Pe=Pe.nextSibling;return D}function wi(M,L,x){M[L]=x}try{if(Object.defineProperty){let M=function(L){switch(L.nodeType){case h:case w:var x=[];for(L=L.firstChild;L;)L.nodeType!==7&&L.nodeType!==8&&x.push(M(L)),L=L.nextSibling;return x.join("");default:return L.nodeValue}};Object.defineProperty(Y.prototype,"length",{get:function(){return te(this),this.$$length}}),Object.defineProperty(ae.prototype,"textContent",{get:function(){return M(this)},set:function(L){switch(this.nodeType){case h:case w:for(;this.firstChild;)this.removeChild(this.firstChild);(L||String(L))&&this.appendChild(this.ownerDocument.createTextNode(L));break;default:this.data=L,this.value=L,this.nodeValue=L}}}),wi=function(L,x,D){L["$$"+x]=D}}}catch{}return gs.DocumentType=Mr,gs.DOMException=j,gs.DOMImplementation=ne,gs.Element=lt,gs.Node=ae,gs.NodeList=Z,gs.XMLSerializer=ls,gs}var Yo={},Xf={},db;function hL(){return db||(db=1,(function(r){var e=Dd().freeze;r.XML_ENTITIES=e({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),r.HTML_ENTITIES=e({Aacute:"Á",aacute:"á",Abreve:"Ă",abreve:"ă",ac:"∾",acd:"∿",acE:"∾̳",Acirc:"Â",acirc:"â",acute:"´",Acy:"А",acy:"а",AElig:"Æ",aelig:"æ",af:"⁡",Afr:"𝔄",afr:"𝔞",Agrave:"À",agrave:"à",alefsym:"ℵ",aleph:"ℵ",Alpha:"Α",alpha:"α",Amacr:"Ā",amacr:"ā",amalg:"⨿",AMP:"&",amp:"&",And:"⩓",and:"∧",andand:"⩕",andd:"⩜",andslope:"⩘",andv:"⩚",ang:"∠",ange:"⦤",angle:"∠",angmsd:"∡",angmsdaa:"⦨",angmsdab:"⦩",angmsdac:"⦪",angmsdad:"⦫",angmsdae:"⦬",angmsdaf:"⦭",angmsdag:"⦮",angmsdah:"⦯",angrt:"∟",angrtvb:"⊾",angrtvbd:"⦝",angsph:"∢",angst:"Å",angzarr:"⍼",Aogon:"Ą",aogon:"ą",Aopf:"𝔸",aopf:"𝕒",ap:"≈",apacir:"⩯",apE:"⩰",ape:"≊",apid:"≋",apos:"'",ApplyFunction:"⁡",approx:"≈",approxeq:"≊",Aring:"Å",aring:"å",Ascr:"𝒜",ascr:"𝒶",Assign:"≔",ast:"*",asymp:"≈",asympeq:"≍",Atilde:"Ã",atilde:"ã",Auml:"Ä",auml:"ä",awconint:"∳",awint:"⨑",backcong:"≌",backepsilon:"϶",backprime:"‵",backsim:"∽",backsimeq:"⋍",Backslash:"∖",Barv:"⫧",barvee:"⊽",Barwed:"⌆",barwed:"⌅",barwedge:"⌅",bbrk:"⎵",bbrktbrk:"⎶",bcong:"≌",Bcy:"Б",bcy:"б",bdquo:"„",becaus:"∵",Because:"∵",because:"∵",bemptyv:"⦰",bepsi:"϶",bernou:"ℬ",Bernoullis:"ℬ",Beta:"Β",beta:"β",beth:"ℶ",between:"≬",Bfr:"𝔅",bfr:"𝔟",bigcap:"⋂",bigcirc:"◯",bigcup:"⋃",bigodot:"⨀",bigoplus:"⨁",bigotimes:"⨂",bigsqcup:"⨆",bigstar:"★",bigtriangledown:"▽",bigtriangleup:"△",biguplus:"⨄",bigvee:"⋁",bigwedge:"⋀",bkarow:"⤍",blacklozenge:"⧫",blacksquare:"▪",blacktriangle:"▴",blacktriangledown:"▾",blacktriangleleft:"◂",blacktriangleright:"▸",blank:"␣",blk12:"▒",blk14:"░",blk34:"▓",block:"█",bne:"=⃥",bnequiv:"≡⃥",bNot:"⫭",bnot:"⌐",Bopf:"𝔹",bopf:"𝕓",bot:"⊥",bottom:"⊥",bowtie:"⋈",boxbox:"⧉",boxDL:"╗",boxDl:"╖",boxdL:"╕",boxdl:"┐",boxDR:"╔",boxDr:"╓",boxdR:"╒",boxdr:"┌",boxH:"═",boxh:"─",boxHD:"╦",boxHd:"╤",boxhD:"╥",boxhd:"┬",boxHU:"╩",boxHu:"╧",boxhU:"╨",boxhu:"┴",boxminus:"⊟",boxplus:"⊞",boxtimes:"⊠",boxUL:"╝",boxUl:"╜",boxuL:"╛",boxul:"┘",boxUR:"╚",boxUr:"╙",boxuR:"╘",boxur:"└",boxV:"║",boxv:"│",boxVH:"╬",boxVh:"╫",boxvH:"╪",boxvh:"┼",boxVL:"╣",boxVl:"╢",boxvL:"╡",boxvl:"┤",boxVR:"╠",boxVr:"╟",boxvR:"╞",boxvr:"├",bprime:"‵",Breve:"˘",breve:"˘",brvbar:"¦",Bscr:"ℬ",bscr:"𝒷",bsemi:"⁏",bsim:"∽",bsime:"⋍",bsol:"\\",bsolb:"⧅",bsolhsub:"⟈",bull:"•",bullet:"•",bump:"≎",bumpE:"⪮",bumpe:"≏",Bumpeq:"≎",bumpeq:"≏",Cacute:"Ć",cacute:"ć",Cap:"⋒",cap:"∩",capand:"⩄",capbrcup:"⩉",capcap:"⩋",capcup:"⩇",capdot:"⩀",CapitalDifferentialD:"ⅅ",caps:"∩︀",caret:"⁁",caron:"ˇ",Cayleys:"ℭ",ccaps:"⩍",Ccaron:"Č",ccaron:"č",Ccedil:"Ç",ccedil:"ç",Ccirc:"Ĉ",ccirc:"ĉ",Cconint:"∰",ccups:"⩌",ccupssm:"⩐",Cdot:"Ċ",cdot:"ċ",cedil:"¸",Cedilla:"¸",cemptyv:"⦲",cent:"¢",CenterDot:"·",centerdot:"·",Cfr:"ℭ",cfr:"𝔠",CHcy:"Ч",chcy:"ч",check:"✓",checkmark:"✓",Chi:"Χ",chi:"χ",cir:"○",circ:"ˆ",circeq:"≗",circlearrowleft:"↺",circlearrowright:"↻",circledast:"⊛",circledcirc:"⊚",circleddash:"⊝",CircleDot:"⊙",circledR:"®",circledS:"Ⓢ",CircleMinus:"⊖",CirclePlus:"⊕",CircleTimes:"⊗",cirE:"⧃",cire:"≗",cirfnint:"⨐",cirmid:"⫯",cirscir:"⧂",ClockwiseContourIntegral:"∲",CloseCurlyDoubleQuote:"”",CloseCurlyQuote:"’",clubs:"♣",clubsuit:"♣",Colon:"∷",colon:":",Colone:"⩴",colone:"≔",coloneq:"≔",comma:",",commat:"@",comp:"∁",compfn:"∘",complement:"∁",complexes:"ℂ",cong:"≅",congdot:"⩭",Congruent:"≡",Conint:"∯",conint:"∮",ContourIntegral:"∮",Copf:"ℂ",copf:"𝕔",coprod:"∐",Coproduct:"∐",COPY:"©",copy:"©",copysr:"℗",CounterClockwiseContourIntegral:"∳",crarr:"↵",Cross:"⨯",cross:"✗",Cscr:"𝒞",cscr:"𝒸",csub:"⫏",csube:"⫑",csup:"⫐",csupe:"⫒",ctdot:"⋯",cudarrl:"⤸",cudarrr:"⤵",cuepr:"⋞",cuesc:"⋟",cularr:"↶",cularrp:"⤽",Cup:"⋓",cup:"∪",cupbrcap:"⩈",CupCap:"≍",cupcap:"⩆",cupcup:"⩊",cupdot:"⊍",cupor:"⩅",cups:"∪︀",curarr:"↷",curarrm:"⤼",curlyeqprec:"⋞",curlyeqsucc:"⋟",curlyvee:"⋎",curlywedge:"⋏",curren:"¤",curvearrowleft:"↶",curvearrowright:"↷",cuvee:"⋎",cuwed:"⋏",cwconint:"∲",cwint:"∱",cylcty:"⌭",Dagger:"‡",dagger:"†",daleth:"ℸ",Darr:"↡",dArr:"⇓",darr:"↓",dash:"‐",Dashv:"⫤",dashv:"⊣",dbkarow:"⤏",dblac:"˝",Dcaron:"Ď",dcaron:"ď",Dcy:"Д",dcy:"д",DD:"ⅅ",dd:"ⅆ",ddagger:"‡",ddarr:"⇊",DDotrahd:"⤑",ddotseq:"⩷",deg:"°",Del:"∇",Delta:"Δ",delta:"δ",demptyv:"⦱",dfisht:"⥿",Dfr:"𝔇",dfr:"𝔡",dHar:"⥥",dharl:"⇃",dharr:"⇂",DiacriticalAcute:"´",DiacriticalDot:"˙",DiacriticalDoubleAcute:"˝",DiacriticalGrave:"`",DiacriticalTilde:"˜",diam:"⋄",Diamond:"⋄",diamond:"⋄",diamondsuit:"♦",diams:"♦",die:"¨",DifferentialD:"ⅆ",digamma:"ϝ",disin:"⋲",div:"÷",divide:"÷",divideontimes:"⋇",divonx:"⋇",DJcy:"Ђ",djcy:"ђ",dlcorn:"⌞",dlcrop:"⌍",dollar:"$",Dopf:"𝔻",dopf:"𝕕",Dot:"¨",dot:"˙",DotDot:"⃜",doteq:"≐",doteqdot:"≑",DotEqual:"≐",dotminus:"∸",dotplus:"∔",dotsquare:"⊡",doublebarwedge:"⌆",DoubleContourIntegral:"∯",DoubleDot:"¨",DoubleDownArrow:"⇓",DoubleLeftArrow:"⇐",DoubleLeftRightArrow:"⇔",DoubleLeftTee:"⫤",DoubleLongLeftArrow:"⟸",DoubleLongLeftRightArrow:"⟺",DoubleLongRightArrow:"⟹",DoubleRightArrow:"⇒",DoubleRightTee:"⊨",DoubleUpArrow:"⇑",DoubleUpDownArrow:"⇕",DoubleVerticalBar:"∥",DownArrow:"↓",Downarrow:"⇓",downarrow:"↓",DownArrowBar:"⤓",DownArrowUpArrow:"⇵",DownBreve:"̑",downdownarrows:"⇊",downharpoonleft:"⇃",downharpoonright:"⇂",DownLeftRightVector:"⥐",DownLeftTeeVector:"⥞",DownLeftVector:"↽",DownLeftVectorBar:"⥖",DownRightTeeVector:"⥟",DownRightVector:"⇁",DownRightVectorBar:"⥗",DownTee:"⊤",DownTeeArrow:"↧",drbkarow:"⤐",drcorn:"⌟",drcrop:"⌌",Dscr:"𝒟",dscr:"𝒹",DScy:"Ѕ",dscy:"ѕ",dsol:"⧶",Dstrok:"Đ",dstrok:"đ",dtdot:"⋱",dtri:"▿",dtrif:"▾",duarr:"⇵",duhar:"⥯",dwangle:"⦦",DZcy:"Џ",dzcy:"џ",dzigrarr:"⟿",Eacute:"É",eacute:"é",easter:"⩮",Ecaron:"Ě",ecaron:"ě",ecir:"≖",Ecirc:"Ê",ecirc:"ê",ecolon:"≕",Ecy:"Э",ecy:"э",eDDot:"⩷",Edot:"Ė",eDot:"≑",edot:"ė",ee:"ⅇ",efDot:"≒",Efr:"𝔈",efr:"𝔢",eg:"⪚",Egrave:"È",egrave:"è",egs:"⪖",egsdot:"⪘",el:"⪙",Element:"∈",elinters:"⏧",ell:"ℓ",els:"⪕",elsdot:"⪗",Emacr:"Ē",emacr:"ē",empty:"∅",emptyset:"∅",EmptySmallSquare:"◻",emptyv:"∅",EmptyVerySmallSquare:"▫",emsp:" ",emsp13:" ",emsp14:" ",ENG:"Ŋ",eng:"ŋ",ensp:" ",Eogon:"Ę",eogon:"ę",Eopf:"𝔼",eopf:"𝕖",epar:"⋕",eparsl:"⧣",eplus:"⩱",epsi:"ε",Epsilon:"Ε",epsilon:"ε",epsiv:"ϵ",eqcirc:"≖",eqcolon:"≕",eqsim:"≂",eqslantgtr:"⪖",eqslantless:"⪕",Equal:"⩵",equals:"=",EqualTilde:"≂",equest:"≟",Equilibrium:"⇌",equiv:"≡",equivDD:"⩸",eqvparsl:"⧥",erarr:"⥱",erDot:"≓",Escr:"ℰ",escr:"ℯ",esdot:"≐",Esim:"⩳",esim:"≂",Eta:"Η",eta:"η",ETH:"Ð",eth:"ð",Euml:"Ë",euml:"ë",euro:"€",excl:"!",exist:"∃",Exists:"∃",expectation:"ℰ",ExponentialE:"ⅇ",exponentiale:"ⅇ",fallingdotseq:"≒",Fcy:"Ф",fcy:"ф",female:"♀",ffilig:"ﬃ",fflig:"ﬀ",ffllig:"ﬄ",Ffr:"𝔉",ffr:"𝔣",filig:"ﬁ",FilledSmallSquare:"◼",FilledVerySmallSquare:"▪",fjlig:"fj",flat:"♭",fllig:"ﬂ",fltns:"▱",fnof:"ƒ",Fopf:"𝔽",fopf:"𝕗",ForAll:"∀",forall:"∀",fork:"⋔",forkv:"⫙",Fouriertrf:"ℱ",fpartint:"⨍",frac12:"½",frac13:"⅓",frac14:"¼",frac15:"⅕",frac16:"⅙",frac18:"⅛",frac23:"⅔",frac25:"⅖",frac34:"¾",frac35:"⅗",frac38:"⅜",frac45:"⅘",frac56:"⅚",frac58:"⅝",frac78:"⅞",frasl:"⁄",frown:"⌢",Fscr:"ℱ",fscr:"𝒻",gacute:"ǵ",Gamma:"Γ",gamma:"γ",Gammad:"Ϝ",gammad:"ϝ",gap:"⪆",Gbreve:"Ğ",gbreve:"ğ",Gcedil:"Ģ",Gcirc:"Ĝ",gcirc:"ĝ",Gcy:"Г",gcy:"г",Gdot:"Ġ",gdot:"ġ",gE:"≧",ge:"≥",gEl:"⪌",gel:"⋛",geq:"≥",geqq:"≧",geqslant:"⩾",ges:"⩾",gescc:"⪩",gesdot:"⪀",gesdoto:"⪂",gesdotol:"⪄",gesl:"⋛︀",gesles:"⪔",Gfr:"𝔊",gfr:"𝔤",Gg:"⋙",gg:"≫",ggg:"⋙",gimel:"ℷ",GJcy:"Ѓ",gjcy:"ѓ",gl:"≷",gla:"⪥",glE:"⪒",glj:"⪤",gnap:"⪊",gnapprox:"⪊",gnE:"≩",gne:"⪈",gneq:"⪈",gneqq:"≩",gnsim:"⋧",Gopf:"𝔾",gopf:"𝕘",grave:"`",GreaterEqual:"≥",GreaterEqualLess:"⋛",GreaterFullEqual:"≧",GreaterGreater:"⪢",GreaterLess:"≷",GreaterSlantEqual:"⩾",GreaterTilde:"≳",Gscr:"𝒢",gscr:"ℊ",gsim:"≳",gsime:"⪎",gsiml:"⪐",Gt:"≫",GT:">",gt:">",gtcc:"⪧",gtcir:"⩺",gtdot:"⋗",gtlPar:"⦕",gtquest:"⩼",gtrapprox:"⪆",gtrarr:"⥸",gtrdot:"⋗",gtreqless:"⋛",gtreqqless:"⪌",gtrless:"≷",gtrsim:"≳",gvertneqq:"≩︀",gvnE:"≩︀",Hacek:"ˇ",hairsp:" ",half:"½",hamilt:"ℋ",HARDcy:"Ъ",hardcy:"ъ",hArr:"⇔",harr:"↔",harrcir:"⥈",harrw:"↭",Hat:"^",hbar:"ℏ",Hcirc:"Ĥ",hcirc:"ĥ",hearts:"♥",heartsuit:"♥",hellip:"…",hercon:"⊹",Hfr:"ℌ",hfr:"𝔥",HilbertSpace:"ℋ",hksearow:"⤥",hkswarow:"⤦",hoarr:"⇿",homtht:"∻",hookleftarrow:"↩",hookrightarrow:"↪",Hopf:"ℍ",hopf:"𝕙",horbar:"―",HorizontalLine:"─",Hscr:"ℋ",hscr:"𝒽",hslash:"ℏ",Hstrok:"Ħ",hstrok:"ħ",HumpDownHump:"≎",HumpEqual:"≏",hybull:"⁃",hyphen:"‐",Iacute:"Í",iacute:"í",ic:"⁣",Icirc:"Î",icirc:"î",Icy:"И",icy:"и",Idot:"İ",IEcy:"Е",iecy:"е",iexcl:"¡",iff:"⇔",Ifr:"ℑ",ifr:"𝔦",Igrave:"Ì",igrave:"ì",ii:"ⅈ",iiiint:"⨌",iiint:"∭",iinfin:"⧜",iiota:"℩",IJlig:"Ĳ",ijlig:"ĳ",Im:"ℑ",Imacr:"Ī",imacr:"ī",image:"ℑ",ImaginaryI:"ⅈ",imagline:"ℐ",imagpart:"ℑ",imath:"ı",imof:"⊷",imped:"Ƶ",Implies:"⇒",in:"∈",incare:"℅",infin:"∞",infintie:"⧝",inodot:"ı",Int:"∬",int:"∫",intcal:"⊺",integers:"ℤ",Integral:"∫",intercal:"⊺",Intersection:"⋂",intlarhk:"⨗",intprod:"⨼",InvisibleComma:"⁣",InvisibleTimes:"⁢",IOcy:"Ё",iocy:"ё",Iogon:"Į",iogon:"į",Iopf:"𝕀",iopf:"𝕚",Iota:"Ι",iota:"ι",iprod:"⨼",iquest:"¿",Iscr:"ℐ",iscr:"𝒾",isin:"∈",isindot:"⋵",isinE:"⋹",isins:"⋴",isinsv:"⋳",isinv:"∈",it:"⁢",Itilde:"Ĩ",itilde:"ĩ",Iukcy:"І",iukcy:"і",Iuml:"Ï",iuml:"ï",Jcirc:"Ĵ",jcirc:"ĵ",Jcy:"Й",jcy:"й",Jfr:"𝔍",jfr:"𝔧",jmath:"ȷ",Jopf:"𝕁",jopf:"𝕛",Jscr:"𝒥",jscr:"𝒿",Jsercy:"Ј",jsercy:"ј",Jukcy:"Є",jukcy:"є",Kappa:"Κ",kappa:"κ",kappav:"ϰ",Kcedil:"Ķ",kcedil:"ķ",Kcy:"К",kcy:"к",Kfr:"𝔎",kfr:"𝔨",kgreen:"ĸ",KHcy:"Х",khcy:"х",KJcy:"Ќ",kjcy:"ќ",Kopf:"𝕂",kopf:"𝕜",Kscr:"𝒦",kscr:"𝓀",lAarr:"⇚",Lacute:"Ĺ",lacute:"ĺ",laemptyv:"⦴",lagran:"ℒ",Lambda:"Λ",lambda:"λ",Lang:"⟪",lang:"⟨",langd:"⦑",langle:"⟨",lap:"⪅",Laplacetrf:"ℒ",laquo:"«",Larr:"↞",lArr:"⇐",larr:"←",larrb:"⇤",larrbfs:"⤟",larrfs:"⤝",larrhk:"↩",larrlp:"↫",larrpl:"⤹",larrsim:"⥳",larrtl:"↢",lat:"⪫",lAtail:"⤛",latail:"⤙",late:"⪭",lates:"⪭︀",lBarr:"⤎",lbarr:"⤌",lbbrk:"❲",lbrace:"{",lbrack:"[",lbrke:"⦋",lbrksld:"⦏",lbrkslu:"⦍",Lcaron:"Ľ",lcaron:"ľ",Lcedil:"Ļ",lcedil:"ļ",lceil:"⌈",lcub:"{",Lcy:"Л",lcy:"л",ldca:"⤶",ldquo:"“",ldquor:"„",ldrdhar:"⥧",ldrushar:"⥋",ldsh:"↲",lE:"≦",le:"≤",LeftAngleBracket:"⟨",LeftArrow:"←",Leftarrow:"⇐",leftarrow:"←",LeftArrowBar:"⇤",LeftArrowRightArrow:"⇆",leftarrowtail:"↢",LeftCeiling:"⌈",LeftDoubleBracket:"⟦",LeftDownTeeVector:"⥡",LeftDownVector:"⇃",LeftDownVectorBar:"⥙",LeftFloor:"⌊",leftharpoondown:"↽",leftharpoonup:"↼",leftleftarrows:"⇇",LeftRightArrow:"↔",Leftrightarrow:"⇔",leftrightarrow:"↔",leftrightarrows:"⇆",leftrightharpoons:"⇋",leftrightsquigarrow:"↭",LeftRightVector:"⥎",LeftTee:"⊣",LeftTeeArrow:"↤",LeftTeeVector:"⥚",leftthreetimes:"⋋",LeftTriangle:"⊲",LeftTriangleBar:"⧏",LeftTriangleEqual:"⊴",LeftUpDownVector:"⥑",LeftUpTeeVector:"⥠",LeftUpVector:"↿",LeftUpVectorBar:"⥘",LeftVector:"↼",LeftVectorBar:"⥒",lEg:"⪋",leg:"⋚",leq:"≤",leqq:"≦",leqslant:"⩽",les:"⩽",lescc:"⪨",lesdot:"⩿",lesdoto:"⪁",lesdotor:"⪃",lesg:"⋚︀",lesges:"⪓",lessapprox:"⪅",lessdot:"⋖",lesseqgtr:"⋚",lesseqqgtr:"⪋",LessEqualGreater:"⋚",LessFullEqual:"≦",LessGreater:"≶",lessgtr:"≶",LessLess:"⪡",lesssim:"≲",LessSlantEqual:"⩽",LessTilde:"≲",lfisht:"⥼",lfloor:"⌊",Lfr:"𝔏",lfr:"𝔩",lg:"≶",lgE:"⪑",lHar:"⥢",lhard:"↽",lharu:"↼",lharul:"⥪",lhblk:"▄",LJcy:"Љ",ljcy:"љ",Ll:"⋘",ll:"≪",llarr:"⇇",llcorner:"⌞",Lleftarrow:"⇚",llhard:"⥫",lltri:"◺",Lmidot:"Ŀ",lmidot:"ŀ",lmoust:"⎰",lmoustache:"⎰",lnap:"⪉",lnapprox:"⪉",lnE:"≨",lne:"⪇",lneq:"⪇",lneqq:"≨",lnsim:"⋦",loang:"⟬",loarr:"⇽",lobrk:"⟦",LongLeftArrow:"⟵",Longleftarrow:"⟸",longleftarrow:"⟵",LongLeftRightArrow:"⟷",Longleftrightarrow:"⟺",longleftrightarrow:"⟷",longmapsto:"⟼",LongRightArrow:"⟶",Longrightarrow:"⟹",longrightarrow:"⟶",looparrowleft:"↫",looparrowright:"↬",lopar:"⦅",Lopf:"𝕃",lopf:"𝕝",loplus:"⨭",lotimes:"⨴",lowast:"∗",lowbar:"_",LowerLeftArrow:"↙",LowerRightArrow:"↘",loz:"◊",lozenge:"◊",lozf:"⧫",lpar:"(",lparlt:"⦓",lrarr:"⇆",lrcorner:"⌟",lrhar:"⇋",lrhard:"⥭",lrm:"‎",lrtri:"⊿",lsaquo:"‹",Lscr:"ℒ",lscr:"𝓁",Lsh:"↰",lsh:"↰",lsim:"≲",lsime:"⪍",lsimg:"⪏",lsqb:"[",lsquo:"‘",lsquor:"‚",Lstrok:"Ł",lstrok:"ł",Lt:"≪",LT:"<",lt:"<",ltcc:"⪦",ltcir:"⩹",ltdot:"⋖",lthree:"⋋",ltimes:"⋉",ltlarr:"⥶",ltquest:"⩻",ltri:"◃",ltrie:"⊴",ltrif:"◂",ltrPar:"⦖",lurdshar:"⥊",luruhar:"⥦",lvertneqq:"≨︀",lvnE:"≨︀",macr:"¯",male:"♂",malt:"✠",maltese:"✠",Map:"⤅",map:"↦",mapsto:"↦",mapstodown:"↧",mapstoleft:"↤",mapstoup:"↥",marker:"▮",mcomma:"⨩",Mcy:"М",mcy:"м",mdash:"—",mDDot:"∺",measuredangle:"∡",MediumSpace:" ",Mellintrf:"ℳ",Mfr:"𝔐",mfr:"𝔪",mho:"℧",micro:"µ",mid:"∣",midast:"*",midcir:"⫰",middot:"·",minus:"−",minusb:"⊟",minusd:"∸",minusdu:"⨪",MinusPlus:"∓",mlcp:"⫛",mldr:"…",mnplus:"∓",models:"⊧",Mopf:"𝕄",mopf:"𝕞",mp:"∓",Mscr:"ℳ",mscr:"𝓂",mstpos:"∾",Mu:"Μ",mu:"μ",multimap:"⊸",mumap:"⊸",nabla:"∇",Nacute:"Ń",nacute:"ń",nang:"∠⃒",nap:"≉",napE:"⩰̸",napid:"≋̸",napos:"ŉ",napprox:"≉",natur:"♮",natural:"♮",naturals:"ℕ",nbsp:" ",nbump:"≎̸",nbumpe:"≏̸",ncap:"⩃",Ncaron:"Ň",ncaron:"ň",Ncedil:"Ņ",ncedil:"ņ",ncong:"≇",ncongdot:"⩭̸",ncup:"⩂",Ncy:"Н",ncy:"н",ndash:"–",ne:"≠",nearhk:"⤤",neArr:"⇗",nearr:"↗",nearrow:"↗",nedot:"≐̸",NegativeMediumSpace:"​",NegativeThickSpace:"​",NegativeThinSpace:"​",NegativeVeryThinSpace:"​",nequiv:"≢",nesear:"⤨",nesim:"≂̸",NestedGreaterGreater:"≫",NestedLessLess:"≪",NewLine:`
`,nexist:"∄",nexists:"∄",Nfr:"𝔑",nfr:"𝔫",ngE:"≧̸",nge:"≱",ngeq:"≱",ngeqq:"≧̸",ngeqslant:"⩾̸",nges:"⩾̸",nGg:"⋙̸",ngsim:"≵",nGt:"≫⃒",ngt:"≯",ngtr:"≯",nGtv:"≫̸",nhArr:"⇎",nharr:"↮",nhpar:"⫲",ni:"∋",nis:"⋼",nisd:"⋺",niv:"∋",NJcy:"Њ",njcy:"њ",nlArr:"⇍",nlarr:"↚",nldr:"‥",nlE:"≦̸",nle:"≰",nLeftarrow:"⇍",nleftarrow:"↚",nLeftrightarrow:"⇎",nleftrightarrow:"↮",nleq:"≰",nleqq:"≦̸",nleqslant:"⩽̸",nles:"⩽̸",nless:"≮",nLl:"⋘̸",nlsim:"≴",nLt:"≪⃒",nlt:"≮",nltri:"⋪",nltrie:"⋬",nLtv:"≪̸",nmid:"∤",NoBreak:"⁠",NonBreakingSpace:" ",Nopf:"ℕ",nopf:"𝕟",Not:"⫬",not:"¬",NotCongruent:"≢",NotCupCap:"≭",NotDoubleVerticalBar:"∦",NotElement:"∉",NotEqual:"≠",NotEqualTilde:"≂̸",NotExists:"∄",NotGreater:"≯",NotGreaterEqual:"≱",NotGreaterFullEqual:"≧̸",NotGreaterGreater:"≫̸",NotGreaterLess:"≹",NotGreaterSlantEqual:"⩾̸",NotGreaterTilde:"≵",NotHumpDownHump:"≎̸",NotHumpEqual:"≏̸",notin:"∉",notindot:"⋵̸",notinE:"⋹̸",notinva:"∉",notinvb:"⋷",notinvc:"⋶",NotLeftTriangle:"⋪",NotLeftTriangleBar:"⧏̸",NotLeftTriangleEqual:"⋬",NotLess:"≮",NotLessEqual:"≰",NotLessGreater:"≸",NotLessLess:"≪̸",NotLessSlantEqual:"⩽̸",NotLessTilde:"≴",NotNestedGreaterGreater:"⪢̸",NotNestedLessLess:"⪡̸",notni:"∌",notniva:"∌",notnivb:"⋾",notnivc:"⋽",NotPrecedes:"⊀",NotPrecedesEqual:"⪯̸",NotPrecedesSlantEqual:"⋠",NotReverseElement:"∌",NotRightTriangle:"⋫",NotRightTriangleBar:"⧐̸",NotRightTriangleEqual:"⋭",NotSquareSubset:"⊏̸",NotSquareSubsetEqual:"⋢",NotSquareSuperset:"⊐̸",NotSquareSupersetEqual:"⋣",NotSubset:"⊂⃒",NotSubsetEqual:"⊈",NotSucceeds:"⊁",NotSucceedsEqual:"⪰̸",NotSucceedsSlantEqual:"⋡",NotSucceedsTilde:"≿̸",NotSuperset:"⊃⃒",NotSupersetEqual:"⊉",NotTilde:"≁",NotTildeEqual:"≄",NotTildeFullEqual:"≇",NotTildeTilde:"≉",NotVerticalBar:"∤",npar:"∦",nparallel:"∦",nparsl:"⫽⃥",npart:"∂̸",npolint:"⨔",npr:"⊀",nprcue:"⋠",npre:"⪯̸",nprec:"⊀",npreceq:"⪯̸",nrArr:"⇏",nrarr:"↛",nrarrc:"⤳̸",nrarrw:"↝̸",nRightarrow:"⇏",nrightarrow:"↛",nrtri:"⋫",nrtrie:"⋭",nsc:"⊁",nsccue:"⋡",nsce:"⪰̸",Nscr:"𝒩",nscr:"𝓃",nshortmid:"∤",nshortparallel:"∦",nsim:"≁",nsime:"≄",nsimeq:"≄",nsmid:"∤",nspar:"∦",nsqsube:"⋢",nsqsupe:"⋣",nsub:"⊄",nsubE:"⫅̸",nsube:"⊈",nsubset:"⊂⃒",nsubseteq:"⊈",nsubseteqq:"⫅̸",nsucc:"⊁",nsucceq:"⪰̸",nsup:"⊅",nsupE:"⫆̸",nsupe:"⊉",nsupset:"⊃⃒",nsupseteq:"⊉",nsupseteqq:"⫆̸",ntgl:"≹",Ntilde:"Ñ",ntilde:"ñ",ntlg:"≸",ntriangleleft:"⋪",ntrianglelefteq:"⋬",ntriangleright:"⋫",ntrianglerighteq:"⋭",Nu:"Ν",nu:"ν",num:"#",numero:"№",numsp:" ",nvap:"≍⃒",nVDash:"⊯",nVdash:"⊮",nvDash:"⊭",nvdash:"⊬",nvge:"≥⃒",nvgt:">⃒",nvHarr:"⤄",nvinfin:"⧞",nvlArr:"⤂",nvle:"≤⃒",nvlt:"<⃒",nvltrie:"⊴⃒",nvrArr:"⤃",nvrtrie:"⊵⃒",nvsim:"∼⃒",nwarhk:"⤣",nwArr:"⇖",nwarr:"↖",nwarrow:"↖",nwnear:"⤧",Oacute:"Ó",oacute:"ó",oast:"⊛",ocir:"⊚",Ocirc:"Ô",ocirc:"ô",Ocy:"О",ocy:"о",odash:"⊝",Odblac:"Ő",odblac:"ő",odiv:"⨸",odot:"⊙",odsold:"⦼",OElig:"Œ",oelig:"œ",ofcir:"⦿",Ofr:"𝔒",ofr:"𝔬",ogon:"˛",Ograve:"Ò",ograve:"ò",ogt:"⧁",ohbar:"⦵",ohm:"Ω",oint:"∮",olarr:"↺",olcir:"⦾",olcross:"⦻",oline:"‾",olt:"⧀",Omacr:"Ō",omacr:"ō",Omega:"Ω",omega:"ω",Omicron:"Ο",omicron:"ο",omid:"⦶",ominus:"⊖",Oopf:"𝕆",oopf:"𝕠",opar:"⦷",OpenCurlyDoubleQuote:"“",OpenCurlyQuote:"‘",operp:"⦹",oplus:"⊕",Or:"⩔",or:"∨",orarr:"↻",ord:"⩝",order:"ℴ",orderof:"ℴ",ordf:"ª",ordm:"º",origof:"⊶",oror:"⩖",orslope:"⩗",orv:"⩛",oS:"Ⓢ",Oscr:"𝒪",oscr:"ℴ",Oslash:"Ø",oslash:"ø",osol:"⊘",Otilde:"Õ",otilde:"õ",Otimes:"⨷",otimes:"⊗",otimesas:"⨶",Ouml:"Ö",ouml:"ö",ovbar:"⌽",OverBar:"‾",OverBrace:"⏞",OverBracket:"⎴",OverParenthesis:"⏜",par:"∥",para:"¶",parallel:"∥",parsim:"⫳",parsl:"⫽",part:"∂",PartialD:"∂",Pcy:"П",pcy:"п",percnt:"%",period:".",permil:"‰",perp:"⊥",pertenk:"‱",Pfr:"𝔓",pfr:"𝔭",Phi:"Φ",phi:"φ",phiv:"ϕ",phmmat:"ℳ",phone:"☎",Pi:"Π",pi:"π",pitchfork:"⋔",piv:"ϖ",planck:"ℏ",planckh:"ℎ",plankv:"ℏ",plus:"+",plusacir:"⨣",plusb:"⊞",pluscir:"⨢",plusdo:"∔",plusdu:"⨥",pluse:"⩲",PlusMinus:"±",plusmn:"±",plussim:"⨦",plustwo:"⨧",pm:"±",Poincareplane:"ℌ",pointint:"⨕",Popf:"ℙ",popf:"𝕡",pound:"£",Pr:"⪻",pr:"≺",prap:"⪷",prcue:"≼",prE:"⪳",pre:"⪯",prec:"≺",precapprox:"⪷",preccurlyeq:"≼",Precedes:"≺",PrecedesEqual:"⪯",PrecedesSlantEqual:"≼",PrecedesTilde:"≾",preceq:"⪯",precnapprox:"⪹",precneqq:"⪵",precnsim:"⋨",precsim:"≾",Prime:"″",prime:"′",primes:"ℙ",prnap:"⪹",prnE:"⪵",prnsim:"⋨",prod:"∏",Product:"∏",profalar:"⌮",profline:"⌒",profsurf:"⌓",prop:"∝",Proportion:"∷",Proportional:"∝",propto:"∝",prsim:"≾",prurel:"⊰",Pscr:"𝒫",pscr:"𝓅",Psi:"Ψ",psi:"ψ",puncsp:" ",Qfr:"𝔔",qfr:"𝔮",qint:"⨌",Qopf:"ℚ",qopf:"𝕢",qprime:"⁗",Qscr:"𝒬",qscr:"𝓆",quaternions:"ℍ",quatint:"⨖",quest:"?",questeq:"≟",QUOT:'"',quot:'"',rAarr:"⇛",race:"∽̱",Racute:"Ŕ",racute:"ŕ",radic:"√",raemptyv:"⦳",Rang:"⟫",rang:"⟩",rangd:"⦒",range:"⦥",rangle:"⟩",raquo:"»",Rarr:"↠",rArr:"⇒",rarr:"→",rarrap:"⥵",rarrb:"⇥",rarrbfs:"⤠",rarrc:"⤳",rarrfs:"⤞",rarrhk:"↪",rarrlp:"↬",rarrpl:"⥅",rarrsim:"⥴",Rarrtl:"⤖",rarrtl:"↣",rarrw:"↝",rAtail:"⤜",ratail:"⤚",ratio:"∶",rationals:"ℚ",RBarr:"⤐",rBarr:"⤏",rbarr:"⤍",rbbrk:"❳",rbrace:"}",rbrack:"]",rbrke:"⦌",rbrksld:"⦎",rbrkslu:"⦐",Rcaron:"Ř",rcaron:"ř",Rcedil:"Ŗ",rcedil:"ŗ",rceil:"⌉",rcub:"}",Rcy:"Р",rcy:"р",rdca:"⤷",rdldhar:"⥩",rdquo:"”",rdquor:"”",rdsh:"↳",Re:"ℜ",real:"ℜ",realine:"ℛ",realpart:"ℜ",reals:"ℝ",rect:"▭",REG:"®",reg:"®",ReverseElement:"∋",ReverseEquilibrium:"⇋",ReverseUpEquilibrium:"⥯",rfisht:"⥽",rfloor:"⌋",Rfr:"ℜ",rfr:"𝔯",rHar:"⥤",rhard:"⇁",rharu:"⇀",rharul:"⥬",Rho:"Ρ",rho:"ρ",rhov:"ϱ",RightAngleBracket:"⟩",RightArrow:"→",Rightarrow:"⇒",rightarrow:"→",RightArrowBar:"⇥",RightArrowLeftArrow:"⇄",rightarrowtail:"↣",RightCeiling:"⌉",RightDoubleBracket:"⟧",RightDownTeeVector:"⥝",RightDownVector:"⇂",RightDownVectorBar:"⥕",RightFloor:"⌋",rightharpoondown:"⇁",rightharpoonup:"⇀",rightleftarrows:"⇄",rightleftharpoons:"⇌",rightrightarrows:"⇉",rightsquigarrow:"↝",RightTee:"⊢",RightTeeArrow:"↦",RightTeeVector:"⥛",rightthreetimes:"⋌",RightTriangle:"⊳",RightTriangleBar:"⧐",RightTriangleEqual:"⊵",RightUpDownVector:"⥏",RightUpTeeVector:"⥜",RightUpVector:"↾",RightUpVectorBar:"⥔",RightVector:"⇀",RightVectorBar:"⥓",ring:"˚",risingdotseq:"≓",rlarr:"⇄",rlhar:"⇌",rlm:"‏",rmoust:"⎱",rmoustache:"⎱",rnmid:"⫮",roang:"⟭",roarr:"⇾",robrk:"⟧",ropar:"⦆",Ropf:"ℝ",ropf:"𝕣",roplus:"⨮",rotimes:"⨵",RoundImplies:"⥰",rpar:")",rpargt:"⦔",rppolint:"⨒",rrarr:"⇉",Rrightarrow:"⇛",rsaquo:"›",Rscr:"ℛ",rscr:"𝓇",Rsh:"↱",rsh:"↱",rsqb:"]",rsquo:"’",rsquor:"’",rthree:"⋌",rtimes:"⋊",rtri:"▹",rtrie:"⊵",rtrif:"▸",rtriltri:"⧎",RuleDelayed:"⧴",ruluhar:"⥨",rx:"℞",Sacute:"Ś",sacute:"ś",sbquo:"‚",Sc:"⪼",sc:"≻",scap:"⪸",Scaron:"Š",scaron:"š",sccue:"≽",scE:"⪴",sce:"⪰",Scedil:"Ş",scedil:"ş",Scirc:"Ŝ",scirc:"ŝ",scnap:"⪺",scnE:"⪶",scnsim:"⋩",scpolint:"⨓",scsim:"≿",Scy:"С",scy:"с",sdot:"⋅",sdotb:"⊡",sdote:"⩦",searhk:"⤥",seArr:"⇘",searr:"↘",searrow:"↘",sect:"§",semi:";",seswar:"⤩",setminus:"∖",setmn:"∖",sext:"✶",Sfr:"𝔖",sfr:"𝔰",sfrown:"⌢",sharp:"♯",SHCHcy:"Щ",shchcy:"щ",SHcy:"Ш",shcy:"ш",ShortDownArrow:"↓",ShortLeftArrow:"←",shortmid:"∣",shortparallel:"∥",ShortRightArrow:"→",ShortUpArrow:"↑",shy:"­",Sigma:"Σ",sigma:"σ",sigmaf:"ς",sigmav:"ς",sim:"∼",simdot:"⩪",sime:"≃",simeq:"≃",simg:"⪞",simgE:"⪠",siml:"⪝",simlE:"⪟",simne:"≆",simplus:"⨤",simrarr:"⥲",slarr:"←",SmallCircle:"∘",smallsetminus:"∖",smashp:"⨳",smeparsl:"⧤",smid:"∣",smile:"⌣",smt:"⪪",smte:"⪬",smtes:"⪬︀",SOFTcy:"Ь",softcy:"ь",sol:"/",solb:"⧄",solbar:"⌿",Sopf:"𝕊",sopf:"𝕤",spades:"♠",spadesuit:"♠",spar:"∥",sqcap:"⊓",sqcaps:"⊓︀",sqcup:"⊔",sqcups:"⊔︀",Sqrt:"√",sqsub:"⊏",sqsube:"⊑",sqsubset:"⊏",sqsubseteq:"⊑",sqsup:"⊐",sqsupe:"⊒",sqsupset:"⊐",sqsupseteq:"⊒",squ:"□",Square:"□",square:"□",SquareIntersection:"⊓",SquareSubset:"⊏",SquareSubsetEqual:"⊑",SquareSuperset:"⊐",SquareSupersetEqual:"⊒",SquareUnion:"⊔",squarf:"▪",squf:"▪",srarr:"→",Sscr:"𝒮",sscr:"𝓈",ssetmn:"∖",ssmile:"⌣",sstarf:"⋆",Star:"⋆",star:"☆",starf:"★",straightepsilon:"ϵ",straightphi:"ϕ",strns:"¯",Sub:"⋐",sub:"⊂",subdot:"⪽",subE:"⫅",sube:"⊆",subedot:"⫃",submult:"⫁",subnE:"⫋",subne:"⊊",subplus:"⪿",subrarr:"⥹",Subset:"⋐",subset:"⊂",subseteq:"⊆",subseteqq:"⫅",SubsetEqual:"⊆",subsetneq:"⊊",subsetneqq:"⫋",subsim:"⫇",subsub:"⫕",subsup:"⫓",succ:"≻",succapprox:"⪸",succcurlyeq:"≽",Succeeds:"≻",SucceedsEqual:"⪰",SucceedsSlantEqual:"≽",SucceedsTilde:"≿",succeq:"⪰",succnapprox:"⪺",succneqq:"⪶",succnsim:"⋩",succsim:"≿",SuchThat:"∋",Sum:"∑",sum:"∑",sung:"♪",Sup:"⋑",sup:"⊃",sup1:"¹",sup2:"²",sup3:"³",supdot:"⪾",supdsub:"⫘",supE:"⫆",supe:"⊇",supedot:"⫄",Superset:"⊃",SupersetEqual:"⊇",suphsol:"⟉",suphsub:"⫗",suplarr:"⥻",supmult:"⫂",supnE:"⫌",supne:"⊋",supplus:"⫀",Supset:"⋑",supset:"⊃",supseteq:"⊇",supseteqq:"⫆",supsetneq:"⊋",supsetneqq:"⫌",supsim:"⫈",supsub:"⫔",supsup:"⫖",swarhk:"⤦",swArr:"⇙",swarr:"↙",swarrow:"↙",swnwar:"⤪",szlig:"ß",Tab:"	",target:"⌖",Tau:"Τ",tau:"τ",tbrk:"⎴",Tcaron:"Ť",tcaron:"ť",Tcedil:"Ţ",tcedil:"ţ",Tcy:"Т",tcy:"т",tdot:"⃛",telrec:"⌕",Tfr:"𝔗",tfr:"𝔱",there4:"∴",Therefore:"∴",therefore:"∴",Theta:"Θ",theta:"θ",thetasym:"ϑ",thetav:"ϑ",thickapprox:"≈",thicksim:"∼",ThickSpace:"  ",thinsp:" ",ThinSpace:" ",thkap:"≈",thksim:"∼",THORN:"Þ",thorn:"þ",Tilde:"∼",tilde:"˜",TildeEqual:"≃",TildeFullEqual:"≅",TildeTilde:"≈",times:"×",timesb:"⊠",timesbar:"⨱",timesd:"⨰",tint:"∭",toea:"⤨",top:"⊤",topbot:"⌶",topcir:"⫱",Topf:"𝕋",topf:"𝕥",topfork:"⫚",tosa:"⤩",tprime:"‴",TRADE:"™",trade:"™",triangle:"▵",triangledown:"▿",triangleleft:"◃",trianglelefteq:"⊴",triangleq:"≜",triangleright:"▹",trianglerighteq:"⊵",tridot:"◬",trie:"≜",triminus:"⨺",TripleDot:"⃛",triplus:"⨹",trisb:"⧍",tritime:"⨻",trpezium:"⏢",Tscr:"𝒯",tscr:"𝓉",TScy:"Ц",tscy:"ц",TSHcy:"Ћ",tshcy:"ћ",Tstrok:"Ŧ",tstrok:"ŧ",twixt:"≬",twoheadleftarrow:"↞",twoheadrightarrow:"↠",Uacute:"Ú",uacute:"ú",Uarr:"↟",uArr:"⇑",uarr:"↑",Uarrocir:"⥉",Ubrcy:"Ў",ubrcy:"ў",Ubreve:"Ŭ",ubreve:"ŭ",Ucirc:"Û",ucirc:"û",Ucy:"У",ucy:"у",udarr:"⇅",Udblac:"Ű",udblac:"ű",udhar:"⥮",ufisht:"⥾",Ufr:"𝔘",ufr:"𝔲",Ugrave:"Ù",ugrave:"ù",uHar:"⥣",uharl:"↿",uharr:"↾",uhblk:"▀",ulcorn:"⌜",ulcorner:"⌜",ulcrop:"⌏",ultri:"◸",Umacr:"Ū",umacr:"ū",uml:"¨",UnderBar:"_",UnderBrace:"⏟",UnderBracket:"⎵",UnderParenthesis:"⏝",Union:"⋃",UnionPlus:"⊎",Uogon:"Ų",uogon:"ų",Uopf:"𝕌",uopf:"𝕦",UpArrow:"↑",Uparrow:"⇑",uparrow:"↑",UpArrowBar:"⤒",UpArrowDownArrow:"⇅",UpDownArrow:"↕",Updownarrow:"⇕",updownarrow:"↕",UpEquilibrium:"⥮",upharpoonleft:"↿",upharpoonright:"↾",uplus:"⊎",UpperLeftArrow:"↖",UpperRightArrow:"↗",Upsi:"ϒ",upsi:"υ",upsih:"ϒ",Upsilon:"Υ",upsilon:"υ",UpTee:"⊥",UpTeeArrow:"↥",upuparrows:"⇈",urcorn:"⌝",urcorner:"⌝",urcrop:"⌎",Uring:"Ů",uring:"ů",urtri:"◹",Uscr:"𝒰",uscr:"𝓊",utdot:"⋰",Utilde:"Ũ",utilde:"ũ",utri:"▵",utrif:"▴",uuarr:"⇈",Uuml:"Ü",uuml:"ü",uwangle:"⦧",vangrt:"⦜",varepsilon:"ϵ",varkappa:"ϰ",varnothing:"∅",varphi:"ϕ",varpi:"ϖ",varpropto:"∝",vArr:"⇕",varr:"↕",varrho:"ϱ",varsigma:"ς",varsubsetneq:"⊊︀",varsubsetneqq:"⫋︀",varsupsetneq:"⊋︀",varsupsetneqq:"⫌︀",vartheta:"ϑ",vartriangleleft:"⊲",vartriangleright:"⊳",Vbar:"⫫",vBar:"⫨",vBarv:"⫩",Vcy:"В",vcy:"в",VDash:"⊫",Vdash:"⊩",vDash:"⊨",vdash:"⊢",Vdashl:"⫦",Vee:"⋁",vee:"∨",veebar:"⊻",veeeq:"≚",vellip:"⋮",Verbar:"‖",verbar:"|",Vert:"‖",vert:"|",VerticalBar:"∣",VerticalLine:"|",VerticalSeparator:"❘",VerticalTilde:"≀",VeryThinSpace:" ",Vfr:"𝔙",vfr:"𝔳",vltri:"⊲",vnsub:"⊂⃒",vnsup:"⊃⃒",Vopf:"𝕍",vopf:"𝕧",vprop:"∝",vrtri:"⊳",Vscr:"𝒱",vscr:"𝓋",vsubnE:"⫋︀",vsubne:"⊊︀",vsupnE:"⫌︀",vsupne:"⊋︀",Vvdash:"⊪",vzigzag:"⦚",Wcirc:"Ŵ",wcirc:"ŵ",wedbar:"⩟",Wedge:"⋀",wedge:"∧",wedgeq:"≙",weierp:"℘",Wfr:"𝔚",wfr:"𝔴",Wopf:"𝕎",wopf:"𝕨",wp:"℘",wr:"≀",wreath:"≀",Wscr:"𝒲",wscr:"𝓌",xcap:"⋂",xcirc:"◯",xcup:"⋃",xdtri:"▽",Xfr:"𝔛",xfr:"𝔵",xhArr:"⟺",xharr:"⟷",Xi:"Ξ",xi:"ξ",xlArr:"⟸",xlarr:"⟵",xmap:"⟼",xnis:"⋻",xodot:"⨀",Xopf:"𝕏",xopf:"𝕩",xoplus:"⨁",xotime:"⨂",xrArr:"⟹",xrarr:"⟶",Xscr:"𝒳",xscr:"𝓍",xsqcup:"⨆",xuplus:"⨄",xutri:"△",xvee:"⋁",xwedge:"⋀",Yacute:"Ý",yacute:"ý",YAcy:"Я",yacy:"я",Ycirc:"Ŷ",ycirc:"ŷ",Ycy:"Ы",ycy:"ы",yen:"¥",Yfr:"𝔜",yfr:"𝔶",YIcy:"Ї",yicy:"ї",Yopf:"𝕐",yopf:"𝕪",Yscr:"𝒴",yscr:"𝓎",YUcy:"Ю",yucy:"ю",Yuml:"Ÿ",yuml:"ÿ",Zacute:"Ź",zacute:"ź",Zcaron:"Ž",zcaron:"ž",Zcy:"З",zcy:"з",Zdot:"Ż",zdot:"ż",zeetrf:"ℨ",ZeroWidthSpace:"​",Zeta:"Ζ",zeta:"ζ",Zfr:"ℨ",zfr:"𝔷",ZHcy:"Ж",zhcy:"ж",zigrarr:"⇝",Zopf:"ℤ",zopf:"𝕫",Zscr:"𝒵",zscr:"𝓏",zwj:"‍",zwnj:"‌"}),r.entityMap=r.HTML_ENTITIES})(Xf)),Xf}var Sc={},fb;function dL(){if(fb)return Sc;fb=1;var r=Dd().NAMESPACE,e=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,t=new RegExp("[\\-\\.0-9"+e.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),i=new RegExp("^"+e.source+t.source+"*(?::"+e.source+t.source+"*)?$"),s=0,n=1,a=2,o=3,l=4,u=5,c=6,h=7;function f(P,R){this.message=P,this.locator=R,Error.captureStackTrace&&Error.captureStackTrace(this,f)}f.prototype=new Error,f.prototype.name=f.name;function m(){}m.prototype={parse:function(P,R,X){var j=this.domBuilder;j.startDocument(),T(R,R={}),S(P,R,X,j,this.errorHandler),j.endDocument()}};function S(P,R,X,j,Z){function Y(ot){if(ot>65535){ot-=65536;var lt=55296+(ot>>10),Yi=56320+(ot&1023);return String.fromCharCode(lt,Yi)}else return String.fromCharCode(ot)}function te(ot){var lt=ot.slice(1,-1);return Object.hasOwnProperty.call(X,lt)?X[lt]:lt.charAt(0)==="#"?Y(parseInt(lt.substr(1).replace("x","0x"))):(Z.error("entity not found:"+ot),ot)}function le(ot){if(ot>Me){var lt=P.substring(Me,ot).replace(/&#?\w+;/g,te);ae&&G(Me),j.characters(lt,0,ot-Me),Me=ot}}function G(ot,lt){for(;ot>=J&&(lt=ne.exec(P));)re=lt.index,J=re+lt[0].length,ae.lineNumber++;ae.columnNumber=ot-re+1}for(var re=0,J=0,ne=/.*(?:\r\n?|\n)|.*$/g,ae=j.locator,Se=[{currentNSMap:R}],we={},Me=0;;){try{var Te=P.indexOf("<",Me);if(Te<0){if(!P.substr(Me).match(/^\s*$/)){var dt=j.doc,bt=dt.createTextNode(P.substr(Me));dt.appendChild(bt),j.currentElement=bt}return}switch(Te>Me&&le(Te),P.charAt(Te+1)){case"/":var Pt=P.indexOf(">",Te+3),rt=P.substring(Te+2,Pt).replace(/[ \t\n\r]+$/g,""),At=Se.pop();Pt<0?(rt=P.substring(Te+2).replace(/[\s<].*/,""),Z.error("end tag name: "+rt+" is not complete:"+At.tagName),Pt=Te+1+rt.length):rt.match(/\s</)&&(rt=rt.replace(/[\s<].*/,""),Z.error("end tag name: "+rt+" maybe not complete"),Pt=Te+1+rt.length);var xi=At.localNSMap,Qt=At.tagName==rt,$t=Qt||At.tagName&&At.tagName.toLowerCase()==rt.toLowerCase();if($t){if(j.endElement(At.uri,At.localName,rt),xi)for(var Dr in xi)Object.prototype.hasOwnProperty.call(xi,Dr)&&j.endPrefixMapping(Dr);Qt||Z.fatalError("end tag name: "+rt+" is not match the current start tagName:"+At.tagName)}else Se.push(At);Pt++;break;case"?":ae&&G(Te),Pt=A(P,Te,j);break;case"!":ae&&G(Te),Pt=w(P,Te,j,Z);break;default:ae&&G(Te);var Bt=new I,gr=Se[Se.length-1].currentNSMap,Pt=E(P,Te,Bt,gr,te,Z),as=Bt.length;if(!Bt.closed&&b(P,Pt,Bt.tagName,we)&&(Bt.closed=!0,X.nbsp||Z.warning("unclosed xml attribute")),ae&&as){for(var ni=y(ae,{}),Kt=0;Kt<as;Kt++){var Ue=Bt[Kt];G(Ue.offset),Ue.locator=y(ae,{})}j.locator=ni,C(Bt,j,gr)&&Se.push(Bt),j.locator=ae}else C(Bt,j,gr)&&Se.push(Bt);r.isHTML(Bt.uri)&&!Bt.closed?Pt=_(P,Pt,Bt.tagName,te,j):Pt++}}catch(ot){if(ot instanceof f)throw ot;Z.error("element parse error: "+ot),Pt=-1}Pt>Me?Me=Pt:le(Math.max(Te,Me)+1)}}function y(P,R){return R.lineNumber=P.lineNumber,R.columnNumber=P.columnNumber,R}function E(P,R,X,j,Z,Y){function te(ae,Se,we){X.attributeNames.hasOwnProperty(ae)&&Y.fatalError("Attribute "+ae+" redefined"),X.addValue(ae,Se.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,Z),we)}for(var le,G,re=++R,J=s;;){var ne=P.charAt(re);switch(ne){case"=":if(J===n)le=P.slice(R,re),J=o;else if(J===a)J=o;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(J===o||J===n)if(J===n&&(Y.warning('attribute value must after "="'),le=P.slice(R,re)),R=re+1,re=P.indexOf(ne,R),re>0)G=P.slice(R,re),te(le,G,R-1),J=u;else throw new Error("attribute value no end '"+ne+"' match");else if(J==l)G=P.slice(R,re),te(le,G,R),Y.warning('attribute "'+le+'" missed start quot('+ne+")!!"),R=re+1,J=u;else throw new Error('attribute value must after "="');break;case"/":switch(J){case s:X.setTagName(P.slice(R,re));case u:case c:case h:J=h,X.closed=!0;case l:case n:break;case a:X.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return Y.error("unexpected end of input"),J==s&&X.setTagName(P.slice(R,re)),re;case">":switch(J){case s:X.setTagName(P.slice(R,re));case u:case c:case h:break;case l:case n:G=P.slice(R,re),G.slice(-1)==="/"&&(X.closed=!0,G=G.slice(0,-1));case a:J===a&&(G=le),J==l?(Y.warning('attribute "'+G+'" missed quot(")!'),te(le,G,R)):((!r.isHTML(j[""])||!G.match(/^(?:disabled|checked|selected)$/i))&&Y.warning('attribute "'+G+'" missed value!! "'+G+'" instead!!'),te(G,G,R));break;case o:throw new Error("attribute value missed!!")}return re;case"":ne=" ";default:if(ne<=" ")switch(J){case s:X.setTagName(P.slice(R,re)),J=c;break;case n:le=P.slice(R,re),J=a;break;case l:var G=P.slice(R,re);Y.warning('attribute "'+G+'" missed quot(")!!'),te(le,G,R);case u:J=c;break}else switch(J){case a:X.tagName,(!r.isHTML(j[""])||!le.match(/^(?:disabled|checked|selected)$/i))&&Y.warning('attribute "'+le+'" missed value!! "'+le+'" instead2!!'),te(le,le,R),R=re,J=n;break;case u:Y.warning('attribute space is required"'+le+'"!!');case c:J=n,R=re;break;case o:J=l,R=re;break;case h:throw new Error("elements closed character '/' and '>' must be connected to")}}re++}}function C(P,R,X){for(var j=P.tagName,Z=null,ne=P.length;ne--;){var Y=P[ne],te=Y.qName,le=Y.value,ae=te.indexOf(":");if(ae>0)var G=Y.prefix=te.slice(0,ae),re=te.slice(ae+1),J=G==="xmlns"&&re;else re=te,G=null,J=te==="xmlns"&&"";Y.localName=re,J!==!1&&(Z==null&&(Z={},T(X,X={})),X[J]=Z[J]=le,Y.uri=r.XMLNS,R.startPrefixMapping(J,le))}for(var ne=P.length;ne--;){Y=P[ne];var G=Y.prefix;G&&(G==="xml"&&(Y.uri=r.XML),G!=="xmlns"&&(Y.uri=X[G||""]))}var ae=j.indexOf(":");ae>0?(G=P.prefix=j.slice(0,ae),re=P.localName=j.slice(ae+1)):(G=null,re=P.localName=j);var Se=P.uri=X[G||""];if(R.startElement(Se,re,j,P),P.closed){if(R.endElement(Se,re,j),Z)for(G in Z)Object.prototype.hasOwnProperty.call(Z,G)&&R.endPrefixMapping(G)}else return P.currentNSMap=X,P.localNSMap=Z,!0}function _(P,R,X,j,Z){if(/^(?:script|textarea)$/i.test(X)){var Y=P.indexOf("</"+X+">",R),te=P.substring(R+1,Y);if(/[&<]/.test(te))return/^script$/i.test(X)?(Z.characters(te,0,te.length),Y):(te=te.replace(/&#?\w+;/g,j),Z.characters(te,0,te.length),Y)}return R+1}function b(P,R,X,j){var Z=j[X];return Z==null&&(Z=P.lastIndexOf("</"+X+">"),Z<R&&(Z=P.lastIndexOf("</"+X)),j[X]=Z),Z<R}function T(P,R){for(var X in P)Object.prototype.hasOwnProperty.call(P,X)&&(R[X]=P[X])}function w(P,R,X,j){var Z=P.charAt(R+2);switch(Z){case"-":if(P.charAt(R+3)==="-"){var Y=P.indexOf("-->",R+4);return Y>R?(X.comment(P,R+4,Y-R-4),Y+3):(j.error("Unclosed comment"),-1)}else return-1;default:if(P.substr(R+3,6)=="CDATA["){var Y=P.indexOf("]]>",R+9);return X.startCDATA(),X.characters(P,R+9,Y-R-9),X.endCDATA(),Y+3}var te=N(P,R),le=te.length;if(le>1&&/!doctype/i.test(te[0][0])){var G=te[1][0],re=!1,J=!1;le>3&&(/^public$/i.test(te[2][0])?(re=te[3][0],J=le>4&&te[4][0]):/^system$/i.test(te[2][0])&&(J=te[3][0]));var ne=te[le-1];return X.startDTD(G,re,J),X.endDTD(),ne.index+ne[0].length}}return-1}function A(P,R,X){var j=P.indexOf("?>",R);if(j){var Z=P.substring(R,j).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return Z?(Z[0].length,X.processingInstruction(Z[1],Z[2]),j+2):-1}return-1}function I(){this.attributeNames={}}I.prototype={setTagName:function(P){if(!i.test(P))throw new Error("invalid tagName:"+P);this.tagName=P},addValue:function(P,R,X){if(!i.test(P))throw new Error("invalid attribute:"+P);this.attributeNames[P]=this.length,this[this.length++]={qName:P,value:R,offset:X}},length:0,getLocalName:function(P){return this[P].localName},getLocator:function(P){return this[P].locator},getQName:function(P){return this[P].qName},getURI:function(P){return this[P].uri},getValue:function(P){return this[P].value}};function N(P,R){var X,j=[],Z=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(Z.lastIndex=R,Z.exec(P);X=Z.exec(P);)if(j.push(X),X[1])return j}return Sc.XMLReader=m,Sc.ParseError=f,Sc}var pb;function fL(){if(pb)return Yo;pb=1;var r=Dd(),e=__(),t=hL(),i=dL(),s=e.DOMImplementation,n=r.NAMESPACE,a=i.ParseError,o=i.XMLReader;function l(E){return E.replace(/\r[\n\u0085]/g,`
`).replace(/[\r\u0085\u2028]/g,`
`)}function u(E){this.options=E||{locator:{}}}u.prototype.parseFromString=function(E,C){var _=this.options,b=new o,T=_.domBuilder||new h,w=_.errorHandler,A=_.locator,I=_.xmlns||{},N=/\/x?html?$/.test(C),P=N?t.HTML_ENTITIES:t.XML_ENTITIES;A&&T.setDocumentLocator(A),b.errorHandler=c(w,T,A),b.domBuilder=_.domBuilder||T,N&&(I[""]=n.HTML),I.xml=I.xml||n.XML;var R=_.normalizeLineEndings||l;return E&&typeof E=="string"?b.parse(R(E),I,P):b.errorHandler.error("invalid doc source"),T.doc};function c(E,C,_){if(!E){if(C instanceof h)return C;E=C}var b={},T=E instanceof Function;_=_||{};function w(A){var I=E[A];!I&&T&&(I=E.length==2?function(N){E(A,N)}:E),b[A]=I&&function(N){I("[xmldom "+A+"]	"+N+m(_))}||function(){}}return w("warning"),w("error"),w("fatalError"),b}function h(){this.cdata=!1}function f(E,C){C.lineNumber=E.lineNumber,C.columnNumber=E.columnNumber}h.prototype={startDocument:function(){this.doc=new s().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(E,C,_,b){var T=this.doc,w=T.createElementNS(E,_||C),A=b.length;y(this,w),this.currentElement=w,this.locator&&f(this.locator,w);for(var I=0;I<A;I++){var E=b.getURI(I),N=b.getValue(I),_=b.getQName(I),P=T.createAttributeNS(E,_);this.locator&&f(b.getLocator(I),P),P.value=P.nodeValue=N,w.setAttributeNode(P)}},endElement:function(E,C,_){var b=this.currentElement;b.tagName,this.currentElement=b.parentNode},startPrefixMapping:function(E,C){},endPrefixMapping:function(E){},processingInstruction:function(E,C){var _=this.doc.createProcessingInstruction(E,C);this.locator&&f(this.locator,_),y(this,_)},ignorableWhitespace:function(E,C,_){},characters:function(E,C,_){if(E=S.apply(this,arguments),E){if(this.cdata)var b=this.doc.createCDATASection(E);else var b=this.doc.createTextNode(E);this.currentElement?this.currentElement.appendChild(b):/^\s*$/.test(E)&&this.doc.appendChild(b),this.locator&&f(this.locator,b)}},skippedEntity:function(E){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(E){(this.locator=E)&&(E.lineNumber=0)},comment:function(E,C,_){E=S.apply(this,arguments);var b=this.doc.createComment(E);this.locator&&f(this.locator,b),y(this,b)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(E,C,_){var b=this.doc.implementation;if(b&&b.createDocumentType){var T=b.createDocumentType(E,C,_);this.locator&&f(this.locator,T),y(this,T),this.doc.doctype=T}},warning:function(E){console.warn("[xmldom warning]	"+E,m(this.locator))},error:function(E){console.error("[xmldom error]	"+E,m(this.locator))},fatalError:function(E){throw new a(E,this.locator)}};function m(E){if(E)return`
@`+(E.systemId||"")+"#[line:"+E.lineNumber+",col:"+E.columnNumber+"]"}function S(E,C,_){return typeof E=="string"?E.substr(C,_):E.length>=C+_||C?new java.lang.String(E,C,_)+"":E}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(E){h.prototype[E]=function(){return null}});function y(E,C){E.currentElement?E.currentElement.appendChild(C):E.doc.appendChild(C)}return Yo.__DOMHandler=h,Yo.normalizeLineEndings=l,Yo.DOMParser=u,Yo}var mb;function pL(){if(mb)return Ho;mb=1;var r=__();return Ho.DOMImplementation=r.DOMImplementation,Ho.XMLSerializer=r.XMLSerializer,Ho.DOMParser=fL().DOMParser,Ho}var mL=pL();/*! @name mpd-parser @version 1.3.1 @license Apache-2.0 */const gb=r=>!!r&&typeof r=="object",Wt=(...r)=>r.reduce((e,t)=>(typeof t!="object"||Object.keys(t).forEach(i=>{Array.isArray(e[i])&&Array.isArray(t[i])?e[i]=e[i].concat(t[i]):gb(e[i])&&gb(t[i])?e[i]=Wt(e[i],t[i]):e[i]=t[i]}),e),{}),x_=r=>Object.keys(r).map(e=>r[e]),gL=(r,e)=>{const t=[];for(let i=r;i<e;i++)t.push(i);return t},Ga=r=>r.reduce((e,t)=>e.concat(t),[]),w_=r=>{if(!r.length)return[];const e=[];for(let t=0;t<r.length;t++)e.push(r[t]);return e},OL=(r,e)=>r.reduce((t,i,s)=>(i[e]&&t.push(s),t),[]),yL=(r,e)=>x_(r.reduce((t,i)=>(i.forEach(s=>{t[e(s)]=s}),t),{}));var Ka={INVALID_NUMBER_OF_PERIOD:"INVALID_NUMBER_OF_PERIOD",DASH_EMPTY_MANIFEST:"DASH_EMPTY_MANIFEST",DASH_INVALID_XML:"DASH_INVALID_XML",NO_BASE_URL:"NO_BASE_URL",SEGMENT_TIME_UNSPECIFIED:"SEGMENT_TIME_UNSPECIFIED",UNSUPPORTED_UTC_TIMING_SCHEME:"UNSUPPORTED_UTC_TIMING_SCHEME"};const Bl=({baseUrl:r="",source:e="",range:t="",indexRange:i=""})=>{const s={uri:e,resolvedUri:Pd(r||"",e)};if(t||i){const a=(t||i).split("-");let o=q.BigInt?q.BigInt(a[0]):parseInt(a[0],10),l=q.BigInt?q.BigInt(a[1]):parseInt(a[1],10);o<Number.MAX_SAFE_INTEGER&&typeof o=="bigint"&&(o=Number(o)),l<Number.MAX_SAFE_INTEGER&&typeof l=="bigint"&&(l=Number(l));let u;typeof l=="bigint"||typeof o=="bigint"?u=q.BigInt(l)-q.BigInt(o)+q.BigInt(1):u=l-o+1,typeof u=="bigint"&&u<Number.MAX_SAFE_INTEGER&&(u=Number(u)),s.byterange={length:u,offset:o}}return s},bL=r=>{let e;return typeof r.offset=="bigint"||typeof r.length=="bigint"?e=q.BigInt(r.offset)+q.BigInt(r.length)-q.BigInt(1):e=r.offset+r.length-1,`${r.offset}-${e}`},Ob=r=>(r&&typeof r!="number"&&(r=parseInt(r,10)),isNaN(r)?null:r),vL={static(r){const{duration:e,timescale:t=1,sourceDuration:i,periodDuration:s}=r,n=Ob(r.endNumber),a=e/t;return typeof n=="number"?{start:0,end:n}:typeof s=="number"?{start:0,end:s/a}:{start:0,end:i/a}},dynamic(r){const{NOW:e,clientOffset:t,availabilityStartTime:i,timescale:s=1,duration:n,periodStart:a=0,minimumUpdatePeriod:o=0,timeShiftBufferDepth:l=1/0}=r,u=Ob(r.endNumber),c=(e+t)/1e3,h=i+a,m=c+o-h,S=Math.ceil(m*s/n),y=Math.floor((c-h-l)*s/n),E=Math.floor((c-h)*s/n);return{start:Math.max(0,y),end:typeof u=="number"?u:Math.min(S,E)}}},SL=r=>e=>{const{duration:t,timescale:i=1,periodStart:s,startNumber:n=1}=r;return{number:n+e,duration:t/i,timeline:s,time:e*t}},a0=r=>{const{type:e,duration:t,timescale:i=1,periodDuration:s,sourceDuration:n}=r,{start:a,end:o}=vL[e](r),l=gL(a,o).map(SL(r));if(e==="static"){const u=l.length-1,c=typeof s=="number"?s:n;l[u].duration=c-t/i*u}return l},C_=r=>{const{baseUrl:e,initialization:t={},sourceDuration:i,indexRange:s="",periodStart:n,presentationTime:a,number:o=0,duration:l}=r;if(!e)throw new Error(Ka.NO_BASE_URL);const u=Bl({baseUrl:e,source:t.sourceURL,range:t.range}),c=Bl({baseUrl:e,source:e,indexRange:s});if(c.map=u,l){const h=a0(r);h.length&&(c.duration=h[0].duration,c.timeline=h[0].timeline)}else i&&(c.duration=i,c.timeline=n);return c.presentationTime=a||n,c.number=o,[c]},o0=(r,e,t)=>{const i=r.sidx.map?r.sidx.map:null,s=r.sidx.duration,n=r.timeline||0,a=r.sidx.byterange,o=a.offset+a.length,l=e.timescale,u=e.references.filter(E=>E.referenceType!==1),c=[],h=r.endList?"static":"dynamic",f=r.sidx.timeline;let m=f,S=r.mediaSequence||0,y;typeof e.firstOffset=="bigint"?y=q.BigInt(o)+e.firstOffset:y=o+e.firstOffset;for(let E=0;E<u.length;E++){const C=e.references[E],_=C.referencedSize,b=C.subsegmentDuration;let T;typeof y=="bigint"?T=y+q.BigInt(_)-q.BigInt(1):T=y+_-1;const w=`${y}-${T}`,I=C_({baseUrl:t,timescale:l,timeline:n,periodStart:f,presentationTime:m,number:S,duration:b,sourceDuration:s,indexRange:w,type:h})[0];i&&(I.map=i),c.push(I),typeof y=="bigint"?y+=q.BigInt(_):y+=_,m+=b/l,S++}return r.segments=c,r},TL=["AUDIO","SUBTITLES"],_L=1/60,k_=r=>yL(r,({timeline:e})=>e).sort((e,t)=>e.timeline>t.timeline?1:-1),xL=(r,e)=>{for(let t=0;t<r.length;t++)if(r[t].attributes.NAME===e)return r[t];return null},yb=r=>{let e=[];return cL(r,TL,(t,i,s,n)=>{e=e.concat(t.playlists||[])}),e},bb=({playlist:r,mediaSequence:e})=>{r.mediaSequence=e,r.segments.forEach((t,i)=>{t.number=r.mediaSequence+i})},wL=({oldPlaylists:r,newPlaylists:e,timelineStarts:t})=>{e.forEach(i=>{i.discontinuitySequence=t.findIndex(function({timeline:l}){return l===i.timeline});const s=xL(r,i.attributes.NAME);if(!s||i.sidx)return;const n=i.segments[0],a=s.segments.findIndex(function(l){return Math.abs(l.presentationTime-n.presentationTime)<_L});if(a===-1){bb({playlist:i,mediaSequence:s.mediaSequence+s.segments.length}),i.segments[0].discontinuity=!0,i.discontinuityStarts.unshift(0),(!s.segments.length&&i.timeline>s.timeline||s.segments.length&&i.timeline>s.segments[s.segments.length-1].timeline)&&i.discontinuitySequence--;return}s.segments[a].discontinuity&&!n.discontinuity&&(n.discontinuity=!0,i.discontinuityStarts.unshift(0),i.discontinuitySequence--),bb({playlist:i,mediaSequence:s.segments[a].number})})},CL=({oldManifest:r,newManifest:e})=>{const t=r.playlists.concat(yb(r)),i=e.playlists.concat(yb(e));return e.timelineStarts=k_([r.timelineStarts,e.timelineStarts]),wL({oldPlaylists:t,newPlaylists:i,timelineStarts:e.timelineStarts}),e},Md=r=>r&&r.uri+"-"+bL(r.byterange),jf=r=>{const e=r.reduce(function(i,s){return i[s.attributes.baseUrl]||(i[s.attributes.baseUrl]=[]),i[s.attributes.baseUrl].push(s),i},{});let t=[];return Object.values(e).forEach(i=>{const s=x_(i.reduce((n,a)=>{const o=a.attributes.id+(a.attributes.lang||"");return n[o]?(a.segments&&(a.segments[0]&&(a.segments[0].discontinuity=!0),n[o].segments.push(...a.segments)),a.attributes.contentProtection&&(n[o].attributes.contentProtection=a.attributes.contentProtection)):(n[o]=a,n[o].attributes.timelineStarts=[]),n[o].attributes.timelineStarts.push({start:a.attributes.periodStart,timeline:a.attributes.periodStart}),n},{}));t=t.concat(s)}),t.map(i=>(i.discontinuityStarts=OL(i.segments||[],"discontinuity"),i))},l0=(r,e)=>{const t=Md(r.sidx),i=t&&e[t]&&e[t].sidx;return i&&o0(r,i,r.sidx.resolvedUri),r},kL=(r,e={})=>{if(!Object.keys(e).length)return r;for(const t in r)r[t]=l0(r[t],e);return r},EL=({attributes:r,segments:e,sidx:t,mediaSequence:i,discontinuitySequence:s,discontinuityStarts:n},a)=>{const o={attributes:{NAME:r.id,BANDWIDTH:r.bandwidth,CODECS:r.codecs,"PROGRAM-ID":1},uri:"",endList:r.type==="static",timeline:r.periodStart,resolvedUri:r.baseUrl||"",targetDuration:r.duration,discontinuitySequence:s,discontinuityStarts:n,timelineStarts:r.timelineStarts,mediaSequence:i,segments:e};return r.contentProtection&&(o.contentProtection=r.contentProtection),r.serviceLocation&&(o.attributes.serviceLocation=r.serviceLocation),t&&(o.sidx=t),a&&(o.attributes.AUDIO="audio",o.attributes.SUBTITLES="subs"),o},AL=({attributes:r,segments:e,mediaSequence:t,discontinuityStarts:i,discontinuitySequence:s})=>{typeof e>"u"&&(e=[{uri:r.baseUrl,timeline:r.periodStart,resolvedUri:r.baseUrl||"",duration:r.sourceDuration,number:0}],r.duration=r.sourceDuration);const n={NAME:r.id,BANDWIDTH:r.bandwidth,"PROGRAM-ID":1};r.codecs&&(n.CODECS=r.codecs);const a={attributes:n,uri:"",endList:r.type==="static",timeline:r.periodStart,resolvedUri:r.baseUrl||"",targetDuration:r.duration,timelineStarts:r.timelineStarts,discontinuityStarts:i,discontinuitySequence:s,mediaSequence:t,segments:e};return r.serviceLocation&&(a.attributes.serviceLocation=r.serviceLocation),a},PL=(r,e={},t=!1)=>{let i;const s=r.reduce((n,a)=>{const o=a.attributes.role&&a.attributes.role.value||"",l=a.attributes.lang||"";let u=a.attributes.label||"main";if(l&&!a.attributes.label){const h=o?` (${o})`:"";u=`${a.attributes.lang}${h}`}n[u]||(n[u]={language:l,autoselect:!0,default:o==="main",playlists:[],uri:""});const c=l0(EL(a,t),e);return n[u].playlists.push(c),typeof i>"u"&&o==="main"&&(i=a,i.default=!0),n},{});if(!i){const n=Object.keys(s)[0];s[n].default=!0}return s},DL=(r,e={})=>r.reduce((t,i)=>{const s=i.attributes.label||i.attributes.lang||"text",n=i.attributes.lang||"und";return t[s]||(t[s]={language:n,default:!1,autoselect:!1,playlists:[],uri:""}),t[s].playlists.push(l0(AL(i),e)),t},{}),ML=r=>r.reduce((e,t)=>(t&&t.forEach(i=>{const{channel:s,language:n}=i;e[n]={autoselect:!1,default:!1,instreamId:s,language:n},i.hasOwnProperty("aspectRatio")&&(e[n].aspectRatio=i.aspectRatio),i.hasOwnProperty("easyReader")&&(e[n].easyReader=i.easyReader),i.hasOwnProperty("3D")&&(e[n]["3D"]=i["3D"])}),e),{}),IL=({attributes:r,segments:e,sidx:t,discontinuityStarts:i})=>{const s={attributes:{NAME:r.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:r.width,height:r.height},CODECS:r.codecs,BANDWIDTH:r.bandwidth,"PROGRAM-ID":1},uri:"",endList:r.type==="static",timeline:r.periodStart,resolvedUri:r.baseUrl||"",targetDuration:r.duration,discontinuityStarts:i,timelineStarts:r.timelineStarts,segments:e};return r.frameRate&&(s.attributes["FRAME-RATE"]=r.frameRate),r.contentProtection&&(s.contentProtection=r.contentProtection),r.serviceLocation&&(s.attributes.serviceLocation=r.serviceLocation),t&&(s.sidx=t),s},RL=({attributes:r})=>r.mimeType==="video/mp4"||r.mimeType==="video/webm"||r.contentType==="video",LL=({attributes:r})=>r.mimeType==="audio/mp4"||r.mimeType==="audio/webm"||r.contentType==="audio",QL=({attributes:r})=>r.mimeType==="text/vtt"||r.contentType==="text",$L=(r,e)=>{r.forEach(t=>{t.mediaSequence=0,t.discontinuitySequence=e.findIndex(function({timeline:i}){return i===t.timeline}),t.segments&&t.segments.forEach((i,s)=>{i.number=s})})},vb=r=>r?Object.keys(r).reduce((e,t)=>{const i=r[t];return e.concat(i.playlists)},[]):[],BL=({dashPlaylists:r,locations:e,contentSteering:t,sidxMapping:i={},previousManifest:s,eventStream:n})=>{if(!r.length)return{};const{sourceDuration:a,type:o,suggestedPresentationDelay:l,minimumUpdatePeriod:u}=r[0].attributes,c=jf(r.filter(RL)).map(IL),h=jf(r.filter(LL)),f=jf(r.filter(QL)),m=r.map(T=>T.attributes.captionServices).filter(Boolean),S={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:"",duration:a,playlists:kL(c,i)};u>=0&&(S.minimumUpdatePeriod=u*1e3),e&&(S.locations=e),t&&(S.contentSteering=t),o==="dynamic"&&(S.suggestedPresentationDelay=l),n&&n.length>0&&(S.eventStream=n);const y=S.playlists.length===0,E=h.length?PL(h,i,y):null,C=f.length?DL(f,i):null,_=c.concat(vb(E),vb(C)),b=_.map(({timelineStarts:T})=>T);return S.timelineStarts=k_(b),$L(_,S.timelineStarts),E&&(S.mediaGroups.AUDIO.audio=E),C&&(S.mediaGroups.SUBTITLES.subs=C),m.length&&(S.mediaGroups["CLOSED-CAPTIONS"].cc=ML(m)),s?CL({oldManifest:s,newManifest:S}):S},NL=(r,e,t)=>{const{NOW:i,clientOffset:s,availabilityStartTime:n,timescale:a=1,periodStart:o=0,minimumUpdatePeriod:l=0}=r,u=(i+s)/1e3,c=n+o,f=u+l-c;return Math.ceil((f*a-e)/t)},E_=(r,e)=>{const{type:t,minimumUpdatePeriod:i=0,media:s="",sourceDuration:n,timescale:a=1,startNumber:o=1,periodStart:l}=r,u=[];let c=-1;for(let h=0;h<e.length;h++){const f=e[h],m=f.d,S=f.r||0,y=f.t||0;c<0&&(c=y),y&&y>c&&(c=y);let E;if(S<0){const b=h+1;b===e.length?t==="dynamic"&&i>0&&s.indexOf("$Number$")>0?E=NL(r,c,m):E=(n*a-c)/m:E=(e[b].t-c)/m}else E=S+1;const C=o+u.length+E;let _=o+u.length;for(;_<C;)u.push({number:_,duration:m/a,time:c,timeline:l}),c+=m,_++}return u},FL=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,UL=r=>(e,t,i,s)=>{if(e==="$$")return"$";if(typeof r[t]>"u")return e;const n=""+r[t];return t==="RepresentationID"||(i?s=parseInt(s,10):s=1,n.length>=s)?n:`${new Array(s-n.length+1).join("0")}${n}`},Sb=(r,e)=>r.replace(FL,UL(e)),qL=(r,e)=>!r.duration&&!e?[{number:r.startNumber||1,duration:r.sourceDuration,time:0,timeline:r.periodStart}]:r.duration?a0(r):E_(r,e),VL=(r,e)=>{const t={RepresentationID:r.id,Bandwidth:r.bandwidth||0},{initialization:i={sourceURL:"",range:""}}=r,s=Bl({baseUrl:r.baseUrl,source:Sb(i.sourceURL,t),range:i.range});return qL(r,e).map(a=>{t.Number=a.number,t.Time=a.time;const o=Sb(r.media||"",t),l=r.timescale||1,u=r.presentationTimeOffset||0,c=r.periodStart+(a.time-u)/l;return{uri:o,timeline:a.timeline,duration:a.duration,resolvedUri:Pd(r.baseUrl||"",o),map:s,number:a.number,presentationTime:c}})},XL=(r,e)=>{const{baseUrl:t,initialization:i={}}=r,s=Bl({baseUrl:t,source:i.sourceURL,range:i.range}),n=Bl({baseUrl:t,source:e.media,range:e.mediaRange});return n.map=s,n},jL=(r,e)=>{const{duration:t,segmentUrls:i=[],periodStart:s}=r;if(!t&&!e||t&&e)throw new Error(Ka.SEGMENT_TIME_UNSPECIFIED);const n=i.map(l=>XL(r,l));let a;return t&&(a=a0(r)),e&&(a=E_(r,e)),a.map((l,u)=>{if(n[u]){const c=n[u],h=r.timescale||1,f=r.presentationTimeOffset||0;return c.timeline=l.timeline,c.duration=l.duration,c.number=l.number,c.presentationTime=s+(l.time-f)/h,c}}).filter(l=>l)},zL=({attributes:r,segmentInfo:e})=>{let t,i;e.template?(i=VL,t=Wt(r,e.template)):e.base?(i=C_,t=Wt(r,e.base)):e.list&&(i=jL,t=Wt(r,e.list));const s={attributes:r};if(!i)return s;const n=i(t,e.segmentTimeline);if(t.duration){const{duration:a,timescale:o=1}=t;t.duration=a/o}else n.length?t.duration=n.reduce((a,o)=>Math.max(a,Math.ceil(o.duration)),0):t.duration=0;return s.attributes=t,s.segments=n,e.base&&t.indexRange&&(s.sidx=n[0],s.segments=[]),s},ZL=r=>r.map(zL),St=(r,e)=>w_(r.childNodes).filter(({tagName:t})=>t===e),Du=r=>r.textContent.trim(),WL=r=>parseFloat(r.split("/").reduce((e,t)=>e/t)),ca=r=>{const o=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(r);if(!o)return 0;const[l,u,c,h,f,m]=o.slice(1);return parseFloat(l||0)*31536e3+parseFloat(u||0)*2592e3+parseFloat(c||0)*86400+parseFloat(h||0)*3600+parseFloat(f||0)*60+parseFloat(m||0)},HL=r=>(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(r)&&(r+="Z"),Date.parse(r)),Tb={mediaPresentationDuration(r){return ca(r)},availabilityStartTime(r){return HL(r)/1e3},minimumUpdatePeriod(r){return ca(r)},suggestedPresentationDelay(r){return ca(r)},type(r){return r},timeShiftBufferDepth(r){return ca(r)},start(r){return ca(r)},width(r){return parseInt(r,10)},height(r){return parseInt(r,10)},bandwidth(r){return parseInt(r,10)},frameRate(r){return WL(r)},startNumber(r){return parseInt(r,10)},timescale(r){return parseInt(r,10)},presentationTimeOffset(r){return parseInt(r,10)},duration(r){const e=parseInt(r,10);return isNaN(e)?ca(r):e},d(r){return parseInt(r,10)},t(r){return parseInt(r,10)},r(r){return parseInt(r,10)},presentationTime(r){return parseInt(r,10)},DEFAULT(r){return r}},Ft=r=>r&&r.attributes?w_(r.attributes).reduce((e,t)=>{const i=Tb[t.name]||Tb.DEFAULT;return e[t.name]=i(t.value),e},{}):{},YL={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime","urn:mpeg:dash:mp4protection:2011":"mp4protection"},Id=(r,e)=>e.length?Ga(r.map(function(t){return e.map(function(i){const s=Du(i),n=Pd(t.baseUrl,s),a=Wt(Ft(i),{baseUrl:n});return n!==s&&!a.serviceLocation&&t.serviceLocation&&(a.serviceLocation=t.serviceLocation),a})})):r,u0=r=>{const e=St(r,"SegmentTemplate")[0],t=St(r,"SegmentList")[0],i=t&&St(t,"SegmentURL").map(h=>Wt({tag:"SegmentURL"},Ft(h))),s=St(r,"SegmentBase")[0],n=t||e,a=n&&St(n,"SegmentTimeline")[0],o=t||s||e,l=o&&St(o,"Initialization")[0],u=e&&Ft(e);u&&l?u.initialization=l&&Ft(l):u&&u.initialization&&(u.initialization={sourceURL:u.initialization});const c={template:u,segmentTimeline:a&&St(a,"S").map(h=>Ft(h)),list:t&&Wt(Ft(t),{segmentUrls:i,initialization:Ft(l)}),base:s&&Wt(Ft(s),{initialization:Ft(l)})};return Object.keys(c).forEach(h=>{c[h]||delete c[h]}),c},GL=(r,e,t)=>i=>{const s=St(i,"BaseURL"),n=Id(e,s),a=Wt(r,Ft(i)),o=u0(i);return n.map(l=>({segmentInfo:Wt(t,o),attributes:Wt(a,l)}))},KL=r=>r.reduce((e,t)=>{const i=Ft(t);i.schemeIdUri&&(i.schemeIdUri=i.schemeIdUri.toLowerCase());const s=YL[i.schemeIdUri];if(s){e[s]={attributes:i};const n=St(t,"cenc:pssh")[0];if(n){const a=Du(n);e[s].pssh=a&&O_(a)}}return e},{}),JL=r=>{if(r.schemeIdUri==="urn:scte:dash:cc:cea-608:2015")return(typeof r.value!="string"?[]:r.value.split(";")).map(t=>{let i,s;return s=t,/^CC\d=/.test(t)?[i,s]=t.split("="):/^CC\d$/.test(t)&&(i=t),{channel:i,language:s}});if(r.schemeIdUri==="urn:scte:dash:cc:cea-708:2015")return(typeof r.value!="string"?[]:r.value.split(";")).map(t=>{const i={channel:void 0,language:void 0,aspectRatio:1,easyReader:0,"3D":0};if(/=/.test(t)){const[s,n=""]=t.split("=");i.channel=s,i.language=t,n.split(",").forEach(a=>{const[o,l]=a.split(":");o==="lang"?i.language=l:o==="er"?i.easyReader=Number(l):o==="war"?i.aspectRatio=Number(l):o==="3D"&&(i["3D"]=Number(l))})}else i.language=t;return i.channel&&(i.channel="SERVICE"+i.channel),i})},eQ=r=>Ga(St(r.node,"EventStream").map(e=>{const t=Ft(e),i=t.schemeIdUri;return St(e,"Event").map(s=>{const n=Ft(s),a=n.presentationTime||0,o=t.timescale||1,l=n.duration||0,u=a/o+r.attributes.start;return{schemeIdUri:i,value:t.value,id:n.id,start:u,end:u+l/o,messageData:Du(s)||n.messageData,contentEncoding:t.contentEncoding,presentationTimeOffset:t.presentationTimeOffset||0}})})),tQ=(r,e,t)=>i=>{const s=Ft(i),n=Id(e,St(i,"BaseURL")),a=St(i,"Role")[0],o={role:Ft(a)};let l=Wt(r,s,o);const u=St(i,"Accessibility")[0],c=JL(Ft(u));c&&(l=Wt(l,{captionServices:c}));const h=St(i,"Label")[0];if(h&&h.childNodes.length){const E=h.childNodes[0].nodeValue.trim();l=Wt(l,{label:E})}const f=KL(St(i,"ContentProtection"));Object.keys(f).length&&(l=Wt(l,{contentProtection:f}));const m=u0(i),S=St(i,"Representation"),y=Wt(t,m);return Ga(S.map(GL(l,n,y)))},iQ=(r,e)=>(t,i)=>{const s=Id(e,St(t.node,"BaseURL")),n=Wt(r,{periodStart:t.attributes.start});typeof t.attributes.duration=="number"&&(n.periodDuration=t.attributes.duration);const a=St(t.node,"AdaptationSet"),o=u0(t.node);return Ga(a.map(tQ(n,s,o)))},rQ=(r,e)=>{if(r.length>1&&e({type:"warn",message:"The MPD manifest should contain no more than one ContentSteering tag"}),!r.length)return null;const t=Wt({serverURL:Du(r[0])},Ft(r[0]));return t.queryBeforeStart=t.queryBeforeStart==="true",t},sQ=({attributes:r,priorPeriodAttributes:e,mpdType:t})=>typeof r.start=="number"?r.start:e&&typeof e.start=="number"&&typeof e.duration=="number"?e.start+e.duration:!e&&t==="static"?0:null,nQ=(r,e={})=>{const{manifestUri:t="",NOW:i=Date.now(),clientOffset:s=0,eventHandler:n=function(){}}=e,a=St(r,"Period");if(!a.length)throw new Error(Ka.INVALID_NUMBER_OF_PERIOD);const o=St(r,"Location"),l=Ft(r),u=Id([{baseUrl:t}],St(r,"BaseURL")),c=St(r,"ContentSteering");l.type=l.type||"static",l.sourceDuration=l.mediaPresentationDuration||0,l.NOW=i,l.clientOffset=s,o.length&&(l.locations=o.map(Du));const h=[];return a.forEach((f,m)=>{const S=Ft(f),y=h[m-1];S.start=sQ({attributes:S,priorPeriodAttributes:y?y.attributes:null,mpdType:l.type}),h.push({node:f,attributes:S})}),{locations:l.locations,contentSteeringInfo:rQ(c,n),representationInfo:Ga(h.map(iQ(l,u))),eventStream:Ga(h.map(eQ))}},A_=r=>{if(r==="")throw new Error(Ka.DASH_EMPTY_MANIFEST);const e=new mL.DOMParser;let t,i;try{t=e.parseFromString(r,"application/xml"),i=t&&t.documentElement.tagName==="MPD"?t.documentElement:null}catch{}if(!i||i&&i.getElementsByTagName("parsererror").length>0)throw new Error(Ka.DASH_INVALID_XML);return i},aQ=r=>{const e=St(r,"UTCTiming")[0];if(!e)return null;const t=Ft(e);switch(t.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":t.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":t.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":t.method="DIRECT",t.value=Date.parse(t.value);break;case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":default:throw new Error(Ka.UNSUPPORTED_UTC_TIMING_SCHEME)}return t},oQ=(r,e={})=>{const t=nQ(A_(r),e),i=ZL(t.representationInfo);return BL({dashPlaylists:i,locations:t.locations,contentSteering:t.contentSteeringInfo,sidxMapping:e.sidxMapping,previousManifest:e.previousManifest,eventStream:t.eventStream})},lQ=r=>aQ(A_(r));var zf,_b;function uQ(){if(_b)return zf;_b=1;var r=Math.pow(2,32),e=function(t){var i=new DataView(t.buffer,t.byteOffset,t.byteLength),s;return i.getBigUint64?(s=i.getBigUint64(0),s<Number.MAX_SAFE_INTEGER?Number(s):s):i.getUint32(0)*r+i.getUint32(4)};return zf={getUint64:e,MAX_UINT32:r},zf}var Zf,xb;function cQ(){if(xb)return Zf;xb=1;var r=uQ().getUint64,e=function(t){var i=new DataView(t.buffer,t.byteOffset,t.byteLength),s={version:t[0],flags:new Uint8Array(t.subarray(1,4)),references:[],referenceId:i.getUint32(4),timescale:i.getUint32(8)},n=12;s.version===0?(s.earliestPresentationTime=i.getUint32(n),s.firstOffset=i.getUint32(n+4),n+=8):(s.earliestPresentationTime=r(t.subarray(n)),s.firstOffset=r(t.subarray(n+8)),n+=16),n+=2;var a=i.getUint16(n);for(n+=2;a>0;n+=12,a--)s.references.push({referenceType:(t[n]&128)>>>7,referencedSize:i.getUint32(n)&2147483647,subsegmentDuration:i.getUint32(n+4),startsWithSap:!!(t[n+8]&128),sapType:(t[n+8]&112)>>>4,sapDeltaTime:i.getUint32(n+8)&268435455});return s};return Zf=e,Zf}var hQ=cQ();const dQ=Pu(hQ);var fQ=Ee([73,68,51]),pQ=function(e,t){t===void 0&&(t=0),e=Ee(e);var i=e[t+5],s=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9],n=(i&16)>>4;return n?s+20:s+10},cl=function r(e,t){return t===void 0&&(t=0),e=Ee(e),e.length-t<10||!vt(e,fQ,{offset:t})?t:(t+=pQ(e,t),r(e,t))},wb=function(e){return typeof e=="string"?T_(e):e},mQ=function(e){return Array.isArray(e)?e.map(function(t){return wb(t)}):[wb(e)]},gQ=function r(e,t,i){i===void 0&&(i=!1),t=mQ(t),e=Ee(e);var s=[];if(!t.length)return s;for(var n=0;n<e.length;){var a=(e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3])>>>0,o=e.subarray(n+4,n+8);if(a===0)break;var l=n+a;if(l>e.length){if(i)break;l=e.length}var u=e.subarray(n+8,l);vt(o,t[0])&&(t.length===1?s.push(u):s.push.apply(s,r(u,t.slice(1),i))),n=l}return s},Tc={EBML:Ee([26,69,223,163]),DocType:Ee([66,130]),Segment:Ee([24,83,128,103]),SegmentInfo:Ee([21,73,169,102]),Tracks:Ee([22,84,174,107]),Track:Ee([174]),TrackNumber:Ee([215]),DefaultDuration:Ee([35,227,131]),TrackEntry:Ee([174]),TrackType:Ee([131]),FlagDefault:Ee([136]),CodecID:Ee([134]),CodecPrivate:Ee([99,162]),VideoTrack:Ee([224]),AudioTrack:Ee([225]),Cluster:Ee([31,67,182,117]),Timestamp:Ee([231]),TimestampScale:Ee([42,215,177]),BlockGroup:Ee([160]),BlockDuration:Ee([155]),Block:Ee([161]),SimpleBlock:Ee([163])},cm=[128,64,32,16,8,4,2,1],OQ=function(e){for(var t=1,i=0;i<cm.length&&!(e&cm[i]);i++)t++;return t},Ch=function(e,t,i,s){i===void 0&&(i=!0),s===void 0&&(s=!1);var n=OQ(e[t]),a=e.subarray(t,t+n);return i&&(a=Array.prototype.slice.call(e,t,t+n),a[0]^=cm[n-1]),{length:n,value:oL(a,{signed:s}),bytes:a}},Cb=function r(e){return typeof e=="string"?e.match(/.{1,2}/g).map(function(t){return r(t)}):typeof e=="number"?lL(e):e},yQ=function(e){return Array.isArray(e)?e.map(function(t){return Cb(t)}):[Cb(e)]},bQ=function r(e,t,i){if(i>=t.length)return t.length;var s=Ch(t,i,!1);if(vt(e.bytes,s.bytes))return i;var n=Ch(t,i+s.length);return r(e,t,i+n.length+n.value+s.length)},kb=function r(e,t){t=yQ(t),e=Ee(e);var i=[];if(!t.length)return i;for(var s=0;s<e.length;){var n=Ch(e,s,!1),a=Ch(e,s+n.length),o=s+n.length+a.length;a.value===127&&(a.value=bQ(n,e,o),a.value!==e.length&&(a.value-=o));var l=o+a.value>e.length?e.length:o+a.value,u=e.subarray(o,l);vt(t[0],n.bytes)&&(t.length===1?i.push(u):i=i.concat(r(u,t.slice(1))));var c=n.length+a.length+u.length;s+=c}return i},vQ=Ee([0,0,0,1]),SQ=Ee([0,0,1]),TQ=Ee([0,0,3]),_Q=function(e){for(var t=[],i=1;i<e.length-2;)vt(e.subarray(i,i+3),TQ)&&(t.push(i+2),i++),i++;if(t.length===0)return e;var s=e.length-t.length,n=new Uint8Array(s),a=0;for(i=0;i<s;a++,i++)a===t[0]&&(a++,t.shift()),n[i]=e[a];return n},P_=function(e,t,i,s){e=Ee(e),i=[].concat(i);for(var n=0,a,o=0;n<e.length&&(o<s||a);){var l=void 0;if(vt(e.subarray(n),vQ)?l=4:vt(e.subarray(n),SQ)&&(l=3),!l){n++;continue}if(o++,a)return _Q(e.subarray(a,n));var u=void 0;t==="h264"?u=e[n+l]&31:t==="h265"&&(u=e[n+l]>>1&63),i.indexOf(u)!==-1&&(a=n+l),n+=l+(t==="h264"?1:2)}return e.subarray(0,0)},xQ=function(e,t,i){return P_(e,"h264",t,i)},wQ=function(e,t,i){return P_(e,"h265",t,i)},Oi={webm:Ee([119,101,98,109]),matroska:Ee([109,97,116,114,111,115,107,97]),flac:Ee([102,76,97,67]),ogg:Ee([79,103,103,83]),ac3:Ee([11,119]),riff:Ee([82,73,70,70]),avi:Ee([65,86,73]),wav:Ee([87,65,86,69]),"3gp":Ee([102,116,121,112,51,103]),mp4:Ee([102,116,121,112]),fmp4:Ee([115,116,121,112]),mov:Ee([102,116,121,112,113,116]),moov:Ee([109,111,111,118]),moof:Ee([109,111,111,102])},Ja={aac:function(e){var t=cl(e);return vt(e,[255,16],{offset:t,mask:[255,22]})},mp3:function(e){var t=cl(e);return vt(e,[255,2],{offset:t,mask:[255,6]})},webm:function(e){var t=kb(e,[Tc.EBML,Tc.DocType])[0];return vt(t,Oi.webm)},mkv:function(e){var t=kb(e,[Tc.EBML,Tc.DocType])[0];return vt(t,Oi.matroska)},mp4:function(e){if(Ja["3gp"](e)||Ja.mov(e))return!1;if(vt(e,Oi.mp4,{offset:4})||vt(e,Oi.fmp4,{offset:4})||vt(e,Oi.moof,{offset:4})||vt(e,Oi.moov,{offset:4}))return!0},mov:function(e){return vt(e,Oi.mov,{offset:4})},"3gp":function(e){return vt(e,Oi["3gp"],{offset:4})},ac3:function(e){var t=cl(e);return vt(e,Oi.ac3,{offset:t})},ts:function(e){if(e.length<189&&e.length>=1)return e[0]===71;for(var t=0;t+188<e.length&&t<188;){if(e[t]===71&&e[t+188]===71)return!0;t+=1}return!1},flac:function(e){var t=cl(e);return vt(e,Oi.flac,{offset:t})},ogg:function(e){return vt(e,Oi.ogg)},avi:function(e){return vt(e,Oi.riff)&&vt(e,Oi.avi,{offset:8})},wav:function(e){return vt(e,Oi.riff)&&vt(e,Oi.wav,{offset:8})},h264:function(e){return xQ(e,7,3).length},h265:function(e){return wQ(e,[32,33],3).length}},hm=Object.keys(Ja).filter(function(r){return r!=="ts"&&r!=="h264"&&r!=="h265"}).concat(["ts","h264","h265"]);hm.forEach(function(r){var e=Ja[r];Ja[r]=function(t){return e(Ee(t))}});var CQ=Ja,c0=function(e){e=Ee(e);for(var t=0;t<hm.length;t++){var i=hm[t];if(CQ[i](e))return i}return""},kQ=function(e){return gQ(e,["moof"]).length>0},Wf,Eb;function EQ(){if(Eb)return Wf;Eb=1;var r=9e4,e,t,i,s,n,a,o;return e=function(l){return l*r},t=function(l,u){return l*u},i=function(l){return l/r},s=function(l,u){return l/u},n=function(l,u){return e(s(l,u))},a=function(l,u){return t(i(l),u)},o=function(l,u,c){return i(c?l:l-u)},Wf={ONE_SECOND_IN_TS:r,secondsToVideoTs:e,secondsToAudioTs:t,videoTsToSeconds:i,audioTsToSeconds:s,audioTsToVideoTs:n,videoTsToAudioTs:a,metadataTsToSeconds:o},Wf}var Dn=EQ();/**
 * @license
 * Video.js 8.23.4 <http://videojs.com/>
 * Copyright Brightcove, Inc. <https://www.brightcove.com/>
 * Available under Apache License Version 2.0
 * <https://github.com/videojs/video.js/blob/main/LICENSE>
 *
 * Includes vtt.js <https://github.com/mozilla/vtt.js>
 * Available under Apache License Version 2.0
 * <https://github.com/mozilla/vtt.js/blob/main/LICENSE>
 */var dm="8.23.4";const Ts={},an=function(r,e){return Ts[r]=Ts[r]||[],e&&(Ts[r]=Ts[r].concat(e)),Ts[r]},AQ=function(r,e){an(r,e)},D_=function(r,e){const t=an(r).indexOf(e);return t<=-1?!1:(Ts[r]=Ts[r].slice(),Ts[r].splice(t,1),!0)},PQ=function(r,e){an(r,[].concat(e).map(t=>{const i=(...s)=>(D_(r,i),t(...s));return i}))},kh={prefixed:!0},sh=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"]],Ab=sh[0];let hl;for(let r=0;r<sh.length;r++)if(sh[r][1]in ce){hl=sh[r];break}if(hl){for(let r=0;r<hl.length;r++)kh[Ab[r]]=hl[r];kh.prefixed=hl[0]!==Ab[0]}let ki=[];const DQ=(r,e,t)=>(i,s,n)=>{const a=e.levels[s],o=new RegExp(`^(${a})$`);let l=r;if(i!=="log"&&n.unshift(i.toUpperCase()+":"),t&&(l=`%c${r}`,n.unshift(t)),n.unshift(l+":"),ki){ki.push([].concat(n));const c=ki.length-1e3;ki.splice(0,c>0?c:0)}if(!q.console)return;let u=q.console[i];!u&&i==="debug"&&(u=q.console.info||q.console.log),!(!u||!a||!o.test(i))&&u[Array.isArray(n)?"apply":"call"](q.console,n)};function fm(r,e=":",t=""){let i="info",s;function n(...a){s("log",i,a)}return s=DQ(r,n,t),n.createLogger=(a,o,l)=>{const u=o!==void 0?o:e,c=l!==void 0?l:t,h=`${r} ${u} ${a}`;return fm(h,u,c)},n.createNewLogger=(a,o,l)=>fm(a,o,l),n.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:i},n.level=a=>{if(typeof a=="string"){if(!n.levels.hasOwnProperty(a))throw new Error(`"${a}" in not a valid log level`);i=a}return i},n.history=()=>ki?[].concat(ki):[],n.history.filter=a=>(ki||[]).filter(o=>new RegExp(`.*${a}.*`).test(o[0])),n.history.clear=()=>{ki&&(ki.length=0)},n.history.disable=()=>{ki!==null&&(ki.length=0,ki=null)},n.history.enable=()=>{ki===null&&(ki=[])},n.error=(...a)=>s("error",i,a),n.warn=(...a)=>s("warn",i,a),n.debug=(...a)=>s("debug",i,a),n}const qe=fm("VIDEOJS"),M_=qe.createLogger,MQ=Object.prototype.toString,I_=function(r){return ts(r)?Object.keys(r):[]};function Ea(r,e){I_(r).forEach(t=>e(r[t],t))}function R_(r,e,t=0){return I_(r).reduce((i,s)=>e(i,r[s],s),t)}function ts(r){return!!r&&typeof r=="object"}function eo(r){return ts(r)&&MQ.call(r)==="[object Object]"&&r.constructor===Object}function nt(...r){const e={};return r.forEach(t=>{t&&Ea(t,(i,s)=>{if(!eo(i)){e[s]=i;return}eo(e[s])||(e[s]={}),e[s]=nt(e[s],i)})}),e}function L_(r={}){const e=[];for(const t in r)if(r.hasOwnProperty(t)){const i=r[t];e.push(i)}return e}function Rd(r,e,t,i=!0){const s=a=>Object.defineProperty(r,e,{value:a,enumerable:!0,writable:!0}),n={configurable:!0,enumerable:!0,get(){const a=t();return s(a),a}};return i&&(n.set=s),Object.defineProperty(r,e,n)}var IQ=Object.freeze({__proto__:null,each:Ea,reduce:R_,isObject:ts,isPlain:eo,merge:nt,values:L_,defineLazyProperty:Rd});let h0=!1,Q_=null,xr=!1,$_,B_=!1,Aa=!1,Pa=!1,is=!1,d0=null,Ld=null;const RQ=!!(q.cast&&q.cast.framework&&q.cast.framework.CastReceiverContext);let N_=null,Eh=!1,Qd=!1,Ah=!1,$d=!1,Ph=!1,Dh=!1,Mh=!1;const Nl=!!(So()&&("ontouchstart"in q||q.navigator.maxTouchPoints||q.DocumentTouch&&q.document instanceof q.DocumentTouch)),qs=q.navigator&&q.navigator.userAgentData;qs&&qs.platform&&qs.brands&&(xr=qs.platform==="Android",Aa=!!qs.brands.find(r=>r.brand==="Microsoft Edge"),Pa=!!qs.brands.find(r=>r.brand==="Chromium"),is=!Aa&&Pa,d0=Ld=(qs.brands.find(r=>r.brand==="Chromium")||{}).version||null,Qd=qs.platform==="Windows");if(!Pa){const r=q.navigator&&q.navigator.userAgent||"";h0=/iPod/i.test(r),Q_=(function(){const e=r.match(/OS (\d+)_/i);return e&&e[1]?e[1]:null})(),xr=/Android/i.test(r),$_=(function(){const e=r.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e)return null;const t=e[1]&&parseFloat(e[1]),i=e[2]&&parseFloat(e[2]);return t&&i?parseFloat(e[1]+"."+e[2]):t||null})(),B_=/Firefox/i.test(r),Aa=/Edg/i.test(r),Pa=/Chrome/i.test(r)||/CriOS/i.test(r),is=!Aa&&Pa,d0=Ld=(function(){const e=r.match(/(Chrome|CriOS)\/(\d+)/);return e&&e[2]?parseFloat(e[2]):null})(),N_=(function(){const e=/MSIE\s(\d+)\.\d/.exec(r);let t=e&&parseFloat(e[1]);return!t&&/Trident\/7.0/i.test(r)&&/rv:11.0/.test(r)&&(t=11),t})(),Ph=/Tizen/i.test(r),Dh=/Web0S/i.test(r),Mh=Ph||Dh,Eh=/Safari/i.test(r)&&!is&&!xr&&!Aa&&!Mh,Qd=/Windows/i.test(r),Ah=/iPad/i.test(r)||Eh&&Nl&&!/iPhone/i.test(r),$d=/iPhone/i.test(r)&&!Ah}const ci=$d||Ah||h0,Bd=(Eh||ci)&&!is;var F_=Object.freeze({__proto__:null,get IS_IPOD(){return h0},get IOS_VERSION(){return Q_},get IS_ANDROID(){return xr},get ANDROID_VERSION(){return $_},get IS_FIREFOX(){return B_},get IS_EDGE(){return Aa},get IS_CHROMIUM(){return Pa},get IS_CHROME(){return is},get CHROMIUM_VERSION(){return d0},get CHROME_VERSION(){return Ld},IS_CHROMECAST_RECEIVER:RQ,get IE_VERSION(){return N_},get IS_SAFARI(){return Eh},get IS_WINDOWS(){return Qd},get IS_IPAD(){return Ah},get IS_IPHONE(){return $d},get IS_TIZEN(){return Ph},get IS_WEBOS(){return Dh},get IS_SMART_TV(){return Mh},TOUCH_ENABLED:Nl,IS_IOS:ci,IS_ANY_SAFARI:Bd});function Pb(r){return typeof r=="string"&&!!r.trim()}function LQ(r){if(r.indexOf(" ")>=0)throw new Error("class has illegal whitespace characters")}function So(){return ce===q.document}function To(r){return ts(r)&&r.nodeType===1}function U_(){try{return q.parent!==q.self}catch{return!0}}function q_(r){return function(e,t){if(!Pb(e))return ce[r](null);Pb(t)&&(t=ce.querySelector(t));const i=To(t)?t:ce;return i[r]&&i[r](e)}}function Re(r="div",e={},t={},i){const s=ce.createElement(r);return Object.getOwnPropertyNames(e).forEach(function(n){const a=e[n];n==="textContent"?fn(s,a):(s[n]!==a||n==="tabIndex")&&(s[n]=a)}),Object.getOwnPropertyNames(t).forEach(function(n){s.setAttribute(n,t[n])}),i&&f0(s,i),s}function fn(r,e){return typeof r.textContent>"u"?r.innerText=e:r.textContent=e,r}function pm(r,e){e.firstChild?e.insertBefore(r,e.firstChild):e.appendChild(r)}function Sl(r,e){return LQ(e),r.classList.contains(e)}function qn(r,...e){return r.classList.add(...e.reduce((t,i)=>t.concat(i.split(/\s+/)),[])),r}function Nd(r,...e){return r?(r.classList.remove(...e.reduce((t,i)=>t.concat(i.split(/\s+/)),[])),r):(qe.warn("removeClass was called with an element that doesn't exist"),null)}function V_(r,e,t){return typeof t=="function"&&(t=t(r,e)),typeof t!="boolean"&&(t=void 0),e.split(/\s+/).forEach(i=>r.classList.toggle(i,t)),r}function X_(r,e){Object.getOwnPropertyNames(e).forEach(function(t){const i=e[t];i===null||typeof i>"u"||i===!1?r.removeAttribute(t):r.setAttribute(t,i===!0?"":i)})}function js(r){const e={},t=["autoplay","controls","playsinline","loop","muted","default","defaultMuted"];if(r&&r.attributes&&r.attributes.length>0){const i=r.attributes;for(let s=i.length-1;s>=0;s--){const n=i[s].name;let a=i[s].value;t.includes(n)&&(a=a!==null),e[n]=a}}return e}function j_(r,e){return r.getAttribute(e)}function to(r,e,t){r.setAttribute(e,t)}function Fd(r,e){r.removeAttribute(e)}function z_(){ce.body.focus(),ce.onselectstart=function(){return!1}}function Z_(){ce.onselectstart=function(){return!0}}function io(r){if(r&&r.getBoundingClientRect&&r.parentNode){const e=r.getBoundingClientRect(),t={};return["bottom","height","left","right","top","width"].forEach(i=>{e[i]!==void 0&&(t[i]=e[i])}),t.height||(t.height=parseFloat(ro(r,"height"))),t.width||(t.width=parseFloat(ro(r,"width"))),t}}function Fl(r){if(!r||r&&!r.offsetParent)return{left:0,top:0,width:0,height:0};const e=r.offsetWidth,t=r.offsetHeight;let i=0,s=0;for(;r.offsetParent&&r!==ce[kh.fullscreenElement];)i+=r.offsetLeft,s+=r.offsetTop,r=r.offsetParent;return{left:i,top:s,width:e,height:t}}function Ud(r,e){const t={x:0,y:0};if(ci){let c=r;for(;c&&c.nodeName.toLowerCase()!=="html";){const h=ro(c,"transform");if(/^matrix/.test(h)){const f=h.slice(7,-1).split(/,\s/).map(Number);t.x+=f[4],t.y+=f[5]}else if(/^matrix3d/.test(h)){const f=h.slice(9,-1).split(/,\s/).map(Number);t.x+=f[12],t.y+=f[13]}if(c.assignedSlot&&c.assignedSlot.parentElement&&q.WebKitCSSMatrix){const f=q.getComputedStyle(c.assignedSlot.parentElement).transform,m=new q.WebKitCSSMatrix(f);t.x+=m.m41,t.y+=m.m42}c=c.parentNode||c.host}}const i={},s=Fl(e.target),n=Fl(r),a=n.width,o=n.height;let l=e.offsetY-(n.top-s.top),u=e.offsetX-(n.left-s.left);return e.changedTouches&&(u=e.changedTouches[0].pageX-n.left,l=e.changedTouches[0].pageY+n.top,ci&&(u-=t.x,l-=t.y)),i.y=1-Math.max(0,Math.min(1,l/o)),i.x=Math.max(0,Math.min(1,u/a)),i}function W_(r){return ts(r)&&r.nodeType===3}function qd(r){for(;r.firstChild;)r.removeChild(r.firstChild);return r}function H_(r){return typeof r=="function"&&(r=r()),(Array.isArray(r)?r:[r]).map(e=>{if(typeof e=="function"&&(e=e()),To(e)||W_(e))return e;if(typeof e=="string"&&/\S/.test(e))return ce.createTextNode(e)}).filter(e=>e)}function f0(r,e){return H_(e).forEach(t=>r.appendChild(t)),r}function Y_(r,e){return f0(qd(r),e)}function Ul(r){return r.button===void 0&&r.buttons===void 0||r.button===0&&r.buttons===void 0||r.type==="mouseup"&&r.button===0&&r.buttons===0||r.type==="mousedown"&&r.button===0&&r.buttons===0?!0:!(r.button!==0||r.buttons!==1)}const on=q_("querySelector"),G_=q_("querySelectorAll");function ro(r,e){if(!r||!e)return"";if(typeof q.getComputedStyle=="function"){let t;try{t=q.getComputedStyle(r)}catch{return""}return t?t.getPropertyValue(e)||t[e]:""}return""}function K_(r){[...ce.styleSheets].forEach(e=>{try{const t=[...e.cssRules].map(s=>s.cssText).join(""),i=ce.createElement("style");i.textContent=t,r.document.head.appendChild(i)}catch{const i=ce.createElement("link");i.rel="stylesheet",i.type=e.type,i.media=e.media.mediaText,i.href=e.href,r.document.head.appendChild(i)}})}var J_=Object.freeze({__proto__:null,isReal:So,isEl:To,isInFrame:U_,createEl:Re,textContent:fn,prependTo:pm,hasClass:Sl,addClass:qn,removeClass:Nd,toggleClass:V_,setAttributes:X_,getAttributes:js,getAttribute:j_,setAttribute:to,removeAttribute:Fd,blockTextSelection:z_,unblockTextSelection:Z_,getBoundingClientRect:io,findPosition:Fl,getPointerPosition:Ud,isTextNode:W_,emptyEl:qd,normalizeContent:H_,appendContent:f0,insertContent:Y_,isSingleLeftClick:Ul,$:on,$$:G_,computedStyle:ro,copyStyleSheetsToWindow:K_});let ex=!1,mm;const QQ=function(){if(mm.options.autoSetup===!1)return;const r=Array.prototype.slice.call(ce.getElementsByTagName("video")),e=Array.prototype.slice.call(ce.getElementsByTagName("audio")),t=Array.prototype.slice.call(ce.getElementsByTagName("video-js")),i=r.concat(e,t);if(i&&i.length>0)for(let s=0,n=i.length;s<n;s++){const a=i[s];if(a&&a.getAttribute)a.player===void 0&&a.getAttribute("data-setup")!==null&&mm(a);else{gm(1);break}}else ex||gm(1)};function gm(r,e){So()&&(e&&(mm=e),q.setTimeout(QQ,r))}function Om(){ex=!0,q.removeEventListener("load",Om)}So()&&(ce.readyState==="complete"?Om():q.addEventListener("load",Om));const tx=function(r){const e=ce.createElement("style");return e.className=r,e},ix=function(r,e){r.styleSheet?r.styleSheet.cssText=e:r.textContent=e};var Si=new WeakMap;const $Q=3;let BQ=$Q;function cr(){return BQ++}function Db(r,e){if(!Si.has(r))return;const t=Si.get(r);t.handlers[e].length===0&&(delete t.handlers[e],r.removeEventListener?r.removeEventListener(e,t.dispatcher,!1):r.detachEvent&&r.detachEvent("on"+e,t.dispatcher)),Object.getOwnPropertyNames(t.handlers).length<=0&&(delete t.handlers,delete t.dispatcher,delete t.disabled),Object.getOwnPropertyNames(t).length===0&&Si.delete(r)}function p0(r,e,t,i){t.forEach(function(s){r(e,s,i)})}function Vd(r){if(r.fixed_)return r;function e(){return!0}function t(){return!1}if(!r||!r.isPropagationStopped||!r.isImmediatePropagationStopped){const i=r||q.event;r={};const s=["layerX","layerY","keyLocation","path","webkitMovementX","webkitMovementY","mozPressure","mozInputSource"];for(const n in i)s.includes(n)||n==="returnValue"&&i.preventDefault||(r[n]=i[n]);if(r.target||(r.target=r.srcElement||ce),r.relatedTarget||(r.relatedTarget=r.fromElement===r.target?r.toElement:r.fromElement),r.preventDefault=function(){i.preventDefault&&i.preventDefault(),r.returnValue=!1,i.returnValue=!1,r.defaultPrevented=!0},r.defaultPrevented=!1,r.stopPropagation=function(){i.stopPropagation&&i.stopPropagation(),r.cancelBubble=!0,i.cancelBubble=!0,r.isPropagationStopped=e},r.isPropagationStopped=t,r.stopImmediatePropagation=function(){i.stopImmediatePropagation&&i.stopImmediatePropagation(),r.isImmediatePropagationStopped=e,r.stopPropagation()},r.isImmediatePropagationStopped=t,r.clientX!==null&&r.clientX!==void 0){const n=ce.documentElement,a=ce.body;r.pageX=r.clientX+(n&&n.scrollLeft||a&&a.scrollLeft||0)-(n&&n.clientLeft||a&&a.clientLeft||0),r.pageY=r.clientY+(n&&n.scrollTop||a&&a.scrollTop||0)-(n&&n.clientTop||a&&a.clientTop||0)}r.which=r.charCode||r.keyCode,r.button!==null&&r.button!==void 0&&(r.button=r.button&1?0:r.button&4?1:r.button&2?2:0)}return r.fixed_=!0,r}let _c;const NQ=function(){if(typeof _c!="boolean"){_c=!1;try{const r=Object.defineProperty({},"passive",{get(){_c=!0}});q.addEventListener("test",null,r),q.removeEventListener("test",null,r)}catch{}}return _c},FQ=["touchstart","touchmove"];function Zi(r,e,t){if(Array.isArray(e))return p0(Zi,r,e,t);Si.has(r)||Si.set(r,{});const i=Si.get(r);if(i.handlers||(i.handlers={}),i.handlers[e]||(i.handlers[e]=[]),t.guid||(t.guid=cr()),i.handlers[e].push(t),i.dispatcher||(i.disabled=!1,i.dispatcher=function(s,n){if(i.disabled)return;s=Vd(s);const a=i.handlers[s.type];if(a){const o=a.slice(0);for(let l=0,u=o.length;l<u&&!s.isImmediatePropagationStopped();l++)try{o[l].call(r,s,n)}catch(c){qe.error(c)}}}),i.handlers[e].length===1)if(r.addEventListener){let s=!1;NQ()&&FQ.indexOf(e)>-1&&(s={passive:!0}),r.addEventListener(e,i.dispatcher,s)}else r.attachEvent&&r.attachEvent("on"+e,i.dispatcher)}function hi(r,e,t){if(!Si.has(r))return;const i=Si.get(r);if(!i.handlers)return;if(Array.isArray(e))return p0(hi,r,e,t);const s=function(a,o){i.handlers[o]=[],Db(a,o)};if(e===void 0){for(const a in i.handlers)Object.prototype.hasOwnProperty.call(i.handlers||{},a)&&s(r,a);return}const n=i.handlers[e];if(n){if(!t){s(r,e);return}if(t.guid)for(let a=0;a<n.length;a++)n[a].guid===t.guid&&n.splice(a--,1);Db(r,e)}}function _o(r,e,t){const i=Si.has(r)?Si.get(r):{},s=r.parentNode||r.ownerDocument;if(typeof e=="string"?e={type:e,target:r}:e.target||(e.target=r),e=Vd(e),i.dispatcher&&i.dispatcher.call(r,e,t),s&&!e.isPropagationStopped()&&e.bubbles===!0)_o.call(null,s,e,t);else if(!s&&!e.defaultPrevented&&e.target&&e.target[e.type]){Si.has(e.target)||Si.set(e.target,{});const n=Si.get(e.target);e.target[e.type]&&(n.disabled=!0,typeof e.target[e.type]=="function"&&e.target[e.type](),n.disabled=!1)}return!e.defaultPrevented}function Xd(r,e,t){if(Array.isArray(e))return p0(Xd,r,e,t);const i=function(){hi(r,e,i),t.apply(this,arguments)};i.guid=t.guid=t.guid||cr(),Zi(r,e,i)}function m0(r,e,t){const i=function(){hi(r,e,i),t.apply(this,arguments)};i.guid=t.guid=t.guid||cr(),Zi(r,e,i)}var UQ=Object.freeze({__proto__:null,fixEvent:Vd,on:Zi,off:hi,trigger:_o,one:Xd,any:m0});const hr=30,mt=function(r,e,t){e.guid||(e.guid=cr());const i=e.bind(r);return i.guid=t?t+"_"+e.guid:e.guid,i},rs=function(r,e){let t=q.performance.now();return function(...s){const n=q.performance.now();n-t>=e&&(r(...s),t=n)}},rx=function(r,e,t,i=q){let s;const n=()=>{i.clearTimeout(s),s=null},a=function(){const o=this,l=arguments;let u=function(){s=null,u=null,t||r.apply(o,l)};!s&&t&&r.apply(o,l),i.clearTimeout(s),s=i.setTimeout(u,e)};return a.cancel=n,a};var qQ=Object.freeze({__proto__:null,UPDATE_REFRESH_INTERVAL:hr,bind_:mt,throttle:rs,debounce:rx});let Go;class Wi{on(e,t){const i=this.addEventListener;this.addEventListener=()=>{},Zi(this,e,t),this.addEventListener=i}off(e,t){hi(this,e,t)}one(e,t){const i=this.addEventListener;this.addEventListener=()=>{},Xd(this,e,t),this.addEventListener=i}any(e,t){const i=this.addEventListener;this.addEventListener=()=>{},m0(this,e,t),this.addEventListener=i}trigger(e){const t=e.type||e;typeof e=="string"&&(e={type:t}),e=Vd(e),this.allowedEvents_[t]&&this["on"+t]&&this["on"+t](e),_o(this,e)}queueTrigger(e){Go||(Go=new Map);const t=e.type||e;let i=Go.get(this);i||(i=new Map,Go.set(this,i));const s=i.get(t);i.delete(t),q.clearTimeout(s);const n=q.setTimeout(()=>{i.delete(t),i.size===0&&(i=null,Go.delete(this)),this.trigger(e)},0);i.set(t,n)}}Wi.prototype.allowedEvents_={};Wi.prototype.addEventListener=Wi.prototype.on;Wi.prototype.removeEventListener=Wi.prototype.off;Wi.prototype.dispatchEvent=Wi.prototype.trigger;const jd=r=>typeof r.name=="function"?r.name():typeof r.name=="string"?r.name:r.name_?r.name_:r.constructor&&r.constructor.name?r.constructor.name:typeof r,ws=r=>r instanceof Wi||!!r.eventBusEl_&&["on","one","off","trigger"].every(e=>typeof r[e]=="function"),VQ=(r,e)=>{ws(r)?e():(r.eventedCallbacks||(r.eventedCallbacks=[]),r.eventedCallbacks.push(e))},ym=r=>typeof r=="string"&&/\S/.test(r)||Array.isArray(r)&&!!r.length,Ih=(r,e,t)=>{if(!r||!r.nodeName&&!ws(r))throw new Error(`Invalid target for ${jd(e)}#${t}; must be a DOM node or evented object.`)},sx=(r,e,t)=>{if(!ym(r))throw new Error(`Invalid event type for ${jd(e)}#${t}; must be a non-empty string or array.`)},nx=(r,e,t)=>{if(typeof r!="function")throw new Error(`Invalid listener for ${jd(e)}#${t}; must be a function.`)},Hf=(r,e,t)=>{const i=e.length<3||e[0]===r||e[0]===r.eventBusEl_;let s,n,a;return i?(s=r.eventBusEl_,e.length>=3&&e.shift(),[n,a]=e):(s=e[0],n=e[1],a=e[2]),Ih(s,r,t),sx(n,r,t),nx(a,r,t),a=mt(r,a),{isTargetingSelf:i,target:s,type:n,listener:a}},Sn=(r,e,t,i)=>{Ih(r,r,e),r.nodeName?UQ[e](r,t,i):r[e](t,i)},XQ={on(...r){const{isTargetingSelf:e,target:t,type:i,listener:s}=Hf(this,r,"on");if(Sn(t,"on",i,s),!e){const n=()=>this.off(t,i,s);n.guid=s.guid;const a=()=>this.off("dispose",n);a.guid=s.guid,Sn(this,"on","dispose",n),Sn(t,"on","dispose",a)}},one(...r){const{isTargetingSelf:e,target:t,type:i,listener:s}=Hf(this,r,"one");if(e)Sn(t,"one",i,s);else{const n=(...a)=>{this.off(t,i,n),s.apply(null,a)};n.guid=s.guid,Sn(t,"one",i,n)}},any(...r){const{isTargetingSelf:e,target:t,type:i,listener:s}=Hf(this,r,"any");if(e)Sn(t,"any",i,s);else{const n=(...a)=>{this.off(t,i,n),s.apply(null,a)};n.guid=s.guid,Sn(t,"any",i,n)}},off(r,e,t){if(!r||ym(r))hi(this.eventBusEl_,r,e);else{const i=r,s=e;Ih(i,this,"off"),sx(s,this,"off"),nx(t,this,"off"),t=mt(this,t),this.off("dispose",t),i.nodeName?(hi(i,s,t),hi(i,"dispose",t)):ws(i)&&(i.off(s,t),i.off("dispose",t))}},trigger(r,e){Ih(this.eventBusEl_,this,"trigger");const t=r&&typeof r!="string"?r.type:r;if(!ym(t))throw new Error(`Invalid event type for ${jd(this)}#trigger; must be a non-empty string or object with a type key that has a non-empty value.`);return _o(this.eventBusEl_,r,e)}};function g0(r,e={}){const{eventBusKey:t}=e;if(t){if(!r[t].nodeName)throw new Error(`The eventBusKey "${t}" does not refer to an element.`);r.eventBusEl_=r[t]}else r.eventBusEl_=Re("span",{className:"vjs-event-bus"});return Object.assign(r,XQ),r.eventedCallbacks&&r.eventedCallbacks.forEach(i=>{i()}),r.on("dispose",()=>{r.off(),[r,r.el_,r.eventBusEl_].forEach(function(i){i&&Si.has(i)&&Si.delete(i)}),q.setTimeout(()=>{r.eventBusEl_=null},0)}),r}const jQ={state:{},setState(r){typeof r=="function"&&(r=r());let e;return Ea(r,(t,i)=>{this.state[i]!==t&&(e=e||{},e[i]={from:this.state[i],to:t}),this.state[i]=t}),e&&ws(this)&&this.trigger({changes:e,type:"statechanged"}),e}};function ax(r,e){return Object.assign(r,jQ),r.state=Object.assign({},r.state,e),typeof r.handleStateChanged=="function"&&ws(r)&&r.on("statechanged",r.handleStateChanged),r}const Tl=function(r){return typeof r!="string"?r:r.replace(/./,e=>e.toLowerCase())},Et=function(r){return typeof r!="string"?r:r.replace(/./,e=>e.toUpperCase())},ox=function(r,e){return Et(r)===Et(e)};var zQ=Object.freeze({__proto__:null,toLowerCase:Tl,toTitleCase:Et,titleCaseEquals:ox});class ee{constructor(e,t,i){if(!e&&this.play?this.player_=e=this:this.player_=e,this.isDisposed_=!1,this.parentComponent_=null,this.options_=nt({},this.options_),t=this.options_=nt(this.options_,t),this.id_=t.id||t.el&&t.el.id,!this.id_){const s=e&&e.id&&e.id()||"no_player";this.id_=`${s}_component_${cr()}`}this.name_=t.name||null,t.el?this.el_=t.el:t.createEl!==!1&&(this.el_=this.createEl()),t.className&&this.el_&&t.className.split(" ").forEach(s=>this.addClass(s)),["on","off","one","any","trigger"].forEach(s=>{this[s]=void 0}),t.evented!==!1&&(g0(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),ax(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new Set,this.setIntervalIds_=new Set,this.rafIds_=new Set,this.namedRafs_=new Map,this.clearingTimersOnDispose_=!1,t.initChildren!==!1&&this.initChildren(),this.ready(i),t.reportTouchActivity!==!1&&this.enableTouchActivity()}dispose(e={}){if(!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(let t=this.children_.length-1;t>=0;t--)this.children_[t].dispose&&this.children_[t].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&(e.restoreEl?this.el_.parentNode.replaceChild(e.restoreEl,this.el_):this.el_.parentNode.removeChild(this.el_)),this.el_=null),this.player_=null}}isDisposed(){return!!this.isDisposed_}player(){return this.player_}options(e){return e?(this.options_=nt(this.options_,e),this.options_):this.options_}el(){return this.el_}createEl(e,t,i){return Re(e,t,i)}localize(e,t,i=e){const s=this.player_.language&&this.player_.language(),n=this.player_.languages&&this.player_.languages(),a=n&&n[s],o=s&&s.split("-")[0],l=n&&n[o];let u=i;return a&&a[e]?u=a[e]:l&&l[e]&&(u=l[e]),t&&(u=u.replace(/\{(\d+)\}/g,function(c,h){const f=t[h-1];let m=f;return typeof f>"u"&&(m=c),m})),u}handleLanguagechange(){}contentEl(){return this.contentEl_||this.el_}id(){return this.id_}name(){return this.name_}children(){return this.children_}getChildById(e){return this.childIndex_[e]}getChild(e){if(e)return this.childNameIndex_[e]}getDescendant(...e){e=e.reduce((i,s)=>i.concat(s),[]);let t=this;for(let i=0;i<e.length;i++)if(t=t.getChild(e[i]),!t||!t.getChild)return;return t}setIcon(e,t=this.el()){if(!this.player_.options_.experimentalSvgIcons)return;const i="http://www.w3.org/2000/svg",s=Re("span",{className:"vjs-icon-placeholder vjs-svg-icon"},{"aria-hidden":"true"}),n=ce.createElementNS(i,"svg");n.setAttributeNS(null,"viewBox","0 0 512 512");const a=ce.createElementNS(i,"use");return n.appendChild(a),a.setAttributeNS(null,"href",`#vjs-icon-${e}`),s.appendChild(n),this.iconIsSet_?t.replaceChild(s,t.querySelector(".vjs-icon-placeholder")):t.appendChild(s),this.iconIsSet_=!0,s}addChild(e,t={},i=this.children_.length){let s,n;if(typeof e=="string"){n=Et(e);const a=t.componentClass||n;t.name=n;const o=ee.getComponent(a);if(!o)throw new Error(`Component ${a} does not exist`);if(typeof o!="function")return null;s=new o(this.player_||this,t)}else s=e;if(s.parentComponent_&&s.parentComponent_.removeChild(s),this.children_.splice(i,0,s),s.parentComponent_=this,typeof s.id=="function"&&(this.childIndex_[s.id()]=s),n=n||s.name&&Et(s.name()),n&&(this.childNameIndex_[n]=s,this.childNameIndex_[Tl(n)]=s),typeof s.el=="function"&&s.el()){let a=null;this.children_[i+1]&&(this.children_[i+1].el_?a=this.children_[i+1].el_:To(this.children_[i+1])&&(a=this.children_[i+1])),this.contentEl().insertBefore(s.el(),a)}return s}removeChild(e){if(typeof e=="string"&&(e=this.getChild(e)),!e||!this.children_)return;let t=!1;for(let s=this.children_.length-1;s>=0;s--)if(this.children_[s]===e){t=!0,this.children_.splice(s,1);break}if(!t)return;e.parentComponent_=null,this.childIndex_[e.id()]=null,this.childNameIndex_[Et(e.name())]=null,this.childNameIndex_[Tl(e.name())]=null;const i=e.el();i&&i.parentNode===this.contentEl()&&this.contentEl().removeChild(e.el())}initChildren(){const e=this.options_.children;if(e){const t=this.options_,i=a=>{const o=a.name;let l=a.opts;if(t[o]!==void 0&&(l=t[o]),l===!1)return;l===!0&&(l={}),l.playerOptions=this.options_.playerOptions;const u=this.addChild(o,l);u&&(this[o]=u)};let s;const n=ee.getComponent("Tech");Array.isArray(e)?s=e:s=Object.keys(e),s.concat(Object.keys(this.options_).filter(function(a){return!s.some(function(o){return typeof o=="string"?a===o:a===o.name})})).map(a=>{let o,l;return typeof a=="string"?(o=a,l=e[o]||this.options_[o]||{}):(o=a.name,l=a),{name:o,opts:l}}).filter(a=>{const o=ee.getComponent(a.opts.componentClass||Et(a.name));return o&&!n.isTech(o)}).forEach(i)}}buildCSSClass(){return""}ready(e,t=!1){if(e){if(!this.isReady_){this.readyQueue_=this.readyQueue_||[],this.readyQueue_.push(e);return}t?e.call(this):this.setTimeout(e,1)}}triggerReady(){this.isReady_=!0,this.setTimeout(function(){const e=this.readyQueue_;this.readyQueue_=[],e&&e.length>0&&e.forEach(function(t){t.call(this)},this),this.trigger("ready")},1)}$(e,t){return on(e,t||this.contentEl())}$$(e,t){return G_(e,t||this.contentEl())}hasClass(e){return Sl(this.el_,e)}addClass(...e){qn(this.el_,...e)}removeClass(...e){Nd(this.el_,...e)}toggleClass(e,t){V_(this.el_,e,t)}show(){this.removeClass("vjs-hidden")}hide(){this.addClass("vjs-hidden")}lockShowing(){this.addClass("vjs-lock-showing")}unlockShowing(){this.removeClass("vjs-lock-showing")}getAttribute(e){return j_(this.el_,e)}setAttribute(e,t){to(this.el_,e,t)}removeAttribute(e){Fd(this.el_,e)}width(e,t){return this.dimension("width",e,t)}height(e,t){return this.dimension("height",e,t)}dimensions(e,t){this.width(e,!0),this.height(t)}dimension(e,t,i){if(t!==void 0){(t===null||t!==t)&&(t=0),(""+t).indexOf("%")!==-1||(""+t).indexOf("px")!==-1?this.el_.style[e]=t:t==="auto"?this.el_.style[e]="":this.el_.style[e]=t+"px",i||this.trigger("componentresize");return}if(!this.el_)return 0;const s=this.el_.style[e],n=s.indexOf("px");return parseInt(n!==-1?s.slice(0,n):this.el_["offset"+Et(e)],10)}currentDimension(e){let t=0;if(e!=="width"&&e!=="height")throw new Error("currentDimension only accepts width or height value");if(t=ro(this.el_,e),t=parseFloat(t),t===0||isNaN(t)){const i=`offset${Et(e)}`;t=this.el_[i]}return t}currentDimensions(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}}currentWidth(){return this.currentDimension("width")}currentHeight(){return this.currentDimension("height")}getPositions(){const e=this.el_.getBoundingClientRect(),t={x:e.x,y:e.y,width:e.width,height:e.height,top:e.top,right:e.right,bottom:e.bottom,left:e.left},i={x:e.left+e.width/2,y:e.top+e.height/2,width:0,height:0,top:e.top+e.height/2,right:e.left+e.width/2,bottom:e.top+e.height/2,left:e.left+e.width/2};return{boundingClientRect:t,center:i}}focus(){this.el_.focus()}blur(){this.el_.blur()}handleKeyDown(e){this.player_&&(e.key!=="Tab"&&!(this.player_.options_.playerOptions.spatialNavigation&&this.player_.options_.playerOptions.spatialNavigation.enabled)&&e.stopPropagation(),this.player_.handleKeyDown(e))}handleKeyPress(e){this.handleKeyDown(e)}emitTapEvents(){let e=0,t=null;const i=10,s=200;let n;this.on("touchstart",function(o){o.touches.length===1&&(t={pageX:o.touches[0].pageX,pageY:o.touches[0].pageY},e=q.performance.now(),n=!0)}),this.on("touchmove",function(o){if(o.touches.length>1)n=!1;else if(t){const l=o.touches[0].pageX-t.pageX,u=o.touches[0].pageY-t.pageY;Math.sqrt(l*l+u*u)>i&&(n=!1)}});const a=function(){n=!1};this.on("touchleave",a),this.on("touchcancel",a),this.on("touchend",function(o){t=null,n===!0&&q.performance.now()-e<s&&(o.preventDefault(),this.trigger("tap"))})}enableTouchActivity(){if(!this.player()||!this.player().reportUserActivity)return;const e=mt(this.player(),this.player().reportUserActivity);let t;this.on("touchstart",function(){e(),this.clearInterval(t),t=this.setInterval(e,250)});const i=function(s){e(),this.clearInterval(t)};this.on("touchmove",e),this.on("touchend",i),this.on("touchcancel",i)}setTimeout(e,t){var i;return e=mt(this,e),this.clearTimersOnDispose_(),i=q.setTimeout(()=>{this.setTimeoutIds_.has(i)&&this.setTimeoutIds_.delete(i),e()},t),this.setTimeoutIds_.add(i),i}clearTimeout(e){return this.setTimeoutIds_.has(e)&&(this.setTimeoutIds_.delete(e),q.clearTimeout(e)),e}setInterval(e,t){e=mt(this,e),this.clearTimersOnDispose_();const i=q.setInterval(e,t);return this.setIntervalIds_.add(i),i}clearInterval(e){return this.setIntervalIds_.has(e)&&(this.setIntervalIds_.delete(e),q.clearInterval(e)),e}requestAnimationFrame(e){this.clearTimersOnDispose_();var t;return e=mt(this,e),t=q.requestAnimationFrame(()=>{this.rafIds_.has(t)&&this.rafIds_.delete(t),e()}),this.rafIds_.add(t),t}requestNamedAnimationFrame(e,t){this.namedRafs_.has(e)&&this.cancelNamedAnimationFrame(e),this.clearTimersOnDispose_(),t=mt(this,t);const i=this.requestAnimationFrame(()=>{t(),this.namedRafs_.has(e)&&this.namedRafs_.delete(e)});return this.namedRafs_.set(e,i),e}cancelNamedAnimationFrame(e){this.namedRafs_.has(e)&&(this.cancelAnimationFrame(this.namedRafs_.get(e)),this.namedRafs_.delete(e))}cancelAnimationFrame(e){return this.rafIds_.has(e)&&(this.rafIds_.delete(e),q.cancelAnimationFrame(e)),e}clearTimersOnDispose_(){this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",()=>{[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(([e,t])=>{this[e].forEach((i,s)=>this[t](s))}),this.clearingTimersOnDispose_=!1}))}getIsDisabled(){return!!this.el_.disabled}getIsExpresslyInert(){return this.el_.inert&&!this.el_.ownerDocument.documentElement.inert}getIsFocusable(e){return(e||this.el_).tabIndex>=0&&!(this.getIsDisabled()||this.getIsExpresslyInert())}getIsAvailableToBeFocused(e){function t(n){const a=q.getComputedStyle(n,null),o=a.getPropertyValue("visibility");return a.getPropertyValue("display")!=="none"&&!["hidden","collapse"].includes(o)}function i(n){return!(!t(n.parentElement)||!t(n)||n.style.opacity==="0"||q.getComputedStyle(n).height==="0px"||q.getComputedStyle(n).width==="0px")}function s(n){if(n.offsetWidth+n.offsetHeight+n.getBoundingClientRect().height+n.getBoundingClientRect().width===0)return!1;const a={x:n.getBoundingClientRect().left+n.offsetWidth/2,y:n.getBoundingClientRect().top+n.offsetHeight/2};if(a.x<0||a.x>(ce.documentElement.clientWidth||q.innerWidth)||a.y<0||a.y>(ce.documentElement.clientHeight||q.innerHeight))return!1;let o=ce.elementFromPoint(a.x,a.y);for(;o;){if(o===n)return!0;if(o.parentNode)o=o.parentNode;else return!1}}return e||(e=this.el()),!!(s(e)&&i(e)&&(!e.parentElement||e.tabIndex>=0))}static registerComponent(e,t){if(typeof e!="string"||!e)throw new Error(`Illegal component name, "${e}"; must be a non-empty string.`);const i=ee.getComponent("Tech"),s=i&&i.isTech(t),n=ee===t||ee.prototype.isPrototypeOf(t.prototype);if(s||!n){let o;throw s?o="techs must be registered using Tech.registerTech()":o="must be a Component subclass",new Error(`Illegal component, "${e}"; ${o}.`)}e=Et(e),ee.components_||(ee.components_={});const a=ee.getComponent("Player");if(e==="Player"&&a&&a.players){const o=a.players,l=Object.keys(o);if(o&&l.length>0){for(let u=0;u<l.length;u++)if(o[l[u]]!==null)throw new Error("Can not register Player component after player has been created.")}}return ee.components_[e]=t,ee.components_[Tl(e)]=t,t}static getComponent(e){if(!(!e||!ee.components_))return ee.components_[e]}}ee.registerComponent("Component",ee);function ZQ(r,e,t){if(typeof e!="number"||e<0||e>t)throw new Error(`Failed to execute '${r}' on 'TimeRanges': The index provided (${e}) is non-numeric or out of bounds (0-${t}).`)}function Mb(r,e,t,i){return ZQ(r,i,t.length-1),t[i][e]}function Yf(r){let e;return r===void 0||r.length===0?e={length:0,start(){throw new Error("This TimeRanges object is empty")},end(){throw new Error("This TimeRanges object is empty")}}:e={length:r.length,start:Mb.bind(null,"start",0,r),end:Mb.bind(null,"end",1,r)},q.Symbol&&q.Symbol.iterator&&(e[q.Symbol.iterator]=()=>(r||[]).values()),e}function Tr(r,e){return Array.isArray(r)?Yf(r):r===void 0||e===void 0?Yf():Yf([[r,e]])}const lx=function(r,e){r=r<0?0:r;let t=Math.floor(r%60),i=Math.floor(r/60%60),s=Math.floor(r/3600);const n=Math.floor(e/60%60),a=Math.floor(e/3600);return(isNaN(r)||r===1/0)&&(s=i=t="-"),s=s>0||a>0?s+":":"",i=((s||n>=10)&&i<10?"0"+i:i)+":",t=t<10?"0"+t:t,s+i+t};let O0=lx;function ux(r){O0=r}function cx(){O0=lx}function Zn(r,e=r){return O0(r,e)}var WQ=Object.freeze({__proto__:null,createTimeRanges:Tr,createTimeRange:Tr,setFormatTime:ux,resetFormatTime:cx,formatTime:Zn});function hx(r,e){let t=0,i,s;if(!e)return 0;(!r||!r.length)&&(r=Tr(0,0));for(let n=0;n<r.length;n++)i=r.start(n),s=r.end(n),s>e&&(s=e),t+=s-i;return t/e}function kt(r){if(r instanceof kt)return r;typeof r=="number"?this.code=r:typeof r=="string"?this.message=r:ts(r)&&(typeof r.code=="number"&&(this.code=r.code),Object.assign(this,r)),this.message||(this.message=kt.defaultMessages[this.code]||"")}kt.prototype.code=0;kt.prototype.message="";kt.prototype.status=null;kt.prototype.metadata=null;kt.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"];kt.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};kt.MEDIA_ERR_CUSTOM=0;kt.prototype.MEDIA_ERR_CUSTOM=0;kt.MEDIA_ERR_ABORTED=1;kt.prototype.MEDIA_ERR_ABORTED=1;kt.MEDIA_ERR_NETWORK=2;kt.prototype.MEDIA_ERR_NETWORK=2;kt.MEDIA_ERR_DECODE=3;kt.prototype.MEDIA_ERR_DECODE=3;kt.MEDIA_ERR_SRC_NOT_SUPPORTED=4;kt.prototype.MEDIA_ERR_SRC_NOT_SUPPORTED=4;kt.MEDIA_ERR_ENCRYPTED=5;kt.prototype.MEDIA_ERR_ENCRYPTED=5;function _l(r){return r!=null&&typeof r.then=="function"}function zr(r){_l(r)&&r.then(null,e=>{})}const bm=function(r){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce((t,i,s)=>(r[i]&&(t[i]=r[i]),t),{cues:r.cues&&Array.prototype.map.call(r.cues,function(t){return{startTime:t.startTime,endTime:t.endTime,text:t.text,id:t.id}})})},HQ=function(r){const e=r.$$("track"),t=Array.prototype.map.call(e,s=>s.track);return Array.prototype.map.call(e,function(s){const n=bm(s.track);return s.src&&(n.src=s.src),n}).concat(Array.prototype.filter.call(r.textTracks(),function(s){return t.indexOf(s)===-1}).map(bm))},YQ=function(r,e){return r.forEach(function(t){const i=e.addRemoteTextTrack(t).track;!t.src&&t.cues&&t.cues.forEach(s=>i.addCue(s))}),e.textTracks()};var vm={textTracksToJson:HQ,jsonToTextTracks:YQ,trackToJson:bm};const Gf="vjs-modal-dialog";class xo extends ee{constructor(e,t){super(e,t),this.handleKeyDown_=i=>this.handleKeyDown(i),this.close_=i=>this.close(i),this.opened_=this.hasBeenOpened_=this.hasBeenFilled_=!1,this.closeable(!this.options_.uncloseable),this.content(this.options_.content),this.contentEl_=Re("div",{className:`${Gf}-content`},{role:"document"}),this.descEl_=Re("p",{className:`${Gf}-description vjs-control-text`,id:this.el().getAttribute("aria-describedby")}),fn(this.descEl_,this.description()),this.el_.appendChild(this.descEl_),this.el_.appendChild(this.contentEl_)}createEl(){return super.createEl("div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":`${this.id()}_description`,"aria-hidden":"true","aria-label":this.label(),role:"dialog","aria-live":"polite"})}dispose(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,super.dispose()}buildCSSClass(){return`${Gf} vjs-hidden ${super.buildCSSClass()}`}label(){return this.localize(this.options_.label||"Modal Window")}description(){let e=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(e+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),e}open(){if(this.opened_){this.options_.fillAlways&&this.fill();return}const e=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!e.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&e.pause(),this.on("keydown",this.handleKeyDown_),this.hadControls_=e.controls(),e.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}opened(e){return typeof e=="boolean"&&this[e?"open":"close"](),this.opened_}close(){if(!this.opened_)return;const e=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&e.play(),this.off("keydown",this.handleKeyDown_),this.hadControls_&&e.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger({type:"modalclose",bubbles:!0}),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}closeable(e){if(typeof e=="boolean"){const t=this.closeable_=!!e;let i=this.getChild("closeButton");if(t&&!i){const s=this.contentEl_;this.contentEl_=this.el_,i=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=s,this.on(i,"close",this.close_)}!t&&i&&(this.off(i,"close",this.close_),this.removeChild(i),i.dispose())}return this.closeable_}fill(){this.fillWith(this.content())}fillWith(e){const t=this.contentEl(),i=t.parentNode,s=t.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,i.removeChild(t),this.empty(),Y_(t,e),this.trigger("modalfill"),s?i.insertBefore(t,s):i.appendChild(t);const n=this.getChild("closeButton");n&&i.appendChild(n.el_),this.trigger("aftermodalfill")}empty(){this.trigger("beforemodalempty"),qd(this.contentEl()),this.trigger("modalempty")}content(e){return typeof e<"u"&&(this.content_=e),this.content_}conditionalFocus_(){const e=ce.activeElement,t=this.player_.el_;this.previouslyActiveEl_=null,(t.contains(e)||t===e)&&(this.previouslyActiveEl_=e,this.focus())}conditionalBlur_(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)}handleKeyDown(e){if(this.trigger({type:"modalKeydown",originalEvent:e,target:this,bubbles:!0}),e.stopPropagation(),e.key==="Escape"&&this.closeable()){e.preventDefault(),this.close();return}if(e.key!=="Tab")return;const t=this.focusableEls_(),i=this.el_.querySelector(":focus");let s;for(let n=0;n<t.length;n++)if(i===t[n]){s=n;break}ce.activeElement===this.el_&&(s=0),e.shiftKey&&s===0?(t[t.length-1].focus(),e.preventDefault()):!e.shiftKey&&s===t.length-1&&(t[0].focus(),e.preventDefault())}focusableEls_(){const e=this.el_.querySelectorAll("*");return Array.prototype.filter.call(e,t=>(t instanceof q.HTMLAnchorElement||t instanceof q.HTMLAreaElement)&&t.hasAttribute("href")||(t instanceof q.HTMLInputElement||t instanceof q.HTMLSelectElement||t instanceof q.HTMLTextAreaElement||t instanceof q.HTMLButtonElement)&&!t.hasAttribute("disabled")||t instanceof q.HTMLIFrameElement||t instanceof q.HTMLObjectElement||t instanceof q.HTMLEmbedElement||t.hasAttribute("tabindex")&&t.getAttribute("tabindex")!==-1||t.hasAttribute("contenteditable"))}}xo.prototype.options_={pauseOnOpen:!0,temporary:!0};ee.registerComponent("ModalDialog",xo);class Wn extends Wi{constructor(e=[]){super(),this.tracks_=[],Object.defineProperty(this,"length",{get(){return this.tracks_.length}});for(let t=0;t<e.length;t++)this.addTrack(e[t])}addTrack(e){const t=this.tracks_.length;""+t in this||Object.defineProperty(this,t,{get(){return this.tracks_[t]}}),this.tracks_.indexOf(e)===-1&&(this.tracks_.push(e),this.trigger({track:e,type:"addtrack",target:this})),e.labelchange_=()=>{this.trigger({track:e,type:"labelchange",target:this})},ws(e)&&e.addEventListener("labelchange",e.labelchange_)}removeTrack(e){let t;for(let i=0,s=this.length;i<s;i++)if(this[i]===e){t=this[i],t.off&&t.off(),this.tracks_.splice(i,1);break}t&&this.trigger({track:t,type:"removetrack",target:this})}getTrackById(e){let t=null;for(let i=0,s=this.length;i<s;i++){const n=this[i];if(n.id===e){t=n;break}}return t}}Wn.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"};for(const r in Wn.prototype.allowedEvents_)Wn.prototype["on"+r]=null;const Kf=function(r,e){for(let t=0;t<r.length;t++)!Object.keys(r[t]).length||e.id===r[t].id||(r[t].enabled=!1)};class dx extends Wn{constructor(e=[]){for(let t=e.length-1;t>=0;t--)if(e[t].enabled){Kf(e,e[t]);break}super(e),this.changing_=!1}addTrack(e){e.enabled&&Kf(this,e),super.addTrack(e),e.addEventListener&&(e.enabledChange_=()=>{this.changing_||(this.changing_=!0,Kf(this,e),this.changing_=!1,this.trigger("change"))},e.addEventListener("enabledchange",e.enabledChange_))}removeTrack(e){super.removeTrack(e),e.removeEventListener&&e.enabledChange_&&(e.removeEventListener("enabledchange",e.enabledChange_),e.enabledChange_=null)}}const Jf=function(r,e){for(let t=0;t<r.length;t++)!Object.keys(r[t]).length||e.id===r[t].id||(r[t].selected=!1)};class fx extends Wn{constructor(e=[]){for(let t=e.length-1;t>=0;t--)if(e[t].selected){Jf(e,e[t]);break}super(e),this.changing_=!1,Object.defineProperty(this,"selectedIndex",{get(){for(let t=0;t<this.length;t++)if(this[t].selected)return t;return-1},set(){}})}addTrack(e){e.selected&&Jf(this,e),super.addTrack(e),e.addEventListener&&(e.selectedChange_=()=>{this.changing_||(this.changing_=!0,Jf(this,e),this.changing_=!1,this.trigger("change"))},e.addEventListener("selectedchange",e.selectedChange_))}removeTrack(e){super.removeTrack(e),e.removeEventListener&&e.selectedChange_&&(e.removeEventListener("selectedchange",e.selectedChange_),e.selectedChange_=null)}}class y0 extends Wn{addTrack(e){super.addTrack(e),this.queueChange_||(this.queueChange_=()=>this.queueTrigger("change")),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=()=>this.trigger("selectedlanguagechange")),e.addEventListener("modechange",this.queueChange_),["metadata","chapters"].indexOf(e.kind)===-1&&e.addEventListener("modechange",this.triggerSelectedlanguagechange_)}removeTrack(e){super.removeTrack(e),e.removeEventListener&&(this.queueChange_&&e.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&e.removeEventListener("modechange",this.triggerSelectedlanguagechange_))}toJSON(){return this.tracks_.map(e=>e.toJSON())}}class GQ{constructor(e=[]){this.trackElements_=[],Object.defineProperty(this,"length",{get(){return this.trackElements_.length}});for(let t=0,i=e.length;t<i;t++)this.addTrackElement_(e[t])}addTrackElement_(e){const t=this.trackElements_.length;""+t in this||Object.defineProperty(this,t,{get(){return this.trackElements_[t]}}),this.trackElements_.indexOf(e)===-1&&this.trackElements_.push(e)}getTrackElementByTrack_(e){let t;for(let i=0,s=this.trackElements_.length;i<s;i++)if(e===this.trackElements_[i].track){t=this.trackElements_[i];break}return t}removeTrackElement_(e){for(let t=0,i=this.trackElements_.length;t<i;t++)if(e===this.trackElements_[t]){this.trackElements_[t].track&&typeof this.trackElements_[t].track.off=="function"&&this.trackElements_[t].track.off(),typeof this.trackElements_[t].off=="function"&&this.trackElements_[t].off(),this.trackElements_.splice(t,1);break}}}class Rh{constructor(e){Rh.prototype.setCues_.call(this,e),Object.defineProperty(this,"length",{get(){return this.length_}})}setCues_(e){const t=this.length||0;let i=0;const s=e.length;this.cues_=e,this.length_=e.length;const n=function(a){""+a in this||Object.defineProperty(this,""+a,{get(){return this.cues_[a]}})};if(t<s)for(i=t;i<s;i++)n.call(this,i)}getCueById(e){let t=null;for(let i=0,s=this.length;i<s;i++){const n=this[i];if(n.id===e){t=n;break}}return t}}const KQ={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},JQ={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},e$={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},Ib={disabled:"disabled",hidden:"hidden",showing:"showing"};class b0 extends Wi{constructor(e={}){super();const t={id:e.id||"vjs_track_"+cr(),kind:e.kind||"",language:e.language||""};let i=e.label||"";for(const s in t)Object.defineProperty(this,s,{get(){return t[s]},set(){}});Object.defineProperty(this,"label",{get(){return i},set(s){s!==i&&(i=s,this.trigger("labelchange"))}})}}const v0=function(r){return new URL(r,ce.baseURI)},px=function(r){return new URL(r,ce.baseURI).href},S0=function(r){if(typeof r=="string"){const t=r.split("?")[0].replace(/\/+$/,"").match(/\.([^.\/]+)$/);return t?t[1].toLowerCase():""}return""},zd=function(r,e=q.location){return v0(r).origin!==e.origin};var t$=Object.freeze({__proto__:null,parseUrl:v0,getAbsoluteURL:px,getFileExtension:S0,isCrossOrigin:zd});const Rb=function(r,e){const t=new q.WebVTT.Parser(q,q.vttjs,q.WebVTT.StringDecoder()),i=[];t.oncue=function(s){e.addCue(s)},t.onparsingerror=function(s){i.push(s)},t.onflush=function(){e.trigger({type:"loadeddata",target:e})},t.parse(r),i.length>0&&(q.console&&q.console.groupCollapsed&&q.console.groupCollapsed(`Text Track parsing errors for ${e.src}`),i.forEach(s=>qe.error(s)),q.console&&q.console.groupEnd&&q.console.groupEnd()),t.flush()},Lb=function(r,e){const t={uri:r},i=zd(r);i&&(t.cors=i);const s=e.tech_.crossOrigin()==="use-credentials";s&&(t.withCredentials=s),g_(t,mt(this,function(n,a,o){if(n)return qe.error(n,a);e.loaded_=!0,typeof q.WebVTT!="function"?e.tech_&&e.tech_.any(["vttjsloaded","vttjserror"],l=>{if(l.type==="vttjserror"){qe.error(`vttjs failed to load, stopping trying to process ${e.src}`);return}return Rb(o,e)}):Rb(o,e)}))};class Mu extends b0{constructor(e={}){if(!e.tech)throw new Error("A tech was not provided.");const t=nt(e,{kind:e$[e.kind]||"subtitles",language:e.language||e.srclang||""});let i=Ib[t.mode]||"disabled";const s=t.default;(t.kind==="metadata"||t.kind==="chapters")&&(i="hidden"),super(t),this.tech_=t.tech,this.cues_=[],this.activeCues_=[],this.preload_=this.tech_.preloadTextTracks!==!1;const n=new Rh(this.cues_),a=new Rh(this.activeCues_);let o=!1;this.timeupdateHandler=mt(this,function(u={}){if(!this.tech_.isDisposed()){if(!this.tech_.isReady_){u.type!=="timeupdate"&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler));return}this.activeCues=this.activeCues,o&&(this.trigger("cuechange"),o=!1),u.type!=="timeupdate"&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler))}});const l=()=>{this.stopTracking()};this.tech_.one("dispose",l),i!=="disabled"&&this.startTracking(),Object.defineProperties(this,{default:{get(){return s},set(){}},mode:{get(){return i},set(u){Ib[u]&&i!==u&&(i=u,!this.preload_&&i!=="disabled"&&this.cues.length===0&&Lb(this.src,this),this.stopTracking(),i!=="disabled"&&this.startTracking(),this.trigger("modechange"))}},cues:{get(){return this.loaded_?n:null},set(){}},activeCues:{get(){if(!this.loaded_)return null;if(this.cues.length===0)return a;const u=this.tech_.currentTime(),c=[];for(let h=0,f=this.cues.length;h<f;h++){const m=this.cues[h];m.startTime<=u&&m.endTime>=u&&c.push(m)}if(o=!1,c.length!==this.activeCues_.length)o=!0;else for(let h=0;h<c.length;h++)this.activeCues_.indexOf(c[h])===-1&&(o=!0);return this.activeCues_=c,a.setCues_(this.activeCues_),a},set(){}}}),t.src?(this.src=t.src,this.preload_||(this.loaded_=!0),(this.preload_||t.kind!=="subtitles"&&t.kind!=="captions")&&Lb(this.src,this)):this.loaded_=!0}startTracking(){this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler),this.tech_.on("timeupdate",this.timeupdateHandler)}stopTracking(){this.rvf_&&(this.tech_.cancelVideoFrameCallback(this.rvf_),this.rvf_=void 0),this.tech_.off("timeupdate",this.timeupdateHandler)}addCue(e){let t=e;if(!("getCueAsHTML"in t)){t=new q.vttjs.VTTCue(e.startTime,e.endTime,e.text);for(const s in e)s in t||(t[s]=e[s]);t.id=e.id,t.originalCue_=e}const i=this.tech_.textTracks();for(let s=0;s<i.length;s++)i[s]!==this&&i[s].removeCue(t);this.cues_.push(t),this.cues.setCues_(this.cues_)}toJSON(){return vm.trackToJson(this)}removeCue(e){let t=this.cues_.length;for(;t--;){const i=this.cues_[t];if(i===e||i.originalCue_&&i.originalCue_===e){this.cues_.splice(t,1),this.cues.setCues_(this.cues_);break}}}}Mu.prototype.allowedEvents_={cuechange:"cuechange"};class mx extends b0{constructor(e={}){const t=nt(e,{kind:JQ[e.kind]||""});super(t);let i=!1;Object.defineProperty(this,"enabled",{get(){return i},set(s){typeof s!="boolean"||s===i||(i=s,this.trigger("enabledchange"))}}),t.enabled&&(this.enabled=t.enabled),this.loaded_=!0}}class gx extends b0{constructor(e={}){const t=nt(e,{kind:KQ[e.kind]||""});super(t);let i=!1;Object.defineProperty(this,"selected",{get(){return i},set(s){typeof s!="boolean"||s===i||(i=s,this.trigger("selectedchange"))}}),t.selected&&(this.selected=t.selected)}}class Es extends Wi{constructor(e={}){super();let t;const i=new Mu(e);this.kind=i.kind,this.src=i.src,this.srclang=i.language,this.label=i.label,this.default=i.default,Object.defineProperties(this,{readyState:{get(){return t}},track:{get(){return i}}}),t=Es.NONE,i.addEventListener("loadeddata",()=>{t=Es.LOADED,this.trigger({type:"load",target:this})})}}Es.prototype.allowedEvents_={load:"load"};Es.NONE=0;Es.LOADING=1;Es.LOADED=2;Es.ERROR=3;const or={audio:{ListClass:dx,TrackClass:mx,capitalName:"Audio"},video:{ListClass:fx,TrackClass:gx,capitalName:"Video"},text:{ListClass:y0,TrackClass:Mu,capitalName:"Text"}};Object.keys(or).forEach(function(r){or[r].getterName=`${r}Tracks`,or[r].privateName=`${r}Tracks_`});const so={remoteText:{ListClass:y0,TrackClass:Mu,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:GQ,TrackClass:Es,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},vi=Object.assign({},or,so);so.names=Object.keys(so);or.names=Object.keys(or);vi.names=[].concat(so.names).concat(or.names);function i$(r,e,t,i,s={}){const n=r.textTracks();s.kind=e,t&&(s.label=t),i&&(s.language=i),s.tech=r;const a=new vi.text.TrackClass(s);return n.addTrack(a),a}class Be extends ee{constructor(e={},t=function(){}){e.reportTouchActivity=!1,super(null,e,t),this.onDurationChange_=i=>this.onDurationChange(i),this.trackProgress_=i=>this.trackProgress(i),this.trackCurrentTime_=i=>this.trackCurrentTime(i),this.stopTrackingCurrentTime_=i=>this.stopTrackingCurrentTime(i),this.disposeSourceHandler_=i=>this.disposeSourceHandler(i),this.queuedHanders_=new Set,this.hasStarted_=!1,this.on("playing",function(){this.hasStarted_=!0}),this.on("loadstart",function(){this.hasStarted_=!1}),vi.names.forEach(i=>{const s=vi[i];e&&e[s.getterName]&&(this[s.privateName]=e[s.getterName])}),this.featuresProgressEvents||this.manualProgressOn(),this.featuresTimeupdateEvents||this.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(i=>{e[`native${i}Tracks`]===!1&&(this[`featuresNative${i}Tracks`]=!1)}),e.nativeCaptions===!1||e.nativeTextTracks===!1?this.featuresNativeTextTracks=!1:(e.nativeCaptions===!0||e.nativeTextTracks===!0)&&(this.featuresNativeTextTracks=!0),this.featuresNativeTextTracks||this.emulateTextTracks(),this.preloadTextTracks=e.preloadTextTracks!==!1,this.autoRemoteTextTracks_=new vi.text.ListClass,this.initTrackListeners(),e.nativeControlsForTouch||this.emitTapEvents(),this.constructor&&(this.name_=this.constructor.name||"Unknown Tech")}triggerSourceset(e){this.isReady_||this.one("ready",()=>this.setTimeout(()=>this.triggerSourceset(e),1)),this.trigger({src:e,type:"sourceset"})}manualProgressOn(){this.on("durationchange",this.onDurationChange_),this.manualProgress=!0,this.one("ready",this.trackProgress_)}manualProgressOff(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange_)}trackProgress(e){this.stopTrackingProgress(),this.progressInterval=this.setInterval(mt(this,function(){const t=this.bufferedPercent();this.bufferedPercent_!==t&&this.trigger("progress"),this.bufferedPercent_=t,t===1&&this.stopTrackingProgress()}),500)}onDurationChange(e){this.duration_=this.duration()}buffered(){return Tr(0,0)}bufferedPercent(){return hx(this.buffered(),this.duration_)}stopTrackingProgress(){this.clearInterval(this.progressInterval)}manualTimeUpdatesOn(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime_),this.on("pause",this.stopTrackingCurrentTime_)}manualTimeUpdatesOff(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime_),this.off("pause",this.stopTrackingCurrentTime_)}trackCurrentTime(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)}stopTrackingCurrentTime(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}dispose(){this.clearTracks(or.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),super.dispose()}clearTracks(e){e=[].concat(e),e.forEach(t=>{const i=this[`${t}Tracks`]()||[];let s=i.length;for(;s--;){const n=i[s];t==="text"&&this.removeRemoteTextTrack(n),i.removeTrack(n)}})}cleanupAutoTextTracks(){const e=this.autoRemoteTextTracks_||[];let t=e.length;for(;t--;){const i=e[t];this.removeRemoteTextTrack(i)}}reset(){}crossOrigin(){}setCrossOrigin(){}error(e){return e!==void 0&&(this.error_=new kt(e),this.trigger("error")),this.error_}played(){return this.hasStarted_?Tr(0,0):Tr()}play(){}setScrubbing(e){}scrubbing(){}setCurrentTime(e){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}initTrackListeners(){or.names.forEach(e=>{const t=or[e],i=()=>{this.trigger(`${e}trackchange`)},s=this[t.getterName]();s.addEventListener("removetrack",i),s.addEventListener("addtrack",i),this.on("dispose",()=>{s.removeEventListener("removetrack",i),s.removeEventListener("addtrack",i)})})}addWebVttScript_(){if(!q.WebVTT)if(ce.body.contains(this.el())){if(!this.options_["vtt.js"]&&eo(nb)&&Object.keys(nb).length>0){this.trigger("vttjsloaded");return}const e=ce.createElement("script");e.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",e.onload=()=>{this.trigger("vttjsloaded")},e.onerror=()=>{this.trigger("vttjserror")},this.on("dispose",()=>{e.onload=null,e.onerror=null}),q.WebVTT=!0,this.el().parentNode.appendChild(e)}else this.ready(this.addWebVttScript_)}emulateTextTracks(){const e=this.textTracks(),t=this.remoteTextTracks(),i=o=>e.addTrack(o.track),s=o=>e.removeTrack(o.track);t.on("addtrack",i),t.on("removetrack",s),this.addWebVttScript_();const n=()=>this.trigger("texttrackchange"),a=()=>{n();for(let o=0;o<e.length;o++){const l=e[o];l.removeEventListener("cuechange",n),l.mode==="showing"&&l.addEventListener("cuechange",n)}};a(),e.addEventListener("change",a),e.addEventListener("addtrack",a),e.addEventListener("removetrack",a),this.on("dispose",function(){t.off("addtrack",i),t.off("removetrack",s),e.removeEventListener("change",a),e.removeEventListener("addtrack",a),e.removeEventListener("removetrack",a);for(let o=0;o<e.length;o++)e[o].removeEventListener("cuechange",n)})}addTextTrack(e,t,i){if(!e)throw new Error("TextTrack kind is required but was not provided");return i$(this,e,t,i)}createRemoteTextTrack(e){const t=nt(e,{tech:this});return new so.remoteTextEl.TrackClass(t)}addRemoteTextTrack(e={},t){const i=this.createRemoteTextTrack(e);return typeof t!="boolean"&&(t=!1),this.remoteTextTrackEls().addTrackElement_(i),this.remoteTextTracks().addTrack(i.track),t===!1&&this.ready(()=>this.autoRemoteTextTracks_.addTrack(i.track)),i}removeRemoteTextTrack(e){const t=this.remoteTextTrackEls().getTrackElementByTrack_(e);this.remoteTextTrackEls().removeTrackElement_(t),this.remoteTextTracks().removeTrack(e),this.autoRemoteTextTracks_.removeTrack(e)}getVideoPlaybackQuality(){return{}}requestPictureInPicture(){return Promise.reject()}disablePictureInPicture(){return!0}setDisablePictureInPicture(){}requestVideoFrameCallback(e){const t=cr();return!this.isReady_||this.paused()?(this.queuedHanders_.add(t),this.one("playing",()=>{this.queuedHanders_.has(t)&&(this.queuedHanders_.delete(t),e())})):this.requestNamedAnimationFrame(t,e),t}cancelVideoFrameCallback(e){this.queuedHanders_.has(e)?this.queuedHanders_.delete(e):this.cancelNamedAnimationFrame(e)}setPoster(){}playsinline(){}setPlaysinline(){}overrideNativeAudioTracks(e){}overrideNativeVideoTracks(e){}canPlayType(e){return""}static canPlayType(e){return""}static canPlaySource(e,t){return Be.canPlayType(e.type)}static isTech(e){return e.prototype instanceof Be||e instanceof Be||e===Be}static registerTech(e,t){if(Be.techs_||(Be.techs_={}),!Be.isTech(t))throw new Error(`Tech ${e} must be a Tech`);if(!Be.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!Be.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return e=Et(e),Be.techs_[e]=t,Be.techs_[Tl(e)]=t,e!=="Tech"&&Be.defaultTechOrder_.push(e),t}static getTech(e){if(e){if(Be.techs_&&Be.techs_[e])return Be.techs_[e];if(e=Et(e),q&&q.videojs&&q.videojs[e])return qe.warn(`The ${e} tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)`),q.videojs[e]}}}vi.names.forEach(function(r){const e=vi[r];Be.prototype[e.getterName]=function(){return this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName]}});Be.prototype.featuresVolumeControl=!0;Be.prototype.featuresMuteControl=!0;Be.prototype.featuresFullscreenResize=!1;Be.prototype.featuresPlaybackRate=!1;Be.prototype.featuresProgressEvents=!1;Be.prototype.featuresSourceset=!1;Be.prototype.featuresTimeupdateEvents=!1;Be.prototype.featuresNativeTextTracks=!1;Be.prototype.featuresVideoFrameCallback=!1;Be.withSourceHandlers=function(r){r.registerSourceHandler=function(t,i){let s=r.sourceHandlers;s||(s=r.sourceHandlers=[]),i===void 0&&(i=s.length),s.splice(i,0,t)},r.canPlayType=function(t){const i=r.sourceHandlers||[];let s;for(let n=0;n<i.length;n++)if(s=i[n].canPlayType(t),s)return s;return""},r.selectSourceHandler=function(t,i){const s=r.sourceHandlers||[];let n;for(let a=0;a<s.length;a++)if(n=s[a].canHandleSource(t,i),n)return s[a];return null},r.canPlaySource=function(t,i){const s=r.selectSourceHandler(t,i);return s?s.canHandleSource(t,i):""},["seekable","seeking","duration"].forEach(function(t){const i=this[t];typeof i=="function"&&(this[t]=function(){return this.sourceHandler_&&this.sourceHandler_[t]?this.sourceHandler_[t].apply(this.sourceHandler_,arguments):i.apply(this,arguments)})},r.prototype),r.prototype.setSource=function(t){let i=r.selectSourceHandler(t,this.options_);i||(r.nativeSourceHandler?i=r.nativeSourceHandler:qe.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler_),i!==r.nativeSourceHandler&&(this.currentSource_=t),this.sourceHandler_=i.handleSource(t,this,this.options_),this.one("dispose",this.disposeSourceHandler_)},r.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}};ee.registerComponent("Tech",Be);Be.registerTech("Tech",Be);Be.defaultTechOrder_=[];const Vn={},Lh={},Qh={};function r$(r,e){Vn[r]=Vn[r]||[],Vn[r].push(e)}function s$(r,e,t){r.setTimeout(()=>xn(e,Vn[e.type],t,r),1)}function n$(r,e){r.forEach(t=>t.setTech&&t.setTech(e))}function a$(r,e,t){return r.reduceRight(T0(t),e[t]())}function o$(r,e,t,i){return e[t](r.reduce(T0(t),i))}function Qb(r,e,t,i=null){const s="call"+Et(t),n=r.reduce(T0(s),i),a=n===Qh,o=a?null:e[t](n);return c$(r,t,o,a),o}const l$={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1},u$={setCurrentTime:1,setMuted:1,setVolume:1},$b={play:1,pause:1};function T0(r){return(e,t)=>e===Qh?Qh:t[r]?t[r](e):e}function c$(r,e,t,i){for(let s=r.length-1;s>=0;s--){const n=r[s];n[e]&&n[e](i,t)}}function h$(r){Lh.hasOwnProperty(r.id())&&delete Lh[r.id()]}function d$(r,e){const t=Lh[r.id()];let i=null;if(t==null)return i=e(r),Lh[r.id()]=[[e,i]],i;for(let s=0;s<t.length;s++){const[n,a]=t[s];n===e&&(i=a)}return i===null&&(i=e(r),t.push([e,i])),i}function xn(r={},e=[],t,i,s=[],n=!1){const[a,...o]=e;if(typeof a=="string")xn(r,Vn[a],t,i,s,n);else if(a){const l=d$(i,a);if(!l.setSource)return s.push(l),xn(r,o,t,i,s,n);l.setSource(Object.assign({},r),function(u,c){if(u)return xn(r,o,t,i,s,n);s.push(l),xn(c,r.type===c.type?o:Vn[c.type],t,i,s,n)})}else o.length?xn(r,o,t,i,s,n):n?t(r,s):xn(r,Vn["*"],t,i,s,!0)}const f$={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",mpd:"application/dash+xml",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},$h=function(r=""){const e=S0(r);return f$[e.toLowerCase()]||""},p$=(r,e)=>{if(!e)return"";if(r.cache_.source.src===e&&r.cache_.source.type)return r.cache_.source.type;const t=r.cache_.sources.filter(s=>s.src===e);if(t.length)return t[0].type;const i=r.$$("source");for(let s=0;s<i.length;s++){const n=i[s];if(n.type&&n.src&&n.src===e)return n.type}return $h(e)},Ox=function(r){if(Array.isArray(r)){let e=[];r.forEach(function(t){t=Ox(t),Array.isArray(t)?e=e.concat(t):ts(t)&&e.push(t)}),r=e}else typeof r=="string"&&r.trim()?r=[Bb({src:r})]:ts(r)&&typeof r.src=="string"&&r.src&&r.src.trim()?r=[Bb(r)]:r=[];return r};function Bb(r){if(!r.type){const e=$h(r.src);e&&(r.type=e)}return r}var m$=`<svg xmlns="http://www.w3.org/2000/svg">
  <defs>
    <symbol viewBox="0 0 48 48" id="vjs-icon-play">
      <path d="M16 10v28l22-14z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-pause">
      <path d="M12 38h8V10h-8v28zm16-28v28h8V10h-8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-audio">
      <path d="M24 2C14.06 2 6 10.06 6 20v14c0 3.31 2.69 6 6 6h6V24h-8v-4c0-7.73 6.27-14 14-14s14 6.27 14 14v4h-8v16h6c3.31 0 6-2.69 6-6V20c0-9.94-8.06-18-18-18z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-captions">
      <path d="M38 8H10c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h28c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zM22 22h-3v-1h-4v6h4v-1h3v2a2 2 0 0 1-2 2h-6a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2zm14 0h-3v-1h-4v6h4v-1h3v2a2 2 0 0 1-2 2h-6a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-subtitles">
      <path d="M40 8H8c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h32c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zM8 24h8v4H8v-4zm20 12H8v-4h20v4zm12 0h-8v-4h8v4zm0-8H20v-4h20v4z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-fullscreen-enter">
      <path d="M14 28h-4v10h10v-4h-6v-6zm-4-8h4v-6h6v-4H10v10zm24 14h-6v4h10V28h-4v6zm-6-24v4h6v6h4V10H28z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-fullscreen-exit">
      <path d="M10 32h6v6h4V28H10v4zm6-16h-6v4h10V10h-4v6zm12 22h4v-6h6v-4H28v10zm4-22v-6h-4v10h10v-4h-6z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-play-circle">
      <path d="M20 33l12-9-12-9v18zm4-29C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-mute">
      <path d="M33 24c0-3.53-2.04-6.58-5-8.05v4.42l4.91 4.91c.06-.42.09-.85.09-1.28zm5 0c0 1.88-.41 3.65-1.08 5.28l3.03 3.03C41.25 29.82 42 27 42 24c0-8.56-5.99-15.72-14-17.54v4.13c5.78 1.72 10 7.07 10 13.41zM8.55 6L6 8.55 15.45 18H6v12h8l10 10V26.55l8.51 8.51c-1.34 1.03-2.85 1.86-4.51 2.36v4.13a17.94 17.94 0 0 0 7.37-3.62L39.45 42 42 39.45l-18-18L8.55 6zM24 8l-4.18 4.18L24 16.36V8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-low">
      <path d="M14 18v12h8l10 10V8L22 18h-8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-medium">
      <path d="M37 24c0-3.53-2.04-6.58-5-8.05v16.11c2.96-1.48 5-4.53 5-8.06zm-27-6v12h8l10 10V8L18 18h-8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-high">
      <path d="M6 18v12h8l10 10V8L14 18H6zm27 6c0-3.53-2.04-6.58-5-8.05v16.11c2.96-1.48 5-4.53 5-8.06zM28 6.46v4.13c5.78 1.72 10 7.07 10 13.41s-4.22 11.69-10 13.41v4.13c8.01-1.82 14-8.97 14-17.54S36.01 8.28 28 6.46z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-spinner">
      <path d="M18.8 21l9.53-16.51C26.94 4.18 25.49 4 24 4c-4.8 0-9.19 1.69-12.64 4.51l7.33 12.69.11-.2zm24.28-3c-1.84-5.85-6.3-10.52-11.99-12.68L23.77 18h19.31zm.52 2H28.62l.58 1 9.53 16.5C41.99 33.94 44 29.21 44 24c0-1.37-.14-2.71-.4-4zm-26.53 4l-7.8-13.5C6.01 14.06 4 18.79 4 24c0 1.37.14 2.71.4 4h14.98l-2.31-4zM4.92 30c1.84 5.85 6.3 10.52 11.99 12.68L24.23 30H4.92zm22.54 0l-7.8 13.51c1.4.31 2.85.49 4.34.49 4.8 0 9.19-1.69 12.64-4.51L29.31 26.8 27.46 30z"></path>
    </symbol>
    <symbol viewBox="0 0 24 24" id="vjs-icon-hd">
      <path d="M19 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-8 12H9.5v-2h-2v2H6V9h1.5v2.5h2V9H11v6zm2-6h4c.55 0 1 .45 1 1v4c0 .55-.45 1-1 1h-4V9zm1.5 4.5h2v-3h-2v3z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-chapters">
      <path d="M6 26h4v-4H6v4zm0 8h4v-4H6v4zm0-16h4v-4H6v4zm8 8h28v-4H14v4zm0 8h28v-4H14v4zm0-20v4h28v-4H14z"></path>
    </symbol>
    <symbol viewBox="0 0 40 40" id="vjs-icon-downloading">
      <path d="M18.208 36.875q-3.208-.292-5.979-1.729-2.771-1.438-4.812-3.729-2.042-2.292-3.188-5.229-1.146-2.938-1.146-6.23 0-6.583 4.334-11.416 4.333-4.834 10.833-5.5v3.166q-5.167.75-8.583 4.646Q6.25 14.75 6.25 19.958q0 5.209 3.396 9.104 3.396 3.896 8.562 4.646zM20 28.417L11.542 20l2.083-2.083 4.917 4.916v-11.25h2.916v11.25l4.875-4.916L28.417 20zm1.792 8.458v-3.167q1.833-.25 3.541-.958 1.709-.708 3.167-1.875l2.333 2.292q-1.958 1.583-4.25 2.541-2.291.959-4.791 1.167zm6.791-27.792q-1.541-1.125-3.25-1.854-1.708-.729-3.541-1.021V3.042q2.5.25 4.77 1.208 2.271.958 4.271 2.5zm4.584 21.584l-2.25-2.25q1.166-1.5 1.854-3.209.687-1.708.937-3.541h3.209q-.292 2.5-1.229 4.791-.938 2.292-2.521 4.209zm.541-12.417q-.291-1.833-.958-3.562-.667-1.73-1.833-3.188l2.375-2.208q1.541 1.916 2.458 4.208.917 2.292 1.167 4.75z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download">
      <path d="M10.8 40.55q-1.35 0-2.375-1T7.4 37.15v-7.7h3.4v7.7h26.35v-7.7h3.4v7.7q0 1.4-1 2.4t-2.4 1zM24 32.1L13.9 22.05l2.45-2.45 5.95 5.95V7.15h3.4v18.4l5.95-5.95 2.45 2.45z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download-done">
      <path d="M9.8 40.5v-3.45h28.4v3.45zm9.2-9.05L7.4 19.85l2.45-2.35L19 26.65l19.2-19.2 2.4 2.4z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download-off">
      <path d="M4.9 4.75L43.25 43.1 41 45.3l-4.75-4.75q-.05.05-.075.025-.025-.025-.075-.025H10.8q-1.35 0-2.375-1T7.4 37.15v-7.7h3.4v7.7h22.05l-7-7-1.85 1.8L13.9 21.9l1.85-1.85L2.7 7zm26.75 14.7l2.45 2.45-3.75 3.8-2.45-2.5zM25.7 7.15V21.1l-3.4-3.45V7.15z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-share">
      <path d="M36 32.17c-1.52 0-2.89.59-3.93 1.54L17.82 25.4c.11-.45.18-.92.18-1.4s-.07-.95-.18-1.4l14.1-8.23c1.07 1 2.5 1.62 4.08 1.62 3.31 0 6-2.69 6-6s-2.69-6-6-6-6 2.69-6 6c0 .48.07.95.18 1.4l-14.1 8.23c-1.07-1-2.5-1.62-4.08-1.62-3.31 0-6 2.69-6 6s2.69 6 6 6c1.58 0 3.01-.62 4.08-1.62l14.25 8.31c-.1.42-.16.86-.16 1.31A5.83 5.83 0 1 0 36 32.17z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-cog">
      <path d="M38.86 25.95c.08-.64.14-1.29.14-1.95s-.06-1.31-.14-1.95l4.23-3.31c.38-.3.49-.84.24-1.28l-4-6.93c-.25-.43-.77-.61-1.22-.43l-4.98 2.01c-1.03-.79-2.16-1.46-3.38-1.97L29 4.84c-.09-.47-.5-.84-1-.84h-8c-.5 0-.91.37-.99.84l-.75 5.3a14.8 14.8 0 0 0-3.38 1.97L9.9 10.1a1 1 0 0 0-1.22.43l-4 6.93c-.25.43-.14.97.24 1.28l4.22 3.31C9.06 22.69 9 23.34 9 24s.06 1.31.14 1.95l-4.22 3.31c-.38.3-.49.84-.24 1.28l4 6.93c.25.43.77.61 1.22.43l4.98-2.01c1.03.79 2.16 1.46 3.38 1.97l.75 5.3c.08.47.49.84.99.84h8c.5 0 .91-.37.99-.84l.75-5.3a14.8 14.8 0 0 0 3.38-1.97l4.98 2.01a1 1 0 0 0 1.22-.43l4-6.93c.25-.43.14-.97-.24-1.28l-4.22-3.31zM24 31c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-square">
      <path d="M36 8H12c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h24c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zm0 28H12V12h24v24z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-circle">
      <circle cx="24" cy="24" r="20"></circle>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-circle-outline">
      <path d="M24 4C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-circle-inner-circle">
      <path d="M24 4C12.97 4 4 12.97 4 24s8.97 20 20 20 20-8.97 20-20S35.03 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16zm6-16c0 3.31-2.69 6-6 6s-6-2.69-6-6 2.69-6 6-6 6 2.69 6 6z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-cancel">
      <path d="M24 4C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm10 27.17L31.17 34 24 26.83 16.83 34 14 31.17 21.17 24 14 16.83 16.83 14 24 21.17 31.17 14 34 16.83 26.83 24 34 31.17z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-replay">
      <path d="M24 10V2L14 12l10 10v-8c6.63 0 12 5.37 12 12s-5.37 12-12 12-12-5.37-12-12H8c0 8.84 7.16 16 16 16s16-7.16 16-16-7.16-16-16-16z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-repeat">
      <path d="M14 14h20v6l8-8-8-8v6H10v12h4v-8zm20 20H14v-6l-8 8 8 8v-6h24V26h-4v8z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-5">
      <path d="M17.689 98l-8.697 8.696 8.697 8.697 2.486-2.485-4.32-4.319h1.302c4.93 0 9.071 1.722 12.424 5.165 3.352 3.443 5.029 7.638 5.029 12.584h3.55c0-2.958-.553-5.73-1.658-8.313-1.104-2.583-2.622-4.841-4.555-6.774-1.932-1.932-4.19-3.45-6.773-4.555-2.584-1.104-5.355-1.657-8.313-1.657H15.5l4.615-4.615zm-8.08 21.659v13.861h11.357v5.008H9.609V143h12.7c.834 0 1.55-.298 2.146-.894.596-.597.895-1.31.895-2.145v-7.781c0-.835-.299-1.55-.895-2.147a2.929 2.929 0 0 0-2.147-.894h-8.227v-5.096H25.35v-4.384z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-10">
      <path d="M42.315 125.63c0-4.997-1.694-9.235-5.08-12.713-3.388-3.479-7.571-5.218-12.552-5.218h-1.315l4.363 4.363-2.51 2.51-8.787-8.786L25.221 97l2.45 2.45-4.662 4.663h1.375c2.988 0 5.788.557 8.397 1.673 2.61 1.116 4.892 2.65 6.844 4.602 1.953 1.953 3.487 4.234 4.602 6.844 1.116 2.61 1.674 5.41 1.674 8.398zM8.183 142v-19.657H3.176V117.8h9.643V142zm13.63 0c-1.156 0-2.127-.393-2.912-1.178-.778-.778-1.168-1.746-1.168-2.902v-16.04c0-1.156.393-2.127 1.178-2.912.779-.779 1.746-1.168 2.902-1.168h7.696c1.156 0 2.126.392 2.911 1.177.779.78 1.168 1.747 1.168 2.903v16.04c0 1.156-.392 2.127-1.177 2.912-.779.779-1.746 1.168-2.902 1.168zm.556-4.636h6.583v-15.02H22.37z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-30">
      <path d="M26.047 97l-8.733 8.732 8.733 8.733 2.496-2.494-4.336-4.338h1.307c4.95 0 9.108 1.73 12.474 5.187 3.367 3.458 5.051 7.668 5.051 12.635h3.565c0-2.97-.556-5.751-1.665-8.346-1.109-2.594-2.633-4.862-4.574-6.802-1.94-1.941-4.208-3.466-6.803-4.575-2.594-1.109-5.375-1.664-8.345-1.664H23.85l4.634-4.634zM2.555 117.531v4.688h10.297v5.25H5.873v4.687h6.979v5.156H2.555V142H13.36c1.061 0 1.95-.395 2.668-1.186.718-.79 1.076-1.772 1.076-2.94v-16.218c0-1.168-.358-2.149-1.076-2.94-.717-.79-1.607-1.185-2.668-1.185zm22.482.14c-1.149 0-2.11.39-2.885 1.165-.78.78-1.172 1.744-1.172 2.893v15.943c0 1.149.388 2.11 1.163 2.885.78.78 1.745 1.172 2.894 1.172h7.649c1.148 0 2.11-.388 2.884-1.163.78-.78 1.17-1.745 1.17-2.894v-15.943c0-1.15-.386-2.111-1.16-2.885-.78-.78-1.746-1.172-2.894-1.172zm.553 4.518h6.545v14.93H25.59z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-5">
      <path d="M29.508 97l-2.431 2.43 4.625 4.625h-1.364c-2.965 0-5.742.554-8.332 1.66-2.589 1.107-4.851 2.629-6.788 4.566-1.937 1.937-3.458 4.2-4.565 6.788-1.107 2.59-1.66 5.367-1.66 8.331h3.557c0-4.957 1.68-9.16 5.04-12.611 3.36-3.45 7.51-5.177 12.451-5.177h1.304l-4.326 4.33 2.49 2.49 8.715-8.716zm-9.783 21.61v13.89h11.382v5.018H19.725V142h12.727a2.93 2.93 0 0 0 2.15-.896 2.93 2.93 0 0 0 .896-2.15v-7.798c0-.837-.299-1.554-.896-2.152a2.93 2.93 0 0 0-2.15-.896h-8.245V123h11.29v-4.392z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-10">
      <path d="M23.119 97l-2.386 2.383 4.538 4.538h-1.339c-2.908 0-5.633.543-8.173 1.63-2.54 1.085-4.76 2.577-6.66 4.478-1.9 1.9-3.392 4.12-4.478 6.66-1.085 2.54-1.629 5.264-1.629 8.172h3.49c0-4.863 1.648-8.986 4.944-12.372 3.297-3.385 7.368-5.078 12.216-5.078h1.279l-4.245 4.247 2.443 2.442 8.55-8.55zm-9.52 21.45v4.42h4.871V142h4.513v-23.55zm18.136 0c-1.125 0-2.066.377-2.824 1.135-.764.764-1.148 1.709-1.148 2.834v15.612c0 1.124.38 2.066 1.139 2.824.764.764 1.708 1.145 2.833 1.145h7.489c1.125 0 2.066-.378 2.824-1.136.764-.764 1.145-1.709 1.145-2.833v-15.612c0-1.125-.378-2.067-1.136-2.825-.764-.764-1.708-1.145-2.833-1.145zm.54 4.42h6.408v14.617h-6.407z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-30">
      <path d="M25.549 97l-2.437 2.434 4.634 4.635H26.38c-2.97 0-5.753.555-8.347 1.664-2.594 1.109-4.861 2.633-6.802 4.574-1.94 1.94-3.465 4.207-4.574 6.802-1.109 2.594-1.664 5.377-1.664 8.347h3.565c0-4.967 1.683-9.178 5.05-12.636 3.366-3.458 7.525-5.187 12.475-5.187h1.307l-4.335 4.338 2.495 2.494 8.732-8.732zm-11.553 20.53v4.689h10.297v5.249h-6.978v4.688h6.978v5.156H13.996V142h10.808c1.06 0 1.948-.395 2.666-1.186.718-.79 1.077-1.771 1.077-2.94v-16.217c0-1.169-.36-2.15-1.077-2.94-.718-.79-1.605-1.186-2.666-1.186zm21.174.168c-1.149 0-2.11.389-2.884 1.163-.78.78-1.172 1.745-1.172 2.894v15.942c0 1.15.388 2.11 1.162 2.885.78.78 1.745 1.17 2.894 1.17h7.649c1.149 0 2.11-.386 2.885-1.16.78-.78 1.17-1.746 1.17-2.895v-15.942c0-1.15-.387-2.11-1.161-2.885-.78-.78-1.745-1.172-2.894-1.172zm.552 4.516h6.542v14.931h-6.542z"></path>
    </symbol>
    <symbol viewBox="0 0 512 512" id="vjs-icon-audio-description">
      <g fill-rule="evenodd"><path d="M227.29 381.351V162.993c50.38-1.017 89.108-3.028 117.631 17.126 27.374 19.342 48.734 56.965 44.89 105.325-4.067 51.155-41.335 94.139-89.776 98.475-24.085 2.155-71.972 0-71.972 0s-.84-1.352-.773-2.568m48.755-54.804c31.43 1.26 53.208-16.633 56.495-45.386 4.403-38.51-21.188-63.552-58.041-60.796v103.612c-.036 1.466.575 2.22 1.546 2.57"></path><path d="M383.78 381.328c13.336 3.71 17.387-11.06 23.215-21.408 12.722-22.571 22.294-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.51c-.587 3.874 2.226 7.315 3.865 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894"></path><path d="M425.154 381.328c13.336 3.71 17.384-11.061 23.215-21.408 12.721-22.571 22.291-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.511c-.586 3.874 2.226 7.315 3.866 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894"></path><path d="M466.26 381.328c13.337 3.71 17.385-11.061 23.216-21.408 12.722-22.571 22.292-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.51c-.587 3.874 2.225 7.315 3.865 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894M4.477 383.005H72.58l18.573-28.484 64.169-.135s.065 19.413.065 28.62h48.756V160.307h-58.816c-5.653 9.537-140.85 222.697-140.85 222.697zm152.667-145.282v71.158l-40.453-.27 40.453-70.888z"></path></g>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-next-item">
      <path d="M12 36l17-12-17-12v24zm20-24v24h4V12h-4z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-previous-item">
      <path d="M12 12h4v24h-4zm7 12l17 12V12z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-shuffle">
      <path d="M21.17 18.34L10.83 8 8 10.83l10.34 10.34 2.83-2.83zM29 8l4.09 4.09L8 37.17 10.83 40l25.09-25.09L40 19V8H29zm.66 18.83l-2.83 2.83 6.26 6.26L29 40h11V29l-4.09 4.09-6.25-6.26z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-cast">
      <path d="M42 6H6c-2.21 0-4 1.79-4 4v6h4v-6h36v28H28v4h14c2.21 0 4-1.79 4-4V10c0-2.21-1.79-4-4-4zM2 36v6h6c0-3.31-2.69-6-6-6zm0-8v4c5.52 0 10 4.48 10 10h4c0-7.73-6.27-14-14-14zm0-8v4c9.94 0 18 8.06 18 18h4c0-12.15-9.85-22-22-22z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-picture-in-picture-enter">
      <path d="M38 22H22v11.99h16V22zm8 16V9.96C46 7.76 44.2 6 42 6H6C3.8 6 2 7.76 2 9.96V38c0 2.2 1.8 4 4 4h36c2.2 0 4-1.8 4-4zm-4 .04H6V9.94h36v28.1z"></path>
    </symbol>
    <symbol viewBox="0 0 22 18" id="vjs-icon-picture-in-picture-exit">
      <path d="M18 4H4v10h14V4zm4 12V1.98C22 .88 21.1 0 20 0H2C.9 0 0 .88 0 1.98V16c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2zm-2 .02H2V1.97h18v14.05z"></path>
      <path fill="none" d="M-1-3h24v24H-1z"></path>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-facebook">
      <path d="M1343 12v264h-157q-86 0-116 36t-30 108v189h293l-39 296h-254v759H734V905H479V609h255V391q0-186 104-288.5T1115 0q147 0 228 12z"></path>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-linkedin">
      <path d="M477 625v991H147V625h330zm21-306q1 73-50.5 122T312 490h-2q-82 0-132-49t-50-122q0-74 51.5-122.5T314 148t133 48.5T498 319zm1166 729v568h-329v-530q0-105-40.5-164.5T1168 862q-63 0-105.5 34.5T999 982q-11 30-11 81v553H659q2-399 2-647t-1-296l-1-48h329v144h-2q20-32 41-56t56.5-52 87-43.5T1285 602q171 0 275 113.5t104 332.5z"></path>
    </symbol>
    <symbol viewBox="0 0 1200 1227" id="vjs-icon-twitter">
      <path d="M714.163 519.284L1160.89 0H1055.03L667.137 450.887L357.328 0H0L468.492 681.821L0 1226.37H105.866L515.491 750.218L842.672 1226.37H1200L714.137 519.284H714.163ZM569.165 687.828L521.697 619.934L144.011 79.6944H306.615L611.412 515.685L658.88 583.579L1055.08 1150.3H892.476L569.165 687.854V687.828Z"/>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-tumblr">
      <path d="M1328 1329l80 237q-23 35-111 66t-177 32q-104 2-190.5-26T787 1564t-95-106-55.5-120-16.5-118V676H452V461q72-26 129-69.5t91-90 58-102 34-99T779 12q1-5 4.5-8.5T791 0h244v424h333v252h-334v518q0 30 6.5 56t22.5 52.5 49.5 41.5 81.5 14q78-2 134-29z"></path>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-pinterest">
      <path d="M1664 896q0 209-103 385.5T1281.5 1561 896 1664q-111 0-218-32 59-93 78-164 9-34 54-211 20 39 73 67.5t114 28.5q121 0 216-68.5t147-188.5 52-270q0-114-59.5-214T1180 449t-255-63q-105 0-196 29t-154.5 77-109 110.5-67 129.5T377 866q0 104 40 183t117 111q30 12 38-20 2-7 8-31t8-30q6-23-11-43-51-61-51-151 0-151 104.5-259.5T904 517q151 0 235.5 82t84.5 213q0 170-68.5 289T980 1220q-61 0-98-43.5T859 1072q8-35 26.5-93.5t30-103T927 800q0-50-27-83t-77-33q-62 0-105 57t-43 142q0 73 25 122l-99 418q-17 70-13 177-206-91-333-281T128 896q0-209 103-385.5T510.5 231 896 128t385.5 103T1561 510.5 1664 896z"></path>
    </symbol>
  </defs>
</svg>`;const Nb=Ph?10009:Dh?461:8,ha={codes:{play:415,pause:19,ff:417,rw:412,back:Nb},names:{415:"play",19:"pause",417:"ff",412:"rw",[Nb]:"back"},isEventKey(r,e){return e=e.toLowerCase(),!!(this.names[r.keyCode]&&this.names[r.keyCode]===e)},getEventName(r){if(this.names[r.keyCode])return this.names[r.keyCode];if(this.codes[r.code]){const e=this.codes[r.code];return this.names[e]}return null}},Fb=5;class g$ extends Wi{constructor(e){super(),this.player_=e,this.focusableComponents=[],this.isListening_=!1,this.isPaused_=!1,this.onKeyDown_=this.onKeyDown_.bind(this),this.lastFocusedComponent_=null}start(){this.isListening_||(this.player_.on("keydown",this.onKeyDown_),this.player_.on("modalKeydown",this.onKeyDown_),this.player_.on("loadedmetadata",()=>{this.focus(this.updateFocusableComponents()[0])}),this.player_.on("modalclose",()=>{this.refocusComponent()}),this.player_.on("focusin",this.handlePlayerFocus_.bind(this)),this.player_.on("focusout",this.handlePlayerBlur_.bind(this)),this.isListening_=!0,this.player_.errorDisplay&&this.player_.errorDisplay.on("aftermodalfill",()=>{this.updateFocusableComponents(),this.focusableComponents.length&&(this.focusableComponents.length>1?this.focusableComponents[1].focus():this.focusableComponents[0].focus())}))}stop(){this.player_.off("keydown",this.onKeyDown_),this.isListening_=!1}onKeyDown_(e){const t=e.originalEvent?e.originalEvent:e;if(["ArrowLeft","ArrowRight","ArrowUp","ArrowDown"].includes(t.key)){if(this.isPaused_)return;t.preventDefault();const i=t.key.substring(5).toLowerCase();this.move(i)}else if(ha.isEventKey(t,"play")||ha.isEventKey(t,"pause")||ha.isEventKey(t,"ff")||ha.isEventKey(t,"rw")){t.preventDefault();const i=ha.getEventName(t);this.performMediaAction_(i)}else ha.isEventKey(t,"Back")&&e.target&&typeof e.target.closeable=="function"&&e.target.closeable()&&(t.preventDefault(),e.target.close())}performMediaAction_(e){if(this.player_)switch(e){case"play":this.player_.paused()&&this.player_.play();break;case"pause":this.player_.paused()||this.player_.pause();break;case"ff":this.userSeek_(this.player_.currentTime()+Fb);break;case"rw":this.userSeek_(this.player_.currentTime()-Fb);break}}userSeek_(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(e)}pause(){this.isPaused_=!0}resume(){this.isPaused_=!1}handlePlayerBlur_(e){const t=e.relatedTarget;let i=null;const s=this.getCurrentComponent(e.target);t&&(i=!!t.closest(".video-js"),t.classList.contains("vjs-text-track-settings")&&!this.isPaused_&&this.searchForTrackSelect_()),(!e.currentTarget.contains(e.relatedTarget)&&!i||!t)&&(s&&s.name()==="CloseButton"?this.refocusComponent():(this.pause(),s&&s.el()&&(this.lastFocusedComponent_=s)))}handlePlayerFocus_(){this.getCurrentComponent()&&this.getCurrentComponent().getIsFocusable()&&this.resume()}updateFocusableComponents(){const e=this.player_,t=[];function i(s){for(const n of s)n.hasOwnProperty("el_")&&n.getIsFocusable()&&n.getIsAvailableToBeFocused(n.el())&&t.push(n),n.hasOwnProperty("children_")&&n.children_.length>0&&i(n.children_)}return e.children_.forEach(s=>{if(s.hasOwnProperty("el_"))if(s.getIsFocusable&&s.getIsAvailableToBeFocused&&s.getIsFocusable()&&s.getIsAvailableToBeFocused(s.el())){t.push(s);return}else s.hasOwnProperty("children_")&&s.children_.length>0?i(s.children_):s.hasOwnProperty("items")&&s.items.length>0?i(s.items):this.findSuitableDOMChild(s)&&t.push(s);if(s.name_==="ErrorDisplay"&&s.opened_){const n=s.el_.querySelector(".vjs-errors-ok-button-container");n&&n.querySelectorAll("button").forEach((o,l)=>{t.push({name:()=>"ModalButton"+(l+1),el:()=>o,getPositions:()=>{const u=o.getBoundingClientRect(),c={x:u.x,y:u.y,width:u.width,height:u.height,top:u.top,right:u.right,bottom:u.bottom,left:u.left},h={x:u.left+u.width/2,y:u.top+u.height/2,width:0,height:0,top:u.top+u.height/2,right:u.left+u.width/2,bottom:u.top+u.height/2,left:u.left+u.width/2};return{boundingClientRect:c,center:h}},getIsAvailableToBeFocused:()=>!0,getIsFocusable:u=>!0,focus:()=>o.focus()})})}}),this.focusableComponents=t,this.focusableComponents}findSuitableDOMChild(e){function t(i){if(e.getIsFocusable(i)&&e.getIsAvailableToBeFocused(i))return i;for(let s=0;s<i.children.length;s++){const n=i.children[s],a=t(n);if(a)return a}return null}return e.el()?t(e.el()):null}getCurrentComponent(e){this.updateFocusableComponents();const t=e||document.activeElement;if(this.focusableComponents.length){for(const i of this.focusableComponents)if(i.el()===t)return i}}add(e){const t=[...this.focusableComponents];e.hasOwnProperty("el_")&&e.getIsFocusable()&&e.getIsAvailableToBeFocused(e.el())&&t.push(e),this.focusableComponents=t,this.trigger({type:"focusableComponentsChanged",focusableComponents:this.focusableComponents})}remove(e){for(let t=0;t<this.focusableComponents.length;t++)if(this.focusableComponents[t].name()===e.name()){this.focusableComponents.splice(t,1),this.trigger({type:"focusableComponentsChanged",focusableComponents:this.focusableComponents});return}}clear(){this.focusableComponents.length>0&&(this.focusableComponents=[],this.trigger({type:"focusableComponentsChanged",focusableComponents:this.focusableComponents}))}move(e){const t=this.getCurrentComponent();if(!t)return;const i=t.getPositions(),s=this.focusableComponents.filter(a=>a!==t&&this.isInDirection_(i.boundingClientRect,a.getPositions().boundingClientRect,e)),n=this.findBestCandidate_(i.center,s,e);n?this.focus(n):this.trigger({type:"endOfFocusableComponents",direction:e,focusedComponent:t})}findBestCandidate_(e,t,i){let s=1/0,n=null;for(const a of t){const o=a.getPositions().center,l=this.calculateDistance_(e,o,i);l<s&&(s=l,n=a)}return n}isInDirection_(e,t,i){switch(i){case"right":return t.left>=e.right;case"left":return t.right<=e.left;case"down":return t.top>=e.bottom;case"up":return t.bottom<=e.top;default:return!1}}refocusComponent(){if(this.lastFocusedComponent_){this.player_.userActive()||this.player_.userActive(!0),this.updateFocusableComponents();for(let e=0;e<this.focusableComponents.length;e++)if(this.focusableComponents[e].name()===this.lastFocusedComponent_.name()){this.focus(this.focusableComponents[e]);return}}else this.focus(this.updateFocusableComponents()[0])}focus(e){typeof e=="object"&&(e.getIsAvailableToBeFocused(e.el())?e.focus():this.findSuitableDOMChild(e)&&this.findSuitableDOMChild(e).focus())}calculateDistance_(e,t,i){const s=Math.abs(e.x-t.x),n=Math.abs(e.y-t.y);let a;switch(i){case"right":case"left":a=s+n*100;break;case"up":a=n*2+s*.5;break;case"down":a=n*5+s;break;default:a=s+n}return a}searchForTrackSelect_(){const e=this;for(const t of e.updateFocusableComponents())if(t.constructor.name==="TextTrackSelect"){e.focus(t);break}}}class O$ extends ee{constructor(e,t,i){const s=nt({createEl:!1},t);if(super(e,s,i),!t.playerOptions.sources||t.playerOptions.sources.length===0)for(let n=0,a=t.playerOptions.techOrder;n<a.length;n++){const o=Et(a[n]);let l=Be.getTech(o);if(o||(l=ee.getComponent(o)),l&&l.isSupported()){e.loadTech_(o);break}}else e.src(t.playerOptions.sources)}}ee.registerComponent("MediaLoader",O$);class Zd extends ee{constructor(e,t){super(e,t),this.options_.controlText&&this.controlText(this.options_.controlText),this.handleMouseOver_=i=>this.handleMouseOver(i),this.handleMouseOut_=i=>this.handleMouseOut(i),this.handleClick_=i=>this.handleClick(i),this.handleKeyDown_=i=>this.handleKeyDown(i),this.emitTapEvents(),this.enable()}createEl(e="div",t={},i={}){t=Object.assign({className:this.buildCSSClass(),tabIndex:0},t),e==="button"&&qe.error(`Creating a ClickableComponent with an HTML element of ${e} is not supported; use a Button instead.`),i=Object.assign({role:"button"},i),this.tabIndex_=t.tabIndex;const s=Re(e,t,i);return this.player_.options_.experimentalSvgIcons||s.appendChild(Re("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(s),s}dispose(){this.controlTextEl_=null,super.dispose()}createControlTextEl(e){return this.controlTextEl_=Re("span",{className:"vjs-control-text"},{"aria-live":"polite"}),e&&e.appendChild(this.controlTextEl_),this.controlText(this.controlText_,e),this.controlTextEl_}controlText(e,t=this.el()){if(e===void 0)return this.controlText_||"Need Text";const i=this.localize(e);this.controlText_=e,fn(this.controlTextEl_,i),!this.nonIconControl&&!this.player_.options_.noUITitleAttributes&&t.setAttribute("title",i)}buildCSSClass(){return`vjs-control vjs-button ${super.buildCSSClass()}`}enable(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),typeof this.tabIndex_<"u"&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick_),this.on("keydown",this.handleKeyDown_))}disable(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),typeof this.tabIndex_<"u"&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver_),this.off("mouseout",this.handleMouseOut_),this.off(["tap","click"],this.handleClick_),this.off("keydown",this.handleKeyDown_)}handleLanguagechange(){this.controlText(this.controlText_)}handleClick(e){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)}handleKeyDown(e){e.key===" "||e.key==="Enter"?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):super.handleKeyDown(e)}}ee.registerComponent("ClickableComponent",Zd);class Sm extends Zd{constructor(e,t){super(e,t),this.update(),this.update_=i=>this.update(i),e.on("posterchange",this.update_)}dispose(){this.player().off("posterchange",this.update_),super.dispose()}createEl(){return Re("div",{className:"vjs-poster"})}crossOrigin(e){if(typeof e>"u")return this.$("img")?this.$("img").crossOrigin:this.player_.tech_&&this.player_.tech_.isReady_?this.player_.crossOrigin():this.player_.options_.crossOrigin||this.player_.options_.crossorigin||null;if(e!==null&&e!=="anonymous"&&e!=="use-credentials"){this.player_.log.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${e}"`);return}this.$("img")&&(this.$("img").crossOrigin=e)}update(e){const t=this.player().poster();this.setSrc(t),t?this.show():this.hide()}setSrc(e){if(!e){this.el_.textContent="";return}this.$("img")||this.el_.appendChild(Re("picture",{className:"vjs-poster",tabIndex:-1},{},Re("img",{loading:"lazy",crossOrigin:this.crossOrigin()},{alt:""}))),this.$("img").src=e}handleClick(e){this.player_.controls()&&(this.player_.tech(!0)&&this.player_.tech(!0).focus(),this.player_.paused()?zr(this.player_.play()):this.player_.pause())}}Sm.prototype.crossorigin=Sm.prototype.crossOrigin;ee.registerComponent("PosterImage",Sm);const Ji="#222",Ub="#ccc",y$={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function ep(r,e){let t;if(r.length===4)t=r[1]+r[1]+r[2]+r[2]+r[3]+r[3];else if(r.length===7)t=r.slice(1);else throw new Error("Invalid color code provided, "+r+"; must be formatted as e.g. #f0e or #f604e2.");return"rgba("+parseInt(t.slice(0,2),16)+","+parseInt(t.slice(2,4),16)+","+parseInt(t.slice(4,6),16)+","+e+")"}function Lr(r,e,t){try{r.style[e]=t}catch{return}}function qb(r){return r?`${r}px`:""}class b$ extends ee{constructor(e,t,i){super(e,t,i);const s=a=>this.updateDisplay(a),n=a=>{this.updateDisplayOverlay(),this.updateDisplay(a)};e.on("loadstart",a=>this.toggleDisplay(a)),e.on("useractive",s),e.on("userinactive",s),e.on("texttrackchange",s),e.on("loadedmetadata",a=>{this.updateDisplayOverlay(),this.preselectTrack(a)}),e.ready(mt(this,function(){if(e.tech_&&e.tech_.featuresNativeTextTracks){this.hide();return}e.on("fullscreenchange",n),e.on("playerresize",n);const a=q.screen.orientation||q,o=q.screen.orientation?"change":"orientationchange";a.addEventListener(o,n),e.on("dispose",()=>a.removeEventListener(o,n));const l=this.options_.playerOptions.tracks||[];for(let u=0;u<l.length;u++)this.player_.addRemoteTextTrack(l[u],!0);this.preselectTrack()}))}preselectTrack(){const e={captions:1,subtitles:1},t=this.player_.textTracks(),i=this.player_.cache_.selectedLanguage;let s,n,a;for(let o=0;o<t.length;o++){const l=t[o];i&&i.enabled&&i.language&&i.language===l.language&&l.kind in e?l.kind===i.kind?a=l:a||(a=l):i&&!i.enabled?(a=null,s=null,n=null):l.default&&(l.kind==="descriptions"&&!s?s=l:l.kind in e&&!n&&(n=l))}a?a.mode="showing":n?n.mode="showing":s&&(s.mode="showing")}toggleDisplay(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()}createEl(){return super.createEl("div",{className:"vjs-text-track-display"},{translate:"yes","aria-live":"off","aria-atomic":"true"})}clearDisplay(){typeof q.WebVTT=="function"&&q.WebVTT.processCues(q,[],this.el_)}updateDisplay(){const e=this.player_.textTracks(),t=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),t){const a=[];for(let o=0;o<e.length;++o){const l=e[o];l.mode==="showing"&&a.push(l)}this.updateForTrack(a);return}let i=null,s=null,n=e.length;for(;n--;){const a=e[n];a.mode==="showing"&&(a.kind==="descriptions"?i=a:s=a)}if(s?(this.getAttribute("aria-live")!=="off"&&this.setAttribute("aria-live","off"),this.updateForTrack(s)):i&&(this.getAttribute("aria-live")!=="assertive"&&this.setAttribute("aria-live","assertive"),this.updateForTrack(i)),!q.CSS.supports("inset","10px")){const a=this.el_,o=a.querySelectorAll(".vjs-text-track-cue"),l=this.player_.controlBar.el_.getBoundingClientRect().height,u=this.player_.el_.getBoundingClientRect().height;a.style="",Lr(a,"position","relative"),Lr(a,"height",u-l+"px"),Lr(a,"top","unset"),Mh?Lr(a,"bottom",u+"px"):Lr(a,"bottom","0px"),o.length>0&&o.forEach(c=>{if(c.style.inset){const h=c.style.inset.split(" ");h.length===3&&Object.assign(c.style,{top:h[0],right:h[1],bottom:h[2],left:"unset"})}})}}updateDisplayOverlay(){if(!this.player_.videoHeight()||!q.CSS.supports("inset-inline: 10px"))return;const e=this.player_.currentWidth(),t=this.player_.currentHeight(),i=e/t,s=this.player_.videoWidth()/this.player_.videoHeight();let n=0,a=0;Math.abs(i-s)>.1&&(i>s?n=Math.round((e-t*s)/2):a=Math.round((t-e/s)/2)),Lr(this.el_,"insetInline",qb(n)),Lr(this.el_,"insetBlock",qb(a))}updateDisplayState(e){const t=this.player_.textTrackSettings.getValues(),i=e.activeCues;let s=i.length;for(;s--;){const n=i[s];if(!n)continue;const a=n.displayState;if(t.color&&(a.firstChild.style.color=t.color),t.textOpacity&&Lr(a.firstChild,"color",ep(t.color||"#fff",t.textOpacity)),t.backgroundColor&&(a.firstChild.style.backgroundColor=t.backgroundColor),t.backgroundOpacity&&Lr(a.firstChild,"backgroundColor",ep(t.backgroundColor||"#000",t.backgroundOpacity)),t.windowColor&&(t.windowOpacity?Lr(a,"backgroundColor",ep(t.windowColor,t.windowOpacity)):a.style.backgroundColor=t.windowColor),t.edgeStyle&&(t.edgeStyle==="dropshadow"?a.firstChild.style.textShadow=`2px 2px 3px ${Ji}, 2px 2px 4px ${Ji}, 2px 2px 5px ${Ji}`:t.edgeStyle==="raised"?a.firstChild.style.textShadow=`1px 1px ${Ji}, 2px 2px ${Ji}, 3px 3px ${Ji}`:t.edgeStyle==="depressed"?a.firstChild.style.textShadow=`1px 1px ${Ub}, 0 1px ${Ub}, -1px -1px ${Ji}, 0 -1px ${Ji}`:t.edgeStyle==="uniform"&&(a.firstChild.style.textShadow=`0 0 4px ${Ji}, 0 0 4px ${Ji}, 0 0 4px ${Ji}, 0 0 4px ${Ji}`)),t.fontPercent&&t.fontPercent!==1){const o=q.parseFloat(a.style.fontSize);a.style.fontSize=o*t.fontPercent+"px",a.style.height="auto",a.style.top="auto"}t.fontFamily&&t.fontFamily!=="default"&&(t.fontFamily==="small-caps"?a.firstChild.style.fontVariant="small-caps":a.firstChild.style.fontFamily=y$[t.fontFamily])}}updateForTrack(e){if(Array.isArray(e)||(e=[e]),typeof q.WebVTT!="function"||e.every(i=>!i.activeCues))return;const t=[];for(let i=0;i<e.length;++i){const s=e[i];for(let n=0;n<s.activeCues.length;++n)t.push(s.activeCues[n])}q.WebVTT.processCues(q,t,this.el_);for(let i=0;i<e.length;++i){const s=e[i];for(let n=0;n<s.activeCues.length;++n){const a=s.activeCues[n].displayState;qn(a,"vjs-text-track-cue","vjs-text-track-cue-"+(s.language?s.language:i)),s.language&&to(a,"lang",s.language)}this.player_.textTrackSettings&&this.updateDisplayState(s)}}}ee.registerComponent("TextTrackDisplay",b$);class v$ extends ee{createEl(){const e=this.player_.isAudio(),t=this.localize(e?"Audio Player":"Video Player"),i=Re("span",{className:"vjs-control-text",textContent:this.localize("{1} is loading.",[t])}),s=super.createEl("div",{className:"vjs-loading-spinner",dir:"ltr"});return s.appendChild(i),s}handleLanguagechange(){this.$(".vjs-control-text").textContent=this.localize("{1} is loading.",[this.player_.isAudio()?"Audio Player":"Video Player"])}}ee.registerComponent("LoadingSpinner",v$);class di extends Zd{createEl(e,t={},i={}){e="button",t=Object.assign({className:this.buildCSSClass()},t),i=Object.assign({type:"button"},i);const s=Re(e,t,i);return this.player_.options_.experimentalSvgIcons||s.appendChild(Re("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(s),s}addChild(e,t={}){const i=this.constructor.name;return qe.warn(`Adding an actionable (user controllable) child to a Button (${i}) is not supported; use a ClickableComponent instead.`),ee.prototype.addChild.call(this,e,t)}enable(){super.enable(),this.el_.removeAttribute("disabled")}disable(){super.disable(),this.el_.setAttribute("disabled","disabled")}handleKeyDown(e){if(e.key===" "||e.key==="Enter"){e.stopPropagation();return}super.handleKeyDown(e)}}ee.registerComponent("Button",di);class yx extends di{constructor(e,t){super(e,t),this.mouseused_=!1,this.setIcon("play"),this.on("mousedown",i=>this.handleMouseDown(i))}buildCSSClass(){return"vjs-big-play-button"}handleClick(e){const t=this.player_.play();if(e.type==="tap"||this.mouseused_&&"clientX"in e&&"clientY"in e){zr(t),this.player_.tech(!0)&&this.player_.tech(!0).focus();return}const i=this.player_.getChild("controlBar"),s=i&&i.getChild("playToggle");if(!s){this.player_.tech(!0).focus();return}const n=()=>s.focus();_l(t)?t.then(n,()=>{}):this.setTimeout(n,1)}handleKeyDown(e){this.mouseused_=!1,super.handleKeyDown(e)}handleMouseDown(e){this.mouseused_=!0}}yx.prototype.controlText_="Play Video";ee.registerComponent("BigPlayButton",yx);class S$ extends di{constructor(e,t){super(e,t),this.setIcon("cancel"),this.controlText(t&&t.controlText||this.localize("Close"))}buildCSSClass(){return`vjs-close-button ${super.buildCSSClass()}`}handleClick(e){this.trigger({type:"close",bubbles:!1})}handleKeyDown(e){e.key==="Escape"?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):super.handleKeyDown(e)}}ee.registerComponent("CloseButton",S$);class bx extends di{constructor(e,t={}){super(e,t),t.replay=t.replay===void 0||t.replay,this.setIcon("play"),this.on(e,"play",i=>this.handlePlay(i)),this.on(e,"pause",i=>this.handlePause(i)),t.replay&&this.on(e,"ended",i=>this.handleEnded(i))}buildCSSClass(){return`vjs-play-control ${super.buildCSSClass()}`}handleClick(e){this.player_.paused()?zr(this.player_.play()):this.player_.pause()}handleSeeked(e){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(e):this.handlePlay(e)}handlePlay(e){this.removeClass("vjs-ended","vjs-paused"),this.addClass("vjs-playing"),this.setIcon("pause"),this.controlText("Pause")}handlePause(e){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.setIcon("play"),this.controlText("Play")}handleEnded(e){this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.setIcon("replay"),this.controlText("Replay"),this.one(this.player_,"seeked",t=>this.handleSeeked(t))}}bx.prototype.controlText_="Play";ee.registerComponent("PlayToggle",bx);class wo extends ee{constructor(e,t){super(e,t),this.on(e,["timeupdate","ended","seeking"],i=>this.update(i)),this.updateTextNode_()}createEl(){const e=this.buildCSSClass(),t=super.createEl("div",{className:`${e} vjs-time-control vjs-control`}),i=Re("span",{className:"vjs-control-text",textContent:`${this.localize(this.labelText_)} `},{role:"presentation"});return t.appendChild(i),this.contentEl_=Re("span",{className:`${e}-display`},{role:"presentation"}),t.appendChild(this.contentEl_),t}dispose(){this.contentEl_=null,this.textNode_=null,super.dispose()}update(e){!this.player_.options_.enableSmoothSeeking&&e.type==="seeking"||this.updateContent(e)}updateTextNode_(e=0){e=Zn(e),this.formattedTime_!==e&&(this.formattedTime_=e,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",()=>{if(!this.contentEl_)return;let t=this.textNode_;t&&this.contentEl_.firstChild!==t&&(t=null,qe.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")),this.textNode_=ce.createTextNode(this.formattedTime_),this.textNode_&&(t?this.contentEl_.replaceChild(this.textNode_,t):this.contentEl_.appendChild(this.textNode_))}))}updateContent(e){}}wo.prototype.labelText_="Time";wo.prototype.controlText_="Time";ee.registerComponent("TimeDisplay",wo);class _0 extends wo{buildCSSClass(){return"vjs-current-time"}updateContent(e){let t;this.player_.ended()?t=this.player_.duration():e&&e.target&&typeof e.target.pendingSeekTime=="function"?t=e.target.pendingSeekTime():t=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(t)}}_0.prototype.labelText_="Current Time";_0.prototype.controlText_="Current Time";ee.registerComponent("CurrentTimeDisplay",_0);class x0 extends wo{constructor(e,t){super(e,t);const i=s=>this.updateContent(s);this.on(e,"durationchange",i),this.on(e,"loadstart",i),this.on(e,"loadedmetadata",i)}buildCSSClass(){return"vjs-duration"}updateContent(e){const t=this.player_.duration();this.updateTextNode_(t)}}x0.prototype.labelText_="Duration";x0.prototype.controlText_="Duration";ee.registerComponent("DurationDisplay",x0);class T$ extends ee{createEl(){const e=super.createEl("div",{className:"vjs-time-control vjs-time-divider"},{"aria-hidden":!0}),t=super.createEl("div"),i=super.createEl("span",{textContent:"/"});return t.appendChild(i),e.appendChild(t),e}}ee.registerComponent("TimeDivider",T$);class w0 extends wo{constructor(e,t){super(e,t),this.on(e,"durationchange",i=>this.updateContent(i))}buildCSSClass(){return"vjs-remaining-time"}createEl(){const e=super.createEl();return this.options_.displayNegative!==!1&&e.insertBefore(Re("span",{},{"aria-hidden":!0},"-"),this.contentEl_),e}updateContent(e){if(typeof this.player_.duration()!="number")return;let t;this.player_.ended()?t=0:this.player_.remainingTimeDisplay?t=this.player_.remainingTimeDisplay():t=this.player_.remainingTime(),this.updateTextNode_(t)}}w0.prototype.labelText_="Remaining Time";w0.prototype.controlText_="Remaining Time";ee.registerComponent("RemainingTimeDisplay",w0);class _$ extends ee{constructor(e,t){super(e,t),this.updateShowing(),this.on(this.player(),"durationchange",i=>this.updateShowing(i))}createEl(){const e=super.createEl("div",{className:"vjs-live-control vjs-control"});return this.contentEl_=Re("div",{className:"vjs-live-display"},{"aria-live":"off"}),this.contentEl_.appendChild(Re("span",{className:"vjs-control-text",textContent:`${this.localize("Stream Type")} `})),this.contentEl_.appendChild(ce.createTextNode(this.localize("LIVE"))),e.appendChild(this.contentEl_),e}dispose(){this.contentEl_=null,super.dispose()}updateShowing(e){this.player().duration()===1/0?this.show():this.hide()}}ee.registerComponent("LiveDisplay",_$);class vx extends di{constructor(e,t){super(e,t),this.updateLiveEdgeStatus(),this.player_.liveTracker&&(this.updateLiveEdgeStatusHandler_=i=>this.updateLiveEdgeStatus(i),this.on(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_))}createEl(){const e=super.createEl("button",{className:"vjs-seek-to-live-control vjs-control"});return this.setIcon("circle",e),this.textEl_=Re("span",{className:"vjs-seek-to-live-text",textContent:this.localize("LIVE")},{"aria-hidden":"true"}),e.appendChild(this.textEl_),e}updateLiveEdgeStatus(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))}handleClick(){this.player_.liveTracker.seekToLiveEdge()}dispose(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_),this.textEl_=null,super.dispose()}}vx.prototype.controlText_="Seek to live, currently playing live";ee.registerComponent("SeekToLive",vx);function Iu(r,e,t){return r=Number(r),Math.min(t,Math.max(e,isNaN(r)?e:r))}var x$=Object.freeze({__proto__:null,clamp:Iu});class C0 extends ee{constructor(e,t){super(e,t),this.handleMouseDown_=i=>this.handleMouseDown(i),this.handleMouseUp_=i=>this.handleMouseUp(i),this.handleKeyDown_=i=>this.handleKeyDown(i),this.handleClick_=i=>this.handleClick(i),this.handleMouseMove_=i=>this.handleMouseMove(i),this.update_=i=>this.update(i),this.bar=this.getChild(this.options_.barName),this.vertical(!!this.options_.vertical),this.enable()}enabled(){return this.enabled_}enable(){this.enabled()||(this.on("mousedown",this.handleMouseDown_),this.on("touchstart",this.handleMouseDown_),this.on("keydown",this.handleKeyDown_),this.on("click",this.handleClick_),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)}disable(){if(!this.enabled())return;const e=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown_),this.off("touchstart",this.handleMouseDown_),this.off("keydown",this.handleKeyDown_),this.off("click",this.handleClick_),this.off(this.player_,"controlsvisible",this.update_),this.off(e,"mousemove",this.handleMouseMove_),this.off(e,"mouseup",this.handleMouseUp_),this.off(e,"touchmove",this.handleMouseMove_),this.off(e,"touchend",this.handleMouseUp_),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}createEl(e,t={},i={}){return t.className=t.className+" vjs-slider",t=Object.assign({tabIndex:0},t),i=Object.assign({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100},i),super.createEl(e,t,i)}handleMouseDown(e){const t=this.bar.el_.ownerDocument;e.type==="mousedown"&&e.preventDefault(),e.type==="touchstart"&&!is&&e.preventDefault(),z_(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(t,"mousemove",this.handleMouseMove_),this.on(t,"mouseup",this.handleMouseUp_),this.on(t,"touchmove",this.handleMouseMove_),this.on(t,"touchend",this.handleMouseUp_),this.handleMouseMove(e,!0)}handleMouseMove(e){}handleMouseUp(e){const t=this.bar.el_.ownerDocument;Z_(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(t,"mousemove",this.handleMouseMove_),this.off(t,"mouseup",this.handleMouseUp_),this.off(t,"touchmove",this.handleMouseMove_),this.off(t,"touchend",this.handleMouseUp_),this.update()}update(){if(!this.el_||!this.bar)return;const e=this.getProgress();return e===this.progress_||(this.progress_=e,this.requestNamedAnimationFrame("Slider#update",()=>{const t=this.vertical()?"height":"width";this.bar.el().style[t]=(e*100).toFixed(2)+"%"})),e}getProgress(){return Number(Iu(this.getPercent(),0,1).toFixed(4))}calculateDistance(e){const t=Ud(this.el_,e);return this.vertical()?t.y:t.x}handleKeyDown(e){const t=this.options_.playerOptions.spatialNavigation,i=t&&t.enabled,s=t&&t.horizontalSeek;i?s&&e.key==="ArrowLeft"||!s&&e.key==="ArrowDown"?(e.preventDefault(),e.stopPropagation(),this.stepBack()):s&&e.key==="ArrowRight"||!s&&e.key==="ArrowUp"?(e.preventDefault(),e.stopPropagation(),this.stepForward()):(this.pendingSeekTime()&&(this.pendingSeekTime(null),this.userSeek_(this.player_.currentTime())),super.handleKeyDown(e)):e.key==="ArrowLeft"||e.key==="ArrowDown"?(e.preventDefault(),e.stopPropagation(),this.stepBack()):e.key==="ArrowUp"||e.key==="ArrowRight"?(e.preventDefault(),e.stopPropagation(),this.stepForward()):super.handleKeyDown(e)}handleClick(e){e.stopPropagation(),e.preventDefault()}vertical(e){if(e===void 0)return this.vertical_||!1;this.vertical_=!!e,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")}}ee.registerComponent("Slider",C0);const tp=(r,e)=>Iu(r/e*100,0,100).toFixed(2)+"%";class w$ extends ee{constructor(e,t){super(e,t),this.partEls_=[],this.on(e,"progress",i=>this.update(i))}createEl(){const e=super.createEl("div",{className:"vjs-load-progress"}),t=Re("span",{className:"vjs-control-text"}),i=Re("span",{textContent:this.localize("Loaded")}),s=ce.createTextNode(": ");return this.percentageEl_=Re("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),e.appendChild(t),t.appendChild(i),t.appendChild(s),t.appendChild(this.percentageEl_),e}dispose(){this.partEls_=null,this.percentageEl_=null,super.dispose()}update(e){this.requestNamedAnimationFrame("LoadProgressBar#update",()=>{const t=this.player_.liveTracker,i=this.player_.buffered(),s=t&&t.isLive()?t.seekableEnd():this.player_.duration(),n=this.player_.bufferedEnd(),a=this.partEls_,o=tp(n,s);this.percent_!==o&&(this.el_.style.width=o,fn(this.percentageEl_,o),this.percent_=o);for(let l=0;l<i.length;l++){const u=i.start(l),c=i.end(l);let h=a[l];h||(h=this.el_.appendChild(Re()),a[l]=h),!(h.dataset.start===u&&h.dataset.end===c)&&(h.dataset.start=u,h.dataset.end=c,h.style.left=tp(u,n),h.style.width=tp(c-u,n))}for(let l=a.length;l>i.length;l--)this.el_.removeChild(a[l-1]);a.length=i.length})}}ee.registerComponent("LoadProgressBar",w$);class C$ extends ee{constructor(e,t){super(e,t),this.update=rs(mt(this,this.update),hr)}createEl(){return super.createEl("div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})}update(e,t,i){const s=Fl(this.el_),n=io(this.player_.el()),a=e.width*t;if(!n||!s)return;let o=e.left-n.left+a,l=e.width-a+(n.right-e.right);l||(l=e.width-a,o=a);let u=s.width/2;o<u?u+=u-o:l<u&&(u=l),u<0?u=0:u>s.width&&(u=s.width),u=Math.round(u),this.el_.style.right=`-${u}px`,this.write(i)}write(e){fn(this.el_,e)}updateTime(e,t,i,s){this.requestNamedAnimationFrame("TimeTooltip#updateTime",()=>{let n;const a=this.player_.duration();if(this.player_.liveTracker&&this.player_.liveTracker.isLive()){const o=this.player_.liveTracker.liveWindow(),l=o-t*o;n=(l<1?"":"-")+Zn(l,o)}else n=Zn(i,a);this.update(e,t,n),s&&s()})}}ee.registerComponent("TimeTooltip",C$);class k0 extends ee{constructor(e,t){super(e,t),this.setIcon("circle"),this.update=rs(mt(this,this.update),hr)}createEl(){return super.createEl("div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})}update(e,t,i){const s=this.getChild("timeTooltip");if(!s)return;const n=i&&i.target&&typeof i.target.pendingSeekTime=="function"?i.target.pendingSeekTime():this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();s.updateTime(e,t,n)}}k0.prototype.options_={children:[]};!ci&&!xr&&k0.prototype.options_.children.push("timeTooltip");ee.registerComponent("PlayProgressBar",k0);class Sx extends ee{constructor(e,t){super(e,t),this.update=rs(mt(this,this.update),hr)}createEl(){return super.createEl("div",{className:"vjs-mouse-display"})}update(e,t){const i=t*this.player_.duration();this.getChild("timeTooltip").updateTime(e,t,i,()=>{this.el_.style.left=`${e.width*t}px`})}}Sx.prototype.options_={children:["timeTooltip"]};ee.registerComponent("MouseTimeDisplay",Sx);class Wd extends C0{constructor(e,t){t=nt(Wd.prototype.options_,t),t.children=[...t.children];const i=e.options_.disableSeekWhileScrubbingOnMobile&&(ci||xr)||e.options_.disableSeekWhileScrubbingOnSTV;(!ci&&!xr||i)&&t.children.splice(1,0,"mouseTimeDisplay"),super(e,t),this.shouldDisableSeekWhileScrubbing_=i,this.pendingSeekTime_=null,this.setEventHandlers_()}setEventHandlers_(){this.update_=mt(this,this.update),this.update=rs(this.update_,hr),this.on(this.player_,["durationchange","timeupdate"],this.update),this.on(this.player_,["ended"],this.update_),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.enableIntervalHandler_=e=>this.enableInterval_(e),this.disableIntervalHandler_=e=>this.disableInterval_(e),this.on(this.player_,["playing"],this.enableIntervalHandler_),this.on(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in ce&&"visibilityState"in ce&&this.on(ce,"visibilitychange",this.toggleVisibility_)}toggleVisibility_(e){ce.visibilityState==="hidden"?(this.cancelNamedAnimationFrame("SeekBar#update"),this.cancelNamedAnimationFrame("Slider#update"),this.disableInterval_(e)):(!this.player_.ended()&&!this.player_.paused()&&this.enableInterval_(),this.update())}enableInterval_(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,hr))}disableInterval_(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&e&&e.type!=="ended"||this.updateInterval&&(this.clearInterval(this.updateInterval),this.updateInterval=null)}createEl(){return super.createEl("div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})}update(e){if(ce.visibilityState==="hidden")return;const t=super.update();return this.requestNamedAnimationFrame("SeekBar#update",()=>{const i=this.player_.ended()?this.player_.duration():this.getCurrentTime_(),s=this.player_.liveTracker;let n=this.player_.duration();s&&s.isLive()&&(n=this.player_.liveTracker.liveCurrentTime()),this.percent_!==t&&(this.el_.setAttribute("aria-valuenow",(t*100).toFixed(2)),this.percent_=t),(this.currentTime_!==i||this.duration_!==n)&&(this.el_.setAttribute("aria-valuetext",this.localize("progress bar timing: currentTime={1} duration={2}",[Zn(i,n),Zn(n,n)],"{1} of {2}")),this.currentTime_=i,this.duration_=n),this.bar&&this.bar.update(io(this.el()),this.getProgress(),e)}),t}userSeek_(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(e)}getCurrentTime_(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()}pendingSeekTime(e){if(e!==void 0)if(e!==null){const t=this.player_.duration();this.pendingSeekTime_=Math.max(0,Math.min(e,t))}else this.pendingSeekTime_=null;return this.pendingSeekTime_}getPercent(){if(this.pendingSeekTime()!==null)return this.pendingSeekTime()/this.player_.duration();const e=this.getCurrentTime_();let t;const i=this.player_.liveTracker;return i&&i.isLive()?(t=(e-i.seekableStart())/i.liveWindow(),i.atLiveEdge()&&(t=1)):t=e/this.player_.duration(),t}handleMouseDown(e){Ul(e)&&(e.stopPropagation(),this.videoWasPlaying=!this.player_.paused(),this.shouldDisableSeekWhileScrubbing_||this.player_.pause(),super.handleMouseDown(e))}handleMouseMove(e,t=!1){if(!Ul(e)||isNaN(this.player_.duration()))return;!t&&!this.player_.scrubbing()&&this.player_.scrubbing(!0);let i;const s=this.calculateDistance(e),n=this.player_.liveTracker;if(!n||!n.isLive())i=s*this.player_.duration(),i===this.player_.duration()&&(i=i-.1);else{if(s>=.99){n.seekToLiveEdge();return}const a=n.seekableStart(),o=n.liveCurrentTime();if(i=a+s*n.liveWindow(),i>=o&&(i=o),i<=a&&(i=a+.1),i===1/0)return}this.shouldDisableSeekWhileScrubbing_?this.pendingSeekTime(i):this.userSeek_(i),this.player_.options_.enableSmoothSeeking&&this.update()}enable(){super.enable();const e=this.getChild("mouseTimeDisplay");e&&e.show()}disable(){super.disable();const e=this.getChild("mouseTimeDisplay");e&&e.hide()}handleMouseUp(e){super.handleMouseUp(e),e&&e.stopPropagation(),this.player_.scrubbing(!1),this.pendingSeekTime()!==null&&(this.userSeek_(this.pendingSeekTime()),this.pendingSeekTime(null)),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?zr(this.player_.play()):this.update_()}handlePendingSeek_(e){this.player_.paused()||this.player_.pause();const t=this.pendingSeekTime()!==null?this.pendingSeekTime():this.player_.currentTime();this.pendingSeekTime(t+e),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}stepForward(){this.shouldDisableSeekWhileScrubbing_?this.handlePendingSeek_(this.options().stepSeconds):this.userSeek_(this.player_.currentTime()+this.options().stepSeconds)}stepBack(){this.shouldDisableSeekWhileScrubbing_?this.handlePendingSeek_(-this.options().stepSeconds):this.userSeek_(this.player_.currentTime()-this.options().stepSeconds)}handleAction(e){this.pendingSeekTime()!==null&&(this.userSeek_(this.pendingSeekTime()),this.pendingSeekTime(null)),this.player_.paused()?this.player_.play():this.player_.pause()}handleKeyDown(e){const t=this.player_.liveTracker;if(e.key===" "||e.key==="Enter")e.preventDefault(),e.stopPropagation(),this.handleAction(e);else if(e.key==="Home")e.preventDefault(),e.stopPropagation(),this.userSeek_(0);else if(e.key==="End")e.preventDefault(),e.stopPropagation(),t&&t.isLive()?this.userSeek_(t.liveCurrentTime()):this.userSeek_(this.player_.duration());else if(/^[0-9]$/.test(e.key)){e.preventDefault(),e.stopPropagation();const i=parseInt(e.key,10)*.1;t&&t.isLive()?this.userSeek_(t.seekableStart()+t.liveWindow()*i):this.userSeek_(this.player_.duration()*i)}else e.key==="PageDown"?(e.preventDefault(),e.stopPropagation(),this.userSeek_(this.player_.currentTime()-this.options().stepSeconds*this.options().pageMultiplier)):e.key==="PageUp"?(e.preventDefault(),e.stopPropagation(),this.userSeek_(this.player_.currentTime()+this.options().stepSeconds*this.options().pageMultiplier)):super.handleKeyDown(e)}dispose(){this.disableInterval_(),this.off(this.player_,["durationchange","timeupdate"],this.update),this.off(this.player_,["ended"],this.update_),this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableIntervalHandler_),this.off(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in ce&&"visibilityState"in ce&&this.off(ce,"visibilitychange",this.toggleVisibility_),super.dispose()}}Wd.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar",stepSeconds:5,pageMultiplier:12};ee.registerComponent("SeekBar",Wd);class Tx extends ee{constructor(e,t){super(e,t),this.handleMouseMove=rs(mt(this,this.handleMouseMove),hr),this.throttledHandleMouseSeek=rs(mt(this,this.handleMouseSeek),hr),this.handleMouseUpHandler_=i=>this.handleMouseUp(i),this.handleMouseDownHandler_=i=>this.handleMouseDown(i),this.enable()}createEl(){return super.createEl("div",{className:"vjs-progress-control vjs-control"})}handleMouseMove(e){const t=this.getChild("seekBar");if(!t)return;const i=t.getChild("playProgressBar"),s=t.getChild("mouseTimeDisplay");if(!i&&!s)return;const n=t.el(),a=Fl(n);let o=Ud(n,e).x;o=Iu(o,0,1),s&&s.update(a,o),i&&i.update(a,t.getProgress())}handleMouseSeek(e){const t=this.getChild("seekBar");t&&t.handleMouseMove(e)}enabled(){return this.enabled_}disable(){if(this.children().forEach(e=>e.disable&&e.disable()),!!this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDownHandler_),this.off(this.el_,["mousemove","touchmove"],this.handleMouseMove),this.removeListenersAddedOnMousedownAndTouchstart(),this.addClass("disabled"),this.enabled_=!1,this.player_.scrubbing())){const e=this.getChild("seekBar");this.player_.scrubbing(!1),e.videoWasPlaying&&zr(this.player_.play())}}enable(){this.children().forEach(e=>e.enable&&e.enable()),!this.enabled()&&(this.on(["mousedown","touchstart"],this.handleMouseDownHandler_),this.on(this.el_,["mousemove","touchmove"],this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)}removeListenersAddedOnMousedownAndTouchstart(){const e=this.el_.ownerDocument;this.off(e,"mousemove",this.throttledHandleMouseSeek),this.off(e,"touchmove",this.throttledHandleMouseSeek),this.off(e,"mouseup",this.handleMouseUpHandler_),this.off(e,"touchend",this.handleMouseUpHandler_)}handleMouseDown(e){const t=this.el_.ownerDocument,i=this.getChild("seekBar");i&&i.handleMouseDown(e),this.on(t,"mousemove",this.throttledHandleMouseSeek),this.on(t,"touchmove",this.throttledHandleMouseSeek),this.on(t,"mouseup",this.handleMouseUpHandler_),this.on(t,"touchend",this.handleMouseUpHandler_)}handleMouseUp(e){const t=this.getChild("seekBar");t&&t.handleMouseUp(e),this.removeListenersAddedOnMousedownAndTouchstart()}}Tx.prototype.options_={children:["seekBar"]};ee.registerComponent("ProgressControl",Tx);class _x extends di{constructor(e,t){super(e,t),this.setIcon("picture-in-picture-enter"),this.on(e,["enterpictureinpicture","leavepictureinpicture"],i=>this.handlePictureInPictureChange(i)),this.on(e,["disablepictureinpicturechanged","loadedmetadata"],i=>this.handlePictureInPictureEnabledChange(i)),this.on(e,["loadedmetadata","audioonlymodechange","audiopostermodechange"],()=>this.handlePictureInPictureAudioModeChange()),this.disable()}buildCSSClass(){return`vjs-picture-in-picture-control vjs-hidden ${super.buildCSSClass()}`}handlePictureInPictureAudioModeChange(){if(!(this.player_.currentType().substring(0,5)==="audio"||this.player_.audioPosterMode()||this.player_.audioOnlyMode())){this.show();return}this.player_.isInPictureInPicture()&&this.player_.exitPictureInPicture(),this.hide()}handlePictureInPictureEnabledChange(){ce.pictureInPictureEnabled&&this.player_.disablePictureInPicture()===!1||this.player_.options_.enableDocumentPictureInPicture&&"documentPictureInPicture"in q?this.enable():this.disable()}handlePictureInPictureChange(e){this.player_.isInPictureInPicture()?(this.setIcon("picture-in-picture-exit"),this.controlText("Exit Picture-in-Picture")):(this.setIcon("picture-in-picture-enter"),this.controlText("Picture-in-Picture")),this.handlePictureInPictureEnabledChange()}handleClick(e){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()}show(){typeof ce.exitPictureInPicture=="function"&&super.show()}}_x.prototype.controlText_="Picture-in-Picture";ee.registerComponent("PictureInPictureToggle",_x);class xx extends di{constructor(e,t){super(e,t),this.setIcon("fullscreen-enter"),this.on(e,"fullscreenchange",i=>this.handleFullscreenChange(i)),ce[e.fsApi_.fullscreenEnabled]===!1&&this.disable()}buildCSSClass(){return`vjs-fullscreen-control ${super.buildCSSClass()}`}handleFullscreenChange(e){this.player_.isFullscreen()?(this.controlText("Exit Fullscreen"),this.setIcon("fullscreen-exit")):(this.controlText("Fullscreen"),this.setIcon("fullscreen-enter"))}handleClick(e){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()}}xx.prototype.controlText_="Fullscreen";ee.registerComponent("FullscreenToggle",xx);const k$=function(r,e){e.tech_&&!e.tech_.featuresVolumeControl&&r.addClass("vjs-hidden"),r.on(e,"loadstart",function(){e.tech_.featuresVolumeControl?r.removeClass("vjs-hidden"):r.addClass("vjs-hidden")})};class E$ extends ee{createEl(){const e=super.createEl("div",{className:"vjs-volume-level"});return this.setIcon("circle",e),e.appendChild(super.createEl("span",{className:"vjs-control-text"})),e}}ee.registerComponent("VolumeLevel",E$);class A$ extends ee{constructor(e,t){super(e,t),this.update=rs(mt(this,this.update),hr)}createEl(){return super.createEl("div",{className:"vjs-volume-tooltip"},{"aria-hidden":"true"})}update(e,t,i,s){if(!i){const n=io(this.el_),a=io(this.player_.el()),o=e.width*t;if(!a||!n)return;const l=e.left-a.left+o,u=e.width-o+(a.right-e.right);let c=n.width/2;l<c?c+=c-l:u<c&&(c=u),c<0?c=0:c>n.width&&(c=n.width),this.el_.style.right=`-${c}px`}this.write(`${s}%`)}write(e){fn(this.el_,e)}updateVolume(e,t,i,s,n){this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume",()=>{this.update(e,t,i,s.toFixed(0)),n&&n()})}}ee.registerComponent("VolumeLevelTooltip",A$);class wx extends ee{constructor(e,t){super(e,t),this.update=rs(mt(this,this.update),hr)}createEl(){return super.createEl("div",{className:"vjs-mouse-display"})}update(e,t,i){const s=100*t;this.getChild("volumeLevelTooltip").updateVolume(e,t,i,s,()=>{i?this.el_.style.bottom=`${e.height*t}px`:this.el_.style.left=`${e.width*t}px`})}}wx.prototype.options_={children:["volumeLevelTooltip"]};ee.registerComponent("MouseVolumeLevelDisplay",wx);class Hd extends C0{constructor(e,t){super(e,t),this.on("slideractive",i=>this.updateLastVolume_(i)),this.on(e,"volumechange",i=>this.updateARIAAttributes(i)),e.ready(()=>this.updateARIAAttributes())}createEl(){return super.createEl("div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})}handleMouseDown(e){Ul(e)&&super.handleMouseDown(e)}handleMouseMove(e){const t=this.getChild("mouseVolumeLevelDisplay");if(t){const i=this.el(),s=io(i),n=this.vertical();let a=Ud(i,e);a=n?a.y:a.x,a=Iu(a,0,1),t.update(s,a,n)}Ul(e)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(e)))}checkMuted(){this.player_.muted()&&this.player_.muted(!1)}getPercent(){return this.player_.muted()?0:this.player_.volume()}stepForward(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)}stepBack(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)}updateARIAAttributes(e){const t=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",t),this.el_.setAttribute("aria-valuetext",t+"%")}volumeAsPercentage_(){return Math.round(this.player_.volume()*100)}updateLastVolume_(){const e=this.player_.volume();this.one("sliderinactive",()=>{this.player_.volume()===0&&this.player_.lastVolume_(e)})}}Hd.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"};!ci&&!xr&&Hd.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay");Hd.prototype.playerEvent="volumechange";ee.registerComponent("VolumeBar",Hd);class Cx extends ee{constructor(e,t={}){t.vertical=t.vertical||!1,(typeof t.volumeBar>"u"||eo(t.volumeBar))&&(t.volumeBar=t.volumeBar||{},t.volumeBar.vertical=t.vertical),super(e,t),k$(this,e),this.throttledHandleMouseMove=rs(mt(this,this.handleMouseMove),hr),this.handleMouseUpHandler_=i=>this.handleMouseUp(i),this.on("mousedown",i=>this.handleMouseDown(i)),this.on("touchstart",i=>this.handleMouseDown(i)),this.on("mousemove",i=>this.handleMouseMove(i)),this.on(this.volumeBar,["focus","slideractive"],()=>{this.volumeBar.addClass("vjs-slider-active"),this.addClass("vjs-slider-active"),this.trigger("slideractive")}),this.on(this.volumeBar,["blur","sliderinactive"],()=>{this.volumeBar.removeClass("vjs-slider-active"),this.removeClass("vjs-slider-active"),this.trigger("sliderinactive")})}createEl(){let e="vjs-volume-horizontal";return this.options_.vertical&&(e="vjs-volume-vertical"),super.createEl("div",{className:`vjs-volume-control vjs-control ${e}`})}handleMouseDown(e){const t=this.el_.ownerDocument;this.on(t,"mousemove",this.throttledHandleMouseMove),this.on(t,"touchmove",this.throttledHandleMouseMove),this.on(t,"mouseup",this.handleMouseUpHandler_),this.on(t,"touchend",this.handleMouseUpHandler_)}handleMouseUp(e){const t=this.el_.ownerDocument;this.off(t,"mousemove",this.throttledHandleMouseMove),this.off(t,"touchmove",this.throttledHandleMouseMove),this.off(t,"mouseup",this.handleMouseUpHandler_),this.off(t,"touchend",this.handleMouseUpHandler_)}handleMouseMove(e){this.volumeBar.handleMouseMove(e)}}Cx.prototype.options_={children:["volumeBar"]};ee.registerComponent("VolumeControl",Cx);const P$=function(r,e){e.tech_&&!e.tech_.featuresMuteControl&&r.addClass("vjs-hidden"),r.on(e,"loadstart",function(){e.tech_.featuresMuteControl?r.removeClass("vjs-hidden"):r.addClass("vjs-hidden")})};class kx extends di{constructor(e,t){super(e,t),P$(this,e),this.on(e,["loadstart","volumechange"],i=>this.update(i))}buildCSSClass(){return`vjs-mute-control ${super.buildCSSClass()}`}handleClick(e){const t=this.player_.volume(),i=this.player_.lastVolume_();if(t===0){const s=i<.1?.1:i;this.player_.volume(s),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())}update(e){this.updateIcon_(),this.updateControlText_()}updateIcon_(){const e=this.player_.volume();let t=3;this.setIcon("volume-high"),ci&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),e===0||this.player_.muted()?(this.setIcon("volume-mute"),t=0):e<.33?(this.setIcon("volume-low"),t=1):e<.67&&(this.setIcon("volume-medium"),t=2),Nd(this.el_,[0,1,2,3].reduce((i,s)=>i+`${s?" ":""}vjs-vol-${s}`,"")),qn(this.el_,`vjs-vol-${t}`)}updateControlText_(){const t=this.player_.muted()||this.player_.volume()===0?"Unmute":"Mute";this.controlText()!==t&&this.controlText(t)}}kx.prototype.controlText_="Mute";ee.registerComponent("MuteToggle",kx);class Ex extends ee{constructor(e,t={}){typeof t.inline<"u"?t.inline=t.inline:t.inline=!0,(typeof t.volumeControl>"u"||eo(t.volumeControl))&&(t.volumeControl=t.volumeControl||{},t.volumeControl.vertical=!t.inline),super(e,t),this.handleKeyPressHandler_=i=>this.handleKeyPress(i),this.on(e,["loadstart"],i=>this.volumePanelState_(i)),this.on(this.muteToggle,"keyup",i=>this.handleKeyPress(i)),this.on(this.volumeControl,"keyup",i=>this.handleVolumeControlKeyUp(i)),this.on("keydown",i=>this.handleKeyPress(i)),this.on("mouseover",i=>this.handleMouseOver(i)),this.on("mouseout",i=>this.handleMouseOut(i)),this.on(this.volumeControl,["slideractive"],this.sliderActive_),this.on(this.volumeControl,["sliderinactive"],this.sliderInactive_)}sliderActive_(){this.addClass("vjs-slider-active")}sliderInactive_(){this.removeClass("vjs-slider-active")}volumePanelState_(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")}createEl(){let e="vjs-volume-panel-horizontal";return this.options_.inline||(e="vjs-volume-panel-vertical"),super.createEl("div",{className:`vjs-volume-panel vjs-control ${e}`})}dispose(){this.handleMouseOut(),super.dispose()}handleVolumeControlKeyUp(e){e.key==="Escape"&&this.muteToggle.focus()}handleMouseOver(e){this.addClass("vjs-hover"),Zi(ce,"keyup",this.handleKeyPressHandler_)}handleMouseOut(e){this.removeClass("vjs-hover"),hi(ce,"keyup",this.handleKeyPressHandler_)}handleKeyPress(e){e.key==="Escape"&&this.handleMouseOut()}}Ex.prototype.options_={children:["muteToggle","volumeControl"]};ee.registerComponent("VolumePanel",Ex);class Ax extends di{constructor(e,t){super(e,t),this.validOptions=[5,10,30],this.skipTime=this.getSkipForwardTime(),this.skipTime&&this.validOptions.includes(this.skipTime)?(this.setIcon(`forward-${this.skipTime}`),this.controlText(this.localize("Skip forward {1} seconds",[this.skipTime.toLocaleString(e.language())])),this.show()):this.hide()}getSkipForwardTime(){const e=this.options_.playerOptions;return e.controlBar&&e.controlBar.skipButtons&&e.controlBar.skipButtons.forward}buildCSSClass(){return`vjs-skip-forward-${this.getSkipForwardTime()} ${super.buildCSSClass()}`}handleClick(e){if(isNaN(this.player_.duration()))return;const t=this.player_.currentTime(),i=this.player_.liveTracker,s=i&&i.isLive()?i.seekableEnd():this.player_.duration();let n;t+this.skipTime<=s?n=t+this.skipTime:n=s,this.player_.currentTime(n)}handleLanguagechange(){this.controlText(this.localize("Skip forward {1} seconds",[this.skipTime]))}}Ax.prototype.controlText_="Skip Forward";ee.registerComponent("SkipForward",Ax);class Px extends di{constructor(e,t){super(e,t),this.validOptions=[5,10,30],this.skipTime=this.getSkipBackwardTime(),this.skipTime&&this.validOptions.includes(this.skipTime)?(this.setIcon(`replay-${this.skipTime}`),this.controlText(this.localize("Skip backward {1} seconds",[this.skipTime.toLocaleString(e.language())])),this.show()):this.hide()}getSkipBackwardTime(){const e=this.options_.playerOptions;return e.controlBar&&e.controlBar.skipButtons&&e.controlBar.skipButtons.backward}buildCSSClass(){return`vjs-skip-backward-${this.getSkipBackwardTime()} ${super.buildCSSClass()}`}handleClick(e){const t=this.player_.currentTime(),i=this.player_.liveTracker,s=i&&i.isLive()&&i.seekableStart();let n;s&&t-this.skipTime<=s?n=s:t>=this.skipTime?n=t-this.skipTime:n=0,this.player_.currentTime(n)}handleLanguagechange(){this.controlText(this.localize("Skip backward {1} seconds",[this.skipTime]))}}Px.prototype.controlText_="Skip Backward";ee.registerComponent("SkipBackward",Px);class Dx extends ee{constructor(e,t){super(e,t),t&&(this.menuButton_=t.menuButton),this.focusedChild_=-1,this.on("keydown",i=>this.handleKeyDown(i)),this.boundHandleBlur_=i=>this.handleBlur(i),this.boundHandleTapClick_=i=>this.handleTapClick(i)}addEventListenerForItem(e){e instanceof ee&&(this.on(e,"blur",this.boundHandleBlur_),this.on(e,["tap","click"],this.boundHandleTapClick_))}removeEventListenerForItem(e){e instanceof ee&&(this.off(e,"blur",this.boundHandleBlur_),this.off(e,["tap","click"],this.boundHandleTapClick_))}removeChild(e){typeof e=="string"&&(e=this.getChild(e)),this.removeEventListenerForItem(e),super.removeChild(e)}addItem(e){const t=this.addChild(e);t&&this.addEventListenerForItem(t)}createEl(){const e=this.options_.contentElType||"ul";this.contentEl_=Re(e,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");const t=super.createEl("div",{append:this.contentEl_,className:"vjs-menu"});return t.appendChild(this.contentEl_),Zi(t,"click",function(i){i.preventDefault(),i.stopImmediatePropagation()}),t}dispose(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,super.dispose()}handleBlur(e){const t=e.relatedTarget||ce.activeElement;if(!this.children().some(i=>i.el()===t)){const i=this.menuButton_;i&&i.buttonPressed_&&t!==i.el().firstChild&&i.unpressButton()}}handleTapClick(e){if(this.menuButton_){this.menuButton_.unpressButton();const t=this.children();if(!Array.isArray(t))return;const i=t.filter(s=>s.el()===e.target)[0];if(!i)return;i.name()!=="CaptionSettingsMenuItem"&&this.menuButton_.focus()}}handleKeyDown(e){e.key==="ArrowLeft"||e.key==="ArrowDown"?(e.preventDefault(),e.stopPropagation(),this.stepForward()):(e.key==="ArrowRight"||e.key==="ArrowUp")&&(e.preventDefault(),e.stopPropagation(),this.stepBack())}stepForward(){let e=0;this.focusedChild_!==void 0&&(e=this.focusedChild_+1),this.focus(e)}stepBack(){let e=0;this.focusedChild_!==void 0&&(e=this.focusedChild_-1),this.focus(e)}focus(e=0){const t=this.children().slice();t.length&&t[0].hasClass("vjs-menu-title")&&t.shift(),t.length>0&&(e<0?e=0:e>=t.length&&(e=t.length-1),this.focusedChild_=e,t[e].el_.focus())}}ee.registerComponent("Menu",Dx);class E0 extends ee{constructor(e,t={}){super(e,t),this.menuButton_=new di(e,t),this.menuButton_.controlText(this.controlText_),this.menuButton_.el_.setAttribute("aria-haspopup","true");const i=di.prototype.buildCSSClass();this.menuButton_.el_.className=this.buildCSSClass()+" "+i,this.menuButton_.removeClass("vjs-control"),this.addChild(this.menuButton_),this.update(),this.enabled_=!0;const s=n=>this.handleClick(n);this.handleMenuKeyUp_=n=>this.handleMenuKeyUp(n),this.on(this.menuButton_,"tap",s),this.on(this.menuButton_,"click",s),this.on(this.menuButton_,"keydown",n=>this.handleKeyDown(n)),this.on(this.menuButton_,"mouseenter",()=>{this.addClass("vjs-hover"),this.menu.show(),Zi(ce,"keyup",this.handleMenuKeyUp_)}),this.on("mouseleave",n=>this.handleMouseLeave(n)),this.on("keydown",n=>this.handleSubmenuKeyDown(n))}update(){const e=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=e,this.addChild(e),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?(this.hide(),this.menu.contentEl_.removeAttribute("role")):(this.show(),this.menu.contentEl_.setAttribute("role","menu"))}createMenu(){const e=new Dx(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){const t=Re("li",{className:"vjs-menu-title",textContent:Et(this.options_.title),tabIndex:-1}),i=new ee(this.player_,{el:t});e.addItem(i)}if(this.items=this.createItems(),this.items)for(let t=0;t<this.items.length;t++)e.addItem(this.items[t]);return e}createItems(){}createEl(){return super.createEl("div",{className:this.buildWrapperCSSClass()},{})}setIcon(e){super.setIcon(e,this.menuButton_.el_)}buildWrapperCSSClass(){let e="vjs-menu-button";this.options_.inline===!0?e+="-inline":e+="-popup";const t=di.prototype.buildCSSClass();return`vjs-menu-button ${e} ${t} ${super.buildCSSClass()}`}buildCSSClass(){let e="vjs-menu-button";return this.options_.inline===!0?e+="-inline":e+="-popup",`vjs-menu-button ${e} ${super.buildCSSClass()}`}controlText(e,t=this.menuButton_.el()){return this.menuButton_.controlText(e,t)}dispose(){this.handleMouseLeave(),super.dispose()}handleClick(e){this.buttonPressed_?this.unpressButton():this.pressButton()}handleMouseLeave(e){this.removeClass("vjs-hover"),hi(ce,"keyup",this.handleMenuKeyUp_)}focus(){this.menuButton_.focus()}blur(){this.menuButton_.blur()}handleKeyDown(e){e.key==="Escape"||e.key==="Tab"?(this.buttonPressed_&&this.unpressButton(),!e.key==="Tab"&&(e.preventDefault(),this.menuButton_.focus())):(e.key==="Up"||e.key==="Down"&&!(this.player_.options_.playerOptions.spatialNavigation&&this.player_.options_.playerOptions.spatialNavigation.enabled))&&(this.buttonPressed_||(e.preventDefault(),this.pressButton()))}handleMenuKeyUp(e){(e.key==="Escape"||e.key==="Tab")&&this.removeClass("vjs-hover")}handleSubmenuKeyPress(e){this.handleSubmenuKeyDown(e)}handleSubmenuKeyDown(e){(e.key==="Escape"||e.key==="Tab")&&(this.buttonPressed_&&this.unpressButton(),!e.key==="Tab"&&(e.preventDefault(),this.menuButton_.focus()))}pressButton(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),ci&&U_())return;this.menu.focus()}}unpressButton(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))}disable(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()}enable(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()}}ee.registerComponent("MenuButton",E0);class A0 extends E0{constructor(e,t){const i=t.tracks;if(super(e,t),this.items.length<=1&&this.hide(),!i)return;const s=mt(this,this.update);i.addEventListener("removetrack",s),i.addEventListener("addtrack",s),i.addEventListener("labelchange",s),this.player_.on("ready",s),this.player_.on("dispose",function(){i.removeEventListener("removetrack",s),i.removeEventListener("addtrack",s),i.removeEventListener("labelchange",s)})}}ee.registerComponent("TrackButton",A0);class Ru extends Zd{constructor(e,t){super(e,t),this.selectable=t.selectable,this.isSelected_=t.selected||!1,this.multiSelectable=t.multiSelectable,this.selected(this.isSelected_),this.selectable?this.multiSelectable?this.el_.setAttribute("role","menuitemcheckbox"):this.el_.setAttribute("role","menuitemradio"):this.el_.setAttribute("role","menuitem")}createEl(e,t,i){this.nonIconControl=!0;const s=super.createEl("li",Object.assign({className:"vjs-menu-item",tabIndex:-1},t),i),n=Re("span",{className:"vjs-menu-item-text",textContent:this.localize(this.options_.label)});return this.player_.options_.experimentalSvgIcons?s.appendChild(n):s.replaceChild(n,s.querySelector(".vjs-icon-placeholder")),s}handleKeyDown(e){["Tab","Escape","ArrowUp","ArrowLeft","ArrowRight","ArrowDown"].includes(e.key)||super.handleKeyDown(e)}handleClick(e){this.selected(!0)}selected(e){this.selectable&&(e?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))}}ee.registerComponent("MenuItem",Ru);class Lu extends Ru{constructor(e,t){const i=t.track,s=e.textTracks();t.label=i.label||i.language||"Unknown",t.selected=i.mode==="showing",super(e,t),this.track=i,this.kinds=(t.kinds||[t.kind||this.track.kind]).filter(Boolean);const n=(...o)=>{this.handleTracksChange.apply(this,o)},a=(...o)=>{this.handleSelectedLanguageChange.apply(this,o)};if(e.on(["loadstart","texttrackchange"],n),s.addEventListener("change",n),s.addEventListener("selectedlanguagechange",a),this.on("dispose",function(){e.off(["loadstart","texttrackchange"],n),s.removeEventListener("change",n),s.removeEventListener("selectedlanguagechange",a)}),s.onchange===void 0){let o;this.on(["tap","click"],function(){if(typeof q.Event!="object")try{o=new q.Event("change")}catch{}o||(o=ce.createEvent("Event"),o.initEvent("change",!0,!0)),s.dispatchEvent(o)})}this.handleTracksChange()}handleClick(e){const t=this.track,i=this.player_.textTracks();if(super.handleClick(e),!!i)for(let s=0;s<i.length;s++){const n=i[s];this.kinds.indexOf(n.kind)!==-1&&(n===t?n.mode!=="showing"&&(n.mode="showing"):n.mode!=="disabled"&&(n.mode="disabled"))}}handleTracksChange(e){const t=this.track.mode==="showing";t!==this.isSelected_&&this.selected(t)}handleSelectedLanguageChange(e){if(this.track.mode==="showing"){const t=this.player_.cache_.selectedLanguage;if(t&&t.enabled&&t.language===this.track.language&&t.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}}dispose(){this.track=null,super.dispose()}}ee.registerComponent("TextTrackMenuItem",Lu);class Mx extends Lu{constructor(e,t){t.track={player:e,kind:t.kind,kinds:t.kinds,default:!1,mode:"disabled"},t.kinds||(t.kinds=[t.kind]),t.label?t.track.label=t.label:t.track.label=t.kinds.join(" and ")+" off",t.selectable=!0,t.multiSelectable=!1,super(e,t)}handleTracksChange(e){const t=this.player().textTracks();let i=!0;for(let s=0,n=t.length;s<n;s++){const a=t[s];if(this.options_.kinds.indexOf(a.kind)>-1&&a.mode==="showing"){i=!1;break}}i!==this.isSelected_&&this.selected(i)}handleSelectedLanguageChange(e){const t=this.player().textTracks();let i=!0;for(let s=0,n=t.length;s<n;s++){const a=t[s];if(["captions","descriptions","subtitles"].indexOf(a.kind)>-1&&a.mode==="showing"){i=!1;break}}i&&(this.player_.cache_.selectedLanguage={enabled:!1})}handleLanguagechange(){this.$(".vjs-menu-item-text").textContent=this.player_.localize(this.options_.label),super.handleLanguagechange()}}ee.registerComponent("OffTextTrackMenuItem",Mx);class Co extends A0{constructor(e,t={}){t.tracks=e.textTracks(),super(e,t)}createItems(e=[],t=Lu){let i;this.label_&&(i=`${this.label_} off`),e.push(new Mx(this.player_,{kinds:this.kinds_,kind:this.kind_,label:i})),this.hideThreshold_+=1;const s=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(let n=0;n<s.length;n++){const a=s[n];if(this.kinds_.indexOf(a.kind)>-1){const o=new t(this.player_,{track:a,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});o.addClass(`vjs-${a.kind}-menu-item`),e.push(o)}}return e}}ee.registerComponent("TextTrackButton",Co);class Ix extends Ru{constructor(e,t){const i=t.track,s=t.cue,n=e.currentTime();t.selectable=!0,t.multiSelectable=!1,t.label=s.text,t.selected=s.startTime<=n&&n<s.endTime,super(e,t),this.track=i,this.cue=s}handleClick(e){super.handleClick(),this.player_.currentTime(this.cue.startTime)}}ee.registerComponent("ChaptersTrackMenuItem",Ix);class P0 extends Co{constructor(e,t,i){super(e,t,i),this.setIcon("chapters"),this.selectCurrentItem_=()=>{this.items.forEach(s=>{s.selected(this.track_.activeCues[0]===s.cue)})}}buildCSSClass(){return`vjs-chapters-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-chapters-button ${super.buildWrapperCSSClass()}`}update(e){if(e&&e.track&&e.track.kind!=="chapters")return;const t=this.findChaptersTrack();t!==this.track_?(this.setTrack(t),super.update()):(!this.items||t&&t.cues&&t.cues.length!==this.items.length)&&super.update()}setTrack(e){if(this.track_!==e){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){const t=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);t&&t.removeEventListener("load",this.updateHandler_),this.track_.removeEventListener("cuechange",this.selectCurrentItem_),this.track_=null}if(this.track_=e,this.track_){this.track_.mode="hidden";const t=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);t&&t.addEventListener("load",this.updateHandler_),this.track_.addEventListener("cuechange",this.selectCurrentItem_)}}}findChaptersTrack(){const e=this.player_.textTracks()||[];for(let t=e.length-1;t>=0;t--){const i=e[t];if(i.kind===this.kind_)return i}}getMenuCaption(){return this.track_&&this.track_.label?this.track_.label:this.localize(Et(this.kind_))}createMenu(){return this.options_.title=this.getMenuCaption(),super.createMenu()}createItems(){const e=[];if(!this.track_)return e;const t=this.track_.cues;if(!t)return e;for(let i=0,s=t.length;i<s;i++){const n=t[i],a=new Ix(this.player_,{track:this.track_,cue:n});e.push(a)}return e}}P0.prototype.kind_="chapters";P0.prototype.controlText_="Chapters";ee.registerComponent("ChaptersButton",P0);class D0 extends Co{constructor(e,t,i){super(e,t,i),this.setIcon("audio-description");const s=e.textTracks(),n=mt(this,this.handleTracksChange);s.addEventListener("change",n),this.on("dispose",function(){s.removeEventListener("change",n)})}handleTracksChange(e){const t=this.player().textTracks();let i=!1;for(let s=0,n=t.length;s<n;s++){const a=t[s];if(a.kind!==this.kind_&&a.mode==="showing"){i=!0;break}}i?this.disable():this.enable()}buildCSSClass(){return`vjs-descriptions-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-descriptions-button ${super.buildWrapperCSSClass()}`}}D0.prototype.kind_="descriptions";D0.prototype.controlText_="Descriptions";ee.registerComponent("DescriptionsButton",D0);class M0 extends Co{constructor(e,t,i){super(e,t,i),this.setIcon("subtitles")}buildCSSClass(){return`vjs-subtitles-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-subtitles-button ${super.buildWrapperCSSClass()}`}}M0.prototype.kind_="subtitles";M0.prototype.controlText_="Subtitles";ee.registerComponent("SubtitlesButton",M0);class I0 extends Lu{constructor(e,t){t.track={player:e,kind:t.kind,label:t.kind+" settings",selectable:!1,default:!1,mode:"disabled"},t.selectable=!1,t.name="CaptionSettingsMenuItem",super(e,t),this.addClass("vjs-texttrack-settings"),this.controlText(", opens "+t.kind+" settings dialog")}handleClick(e){this.player().getChild("textTrackSettings").open()}handleLanguagechange(){this.$(".vjs-menu-item-text").textContent=this.player_.localize(this.options_.kind+" settings"),super.handleLanguagechange()}}ee.registerComponent("CaptionSettingsMenuItem",I0);class R0 extends Co{constructor(e,t,i){super(e,t,i),this.setIcon("captions")}buildCSSClass(){return`vjs-captions-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-captions-button ${super.buildWrapperCSSClass()}`}createItems(){const e=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(e.push(new I0(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),super.createItems(e)}}R0.prototype.kind_="captions";R0.prototype.controlText_="Captions";ee.registerComponent("CaptionsButton",R0);class Rx extends Lu{createEl(e,t,i){const s=super.createEl(e,t,i),n=s.querySelector(".vjs-menu-item-text");return this.options_.track.kind==="captions"&&(this.player_.options_.experimentalSvgIcons?this.setIcon("captions",s):n.appendChild(Re("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),n.appendChild(Re("span",{className:"vjs-control-text",textContent:` ${this.localize("Captions")}`}))),s}}ee.registerComponent("SubsCapsMenuItem",Rx);class L0 extends Co{constructor(e,t={}){super(e,t),this.label_="subtitles",this.setIcon("subtitles"),["en","en-us","en-ca","fr-ca"].indexOf(this.player_.language_)>-1&&(this.label_="captions",this.setIcon("captions")),this.menuButton_.controlText(Et(this.label_))}buildCSSClass(){return`vjs-subs-caps-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-subs-caps-button ${super.buildWrapperCSSClass()}`}createItems(){let e=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(e.push(new I0(this.player_,{kind:this.label_})),this.hideThreshold_+=1),e=super.createItems(e,Rx),e}}L0.prototype.kinds_=["captions","subtitles"];L0.prototype.controlText_="Subtitles";ee.registerComponent("SubsCapsButton",L0);class Lx extends Ru{constructor(e,t){const i=t.track,s=e.audioTracks();t.label=i.label||i.language||"Unknown",t.selected=i.enabled,super(e,t),this.track=i,this.addClass(`vjs-${i.kind}-menu-item`);const n=(...a)=>{this.handleTracksChange.apply(this,a)};s.addEventListener("change",n),this.on("dispose",()=>{s.removeEventListener("change",n)})}createEl(e,t,i){const s=super.createEl(e,t,i),n=s.querySelector(".vjs-menu-item-text");return["main-desc","descriptions"].indexOf(this.options_.track.kind)>=0&&(n.appendChild(Re("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),n.appendChild(Re("span",{className:"vjs-control-text",textContent:" "+this.localize("Descriptions")}))),s}handleClick(e){if(super.handleClick(e),this.track.enabled=!0,this.player_.tech_.featuresNativeAudioTracks){const t=this.player_.audioTracks();for(let i=0;i<t.length;i++){const s=t[i];s!==this.track&&(s.enabled=s===this.track)}}}handleTracksChange(e){this.selected(this.track.enabled)}}ee.registerComponent("AudioTrackMenuItem",Lx);class Qx extends A0{constructor(e,t={}){t.tracks=e.audioTracks(),super(e,t),this.setIcon("audio")}buildCSSClass(){return`vjs-audio-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-audio-button ${super.buildWrapperCSSClass()}`}createItems(e=[]){this.hideThreshold_=1;const t=this.player_.audioTracks();for(let i=0;i<t.length;i++){const s=t[i];e.push(new Lx(this.player_,{track:s,selectable:!0,multiSelectable:!1}))}return e}}Qx.prototype.controlText_="Audio Track";ee.registerComponent("AudioTrackButton",Qx);class Q0 extends Ru{constructor(e,t){const i=t.rate,s=parseFloat(i,10);t.label=i,t.selected=s===e.playbackRate(),t.selectable=!0,t.multiSelectable=!1,super(e,t),this.label=i,this.rate=s,this.on(e,"ratechange",n=>this.update(n))}handleClick(e){super.handleClick(),this.player().playbackRate(this.rate)}update(e){this.selected(this.player().playbackRate()===this.rate)}}Q0.prototype.contentElType="button";ee.registerComponent("PlaybackRateMenuItem",Q0);class $x extends E0{constructor(e,t){super(e,t),this.menuButton_.el_.setAttribute("aria-describedby",this.labelElId_),this.updateVisibility(),this.updateLabel(),this.on(e,"loadstart",i=>this.updateVisibility(i)),this.on(e,"ratechange",i=>this.updateLabel(i)),this.on(e,"playbackrateschange",i=>this.handlePlaybackRateschange(i))}createEl(){const e=super.createEl();return this.labelElId_="vjs-playback-rate-value-label-"+this.id_,this.labelEl_=Re("div",{className:"vjs-playback-rate-value",id:this.labelElId_,textContent:"1x"}),e.appendChild(this.labelEl_),e}dispose(){this.labelEl_=null,super.dispose()}buildCSSClass(){return`vjs-playback-rate ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-playback-rate ${super.buildWrapperCSSClass()}`}createItems(){const e=this.playbackRates(),t=[];for(let i=e.length-1;i>=0;i--)t.push(new Q0(this.player(),{rate:e[i]+"x"}));return t}handlePlaybackRateschange(e){this.update()}playbackRates(){const e=this.player();return e.playbackRates&&e.playbackRates()||[]}playbackRateSupported(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0}updateVisibility(e){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")}updateLabel(e){this.playbackRateSupported()&&(this.labelEl_.textContent=this.player().playbackRate()+"x")}}$x.prototype.controlText_="Playback Rate";ee.registerComponent("PlaybackRateMenuButton",$x);class Bx extends ee{buildCSSClass(){return`vjs-spacer ${super.buildCSSClass()}`}createEl(e="div",t={},i={}){return t.className||(t.className=this.buildCSSClass()),super.createEl(e,t,i)}}ee.registerComponent("Spacer",Bx);class D$ extends Bx{buildCSSClass(){return`vjs-custom-control-spacer ${super.buildCSSClass()}`}createEl(){return super.createEl("div",{className:this.buildCSSClass(),textContent:" "})}}ee.registerComponent("CustomControlSpacer",D$);class Nx extends ee{createEl(){return super.createEl("div",{className:"vjs-control-bar",dir:"ltr"})}}Nx.prototype.options_={children:["playToggle","skipBackward","skipForward","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","pictureInPictureToggle","fullscreenToggle"]};ee.registerComponent("ControlBar",Nx);class Fx extends xo{constructor(e,t){super(e,t),this.on(e,"error",i=>{this.open(i)})}buildCSSClass(){return`vjs-error-display ${super.buildCSSClass()}`}content(){const e=this.player().error();return e?this.localize(e.message):""}}Fx.prototype.options_=Object.assign({},xo.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0});ee.registerComponent("ErrorDisplay",Fx);class Ux extends ee{constructor(e,t={}){super(e,t),this.el_.setAttribute("aria-labelledby",this.selectLabelledbyIds)}createEl(){return this.selectLabelledbyIds=[this.options_.legendId,this.options_.labelId].join(" ").trim(),Re("select",{id:this.options_.id},{},this.options_.SelectOptions.map(t=>{const i=(this.options_.labelId?this.options_.labelId:`vjs-track-option-${cr()}`)+"-"+t[1].replace(/\W+/g,""),s=Re("option",{id:i,value:this.localize(t[0]),textContent:this.localize(t[1])});return s.setAttribute("aria-labelledby",`${this.selectLabelledbyIds} ${i}`),s}))}}ee.registerComponent("TextTrackSelect",Ux);class Xn extends ee{constructor(e,t={}){super(e,t);const i=Re("legend",{textContent:this.localize(this.options_.legendText),id:this.options_.legendId});this.el().appendChild(i);const s=this.options_.selects;for(const n of s){const a=this.options_.selectConfigs[n],o=a.className,l=a.id.replace("%s",this.options_.id_);let u=null;const c=`vjs_select_${cr()}`;if(this.options_.type==="colors"){u=Re("span",{className:o});const f=Re("label",{id:l,className:"vjs-label",textContent:this.localize(a.label)});f.setAttribute("for",c),u.appendChild(f)}const h=new Ux(e,{SelectOptions:a.options,legendId:this.options_.legendId,id:c,labelId:l});this.addChild(h),this.options_.type==="colors"&&(u.appendChild(h.el()),this.el().appendChild(u))}}createEl(){return Re("fieldset",{className:this.options_.className})}}ee.registerComponent("TextTrackFieldset",Xn);class qx extends ee{constructor(e,t={}){super(e,t);const i=this.options_.textTrackComponentid,s=new Xn(e,{id_:i,legendId:`captions-text-legend-${i}`,legendText:this.localize("Text"),className:"vjs-fg vjs-track-setting",selects:this.options_.fieldSets[0],selectConfigs:this.options_.selectConfigs,type:"colors"});this.addChild(s);const n=new Xn(e,{id_:i,legendId:`captions-background-${i}`,legendText:this.localize("Text Background"),className:"vjs-bg vjs-track-setting",selects:this.options_.fieldSets[1],selectConfigs:this.options_.selectConfigs,type:"colors"});this.addChild(n);const a=new Xn(e,{id_:i,legendId:`captions-window-${i}`,legendText:this.localize("Caption Area Background"),className:"vjs-window vjs-track-setting",selects:this.options_.fieldSets[2],selectConfigs:this.options_.selectConfigs,type:"colors"});this.addChild(a)}createEl(){return Re("div",{className:"vjs-track-settings-colors"})}}ee.registerComponent("TextTrackSettingsColors",qx);class Vx extends ee{constructor(e,t={}){super(e,t);const i=this.options_.textTrackComponentid,s=new Xn(e,{id_:i,legendId:`captions-font-size-${i}`,legendText:"Font Size",className:"vjs-font-percent vjs-track-setting",selects:this.options_.fieldSets[0],selectConfigs:this.options_.selectConfigs,type:"font"});this.addChild(s);const n=new Xn(e,{id_:i,legendId:`captions-edge-style-${i}`,legendText:this.localize("Text Edge Style"),className:"vjs-edge-style vjs-track-setting",selects:this.options_.fieldSets[1],selectConfigs:this.options_.selectConfigs,type:"font"});this.addChild(n);const a=new Xn(e,{id_:i,legendId:`captions-font-family-${i}`,legendText:this.localize("Font Family"),className:"vjs-font-family vjs-track-setting",selects:this.options_.fieldSets[2],selectConfigs:this.options_.selectConfigs,type:"font"});this.addChild(a)}createEl(){return Re("div",{className:"vjs-track-settings-font"})}}ee.registerComponent("TextTrackSettingsFont",Vx);class Xx extends ee{constructor(e,t={}){super(e,t);const i=new di(e,{controlText:this.localize("restore all settings to the default values"),className:"vjs-default-button"});i.el().classList.remove("vjs-control","vjs-button"),i.el().textContent=this.localize("Reset"),this.addChild(i);const s=this.localize("Done"),n=new di(e,{controlText:s,className:"vjs-done-button"});n.el().classList.remove("vjs-control","vjs-button"),n.el().textContent=s,this.addChild(n)}createEl(){return Re("div",{className:"vjs-track-settings-controls"})}}ee.registerComponent("TrackSettingsControls",Xx);const ip="vjs-text-track-settings",Vb=["#000","Black"],Xb=["#00F","Blue"],jb=["#0FF","Cyan"],zb=["#0F0","Green"],Zb=["#F0F","Magenta"],Wb=["#F00","Red"],Hb=["#FFF","White"],Yb=["#FF0","Yellow"],rp=["1","Opaque"],sp=["0.5","Semi-Transparent"],Gb=["0","Transparent"],zs={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[Vb,Hb,Wb,zb,Xb,Yb,Zb,jb],className:"vjs-bg-color"},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Opacity",options:[rp,sp,Gb],className:"vjs-bg-opacity vjs-opacity"},color:{selector:".vjs-text-color > select",id:"captions-foreground-color-%s",label:"Color",options:[Hb,Vb,Wb,zb,Xb,Yb,Zb,jb],className:"vjs-text-color"},edgeStyle:{selector:".vjs-edge-style > select",id:"",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Drop shadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:r=>r==="1.00"?null:Number(r)},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Opacity",options:[rp,sp],className:"vjs-text-opacity vjs-opacity"},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color",className:"vjs-window-color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Opacity",options:[Gb,sp,rp],className:"vjs-window-opacity vjs-opacity"}};zs.windowColor.options=zs.backgroundColor.options;function jx(r,e){if(e&&(r=e(r)),r&&r!=="none")return r}function M$(r,e){const t=r.options[r.options.selectedIndex].value;return jx(t,e)}function I$(r,e,t){if(e){for(let i=0;i<r.options.length;i++)if(jx(r.options[i].value,t)===e){r.selectedIndex=i;break}}}class R$ extends xo{constructor(e,t){t.temporary=!1,super(e,t),this.updateDisplay=this.updateDisplay.bind(this),this.fill(),this.hasBeenOpened_=this.hasBeenFilled_=!0,this.renderModalComponents(e),this.endDialog=Re("p",{className:"vjs-control-text",textContent:this.localize("End of dialog window.")}),this.el().appendChild(this.endDialog),this.setDefaults(),t.persistTextTrackSettings===void 0&&(this.options_.persistTextTrackSettings=this.options_.playerOptions.persistTextTrackSettings),this.bindFunctionsToSelectsAndButtons(),this.options_.persistTextTrackSettings&&this.restoreSettings()}renderModalComponents(e){const t=new qx(e,{textTrackComponentid:this.id_,selectConfigs:zs,fieldSets:[["color","textOpacity"],["backgroundColor","backgroundOpacity"],["windowColor","windowOpacity"]]});this.addChild(t);const i=new Vx(e,{textTrackComponentid:this.id_,selectConfigs:zs,fieldSets:[["fontPercent"],["edgeStyle"],["fontFamily"]]});this.addChild(i);const s=new Xx(e);this.addChild(s)}bindFunctionsToSelectsAndButtons(){this.on(this.$(".vjs-done-button"),["click","tap"],()=>{this.saveSettings(),this.close()}),this.on(this.$(".vjs-default-button"),["click","tap"],()=>{this.setDefaults(),this.updateDisplay()}),Ea(zs,e=>{this.on(this.$(e.selector),"change",this.updateDisplay)})}dispose(){this.endDialog=null,super.dispose()}label(){return this.localize("Caption Settings Dialog")}description(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")}buildCSSClass(){return super.buildCSSClass()+" vjs-text-track-settings"}getValues(){return R_(zs,(e,t,i)=>{const s=M$(this.$(t.selector),t.parser);return s!==void 0&&(e[i]=s),e},{})}setValues(e){Ea(zs,(t,i)=>{I$(this.$(t.selector),e[i],t.parser)})}setDefaults(){Ea(zs,e=>{const t=e.hasOwnProperty("default")?e.default:0;this.$(e.selector).selectedIndex=t})}restoreSettings(){let e;try{e=JSON.parse(q.localStorage.getItem(ip))}catch(t){qe.warn(t)}e&&this.setValues(e)}saveSettings(){if(!this.options_.persistTextTrackSettings)return;const e=this.getValues();try{Object.keys(e).length?q.localStorage.setItem(ip,JSON.stringify(e)):q.localStorage.removeItem(ip)}catch(t){qe.warn(t)}}updateDisplay(){const e=this.player_.getChild("textTrackDisplay");e&&e.updateDisplay()}handleLanguagechange(){this.fill(),this.renderModalComponents(this.player_),this.bindFunctionsToSelectsAndButtons()}}ee.registerComponent("TextTrackSettings",R$);class L$ extends ee{constructor(e,t){let i=t.ResizeObserver||q.ResizeObserver;t.ResizeObserver===null&&(i=!1);const s=nt({createEl:!i,reportTouchActivity:!1},t);super(e,s),this.ResizeObserver=t.ResizeObserver||q.ResizeObserver,this.loadListener_=null,this.resizeObserver_=null,this.debouncedHandler_=rx(()=>{this.resizeHandler()},100,!1,this),i?(this.resizeObserver_=new this.ResizeObserver(this.debouncedHandler_),this.resizeObserver_.observe(e.el())):(this.loadListener_=()=>{if(!this.el_||!this.el_.contentWindow)return;const n=this.debouncedHandler_;let a=this.unloadListener_=function(){hi(this,"resize",n),hi(this,"unload",a),a=null};Zi(this.el_.contentWindow,"unload",a),Zi(this.el_.contentWindow,"resize",n)},this.one("load",this.loadListener_))}createEl(){return super.createEl("iframe",{className:"vjs-resize-manager",tabIndex:-1,title:this.localize("No content")},{"aria-hidden":"true"})}resizeHandler(){!this.player_||!this.player_.trigger||this.player_.trigger("playerresize")}dispose(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,super.dispose()}}ee.registerComponent("ResizeManager",L$);const Q$={trackingThreshold:20,liveTolerance:15};class $$ extends ee{constructor(e,t){const i=nt(Q$,t,{createEl:!1});super(e,i),this.trackLiveHandler_=()=>this.trackLive_(),this.handlePlay_=s=>this.handlePlay(s),this.handleFirstTimeupdate_=s=>this.handleFirstTimeupdate(s),this.handleSeeked_=s=>this.handleSeeked(s),this.seekToLiveEdge_=s=>this.seekToLiveEdge(s),this.reset_(),this.on(this.player_,"durationchange",s=>this.handleDurationchange(s)),this.on(this.player_,"canplay",()=>this.toggleTracking())}trackLive_(){const e=this.player_.seekable();if(!e||!e.length)return;const t=Number(q.performance.now().toFixed(4)),i=this.lastTime_===-1?0:(t-this.lastTime_)/1e3;this.lastTime_=t,this.pastSeekEnd_=this.pastSeekEnd()+i;const s=this.liveCurrentTime(),n=this.player_.currentTime();let a=this.player_.paused()||this.seekedBehindLive_||Math.abs(s-n)>this.options_.liveTolerance;(!this.timeupdateSeen_||s===1/0)&&(a=!1),a!==this.behindLiveEdge_&&(this.behindLiveEdge_=a,this.trigger("liveedgechange"))}handleDurationchange(){this.toggleTracking()}toggleTracking(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())}startTracking(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLiveHandler_,hr),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLiveHandler_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked_):(this.one(this.player_,"play",this.handlePlay_),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate_)))}handleFirstTimeupdate(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked_)}handleSeeked(){const e=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.nextSeekedFromUser_&&e>2,this.nextSeekedFromUser_=!1,this.trackLive_()}handlePlay(){this.one(this.player_,"timeupdate",this.seekToLiveEdge_)}reset_(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.nextSeekedFromUser_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLiveHandler_),this.off(this.player_,"seeked",this.handleSeeked_),this.off(this.player_,"play",this.handlePlay_),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate_),this.off(this.player_,"timeupdate",this.seekToLiveEdge_)}nextSeekedFromUser(){this.nextSeekedFromUser_=!0}stopTracking(){this.isTracking()&&(this.reset_(),this.trigger("liveedgechange"))}seekableEnd(){const e=this.player_.seekable(),t=[];let i=e?e.length:0;for(;i--;)t.push(e.end(i));return t.length?t.sort()[t.length-1]:1/0}seekableStart(){const e=this.player_.seekable(),t=[];let i=e?e.length:0;for(;i--;)t.push(e.start(i));return t.length?t.sort()[0]:0}liveWindow(){const e=this.liveCurrentTime();return e===1/0?0:e-this.seekableStart()}isLive(){return this.isTracking()}atLiveEdge(){return!this.behindLiveEdge()}liveCurrentTime(){return this.pastSeekEnd()+this.seekableEnd()}pastSeekEnd(){const e=this.seekableEnd();return this.lastSeekEnd_!==-1&&e!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=e,this.pastSeekEnd_}behindLiveEdge(){return this.behindLiveEdge_}isTracking(){return typeof this.trackingInterval_=="number"}seekToLiveEdge(){this.seekedBehindLive_=!1,!this.atLiveEdge()&&(this.nextSeekedFromUser_=!1,this.player_.currentTime(this.liveCurrentTime()))}dispose(){this.stopTracking(),super.dispose()}}ee.registerComponent("LiveTracker",$$);class B$ extends ee{constructor(e,t){super(e,t),this.on("statechanged",i=>this.updateDom_()),this.updateDom_()}createEl(){return this.els={title:Re("div",{className:"vjs-title-bar-title",id:`vjs-title-bar-title-${cr()}`}),description:Re("div",{className:"vjs-title-bar-description",id:`vjs-title-bar-description-${cr()}`})},Re("div",{className:"vjs-title-bar"},{},L_(this.els))}updateDom_(){const e=this.player_.tech_,t=e&&e.el_,i={title:"aria-labelledby",description:"aria-describedby"};["title","description"].forEach(s=>{const n=this.state[s],a=this.els[s],o=i[s];qd(a),n&&fn(a,n),t&&(t.removeAttribute(o),n&&t.setAttribute(o,a.id))}),this.state.title||this.state.description?this.show():this.hide()}update(e){this.setState(e)}dispose(){const e=this.player_.tech_,t=e&&e.el_;t&&(t.removeAttribute("aria-labelledby"),t.removeAttribute("aria-describedby")),super.dispose(),this.els=null}}ee.registerComponent("TitleBar",B$);const N$={initialDisplay:4e3,position:[],takeFocus:!1};class F$ extends di{constructor(e,t){t=nt(N$,t),super(e,t),this.controlText(t.controlText),this.hide(),this.on(this.player_,["useractive","userinactive"],i=>{this.removeClass("force-display")})}buildCSSClass(){return`vjs-transient-button focus-visible ${this.options_.position.map(e=>`vjs-${e}`).join(" ")}`}createEl(){const e=Re("button",{},{type:"button",class:this.buildCSSClass()},Re("span"));return this.controlTextEl_=e.querySelector("span"),e}show(){super.show(),this.addClass("force-display"),this.options_.takeFocus&&this.el().focus({preventScroll:!0}),this.forceDisplayTimeout=this.player_.setTimeout(()=>{this.removeClass("force-display")},this.options_.initialDisplay)}hide(){this.removeClass("force-display"),super.hide()}dispose(){this.player_.clearTimeout(this.forceDisplayTimeout),super.dispose()}}ee.registerComponent("TransientButton",F$);const Tm=r=>{const e=r.el();if(e.hasAttribute("src"))return r.triggerSourceset(e.src),!0;const t=r.$$("source"),i=[];let s="";if(!t.length)return!1;for(let n=0;n<t.length;n++){const a=t[n].src;a&&i.indexOf(a)===-1&&i.push(a)}return i.length?(i.length===1&&(s=i[0]),r.triggerSourceset(s),!0):!1},U$=Object.defineProperty({},"innerHTML",{get(){return this.cloneNode(!0).innerHTML},set(r){const e=ce.createElement(this.nodeName.toLowerCase());e.innerHTML=r;const t=ce.createDocumentFragment();for(;e.childNodes.length;)t.appendChild(e.childNodes[0]);return this.innerText="",q.Element.prototype.appendChild.call(this,t),this.innerHTML}}),zx=(r,e)=>{let t={};for(let i=0;i<r.length&&(t=Object.getOwnPropertyDescriptor(r[i],e),!(t&&t.set&&t.get));i++);return t.enumerable=!0,t.configurable=!0,t},q$=r=>zx([r.el(),q.HTMLMediaElement.prototype,q.Element.prototype,U$],"innerHTML"),Kb=function(r){const e=r.el();if(e.resetSourceWatch_)return;const t={},i=q$(r),s=n=>(...a)=>{const o=n.apply(e,a);return Tm(r),o};["append","appendChild","insertAdjacentHTML"].forEach(n=>{e[n]&&(t[n]=e[n],e[n]=s(t[n]))}),Object.defineProperty(e,"innerHTML",nt(i,{set:s(i.set)})),e.resetSourceWatch_=()=>{e.resetSourceWatch_=null,Object.keys(t).forEach(n=>{e[n]=t[n]}),Object.defineProperty(e,"innerHTML",i)},r.one("sourceset",e.resetSourceWatch_)},V$=Object.defineProperty({},"src",{get(){return this.hasAttribute("src")?px(q.Element.prototype.getAttribute.call(this,"src")):""},set(r){return q.Element.prototype.setAttribute.call(this,"src",r),r}}),X$=r=>zx([r.el(),q.HTMLMediaElement.prototype,V$],"src"),j$=function(r){if(!r.featuresSourceset)return;const e=r.el();if(e.resetSourceset_)return;const t=X$(r),i=e.setAttribute,s=e.load;Object.defineProperty(e,"src",nt(t,{set:n=>{const a=t.set.call(e,n);return r.triggerSourceset(e.src),a}})),e.setAttribute=(n,a)=>{const o=i.call(e,n,a);return/src/i.test(n)&&r.triggerSourceset(e.src),o},e.load=()=>{const n=s.call(e);return Tm(r)||(r.triggerSourceset(""),Kb(r)),n},e.currentSrc?r.triggerSourceset(e.currentSrc):Tm(r)||Kb(r),e.resetSourceset_=()=>{e.resetSourceset_=null,e.load=s,e.setAttribute=i,Object.defineProperty(e,"src",t),e.resetSourceWatch_&&e.resetSourceWatch_()}};class be extends Be{constructor(e,t){super(e,t);const i=e.source;let s=!1;if(this.featuresVideoFrameCallback=this.featuresVideoFrameCallback&&this.el_.tagName==="VIDEO",i&&(this.el_.currentSrc!==i.src||e.tag&&e.tag.initNetworkState_===3)?this.setSource(i):this.handleLateInit_(this.el_),e.enableSourceset&&this.setupSourcesetHandling_(),this.isScrubbing_=!1,this.el_.hasChildNodes()){const n=this.el_.childNodes;let a=n.length;const o=[];for(;a--;){const l=n[a];l.nodeName.toLowerCase()==="track"&&(this.featuresNativeTextTracks?(this.remoteTextTrackEls().addTrackElement_(l),this.remoteTextTracks().addTrack(l.track),this.textTracks().addTrack(l.track),!s&&!this.el_.hasAttribute("crossorigin")&&zd(l.src)&&(s=!0)):o.push(l))}for(let l=0;l<o.length;l++)this.el_.removeChild(o[l])}this.proxyNativeTracks_(),this.featuresNativeTextTracks&&s&&qe.warn(`Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.
This may prevent text tracks from loading.`),this.restoreMetadataTracksInIOSNativePlayer_(),(Nl||$d)&&e.nativeControlsForTouch===!0&&this.setControls(!0),this.proxyWebkitFullscreen_(),this.triggerReady()}dispose(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),be.disposeMediaElement(this.el_),this.options_=null,super.dispose()}setupSourcesetHandling_(){j$(this)}restoreMetadataTracksInIOSNativePlayer_(){const e=this.textTracks();let t;const i=()=>{t=[];for(let n=0;n<e.length;n++){const a=e[n];a.kind==="metadata"&&t.push({track:a,storedMode:a.mode})}};i(),e.addEventListener("change",i),this.on("dispose",()=>e.removeEventListener("change",i));const s=()=>{for(let n=0;n<t.length;n++){const a=t[n];a.track.mode==="disabled"&&a.track.mode!==a.storedMode&&(a.track.mode=a.storedMode)}e.removeEventListener("change",s)};this.on("webkitbeginfullscreen",()=>{e.removeEventListener("change",i),e.removeEventListener("change",s),e.addEventListener("change",s)}),this.on("webkitendfullscreen",()=>{e.removeEventListener("change",i),e.addEventListener("change",i),e.removeEventListener("change",s)})}overrideNative_(e,t){if(t!==this[`featuresNative${e}Tracks`])return;const i=e.toLowerCase();this[`${i}TracksListeners_`]&&Object.keys(this[`${i}TracksListeners_`]).forEach(s=>{this.el()[`${i}Tracks`].removeEventListener(s,this[`${i}TracksListeners_`][s])}),this[`featuresNative${e}Tracks`]=!t,this[`${i}TracksListeners_`]=null,this.proxyNativeTracksForType_(i)}overrideNativeAudioTracks(e){this.overrideNative_("Audio",e)}overrideNativeVideoTracks(e){this.overrideNative_("Video",e)}proxyNativeTracksForType_(e){const t=or[e],i=this.el()[t.getterName],s=this[t.getterName]();if(!this[`featuresNative${t.capitalName}Tracks`]||!i||!i.addEventListener)return;const n={change:o=>{const l={type:"change",target:s,currentTarget:s,srcElement:s};s.trigger(l),e==="text"&&this[so.remoteText.getterName]().trigger(l)},addtrack(o){s.addTrack(o.track)},removetrack(o){s.removeTrack(o.track)}},a=function(){const o=[];for(let l=0;l<s.length;l++){let u=!1;for(let c=0;c<i.length;c++)if(i[c]===s[l]){u=!0;break}u||o.push(s[l])}for(;o.length;)s.removeTrack(o.shift())};this[t.getterName+"Listeners_"]=n,Object.keys(n).forEach(o=>{const l=n[o];i.addEventListener(o,l),this.on("dispose",u=>i.removeEventListener(o,l))}),this.on("loadstart",a),this.on("dispose",o=>this.off("loadstart",a))}proxyNativeTracks_(){or.names.forEach(e=>{this.proxyNativeTracksForType_(e)})}createEl(){let e=this.options_.tag;if(!e||!(this.options_.playerElIngest||this.movingMediaElementInDOM)){if(e){const i=e.cloneNode(!0);e.parentNode&&e.parentNode.insertBefore(i,e),be.disposeMediaElement(e),e=i}else{e=ce.createElement("video");const i=this.options_.tag&&js(this.options_.tag),s=nt({},i);(!Nl||this.options_.nativeControlsForTouch!==!0)&&delete s.controls,X_(e,Object.assign(s,{id:this.options_.techId,class:"vjs-tech"}))}e.playerId=this.options_.playerId}typeof this.options_.preload<"u"&&to(e,"preload",this.options_.preload),this.options_.disablePictureInPicture!==void 0&&(e.disablePictureInPicture=this.options_.disablePictureInPicture);const t=["loop","muted","playsinline","autoplay"];for(let i=0;i<t.length;i++){const s=t[i],n=this.options_[s];typeof n<"u"&&(n?to(e,s,s):Fd(e,s),e[s]=n)}return e}handleLateInit_(e){if(e.networkState===0||e.networkState===3)return;if(e.readyState===0){let i=!1;const s=function(){i=!0};this.on("loadstart",s);const n=function(){i||this.trigger("loadstart")};this.on("loadedmetadata",n),this.ready(function(){this.off("loadstart",s),this.off("loadedmetadata",n),i||this.trigger("loadstart")});return}const t=["loadstart"];t.push("loadedmetadata"),e.readyState>=2&&t.push("loadeddata"),e.readyState>=3&&t.push("canplay"),e.readyState>=4&&t.push("canplaythrough"),this.ready(function(){t.forEach(function(i){this.trigger(i)},this)})}setScrubbing(e){this.isScrubbing_=e}scrubbing(){return this.isScrubbing_}setCurrentTime(e){try{this.isScrubbing_&&this.el_.fastSeek&&Bd?this.el_.fastSeek(e):this.el_.currentTime=e}catch(t){qe(t,"Video is not ready. (Video.js)")}}duration(){if(this.el_.duration===1/0&&xr&&is&&this.el_.currentTime===0){const e=()=>{this.el_.currentTime>0&&(this.el_.duration===1/0&&this.trigger("durationchange"),this.off("timeupdate",e))};return this.on("timeupdate",e),NaN}return this.el_.duration||NaN}width(){return this.el_.offsetWidth}height(){return this.el_.offsetHeight}proxyWebkitFullscreen_(){if(!("webkitDisplayingFullscreen"in this.el_))return;const e=function(){this.trigger("fullscreenchange",{isFullscreen:!1}),this.el_.controls&&!this.options_.nativeControlsForTouch&&this.controls()&&(this.el_.controls=!1)},t=function(){"webkitPresentationMode"in this.el_&&this.el_.webkitPresentationMode!=="picture-in-picture"&&(this.one("webkitendfullscreen",e),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",t),this.on("dispose",()=>{this.off("webkitbeginfullscreen",t),this.off("webkitendfullscreen",e)})}supportsFullScreen(){return typeof this.el_.webkitEnterFullScreen=="function"}enterFullScreen(){const e=this.el_;if(e.paused&&e.networkState<=e.HAVE_METADATA)zr(this.el_.play()),this.setTimeout(function(){e.pause();try{e.webkitEnterFullScreen()}catch(t){this.trigger("fullscreenerror",t)}},0);else try{e.webkitEnterFullScreen()}catch(t){this.trigger("fullscreenerror",t)}}exitFullScreen(){if(!this.el_.webkitDisplayingFullscreen){this.trigger("fullscreenerror",new Error("The video is not fullscreen"));return}this.el_.webkitExitFullScreen()}requestPictureInPicture(){return this.el_.requestPictureInPicture()}requestVideoFrameCallback(e){return this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.requestVideoFrameCallback(e):super.requestVideoFrameCallback(e)}cancelVideoFrameCallback(e){this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.cancelVideoFrameCallback(e):super.cancelVideoFrameCallback(e)}src(e){if(e===void 0)return this.el_.src;this.setSrc(e)}addSourceElement(e,t){if(!e)return qe.error("Invalid source URL."),!1;const i={src:e};t&&(i.type=t);const s=Re("source",{},i);return this.el_.appendChild(s),!0}removeSourceElement(e){if(!e)return qe.error("Source URL is required to remove the source element."),!1;const t=this.el_.querySelectorAll("source");for(const i of t)if(i.src===e)return this.el_.removeChild(i),!0;return qe.warn(`No matching source element found with src: ${e}`),!1}reset(){be.resetMediaElement(this.el_)}currentSrc(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc}setControls(e){this.el_.controls=!!e}addTextTrack(e,t,i){return this.featuresNativeTextTracks?this.el_.addTextTrack(e,t,i):super.addTextTrack(e,t,i)}createRemoteTextTrack(e){if(!this.featuresNativeTextTracks)return super.createRemoteTextTrack(e);const t=ce.createElement("track");return e.kind&&(t.kind=e.kind),e.label&&(t.label=e.label),(e.language||e.srclang)&&(t.srclang=e.language||e.srclang),e.default&&(t.default=e.default),e.id&&(t.id=e.id),e.src&&(t.src=e.src),t}addRemoteTextTrack(e,t){const i=super.addRemoteTextTrack(e,t);return this.featuresNativeTextTracks&&this.el().appendChild(i),i}removeRemoteTextTrack(e){if(super.removeRemoteTextTrack(e),this.featuresNativeTextTracks){const t=this.$$("track");let i=t.length;for(;i--;)(e===t[i]||e===t[i].track)&&this.el().removeChild(t[i])}}getVideoPlaybackQuality(){if(typeof this.el().getVideoPlaybackQuality=="function")return this.el().getVideoPlaybackQuality();const e={};return typeof this.el().webkitDroppedFrameCount<"u"&&typeof this.el().webkitDecodedFrameCount<"u"&&(e.droppedVideoFrames=this.el().webkitDroppedFrameCount,e.totalVideoFrames=this.el().webkitDecodedFrameCount),q.performance&&(e.creationTime=q.performance.now()),e}}Rd(be,"TEST_VID",function(){if(!So())return;const r=ce.createElement("video"),e=ce.createElement("track");return e.kind="captions",e.srclang="en",e.label="English",r.appendChild(e),r});be.isSupported=function(){try{be.TEST_VID.volume=.5}catch{return!1}return!!(be.TEST_VID&&be.TEST_VID.canPlayType)};be.canPlayType=function(r){return be.TEST_VID.canPlayType(r)};be.canPlaySource=function(r,e){return be.canPlayType(r.type)};be.canControlVolume=function(){try{const r=be.TEST_VID.volume;be.TEST_VID.volume=r/2+.1;const e=r!==be.TEST_VID.volume;return e&&ci?(q.setTimeout(()=>{be&&be.prototype&&(be.prototype.featuresVolumeControl=r!==be.TEST_VID.volume)}),!1):e}catch{return!1}};be.canMuteVolume=function(){try{const r=be.TEST_VID.muted;return be.TEST_VID.muted=!r,be.TEST_VID.muted?to(be.TEST_VID,"muted","muted"):Fd(be.TEST_VID,"muted","muted"),r!==be.TEST_VID.muted}catch{return!1}};be.canControlPlaybackRate=function(){if(xr&&is&&Ld<58)return!1;try{const r=be.TEST_VID.playbackRate;return be.TEST_VID.playbackRate=r/2+.1,r!==be.TEST_VID.playbackRate}catch{return!1}};be.canOverrideAttributes=function(){try{const r=()=>{};Object.defineProperty(ce.createElement("video"),"src",{get:r,set:r}),Object.defineProperty(ce.createElement("audio"),"src",{get:r,set:r}),Object.defineProperty(ce.createElement("video"),"innerHTML",{get:r,set:r}),Object.defineProperty(ce.createElement("audio"),"innerHTML",{get:r,set:r})}catch{return!1}return!0};be.supportsNativeTextTracks=function(){return Bd||ci&&is};be.supportsNativeVideoTracks=function(){return!!(be.TEST_VID&&be.TEST_VID.videoTracks)};be.supportsNativeAudioTracks=function(){return!!(be.TEST_VID&&be.TEST_VID.audioTracks)};be.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"];[["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach(function([r,e]){Rd(be.prototype,r,()=>be[e](),!0)});be.prototype.featuresVolumeControl=be.canControlVolume();be.prototype.movingMediaElementInDOM=!ci;be.prototype.featuresFullscreenResize=!0;be.prototype.featuresProgressEvents=!0;be.prototype.featuresTimeupdateEvents=!0;be.prototype.featuresVideoFrameCallback=!!(be.TEST_VID&&be.TEST_VID.requestVideoFrameCallback);be.disposeMediaElement=function(r){if(r){for(r.parentNode&&r.parentNode.removeChild(r);r.hasChildNodes();)r.removeChild(r.firstChild);r.removeAttribute("src"),typeof r.load=="function"&&(function(){try{r.load()}catch{}})()}};be.resetMediaElement=function(r){if(!r)return;const e=r.querySelectorAll("source");let t=e.length;for(;t--;)r.removeChild(e[t]);r.removeAttribute("src"),typeof r.load=="function"&&(function(){try{r.load()}catch{}})()};["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(r){be.prototype[r]=function(){return this.el_[r]||this.el_.hasAttribute(r)}});["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(r){be.prototype["set"+Et(r)]=function(e){this.el_[r]=e,e?this.el_.setAttribute(r,r):this.el_.removeAttribute(r)}});["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach(function(r){be.prototype[r]=function(){return this.el_[r]}});["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach(function(r){be.prototype["set"+Et(r)]=function(e){this.el_[r]=e}});["pause","load","play"].forEach(function(r){be.prototype[r]=function(){return this.el_[r]()}});Be.withSourceHandlers(be);be.nativeSourceHandler={};be.nativeSourceHandler.canPlayType=function(r){try{return be.TEST_VID.canPlayType(r)}catch{return""}};be.nativeSourceHandler.canHandleSource=function(r,e){if(r.type)return be.nativeSourceHandler.canPlayType(r.type);if(r.src){const t=S0(r.src);return be.nativeSourceHandler.canPlayType(`video/${t}`)}return""};be.nativeSourceHandler.handleSource=function(r,e,t){e.setSrc(r.src)};be.nativeSourceHandler.dispose=function(){};be.registerSourceHandler(be.nativeSourceHandler);Be.registerTech("Html5",be);const Zx=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],np={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},_m=["tiny","xsmall","small","medium","large","xlarge","huge"],nh={};_m.forEach(r=>{const e=r.charAt(0)==="x"?`x-${r.substring(1)}`:r;nh[r]=`vjs-layout-${e}`});const z$={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0};class Ke extends ee{constructor(e,t,i){if(e.id=e.id||t.id||`vjs_video_${cr()}`,t=Object.assign(Ke.getTagSettings(e),t),t.initChildren=!1,t.createEl=!1,t.evented=!1,t.reportTouchActivity=!1,!t.language){const a=e.closest("[lang]");a&&(t.language=a.getAttribute("lang"))}if(super(null,t,i),this.boundDocumentFullscreenChange_=a=>this.documentFullscreenChange_(a),this.boundFullWindowOnEscKey_=a=>this.fullWindowOnEscKey(a),this.boundUpdateStyleEl_=a=>this.updateStyleEl_(a),this.boundApplyInitTime_=a=>this.applyInitTime_(a),this.boundUpdateCurrentBreakpoint_=a=>this.updateCurrentBreakpoint_(a),this.boundHandleTechClick_=a=>this.handleTechClick_(a),this.boundHandleTechDoubleClick_=a=>this.handleTechDoubleClick_(a),this.boundHandleTechTouchStart_=a=>this.handleTechTouchStart_(a),this.boundHandleTechTouchMove_=a=>this.handleTechTouchMove_(a),this.boundHandleTechTouchEnd_=a=>this.handleTechTouchEnd_(a),this.boundHandleTechTap_=a=>this.handleTechTap_(a),this.boundUpdatePlayerHeightOnAudioOnlyMode_=a=>this.updatePlayerHeightOnAudioOnlyMode_(a),this.isFullscreen_=!1,this.log=M_(this.id_),this.fsApi_=kh,this.isPosterFromTech_=!1,this.queuedCallbacks_=[],this.isReady_=!1,this.hasStarted_=!1,this.userActive_=!1,this.debugEnabled_=!1,this.audioOnlyMode_=!1,this.audioPosterMode_=!1,this.audioOnlyCache_={controlBarHeight:null,playerHeight:null,hiddenChildren:[]},!this.options_||!this.options_.techOrder||!this.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(this.tag=e,this.tagAttributes=e&&js(e),this.language(this.options_.language),t.languages){const a={};Object.getOwnPropertyNames(t.languages).forEach(function(o){a[o.toLowerCase()]=t.languages[o]}),this.languages_=a}else this.languages_=Ke.prototype.options_.languages;this.resetCache_(),this.poster_=t.poster||"",this.controls_=!!t.controls,e.controls=!1,e.removeAttribute("controls"),this.changingSrc_=!1,this.playCallbacks_=[],this.playTerminatedQueue_=[],e.hasAttribute("autoplay")?this.autoplay(!0):this.autoplay(this.options_.autoplay),t.plugins&&Object.keys(t.plugins).forEach(a=>{if(typeof this[a]!="function")throw new Error(`plugin "${a}" does not exist`)}),this.scrubbing_=!1,this.el_=this.createEl(),g0(this,{eventBusKey:"el_"}),this.fsApi_.requestFullscreen&&(Zi(ce,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),this.on(this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_)),this.fluid_&&this.on(["playerreset","resize"],this.boundUpdateStyleEl_);const s=nt(this.options_);if(t.plugins&&Object.keys(t.plugins).forEach(a=>{this[a](t.plugins[a])}),t.debug&&this.debug(!0),this.options_.playerOptions=s,this.middleware_=[],this.playbackRates(t.playbackRates),t.experimentalSvgIcons){const o=new q.DOMParser().parseFromString(m$,"image/svg+xml");if(o.querySelector("parsererror"))qe.warn("Failed to load SVG Icons. Falling back to Font Icons."),this.options_.experimentalSvgIcons=null;else{const u=o.documentElement;u.style.display="none",this.el_.appendChild(u),this.addClass("vjs-svg-icons-enabled")}}this.initChildren(),this.isAudio(e.nodeName.toLowerCase()==="audio"),this.controls()?this.addClass("vjs-controls-enabled"):this.addClass("vjs-controls-disabled"),this.el_.setAttribute("role","region"),this.isAudio()?this.el_.setAttribute("aria-label",this.localize("Audio Player")):this.el_.setAttribute("aria-label",this.localize("Video Player")),this.isAudio()&&this.addClass("vjs-audio"),t.spatialNavigation&&t.spatialNavigation.enabled&&(this.spatialNavigation=new g$(this),this.addClass("vjs-spatial-navigation-enabled")),Nl&&this.addClass("vjs-touch-enabled"),ci||this.addClass("vjs-workinghover"),Ke.players[this.id_]=this;const n=dm.split(".")[0];this.addClass(`vjs-v${n}`),this.userActive(!0),this.reportUserActivity(),this.one("play",a=>this.listenForUserActivity_(a)),this.on("keydown",a=>this.handleKeyDown(a)),this.on("languagechange",a=>this.handleLanguagechange(a)),this.breakpoints(this.options_.breakpoints),this.responsive(this.options_.responsive),this.on("ready",()=>{this.audioPosterMode(this.options_.audioPosterMode),this.audioOnlyMode(this.options_.audioOnlyMode)})}dispose(){this.trigger("dispose"),this.off("dispose"),hi(ce,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),hi(ce,"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),Ke.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),h$(this),vi.names.forEach(e=>{const t=vi[e],i=this[t.getterName]();i&&i.off&&i.off()}),super.dispose({restoreEl:this.options_.restoreEl})}createEl(){let e=this.tag,t,i=this.playerElIngest_=e.parentNode&&e.parentNode.hasAttribute&&e.parentNode.hasAttribute("data-vjs-player");const s=this.tag.tagName.toLowerCase()==="video-js";i?t=this.el_=e.parentNode:s||(t=this.el_=super.createEl("div"));const n=js(e);if(s){for(t=this.el_=e,e=this.tag=ce.createElement("video");t.children.length;)e.appendChild(t.firstChild);Sl(t,"video-js")||qn(t,"video-js"),t.appendChild(e),i=this.playerElIngest_=t,Object.keys(t).forEach(l=>{try{e[l]=t[l]}catch{}})}e.setAttribute("tabindex","-1"),n.tabindex="-1",is&&Qd&&(e.setAttribute("role","application"),n.role="application"),e.removeAttribute("width"),e.removeAttribute("height"),"width"in n&&delete n.width,"height"in n&&delete n.height,Object.getOwnPropertyNames(n).forEach(function(l){s&&l==="class"||t.setAttribute(l,n[l]),s&&e.setAttribute(l,n[l])}),e.playerId=e.id,e.id+="_html5_api",e.className="vjs-tech",e.player=t.player=this,this.addClass("vjs-paused");const a=["IS_SMART_TV","IS_TIZEN","IS_WEBOS","IS_ANDROID","IS_IPAD","IS_IPHONE","IS_CHROMECAST_RECEIVER"].filter(l=>F_[l]).map(l=>"vjs-device-"+l.substring(3).toLowerCase().replace(/\_/g,"-"));if(this.addClass(...a),q.VIDEOJS_NO_DYNAMIC_STYLE!==!0){this.styleEl_=tx("vjs-styles-dimensions");const l=on(".vjs-styles-defaults"),u=on("head");u.insertBefore(this.styleEl_,l?l.nextSibling:u.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);const o=e.getElementsByTagName("a");for(let l=0;l<o.length;l++){const u=o.item(l);qn(u,"vjs-hidden"),u.setAttribute("hidden","hidden")}return e.initNetworkState_=e.networkState,e.parentNode&&!i&&e.parentNode.insertBefore(t,e),pm(e,t),this.children_.unshift(e),this.el_.setAttribute("lang",this.language_),this.el_.setAttribute("translate","no"),this.el_=t,t}crossOrigin(e){if(typeof e>"u")return this.techGet_("crossOrigin");if(e!==null&&e!=="anonymous"&&e!=="use-credentials"){qe.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${e}"`);return}this.techCall_("setCrossOrigin",e),this.posterImage&&this.posterImage.crossOrigin(e)}width(e){return this.dimension("width",e)}height(e){return this.dimension("height",e)}dimension(e,t){const i=e+"_";if(t===void 0)return this[i]||0;if(t===""||t==="auto"){this[i]=void 0,this.updateStyleEl_();return}const s=parseFloat(t);if(isNaN(s)){qe.error(`Improper value "${t}" supplied for for ${e}`);return}this[i]=s,this.updateStyleEl_()}fluid(e){if(e===void 0)return!!this.fluid_;this.fluid_=!!e,ws(this)&&this.off(["playerreset","resize"],this.boundUpdateStyleEl_),e?(this.addClass("vjs-fluid"),this.fill(!1),VQ(this,()=>{this.on(["playerreset","resize"],this.boundUpdateStyleEl_)})):this.removeClass("vjs-fluid"),this.updateStyleEl_()}fill(e){if(e===void 0)return!!this.fill_;this.fill_=!!e,e?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")}aspectRatio(e){if(e===void 0)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(e))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=e,this.fluid(!0),this.updateStyleEl_()}updateStyleEl_(){if(q.VIDEOJS_NO_DYNAMIC_STYLE===!0){const o=typeof this.width_=="number"?this.width_:this.options_.width,l=typeof this.height_=="number"?this.height_:this.options_.height,u=this.tech_&&this.tech_.el();u&&(o>=0&&(u.width=o),l>=0&&(u.height=l));return}let e,t,i,s;this.aspectRatio_!==void 0&&this.aspectRatio_!=="auto"?i=this.aspectRatio_:this.videoWidth()>0?i=this.videoWidth()+":"+this.videoHeight():i="16:9";const n=i.split(":"),a=n[1]/n[0];this.width_!==void 0?e=this.width_:this.height_!==void 0?e=this.height_/a:e=this.videoWidth()||300,this.height_!==void 0?t=this.height_:t=e*a,/^[^a-zA-Z]/.test(this.id())?s="dimensions-"+this.id():s=this.id()+"-dimensions",this.addClass(s),ix(this.styleEl_,`
      .${s} {
        width: ${e}px;
        height: ${t}px;
      }

      .${s}.vjs-fluid:not(.vjs-audio-only-mode) {
        padding-top: ${a*100}%;
      }
    `)}loadTech_(e,t){this.tech_&&this.unloadTech_();const i=Et(e),s=e.charAt(0).toLowerCase()+e.slice(1);i!=="Html5"&&this.tag&&(Be.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=i,this.isReady_=!1;let n=this.autoplay();(typeof this.autoplay()=="string"||this.autoplay()===!0&&this.options_.normalizeAutoplay)&&(n=!1);const a={source:t,autoplay:n,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:`${this.id()}_${s}_api`,playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset};vi.names.forEach(l=>{const u=vi[l];a[u.getterName]=this[u.privateName]}),Object.assign(a,this.options_[i]),Object.assign(a,this.options_[s]),Object.assign(a,this.options_[e.toLowerCase()]),this.tag&&(a.tag=this.tag),t&&t.src===this.cache_.src&&this.cache_.currentTime>0&&(a.startTime=this.cache_.currentTime);const o=Be.getTech(e);if(!o)throw new Error(`No Tech named '${i}' exists! '${i}' should be registered using videojs.registerTech()'`);this.tech_=new o(a),this.tech_.ready(mt(this,this.handleTechReady_),!0),vm.jsonToTextTracks(this.textTracksJson_||[],this.tech_),Zx.forEach(l=>{this.on(this.tech_,l,u=>this[`handleTech${Et(l)}_`](u))}),Object.keys(np).forEach(l=>{this.on(this.tech_,l,u=>{if(this.tech_.playbackRate()===0&&this.tech_.seeking()){this.queuedCallbacks_.push({callback:this[`handleTech${np[l]}_`].bind(this),event:u});return}this[`handleTech${np[l]}_`](u)})}),this.on(this.tech_,"loadstart",l=>this.handleTechLoadStart_(l)),this.on(this.tech_,"sourceset",l=>this.handleTechSourceset_(l)),this.on(this.tech_,"waiting",l=>this.handleTechWaiting_(l)),this.on(this.tech_,"ended",l=>this.handleTechEnded_(l)),this.on(this.tech_,"seeking",l=>this.handleTechSeeking_(l)),this.on(this.tech_,"play",l=>this.handleTechPlay_(l)),this.on(this.tech_,"pause",l=>this.handleTechPause_(l)),this.on(this.tech_,"durationchange",l=>this.handleTechDurationChange_(l)),this.on(this.tech_,"fullscreenchange",(l,u)=>this.handleTechFullscreenChange_(l,u)),this.on(this.tech_,"fullscreenerror",(l,u)=>this.handleTechFullscreenError_(l,u)),this.on(this.tech_,"enterpictureinpicture",l=>this.handleTechEnterPictureInPicture_(l)),this.on(this.tech_,"leavepictureinpicture",l=>this.handleTechLeavePictureInPicture_(l)),this.on(this.tech_,"error",l=>this.handleTechError_(l)),this.on(this.tech_,"posterchange",l=>this.handleTechPosterChange_(l)),this.on(this.tech_,"textdata",l=>this.handleTechTextData_(l)),this.on(this.tech_,"ratechange",l=>this.handleTechRateChange_(l)),this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode!==this.el()&&(i!=="Html5"||!this.tag)&&pm(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)}unloadTech_(){vi.names.forEach(e=>{const t=vi[e];this[t.privateName]=this[t.getterName]()}),this.textTracksJson_=vm.textTracksToJson(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1}tech(e){return e===void 0&&qe.warn(`Using the tech directly can be dangerous. I hope you know what you're doing.
See https://github.com/videojs/video.js/issues/2617 for more info.
`),this.tech_}version(){return{"video.js":dm}}addTechControlsListeners_(){this.removeTechControlsListeners_(),this.on(this.tech_,"click",this.boundHandleTechClick_),this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_),this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.on(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.on(this.tech_,"tap",this.boundHandleTechTap_)}removeTechControlsListeners_(){this.off(this.tech_,"tap",this.boundHandleTechTap_),this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.off(this.tech_,"click",this.boundHandleTechClick_),this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_)}handleTechReady_(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()}handleTechLoadStart_(){this.removeClass("vjs-ended","vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):this.trigger("loadstart"),this.manualAutoplay_(this.autoplay()===!0&&this.options_.normalizeAutoplay?"play":this.autoplay())}manualAutoplay_(e){if(!this.tech_||typeof e!="string")return;const t=()=>{const s=this.muted();this.muted(!0);const n=()=>{this.muted(s)};this.playTerminatedQueue_.push(n);const a=this.play();if(_l(a))return a.catch(o=>{throw n(),new Error(`Rejection at manualAutoplay. Restoring muted value. ${o||""}`)})};let i;if(e==="any"&&!this.muted()?(i=this.play(),_l(i)&&(i=i.catch(t))):e==="muted"&&!this.muted()?i=t():i=this.play(),!!_l(i))return i.then(()=>{this.trigger({type:"autoplay-success",autoplay:e})}).catch(()=>{this.trigger({type:"autoplay-failure",autoplay:e})})}updateSourceCaches_(e=""){let t=e,i="";typeof t!="string"&&(t=e.src,i=e.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],t&&!i&&(i=p$(this,t)),this.cache_.source=nt({},e,{src:t,type:i});const s=this.cache_.sources.filter(l=>l.src&&l.src===t),n=[],a=this.$$("source"),o=[];for(let l=0;l<a.length;l++){const u=js(a[l]);n.push(u),u.src&&u.src===t&&o.push(u.src)}o.length&&!s.length?this.cache_.sources=n:s.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=t}handleTechSourceset_(e){if(!this.changingSrc_){let t=n=>this.updateSourceCaches_(n);const i=this.currentSource().src,s=e.src;i&&!/^blob:/.test(i)&&/^blob:/.test(s)&&(!this.lastSource_||this.lastSource_.tech!==s&&this.lastSource_.player!==i)&&(t=()=>{}),t(s),e.src||this.tech_.any(["sourceset","loadstart"],n=>{if(n.type==="sourceset")return;const a=this.techGet_("currentSrc");this.lastSource_.tech=a,this.updateSourceCaches_(a)})}this.lastSource_={player:this.currentSource().src,tech:e.src},this.trigger({src:e.src,type:"sourceset"})}hasStarted(e){if(e===void 0)return this.hasStarted_;e!==this.hasStarted_&&(this.hasStarted_=e,this.hasStarted_?this.addClass("vjs-has-started"):this.removeClass("vjs-has-started"))}handleTechPlay_(){this.removeClass("vjs-ended","vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")}handleTechRateChange_(){this.tech_.playbackRate()>0&&this.cache_.lastPlaybackRate===0&&(this.queuedCallbacks_.forEach(e=>e.callback(e.event)),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")}handleTechWaiting_(){this.addClass("vjs-waiting"),this.trigger("waiting");const e=this.currentTime(),t=()=>{e!==this.currentTime()&&(this.removeClass("vjs-waiting"),this.off("timeupdate",t))};this.on("timeupdate",t)}handleTechCanPlay_(){this.removeClass("vjs-waiting"),this.trigger("canplay")}handleTechCanPlayThrough_(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")}handleTechPlaying_(){this.removeClass("vjs-waiting"),this.trigger("playing")}handleTechSeeking_(){this.addClass("vjs-seeking"),this.trigger("seeking")}handleTechSeeked_(){this.removeClass("vjs-seeking","vjs-ended"),this.trigger("seeked")}handleTechPause_(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")}handleTechEnded_(){this.addClass("vjs-ended"),this.removeClass("vjs-waiting"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")}handleTechDurationChange_(){this.duration(this.techGet_("duration"))}handleTechClick_(e){this.controls_&&(this.options_===void 0||this.options_.userActions===void 0||this.options_.userActions.click===void 0||this.options_.userActions.click!==!1)&&(this.options_!==void 0&&this.options_.userActions!==void 0&&typeof this.options_.userActions.click=="function"?this.options_.userActions.click.call(this,e):this.paused()?zr(this.play()):this.pause())}handleTechDoubleClick_(e){if(!this.controls_)return;Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),i=>i.contains(e.target))||(this.options_===void 0||this.options_.userActions===void 0||this.options_.userActions.doubleClick===void 0||this.options_.userActions.doubleClick!==!1)&&(this.options_!==void 0&&this.options_.userActions!==void 0&&typeof this.options_.userActions.doubleClick=="function"?this.options_.userActions.doubleClick.call(this,e):this.isInPictureInPicture()&&!ce.pictureInPictureElement?this.exitPictureInPicture():this.isFullscreen()?this.exitFullscreen():this.requestFullscreen())}handleTechTap_(){this.userActive(!this.userActive())}handleTechTouchStart_(){this.userWasActive=this.userActive()}handleTechTouchMove_(){this.userWasActive&&this.reportUserActivity()}handleTechTouchEnd_(e){e.cancelable&&e.preventDefault()}toggleFullscreenClass_(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")}documentFullscreenChange_(e){const t=e.target.player;if(t&&t!==this)return;const i=this.el();let s=ce[this.fsApi_.fullscreenElement]===i;!s&&i.matches&&(s=i.matches(":"+this.fsApi_.fullscreen)),this.isFullscreen(s)}handleTechFullscreenChange_(e,t){t&&(t.nativeIOSFullscreen&&(this.addClass("vjs-ios-native-fs"),this.tech_.one("webkitendfullscreen",()=>{this.removeClass("vjs-ios-native-fs")})),this.isFullscreen(t.isFullscreen))}handleTechFullscreenError_(e,t){this.trigger("fullscreenerror",t)}togglePictureInPictureClass_(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")}handleTechEnterPictureInPicture_(e){this.isInPictureInPicture(!0)}handleTechLeavePictureInPicture_(e){this.isInPictureInPicture(!1)}handleTechError_(){const e=this.tech_.error();e&&this.error(e)}handleTechTextData_(){let e=null;arguments.length>1&&(e=arguments[1]),this.trigger("textdata",e)}getCache(){return this.cache_}resetCache_(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],playbackRates:[],volume:1}}techCall_(e,t){this.ready(function(){if(e in u$)return o$(this.middleware_,this.tech_,e,t);if(e in $b)return Qb(this.middleware_,this.tech_,e,t);try{this.tech_&&this.tech_[e](t)}catch(i){throw qe(i),i}},!0)}techGet_(e){if(!(!this.tech_||!this.tech_.isReady_)){if(e in l$)return a$(this.middleware_,this.tech_,e);if(e in $b)return Qb(this.middleware_,this.tech_,e);try{return this.tech_[e]()}catch(t){throw this.tech_[e]===void 0?(qe(`Video.js: ${e} method not defined for ${this.techName_} playback technology.`,t),t):t.name==="TypeError"?(qe(`Video.js: ${e} unavailable on ${this.techName_} playback technology element.`,t),this.tech_.isReady_=!1,t):(qe(t),t)}}}play(){return new Promise(e=>{this.play_(e)})}play_(e=zr){this.playCallbacks_.push(e);const t=!!(!this.changingSrc_&&(this.src()||this.currentSrc())),i=!!(Bd||ci);if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!t){this.waitToPlay_=a=>{this.play_()},this.one(["ready","loadstart"],this.waitToPlay_),!t&&i&&this.load();return}const s=this.techGet_("play");i&&this.hasClass("vjs-ended")&&this.resetProgressBar_(),s===null?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(s)}runPlayTerminatedQueue_(){const e=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],e.forEach(function(t){t()})}runPlayCallbacks_(e){const t=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],t.forEach(function(i){i(e)})}pause(){this.techCall_("pause")}paused(){return this.techGet_("paused")!==!1}played(){return this.techGet_("played")||Tr(0,0)}scrubbing(e){if(typeof e>"u")return this.scrubbing_;this.scrubbing_=!!e,this.techCall_("setScrubbing",this.scrubbing_),e?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")}currentTime(e){if(e===void 0)return this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime;if(e<0&&(e=0),!this.isReady_||this.changingSrc_||!this.tech_||!this.tech_.isReady_){this.cache_.initTime=e,this.off("canplay",this.boundApplyInitTime_),this.one("canplay",this.boundApplyInitTime_);return}this.techCall_("setCurrentTime",e),this.cache_.initTime=0,isFinite(e)&&(this.cache_.currentTime=Number(e))}applyInitTime_(){this.currentTime(this.cache_.initTime)}duration(e){if(e===void 0)return this.cache_.duration!==void 0?this.cache_.duration:NaN;e=parseFloat(e),e<0&&(e=1/0),e!==this.cache_.duration&&(this.cache_.duration=e,e===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(e)||this.trigger("durationchange"))}remainingTime(){return this.duration()-this.currentTime()}remainingTimeDisplay(){return Math.floor(this.duration())-Math.floor(this.currentTime())}buffered(){let e=this.techGet_("buffered");return(!e||!e.length)&&(e=Tr(0,0)),e}seekable(){let e=this.techGet_("seekable");return(!e||!e.length)&&(e=Tr(0,0)),e}seeking(){return this.techGet_("seeking")}ended(){return this.techGet_("ended")}networkState(){return this.techGet_("networkState")}readyState(){return this.techGet_("readyState")}bufferedPercent(){return hx(this.buffered(),this.duration())}bufferedEnd(){const e=this.buffered(),t=this.duration();let i=e.end(e.length-1);return i>t&&(i=t),i}volume(e){let t;if(e!==void 0){t=Math.max(0,Math.min(1,e)),this.cache_.volume=t,this.techCall_("setVolume",t),t>0&&this.lastVolume_(t);return}return t=parseFloat(this.techGet_("volume")),isNaN(t)?1:t}muted(e){if(e!==void 0){this.techCall_("setMuted",e);return}return this.techGet_("muted")||!1}defaultMuted(e){return e!==void 0&&this.techCall_("setDefaultMuted",e),this.techGet_("defaultMuted")||!1}lastVolume_(e){if(e!==void 0&&e!==0){this.cache_.lastVolume=e;return}return this.cache_.lastVolume}supportsFullScreen(){return this.techGet_("supportsFullScreen")||!1}isFullscreen(e){if(e!==void 0){const t=this.isFullscreen_;this.isFullscreen_=!!e,this.isFullscreen_!==t&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),this.toggleFullscreenClass_();return}return this.isFullscreen_}requestFullscreen(e){this.isInPictureInPicture()&&this.exitPictureInPicture();const t=this;return new Promise((i,s)=>{function n(){t.off("fullscreenerror",o),t.off("fullscreenchange",a)}function a(){n(),i()}function o(u,c){n(),s(c)}t.one("fullscreenchange",a),t.one("fullscreenerror",o);const l=t.requestFullscreenHelper_(e);l&&(l.then(n,n),l.then(i,s))})}requestFullscreenHelper_(e){let t;if(this.fsApi_.prefixed||(t=this.options_.fullscreen&&this.options_.fullscreen.options||{},e!==void 0&&(t=e)),this.fsApi_.requestFullscreen){const i=this.el_[this.fsApi_.requestFullscreen](t);return i&&i.then(()=>this.isFullscreen(!0),()=>this.isFullscreen(!1)),i}else this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("enterFullScreen"):this.enterFullWindow()}exitFullscreen(){const e=this;return new Promise((t,i)=>{function s(){e.off("fullscreenerror",a),e.off("fullscreenchange",n)}function n(){s(),t()}function a(l,u){s(),i(u)}e.one("fullscreenchange",n),e.one("fullscreenerror",a);const o=e.exitFullscreenHelper_();o&&(o.then(s,s),o.then(t,i))})}exitFullscreenHelper_(){if(this.fsApi_.requestFullscreen){const e=ce[this.fsApi_.exitFullscreen]();return e&&zr(e.then(()=>this.isFullscreen(!1))),e}else this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("exitFullScreen"):this.exitFullWindow()}enterFullWindow(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=ce.documentElement.style.overflow,Zi(ce,"keydown",this.boundFullWindowOnEscKey_),ce.documentElement.style.overflow="hidden",qn(ce.body,"vjs-full-window"),this.trigger("enterFullWindow")}fullWindowOnEscKey(e){e.key==="Escape"&&this.isFullscreen()===!0&&(this.isFullWindow?this.exitFullWindow():this.exitFullscreen())}exitFullWindow(){this.isFullscreen(!1),this.isFullWindow=!1,hi(ce,"keydown",this.boundFullWindowOnEscKey_),ce.documentElement.style.overflow=this.docOrigOverflow,Nd(ce.body,"vjs-full-window"),this.trigger("exitFullWindow")}disablePictureInPicture(e){if(e===void 0)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",e),this.options_.disablePictureInPicture=e,this.trigger("disablepictureinpicturechanged")}isInPictureInPicture(e){if(e!==void 0){this.isInPictureInPicture_=!!e,this.togglePictureInPictureClass_();return}return!!this.isInPictureInPicture_}requestPictureInPicture(){if(this.options_.enableDocumentPictureInPicture&&q.documentPictureInPicture){const e=ce.createElement(this.el().tagName);return e.classList=this.el().classList,e.classList.add("vjs-pip-container"),this.posterImage&&e.appendChild(this.posterImage.el().cloneNode(!0)),this.titleBar&&e.appendChild(this.titleBar.el().cloneNode(!0)),e.appendChild(Re("p",{className:"vjs-pip-text"},{},this.localize("Playing in picture-in-picture"))),q.documentPictureInPicture.requestWindow({width:this.videoWidth(),height:this.videoHeight()}).then(t=>(K_(t),this.el_.parentNode.insertBefore(e,this.el_),t.document.body.appendChild(this.el_),t.document.body.classList.add("vjs-pip-window"),this.player_.isInPictureInPicture(!0),this.player_.trigger({type:"enterpictureinpicture",pipWindow:t}),t.addEventListener("pagehide",i=>{const s=i.target.querySelector(".video-js");e.parentNode.replaceChild(s,e),this.player_.isInPictureInPicture(!1),this.player_.trigger("leavepictureinpicture")}),t))}return"pictureInPictureEnabled"in ce&&this.disablePictureInPicture()===!1?this.techGet_("requestPictureInPicture"):Promise.reject("No PiP mode is available")}exitPictureInPicture(){if(q.documentPictureInPicture&&q.documentPictureInPicture.window)return q.documentPictureInPicture.window.close(),Promise.resolve();if("pictureInPictureEnabled"in ce)return ce.exitPictureInPicture()}handleKeyDown(e){const{userActions:t}=this.options_;!t||!t.hotkeys||(s=>{const n=s.tagName.toLowerCase();if(s.isContentEditable)return!0;const a=["button","checkbox","hidden","radio","reset","submit"];return n==="input"?a.indexOf(s.type)===-1:["textarea"].indexOf(n)!==-1})(this.el_.ownerDocument.activeElement)||(typeof t.hotkeys=="function"?t.hotkeys.call(this,e):this.handleHotkeys(e))}handleHotkeys(e){const t=this.options_.userActions?this.options_.userActions.hotkeys:{},{fullscreenKey:i=a=>e.key.toLowerCase()==="f",muteKey:s=a=>e.key.toLowerCase()==="m",playPauseKey:n=a=>e.key.toLowerCase()==="k"||e.key.toLowerCase()===" "}=t;if(i.call(this,e)){e.preventDefault(),e.stopPropagation();const a=ee.getComponent("FullscreenToggle");ce[this.fsApi_.fullscreenEnabled]!==!1&&a.prototype.handleClick.call(this,e)}else s.call(this,e)?(e.preventDefault(),e.stopPropagation(),ee.getComponent("MuteToggle").prototype.handleClick.call(this,e)):n.call(this,e)&&(e.preventDefault(),e.stopPropagation(),ee.getComponent("PlayToggle").prototype.handleClick.call(this,e))}canPlayType(e){let t;for(let i=0,s=this.options_.techOrder;i<s.length;i++){const n=s[i];let a=Be.getTech(n);if(a||(a=ee.getComponent(n)),!a){qe.error(`The "${n}" tech is undefined. Skipped browser support check for that tech.`);continue}if(a.isSupported()&&(t=a.canPlayType(e),t))return t}return""}selectSource(e){const t=this.options_.techOrder.map(o=>[o,Be.getTech(o)]).filter(([o,l])=>l?l.isSupported():(qe.error(`The "${o}" tech is undefined. Skipped browser support check for that tech.`),!1)),i=function(o,l,u){let c;return o.some(h=>l.some(f=>{if(c=u(h,f),c)return!0})),c};let s;const n=o=>(l,u)=>o(u,l),a=([o,l],u)=>{if(l.canPlaySource(u,this.options_[o.toLowerCase()]))return{source:u,tech:o}};return this.options_.sourceOrder?s=i(e,t,n(a)):s=i(t,e,a),s||!1}handleSrc_(e,t){if(typeof e>"u")return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();const i=Ox(e);if(!i.length){this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0);return}if(this.changingSrc_=!0,t||(this.cache_.sources=i),this.updateSourceCaches_(i[0]),s$(this,i[0],(s,n)=>{if(this.middleware_=n,t||(this.cache_.sources=i),this.updateSourceCaches_(s),this.src_(s)){if(i.length>1)return this.handleSrc_(i.slice(1));this.changingSrc_=!1,this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0),this.triggerReady();return}n$(n,this.tech_)}),i.length>1){const s=()=>{this.error(null),this.handleSrc_(i.slice(1),!0)},n=()=>{this.off("error",s)};this.one("error",s),this.one("playing",n),this.resetRetryOnError_=()=>{this.off("error",s),this.off("playing",n)}}}src(e){return this.handleSrc_(e,!1)}src_(e){const t=this.selectSource([e]);return t?ox(t.tech,this.techName_)?(this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",e):this.techCall_("src",e.src),this.changingSrc_=!1},!0),!1):(this.changingSrc_=!0,this.loadTech_(t.tech,t.source),this.tech_.ready(()=>{this.changingSrc_=!1}),!1):!0}addSourceElement(e,t){return this.tech_?this.tech_.addSourceElement(e,t):!1}removeSourceElement(e){return this.tech_?this.tech_.removeSourceElement(e):!1}load(){if(this.tech_&&this.tech_.vhs){this.src(this.currentSource());return}this.techCall_("load")}reset(){if(this.paused())this.doReset_();else{const e=this.play();zr(e.then(()=>this.doReset_()))}}doReset_(){this.tech_&&this.tech_.clearTracks("text"),this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),this.error(null),this.titleBar&&this.titleBar.update({title:void 0,description:void 0}),ws(this)&&this.trigger("playerreset")}resetControlBarUI_(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()}resetProgressBar_(){this.currentTime(0);const{currentTimeDisplay:e,durationDisplay:t,progressControl:i,remainingTimeDisplay:s}=this.controlBar||{},{seekBar:n}=i||{};e&&e.updateContent(),t&&t.updateContent(),s&&s.updateContent(),n&&(n.update(),n.loadProgressBar&&n.loadProgressBar.update())}resetPlaybackRate_(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()}resetVolumeBar_(){this.volume(1),this.trigger("volumechange")}currentSources(){const e=this.currentSource(),t=[];return Object.keys(e).length!==0&&t.push(e),this.cache_.sources||t}currentSource(){return this.cache_.source||{}}currentSrc(){return this.currentSource()&&this.currentSource().src||""}currentType(){return this.currentSource()&&this.currentSource().type||""}preload(e){if(e!==void 0){this.techCall_("setPreload",e),this.options_.preload=e;return}return this.techGet_("preload")}autoplay(e){if(e===void 0)return this.options_.autoplay||!1;let t;typeof e=="string"&&/(any|play|muted)/.test(e)||e===!0&&this.options_.normalizeAutoplay?(this.options_.autoplay=e,this.manualAutoplay_(typeof e=="string"?e:"play"),t=!1):e?this.options_.autoplay=!0:this.options_.autoplay=!1,t=typeof t>"u"?this.options_.autoplay:t,this.tech_&&this.techCall_("setAutoplay",t)}playsinline(e){return e!==void 0&&(this.techCall_("setPlaysinline",e),this.options_.playsinline=e),this.techGet_("playsinline")}loop(e){if(e!==void 0){this.techCall_("setLoop",e),this.options_.loop=e;return}return this.techGet_("loop")}poster(e){if(e===void 0)return this.poster_;e||(e=""),e!==this.poster_&&(this.poster_=e,this.techCall_("setPoster",e),this.isPosterFromTech_=!1,this.trigger("posterchange"))}handleTechPosterChange_(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){const e=this.tech_.poster()||"";e!==this.poster_&&(this.poster_=e,this.isPosterFromTech_=!0,this.trigger("posterchange"))}}controls(e){if(e===void 0)return!!this.controls_;e=!!e,this.controls_!==e&&(this.controls_=e,this.usingNativeControls()&&this.techCall_("setControls",e),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))}usingNativeControls(e){if(e===void 0)return!!this.usingNativeControls_;e=!!e,this.usingNativeControls_!==e&&(this.usingNativeControls_=e,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))}error(e){if(e===void 0)return this.error_||null;if(an("beforeerror").forEach(t=>{const i=t(this,e);if(!(ts(i)&&!Array.isArray(i)||typeof i=="string"||typeof i=="number"||i===null)){this.log.error("please return a value that MediaError expects in beforeerror hooks");return}e=i}),this.options_.suppressNotSupportedError&&e&&e.code===4){const t=function(){this.error(e)};this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],t),this.one("loadstart",function(){this.off(["click","touchstart"],t)});return}if(e===null){this.error_=null,this.removeClass("vjs-error"),this.errorDisplay&&this.errorDisplay.close();return}this.error_=new kt(e),this.addClass("vjs-error"),qe.error(`(CODE:${this.error_.code} ${kt.errorTypes[this.error_.code]})`,this.error_.message,this.error_),this.trigger("error"),an("error").forEach(t=>t(this,this.error_))}reportUserActivity(e){this.userActivity_=!0}userActive(e){if(e===void 0)return this.userActive_;if(e=!!e,e!==this.userActive_){if(this.userActive_=e,this.userActive_){this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),this.trigger("useractive");return}this.tech_&&this.tech_.one("mousemove",function(t){t.stopPropagation(),t.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}}listenForUserActivity_(){let e,t,i;const s=mt(this,this.reportUserActivity),n=function(h){(h.screenX!==t||h.screenY!==i)&&(t=h.screenX,i=h.screenY,s())},a=function(){s(),this.clearInterval(e),e=this.setInterval(s,250)},o=function(h){s(),this.clearInterval(e)};this.on("mousedown",a),this.on("mousemove",n),this.on("mouseup",o),this.on("mouseleave",o);const l=this.getChild("controlBar");l&&!ci&&!xr&&(l.on("mouseenter",function(h){this.player().options_.inactivityTimeout!==0&&(this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout),this.player().options_.inactivityTimeout=0}),l.on("mouseleave",function(h){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout})),this.on("keydown",s),this.on("keyup",s);let u;const c=function(){if(!this.userActivity_)return;this.userActivity_=!1,this.userActive(!0),this.clearTimeout(u);const h=this.options_.inactivityTimeout;h<=0||(u=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},h))};this.setInterval(c,250)}playbackRate(e){if(e!==void 0){this.techCall_("setPlaybackRate",e);return}return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1}defaultPlaybackRate(e){return e!==void 0?this.techCall_("setDefaultPlaybackRate",e):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1}isAudio(e){if(e!==void 0){this.isAudio_=!!e;return}return!!this.isAudio_}updatePlayerHeightOnAudioOnlyMode_(){const e=this.getChild("ControlBar");!e||this.audioOnlyCache_.controlBarHeight===e.currentHeight()||(this.audioOnlyCache_.controlBarHeight=e.currentHeight(),this.height(this.audioOnlyCache_.controlBarHeight))}enableAudioOnlyUI_(){this.addClass("vjs-audio-only-mode");const e=this.children(),t=this.getChild("ControlBar"),i=t&&t.currentHeight();e.forEach(s=>{s!==t&&s.el_&&!s.hasClass("vjs-hidden")&&(s.hide(),this.audioOnlyCache_.hiddenChildren.push(s))}),this.audioOnlyCache_.playerHeight=this.currentHeight(),this.audioOnlyCache_.controlBarHeight=i,this.on("playerresize",this.boundUpdatePlayerHeightOnAudioOnlyMode_),this.height(i),this.trigger("audioonlymodechange")}disableAudioOnlyUI_(){this.removeClass("vjs-audio-only-mode"),this.off("playerresize",this.boundUpdatePlayerHeightOnAudioOnlyMode_),this.audioOnlyCache_.hiddenChildren.forEach(e=>e.show()),this.height(this.audioOnlyCache_.playerHeight),this.trigger("audioonlymodechange")}audioOnlyMode(e){if(typeof e!="boolean"||e===this.audioOnlyMode_)return this.audioOnlyMode_;if(this.audioOnlyMode_=e,e){const t=[];return this.isInPictureInPicture()&&t.push(this.exitPictureInPicture()),this.isFullscreen()&&t.push(this.exitFullscreen()),this.audioPosterMode()&&t.push(this.audioPosterMode(!1)),Promise.all(t).then(()=>this.enableAudioOnlyUI_())}return Promise.resolve().then(()=>this.disableAudioOnlyUI_())}enablePosterModeUI_(){(this.tech_&&this.tech_).hide(),this.addClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")}disablePosterModeUI_(){(this.tech_&&this.tech_).show(),this.removeClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")}audioPosterMode(e){return typeof e!="boolean"||e===this.audioPosterMode_?this.audioPosterMode_:(this.audioPosterMode_=e,e?this.audioOnlyMode()?this.audioOnlyMode(!1).then(()=>{this.enablePosterModeUI_()}):Promise.resolve().then(()=>{this.enablePosterModeUI_()}):Promise.resolve().then(()=>{this.disablePosterModeUI_()}))}addTextTrack(e,t,i){if(this.tech_)return this.tech_.addTextTrack(e,t,i)}addRemoteTextTrack(e,t){if(this.tech_)return this.tech_.addRemoteTextTrack(e,t)}removeRemoteTextTrack(e={}){let{track:t}=e;if(t||(t=e),this.tech_)return this.tech_.removeRemoteTextTrack(t)}getVideoPlaybackQuality(){return this.techGet_("getVideoPlaybackQuality")}videoWidth(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0}videoHeight(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0}language(e){if(e===void 0)return this.language_;this.language_!==String(e).toLowerCase()&&(this.language_=String(e).toLowerCase(),ws(this)&&this.trigger("languagechange"))}languages(){return nt(Ke.prototype.options_.languages,this.languages_)}toJSON(){const e=nt(this.options_),t=e.tracks;e.tracks=[];for(let i=0;i<t.length;i++){let s=t[i];s=nt(s),s.player=void 0,e.tracks[i]=s}return e}createModal(e,t){t=t||{},t.content=e||"";const i=new xo(this,t);return this.addChild(i),i.on("dispose",()=>{this.removeChild(i)}),i.open(),i}updateCurrentBreakpoint_(){if(!this.responsive())return;const e=this.currentBreakpoint(),t=this.currentWidth();for(let i=0;i<_m.length;i++){const s=_m[i],n=this.breakpoints_[s];if(t<=n){if(e===s)return;e&&this.removeClass(nh[e]),this.addClass(nh[s]),this.breakpoint_=s;break}}}removeCurrentBreakpoint_(){const e=this.currentBreakpointClass();this.breakpoint_="",e&&this.removeClass(e)}breakpoints(e){return e===void 0?Object.assign(this.breakpoints_):(this.breakpoint_="",this.breakpoints_=Object.assign({},z$,e),this.updateCurrentBreakpoint_(),Object.assign(this.breakpoints_))}responsive(e){if(e===void 0)return this.responsive_;e=!!e;const t=this.responsive_;if(e!==t)return this.responsive_=e,e?(this.on("playerresize",this.boundUpdateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.boundUpdateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),e}currentBreakpoint(){return this.breakpoint_}currentBreakpointClass(){return nh[this.breakpoint_]||""}loadMedia(e,t){if(!e||typeof e!="object")return;const i=this.crossOrigin();this.reset(),this.cache_.media=nt(e);const{artist:s,artwork:n,description:a,poster:o,src:l,textTracks:u,title:c}=this.cache_.media;!n&&o&&(this.cache_.media.artwork=[{src:o,type:$h(o)}]),i&&this.crossOrigin(i),l&&this.src(l),o&&this.poster(o),Array.isArray(u)&&u.forEach(h=>this.addRemoteTextTrack(h,!1)),this.titleBar&&this.titleBar.update({title:c,description:a||s||""}),this.ready(t)}getMedia(){if(!this.cache_.media){const e=this.poster(),t=this.currentSources(),i=Array.prototype.map.call(this.remoteTextTracks(),n=>({kind:n.kind,label:n.label,language:n.language,src:n.src})),s={src:t,textTracks:i};return e&&(s.poster=e,s.artwork=[{src:s.poster,type:$h(s.poster)}]),s}return nt(this.cache_.media)}static getTagSettings(e){const t={sources:[],tracks:[]},i=js(e),s=i["data-setup"];if(Sl(e,"vjs-fill")&&(i.fill=!0),Sl(e,"vjs-fluid")&&(i.fluid=!0),s!==null)try{Object.assign(i,JSON.parse(s||"{}"))}catch(n){qe.error("data-setup",n)}if(Object.assign(t,i),e.hasChildNodes()){const n=e.childNodes;for(let a=0,o=n.length;a<o;a++){const l=n[a],u=l.nodeName.toLowerCase();u==="source"?t.sources.push(js(l)):u==="track"&&t.tracks.push(js(l))}}return t}debug(e){if(e===void 0)return this.debugEnabled_;e?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)}playbackRates(e){if(e===void 0)return this.cache_.playbackRates;Array.isArray(e)&&e.every(t=>typeof t=="number")&&(this.cache_.playbackRates=e,this.trigger("playbackrateschange"))}}Ke.prototype.videoTracks=()=>{};Ke.prototype.audioTracks=()=>{};Ke.prototype.textTracks=()=>{};Ke.prototype.remoteTextTracks=()=>{};Ke.prototype.remoteTextTrackEls=()=>{};vi.names.forEach(function(r){const e=vi[r];Ke.prototype[e.getterName]=function(){return this.tech_?this.tech_[e.getterName]():(this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName])}});Ke.prototype.crossorigin=Ke.prototype.crossOrigin;Ke.players={};const Ko=q.navigator;Ke.prototype.options_={techOrder:Be.defaultTechOrder_,html5:{},enableSourceset:!0,inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","titleBar","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:Ko&&(Ko.languages&&Ko.languages[0]||Ko.userLanguage||Ko.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1,audioOnlyMode:!1,audioPosterMode:!1,spatialNavigation:{enabled:!1,horizontalSeek:!1},enableSmoothSeeking:!1,disableSeekWhileScrubbingOnMobile:!1,disableSeekWhileScrubbingOnSTV:!1};Zx.forEach(function(r){Ke.prototype[`handleTech${Et(r)}_`]=function(){return this.trigger(r)}});ee.registerComponent("Player",Ke);const Bh="plugin",Da="activePlugins_",va={},Nh=r=>va.hasOwnProperty(r),ah=r=>Nh(r)?va[r]:void 0,Wx=(r,e)=>{r[Da]=r[Da]||{},r[Da][e]=!0},Fh=(r,e,t)=>{const i=(t?"before":"")+"pluginsetup";r.trigger(i,e),r.trigger(i+":"+e.name,e)},Z$=function(r,e){const t=function(){Fh(this,{name:r,plugin:e,instance:null},!0);const i=e.apply(this,arguments);return Wx(this,r),Fh(this,{name:r,plugin:e,instance:i}),i};return Object.keys(e).forEach(function(i){t[i]=e[i]}),t},Jb=(r,e)=>(e.prototype.name=r,function(...t){Fh(this,{name:r,plugin:e,instance:null},!0);const i=new e(this,...t);return this[r]=()=>i,Fh(this,i.getEventHash()),i});class Li{constructor(e){if(this.constructor===Li)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=e,this.log||(this.log=this.player.log.createLogger(this.name)),g0(this),delete this.trigger,ax(this,this.constructor.defaultState),Wx(e,this.name),this.dispose=this.dispose.bind(this),e.on("dispose",this.dispose)}version(){return this.constructor.VERSION}getEventHash(e={}){return e.name=this.name,e.plugin=this.constructor,e.instance=this,e}trigger(e,t={}){return _o(this.eventBusEl_,e,this.getEventHash(t))}handleStateChanged(e){}dispose(){const{name:e,player:t}=this;this.trigger("dispose"),this.off(),t.off("dispose",this.dispose),t[Da][e]=!1,this.player=this.state=null,t[e]=Jb(e,va[e])}static isBasic(e){const t=typeof e=="string"?ah(e):e;return typeof t=="function"&&!Li.prototype.isPrototypeOf(t.prototype)}static registerPlugin(e,t){if(typeof e!="string")throw new Error(`Illegal plugin name, "${e}", must be a string, was ${typeof e}.`);if(Nh(e))qe.warn(`A plugin named "${e}" already exists. You may want to avoid re-registering plugins!`);else if(Ke.prototype.hasOwnProperty(e))throw new Error(`Illegal plugin name, "${e}", cannot share a name with an existing player method!`);if(typeof t!="function")throw new Error(`Illegal plugin for "${e}", must be a function, was ${typeof t}.`);return va[e]=t,e!==Bh&&(Li.isBasic(t)?Ke.prototype[e]=Z$(e,t):Ke.prototype[e]=Jb(e,t)),t}static deregisterPlugin(e){if(e===Bh)throw new Error("Cannot de-register base plugin.");Nh(e)&&(delete va[e],delete Ke.prototype[e])}static getPlugins(e=Object.keys(va)){let t;return e.forEach(i=>{const s=ah(i);s&&(t=t||{},t[i]=s)}),t}static getPluginVersion(e){const t=ah(e);return t&&t.VERSION||""}}Li.getPlugin=ah;Li.BASE_PLUGIN_NAME=Bh;Li.registerPlugin(Bh,Li);Ke.prototype.usingPlugin=function(r){return!!this[Da]&&this[Da][r]===!0};Ke.prototype.hasPlugin=function(r){return!!Nh(r)};function W$(r,e){let t=!1;return function(...i){return t||qe.warn(r),t=!0,e.apply(this,i)}}function Er(r,e,t,i){return W$(`${e} is deprecated and will be removed in ${r}.0; please use ${t} instead.`,i)}var H$={NetworkBadStatus:"networkbadstatus",NetworkRequestFailed:"networkrequestfailed",NetworkRequestAborted:"networkrequestaborted",NetworkRequestTimeout:"networkrequesttimeout",NetworkBodyParserFailed:"networkbodyparserfailed",StreamingHlsPlaylistParserError:"streaminghlsplaylistparsererror",StreamingDashManifestParserError:"streamingdashmanifestparsererror",StreamingContentSteeringParserError:"streamingcontentsteeringparsererror",StreamingVttParserError:"streamingvttparsererror",StreamingFailedToSelectNextSegment:"streamingfailedtoselectnextsegment",StreamingFailedToDecryptSegment:"streamingfailedtodecryptsegment",StreamingFailedToTransmuxSegment:"streamingfailedtotransmuxsegment",StreamingFailedToAppendSegment:"streamingfailedtoappendsegment",StreamingCodecsChangeError:"streamingcodecschangeerror"};const Hx=r=>r.indexOf("#")===0?r.slice(1):r;function H(r,e,t){let i=H.getPlayer(r);if(i)return e&&qe.warn(`Player "${r}" is already initialised. Options will not be applied.`),t&&i.ready(t),i;const s=typeof r=="string"?on("#"+Hx(r)):r;if(!To(s))throw new TypeError("The element or ID supplied is not valid. (videojs)");const a=("getRootNode"in s?s.getRootNode()instanceof q.ShadowRoot:!1)?s.getRootNode():s.ownerDocument.body;(!s.ownerDocument.defaultView||!a.contains(s))&&qe.warn("The element supplied is not included in the DOM"),e=e||{},e.restoreEl===!0&&(e.restoreEl=(s.parentNode&&s.parentNode.hasAttribute&&s.parentNode.hasAttribute("data-vjs-player")?s.parentNode:s).cloneNode(!0)),an("beforesetup").forEach(l=>{const u=l(s,nt(e));if(!ts(u)||Array.isArray(u)){qe.error("please return an object in beforesetup hooks");return}e=nt(e,u)});const o=ee.getComponent("Player");return i=new o(s,e,t),an("setup").forEach(l=>l(i)),i}H.hooks_=Ts;H.hooks=an;H.hook=AQ;H.hookOnce=PQ;H.removeHook=D_;if(q.VIDEOJS_NO_DYNAMIC_STYLE!==!0&&So()){let r=on(".vjs-styles-defaults");if(!r){r=tx("vjs-styles-defaults");const e=on("head");e&&e.insertBefore(r,e.firstChild),ix(r,`
      .video-js {
        width: 300px;
        height: 150px;
      }

      .vjs-fluid:not(.vjs-audio-only-mode) {
        padding-top: 56.25%
      }
    `)}}gm(1,H);H.VERSION=dm;H.options=Ke.prototype.options_;H.getPlayers=()=>Ke.players;H.getPlayer=r=>{const e=Ke.players;let t;if(typeof r=="string"){const i=Hx(r),s=e[i];if(s)return s;t=on("#"+i)}else t=r;if(To(t)){const{player:i,playerId:s}=t;if(i||e[s])return i||e[s]}};H.getAllPlayers=()=>Object.keys(Ke.players).map(r=>Ke.players[r]).filter(Boolean);H.players=Ke.players;H.getComponent=ee.getComponent;H.registerComponent=(r,e)=>(Be.isTech(e)&&qe.warn(`The ${r} tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)`),ee.registerComponent.call(ee,r,e));H.getTech=Be.getTech;H.registerTech=Be.registerTech;H.use=r$;Object.defineProperty(H,"middleware",{value:{},writeable:!1,enumerable:!0});Object.defineProperty(H.middleware,"TERMINATOR",{value:Qh,writeable:!1,enumerable:!0});H.browser=F_;H.obj=IQ;H.mergeOptions=Er(9,"videojs.mergeOptions","videojs.obj.merge",nt);H.defineLazyProperty=Er(9,"videojs.defineLazyProperty","videojs.obj.defineLazyProperty",Rd);H.bind=Er(9,"videojs.bind","native Function.prototype.bind",mt);H.registerPlugin=Li.registerPlugin;H.deregisterPlugin=Li.deregisterPlugin;H.plugin=(r,e)=>(qe.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),Li.registerPlugin(r,e));H.getPlugins=Li.getPlugins;H.getPlugin=Li.getPlugin;H.getPluginVersion=Li.getPluginVersion;H.addLanguage=function(r,e){return r=(""+r).toLowerCase(),H.options.languages=nt(H.options.languages,{[r]:e}),H.options.languages[r]};H.log=qe;H.createLogger=M_;H.time=WQ;H.createTimeRange=Er(9,"videojs.createTimeRange","videojs.time.createTimeRanges",Tr);H.createTimeRanges=Er(9,"videojs.createTimeRanges","videojs.time.createTimeRanges",Tr);H.formatTime=Er(9,"videojs.formatTime","videojs.time.formatTime",Zn);H.setFormatTime=Er(9,"videojs.setFormatTime","videojs.time.setFormatTime",ux);H.resetFormatTime=Er(9,"videojs.resetFormatTime","videojs.time.resetFormatTime",cx);H.parseUrl=Er(9,"videojs.parseUrl","videojs.url.parseUrl",v0);H.isCrossOrigin=Er(9,"videojs.isCrossOrigin","videojs.url.isCrossOrigin",zd);H.EventTarget=Wi;H.any=m0;H.on=Zi;H.one=Xd;H.off=hi;H.trigger=_o;H.xhr=g_;H.TrackList=Wn;H.TextTrack=Mu;H.TextTrackList=y0;H.AudioTrack=mx;H.AudioTrackList=dx;H.VideoTrack=gx;H.VideoTrackList=fx;["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(r=>{H[r]=function(){return qe.warn(`videojs.${r}() is deprecated; use videojs.dom.${r}() instead`),J_[r].apply(null,arguments)}});H.computedStyle=Er(9,"videojs.computedStyle","videojs.dom.computedStyle",ro);H.dom=J_;H.fn=qQ;H.num=x$;H.str=zQ;H.url=t$;H.Error=H$;/*! @name videojs-contrib-quality-levels @version 4.1.0 @license Apache-2.0 */class Y${constructor(e){let t=this;return t.id=e.id,t.label=t.id,t.width=e.width,t.height=e.height,t.bitrate=e.bandwidth,t.frameRate=e.frameRate,t.enabled_=e.enabled,Object.defineProperty(t,"enabled",{get(){return t.enabled_()},set(i){t.enabled_(i)}}),t}}class Uh extends H.EventTarget{constructor(){super();let e=this;return e.levels_=[],e.selectedIndex_=-1,Object.defineProperty(e,"selectedIndex",{get(){return e.selectedIndex_}}),Object.defineProperty(e,"length",{get(){return e.levels_.length}}),e[Symbol.iterator]=()=>e.levels_.values(),e}addQualityLevel(e){let t=this.getQualityLevelById(e.id);if(t)return t;const i=this.levels_.length;return t=new Y$(e),""+i in this||Object.defineProperty(this,i,{get(){return this.levels_[i]}}),this.levels_.push(t),this.trigger({qualityLevel:t,type:"addqualitylevel"}),t}removeQualityLevel(e){let t=null;for(let i=0,s=this.length;i<s;i++)if(this[i]===e){t=this.levels_.splice(i,1)[0],this.selectedIndex_===i?this.selectedIndex_=-1:this.selectedIndex_>i&&this.selectedIndex_--;break}return t&&this.trigger({qualityLevel:e,type:"removequalitylevel"}),t}getQualityLevelById(e){for(let t=0,i=this.length;t<i;t++){const s=this[t];if(s.id===e)return s}return null}dispose(){this.selectedIndex_=-1,this.levels_.length=0}}Uh.prototype.allowedEvents_={change:"change",addqualitylevel:"addqualitylevel",removequalitylevel:"removequalitylevel"};for(const r in Uh.prototype.allowedEvents_)Uh.prototype["on"+r]=null;var Yx="4.1.0";const G$=function(r,e){const t=r.qualityLevels,i=new Uh,s=function(){i.dispose(),r.qualityLevels=t,r.off("dispose",s)};return r.on("dispose",s),r.qualityLevels=()=>i,r.qualityLevels.VERSION=Yx,i},Gx=function(r){return G$(this,H.obj.merge({},r))};H.registerPlugin("qualityLevels",Gx);Gx.VERSION=Yx;/*! @name @videojs/http-streaming @version 3.17.2 @license Apache-2.0 */const Ai=Pd,qh=(r,e)=>e&&e.responseURL&&r!==e.responseURL?e.responseURL:r,fr=r=>H.log.debug?H.log.debug.bind(H,"VHS:",`${r} >`):function(){};function Je(...r){const e=H.obj||H;return(e.merge||e.mergeOptions).apply(e,r)}function Yt(...r){const e=H.time||H;return(e.createTimeRanges||e.createTimeRanges).apply(e,r)}function K$(r){if(r.length===0)return"Buffered Ranges are empty";let e=`Buffered Ranges: 
`;for(let t=0;t<r.length;t++){const i=r.start(t),s=r.end(t);e+=`${i} --> ${s}. Duration (${s-i})
`}return e}const Zr=1/30,Wr=Zr*3,Kx=function(r,e){const t=[];let i;if(r&&r.length)for(i=0;i<r.length;i++)e(r.start(i),r.end(i))&&t.push([r.start(i),r.end(i)]);return Yt(t)},Sa=function(r,e){return Kx(r,function(t,i){return t-Wr<=e&&i+Wr>=e})},xc=function(r,e){return Kx(r,function(t){return t-Zr>=e})},J$=function(r){if(r.length<2)return Yt();const e=[];for(let t=1;t<r.length;t++){const i=r.end(t-1),s=r.start(t);e.push([i,s])}return Yt(e)},e5=function(r,e){let t=null,i=null,s=0;const n=[],a=[];if(!r||!r.length||!e||!e.length)return Yt();let o=r.length;for(;o--;)n.push({time:r.start(o),type:"start"}),n.push({time:r.end(o),type:"end"});for(o=e.length;o--;)n.push({time:e.start(o),type:"start"}),n.push({time:e.end(o),type:"end"});for(n.sort(function(l,u){return l.time-u.time}),o=0;o<n.length;o++)n[o].type==="start"?(s++,s===2&&(t=n[o].time)):n[o].type==="end"&&(s--,s===1&&(i=n[o].time)),t!==null&&i!==null&&(a.push([t,i]),t=null,i=null);return Yt(a)},Jx=r=>{const e=[];if(!r||!r.length)return"";for(let t=0;t<r.length;t++)e.push(r.start(t)+" => "+r.end(t));return e.join(", ")},t5=function(r,e,t=1){return((r.length?r.end(r.length-1):0)-e)/t},Mn=r=>{const e=[];for(let t=0;t<r.length;t++)e.push({start:r.start(t),end:r.end(t)});return e},i5=function(r,e){if(r===e)return!1;if(!r&&e||!e&&r||r.length!==e.length)return!0;for(let t=0;t<r.length;t++)if(r.start(t)!==e.start(t)||r.end(t)!==e.end(t))return!0;return!1},ap=function(r){if(!(!r||!r.length||!r.end))return r.end(r.length-1)},$0=function(r,e){let t=0;if(!r||!r.length)return t;for(let i=0;i<r.length;i++){const s=r.start(i),n=r.end(i);if(!(e>n)){if(e>s&&e<=n){t+=n-e;continue}t+=n-s}}return t},B0=(r,e)=>{if(!e.preload)return e.duration;let t=0;return(e.parts||[]).forEach(function(i){t+=i.duration}),(e.preloadHints||[]).forEach(function(i){i.type==="PART"&&(t+=r.partTargetDuration)}),t},xm=r=>(r.segments||[]).reduce((e,t,i)=>(t.parts?t.parts.forEach(function(s,n){e.push({duration:s.duration,segmentIndex:i,partIndex:n,part:s,segment:t})}):e.push({duration:t.duration,segmentIndex:i,partIndex:null,segment:t,part:null}),e),[]),ew=r=>{const e=r.segments&&r.segments.length&&r.segments[r.segments.length-1];return e&&e.parts||[]},tw=({preloadSegment:r})=>{if(!r)return;const{parts:e,preloadHints:t}=r;let i=(t||[]).reduce((s,n)=>s+(n.type==="PART"?1:0),0);return i+=e&&e.length?e.length:0,i},iw=(r,e)=>{if(e.endList)return 0;if(r&&r.suggestedPresentationDelay)return r.suggestedPresentationDelay;const t=ew(e).length>0;return t&&e.serverControl&&e.serverControl.partHoldBack?e.serverControl.partHoldBack:t&&e.partTargetDuration?e.partTargetDuration*3:e.serverControl&&e.serverControl.holdBack?e.serverControl.holdBack:e.targetDuration?e.targetDuration*3:0},r5=function(r,e){let t=0,i=e-r.mediaSequence,s=r.segments[i];if(s){if(typeof s.start<"u")return{result:s.start,precise:!0};if(typeof s.end<"u")return{result:s.end-s.duration,precise:!0}}for(;i--;){if(s=r.segments[i],typeof s.end<"u")return{result:t+s.end,precise:!0};if(t+=B0(r,s),typeof s.start<"u")return{result:t+s.start,precise:!0}}return{result:t,precise:!1}},s5=function(r,e){let t=0,i,s=e-r.mediaSequence;for(;s<r.segments.length;s++){if(i=r.segments[s],typeof i.start<"u")return{result:i.start-t,precise:!0};if(t+=B0(r,i),typeof i.end<"u")return{result:i.end-t,precise:!0}}return{result:-1,precise:!1}},rw=function(r,e,t){if(typeof e>"u"&&(e=r.mediaSequence+r.segments.length),e<r.mediaSequence)return 0;const i=r5(r,e);if(i.precise)return i.result;const s=s5(r,e);return s.precise?s.result:i.result+t},sw=function(r,e,t){if(!r)return 0;if(typeof t!="number"&&(t=0),typeof e>"u"){if(r.totalDuration)return r.totalDuration;if(!r.endList)return q.Infinity}return rw(r,e,t)},xl=function({defaultDuration:r,durationList:e,startIndex:t,endIndex:i}){let s=0;if(t>i&&([t,i]=[i,t]),t<0){for(let n=t;n<Math.min(0,i);n++)s+=r;t=0}for(let n=t;n<i;n++)s+=e[n].duration;return s},nw=function(r,e,t,i){if(!r||!r.segments)return null;if(r.endList)return sw(r);if(e===null)return null;e=e||0;let s=rw(r,r.mediaSequence+r.segments.length,e);return t&&(i=typeof i=="number"?i:iw(null,r),s-=i),Math.max(0,s)},n5=function(r,e,t){const s=e||0;let n=nw(r,e,!0,t);return n===null?Yt():(n<s&&(n=s),Yt(s,n))},a5=function({playlist:r,currentTime:e,startingSegmentIndex:t,startingPartIndex:i,startTime:s,exactManifestTimings:n}){let a=e-s;const o=xm(r);let l=0;for(let u=0;u<o.length;u++){const c=o[u];if(t===c.segmentIndex&&!(typeof i=="number"&&typeof c.partIndex=="number"&&i!==c.partIndex)){l=u;break}}if(a<0){if(l>0)for(let u=l-1;u>=0;u--){const c=o[u];if(a+=c.duration,n){if(a<0)continue}else if(a+Zr<=0)continue;return{partIndex:c.partIndex,segmentIndex:c.segmentIndex,startTime:s-xl({defaultDuration:r.targetDuration,durationList:o,startIndex:l,endIndex:u})}}return{partIndex:o[0]&&o[0].partIndex||null,segmentIndex:o[0]&&o[0].segmentIndex||0,startTime:e}}if(l<0){for(let u=l;u<0;u++)if(a-=r.targetDuration,a<0)return{partIndex:o[0]&&o[0].partIndex||null,segmentIndex:o[0]&&o[0].segmentIndex||0,startTime:e};l=0}for(let u=l;u<o.length;u++){const c=o[u];a-=c.duration;const h=c.duration>Zr,f=a===0,m=h&&a+Zr>=0;if(!((f||m)&&u!==o.length-1)){if(n){if(a>0)continue}else if(a-Zr>=0)continue;return{partIndex:c.partIndex,segmentIndex:c.segmentIndex,startTime:s+xl({defaultDuration:r.targetDuration,durationList:o,startIndex:l,endIndex:u})}}}return{segmentIndex:o[o.length-1].segmentIndex,partIndex:o[o.length-1].partIndex,startTime:e}},aw=function(r){return r.excludeUntil&&r.excludeUntil>Date.now()},N0=function(r){return r.excludeUntil&&r.excludeUntil===1/0},Yd=function(r){const e=aw(r);return!r.disabled&&!e},o5=function(r){return r.disabled},l5=function(r){for(let e=0;e<r.segments.length;e++)if(r.segments[e].key)return!0;return!1},ow=function(r,e){return e.attributes&&e.attributes[r]},u5=function(r,e,t,i=0){return ow("BANDWIDTH",t)?(r*t.attributes.BANDWIDTH-i*8)/e:NaN},wm=(r,e)=>{if(r.playlists.length===1)return!0;const t=e.attributes.BANDWIDTH||Number.MAX_VALUE;return r.playlists.filter(i=>Yd(i)?(i.attributes.BANDWIDTH||0)<t:!1).length===0},F0=(r,e)=>!r&&!e||!r&&e||r&&!e?!1:!!(r===e||r.id&&e.id&&r.id===e.id||r.resolvedUri&&e.resolvedUri&&r.resolvedUri===e.resolvedUri||r.uri&&e.uri&&r.uri===e.uri),ev=function(r,e){const t=r&&r.mediaGroups&&r.mediaGroups.AUDIO||{};let i=!1;for(const s in t){for(const n in t[s])if(i=e(t[s][n]),i)break;if(i)break}return!!i},Qu=r=>{if(!r||!r.playlists||!r.playlists.length)return ev(r,t=>t.playlists&&t.playlists.length||t.uri);for(let e=0;e<r.playlists.length;e++){const t=r.playlists[e],i=t.attributes&&t.attributes.CODECS;if(!(i&&i.split(",").every(n=>b_(n))||ev(r,n=>F0(t,n))))return!1}return!0};var Mi={liveEdgeDelay:iw,duration:sw,seekable:n5,getMediaInfoForTime:a5,isEnabled:Yd,isDisabled:o5,isExcluded:aw,isIncompatible:N0,playlistEnd:nw,isAes:l5,hasAttribute:ow,estimateSegmentRequestTime:u5,isLowestEnabledRendition:wm,isAudioOnly:Qu,playlistMatch:F0,segmentDurationWithParts:B0};const{log:lw}=H,Ma=(r,e)=>`${r}-${e}`,uw=(r,e,t)=>`placeholder-uri-${r}-${e}-${t}`,c5=({onwarn:r,oninfo:e,manifestString:t,customTagParsers:i=[],customTagMappers:s=[],llhls:n})=>{const a=new GR;r&&a.on("warn",r),e&&a.on("info",e),i.forEach(u=>a.addParser(u)),s.forEach(u=>a.addTagMapper(u)),a.push(t),a.end();const o=a.manifest;if(n||(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach(function(u){o.hasOwnProperty(u)&&delete o[u]}),o.segments&&o.segments.forEach(function(u){["parts","preloadHints"].forEach(function(c){u.hasOwnProperty(c)&&delete u[c]})})),!o.targetDuration){let u=10;o.segments&&o.segments.length&&(u=o.segments.reduce((c,h)=>Math.max(c,h.duration),0)),r&&r({message:`manifest has no targetDuration defaulting to ${u}`}),o.targetDuration=u}const l=ew(o);if(l.length&&!o.partTargetDuration){const u=l.reduce((c,h)=>Math.max(c,h.duration),0);r&&(r({message:`manifest has no partTargetDuration defaulting to ${u}`}),lw.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),o.partTargetDuration=u}return o},ko=(r,e)=>{r.mediaGroups&&["AUDIO","SUBTITLES"].forEach(t=>{if(r.mediaGroups[t])for(const i in r.mediaGroups[t])for(const s in r.mediaGroups[t][i]){const n=r.mediaGroups[t][i][s];e(n,t,i,s)}})},cw=({playlist:r,uri:e,id:t})=>{r.id=t,r.playlistErrors_=0,e&&(r.uri=e),r.attributes=r.attributes||{}},h5=r=>{let e=r.playlists.length;for(;e--;){const t=r.playlists[e];cw({playlist:t,id:Ma(e,t.uri)}),t.resolvedUri=Ai(r.uri,t.uri),r.playlists[t.id]=t,r.playlists[t.uri]=t,t.attributes.BANDWIDTH||lw.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}},d5=r=>{ko(r,e=>{e.uri&&(e.resolvedUri=Ai(r.uri,e.uri))})},f5=(r,e)=>{const t=Ma(0,e),i={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:q.location.href,resolvedUri:q.location.href,playlists:[{uri:e,id:t,resolvedUri:e,attributes:{}}]};return i.playlists[t]=i.playlists[0],i.playlists[e]=i.playlists[0],i},hw=(r,e,t=uw)=>{r.uri=e;for(let s=0;s<r.playlists.length;s++)if(!r.playlists[s].uri){const n=`placeholder-uri-${s}`;r.playlists[s].uri=n}const i=Qu(r);ko(r,(s,n,a,o)=>{if(!s.playlists||!s.playlists.length){if(i&&n==="AUDIO"&&!s.uri)for(let l=0;l<r.playlists.length;l++){const u=r.playlists[l];if(u.attributes&&u.attributes.AUDIO&&u.attributes.AUDIO===a)return}s.playlists=[Lt({},s)]}s.playlists.forEach(function(l,u){const c=t(n,a,o,l),h=Ma(u,c);l.uri?l.resolvedUri=l.resolvedUri||Ai(r.uri,l.uri):(l.uri=u===0?c:h,l.resolvedUri=l.uri),l.id=l.id||h,l.attributes=l.attributes||{},r.playlists[l.id]=l,r.playlists[l.uri]=l})}),h5(r),d5(r)};class tv{constructor(){this.offset_=null,this.pendingDateRanges_=new Map,this.processedDateRanges_=new Map}setOffset(e=[]){if(this.offset_!==null||!e.length)return;const[t]=e;t.programDateTime!==void 0&&(this.offset_=t.programDateTime/1e3)}setPendingDateRanges(e=[]){if(!e.length)return;const[t]=e,i=t.startDate.getTime();this.trimProcessedDateRanges_(i),this.pendingDateRanges_=e.reduce((s,n)=>(s.set(n.id,n),s),new Map)}processDateRange(e){this.pendingDateRanges_.delete(e.id),this.processedDateRanges_.set(e.id,e)}getDateRangesToProcess(){if(this.offset_===null)return[];const e={},t=[];this.pendingDateRanges_.forEach((i,s)=>{if(!this.processedDateRanges_.has(s)&&(i.startTime=i.startDate.getTime()/1e3-this.offset_,i.processDateRange=()=>this.processDateRange(i),t.push(i),!!i.class))if(e[i.class]){const n=e[i.class].push(i);i.classListIndex=n-1}else e[i.class]=[i],i.classListIndex=0});for(const i of t){const s=e[i.class]||[];i.endDate?i.endTime=i.endDate.getTime()/1e3-this.offset_:i.endOnNext&&s[i.classListIndex+1]?i.endTime=s[i.classListIndex+1].startTime:i.duration?i.endTime=i.startTime+i.duration:i.plannedDuration?i.endTime=i.startTime+i.plannedDuration:i.endTime=i.startTime}return t}trimProcessedDateRanges_(e){new Map(this.processedDateRanges_).forEach((i,s)=>{i.startDate.getTime()<e&&this.processedDateRanges_.delete(s)})}}const dw=22,jn=({requestType:r,request:e,error:t,parseFailure:i})=>{const s=e.status<200||e.status>299,n=e.status>=400&&e.status<=499,a={uri:e.uri,requestType:r},o=s&&!n||i;if(t&&n)a.error=Lt({},t),a.errorType=H.Error.NetworkRequestFailed;else if(e.aborted)a.errorType=H.Error.NetworkRequestAborted;else if(e.timedout)a.errorType=H.Error.NetworkRequestTimeout;else if(o){const l=i?H.Error.NetworkBodyParserFailed:H.Error.NetworkBadStatus;a.errorType=l,a.status=e.status,a.headers=e.headers}return a},p5=fr("CodecUtils"),fw=function(r){const e=r.attributes||{};if(e.CODECS)return Fr(e.CODECS)},pw=(r,e)=>{const t=e.attributes||{};return r&&r.mediaGroups&&r.mediaGroups.AUDIO&&t.AUDIO&&r.mediaGroups.AUDIO[t.AUDIO]},m5=(r,e)=>{if(!pw(r,e))return!0;const t=e.attributes||{},i=r.mediaGroups.AUDIO[t.AUDIO];for(const s in i)if(!i[s].uri&&!i[s].playlists)return!0;return!1},ql=function(r){const e={};return r.forEach(({mediaType:t,type:i,details:s})=>{e[t]=e[t]||[],e[t].push(y_(`${i}${s}`))}),Object.keys(e).forEach(function(t){if(e[t].length>1){p5(`multiple ${t} codecs found as attributes: ${e[t].join(", ")}. Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs.`),e[t]=null;return}e[t]=e[t][0]}),e},iv=function(r){let e=0;return r.audio&&e++,r.video&&e++,e},wl=function(r,e){const t=e.attributes||{},i=ql(fw(e)||[]);if(pw(r,e)&&!i.audio&&!m5(r,e)){const s=ql(JR(r,t.AUDIO)||[]);s.audio&&(i.audio=s.audio)}return i},{EventTarget:g5}=H,O5=(r,e)=>{if(e.endList||!e.serverControl)return r;const t={};if(e.serverControl.canBlockReload){const{preloadSegment:i}=e;let s=e.mediaSequence+e.segments.length;if(i){const n=i.parts||[],a=tw(e)-1;a>-1&&a!==n.length-1&&(t._HLS_part=a),(a>-1||n.length)&&s--}t._HLS_msn=s}if(e.serverControl&&e.serverControl.canSkipUntil&&(t._HLS_skip=e.serverControl.canSkipDateranges?"v2":"YES"),Object.keys(t).length){const i=new q.URL(r);["_HLS_skip","_HLS_msn","_HLS_part"].forEach(function(s){t.hasOwnProperty(s)&&i.searchParams.set(s,t[s])}),r=i.toString()}return r},y5=(r,e)=>{if(!r)return e;const t=Je(r,e);if(r.preloadHints&&!e.preloadHints&&delete t.preloadHints,r.parts&&!e.parts)delete t.parts;else if(r.parts&&e.parts)for(let i=0;i<e.parts.length;i++)r.parts&&r.parts[i]&&(t.parts[i]=Je(r.parts[i],e.parts[i]));return!r.skipped&&e.skipped&&(t.skipped=!1),r.preload&&!e.preload&&(t.preload=!1),t},b5=(r,e,t)=>{const i=r.slice(),s=e.slice();t=t||0;const n=[];let a;for(let o=0;o<s.length;o++){const l=i[o+t],u=s[o];l?(a=l.map||a,n.push(y5(l,u))):(a&&!u.map&&(u.map=a),n.push(u))}return n},mw=(r,e)=>{!r.resolvedUri&&r.uri&&(r.resolvedUri=Ai(e,r.uri)),r.key&&!r.key.resolvedUri&&(r.key.resolvedUri=Ai(e,r.key.uri)),r.map&&!r.map.resolvedUri&&(r.map.resolvedUri=Ai(e,r.map.uri)),r.map&&r.map.key&&!r.map.key.resolvedUri&&(r.map.key.resolvedUri=Ai(e,r.map.key.uri)),r.parts&&r.parts.length&&r.parts.forEach(t=>{t.resolvedUri||(t.resolvedUri=Ai(e,t.uri))}),r.preloadHints&&r.preloadHints.length&&r.preloadHints.forEach(t=>{t.resolvedUri||(t.resolvedUri=Ai(e,t.uri))})},gw=function(r){const e=r.segments||[],t=r.preloadSegment;if(t&&t.parts&&t.parts.length){if(t.preloadHints){for(let i=0;i<t.preloadHints.length;i++)if(t.preloadHints[i].type==="MAP")return e}t.duration=r.targetDuration,t.preload=!0,e.push(t)}return e},Ow=(r,e)=>r===e||r.segments&&e.segments&&r.segments.length===e.segments.length&&r.endList===e.endList&&r.mediaSequence===e.mediaSequence&&r.preloadSegment===e.preloadSegment,Cm=(r,e,t=Ow)=>{const i=Je(r,{}),s=i.playlists[e.id];if(!s||t(s,e))return null;e.segments=gw(e);const n=Je(s,e);if(n.preloadSegment&&!e.preloadSegment&&delete n.preloadSegment,s.segments){if(e.skip){e.segments=e.segments||[];for(let a=0;a<e.skip.skippedSegments;a++)e.segments.unshift({skipped:!0})}n.segments=b5(s.segments,e.segments,e.mediaSequence-s.mediaSequence)}n.segments.forEach(a=>{mw(a,n.resolvedUri)});for(let a=0;a<i.playlists.length;a++)i.playlists[a].id===e.id&&(i.playlists[a]=n);return i.playlists[e.id]=n,i.playlists[e.uri]=n,ko(r,(a,o,l,u)=>{if(a.playlists)for(let c=0;c<a.playlists.length;c++)e.id===a.playlists[c].id&&(a.playlists[c]=n)}),i},km=(r,e)=>{const t=r.segments||[],i=t[t.length-1],s=i&&i.parts&&i.parts[i.parts.length-1],n=s&&s.duration||i&&i.duration;return e&&n?n*1e3:(r.partTargetDuration||r.targetDuration||10)*500},rv=(r,e,t)=>{if(!r)return;const i=[];return r.forEach(s=>{if(!s.attributes)return;const{BANDWIDTH:n,RESOLUTION:a,CODECS:o}=s.attributes;i.push({id:s.id,bandwidth:n,resolution:a,codecs:o})}),{type:e,isLive:t,renditions:i}};class Ta extends g5{constructor(e,t,i={}){if(super(),!e)throw new Error("A non-empty playlist URL or object is required");this.logger_=fr("PlaylistLoader");const{withCredentials:s=!1}=i;this.src=e,this.vhs_=t,this.withCredentials=s,this.addDateRangesToTextTrack_=i.addDateRangesToTextTrack;const n=t.options_;this.customTagParsers=n&&n.customTagParsers||[],this.customTagMappers=n&&n.customTagMappers||[],this.llhls=n&&n.llhls,this.dateRangesStorage_=new tv,this.state="HAVE_NOTHING",this.handleMediaupdatetimeout_=this.handleMediaupdatetimeout_.bind(this),this.on("mediaupdatetimeout",this.handleMediaupdatetimeout_),this.on("loadedplaylist",this.handleLoadedPlaylist_.bind(this))}handleLoadedPlaylist_(){const e=this.media();if(!e)return;this.dateRangesStorage_.setOffset(e.segments),this.dateRangesStorage_.setPendingDateRanges(e.dateRanges);const t=this.dateRangesStorage_.getDateRangesToProcess();!t.length||!this.addDateRangesToTextTrack_||this.addDateRangesToTextTrack_(t)}handleMediaupdatetimeout_(){if(this.state!=="HAVE_METADATA")return;const e=this.media();let t=Ai(this.main.uri,e.uri);this.llhls&&(t=O5(t,e)),this.state="HAVE_CURRENT_METADATA",this.request=this.vhs_.xhr({uri:t,withCredentials:this.withCredentials,requestType:"hls-playlist"},(i,s)=>{if(this.request){if(i)return this.playlistRequestError(this.request,this.media(),"HAVE_METADATA");this.haveMetadata({playlistString:this.request.responseText,url:this.media().uri,id:this.media().id})}})}playlistRequestError(e,t,i){const{uri:s,id:n}=t;this.request=null,i&&(this.state=i),this.error={playlist:this.main.playlists[n],status:e.status,message:`HLS playlist request error at URL: ${s}.`,responseText:e.responseText,code:e.status>=500?4:2,metadata:jn({requestType:e.requestType,request:e,error:e.error})},this.trigger("error")}parseManifest_({url:e,manifestString:t}){try{const i=c5({onwarn:({message:s})=>this.logger_(`m3u8-parser warn for ${e}: ${s}`),oninfo:({message:s})=>this.logger_(`m3u8-parser info for ${e}: ${s}`),manifestString:t,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,llhls:this.llhls});return!i.playlists||!i.playlists.length||this.excludeAudioOnlyVariants(i.playlists),i}catch(i){this.error=i,this.error.metadata={errorType:H.Error.StreamingHlsPlaylistParserError,error:i}}}excludeAudioOnlyVariants(e){const t=i=>{const s=i.attributes||{},{width:n,height:a}=s.RESOLUTION||{};if(n&&a)return!0;const o=fw(i)||[];return!!ql(o).video};e.some(t)&&e.forEach(i=>{t(i)||(i.excludeUntil=1/0)})}haveMetadata({playlistString:e,playlistObject:t,url:i,id:s}){this.request=null,this.state="HAVE_METADATA";const n={playlistInfo:{type:"media",uri:i}};this.trigger({type:"playlistparsestart",metadata:n});const a=t||this.parseManifest_({url:i,manifestString:e});a.lastRequest=Date.now(),cw({playlist:a,uri:i,id:s});const o=Cm(this.main,a);this.targetDuration=a.partTargetDuration||a.targetDuration,this.pendingMedia_=null,o?(this.main=o,this.media_=this.main.playlists[s]):this.trigger("playlistunchanged"),this.updateMediaUpdateTimeout_(km(this.media(),!!o)),n.parsedPlaylist=rv(this.main.playlists,n.playlistInfo.type,!this.media_.endList),this.trigger({type:"playlistparsecomplete",metadata:n}),this.trigger("loadedplaylist")}dispose(){this.trigger("dispose"),this.stopRequest(),q.clearTimeout(this.mediaUpdateTimeout),q.clearTimeout(this.finalRenditionTimeout),this.dateRangesStorage_=new tv,this.off()}stopRequest(){if(this.request){const e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}media(e,t){if(!e)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);if(typeof e=="string"){if(!this.main.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.main.playlists[e]}if(q.clearTimeout(this.finalRenditionTimeout),t){const o=(e.partTargetDuration||e.targetDuration)/2*1e3||5e3;this.finalRenditionTimeout=q.setTimeout(this.media.bind(this,e,!1),o);return}const i=this.state,s=!this.media_||e.id!==this.media_.id,n=this.main.playlists[e.id];if(n&&n.endList||e.endList&&e.segments.length){this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=e,s&&(this.trigger("mediachanging"),i==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange"));return}if(this.updateMediaUpdateTimeout_(km(e,!0)),!s)return;if(this.state="SWITCHING_MEDIA",this.request){if(e.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.pendingMedia_=e;const a={playlistInfo:{type:"media",uri:e.uri}};this.trigger({type:"playlistrequeststart",metadata:a}),this.request=this.vhs_.xhr({uri:e.resolvedUri,withCredentials:this.withCredentials,requestType:"hls-playlist"},(o,l)=>{if(this.request){if(e.lastRequest=Date.now(),e.resolvedUri=qh(e.resolvedUri,l),o)return this.playlistRequestError(this.request,e,i);this.trigger({type:"playlistrequestcomplete",metadata:a}),this.haveMetadata({playlistString:l.responseText,url:e.uri,id:e.id}),i==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange")}})}pause(){this.mediaUpdateTimeout&&(q.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.stopRequest(),this.state==="HAVE_NOTHING"&&(this.started=!1),this.state==="SWITCHING_MEDIA"?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MAIN_MANIFEST":this.state==="HAVE_CURRENT_METADATA"&&(this.state="HAVE_METADATA")}load(e){this.mediaUpdateTimeout&&(q.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);const t=this.media();if(e){const i=t?(t.partTargetDuration||t.targetDuration)/2*1e3:5e3;this.mediaUpdateTimeout=q.setTimeout(()=>{this.mediaUpdateTimeout=null,this.load()},i);return}if(!this.started){this.start();return}t&&!t.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist")}updateMediaUpdateTimeout_(e){this.mediaUpdateTimeout&&(q.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),!(!this.media()||this.media().endList)&&(this.mediaUpdateTimeout=q.setTimeout(()=>{this.mediaUpdateTimeout=null,this.trigger("mediaupdatetimeout"),this.updateMediaUpdateTimeout_(e)},e))}start(){if(this.started=!0,typeof this.src=="object"){this.src.uri||(this.src.uri=q.location.href),this.src.resolvedUri=this.src.uri,setTimeout(()=>{this.setupInitialPlaylist(this.src)},0);return}const e={playlistInfo:{type:"multivariant",uri:this.src}};this.trigger({type:"playlistrequeststart",metadata:e}),this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials,requestType:"hls-playlist"},(t,i)=>{if(!this.request)return;if(this.request=null,t)return this.error={status:i.status,message:`HLS playlist request error at URL: ${this.src}.`,responseText:i.responseText,code:2,metadata:jn({requestType:i.requestType,request:i,error:t})},this.state==="HAVE_NOTHING"&&(this.started=!1),this.trigger("error");this.trigger({type:"playlistrequestcomplete",metadata:e}),this.src=qh(this.src,i),this.trigger({type:"playlistparsestart",metadata:e});const s=this.parseManifest_({manifestString:i.responseText,url:this.src});e.parsedPlaylist=rv(s.playlists,e.playlistInfo.type,!1),this.trigger({type:"playlistparsecomplete",metadata:e}),this.setupInitialPlaylist(s)})}srcUri(){return typeof this.src=="string"?this.src:this.src.uri}setupInitialPlaylist(e){if(this.state="HAVE_MAIN_MANIFEST",e.playlists){this.main=e,hw(this.main,this.srcUri()),e.playlists.forEach(i=>{i.segments=gw(i),i.segments.forEach(s=>{mw(s,i.resolvedUri)})}),this.trigger("loadedplaylist"),this.request||this.media(this.main.playlists[0]);return}const t=this.srcUri()||q.location.href;this.main=f5(e,t),this.haveMetadata({playlistObject:e,url:t,id:this.main.playlists[0].id}),this.trigger("loadedmetadata")}updateOrDeleteClone(e,t){const i=this.main,s=e.ID;let n=i.playlists.length;for(;n--;){const a=i.playlists[n];if(a.attributes["PATHWAY-ID"]===s){const o=a.resolvedUri,l=a.id;if(t){const u=this.createCloneURI_(a.resolvedUri,e),c=Ma(s,u),h=this.createCloneAttributes_(s,a.attributes),f=this.createClonePlaylist_(a,c,e,h);i.playlists[n]=f,i.playlists[c]=f,i.playlists[u]=f}else i.playlists.splice(n,1);delete i.playlists[l],delete i.playlists[o]}}this.updateOrDeleteCloneMedia(e,t)}updateOrDeleteCloneMedia(e,t){const i=this.main,s=e.ID;["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(n=>{if(!(!i.mediaGroups[n]||!i.mediaGroups[n][s])){for(const a in i.mediaGroups[n])if(a===s){for(const o in i.mediaGroups[n][a])i.mediaGroups[n][a][o].playlists.forEach((u,c)=>{const h=i.playlists[u.id],f=h.id,m=h.resolvedUri;delete i.playlists[f],delete i.playlists[m]});delete i.mediaGroups[n][a]}}}),t&&this.createClonedMediaGroups_(e)}addClonePathway(e,t={}){const i=this.main,s=i.playlists.length,n=this.createCloneURI_(t.resolvedUri,e),a=Ma(e.ID,n),o=this.createCloneAttributes_(e.ID,t.attributes),l=this.createClonePlaylist_(t,a,e,o);i.playlists[s]=l,i.playlists[a]=l,i.playlists[n]=l,this.createClonedMediaGroups_(e)}createClonedMediaGroups_(e){const t=e.ID,i=e["BASE-ID"],s=this.main;["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(n=>{if(!(!s.mediaGroups[n]||s.mediaGroups[n][t]))for(const a in s.mediaGroups[n]){if(a===i)s.mediaGroups[n][t]={};else continue;for(const o in s.mediaGroups[n][a]){const l=s.mediaGroups[n][a][o];s.mediaGroups[n][t][o]=Lt({},l);const u=s.mediaGroups[n][t][o],c=this.createCloneURI_(l.resolvedUri,e);u.resolvedUri=c,u.uri=c,u.playlists=[],l.playlists.forEach((h,f)=>{const m=s.playlists[h.id],S=uw(n,t,o),y=Ma(t,S);if(m&&!s.playlists[y]){const E=this.createClonePlaylist_(m,y,e),C=E.resolvedUri;s.playlists[y]=E,s.playlists[C]=E}u.playlists[f]=this.createClonePlaylist_(h,y,e)})}}})}createClonePlaylist_(e,t,i,s){const n=this.createCloneURI_(e.resolvedUri,i),a={resolvedUri:n,uri:n,id:t};return e.segments&&(a.segments=[]),s&&(a.attributes=s),Je(e,a)}createCloneURI_(e,t){const i=new URL(e);i.hostname=t["URI-REPLACEMENT"].HOST;const s=t["URI-REPLACEMENT"].PARAMS;for(const n of Object.keys(s))i.searchParams.set(n,s[n]);return i.href}createCloneAttributes_(e,t){const i={"PATHWAY-ID":e};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(s=>{t[s]&&(i[s]=e)}),i}getKeyIdSet(e){const t=new Set;if(!e||!e.contentProtection)return t;for(const i in e.contentProtection)if(e.contentProtection[i]&&e.contentProtection[i].attributes&&e.contentProtection[i].attributes.keyId){const s=e.contentProtection[i].attributes.keyId;t.add(s.toLowerCase())}return t}}const Em=function(r,e,t,i){const s=r.responseType==="arraybuffer"?r.response:r.responseText;!e&&s&&(r.responseTime=Date.now(),r.roundTripTime=r.responseTime-r.requestTime,r.bytesReceived=s.byteLength||s.length,r.bandwidth||(r.bandwidth=Math.floor(r.bytesReceived/r.roundTripTime*8*1e3))),t.headers&&(r.responseHeaders=t.headers),e&&e.code==="ETIMEDOUT"&&(r.timedout=!0),!e&&!r.aborted&&t.statusCode!==200&&t.statusCode!==206&&t.statusCode!==0&&(e=new Error("XHR Failed with a response of: "+(r&&(s||r.responseText)))),i(e,r)},v5=(r,e)=>{if(!r||!r.size)return;let t=e;return r.forEach(i=>{t=i(t)}),t},S5=(r,e,t,i)=>{!r||!r.size||r.forEach(s=>{s(e,t,i)})},yw=function(){const r=function e(t,i){t=Je({timeout:45e3},t);const s=e.beforeRequest||H.Vhs.xhr.beforeRequest,n=e._requestCallbackSet||H.Vhs.xhr._requestCallbackSet||new Set,a=e._responseCallbackSet||H.Vhs.xhr._responseCallbackSet;s&&typeof s=="function"&&(H.log.warn("beforeRequest is deprecated, use onRequest instead."),n.add(s));const o=H.Vhs.xhr.original===!0?H.xhr:H.Vhs.xhr,l=v5(n,t);n.delete(s);const u=o(l||t,function(h,f){return S5(a,u,h,f),Em(u,h,f,i)}),c=u.abort;return u.abort=function(){return u.aborted=!0,c.apply(u,arguments)},u.uri=t.uri,u.requestType=t.requestType,u.requestTime=Date.now(),u};return r.original=!0,r},T5=function(r){let e;const t=r.offset;return typeof r.offset=="bigint"||typeof r.length=="bigint"?e=q.BigInt(r.offset)+q.BigInt(r.length)-q.BigInt(1):e=r.offset+r.length-1,"bytes="+t+"-"+e},Am=function(r){const e={};return r.byterange&&(e.Range=T5(r.byterange)),e},_5=function(r,e){return r.start(e)+"-"+r.end(e)},x5=function(r,e){const t=r.toString(16);return"00".substring(0,2-t.length)+t+(e%2?" ":"")},w5=function(r){return r>=32&&r<126?String.fromCharCode(r):"."},bw=function(r){const e={};return Object.keys(r).forEach(t=>{const i=r[t];S_(i)?e[t]={bytes:i.buffer,byteOffset:i.byteOffset,byteLength:i.byteLength}:e[t]=i}),e},Vh=function(r){const e=r.byterange||{length:1/0,offset:0};return[e.length,e.offset,r.resolvedUri].join(",")},vw=function(r){return r.resolvedUri},Sw=r=>{const e=Array.prototype.slice.call(r),t=16;let i="",s,n;for(let a=0;a<e.length/t;a++)s=e.slice(a*t,a*t+t).map(x5).join(""),n=e.slice(a*t,a*t+t).map(w5).join(""),i+=s+" "+n+`
`;return i},C5=({bytes:r})=>Sw(r),k5=r=>{let e="",t;for(t=0;t<r.length;t++)e+=_5(r,t)+" ";return e};var E5=Object.freeze({__proto__:null,createTransferableMessage:bw,initSegmentId:Vh,segmentKeyId:vw,hexDump:Sw,tagDump:C5,textRanges:k5});const Tw=.25,A5=(r,e)=>{if(!e.dateTimeObject)return null;const t=e.videoTimingInfo.transmuxerPrependedSeconds,s=e.videoTimingInfo.transmuxedPresentationStart+t,n=r-s;return new Date(e.dateTimeObject.getTime()+n*1e3)},P5=r=>r.transmuxedPresentationEnd-r.transmuxedPresentationStart-r.transmuxerPrependedSeconds,D5=(r,e)=>{let t;try{t=new Date(r)}catch{return null}if(!e||!e.segments||e.segments.length===0)return null;let i=e.segments[0];if(t<new Date(i.dateTimeObject))return null;for(let l=0;l<e.segments.length-1;l++){i=e.segments[l];const u=new Date(e.segments[l+1].dateTimeObject);if(t<u)break}const s=e.segments[e.segments.length-1],n=s.dateTimeObject,a=s.videoTimingInfo?P5(s.videoTimingInfo):s.duration+s.duration*Tw,o=new Date(n.getTime()+a*1e3);return t>o?null:(t>new Date(n)&&(i=s),{segment:i,estimatedStart:i.videoTimingInfo?i.videoTimingInfo.transmuxedPresentationStart:Mi.duration(e,e.mediaSequence+e.segments.indexOf(i)),type:i.videoTimingInfo?"accurate":"estimate"})},M5=(r,e)=>{if(!e||!e.segments||e.segments.length===0)return null;let t=0,i;for(let n=0;n<e.segments.length&&(i=e.segments[n],t=i.videoTimingInfo?i.videoTimingInfo.transmuxedPresentationEnd:t+i.duration,!(r<=t));n++);const s=e.segments[e.segments.length-1];if(s.videoTimingInfo&&s.videoTimingInfo.transmuxedPresentationEnd<r)return null;if(r>t){if(r>t+s.duration*Tw)return null;i=s}return{segment:i,estimatedStart:i.videoTimingInfo?i.videoTimingInfo.transmuxedPresentationStart:t-i.duration,type:i.videoTimingInfo?"accurate":"estimate"}},I5=(r,e)=>{let t,i;try{t=new Date(r),i=new Date(e)}catch{}const s=t.getTime();return(i.getTime()-s)/1e3},R5=r=>{if(!r.segments||r.segments.length===0)return!1;for(let e=0;e<r.segments.length;e++)if(!r.segments[e].dateTimeObject)return!1;return!0},L5=({playlist:r,time:e=void 0,callback:t})=>{if(!t)throw new Error("getProgramTime: callback must be provided");if(!r||e===void 0)return t({message:"getProgramTime: playlist and time must be provided"});const i=M5(e,r);if(!i)return t({message:"valid programTime was not found"});if(i.type==="estimate")return t({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:i.estimatedStart});const s={mediaSeconds:e},n=A5(e,i.segment);return n&&(s.programDateTime=n.toISOString()),t(null,s)},_w=({programTime:r,playlist:e,retryCount:t=2,seekTo:i,pauseAfterSeek:s=!0,tech:n,callback:a})=>{if(!a)throw new Error("seekToProgramTime: callback must be provided");if(typeof r>"u"||!e||!i)return a({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!e.endList&&!n.hasStarted_)return a({message:"player must be playing a live stream to start buffering"});if(!R5(e))return a({message:"programDateTime tags must be provided in the manifest "+e.resolvedUri});const o=D5(r,e);if(!o)return a({message:`${r} was not found in the stream`});const l=o.segment,u=I5(l.dateTimeObject,r);if(o.type==="estimate"){if(t===0)return a({message:`${r} is not buffered yet. Try again`});i(o.estimatedStart+u),n.one("seeked",()=>{_w({programTime:r,playlist:e,retryCount:t-1,seekTo:i,pauseAfterSeek:s,tech:n,callback:a})});return}const c=l.start+u,h=()=>a(null,n.currentTime());n.one("seeked",h),s&&n.pause(),i(c)},op=(r,e)=>{if(r.readyState===4)return e()},Q5=(r,e,t,i)=>{let s=[],n,a=!1;const o=function(h,f,m,S){return f.abort(),a=!0,t(h,f,m,S)},l=function(h,f){if(a)return;if(h)return h.metadata=jn({requestType:i,request:f,error:h}),o(h,f,"",s);const m=f.responseText.substring(s&&s.byteLength||0,f.responseText.length);if(s=uL(s,T_(m,!0)),n=n||cl(s),s.length<10||n&&s.length<n+2)return op(f,()=>o(h,f,"",s));const S=c0(s);return S==="ts"&&s.length<188?op(f,()=>o(h,f,"",s)):!S&&s.length<376?op(f,()=>o(h,f,"",s)):o(null,f,S,s)},c=e({uri:r,beforeSend(h){h.overrideMimeType("text/plain; charset=x-user-defined"),h.addEventListener("progress",function({total:f,loaded:m}){return Em(h,null,{statusCode:h.status},l)})}},function(h,f){return Em(c,h,f,l)});return c},{EventTarget:$5}=H,sv=function(r,e){if(!Ow(r,e)||r.sidx&&e.sidx&&(r.sidx.offset!==e.sidx.offset||r.sidx.length!==e.sidx.length))return!1;if(!r.sidx&&e.sidx||r.sidx&&!e.sidx||r.segments&&!e.segments||!r.segments&&e.segments)return!1;if(!r.segments&&!e.segments)return!0;for(let t=0;t<r.segments.length;t++){const i=r.segments[t],s=e.segments[t];if(i.uri!==s.uri)return!1;if(!i.byterange&&!s.byterange)continue;const n=i.byterange,a=s.byterange;if(n&&!a||!n&&a||n.offset!==a.offset||n.length!==a.length)return!1}return!0},B5=(r,e,t,i)=>{const s=i.attributes.NAME||t;return`placeholder-uri-${r}-${e}-${s}`},N5=({mainXml:r,srcUrl:e,clientOffset:t,sidxMapping:i,previousManifest:s})=>{const n=oQ(r,{manifestUri:e,clientOffset:t,sidxMapping:i,previousManifest:s});return hw(n,e,B5),n},F5=(r,e)=>{ko(r,(t,i,s,n)=>{(!e.mediaGroups[i][s]||!(n in e.mediaGroups[i][s]))&&delete r.mediaGroups[i][s][n]})},U5=(r,e,t)=>{let i=!0,s=Je(r,{duration:e.duration,minimumUpdatePeriod:e.minimumUpdatePeriod,timelineStarts:e.timelineStarts});for(let n=0;n<e.playlists.length;n++){const a=e.playlists[n];if(a.sidx){const l=Md(a.sidx);t&&t[l]&&t[l].sidx&&o0(a,t[l].sidx,a.sidx.resolvedUri)}const o=Cm(s,a,sv);o&&(s=o,i=!1)}return ko(e,(n,a,o,l)=>{if(n.playlists&&n.playlists.length){const u=n.playlists[0].id,c=Cm(s,n.playlists[0],sv);c&&(s=c,l in s.mediaGroups[a][o]||(s.mediaGroups[a][o][l]=n),s.mediaGroups[a][o][l].playlists[0]=s.playlists[u],i=!1)}}),F5(s,e),e.minimumUpdatePeriod!==r.minimumUpdatePeriod&&(i=!1),i?null:s},q5=(r,e)=>(!r.map&&!e.map||!!(r.map&&e.map&&r.map.byterange.offset===e.map.byterange.offset&&r.map.byterange.length===e.map.byterange.length))&&r.uri===e.uri&&r.byterange.offset===e.byterange.offset&&r.byterange.length===e.byterange.length,nv=(r,e)=>{const t={};for(const i in r){const n=r[i].sidx;if(n){const a=Md(n);if(!e[a])break;const o=e[a].sidxInfo;q5(o,n)&&(t[a]=e[a])}}return t},V5=(r,e)=>{let i=nv(r.playlists,e);return ko(r,(s,n,a,o)=>{if(s.playlists&&s.playlists.length){const l=s.playlists;i=Je(i,nv(l,e))}}),i};class Pm extends $5{constructor(e,t,i={},s){super(),this.isPaused_=!0,this.mainPlaylistLoader_=s||this,s||(this.isMain_=!0);const{withCredentials:n=!1}=i;if(this.vhs_=t,this.withCredentials=n,this.addMetadataToTextTrack=i.addMetadataToTextTrack,!e)throw new Error("A non-empty playlist URL or object is required");this.on("minimumUpdatePeriod",()=>{this.refreshXml_()}),this.on("mediaupdatetimeout",()=>{this.refreshMedia_(this.media().id)}),this.state="HAVE_NOTHING",this.loadedPlaylists_={},this.logger_=fr("DashPlaylistLoader"),this.isMain_?(this.mainPlaylistLoader_.srcUrl=e,this.mainPlaylistLoader_.sidxMapping_={}):this.childPlaylist_=e}get isPaused(){return this.isPaused_}requestErrored_(e,t,i){if(!this.request)return!0;if(this.request=null,e)return this.error=typeof e=="object"&&!(e instanceof Error)?e:{status:t.status,message:"DASH request error at URL: "+t.uri,response:t.response,code:2,metadata:e.metadata},i&&(this.state=i),this.trigger("error"),!0}addSidxSegments_(e,t,i){const s=e.sidx&&Md(e.sidx);if(!e.sidx||!s||this.mainPlaylistLoader_.sidxMapping_[s]){q.clearTimeout(this.mediaRequest_),this.mediaRequest_=q.setTimeout(()=>i(!1),0);return}const n=qh(e.sidx.resolvedUri),a=(l,u)=>{if(this.requestErrored_(l,u,t))return;const c=this.mainPlaylistLoader_.sidxMapping_,{requestType:h}=u;let f;try{f=dQ(Ee(u.response).subarray(8))}catch(m){m.metadata=jn({requestType:h,request:u,parseFailure:!0}),this.requestErrored_(m,u,t);return}return c[s]={sidxInfo:e.sidx,sidx:f},o0(e,f,e.sidx.resolvedUri),i(!0)},o="dash-sidx";this.request=Q5(n,this.vhs_.xhr,(l,u,c,h)=>{if(l)return a(l,u);if(!c||c!=="mp4"){const S=c||"unknown";return a({status:u.status,message:`Unsupported ${S} container type for sidx segment at URL: ${n}`,response:"",playlist:e,internal:!0,playlistExclusionDuration:1/0,code:2},u)}const{offset:f,length:m}=e.sidx.byterange;if(h.length>=m+f)return a(l,{response:h.subarray(f,f+m),status:u.status,uri:u.uri});this.request=this.vhs_.xhr({uri:n,responseType:"arraybuffer",requestType:"dash-sidx",headers:Am({byterange:e.sidx.byterange})},a)},o)}dispose(){this.isPaused_=!0,this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},q.clearTimeout(this.minimumUpdatePeriodTimeout_),q.clearTimeout(this.mediaRequest_),q.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.off()}hasPendingRequest(){return this.request||this.mediaRequest_}stopRequest(){if(this.request){const e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}media(e){if(!e)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);const t=this.state;if(typeof e=="string"){if(!this.mainPlaylistLoader_.main.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.mainPlaylistLoader_.main.playlists[e]}const i=!this.media_||e.id!==this.media_.id;if(i&&this.loadedPlaylists_[e.id]&&this.loadedPlaylists_[e.id].endList){this.state="HAVE_METADATA",this.media_=e,i&&(this.trigger("mediachanging"),this.trigger("mediachange"));return}i&&(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(e,t,s=>{this.haveMetadata({startingState:t,playlist:e})}))}haveMetadata({startingState:e,playlist:t}){this.state="HAVE_METADATA",this.loadedPlaylists_[t.id]=t,q.clearTimeout(this.mediaRequest_),this.mediaRequest_=null,this.refreshMedia_(t.id),e==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange")}pause(){this.isPaused_=!0,this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),q.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.isMain_&&(q.clearTimeout(this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_),this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_=null),this.state==="HAVE_NOTHING"&&(this.started=!1)}load(e){this.isPaused_=!1,q.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null;const t=this.media();if(e){const i=t?t.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=q.setTimeout(()=>this.load(),i);return}if(!this.started){this.start();return}t&&!t.endList?(this.isMain_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist")}start(){if(this.started=!0,!this.isMain_){q.clearTimeout(this.mediaRequest_),this.mediaRequest_=q.setTimeout(()=>this.haveMain_(),0);return}this.requestMain_((e,t)=>{this.haveMain_(),!this.hasPendingRequest()&&!this.media_&&this.media(this.mainPlaylistLoader_.main.playlists[0])})}requestMain_(e){const t={manifestInfo:{uri:this.mainPlaylistLoader_.srcUrl}};this.trigger({type:"manifestrequeststart",metadata:t}),this.request=this.vhs_.xhr({uri:this.mainPlaylistLoader_.srcUrl,withCredentials:this.withCredentials,requestType:"dash-manifest"},(i,s)=>{if(i){const{requestType:a}=s;i.metadata=jn({requestType:a,request:s,error:i})}if(this.requestErrored_(i,s)){this.state==="HAVE_NOTHING"&&(this.started=!1);return}this.trigger({type:"manifestrequestcomplete",metadata:t});const n=s.responseText!==this.mainPlaylistLoader_.mainXml_;if(this.mainPlaylistLoader_.mainXml_=s.responseText,s.responseHeaders&&s.responseHeaders.date?this.mainLoaded_=Date.parse(s.responseHeaders.date):this.mainLoaded_=Date.now(),this.mainPlaylistLoader_.srcUrl=qh(this.mainPlaylistLoader_.srcUrl,s),n){this.handleMain_(),this.syncClientServerClock_(()=>e(s,n));return}return e(s,n)})}syncClientServerClock_(e){const t=lQ(this.mainPlaylistLoader_.mainXml_);if(t===null)return this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),e();if(t.method==="DIRECT")return this.mainPlaylistLoader_.clientOffset_=t.value-Date.now(),e();this.request=this.vhs_.xhr({uri:Ai(this.mainPlaylistLoader_.srcUrl,t.value),method:t.method,withCredentials:this.withCredentials,requestType:"dash-clock-sync"},(i,s)=>{if(!this.request)return;if(i){const{requestType:a}=s;return this.error.metadata=jn({requestType:a,request:s,error:i}),this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),e()}let n;t.method==="HEAD"?!s.responseHeaders||!s.responseHeaders.date?n=this.mainLoaded_:n=Date.parse(s.responseHeaders.date):n=Date.parse(s.responseText),this.mainPlaylistLoader_.clientOffset_=n-Date.now(),e()})}haveMain_(){this.state="HAVE_MAIN_MANIFEST",this.isMain_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)}handleMain_(){q.clearTimeout(this.mediaRequest_),this.mediaRequest_=null;const e=this.mainPlaylistLoader_.main,t={manifestInfo:{uri:this.mainPlaylistLoader_.srcUrl}};this.trigger({type:"manifestparsestart",metadata:t});let i;try{i=N5({mainXml:this.mainPlaylistLoader_.mainXml_,srcUrl:this.mainPlaylistLoader_.srcUrl,clientOffset:this.mainPlaylistLoader_.clientOffset_,sidxMapping:this.mainPlaylistLoader_.sidxMapping_,previousManifest:e})}catch(n){this.error=n,this.error.metadata={errorType:H.Error.StreamingDashManifestParserError,error:n},this.trigger("error")}e&&(i=U5(e,i,this.mainPlaylistLoader_.sidxMapping_)),this.mainPlaylistLoader_.main=i||e;const s=this.mainPlaylistLoader_.main.locations&&this.mainPlaylistLoader_.main.locations[0];if(s&&s!==this.mainPlaylistLoader_.srcUrl&&(this.mainPlaylistLoader_.srcUrl=s),(!e||i&&i.minimumUpdatePeriod!==e.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),this.addEventStreamToMetadataTrack_(i),i){const{duration:n,endList:a}=i,o=[];i.playlists.forEach(u=>{o.push({id:u.id,bandwidth:u.attributes.BANDWIDTH,resolution:u.attributes.RESOLUTION,codecs:u.attributes.CODECS})});const l={duration:n,isLive:!a,renditions:o};t.parsedManifest=l,this.trigger({type:"manifestparsecomplete",metadata:t})}return!!i}updateMinimumUpdatePeriodTimeout_(){const e=this.mainPlaylistLoader_;e.createMupOnMedia_&&(e.off("loadedmetadata",e.createMupOnMedia_),e.createMupOnMedia_=null),e.minimumUpdatePeriodTimeout_&&(q.clearTimeout(e.minimumUpdatePeriodTimeout_),e.minimumUpdatePeriodTimeout_=null);let t=e.main&&e.main.minimumUpdatePeriod;if(t===0&&(e.media()?t=e.media().targetDuration*1e3:(e.createMupOnMedia_=e.updateMinimumUpdatePeriodTimeout_,e.one("loadedmetadata",e.createMupOnMedia_))),typeof t!="number"||t<=0){t<0&&this.logger_(`found invalid minimumUpdatePeriod of ${t}, not setting a timeout`);return}this.createMUPTimeout_(t)}createMUPTimeout_(e){const t=this.mainPlaylistLoader_;t.minimumUpdatePeriodTimeout_=q.setTimeout(()=>{t.minimumUpdatePeriodTimeout_=null,t.trigger("minimumUpdatePeriod"),t.createMUPTimeout_(e)},e)}refreshXml_(){this.requestMain_((e,t)=>{t&&(this.media_&&(this.media_=this.mainPlaylistLoader_.main.playlists[this.media_.id]),this.mainPlaylistLoader_.sidxMapping_=V5(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.sidxMapping_),this.addSidxSegments_(this.media(),this.state,i=>{this.refreshMedia_(this.media().id)}))})}refreshMedia_(e){if(!e)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMain_&&this.handleMain_();const t=this.mainPlaylistLoader_.main.playlists,i=!this.media_||this.media_!==t[e];if(i?this.media_=t[e]:this.trigger("playlistunchanged"),!this.mediaUpdateTimeout){const s=()=>{this.media().endList||(this.mediaUpdateTimeout=q.setTimeout(()=>{this.trigger("mediaupdatetimeout"),s()},km(this.media(),!!i)))};s()}this.trigger("loadedplaylist")}addEventStreamToMetadataTrack_(e){if(e&&this.mainPlaylistLoader_.main.eventStream){const t=this.mainPlaylistLoader_.main.eventStream.map(i=>({cueTime:i.start,frames:[{data:i.messageData}]}));this.addMetadataToTextTrack("EventStream",t,this.mainPlaylistLoader_.main.duration)}}getKeyIdSet(e){if(e.contentProtection){const t=new Set;for(const i in e.contentProtection){const s=e.contentProtection[i].attributes["cenc:default_KID"];s&&t.add(s.replace(/-/g,"").toLowerCase())}return t}}}var Zt={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30};const X5=r=>{const e=new Uint8Array(new ArrayBuffer(r.length));for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e.buffer},xw=function(r){return r.on=r.addEventListener,r.off=r.removeEventListener,r},j5=function(r){try{return URL.createObjectURL(new Blob([r],{type:"application/javascript"}))}catch{const t=new BlobBuilder;return t.append(r),URL.createObjectURL(t.getBlob())}},ww=function(r){return function(){const e=j5(r),t=xw(new Worker(e));t.objURL=e;const i=t.terminate;return t.on=t.addEventListener,t.off=t.removeEventListener,t.terminate=function(){return URL.revokeObjectURL(e),i.call(this)},t}},Cw=function(r){return`var browserWorkerPolyFill = ${xw.toString()};
browserWorkerPolyFill(self);
`+r},kw=function(r){return r.toString().replace(/^function.+?{/,"").slice(0,-1)},z5=Cw(kw(function(){var r=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},e=function(){this.init=function(){var d={};this.on=function(p,O){d[p]||(d[p]=[]),d[p]=d[p].concat(O)},this.off=function(p,O){var g;return d[p]?(g=d[p].indexOf(O),d[p]=d[p].slice(),d[p].splice(g,1),g>-1):!1},this.trigger=function(p){var O,g,v,k;if(O=d[p],!!O)if(arguments.length===2)for(v=O.length,g=0;g<v;++g)O[g].call(this,arguments[1]);else{for(k=[],g=arguments.length,g=1;g<arguments.length;++g)k.push(arguments[g]);for(v=O.length,g=0;g<v;++g)O[g].apply(this,k)}},this.dispose=function(){d={}}}};e.prototype.pipe=function(d){return this.on("data",function(p){d.push(p)}),this.on("done",function(p){d.flush(p)}),this.on("partialdone",function(p){d.partialFlush(p)}),this.on("endedtimeline",function(p){d.endTimeline(p)}),this.on("reset",function(p){d.reset(p)}),d},e.prototype.push=function(d){this.trigger("data",d)},e.prototype.flush=function(d){this.trigger("done",d)},e.prototype.partialFlush=function(d){this.trigger("partialdone",d)},e.prototype.endTimeline=function(d){this.trigger("endedtimeline",d)},e.prototype.reset=function(d){this.trigger("reset",d)};var t=e,i=Math.pow(2,32),s=function(d){var p=new DataView(d.buffer,d.byteOffset,d.byteLength),O;return p.getBigUint64?(O=p.getBigUint64(0),O<Number.MAX_SAFE_INTEGER?Number(O):O):p.getUint32(0)*i+p.getUint32(4)},n={getUint64:s,MAX_UINT32:i},a=n.MAX_UINT32,o,l,u,c,h,f,m,S,y,E,C,_,b,T,w,A,I,N,P,R,X,j,Z,Y,te,le,G,re,J,ne,ae,Se,we,Me,Te,dt;(function(){var d;if(Z={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},!(typeof Uint8Array>"u")){for(d in Z)Z.hasOwnProperty(d)&&(Z[d]=[d.charCodeAt(0),d.charCodeAt(1),d.charCodeAt(2),d.charCodeAt(3)]);Y=new Uint8Array([105,115,111,109]),le=new Uint8Array([97,118,99,49]),te=new Uint8Array([0,0,0,1]),G=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),re=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),J={video:G,audio:re},Se=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),ae=new Uint8Array([0,0,0,0,0,0,0,0]),we=new Uint8Array([0,0,0,0,0,0,0,0]),Me=we,Te=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),dt=we,ne=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}})(),o=function(d){var p=[],O=0,g,v,k;for(g=1;g<arguments.length;g++)p.push(arguments[g]);for(g=p.length;g--;)O+=p[g].byteLength;for(v=new Uint8Array(O+8),k=new DataView(v.buffer,v.byteOffset,v.byteLength),k.setUint32(0,v.byteLength),v.set(d,4),g=0,O=8;g<p.length;g++)v.set(p[g],O),O+=p[g].byteLength;return v},l=function(){return o(Z.dinf,o(Z.dref,Se))},u=function(d){return o(Z.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,d.audioobjecttype<<3|d.samplingfrequencyindex>>>1,d.samplingfrequencyindex<<7|d.channelcount<<3,6,1,2]))},c=function(){return o(Z.ftyp,Y,te,Y,le)},A=function(d){return o(Z.hdlr,J[d])},h=function(d){return o(Z.mdat,d)},w=function(d){var p=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,d.duration>>>24&255,d.duration>>>16&255,d.duration>>>8&255,d.duration&255,85,196,0,0]);return d.samplerate&&(p[12]=d.samplerate>>>24&255,p[13]=d.samplerate>>>16&255,p[14]=d.samplerate>>>8&255,p[15]=d.samplerate&255),o(Z.mdhd,p)},T=function(d){return o(Z.mdia,w(d),A(d.type),m(d))},f=function(d){return o(Z.mfhd,new Uint8Array([0,0,0,0,(d&4278190080)>>24,(d&16711680)>>16,(d&65280)>>8,d&255]))},m=function(d){return o(Z.minf,d.type==="video"?o(Z.vmhd,ne):o(Z.smhd,ae),l(),N(d))},S=function(d,p){for(var O=[],g=p.length;g--;)O[g]=R(p[g]);return o.apply(null,[Z.moof,f(d)].concat(O))},y=function(d){for(var p=d.length,O=[];p--;)O[p]=_(d[p]);return o.apply(null,[Z.moov,C(4294967295)].concat(O).concat(E(d)))},E=function(d){for(var p=d.length,O=[];p--;)O[p]=X(d[p]);return o.apply(null,[Z.mvex].concat(O))},C=function(d){var p=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(d&4278190080)>>24,(d&16711680)>>16,(d&65280)>>8,d&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return o(Z.mvhd,p)},I=function(d){var p=d.samples||[],O=new Uint8Array(4+p.length),g,v;for(v=0;v<p.length;v++)g=p[v].flags,O[v+4]=g.dependsOn<<4|g.isDependedOn<<2|g.hasRedundancy;return o(Z.sdtp,O)},N=function(d){return o(Z.stbl,P(d),o(Z.stts,dt),o(Z.stsc,Me),o(Z.stsz,Te),o(Z.stco,we))},(function(){var d,p;P=function(O){return o(Z.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),O.type==="video"?d(O):p(O))},d=function(O){var g=O.sps||[],v=O.pps||[],k=[],Q=[],$,F;for($=0;$<g.length;$++)k.push((g[$].byteLength&65280)>>>8),k.push(g[$].byteLength&255),k=k.concat(Array.prototype.slice.call(g[$]));for($=0;$<v.length;$++)Q.push((v[$].byteLength&65280)>>>8),Q.push(v[$].byteLength&255),Q=Q.concat(Array.prototype.slice.call(v[$]));if(F=[Z.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(O.width&65280)>>8,O.width&255,(O.height&65280)>>8,O.height&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),o(Z.avcC,new Uint8Array([1,O.profileIdc,O.profileCompatibility,O.levelIdc,255].concat([g.length],k,[v.length],Q))),o(Z.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],O.sarRatio){var V=O.sarRatio[0],z=O.sarRatio[1];F.push(o(Z.pasp,new Uint8Array([(V&4278190080)>>24,(V&16711680)>>16,(V&65280)>>8,V&255,(z&4278190080)>>24,(z&16711680)>>16,(z&65280)>>8,z&255])))}return o.apply(null,F)},p=function(O){return o(Z.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(O.channelcount&65280)>>8,O.channelcount&255,(O.samplesize&65280)>>8,O.samplesize&255,0,0,0,0,(O.samplerate&65280)>>8,O.samplerate&255,0,0]),u(O))}})(),b=function(d){var p=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(d.id&4278190080)>>24,(d.id&16711680)>>16,(d.id&65280)>>8,d.id&255,0,0,0,0,(d.duration&4278190080)>>24,(d.duration&16711680)>>16,(d.duration&65280)>>8,d.duration&255,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(d.width&65280)>>8,d.width&255,0,0,(d.height&65280)>>8,d.height&255,0,0]);return o(Z.tkhd,p)},R=function(d){var p,O,g,v,k,Q,$;return p=o(Z.tfhd,new Uint8Array([0,0,0,58,(d.id&4278190080)>>24,(d.id&16711680)>>16,(d.id&65280)>>8,d.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),Q=Math.floor(d.baseMediaDecodeTime/a),$=Math.floor(d.baseMediaDecodeTime%a),O=o(Z.tfdt,new Uint8Array([1,0,0,0,Q>>>24&255,Q>>>16&255,Q>>>8&255,Q&255,$>>>24&255,$>>>16&255,$>>>8&255,$&255])),k=92,d.type==="audio"?(g=j(d,k),o(Z.traf,p,O,g)):(v=I(d),g=j(d,v.length+k),o(Z.traf,p,O,g,v))},_=function(d){return d.duration=d.duration||4294967295,o(Z.trak,b(d),T(d))},X=function(d){var p=new Uint8Array([0,0,0,0,(d.id&4278190080)>>24,(d.id&16711680)>>16,(d.id&65280)>>8,d.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return d.type!=="video"&&(p[p.length-1]=0),o(Z.trex,p)},(function(){var d,p,O;O=function(g,v){var k=0,Q=0,$=0,F=0;return g.length&&(g[0].duration!==void 0&&(k=1),g[0].size!==void 0&&(Q=2),g[0].flags!==void 0&&($=4),g[0].compositionTimeOffset!==void 0&&(F=8)),[0,0,k|Q|$|F,1,(g.length&4278190080)>>>24,(g.length&16711680)>>>16,(g.length&65280)>>>8,g.length&255,(v&4278190080)>>>24,(v&16711680)>>>16,(v&65280)>>>8,v&255]},p=function(g,v){var k,Q,$,F,V,z;for(F=g.samples||[],v+=20+16*F.length,$=O(F,v),Q=new Uint8Array($.length+F.length*16),Q.set($),k=$.length,z=0;z<F.length;z++)V=F[z],Q[k++]=(V.duration&4278190080)>>>24,Q[k++]=(V.duration&16711680)>>>16,Q[k++]=(V.duration&65280)>>>8,Q[k++]=V.duration&255,Q[k++]=(V.size&4278190080)>>>24,Q[k++]=(V.size&16711680)>>>16,Q[k++]=(V.size&65280)>>>8,Q[k++]=V.size&255,Q[k++]=V.flags.isLeading<<2|V.flags.dependsOn,Q[k++]=V.flags.isDependedOn<<6|V.flags.hasRedundancy<<4|V.flags.paddingValue<<1|V.flags.isNonSyncSample,Q[k++]=V.flags.degradationPriority&61440,Q[k++]=V.flags.degradationPriority&15,Q[k++]=(V.compositionTimeOffset&4278190080)>>>24,Q[k++]=(V.compositionTimeOffset&16711680)>>>16,Q[k++]=(V.compositionTimeOffset&65280)>>>8,Q[k++]=V.compositionTimeOffset&255;return o(Z.trun,Q)},d=function(g,v){var k,Q,$,F,V,z;for(F=g.samples||[],v+=20+8*F.length,$=O(F,v),k=new Uint8Array($.length+F.length*8),k.set($),Q=$.length,z=0;z<F.length;z++)V=F[z],k[Q++]=(V.duration&4278190080)>>>24,k[Q++]=(V.duration&16711680)>>>16,k[Q++]=(V.duration&65280)>>>8,k[Q++]=V.duration&255,k[Q++]=(V.size&4278190080)>>>24,k[Q++]=(V.size&16711680)>>>16,k[Q++]=(V.size&65280)>>>8,k[Q++]=V.size&255;return o(Z.trun,k)},j=function(g,v){return g.type==="audio"?d(g,v):p(g,v)}})();var bt={ftyp:c,mdat:h,moof:S,moov:y,initSegment:function(d){var p=c(),O=y(d),g;return g=new Uint8Array(p.byteLength+O.byteLength),g.set(p),g.set(O,p.byteLength),g}},rt=function(d){var p,O,g=[],v=[];for(v.byteLength=0,v.nalCount=0,v.duration=0,g.byteLength=0,p=0;p<d.length;p++)O=d[p],O.nalUnitType==="access_unit_delimiter_rbsp"?(g.length&&(g.duration=O.dts-g.dts,v.byteLength+=g.byteLength,v.nalCount+=g.length,v.duration+=g.duration,v.push(g)),g=[O],g.byteLength=O.data.byteLength,g.pts=O.pts,g.dts=O.dts):(O.nalUnitType==="slice_layer_without_partitioning_rbsp_idr"&&(g.keyFrame=!0),g.duration=O.dts-g.dts,g.byteLength+=O.data.byteLength,g.push(O));return v.length&&(!g.duration||g.duration<=0)&&(g.duration=v[v.length-1].duration),v.byteLength+=g.byteLength,v.nalCount+=g.length,v.duration+=g.duration,v.push(g),v},At=function(d){var p,O,g=[],v=[];for(g.byteLength=0,g.nalCount=0,g.duration=0,g.pts=d[0].pts,g.dts=d[0].dts,v.byteLength=0,v.nalCount=0,v.duration=0,v.pts=d[0].pts,v.dts=d[0].dts,p=0;p<d.length;p++)O=d[p],O.keyFrame?(g.length&&(v.push(g),v.byteLength+=g.byteLength,v.nalCount+=g.nalCount,v.duration+=g.duration),g=[O],g.nalCount=O.length,g.byteLength=O.byteLength,g.pts=O.pts,g.dts=O.dts,g.duration=O.duration):(g.duration+=O.duration,g.nalCount+=O.length,g.byteLength+=O.byteLength,g.push(O));return v.length&&g.duration<=0&&(g.duration=v[v.length-1].duration),v.byteLength+=g.byteLength,v.nalCount+=g.nalCount,v.duration+=g.duration,v.push(g),v},xi=function(d){var p;return!d[0][0].keyFrame&&d.length>1&&(p=d.shift(),d.byteLength-=p.byteLength,d.nalCount-=p.nalCount,d[0][0].dts=p.dts,d[0][0].pts=p.pts,d[0][0].duration+=p.duration),d},Qt=function(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}}},$t=function(d,p){var O=Qt();return O.dataOffset=p,O.compositionTimeOffset=d.pts-d.dts,O.duration=d.duration,O.size=4*d.length,O.size+=d.byteLength,d.keyFrame&&(O.flags.dependsOn=2,O.flags.isNonSyncSample=0),O},Dr=function(d,p){var O,g,v,k,Q,$=p||0,F=[];for(O=0;O<d.length;O++)for(k=d[O],g=0;g<k.length;g++)Q=k[g],v=$t(Q,$),$+=v.size,F.push(v);return F},Bt=function(d){var p,O,g,v,k,Q,$=0,F=d.byteLength,V=d.nalCount,z=F+4*V,K=new Uint8Array(z),fe=new DataView(K.buffer);for(p=0;p<d.length;p++)for(v=d[p],O=0;O<v.length;O++)for(k=v[O],g=0;g<k.length;g++)Q=k[g],fe.setUint32($,Q.data.byteLength),$+=4,K.set(Q.data,$),$+=Q.data.byteLength;return K},gr=function(d,p){var O,g=p||0,v=[];return O=$t(d,g),v.push(O),v},Pt=function(d){var p,O,g=0,v=d.byteLength,k=d.length,Q=v+4*k,$=new Uint8Array(Q),F=new DataView($.buffer);for(p=0;p<d.length;p++)O=d[p],F.setUint32(g,O.data.byteLength),g+=4,$.set(O.data,g),g+=O.data.byteLength;return $},as={groupNalsIntoFrames:rt,groupFramesIntoGops:At,extendFirstKeyFrame:xi,generateSampleTable:Dr,concatenateNalData:Bt,generateSampleTableForFrame:gr,concatenateNalDataForFrame:Pt},ni=[33,16,5,32,164,27],Kt=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],Ue=function(d){for(var p=[];d--;)p.push(0);return p},ot=function(d){return Object.keys(d).reduce(function(p,O){return p[O]=new Uint8Array(d[O].reduce(function(g,v){return g.concat(v)},[])),p},{})},lt,Yi=function(){if(!lt){var d={96e3:[ni,[227,64],Ue(154),[56]],88200:[ni,[231],Ue(170),[56]],64e3:[ni,[248,192],Ue(240),[56]],48e3:[ni,[255,192],Ue(268),[55,148,128],Ue(54),[112]],44100:[ni,[255,192],Ue(268),[55,163,128],Ue(84),[112]],32e3:[ni,[255,192],Ue(268),[55,234],Ue(226),[112]],24e3:[ni,[255,192],Ue(268),[55,255,128],Ue(268),[111,112],Ue(126),[224]],16e3:[ni,[255,192],Ue(268),[55,255,128],Ue(268),[111,255],Ue(269),[223,108],Ue(195),[1,192]],12e3:[Kt,Ue(268),[3,127,248],Ue(268),[6,255,240],Ue(268),[13,255,224],Ue(268),[27,253,128],Ue(259),[56]],11025:[Kt,Ue(268),[3,127,248],Ue(268),[6,255,240],Ue(268),[13,255,224],Ue(268),[27,255,192],Ue(268),[55,175,128],Ue(108),[112]],8e3:[Kt,Ue(268),[3,121,16],Ue(47),[7]]};lt=ot(d)}return lt},Gi=9e4,Ki,os,Or,Mr,Ls,mn,Qs;Ki=function(d){return d*Gi},os=function(d,p){return d*p},Or=function(d){return d/Gi},Mr=function(d,p){return d/p},Ls=function(d,p){return Ki(Mr(d,p))},mn=function(d,p){return os(Or(d),p)},Qs=function(d,p,O){return Or(O?d:d-p)};var Ze={ONE_SECOND_IN_TS:Gi,secondsToVideoTs:Ki,secondsToAudioTs:os,videoTsToSeconds:Or,audioTsToSeconds:Mr,audioTsToVideoTs:Ls,videoTsToAudioTs:mn,metadataTsToSeconds:Qs},gn=Yi,ls=Ze,st=function(d){var p,O,g=0;for(p=0;p<d.length;p++)O=d[p],g+=O.data.byteLength;return g},$s=function(d,p,O,g){var v,k=0,Q=0,$=0,F=0,V,z,K;if(p.length&&(v=ls.audioTsToVideoTs(d.baseMediaDecodeTime,d.samplerate),k=Math.ceil(ls.ONE_SECOND_IN_TS/(d.samplerate/1024)),O&&g&&(Q=v-Math.max(O,g),$=Math.floor(Q/k),F=$*k),!($<1||F>ls.ONE_SECOND_IN_TS/2))){for(V=gn()[d.samplerate],V||(V=p[0].data),z=0;z<$;z++)K=p[0],p.splice(0,0,{data:V,dts:K.dts-k,pts:K.pts-k});return d.baseMediaDecodeTime-=Math.floor(ls.videoTsToAudioTs(F,d.samplerate)),F}},us=function(d,p,O){return p.minSegmentDts>=O?d:(p.minSegmentDts=1/0,d.filter(function(g){return g.dts>=O?(p.minSegmentDts=Math.min(p.minSegmentDts,g.dts),p.minSegmentPts=p.minSegmentDts,!0):!1}))},Ir=function(d){var p,O,g=[];for(p=0;p<d.length;p++)O=d[p],g.push({size:O.data.byteLength,duration:1024});return g},cs=function(d){var p,O,g=0,v=new Uint8Array(st(d));for(p=0;p<d.length;p++)O=d[p],v.set(O.data,g),g+=O.data.byteLength;return v},hs={prefixWithSilence:$s,trimAdtsFramesByEarliestDts:us,generateSampleTable:Ir,concatenateFrameData:cs},wi=Ze.ONE_SECOND_IN_TS,M=function(d,p){typeof p.pts=="number"&&(d.timelineStartInfo.pts===void 0&&(d.timelineStartInfo.pts=p.pts),d.minSegmentPts===void 0?d.minSegmentPts=p.pts:d.minSegmentPts=Math.min(d.minSegmentPts,p.pts),d.maxSegmentPts===void 0?d.maxSegmentPts=p.pts:d.maxSegmentPts=Math.max(d.maxSegmentPts,p.pts)),typeof p.dts=="number"&&(d.timelineStartInfo.dts===void 0&&(d.timelineStartInfo.dts=p.dts),d.minSegmentDts===void 0?d.minSegmentDts=p.dts:d.minSegmentDts=Math.min(d.minSegmentDts,p.dts),d.maxSegmentDts===void 0?d.maxSegmentDts=p.dts:d.maxSegmentDts=Math.max(d.maxSegmentDts,p.dts))},L=function(d){delete d.minSegmentDts,delete d.maxSegmentDts,delete d.minSegmentPts,delete d.maxSegmentPts},x=function(d,p){var O,g,v=d.minSegmentDts;return p||(v-=d.timelineStartInfo.dts),O=d.timelineStartInfo.baseMediaDecodeTime,O+=v,O=Math.max(0,O),d.type==="audio"&&(g=d.samplerate/wi,O*=g,O=Math.floor(O)),O},D={clearDtsInfo:L,calculateTrackBaseMediaDecodeTime:x,collectDtsInfo:M},B=4,W=128,oe=function(d){for(var p=0,O={payloadType:-1,payloadSize:0},g=0,v=0;p<d.byteLength&&d[p]!==W;){for(;d[p]===255;)g+=255,p++;for(g+=d[p++];d[p]===255;)v+=255,p++;if(v+=d[p++],!O.payload&&g===B){var k=String.fromCharCode(d[p+3],d[p+4],d[p+5],d[p+6]);if(k==="GA94"){O.payloadType=g,O.payloadSize=v,O.payload=d.subarray(p,p+v);break}else O.payload=void 0}p+=v,g=0,v=0}return O},de=function(d){return d.payload[0]!==181||(d.payload[1]<<8|d.payload[2])!==49||String.fromCharCode(d.payload[3],d.payload[4],d.payload[5],d.payload[6])!=="GA94"||d.payload[7]!==3?null:d.payload.subarray(8,d.payload.length-1)},Ce=function(d,p){var O=[],g,v,k,Q;if(!(p[0]&64))return O;for(v=p[0]&31,g=0;g<v;g++)k=g*3,Q={type:p[k+2]&3,pts:d},p[k+2]&4&&(Q.ccData=p[k+3]<<8|p[k+4],O.push(Q));return O},ye=function(d){for(var p=d.byteLength,O=[],g=1,v,k;g<p-2;)d[g]===0&&d[g+1]===0&&d[g+2]===3?(O.push(g+2),g+=2):g++;if(O.length===0)return d;v=p-O.length,k=new Uint8Array(v);var Q=0;for(g=0;g<v;Q++,g++)Q===O[0]&&(Q++,O.shift()),k[g]=d[Q];return k},Pe={parseSei:oe,parseUserData:de,parseCaptionPackets:Ce,discardEmulationPreventionBytes:ye,USER_DATA_REGISTERED_ITU_T_T35:B},ge=t,_e=Pe,Ie=function(d){d=d||{},Ie.prototype.init.call(this),this.parse708captions_=typeof d.parse708captions=="boolean"?d.parse708captions:!0,this.captionPackets_=[],this.ccStreams_=[new ft(0,0),new ft(0,1),new ft(1,0),new ft(1,1)],this.parse708captions_&&(this.cc708Stream_=new Ve({captionServices:d.captionServices})),this.reset(),this.ccStreams_.forEach(function(p){p.on("data",this.trigger.bind(this,"data")),p.on("partialdone",this.trigger.bind(this,"partialdone")),p.on("done",this.trigger.bind(this,"done"))},this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};Ie.prototype=new ge,Ie.prototype.push=function(d){var p,O,g;if(d.nalUnitType==="sei_rbsp"&&(p=_e.parseSei(d.escapedRBSP),!!p.payload&&p.payloadType===_e.USER_DATA_REGISTERED_ITU_T_T35&&(O=_e.parseUserData(p),!!O))){if(d.dts<this.latestDts_){this.ignoreNextEqualDts_=!0;return}else if(d.dts===this.latestDts_&&this.ignoreNextEqualDts_){this.numSameDts_--,this.numSameDts_||(this.ignoreNextEqualDts_=!1);return}g=_e.parseCaptionPackets(d.pts,O),this.captionPackets_=this.captionPackets_.concat(g),this.latestDts_!==d.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=d.dts}},Ie.prototype.flushCCStreams=function(d){this.ccStreams_.forEach(function(p){return d==="flush"?p.flush():p.partialFlush()},this)},Ie.prototype.flushStream=function(d){if(!this.captionPackets_.length){this.flushCCStreams(d);return}this.captionPackets_.forEach(function(p,O){p.presortIndex=O}),this.captionPackets_.sort(function(p,O){return p.pts===O.pts?p.presortIndex-O.presortIndex:p.pts-O.pts}),this.captionPackets_.forEach(function(p){p.type<2?this.dispatchCea608Packet(p):this.dispatchCea708Packet(p)},this),this.captionPackets_.length=0,this.flushCCStreams(d)},Ie.prototype.flush=function(){return this.flushStream("flush")},Ie.prototype.partialFlush=function(){return this.flushStream("partialFlush")},Ie.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(d){d.reset()})},Ie.prototype.dispatchCea608Packet=function(d){this.setsTextOrXDSActive(d)?this.activeCea608Channel_[d.type]=null:this.setsChannel1Active(d)?this.activeCea608Channel_[d.type]=0:this.setsChannel2Active(d)&&(this.activeCea608Channel_[d.type]=1),this.activeCea608Channel_[d.type]!==null&&this.ccStreams_[(d.type<<1)+this.activeCea608Channel_[d.type]].push(d)},Ie.prototype.setsChannel1Active=function(d){return(d.ccData&30720)===4096},Ie.prototype.setsChannel2Active=function(d){return(d.ccData&30720)===6144},Ie.prototype.setsTextOrXDSActive=function(d){return(d.ccData&28928)===256||(d.ccData&30974)===4138||(d.ccData&30974)===6186},Ie.prototype.dispatchCea708Packet=function(d){this.parse708captions_&&this.cc708Stream_.push(d)};var _t={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},xt=function(d){var p=_t[d]||d;return d&4096&&d===p?"":String.fromCharCode(p)},ai=function(d){return 32<=d&&d<=127||160<=d&&d<=255},We=function(d){this.windowNum=d,this.reset()};We.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},We.prototype.getText=function(){return this.rows.join(`
`)},We.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},We.prototype.newLine=function(d){for(this.rows.length>=this.virtualRowCount&&typeof this.beforeRowOverflow=="function"&&this.beforeRowOverflow(d),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},We.prototype.isEmpty=function(){return this.rows.length===0?!0:this.rows.length===1?this.rows[0]==="":!1},We.prototype.addText=function(d){this.rows[this.rowIdx]+=d},We.prototype.backspace=function(){if(!this.isEmpty()){var d=this.rows[this.rowIdx];this.rows[this.rowIdx]=d.substr(0,d.length-1)}};var ds=function(d,p,O){this.serviceNum=d,this.text="",this.currentWindow=new We(-1),this.windows=[],this.stream=O,typeof p=="string"&&this.createTextDecoder(p)};ds.prototype.init=function(d,p){this.startPts=d;for(var O=0;O<8;O++)this.windows[O]=new We(O),typeof p=="function"&&(this.windows[O].beforeRowOverflow=p)},ds.prototype.setCurrentWindow=function(d){this.currentWindow=this.windows[d]},ds.prototype.createTextDecoder=function(d){if(typeof TextDecoder>"u")this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});else try{this.textDecoder_=new TextDecoder(d)}catch(p){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+d+" encoding. "+p})}};var Ve=function(d){d=d||{},Ve.prototype.init.call(this);var p=this,O=d.captionServices||{},g={},v;Object.keys(O).forEach(k=>{v=O[k],/^SERVICE/.test(k)&&(g[k]=v.encoding)}),this.serviceEncodings=g,this.current708Packet=null,this.services={},this.push=function(k){k.type===3?(p.new708Packet(),p.add708Bytes(k)):(p.current708Packet===null&&p.new708Packet(),p.add708Bytes(k))}};Ve.prototype=new ge,Ve.prototype.new708Packet=function(){this.current708Packet!==null&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},Ve.prototype.add708Bytes=function(d){var p=d.ccData,O=p>>>8,g=p&255;this.current708Packet.ptsVals.push(d.pts),this.current708Packet.data.push(O),this.current708Packet.data.push(g)},Ve.prototype.push708Packet=function(){var d=this.current708Packet,p=d.data,O=null,g=null,v=0,k=p[v++];for(d.seq=k>>6,d.sizeCode=k&63;v<p.length;v++)k=p[v++],O=k>>5,g=k&31,O===7&&g>0&&(k=p[v++],O=k),this.pushServiceBlock(O,v,g),g>0&&(v+=g-1)},Ve.prototype.pushServiceBlock=function(d,p,O){var g,v=p,k=this.current708Packet.data,Q=this.services[d];for(Q||(Q=this.initService(d,v));v<p+O&&v<k.length;v++)g=k[v],ai(g)?v=this.handleText(v,Q):g===24?v=this.multiByteCharacter(v,Q):g===16?v=this.extendedCommands(v,Q):128<=g&&g<=135?v=this.setCurrentWindow(v,Q):152<=g&&g<=159?v=this.defineWindow(v,Q):g===136?v=this.clearWindows(v,Q):g===140?v=this.deleteWindows(v,Q):g===137?v=this.displayWindows(v,Q):g===138?v=this.hideWindows(v,Q):g===139?v=this.toggleWindows(v,Q):g===151?v=this.setWindowAttributes(v,Q):g===144?v=this.setPenAttributes(v,Q):g===145?v=this.setPenColor(v,Q):g===146?v=this.setPenLocation(v,Q):g===143?Q=this.reset(v,Q):g===8?Q.currentWindow.backspace():g===12?Q.currentWindow.clearText():g===13?Q.currentWindow.pendingNewLine=!0:g===14?Q.currentWindow.clearText():g===141&&v++},Ve.prototype.extendedCommands=function(d,p){var O=this.current708Packet.data,g=O[++d];return ai(g)&&(d=this.handleText(d,p,{isExtended:!0})),d},Ve.prototype.getPts=function(d){return this.current708Packet.ptsVals[Math.floor(d/2)]},Ve.prototype.initService=function(d,p){var g="SERVICE"+d,O=this,g,v;return g in this.serviceEncodings&&(v=this.serviceEncodings[g]),this.services[d]=new ds(d,v,O),this.services[d].init(this.getPts(p),function(k){O.flushDisplayed(k,O.services[d])}),this.services[d]},Ve.prototype.handleText=function(d,p,O){var g=O&&O.isExtended,v=O&&O.isMultiByte,k=this.current708Packet.data,Q=g?4096:0,$=k[d],F=k[d+1],V=p.currentWindow,z,K;function fe(se){return se.map(ke=>("0"+(ke&255).toString(16)).slice(-2)).join("")}if(v?(K=[$,F],d++):K=[$],p.textDecoder_&&!g)z=p.textDecoder_.decode(new Uint8Array(K));else if(v){const se=fe(K);z=String.fromCharCode(parseInt(se,16))}else z=xt(Q|$);return V.pendingNewLine&&!V.isEmpty()&&V.newLine(this.getPts(d)),V.pendingNewLine=!1,V.addText(z),d},Ve.prototype.multiByteCharacter=function(d,p){var O=this.current708Packet.data,g=O[d+1],v=O[d+2];return ai(g)&&ai(v)&&(d=this.handleText(++d,p,{isMultiByte:!0})),d},Ve.prototype.setCurrentWindow=function(d,p){var O=this.current708Packet.data,g=O[d],v=g&7;return p.setCurrentWindow(v),d},Ve.prototype.defineWindow=function(d,p){var O=this.current708Packet.data,g=O[d],v=g&7;p.setCurrentWindow(v);var k=p.currentWindow;return g=O[++d],k.visible=(g&32)>>5,k.rowLock=(g&16)>>4,k.columnLock=(g&8)>>3,k.priority=g&7,g=O[++d],k.relativePositioning=(g&128)>>7,k.anchorVertical=g&127,g=O[++d],k.anchorHorizontal=g,g=O[++d],k.anchorPoint=(g&240)>>4,k.rowCount=g&15,g=O[++d],k.columnCount=g&63,g=O[++d],k.windowStyle=(g&56)>>3,k.penStyle=g&7,k.virtualRowCount=k.rowCount+1,d},Ve.prototype.setWindowAttributes=function(d,p){var O=this.current708Packet.data,g=O[d],v=p.currentWindow.winAttr;return g=O[++d],v.fillOpacity=(g&192)>>6,v.fillRed=(g&48)>>4,v.fillGreen=(g&12)>>2,v.fillBlue=g&3,g=O[++d],v.borderType=(g&192)>>6,v.borderRed=(g&48)>>4,v.borderGreen=(g&12)>>2,v.borderBlue=g&3,g=O[++d],v.borderType+=(g&128)>>5,v.wordWrap=(g&64)>>6,v.printDirection=(g&48)>>4,v.scrollDirection=(g&12)>>2,v.justify=g&3,g=O[++d],v.effectSpeed=(g&240)>>4,v.effectDirection=(g&12)>>2,v.displayEffect=g&3,d},Ve.prototype.flushDisplayed=function(d,p){for(var O=[],g=0;g<8;g++)p.windows[g].visible&&!p.windows[g].isEmpty()&&O.push(p.windows[g].getText());p.endPts=d,p.text=O.join(`

`),this.pushCaption(p),p.startPts=d},Ve.prototype.pushCaption=function(d){d.text!==""&&(this.trigger("data",{startPts:d.startPts,endPts:d.endPts,text:d.text,stream:"cc708_"+d.serviceNum}),d.text="",d.startPts=d.endPts)},Ve.prototype.displayWindows=function(d,p){var O=this.current708Packet.data,g=O[++d],v=this.getPts(d);this.flushDisplayed(v,p);for(var k=0;k<8;k++)g&1<<k&&(p.windows[k].visible=1);return d},Ve.prototype.hideWindows=function(d,p){var O=this.current708Packet.data,g=O[++d],v=this.getPts(d);this.flushDisplayed(v,p);for(var k=0;k<8;k++)g&1<<k&&(p.windows[k].visible=0);return d},Ve.prototype.toggleWindows=function(d,p){var O=this.current708Packet.data,g=O[++d],v=this.getPts(d);this.flushDisplayed(v,p);for(var k=0;k<8;k++)g&1<<k&&(p.windows[k].visible^=1);return d},Ve.prototype.clearWindows=function(d,p){var O=this.current708Packet.data,g=O[++d],v=this.getPts(d);this.flushDisplayed(v,p);for(var k=0;k<8;k++)g&1<<k&&p.windows[k].clearText();return d},Ve.prototype.deleteWindows=function(d,p){var O=this.current708Packet.data,g=O[++d],v=this.getPts(d);this.flushDisplayed(v,p);for(var k=0;k<8;k++)g&1<<k&&p.windows[k].reset();return d},Ve.prototype.setPenAttributes=function(d,p){var O=this.current708Packet.data,g=O[d],v=p.currentWindow.penAttr;return g=O[++d],v.textTag=(g&240)>>4,v.offset=(g&12)>>2,v.penSize=g&3,g=O[++d],v.italics=(g&128)>>7,v.underline=(g&64)>>6,v.edgeType=(g&56)>>3,v.fontStyle=g&7,d},Ve.prototype.setPenColor=function(d,p){var O=this.current708Packet.data,g=O[d],v=p.currentWindow.penColor;return g=O[++d],v.fgOpacity=(g&192)>>6,v.fgRed=(g&48)>>4,v.fgGreen=(g&12)>>2,v.fgBlue=g&3,g=O[++d],v.bgOpacity=(g&192)>>6,v.bgRed=(g&48)>>4,v.bgGreen=(g&12)>>2,v.bgBlue=g&3,g=O[++d],v.edgeRed=(g&48)>>4,v.edgeGreen=(g&12)>>2,v.edgeBlue=g&3,d},Ve.prototype.setPenLocation=function(d,p){var O=this.current708Packet.data,g=O[d],v=p.currentWindow.penLoc;return p.currentWindow.pendingNewLine=!0,g=O[++d],v.row=g&15,g=O[++d],v.column=g&63,d},Ve.prototype.reset=function(d,p){var O=this.getPts(d);return this.flushDisplayed(O,p),this.initService(p.serviceNum,d)};var ia={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},ra=function(d){return d===null?"":(d=ia[d]||d,String.fromCharCode(d))},sa=14,df=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],fs=function(){for(var d=[],p=sa+1;p--;)d.push({text:"",indent:0,offset:0});return d},ft=function(d,p){ft.prototype.init.call(this),this.field_=d||0,this.dataChannel_=p||0,this.name_="CC"+((this.field_<<1|this.dataChannel_)+1),this.setConstants(),this.reset(),this.push=function(O){var g,v,k,Q,$;if(g=O.ccData&32639,g===this.lastControlCode_){this.lastControlCode_=null;return}if((g&61440)===4096?this.lastControlCode_=g:g!==this.PADDING_&&(this.lastControlCode_=null),k=g>>>8,Q=g&255,g!==this.PADDING_)if(g===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(g===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(O.pts),this.flushDisplayed(O.pts),v=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=v,this.startPts_=O.pts;else if(g===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(O.pts);else if(g===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(O.pts);else if(g===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(O.pts);else if(g===this.CARRIAGE_RETURN_)this.clearFormatting(O.pts),this.flushDisplayed(O.pts),this.shiftRowsUp_(),this.startPts_=O.pts;else if(g===this.BACKSPACE_)this.mode_==="popOn"?this.nonDisplayed_[this.row_].text=this.nonDisplayed_[this.row_].text.slice(0,-1):this.displayed_[this.row_].text=this.displayed_[this.row_].text.slice(0,-1);else if(g===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(O.pts),this.displayed_=fs();else if(g===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=fs();else if(g===this.RESUME_DIRECT_CAPTIONING_)this.mode_!=="paintOn"&&(this.flushDisplayed(O.pts),this.displayed_=fs()),this.mode_="paintOn",this.startPts_=O.pts;else if(this.isSpecialCharacter(k,Q))k=(k&3)<<8,$=ra(k|Q),this[this.mode_](O.pts,$),this.column_++;else if(this.isExtCharacter(k,Q))this.mode_==="popOn"?this.nonDisplayed_[this.row_].text=this.nonDisplayed_[this.row_].text.slice(0,-1):this.displayed_[this.row_].text=this.displayed_[this.row_].text.slice(0,-1),k=(k&3)<<8,$=ra(k|Q),this[this.mode_](O.pts,$),this.column_++;else if(this.isMidRowCode(k,Q))this.clearFormatting(O.pts),this[this.mode_](O.pts," "),this.column_++,(Q&14)===14&&this.addFormatting(O.pts,["i"]),(Q&1)===1&&this.addFormatting(O.pts,["u"]);else if(this.isOffsetControlCode(k,Q)){const V=Q&3;this.nonDisplayed_[this.row_].offset=V,this.column_+=V}else if(this.isPAC(k,Q)){var F=df.indexOf(g&7968);if(this.mode_==="rollUp"&&(F-this.rollUpRows_+1<0&&(F=this.rollUpRows_-1),this.setRollUp(O.pts,F)),F!==this.row_&&F>=0&&F<=14&&(this.clearFormatting(O.pts),this.row_=F),Q&1&&this.formatting_.indexOf("u")===-1&&this.addFormatting(O.pts,["u"]),(g&16)===16){const V=(g&14)>>1;this.column_=V*4,this.nonDisplayed_[this.row_].indent+=V}this.isColorPAC(Q)&&(Q&14)===14&&this.addFormatting(O.pts,["i"])}else this.isNormalChar(k)&&(Q===0&&(Q=null),$=ra(k),$+=ra(Q),this[this.mode_](O.pts,$),this.column_+=$.length)}};ft.prototype=new ge,ft.prototype.flushDisplayed=function(d){const p=g=>{this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+g+"."})},O=[];this.displayed_.forEach((g,v)=>{if(g&&g.text&&g.text.length){try{g.text=g.text.trim()}catch{p(v)}g.text.length&&O.push({text:g.text,line:v+1,position:10+Math.min(70,g.indent*10)+g.offset*2.5})}else g==null&&p(v)}),O.length&&this.trigger("data",{startPts:this.startPts_,endPts:d,content:O,stream:this.name_})},ft.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=fs(),this.nonDisplayed_=fs(),this.lastControlCode_=null,this.column_=0,this.row_=sa,this.rollUpRows_=2,this.formatting_=[]},ft.prototype.setConstants=function(){this.dataChannel_===0?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):this.dataChannel_===1&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=this.CONTROL_|32,this.END_OF_CAPTION_=this.CONTROL_|47,this.ROLL_UP_2_ROWS_=this.CONTROL_|37,this.ROLL_UP_3_ROWS_=this.CONTROL_|38,this.ROLL_UP_4_ROWS_=this.CONTROL_|39,this.CARRIAGE_RETURN_=this.CONTROL_|45,this.RESUME_DIRECT_CAPTIONING_=this.CONTROL_|41,this.BACKSPACE_=this.CONTROL_|33,this.ERASE_DISPLAYED_MEMORY_=this.CONTROL_|44,this.ERASE_NON_DISPLAYED_MEMORY_=this.CONTROL_|46},ft.prototype.isSpecialCharacter=function(d,p){return d===this.EXT_&&p>=48&&p<=63},ft.prototype.isExtCharacter=function(d,p){return(d===this.EXT_+1||d===this.EXT_+2)&&p>=32&&p<=63},ft.prototype.isMidRowCode=function(d,p){return d===this.EXT_&&p>=32&&p<=47},ft.prototype.isOffsetControlCode=function(d,p){return d===this.OFFSET_&&p>=33&&p<=35},ft.prototype.isPAC=function(d,p){return d>=this.BASE_&&d<this.BASE_+8&&p>=64&&p<=127},ft.prototype.isColorPAC=function(d){return d>=64&&d<=79||d>=96&&d<=127},ft.prototype.isNormalChar=function(d){return d>=32&&d<=127},ft.prototype.setRollUp=function(d,p){if(this.mode_!=="rollUp"&&(this.row_=sa,this.mode_="rollUp",this.flushDisplayed(d),this.nonDisplayed_=fs(),this.displayed_=fs()),p!==void 0&&p!==this.row_)for(var O=0;O<this.rollUpRows_;O++)this.displayed_[p-O]=this.displayed_[this.row_-O],this.displayed_[this.row_-O]={text:"",indent:0,offset:0};p===void 0&&(p=this.row_),this.topRow_=p-this.rollUpRows_+1},ft.prototype.addFormatting=function(d,p){this.formatting_=this.formatting_.concat(p);var O=p.reduce(function(g,v){return g+"<"+v+">"},"");this[this.mode_](d,O)},ft.prototype.clearFormatting=function(d){if(this.formatting_.length){var p=this.formatting_.reverse().reduce(function(O,g){return O+"</"+g+">"},"");this.formatting_=[],this[this.mode_](d,p)}},ft.prototype.popOn=function(d,p){var O=this.nonDisplayed_[this.row_].text;O+=p,this.nonDisplayed_[this.row_].text=O},ft.prototype.rollUp=function(d,p){var O=this.displayed_[this.row_].text;O+=p,this.displayed_[this.row_].text=O},ft.prototype.shiftRowsUp_=function(){var d;for(d=0;d<this.topRow_;d++)this.displayed_[d]={text:"",indent:0,offset:0};for(d=this.row_+1;d<sa+1;d++)this.displayed_[d]={text:"",indent:0,offset:0};for(d=this.topRow_;d<this.row_;d++)this.displayed_[d]=this.displayed_[d+1];this.displayed_[this.row_]={text:"",indent:0,offset:0}},ft.prototype.paintOn=function(d,p){var O=this.displayed_[this.row_].text;O+=p,this.displayed_[this.row_].text=O};var Yu={CaptionStream:Ie,Cea608Stream:ft,Cea708Stream:Ve},na={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},gA=t,OA=8589934592,yA=4294967296,NO="shared",ff=function(d,p){var O=1;for(d>p&&(O=-1);Math.abs(p-d)>yA;)d+=O*OA;return d},pf=function(d){var p,O;pf.prototype.init.call(this),this.type_=d||NO,this.push=function(g){if(g.type==="metadata"){this.trigger("data",g);return}this.type_!==NO&&g.type!==this.type_||(O===void 0&&(O=g.dts),g.dts=ff(g.dts,O),g.pts=ff(g.pts,O),p=g.dts,this.trigger("data",g))},this.flush=function(){O=p,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){O=void 0,p=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};pf.prototype=new gA;var FO={TimestampRolloverStream:pf,handleRollover:ff},bA=(d,p,O)=>{if(!d)return-1;for(var g=O;g<d.length;g++)if(d[g]===p)return g;return-1},vA={typedArrayIndexOf:bA},Gu=vA.typedArrayIndexOf,Ku={Utf8:3},UO=function(d,p,O){var g,v="";for(g=p;g<O;g++)v+="%"+("00"+d[g].toString(16)).slice(-2);return v},Io=function(d,p,O){return decodeURIComponent(UO(d,p,O))},Ro=function(d,p,O){return unescape(UO(d,p,O))},Lo=function(d){return d[0]<<21|d[1]<<14|d[2]<<7|d[3]},Qo={APIC:function(d){var p=1,O,g,v="-->";d.data[0]===Ku.Utf8&&(O=Gu(d.data,0,p),!(O<0)&&(d.mimeType=Ro(d.data,p,O),p=O+1,d.pictureType=d.data[p],p++,g=Gu(d.data,0,p),!(g<0)&&(d.description=Io(d.data,p,g),p=g+1,d.mimeType===v?d.url=Ro(d.data,p,d.data.length):d.pictureData=d.data.subarray(p,d.data.length))))},"T*":function(d){d.data[0]===Ku.Utf8&&(d.value=Io(d.data,1,d.data.length).replace(/\0*$/,""),d.values=d.value.split("\0"))},TXXX:function(d){var p;d.data[0]===Ku.Utf8&&(p=Gu(d.data,0,1),p!==-1&&(d.description=Io(d.data,1,p),d.value=Io(d.data,p+1,d.data.length).replace(/\0*$/,""),d.data=d.value))},"W*":function(d){d.url=Ro(d.data,0,d.data.length).replace(/\0.*$/,"")},WXXX:function(d){var p;d.data[0]===Ku.Utf8&&(p=Gu(d.data,0,1),p!==-1&&(d.description=Io(d.data,1,p),d.url=Ro(d.data,p+1,d.data.length).replace(/\0.*$/,"")))},PRIV:function(d){var p;for(p=0;p<d.data.length;p++)if(d.data[p]===0){d.owner=Ro(d.data,0,p);break}d.privateData=d.data.subarray(p+1),d.data=d.privateData}},SA=function(d){var p,O,g=10,v=0,k=[];if(!(d.length<10||d[0]!==73||d[1]!==68||d[2]!==51)){v=Lo(d.subarray(6,10)),v+=10;var Q=d[5]&64;Q&&(g+=4,g+=Lo(d.subarray(10,14)),v-=Lo(d.subarray(16,20)));do{if(p=Lo(d.subarray(g+4,g+8)),p<1)break;O=String.fromCharCode(d[g],d[g+1],d[g+2],d[g+3]);var $={id:O,data:d.subarray(g+10,g+p+10)};$.key=$.id,Qo[$.id]?Qo[$.id]($):$.id[0]==="T"?Qo["T*"]($):$.id[0]==="W"&&Qo["W*"]($),k.push($),g+=10,g+=p}while(g<v);return k}},qO={parseId3Frames:SA,parseSyncSafeInteger:Lo,frameParsers:Qo},TA=t,_A=na,Bs=qO,Ju;Ju=function(d){var p={descriptor:d&&d.descriptor},O=0,g=[],v=0,k;if(Ju.prototype.init.call(this),this.dispatchType=_A.METADATA_STREAM_TYPE.toString(16),p.descriptor)for(k=0;k<p.descriptor.length;k++)this.dispatchType+=("00"+p.descriptor[k].toString(16)).slice(-2);this.push=function(Q){var $,F,V,z,K,fe;if(Q.type==="timed-metadata"){if(Q.dataAlignmentIndicator&&(v=0,g.length=0),g.length===0&&(Q.data.length<10||Q.data[0]!==73||Q.data[1]!==68||Q.data[2]!==51)){this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});return}if(g.push(Q),v+=Q.data.byteLength,g.length===1&&(O=Bs.parseSyncSafeInteger(Q.data.subarray(6,10)),O+=10),!(v<O)){for($={data:new Uint8Array(O),frames:[],pts:g[0].pts,dts:g[0].dts},K=0;K<O;)$.data.set(g[0].data.subarray(0,O-K),K),K+=g[0].data.byteLength,v-=g[0].data.byteLength,g.shift();F=10,$.data[5]&64&&(F+=4,F+=Bs.parseSyncSafeInteger($.data.subarray(10,14)),O-=Bs.parseSyncSafeInteger($.data.subarray(16,20)));do{if(V=Bs.parseSyncSafeInteger($.data.subarray(F+4,F+8)),V<1){this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping remaining metadata parsing."});break}if(fe=String.fromCharCode($.data[F],$.data[F+1],$.data[F+2],$.data[F+3]),z={id:fe,data:$.data.subarray(F+10,F+V+10)},z.key=z.id,Bs.frameParsers[z.id]?Bs.frameParsers[z.id](z):z.id[0]==="T"?Bs.frameParsers["T*"](z):z.id[0]==="W"&&Bs.frameParsers["W*"](z),z.owner==="com.apple.streaming.transportStreamTimestamp"){var se=z.data,ke=(se[3]&1)<<30|se[4]<<22|se[5]<<14|se[6]<<6|se[7]>>>2;ke*=4,ke+=se[7]&3,z.timeStamp=ke,$.pts===void 0&&$.dts===void 0&&($.pts=z.timeStamp,$.dts=z.timeStamp),this.trigger("timestamp",z)}$.frames.push(z),F+=10,F+=V}while(F<O);this.trigger("data",$)}}}},Ju.prototype=new TA;var xA=Ju,mf=t,gf=Yu,yr=na,wA=FO.TimestampRolloverStream,ec,$o,tc,aa=188,Of=71;ec=function(){var d=new Uint8Array(aa),p=0;ec.prototype.init.call(this),this.push=function(O){var g=0,v=aa,k;for(p?(k=new Uint8Array(O.byteLength+p),k.set(d.subarray(0,p)),k.set(O,p),p=0):k=O;v<k.byteLength;){if(k[g]===Of&&k[v]===Of){this.trigger("data",k.subarray(g,v)),g+=aa,v+=aa;continue}g++,v++}g<k.byteLength&&(d.set(k.subarray(g),0),p=k.byteLength-g)},this.flush=function(){p===aa&&d[0]===Of&&(this.trigger("data",d),p=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){p=0,this.trigger("reset")}},ec.prototype=new mf,$o=function(){var d,p,O,g;$o.prototype.init.call(this),g=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,d=function(v,k){var Q=0;k.payloadUnitStartIndicator&&(Q+=v[Q]+1),k.type==="pat"?p(v.subarray(Q),k):O(v.subarray(Q),k)},p=function(v,k){k.section_number=v[7],k.last_section_number=v[8],g.pmtPid=(v[10]&31)<<8|v[11],k.pmtPid=g.pmtPid},O=function(v,k){var Q,$,F,V;if(v[5]&1){for(g.programMapTable={video:null,audio:null,"timed-metadata":{}},Q=(v[1]&15)<<8|v[2],$=3+Q-4,F=(v[10]&15)<<8|v[11],V=12+F;V<$;){var z=v[V],K=(v[V+1]&31)<<8|v[V+2];z===yr.H264_STREAM_TYPE&&g.programMapTable.video===null?g.programMapTable.video=K:z===yr.ADTS_STREAM_TYPE&&g.programMapTable.audio===null?g.programMapTable.audio=K:z===yr.METADATA_STREAM_TYPE&&(g.programMapTable["timed-metadata"][K]=z),V+=((v[V+3]&15)<<8|v[V+4])+5}k.programMapTable=g.programMapTable}},this.push=function(v){var k={},Q=4;if(k.payloadUnitStartIndicator=!!(v[1]&64),k.pid=v[1]&31,k.pid<<=8,k.pid|=v[2],(v[3]&48)>>>4>1&&(Q+=v[Q]+1),k.pid===0)k.type="pat",d(v.subarray(Q),k),this.trigger("data",k);else if(k.pid===this.pmtPid)for(k.type="pmt",d(v.subarray(Q),k),this.trigger("data",k);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else this.programMapTable===void 0?this.packetsWaitingForPmt.push([v,Q,k]):this.processPes_(v,Q,k)},this.processPes_=function(v,k,Q){Q.pid===this.programMapTable.video?Q.streamType=yr.H264_STREAM_TYPE:Q.pid===this.programMapTable.audio?Q.streamType=yr.ADTS_STREAM_TYPE:Q.streamType=this.programMapTable["timed-metadata"][Q.pid],Q.type="pes",Q.data=v.subarray(k),this.trigger("data",Q)}},$o.prototype=new mf,$o.STREAM_TYPES={h264:27,adts:15},tc=function(){var d=this,p=!1,O={data:[],size:0},g={data:[],size:0},v={data:[],size:0},k,Q=function(F,V){var z;const K=F[0]<<16|F[1]<<8|F[2];V.data=new Uint8Array,K===1&&(V.packetLength=6+(F[4]<<8|F[5]),V.dataAlignmentIndicator=(F[6]&4)!==0,z=F[7],z&192&&(V.pts=(F[9]&14)<<27|(F[10]&255)<<20|(F[11]&254)<<12|(F[12]&255)<<5|(F[13]&254)>>>3,V.pts*=4,V.pts+=(F[13]&6)>>>1,V.dts=V.pts,z&64&&(V.dts=(F[14]&14)<<27|(F[15]&255)<<20|(F[16]&254)<<12|(F[17]&255)<<5|(F[18]&254)>>>3,V.dts*=4,V.dts+=(F[18]&6)>>>1)),V.data=F.subarray(9+F[8]))},$=function(F,V,z){var K=new Uint8Array(F.size),fe={type:V},se=0,ke=0,Fe=!1,jt;if(!(!F.data.length||F.size<9)){for(fe.trackId=F.data[0].pid,se=0;se<F.data.length;se++)jt=F.data[se],K.set(jt.data,ke),ke+=jt.data.byteLength;Q(K,fe),Fe=V==="video"||fe.packetLength<=F.size,(z||Fe)&&(F.size=0,F.data.length=0),Fe&&d.trigger("data",fe)}};tc.prototype.init.call(this),this.push=function(F){({pat:function(){},pes:function(){var V,z;switch(F.streamType){case yr.H264_STREAM_TYPE:V=O,z="video";break;case yr.ADTS_STREAM_TYPE:V=g,z="audio";break;case yr.METADATA_STREAM_TYPE:V=v,z="timed-metadata";break;default:return}F.payloadUnitStartIndicator&&$(V,z,!0),V.data.push(F),V.size+=F.data.byteLength},pmt:function(){var V={type:"metadata",tracks:[]};k=F.programMapTable,k.video!==null&&V.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+k.video,codec:"avc",type:"video"}),k.audio!==null&&V.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+k.audio,codec:"adts",type:"audio"}),p=!0,d.trigger("data",V)}})[F.type]()},this.reset=function(){O.size=0,O.data.length=0,g.size=0,g.data.length=0,this.trigger("reset")},this.flushStreams_=function(){$(O,"video"),$(g,"audio"),$(v,"timed-metadata")},this.flush=function(){if(!p&&k){var F={type:"metadata",tracks:[]};k.video!==null&&F.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+k.video,codec:"avc",type:"video"}),k.audio!==null&&F.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+k.audio,codec:"adts",type:"audio"}),d.trigger("data",F)}p=!1,this.flushStreams_(),this.trigger("done")}},tc.prototype=new mf;var VO={PAT_PID:0,MP2T_PACKET_LENGTH:aa,TransportPacketStream:ec,TransportParseStream:$o,ElementaryStream:tc,TimestampRolloverStream:wA,CaptionStream:gf.CaptionStream,Cea608Stream:gf.Cea608Stream,Cea708Stream:gf.Cea708Stream,MetadataStream:xA};for(var yf in yr)yr.hasOwnProperty(yf)&&(VO[yf]=yr[yf]);var CA=VO,kA=t,EA=Ze.ONE_SECOND_IN_TS,ic,XO=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];ic=function(d){var p,O=0;ic.prototype.init.call(this),this.skipWarn_=function(g,v){this.trigger("log",{level:"warn",message:`adts skiping bytes ${g} to ${v} in frame ${O} outside syncword`})},this.push=function(g){var v=0,k,Q,$,F,V;if(d||(O=0),g.type==="audio"){p&&p.length?($=p,p=new Uint8Array($.byteLength+g.data.byteLength),p.set($),p.set(g.data,$.byteLength)):p=g.data;for(var z;v+7<p.length;){if(p[v]!==255||(p[v+1]&246)!==240){typeof z!="number"&&(z=v),v++;continue}if(typeof z=="number"&&(this.skipWarn_(z,v),z=null),Q=(~p[v+1]&1)*2,k=(p[v+3]&3)<<11|p[v+4]<<3|(p[v+5]&224)>>5,F=((p[v+6]&3)+1)*1024,V=F*EA/XO[(p[v+2]&60)>>>2],p.byteLength-v<k)break;this.trigger("data",{pts:g.pts+O*V,dts:g.dts+O*V,sampleCount:F,audioobjecttype:(p[v+2]>>>6&3)+1,channelcount:(p[v+2]&1)<<2|(p[v+3]&192)>>>6,samplerate:XO[(p[v+2]&60)>>>2],samplingfrequencyindex:(p[v+2]&60)>>>2,samplesize:16,data:p.subarray(v+7+Q,v+k)}),O++,v+=k}typeof z=="number"&&(this.skipWarn_(z,v),z=null),p=p.subarray(v)}},this.flush=function(){O=0,this.trigger("done")},this.reset=function(){p=void 0,this.trigger("reset")},this.endTimeline=function(){p=void 0,this.trigger("endedtimeline")}},ic.prototype=new kA;var AA=ic,jO;jO=function(d){var p=d.byteLength,O=0,g=0;this.length=function(){return 8*p},this.bitsAvailable=function(){return 8*p+g},this.loadWord=function(){var v=d.byteLength-p,k=new Uint8Array(4),Q=Math.min(4,p);if(Q===0)throw new Error("no bytes available");k.set(d.subarray(v,v+Q)),O=new DataView(k.buffer).getUint32(0),g=Q*8,p-=Q},this.skipBits=function(v){var k;g>v?(O<<=v,g-=v):(v-=g,k=Math.floor(v/8),v-=k*8,p-=k,this.loadWord(),O<<=v,g-=v)},this.readBits=function(v){var k=Math.min(g,v),Q=O>>>32-k;return g-=k,g>0?O<<=k:p>0&&this.loadWord(),k=v-k,k>0?Q<<k|this.readBits(k):Q},this.skipLeadingZeros=function(){var v;for(v=0;v<g;++v)if((O&2147483648>>>v)!==0)return O<<=v,g-=v,v;return this.loadWord(),v+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var v=this.skipLeadingZeros();return this.readBits(v+1)-1},this.readExpGolomb=function(){var v=this.readUnsignedExpGolomb();return 1&v?1+v>>>1:-1*(v>>>1)},this.readBoolean=function(){return this.readBits(1)===1},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};var PA=jO,zO=t,DA=PA,rc,sc,ZO;sc=function(){var d=0,p,O;sc.prototype.init.call(this),this.push=function(g){var v;O?(v=new Uint8Array(O.byteLength+g.data.byteLength),v.set(O),v.set(g.data,O.byteLength),O=v):O=g.data;for(var k=O.byteLength;d<k-3;d++)if(O[d+2]===1){p=d+5;break}for(;p<k;)switch(O[p]){case 0:if(O[p-1]!==0){p+=2;break}else if(O[p-2]!==0){p++;break}d+3!==p-2&&this.trigger("data",O.subarray(d+3,p-2));do p++;while(O[p]!==1&&p<k);d=p-2,p+=3;break;case 1:if(O[p-1]!==0||O[p-2]!==0){p+=3;break}this.trigger("data",O.subarray(d+3,p-2)),d=p-2,p+=3;break;default:p+=3;break}O=O.subarray(d),p-=d,d=0},this.reset=function(){O=null,d=0,this.trigger("reset")},this.flush=function(){O&&O.byteLength>3&&this.trigger("data",O.subarray(d+3)),O=null,d=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}},sc.prototype=new zO,ZO={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},rc=function(){var d=new sc,p,O,g,v,k,Q,$;rc.prototype.init.call(this),p=this,this.push=function(F){F.type==="video"&&(O=F.trackId,g=F.pts,v=F.dts,d.push(F))},d.on("data",function(F){var V={trackId:O,pts:g,dts:v,data:F,nalUnitTypeCode:F[0]&31};switch(V.nalUnitTypeCode){case 5:V.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:V.nalUnitType="sei_rbsp",V.escapedRBSP=k(F.subarray(1));break;case 7:V.nalUnitType="seq_parameter_set_rbsp",V.escapedRBSP=k(F.subarray(1)),V.config=Q(V.escapedRBSP);break;case 8:V.nalUnitType="pic_parameter_set_rbsp";break;case 9:V.nalUnitType="access_unit_delimiter_rbsp";break}p.trigger("data",V)}),d.on("done",function(){p.trigger("done")}),d.on("partialdone",function(){p.trigger("partialdone")}),d.on("reset",function(){p.trigger("reset")}),d.on("endedtimeline",function(){p.trigger("endedtimeline")}),this.flush=function(){d.flush()},this.partialFlush=function(){d.partialFlush()},this.reset=function(){d.reset()},this.endTimeline=function(){d.endTimeline()},$=function(F,V){var z=8,K=8,fe,se;for(fe=0;fe<F;fe++)K!==0&&(se=V.readExpGolomb(),K=(z+se+256)%256),z=K===0?z:K},k=function(F){for(var V=F.byteLength,z=[],K=1,fe,se;K<V-2;)F[K]===0&&F[K+1]===0&&F[K+2]===3?(z.push(K+2),K+=2):K++;if(z.length===0)return F;fe=V-z.length,se=new Uint8Array(fe);var ke=0;for(K=0;K<fe;ke++,K++)ke===z[0]&&(ke++,z.shift()),se[K]=F[ke];return se},Q=function(F){var V=0,z=0,K=0,fe=0,se,ke,Fe,jt,Qi,Fs,Xo,jo,zo,Zo,gc,gt=[1,1],Wo,vr;if(se=new DA(F),ke=se.readUnsignedByte(),jt=se.readUnsignedByte(),Fe=se.readUnsignedByte(),se.skipUnsignedExpGolomb(),ZO[ke]&&(Qi=se.readUnsignedExpGolomb(),Qi===3&&se.skipBits(1),se.skipUnsignedExpGolomb(),se.skipUnsignedExpGolomb(),se.skipBits(1),se.readBoolean()))for(gc=Qi!==3?8:12,vr=0;vr<gc;vr++)se.readBoolean()&&(vr<6?$(16,se):$(64,se));if(se.skipUnsignedExpGolomb(),Fs=se.readUnsignedExpGolomb(),Fs===0)se.readUnsignedExpGolomb();else if(Fs===1)for(se.skipBits(1),se.skipExpGolomb(),se.skipExpGolomb(),Xo=se.readUnsignedExpGolomb(),vr=0;vr<Xo;vr++)se.skipExpGolomb();if(se.skipUnsignedExpGolomb(),se.skipBits(1),jo=se.readUnsignedExpGolomb(),zo=se.readUnsignedExpGolomb(),Zo=se.readBits(1),Zo===0&&se.skipBits(1),se.skipBits(1),se.readBoolean()&&(V=se.readUnsignedExpGolomb(),z=se.readUnsignedExpGolomb(),K=se.readUnsignedExpGolomb(),fe=se.readUnsignedExpGolomb()),se.readBoolean()&&se.readBoolean()){switch(Wo=se.readUnsignedByte(),Wo){case 1:gt=[1,1];break;case 2:gt=[12,11];break;case 3:gt=[10,11];break;case 4:gt=[16,11];break;case 5:gt=[40,33];break;case 6:gt=[24,11];break;case 7:gt=[20,11];break;case 8:gt=[32,11];break;case 9:gt=[80,33];break;case 10:gt=[18,11];break;case 11:gt=[15,11];break;case 12:gt=[64,33];break;case 13:gt=[160,99];break;case 14:gt=[4,3];break;case 15:gt=[3,2];break;case 16:gt=[2,1];break;case 255:{gt=[se.readUnsignedByte()<<8|se.readUnsignedByte(),se.readUnsignedByte()<<8|se.readUnsignedByte()];break}}gt&&gt[0]/gt[1]}return{profileIdc:ke,levelIdc:Fe,profileCompatibility:jt,width:(jo+1)*16-V*2-z*2,height:(2-Zo)*(zo+1)*16-K*2-fe*2,sarRatio:gt}}},rc.prototype=new zO;var MA={H264Stream:rc},IA=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],WO=function(d,p){var O=d[p+6]<<21|d[p+7]<<14|d[p+8]<<7|d[p+9],g=d[p+5],v=(g&16)>>4;return O=O>=0?O:0,v?O+20:O+10},HO=function(d,p){return d.length-p<10||d[p]!==73||d[p+1]!==68||d[p+2]!==51?p:(p+=WO(d,p),HO(d,p))},RA=function(d){var p=HO(d,0);return d.length>=p+2&&(d[p]&255)===255&&(d[p+1]&240)===240&&(d[p+1]&22)===16},YO=function(d){return d[0]<<21|d[1]<<14|d[2]<<7|d[3]},LA=function(d,p,O){var g,v="";for(g=p;g<O;g++)v+="%"+("00"+d[g].toString(16)).slice(-2);return v},QA=function(d,p,O){return unescape(LA(d,p,O))},$A=function(d,p){var O=(d[p+5]&224)>>5,g=d[p+4]<<3,v=d[p+3]&6144;return v|g|O},BA=function(d,p){return d[p]===73&&d[p+1]===68&&d[p+2]===51?"timed-metadata":d[p]&!0&&(d[p+1]&240)===240?"audio":null},NA=function(d){for(var p=0;p+5<d.length;){if(d[p]!==255||(d[p+1]&246)!==240){p++;continue}return IA[(d[p+2]&60)>>>2]}return null},FA=function(d){var p,O,g,v;p=10,d[5]&64&&(p+=4,p+=YO(d.subarray(10,14)));do{if(O=YO(d.subarray(p+4,p+8)),O<1)return null;if(v=String.fromCharCode(d[p],d[p+1],d[p+2],d[p+3]),v==="PRIV"){g=d.subarray(p+10,p+O+10);for(var k=0;k<g.byteLength;k++)if(g[k]===0){var Q=QA(g,0,k);if(Q==="com.apple.streaming.transportStreamTimestamp"){var $=g.subarray(k+1),F=($[3]&1)<<30|$[4]<<22|$[5]<<14|$[6]<<6|$[7]>>>2;return F*=4,F+=$[7]&3,F}break}}p+=10,p+=O}while(p<d.byteLength);return null},bf={isLikelyAacData:RA,parseId3TagSize:WO,parseAdtsSize:$A,parseType:BA,parseSampleRate:NA,parseAacTimestamp:FA},UA=t,GO=bf,nc;nc=function(){var d=new Uint8Array,p=0;nc.prototype.init.call(this),this.setTimestamp=function(O){p=O},this.push=function(O){var g=0,v=0,k,Q,$,F;for(d.length?(F=d.length,d=new Uint8Array(O.byteLength+F),d.set(d.subarray(0,F)),d.set(O,F)):d=O;d.length-v>=3;){if(d[v]===73&&d[v+1]===68&&d[v+2]===51){if(d.length-v<10||(g=GO.parseId3TagSize(d,v),v+g>d.length))break;Q={type:"timed-metadata",data:d.subarray(v,v+g)},this.trigger("data",Q),v+=g;continue}else if((d[v]&255)===255&&(d[v+1]&240)===240){if(d.length-v<7||(g=GO.parseAdtsSize(d,v),v+g>d.length))break;$={type:"audio",data:d.subarray(v,v+g),pts:p,dts:p},this.trigger("data",$),v+=g;continue}v++}k=d.length-v,k>0?d=d.subarray(v):d=new Uint8Array},this.reset=function(){d=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){d=new Uint8Array,this.trigger("endedtimeline")}},nc.prototype=new UA;var qA=nc,VA=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],XA=VA,jA=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],zA=jA,ac=t,Bo=bt,No=as,oc=hs,br=D,ps=CA,lc=Ze,KO=AA,ZA=MA.H264Stream,WA=qA,HA=bf.isLikelyAacData,YA=Ze.ONE_SECOND_IN_TS,JO=XA,ey=zA,uc,Fo,cc,On,GA=function(d,p){p.stream=d,this.trigger("log",p)},ty=function(d,p){for(var O=Object.keys(p),g=0;g<O.length;g++){var v=O[g];v==="headOfPipeline"||!p[v].on||p[v].on("log",GA.bind(d,v))}},iy=function(d,p){var O;if(d.length!==p.length)return!1;for(O=0;O<d.length;O++)if(d[O]!==p[O])return!1;return!0},ry=function(d,p,O,g,v,k){var Q=O-p,$=g-p,F=v-O;return{start:{dts:d,pts:d+Q},end:{dts:d+$,pts:d+F},prependedContentDuration:k,baseMediaDecodeTime:d}};Fo=function(d,p){var O=[],g,v=0,k=0,Q=1/0;p=p||{},g=p.firstSequenceNumber||0,Fo.prototype.init.call(this),this.push=function($){br.collectDtsInfo(d,$),d&&JO.forEach(function(F){d[F]=$[F]}),O.push($)},this.setEarliestDts=function($){v=$},this.setVideoBaseMediaDecodeTime=function($){Q=$},this.setAudioAppendStart=function($){k=$},this.flush=function(){var $,F,V,z,K,fe,se;if(O.length===0){this.trigger("done","AudioSegmentStream");return}$=oc.trimAdtsFramesByEarliestDts(O,d,v),d.baseMediaDecodeTime=br.calculateTrackBaseMediaDecodeTime(d,p.keepOriginalTimestamps),se=oc.prefixWithSilence(d,$,k,Q),d.samples=oc.generateSampleTable($),V=Bo.mdat(oc.concatenateFrameData($)),O=[],F=Bo.moof(g,[d]),z=new Uint8Array(F.byteLength+V.byteLength),g++,z.set(F),z.set(V,F.byteLength),br.clearDtsInfo(d),K=Math.ceil(YA*1024/d.samplerate),$.length&&(fe=$.length*K,this.trigger("segmentTimingInfo",ry(lc.audioTsToVideoTs(d.baseMediaDecodeTime,d.samplerate),$[0].dts,$[0].pts,$[0].dts+fe,$[0].pts+fe,se||0)),this.trigger("timingInfo",{start:$[0].pts,end:$[0].pts+fe})),this.trigger("data",{track:d,boxes:z}),this.trigger("done","AudioSegmentStream")},this.reset=function(){br.clearDtsInfo(d),O=[],this.trigger("reset")}},Fo.prototype=new ac,uc=function(d,p){var O,g=[],v=[],k,Q;p=p||{},O=p.firstSequenceNumber||0,uc.prototype.init.call(this),delete d.minPTS,this.gopCache_=[],this.push=function($){br.collectDtsInfo(d,$),$.nalUnitType==="seq_parameter_set_rbsp"&&!k&&(k=$.config,d.sps=[$.data],ey.forEach(function(F){d[F]=k[F]},this)),$.nalUnitType==="pic_parameter_set_rbsp"&&!Q&&(Q=$.data,d.pps=[$.data]),g.push($)},this.flush=function(){for(var $,F,V,z,K,fe,se=0,ke,Fe;g.length&&g[0].nalUnitType!=="access_unit_delimiter_rbsp";)g.shift();if(g.length===0){this.resetStream_(),this.trigger("done","VideoSegmentStream");return}if($=No.groupNalsIntoFrames(g),V=No.groupFramesIntoGops($),V[0][0].keyFrame||(F=this.getGopForFusion_(g[0],d),F?(se=F.duration,V.unshift(F),V.byteLength+=F.byteLength,V.nalCount+=F.nalCount,V.pts=F.pts,V.dts=F.dts,V.duration+=F.duration):V=No.extendFirstKeyFrame(V)),v.length){var jt;if(p.alignGopsAtEnd?jt=this.alignGopsAtEnd_(V):jt=this.alignGopsAtStart_(V),!jt){this.gopCache_.unshift({gop:V.pop(),pps:d.pps,sps:d.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),g=[],this.resetStream_(),this.trigger("done","VideoSegmentStream");return}br.clearDtsInfo(d),V=jt}br.collectDtsInfo(d,V),d.samples=No.generateSampleTable(V),K=Bo.mdat(No.concatenateNalData(V)),d.baseMediaDecodeTime=br.calculateTrackBaseMediaDecodeTime(d,p.keepOriginalTimestamps),this.trigger("processedGopsInfo",V.map(function(Qi){return{pts:Qi.pts,dts:Qi.dts,byteLength:Qi.byteLength}})),ke=V[0],Fe=V[V.length-1],this.trigger("segmentTimingInfo",ry(d.baseMediaDecodeTime,ke.dts,ke.pts,Fe.dts+Fe.duration,Fe.pts+Fe.duration,se)),this.trigger("timingInfo",{start:V[0].pts,end:V[V.length-1].pts+V[V.length-1].duration}),this.gopCache_.unshift({gop:V.pop(),pps:d.pps,sps:d.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),g=[],this.trigger("baseMediaDecodeTime",d.baseMediaDecodeTime),this.trigger("timelineStartInfo",d.timelineStartInfo),z=Bo.moof(O,[d]),fe=new Uint8Array(z.byteLength+K.byteLength),O++,fe.set(z),fe.set(K,z.byteLength),this.trigger("data",{track:d,boxes:fe}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),g=[],this.gopCache_.length=0,v.length=0,this.trigger("reset")},this.resetStream_=function(){br.clearDtsInfo(d),k=void 0,Q=void 0},this.getGopForFusion_=function($){var F=45e3,V=1/0,z,K,fe,se,ke;for(ke=0;ke<this.gopCache_.length;ke++)se=this.gopCache_[ke],fe=se.gop,!(!(d.pps&&iy(d.pps[0],se.pps[0]))||!(d.sps&&iy(d.sps[0],se.sps[0])))&&(fe.dts<d.timelineStartInfo.dts||(z=$.dts-fe.dts-fe.duration,z>=-1e4&&z<=F&&(!K||V>z)&&(K=se,V=z)));return K?K.gop:null},this.alignGopsAtStart_=function($){var F,V,z,K,fe,se,ke,Fe;for(fe=$.byteLength,se=$.nalCount,ke=$.duration,F=V=0;F<v.length&&V<$.length&&(z=v[F],K=$[V],z.pts!==K.pts);){if(K.pts>z.pts){F++;continue}V++,fe-=K.byteLength,se-=K.nalCount,ke-=K.duration}return V===0?$:V===$.length?null:(Fe=$.slice(V),Fe.byteLength=fe,Fe.duration=ke,Fe.nalCount=se,Fe.pts=Fe[0].pts,Fe.dts=Fe[0].dts,Fe)},this.alignGopsAtEnd_=function($){var F,V,z,K,fe,se;for(F=v.length-1,V=$.length-1,fe=null,se=!1;F>=0&&V>=0;){if(z=v[F],K=$[V],z.pts===K.pts){se=!0;break}if(z.pts>K.pts){F--;continue}F===v.length-1&&(fe=V),V--}if(!se&&fe===null)return null;var ke;if(se?ke=V:ke=fe,ke===0)return $;var Fe=$.slice(ke),jt=Fe.reduce(function(Qi,Fs){return Qi.byteLength+=Fs.byteLength,Qi.duration+=Fs.duration,Qi.nalCount+=Fs.nalCount,Qi},{byteLength:0,duration:0,nalCount:0});return Fe.byteLength=jt.byteLength,Fe.duration=jt.duration,Fe.nalCount=jt.nalCount,Fe.pts=Fe[0].pts,Fe.dts=Fe[0].dts,Fe},this.alignGopsWith=function($){v=$}},uc.prototype=new ac,On=function(d,p){this.numberOfTracks=0,this.metadataStream=p,d=d||{},typeof d.remux<"u"?this.remuxTracks=!!d.remux:this.remuxTracks=!0,typeof d.keepOriginalTimestamps=="boolean"?this.keepOriginalTimestamps=d.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,On.prototype.init.call(this),this.push=function(O){if(O.content||O.text)return this.pendingCaptions.push(O);if(O.frames)return this.pendingMetadata.push(O);this.pendingTracks.push(O.track),this.pendingBytes+=O.boxes.byteLength,O.track.type==="video"&&(this.videoTrack=O.track,this.pendingBoxes.push(O.boxes)),O.track.type==="audio"&&(this.audioTrack=O.track,this.pendingBoxes.unshift(O.boxes))}},On.prototype=new ac,On.prototype.flush=function(d){var p=0,O={captions:[],captionStreams:{},metadata:[],info:{}},g,v,k,Q=0,$;if(this.pendingTracks.length<this.numberOfTracks){if(d!=="VideoSegmentStream"&&d!=="AudioSegmentStream")return;if(this.remuxTracks)return;if(this.pendingTracks.length===0){this.emittedTracks++,this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0);return}}if(this.videoTrack?(Q=this.videoTrack.timelineStartInfo.pts,ey.forEach(function(F){O.info[F]=this.videoTrack[F]},this)):this.audioTrack&&(Q=this.audioTrack.timelineStartInfo.pts,JO.forEach(function(F){O.info[F]=this.audioTrack[F]},this)),this.videoTrack||this.audioTrack){for(this.pendingTracks.length===1?O.type=this.pendingTracks[0].type:O.type="combined",this.emittedTracks+=this.pendingTracks.length,k=Bo.initSegment(this.pendingTracks),O.initSegment=new Uint8Array(k.byteLength),O.initSegment.set(k),O.data=new Uint8Array(this.pendingBytes),$=0;$<this.pendingBoxes.length;$++)O.data.set(this.pendingBoxes[$],p),p+=this.pendingBoxes[$].byteLength;for($=0;$<this.pendingCaptions.length;$++)g=this.pendingCaptions[$],g.startTime=lc.metadataTsToSeconds(g.startPts,Q,this.keepOriginalTimestamps),g.endTime=lc.metadataTsToSeconds(g.endPts,Q,this.keepOriginalTimestamps),O.captionStreams[g.stream]=!0,O.captions.push(g);for($=0;$<this.pendingMetadata.length;$++)v=this.pendingMetadata[$],v.cueTime=lc.metadataTsToSeconds(v.pts,Q,this.keepOriginalTimestamps),O.metadata.push(v);for(O.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",O),$=0;$<O.captions.length;$++)g=O.captions[$],this.trigger("caption",g);for($=0;$<O.metadata.length;$++)v=O.metadata[$],this.trigger("id3Frame",v)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},On.prototype.setRemux=function(d){this.remuxTracks=d},cc=function(d){var p=this,O=!0,g,v;cc.prototype.init.call(this),d=d||{},this.baseMediaDecodeTime=d.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var k={};this.transmuxPipeline_=k,k.type="aac",k.metadataStream=new ps.MetadataStream,k.aacStream=new WA,k.audioTimestampRolloverStream=new ps.TimestampRolloverStream("audio"),k.timedMetadataTimestampRolloverStream=new ps.TimestampRolloverStream("timed-metadata"),k.adtsStream=new KO,k.coalesceStream=new On(d,k.metadataStream),k.headOfPipeline=k.aacStream,k.aacStream.pipe(k.audioTimestampRolloverStream).pipe(k.adtsStream),k.aacStream.pipe(k.timedMetadataTimestampRolloverStream).pipe(k.metadataStream).pipe(k.coalesceStream),k.metadataStream.on("timestamp",function(Q){k.aacStream.setTimestamp(Q.timeStamp)}),k.aacStream.on("data",function(Q){Q.type!=="timed-metadata"&&Q.type!=="audio"||k.audioSegmentStream||(v=v||{timelineStartInfo:{baseMediaDecodeTime:p.baseMediaDecodeTime},codec:"adts",type:"audio"},k.coalesceStream.numberOfTracks++,k.audioSegmentStream=new Fo(v,d),k.audioSegmentStream.on("log",p.getLogTrigger_("audioSegmentStream")),k.audioSegmentStream.on("timingInfo",p.trigger.bind(p,"audioTimingInfo")),k.adtsStream.pipe(k.audioSegmentStream).pipe(k.coalesceStream),p.trigger("trackinfo",{hasAudio:!!v,hasVideo:!!g}))}),k.coalesceStream.on("data",this.trigger.bind(this,"data")),k.coalesceStream.on("done",this.trigger.bind(this,"done")),ty(this,k)},this.setupTsPipeline=function(){var k={};this.transmuxPipeline_=k,k.type="ts",k.metadataStream=new ps.MetadataStream,k.packetStream=new ps.TransportPacketStream,k.parseStream=new ps.TransportParseStream,k.elementaryStream=new ps.ElementaryStream,k.timestampRolloverStream=new ps.TimestampRolloverStream,k.adtsStream=new KO,k.h264Stream=new ZA,k.captionStream=new ps.CaptionStream(d),k.coalesceStream=new On(d,k.metadataStream),k.headOfPipeline=k.packetStream,k.packetStream.pipe(k.parseStream).pipe(k.elementaryStream).pipe(k.timestampRolloverStream),k.timestampRolloverStream.pipe(k.h264Stream),k.timestampRolloverStream.pipe(k.adtsStream),k.timestampRolloverStream.pipe(k.metadataStream).pipe(k.coalesceStream),k.h264Stream.pipe(k.captionStream).pipe(k.coalesceStream),k.elementaryStream.on("data",function(Q){var $;if(Q.type==="metadata"){for($=Q.tracks.length;$--;)!g&&Q.tracks[$].type==="video"?(g=Q.tracks[$],g.timelineStartInfo.baseMediaDecodeTime=p.baseMediaDecodeTime):!v&&Q.tracks[$].type==="audio"&&(v=Q.tracks[$],v.timelineStartInfo.baseMediaDecodeTime=p.baseMediaDecodeTime);g&&!k.videoSegmentStream&&(k.coalesceStream.numberOfTracks++,k.videoSegmentStream=new uc(g,d),k.videoSegmentStream.on("log",p.getLogTrigger_("videoSegmentStream")),k.videoSegmentStream.on("timelineStartInfo",function(F){v&&!d.keepOriginalTimestamps&&(v.timelineStartInfo=F,k.audioSegmentStream.setEarliestDts(F.dts-p.baseMediaDecodeTime))}),k.videoSegmentStream.on("processedGopsInfo",p.trigger.bind(p,"gopInfo")),k.videoSegmentStream.on("segmentTimingInfo",p.trigger.bind(p,"videoSegmentTimingInfo")),k.videoSegmentStream.on("baseMediaDecodeTime",function(F){v&&k.audioSegmentStream.setVideoBaseMediaDecodeTime(F)}),k.videoSegmentStream.on("timingInfo",p.trigger.bind(p,"videoTimingInfo")),k.h264Stream.pipe(k.videoSegmentStream).pipe(k.coalesceStream)),v&&!k.audioSegmentStream&&(k.coalesceStream.numberOfTracks++,k.audioSegmentStream=new Fo(v,d),k.audioSegmentStream.on("log",p.getLogTrigger_("audioSegmentStream")),k.audioSegmentStream.on("timingInfo",p.trigger.bind(p,"audioTimingInfo")),k.audioSegmentStream.on("segmentTimingInfo",p.trigger.bind(p,"audioSegmentTimingInfo")),k.adtsStream.pipe(k.audioSegmentStream).pipe(k.coalesceStream)),p.trigger("trackinfo",{hasAudio:!!v,hasVideo:!!g})}}),k.coalesceStream.on("data",this.trigger.bind(this,"data")),k.coalesceStream.on("id3Frame",function(Q){Q.dispatchType=k.metadataStream.dispatchType,p.trigger("id3Frame",Q)}),k.coalesceStream.on("caption",this.trigger.bind(this,"caption")),k.coalesceStream.on("done",this.trigger.bind(this,"done")),ty(this,k)},this.setBaseMediaDecodeTime=function(k){var Q=this.transmuxPipeline_;d.keepOriginalTimestamps||(this.baseMediaDecodeTime=k),v&&(v.timelineStartInfo.dts=void 0,v.timelineStartInfo.pts=void 0,br.clearDtsInfo(v),Q.audioTimestampRolloverStream&&Q.audioTimestampRolloverStream.discontinuity()),g&&(Q.videoSegmentStream&&(Q.videoSegmentStream.gopCache_=[]),g.timelineStartInfo.dts=void 0,g.timelineStartInfo.pts=void 0,br.clearDtsInfo(g),Q.captionStream.reset()),Q.timestampRolloverStream&&Q.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(k){v&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(k)},this.setRemux=function(k){var Q=this.transmuxPipeline_;d.remux=k,Q&&Q.coalesceStream&&Q.coalesceStream.setRemux(k)},this.alignGopsWith=function(k){g&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(k)},this.getLogTrigger_=function(k){var Q=this;return function($){$.stream=k,Q.trigger("log",$)}},this.push=function(k){if(O){var Q=HA(k);Q&&this.transmuxPipeline_.type!=="aac"?this.setupAacPipeline():!Q&&this.transmuxPipeline_.type!=="ts"&&this.setupTsPipeline(),O=!1}this.transmuxPipeline_.headOfPipeline.push(k)},this.flush=function(){O=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}},cc.prototype=new ac;var KA={Transmuxer:cc},JA=function(d){return d>>>0},eP=function(d){return("00"+d.toString(16)).slice(-2)},hc={toUnsigned:JA,toHexString:eP},tP=function(d){var p="";return p+=String.fromCharCode(d[0]),p+=String.fromCharCode(d[1]),p+=String.fromCharCode(d[2]),p+=String.fromCharCode(d[3]),p},sy=tP,iP=hc.toUnsigned,rP=sy,ny=function(d,p){var O=[],g,v,k,Q,$;if(!p.length)return null;for(g=0;g<d.byteLength;)v=iP(d[g]<<24|d[g+1]<<16|d[g+2]<<8|d[g+3]),k=rP(d.subarray(g+4,g+8)),Q=v>1?g+v:d.byteLength,k===p[0]&&(p.length===1?O.push(d.subarray(g+8,Q)):($=ny(d.subarray(g+8,Q),p.slice(1)),$.length&&(O=O.concat($)))),g=Q;return O},vf=ny,sP=hc.toUnsigned,nP=n.getUint64,aP=function(d){var p={version:d[0],flags:new Uint8Array(d.subarray(1,4))};return p.version===1?p.baseMediaDecodeTime=nP(d.subarray(4)):p.baseMediaDecodeTime=sP(d[4]<<24|d[5]<<16|d[6]<<8|d[7]),p},Sf=aP,oP=function(d){var p=new DataView(d.buffer,d.byteOffset,d.byteLength),O={version:d[0],flags:new Uint8Array(d.subarray(1,4)),trackId:p.getUint32(4)},g=O.flags[2]&1,v=O.flags[2]&2,k=O.flags[2]&8,Q=O.flags[2]&16,$=O.flags[2]&32,F=O.flags[0]&65536,V=O.flags[0]&131072,z;return z=8,g&&(z+=4,O.baseDataOffset=p.getUint32(12),z+=4),v&&(O.sampleDescriptionIndex=p.getUint32(z),z+=4),k&&(O.defaultSampleDuration=p.getUint32(z),z+=4),Q&&(O.defaultSampleSize=p.getUint32(z),z+=4),$&&(O.defaultSampleFlags=p.getUint32(z)),F&&(O.durationIsEmpty=!0),!g&&V&&(O.baseDataOffsetIsMoof=!0),O},ay=oP,lP=function(d){return{isLeading:(d[0]&12)>>>2,dependsOn:d[0]&3,isDependedOn:(d[1]&192)>>>6,hasRedundancy:(d[1]&48)>>>4,paddingValue:(d[1]&14)>>>1,isNonSyncSample:d[1]&1,degradationPriority:d[2]<<8|d[3]}},uP=lP,oy=uP,cP=function(d){var p={version:d[0],flags:new Uint8Array(d.subarray(1,4)),samples:[]},O=new DataView(d.buffer,d.byteOffset,d.byteLength),g=p.flags[2]&1,v=p.flags[2]&4,k=p.flags[1]&1,Q=p.flags[1]&2,$=p.flags[1]&4,F=p.flags[1]&8,V=O.getUint32(4),z=8,K;for(g&&(p.dataOffset=O.getInt32(z),z+=4),v&&V&&(K={flags:oy(d.subarray(z,z+4))},z+=4,k&&(K.duration=O.getUint32(z),z+=4),Q&&(K.size=O.getUint32(z),z+=4),F&&(p.version===1?K.compositionTimeOffset=O.getInt32(z):K.compositionTimeOffset=O.getUint32(z),z+=4),p.samples.push(K),V--);V--;)K={},k&&(K.duration=O.getUint32(z),z+=4),Q&&(K.size=O.getUint32(z),z+=4),$&&(K.flags=oy(d.subarray(z,z+4)),z+=4),F&&(p.version===1?K.compositionTimeOffset=O.getInt32(z):K.compositionTimeOffset=O.getUint32(z),z+=4),p.samples.push(K);return p},ly=cP,uy={tfdt:Sf,trun:ly},cy={parseTfdt:uy.tfdt,parseTrun:uy.trun},hP=function(d){for(var p=0,O=String.fromCharCode(d[p]),g="";O!=="\0";)g+=O,p++,O=String.fromCharCode(d[p]);return g+=O,g},dP={uint8ToCString:hP},dc=dP.uint8ToCString,fP=n.getUint64,pP=function(d){var p=4,O=d[0],g,v,k,Q,$,F,V,z;if(O===0){g=dc(d.subarray(p)),p+=g.length,v=dc(d.subarray(p)),p+=v.length;var K=new DataView(d.buffer);k=K.getUint32(p),p+=4,$=K.getUint32(p),p+=4,F=K.getUint32(p),p+=4,V=K.getUint32(p),p+=4}else if(O===1){var K=new DataView(d.buffer);k=K.getUint32(p),p+=4,Q=fP(d.subarray(p)),p+=8,F=K.getUint32(p),p+=4,V=K.getUint32(p),p+=4,g=dc(d.subarray(p)),p+=g.length,v=dc(d.subarray(p)),p+=v.length}z=new Uint8Array(d.subarray(p,d.byteLength));var fe={scheme_id_uri:g,value:v,timescale:k||1,presentation_time:Q,presentation_time_delta:$,event_duration:F,id:V,message_data:z};return gP(O,fe)?fe:void 0},mP=function(d,p,O,g){return d||d===0?d/p:g+O/p},gP=function(d,p){var O=p.scheme_id_uri!=="\0",g=d===0&&hy(p.presentation_time_delta)&&O,v=d===1&&hy(p.presentation_time)&&O;return!(d>1)&&g||v},hy=function(d){return d!==void 0||d!==null},OP={parseEmsgBox:pP,scaleTime:mP},Uo;typeof window<"u"?Uo=window:typeof r<"u"?Uo=r:typeof self<"u"?Uo=self:Uo={};var dy=Uo,fc=hc.toUnsigned,qo=hc.toHexString,Dt=vf,oa=sy,Tf=OP,yP=ay,bP=ly,vP=Sf,SP=n.getUint64,fy,py,my,gy,Oy,_f,yy,xf=dy,TP=qO.parseId3Frames;fy=function(d){var p={},O=Dt(d,["moov","trak"]);return O.reduce(function(g,v){var k,Q,$,F,V;return k=Dt(v,["tkhd"])[0],!k||(Q=k[0],$=Q===0?12:20,F=fc(k[$]<<24|k[$+1]<<16|k[$+2]<<8|k[$+3]),V=Dt(v,["mdia","mdhd"])[0],!V)?null:(Q=V[0],$=Q===0?12:20,g[F]=fc(V[$]<<24|V[$+1]<<16|V[$+2]<<8|V[$+3]),g)},p)},py=function(d,p){var O;O=Dt(p,["moof","traf"]);var g=O.reduce(function(v,k){var Q=Dt(k,["tfhd"])[0],$=fc(Q[4]<<24|Q[5]<<16|Q[6]<<8|Q[7]),F=d[$]||9e4,V=Dt(k,["tfdt"])[0],z=new DataView(V.buffer,V.byteOffset,V.byteLength),K;V[0]===1?K=SP(V.subarray(4,12)):K=z.getUint32(4);let fe;return typeof K=="bigint"?fe=K/xf.BigInt(F):typeof K=="number"&&!isNaN(K)&&(fe=K/F),fe<Number.MAX_SAFE_INTEGER&&(fe=Number(fe)),fe<v&&(v=fe),v},1/0);return typeof g=="bigint"||isFinite(g)?g:0},my=function(d,p){var O=Dt(p,["moof","traf"]),g=0,v=0,k;if(O&&O.length){var Q=Dt(O[0],["tfhd"])[0],$=Dt(O[0],["trun"])[0],F=Dt(O[0],["tfdt"])[0];if(Q){var V=yP(Q);k=V.trackId}if(F){var z=vP(F);g=z.baseMediaDecodeTime}if($){var K=bP($);K.samples&&K.samples.length&&(v=K.samples[0].compositionTimeOffset||0)}}var fe=d[k]||9e4;typeof g=="bigint"&&(v=xf.BigInt(v),fe=xf.BigInt(fe));var se=(g+v)/fe;return typeof se=="bigint"&&se<Number.MAX_SAFE_INTEGER&&(se=Number(se)),se},gy=function(d){var p=Dt(d,["moov","trak"]),O=[];return p.forEach(function(g){var v=Dt(g,["mdia","hdlr"]),k=Dt(g,["tkhd"]);v.forEach(function(Q,$){var F=oa(Q.subarray(8,12)),V=k[$],z,K,fe;F==="vide"&&(z=new DataView(V.buffer,V.byteOffset,V.byteLength),K=z.getUint8(0),fe=K===0?z.getUint32(12):z.getUint32(20),O.push(fe))})}),O},_f=function(d){var p=d[0],O=p===0?12:20;return fc(d[O]<<24|d[O+1]<<16|d[O+2]<<8|d[O+3])},Oy=function(d){var p=Dt(d,["moov","trak"]),O=[];return p.forEach(function(g){var v={},k=Dt(g,["tkhd"])[0],Q,$;k&&(Q=new DataView(k.buffer,k.byteOffset,k.byteLength),$=Q.getUint8(0),v.id=$===0?Q.getUint32(12):Q.getUint32(20));var F=Dt(g,["mdia","hdlr"])[0];if(F){var V=oa(F.subarray(8,12));V==="vide"?v.type="video":V==="soun"?v.type="audio":v.type=V}var z=Dt(g,["mdia","minf","stbl","stsd"])[0];if(z){var K=z.subarray(8);v.codec=oa(K.subarray(4,8));var fe=Dt(K,[v.codec])[0],se,ke;fe&&(/^[asm]vc[1-9]$/i.test(v.codec)?(se=fe.subarray(78),ke=oa(se.subarray(4,8)),ke==="avcC"&&se.length>11?(v.codec+=".",v.codec+=qo(se[9]),v.codec+=qo(se[10]),v.codec+=qo(se[11])):v.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(v.codec)?(se=fe.subarray(28),ke=oa(se.subarray(4,8)),ke==="esds"&&se.length>20&&se[19]!==0?(v.codec+="."+qo(se[19]),v.codec+="."+qo(se[20]>>>2&63).replace(/^0/,"")):v.codec="mp4a.40.2"):v.codec=v.codec.toLowerCase())}var Fe=Dt(g,["mdia","mdhd"])[0];Fe&&(v.timescale=_f(Fe)),O.push(v)}),O},yy=function(d,p=0){var O=Dt(d,["emsg"]);return O.map(g=>{var v=Tf.parseEmsgBox(new Uint8Array(g)),k=TP(v.message_data);return{cueTime:Tf.scaleTime(v.presentation_time,v.timescale,v.presentation_time_delta,p),duration:Tf.scaleTime(v.event_duration,v.timescale),frames:k}})};var Vo={findBox:Dt,parseType:oa,timescale:fy,startTime:py,compositionStartTime:my,videoTrackIds:gy,tracks:Oy,getTimescaleFromMediaHeader:_f,getEmsgID3:yy};const{parseTrun:_P}=cy,{findBox:by}=Vo;var vy=dy,xP=function(d){var p=by(d,["moof","traf"]),O=by(d,["mdat"]),g=[];return O.forEach(function(v,k){var Q=p[k];g.push({mdat:v,traf:Q})}),g},wP=function(d,p,O){var g=p,v=O.defaultSampleDuration||0,k=O.defaultSampleSize||0,Q=O.trackId,$=[];return d.forEach(function(F){var V=_P(F),z=V.samples;z.forEach(function(K){K.duration===void 0&&(K.duration=v),K.size===void 0&&(K.size=k),K.trackId=Q,K.dts=g,K.compositionTimeOffset===void 0&&(K.compositionTimeOffset=0),typeof g=="bigint"?(K.pts=g+vy.BigInt(K.compositionTimeOffset),g+=vy.BigInt(K.duration)):(K.pts=g+K.compositionTimeOffset,g+=K.duration)}),$=$.concat(z)}),$},Sy={getMdatTrafPairs:xP,parseSamples:wP},CP=Pe.discardEmulationPreventionBytes,kP=Yu.CaptionStream,wf=vf,EP=Sf,AP=ay,{getMdatTrafPairs:PP,parseSamples:DP}=Sy,MP=function(d,p){for(var O=d,g=0;g<p.length;g++){var v=p[g];if(O<v.size)return v;O-=v.size}return null},IP=function(d,p,O){var g=new DataView(d.buffer,d.byteOffset,d.byteLength),v={logs:[],seiNals:[]},k,Q,$,F;for(Q=0;Q+4<d.length;Q+=$)if($=g.getUint32(Q),Q+=4,!($<=0))switch(d[Q]&31){case 6:var V=d.subarray(Q+1,Q+1+$),z=MP(Q,p);if(k={nalUnitType:"sei_rbsp",size:$,data:V,escapedRBSP:CP(V),trackId:O},z)k.pts=z.pts,k.dts=z.dts,F=z;else if(F)k.pts=F.pts,k.dts=F.dts;else{v.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+Q+" for trackId "+O+". See mux.js#223."});break}v.seiNals.push(k);break}return v},RP=function(d,p){var O={},g=PP(d);return g.forEach(function(v){var k=v.mdat,Q=v.traf,$=wf(Q,["tfhd"]),F=AP($[0]),V=F.trackId,z=wf(Q,["tfdt"]),K=z.length>0?EP(z[0]).baseMediaDecodeTime:0,fe=wf(Q,["trun"]),se,ke;p===V&&fe.length>0&&(se=DP(fe,K,F),ke=IP(k,se,V),O[V]||(O[V]={seiNals:[],logs:[]}),O[V].seiNals=O[V].seiNals.concat(ke.seiNals),O[V].logs=O[V].logs.concat(ke.logs))}),O},LP=function(d,p,O){var g;if(p===null)return null;g=RP(d,p);var v=g[p]||{};return{seiNals:v.seiNals,logs:v.logs,timescale:O}},QP=function(){var d=!1,p,O,g,v,k,Q;this.isInitialized=function(){return d},this.init=function($){p=new kP,d=!0,Q=$?$.isPartial:!1,p.on("data",function(F){F.startTime=F.startPts/v,F.endTime=F.endPts/v,k.captions.push(F),k.captionStreams[F.stream]=!0}),p.on("log",function(F){k.logs.push(F)})},this.isNewInit=function($,F){return $&&$.length===0||F&&typeof F=="object"&&Object.keys(F).length===0?!1:g!==$[0]||v!==F[g]},this.parse=function($,F,V){var z;if(this.isInitialized()){if(!F||!V)return null;if(this.isNewInit(F,V))g=F[0],v=V[g];else if(g===null||!v)return O.push($),null}else return null;for(;O.length>0;){var K=O.shift();this.parse(K,F,V)}return z=LP($,g,v),z&&z.logs&&(k.logs=k.logs.concat(z.logs)),z===null||!z.seiNals?k.logs.length?{logs:k.logs,captions:[],captionStreams:[]}:null:(this.pushNals(z.seiNals),this.flushStream(),k)},this.pushNals=function($){if(!this.isInitialized()||!$||$.length===0)return null;$.forEach(function(F){p.push(F)})},this.flushStream=function(){if(!this.isInitialized())return null;Q?p.partialFlush():p.flush()},this.clearParsedCaptions=function(){k.captions=[],k.captionStreams={},k.logs=[]},this.resetCaptionStream=function(){if(!this.isInitialized())return null;p.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){O=[],g=null,v=null,k?this.clearParsedCaptions():k={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()},$P=QP;const{parseTfdt:BP}=cy,Ns=vf,{getTimescaleFromMediaHeader:NP}=Vo,{parseSamples:FP,getMdatTrafPairs:UP}=Sy;var Ty=function(){let d=9e4;this.init=function(p){const O=Ns(p,["moov","trak","mdia","mdhd"])[0];O&&(d=NP(O))},this.parseSegment=function(p){const O=[],g=UP(p);let v=0;return g.forEach(function(k){const Q=k.mdat,$=k.traf,F=Ns($,["tfdt"])[0],V=Ns($,["tfhd"])[0],z=Ns($,["trun"]);if(F&&(v=BP(F).baseMediaDecodeTime),z.length&&V){const K=FP(z,v,V);let fe=0;K.forEach(function(se){const ke="utf-8",Fe=new TextDecoder(ke),jt=Q.slice(fe,fe+se.size);if(Ns(jt,["vtte"])[0]){fe+=se.size;return}Ns(jt,["vttc"]).forEach(function(Xo){const jo=Ns(Xo,["payl"])[0],zo=Ns(Xo,["sttg"])[0],Zo=se.pts/d,gc=(se.pts+se.duration)/d;let gt,Wo;if(jo)try{gt=Fe.decode(jo)}catch(vr){console.error(vr)}if(zo)try{Wo=Fe.decode(zo)}catch(vr){console.error(vr)}se.duration&&gt&&O.push({cueText:gt,start:Zo,end:gc,settings:Wo})}),fe+=se.size})}}),O}},Cf=na,_y=function(d){var p=d[1]&31;return p<<=8,p|=d[2],p},pc=function(d){return!!(d[1]&64)},mc=function(d){var p=0;return(d[3]&48)>>>4>1&&(p+=d[4]+1),p},qP=function(d,p){var O=_y(d);return O===0?"pat":O===p?"pmt":p?"pes":null},VP=function(d){var p=pc(d),O=4+mc(d);return p&&(O+=d[O]+1),(d[O+10]&31)<<8|d[O+11]},XP=function(d){var p={},O=pc(d),g=4+mc(d);if(O&&(g+=d[g]+1),!!(d[g+5]&1)){var v,k,Q;v=(d[g+1]&15)<<8|d[g+2],k=3+v-4,Q=(d[g+10]&15)<<8|d[g+11];for(var $=12+Q;$<k;){var F=g+$;p[(d[F+1]&31)<<8|d[F+2]]=d[F],$+=((d[F+3]&15)<<8|d[F+4])+5}return p}},jP=function(d,p){var O=_y(d),g=p[O];switch(g){case Cf.H264_STREAM_TYPE:return"video";case Cf.ADTS_STREAM_TYPE:return"audio";case Cf.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},zP=function(d){var p=pc(d);if(!p)return null;var O=4+mc(d);if(O>=d.byteLength)return null;var g=null,v;return v=d[O+7],v&192&&(g={},g.pts=(d[O+9]&14)<<27|(d[O+10]&255)<<20|(d[O+11]&254)<<12|(d[O+12]&255)<<5|(d[O+13]&254)>>>3,g.pts*=4,g.pts+=(d[O+13]&6)>>>1,g.dts=g.pts,v&64&&(g.dts=(d[O+14]&14)<<27|(d[O+15]&255)<<20|(d[O+16]&254)<<12|(d[O+17]&255)<<5|(d[O+18]&254)>>>3,g.dts*=4,g.dts+=(d[O+18]&6)>>>1)),g},kf=function(d){switch(d){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},ZP=function(d){for(var p=4+mc(d),O=d.subarray(p),g=0,v=0,k=!1,Q;v<O.byteLength-3;v++)if(O[v+2]===1){g=v+5;break}for(;g<O.byteLength;)switch(O[g]){case 0:if(O[g-1]!==0){g+=2;break}else if(O[g-2]!==0){g++;break}v+3!==g-2&&(Q=kf(O[v+3]&31),Q==="slice_layer_without_partitioning_rbsp_idr"&&(k=!0));do g++;while(O[g]!==1&&g<O.length);v=g-2,g+=3;break;case 1:if(O[g-1]!==0||O[g-2]!==0){g+=3;break}Q=kf(O[v+3]&31),Q==="slice_layer_without_partitioning_rbsp_idr"&&(k=!0),v=g-2,g+=3;break;default:g+=3;break}return O=O.subarray(v),g-=v,v=0,O&&O.byteLength>3&&(Q=kf(O[v+3]&31),Q==="slice_layer_without_partitioning_rbsp_idr"&&(k=!0)),k},WP={parseType:qP,parsePat:VP,parsePmt:XP,parsePayloadUnitStartIndicator:pc,parsePesType:jP,parsePesTime:zP,videoPacketContainsKeyFrame:ZP},xy=na,la=FO.handleRollover,tt={};tt.ts=WP,tt.aac=bf;var yn=Ze.ONE_SECOND_IN_TS,mi=188,Rr=71,HP=function(d,p){for(var O=0,g=mi,v,k;g<d.byteLength;){if(d[O]===Rr&&d[g]===Rr){switch(v=d.subarray(O,g),k=tt.ts.parseType(v,p.pid),k){case"pat":p.pid=tt.ts.parsePat(v);break;case"pmt":var Q=tt.ts.parsePmt(v);p.table=p.table||{},Object.keys(Q).forEach(function($){p.table[$]=Q[$]});break}O+=mi,g+=mi;continue}O++,g++}},wy=function(d,p,O){for(var g=0,v=mi,k,Q,$,F,V,z=!1;v<=d.byteLength;){if(d[g]===Rr&&(d[v]===Rr||v===d.byteLength)){switch(k=d.subarray(g,v),Q=tt.ts.parseType(k,p.pid),Q){case"pes":$=tt.ts.parsePesType(k,p.table),F=tt.ts.parsePayloadUnitStartIndicator(k),$==="audio"&&F&&(V=tt.ts.parsePesTime(k),V&&(V.type="audio",O.audio.push(V),z=!0));break}if(z)break;g+=mi,v+=mi;continue}g++,v++}for(v=d.byteLength,g=v-mi,z=!1;g>=0;){if(d[g]===Rr&&(d[v]===Rr||v===d.byteLength)){switch(k=d.subarray(g,v),Q=tt.ts.parseType(k,p.pid),Q){case"pes":$=tt.ts.parsePesType(k,p.table),F=tt.ts.parsePayloadUnitStartIndicator(k),$==="audio"&&F&&(V=tt.ts.parsePesTime(k),V&&(V.type="audio",O.audio.push(V),z=!0));break}if(z)break;g-=mi,v-=mi;continue}g--,v--}},YP=function(d,p,O){for(var g=0,v=mi,k,Q,$,F,V,z,K,fe,se=!1,ke={data:[],size:0};v<d.byteLength;){if(d[g]===Rr&&d[v]===Rr){switch(k=d.subarray(g,v),Q=tt.ts.parseType(k,p.pid),Q){case"pes":if($=tt.ts.parsePesType(k,p.table),F=tt.ts.parsePayloadUnitStartIndicator(k),$==="video"&&(F&&!se&&(V=tt.ts.parsePesTime(k),V&&(V.type="video",O.video.push(V),se=!0)),!O.firstKeyFrame)){if(F&&ke.size!==0){for(z=new Uint8Array(ke.size),K=0;ke.data.length;)fe=ke.data.shift(),z.set(fe,K),K+=fe.byteLength;if(tt.ts.videoPacketContainsKeyFrame(z)){var Fe=tt.ts.parsePesTime(z);Fe?(O.firstKeyFrame=Fe,O.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}ke.size=0}ke.data.push(k),ke.size+=k.byteLength}break}if(se&&O.firstKeyFrame)break;g+=mi,v+=mi;continue}g++,v++}for(v=d.byteLength,g=v-mi,se=!1;g>=0;){if(d[g]===Rr&&d[v]===Rr){switch(k=d.subarray(g,v),Q=tt.ts.parseType(k,p.pid),Q){case"pes":$=tt.ts.parsePesType(k,p.table),F=tt.ts.parsePayloadUnitStartIndicator(k),$==="video"&&F&&(V=tt.ts.parsePesTime(k),V&&(V.type="video",O.video.push(V),se=!0));break}if(se)break;g-=mi,v-=mi;continue}g--,v--}},GP=function(d,p){if(d.audio&&d.audio.length){var O=p;(typeof O>"u"||isNaN(O))&&(O=d.audio[0].dts),d.audio.forEach(function(k){k.dts=la(k.dts,O),k.pts=la(k.pts,O),k.dtsTime=k.dts/yn,k.ptsTime=k.pts/yn})}if(d.video&&d.video.length){var g=p;if((typeof g>"u"||isNaN(g))&&(g=d.video[0].dts),d.video.forEach(function(k){k.dts=la(k.dts,g),k.pts=la(k.pts,g),k.dtsTime=k.dts/yn,k.ptsTime=k.pts/yn}),d.firstKeyFrame){var v=d.firstKeyFrame;v.dts=la(v.dts,g),v.pts=la(v.pts,g),v.dtsTime=v.dts/yn,v.ptsTime=v.pts/yn}}},KP=function(d){for(var p=!1,O=0,g=null,v=null,k=0,Q=0,$;d.length-Q>=3;){var F=tt.aac.parseType(d,Q);switch(F){case"timed-metadata":if(d.length-Q<10){p=!0;break}if(k=tt.aac.parseId3TagSize(d,Q),k>d.length){p=!0;break}v===null&&($=d.subarray(Q,Q+k),v=tt.aac.parseAacTimestamp($)),Q+=k;break;case"audio":if(d.length-Q<7){p=!0;break}if(k=tt.aac.parseAdtsSize(d,Q),k>d.length){p=!0;break}g===null&&($=d.subarray(Q,Q+k),g=tt.aac.parseSampleRate($)),O++,Q+=k;break;default:Q++;break}if(p)return null}if(g===null||v===null)return null;var V=yn/g,z={audio:[{type:"audio",dts:v,pts:v},{type:"audio",dts:v+O*1024*V,pts:v+O*1024*V}]};return z},JP=function(d){var p={pid:null,table:null},O={};HP(d,p);for(var g in p.table)if(p.table.hasOwnProperty(g)){var v=p.table[g];switch(v){case xy.H264_STREAM_TYPE:O.video=[],YP(d,p,O),O.video.length===0&&delete O.video;break;case xy.ADTS_STREAM_TYPE:O.audio=[],wy(d,p,O),O.audio.length===0&&delete O.audio;break}}return O},eD=function(d,p){var O=tt.aac.isLikelyAacData(d),g;return O?g=KP(d):g=JP(d),!g||!g.audio&&!g.video?null:(GP(g,p),g)},tD={inspect:eD,parseAudioPes_:wy};const iD=function(d,p){p.on("data",function(O){const g=O.initSegment;O.initSegment={data:g.buffer,byteOffset:g.byteOffset,byteLength:g.byteLength};const v=O.data;O.data=v.buffer,d.postMessage({action:"data",segment:O,byteOffset:v.byteOffset,byteLength:v.byteLength},[O.data])}),p.on("done",function(O){d.postMessage({action:"done"})}),p.on("gopInfo",function(O){d.postMessage({action:"gopInfo",gopInfo:O})}),p.on("videoSegmentTimingInfo",function(O){const g={start:{decode:Ze.videoTsToSeconds(O.start.dts),presentation:Ze.videoTsToSeconds(O.start.pts)},end:{decode:Ze.videoTsToSeconds(O.end.dts),presentation:Ze.videoTsToSeconds(O.end.pts)},baseMediaDecodeTime:Ze.videoTsToSeconds(O.baseMediaDecodeTime)};O.prependedContentDuration&&(g.prependedContentDuration=Ze.videoTsToSeconds(O.prependedContentDuration)),d.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:g})}),p.on("audioSegmentTimingInfo",function(O){const g={start:{decode:Ze.videoTsToSeconds(O.start.dts),presentation:Ze.videoTsToSeconds(O.start.pts)},end:{decode:Ze.videoTsToSeconds(O.end.dts),presentation:Ze.videoTsToSeconds(O.end.pts)},baseMediaDecodeTime:Ze.videoTsToSeconds(O.baseMediaDecodeTime)};O.prependedContentDuration&&(g.prependedContentDuration=Ze.videoTsToSeconds(O.prependedContentDuration)),d.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:g})}),p.on("id3Frame",function(O){d.postMessage({action:"id3Frame",id3Frame:O})}),p.on("caption",function(O){d.postMessage({action:"caption",caption:O})}),p.on("trackinfo",function(O){d.postMessage({action:"trackinfo",trackInfo:O})}),p.on("audioTimingInfo",function(O){d.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:Ze.videoTsToSeconds(O.start),end:Ze.videoTsToSeconds(O.end)}})}),p.on("videoTimingInfo",function(O){d.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:Ze.videoTsToSeconds(O.start),end:Ze.videoTsToSeconds(O.end)}})}),p.on("log",function(O){d.postMessage({action:"log",log:O})})};class Cy{constructor(p,O){this.options=O||{},this.self=p,this.init()}init(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new KA.Transmuxer(this.options),iD(this.self,this.transmuxer)}pushMp4Captions(p){this.captionParser||(this.captionParser=new $P,this.captionParser.init());const O=new Uint8Array(p.data,p.byteOffset,p.byteLength),g=this.captionParser.parse(O,p.trackIds,p.timescales);this.self.postMessage({action:"mp4Captions",captions:g&&g.captions||[],logs:g&&g.logs||[],data:O.buffer},[O.buffer])}initMp4WebVttParser(p){this.webVttParser||(this.webVttParser=new Ty);const O=new Uint8Array(p.data,p.byteOffset,p.byteLength);this.webVttParser.init(O)}getMp4WebVttText(p){this.webVttParser||(this.webVttParser=new Ty);const O=new Uint8Array(p.data,p.byteOffset,p.byteLength),g=this.webVttParser.parseSegment(O);this.self.postMessage({action:"getMp4WebVttText",mp4VttCues:g||[],data:O.buffer},[O.buffer])}probeMp4StartTime({timescales:p,data:O}){const g=Vo.startTime(p,O);this.self.postMessage({action:"probeMp4StartTime",startTime:g,data:O},[O.buffer])}probeMp4Tracks({data:p}){const O=Vo.tracks(p);this.self.postMessage({action:"probeMp4Tracks",tracks:O,data:p},[p.buffer])}probeEmsgID3({data:p,offset:O}){const g=Vo.getEmsgID3(p,O);this.self.postMessage({action:"probeEmsgID3",id3Frames:g,emsgData:p},[p.buffer])}probeTs({data:p,baseStartTime:O}){const g=typeof O=="number"&&!isNaN(O)?O*Ze.ONE_SECOND_IN_TS:void 0,v=tD.inspect(p,g);let k=null;v&&(k={hasVideo:v.video&&v.video.length===2||!1,hasAudio:v.audio&&v.audio.length===2||!1},k.hasVideo&&(k.videoStart=v.video[0].ptsTime),k.hasAudio&&(k.audioStart=v.audio[0].ptsTime)),this.self.postMessage({action:"probeTs",result:k,data:p},[p.buffer])}clearAllMp4Captions(){this.captionParser&&this.captionParser.clearAllCaptions()}clearParsedMp4Captions(){this.captionParser&&this.captionParser.clearParsedCaptions()}push(p){const O=new Uint8Array(p.data,p.byteOffset,p.byteLength);this.transmuxer.push(O)}reset(){this.transmuxer.reset()}setTimestampOffset(p){const O=p.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(Ze.secondsToVideoTs(O)))}setAudioAppendStart(p){this.transmuxer.setAudioAppendStart(Math.ceil(Ze.secondsToVideoTs(p.appendStart)))}setRemux(p){this.transmuxer.setRemux(p.remux)}flush(p){this.transmuxer.flush(),self.postMessage({action:"done",type:"transmuxed"})}endTimeline(){this.transmuxer.endTimeline(),self.postMessage({action:"endedtimeline",type:"transmuxed"})}alignGopsWith(p){this.transmuxer.alignGopsWith(p.gopsToAlignWith.slice())}}self.onmessage=function(d){if(d.data.action==="init"&&d.data.options){this.messageHandlers=new Cy(self,d.data.options);return}this.messageHandlers||(this.messageHandlers=new Cy(self)),d.data&&d.data.action&&d.data.action!=="init"&&this.messageHandlers[d.data.action]&&this.messageHandlers[d.data.action](d.data)}}));var Z5=ww(z5);const W5=(r,e,t)=>{const{type:i,initSegment:s,captions:n,captionStreams:a,metadata:o,videoFrameDtsTime:l,videoFramePtsTime:u}=r.data.segment;e.buffer.push({captions:n,captionStreams:a,metadata:o});const c=r.data.segment.boxes||{data:r.data.segment.data},h={type:i,data:new Uint8Array(c.data,c.data.byteOffset,c.data.byteLength),initSegment:new Uint8Array(s.data,s.byteOffset,s.byteLength)};typeof l<"u"&&(h.videoFrameDtsTime=l),typeof u<"u"&&(h.videoFramePtsTime=u),t(h)},H5=({transmuxedData:r,callback:e})=>{r.buffer=[],e(r)},Y5=(r,e)=>{e.gopInfo=r.data.gopInfo},Ew=r=>{const{transmuxer:e,bytes:t,audioAppendStart:i,gopsToAlignWith:s,remux:n,onData:a,onTrackInfo:o,onAudioTimingInfo:l,onVideoTimingInfo:u,onVideoSegmentTimingInfo:c,onAudioSegmentTimingInfo:h,onId3:f,onCaptions:m,onDone:S,onEndedTimeline:y,onTransmuxerLog:E,isEndOfTimeline:C,segment:_,triggerSegmentEventFn:b}=r,T={buffer:[]};let w=C;const A=N=>{e.currentTransmux===r&&(N.data.action==="data"&&W5(N,T,a),N.data.action==="trackinfo"&&o(N.data.trackInfo),N.data.action==="gopInfo"&&Y5(N,T),N.data.action==="audioTimingInfo"&&l(N.data.audioTimingInfo),N.data.action==="videoTimingInfo"&&u(N.data.videoTimingInfo),N.data.action==="videoSegmentTimingInfo"&&c(N.data.videoSegmentTimingInfo),N.data.action==="audioSegmentTimingInfo"&&h(N.data.audioSegmentTimingInfo),N.data.action==="id3Frame"&&f([N.data.id3Frame],N.data.id3Frame.dispatchType),N.data.action==="caption"&&m(N.data.caption),N.data.action==="endedtimeline"&&(w=!1,y()),N.data.action==="log"&&E(N.data.log),N.data.type==="transmuxed"&&(w||(e.onmessage=null,H5({transmuxedData:T,callback:S}),Aw(e))))},I=()=>{const N={message:"Received an error message from the transmuxer worker",metadata:{errorType:H.Error.StreamingFailedToTransmuxSegment,segmentInfo:kn({segment:_})}};S(null,N)};if(e.onmessage=A,e.onerror=I,i&&e.postMessage({action:"setAudioAppendStart",appendStart:i}),Array.isArray(s)&&e.postMessage({action:"alignGopsWith",gopsToAlignWith:s}),typeof n<"u"&&e.postMessage({action:"setRemux",remux:n}),t.byteLength){const N=t instanceof ArrayBuffer?t:t.buffer,P=t instanceof ArrayBuffer?0:t.byteOffset;b({type:"segmenttransmuxingstart",segment:_}),e.postMessage({action:"push",data:N,byteOffset:P,byteLength:t.byteLength},[N])}C&&e.postMessage({action:"endTimeline"}),e.postMessage({action:"flush"})},Aw=r=>{r.currentTransmux=null,r.transmuxQueue.length&&(r.currentTransmux=r.transmuxQueue.shift(),typeof r.currentTransmux=="function"?r.currentTransmux():Ew(r.currentTransmux))},av=(r,e)=>{r.postMessage({action:e}),Aw(r)},Pw=(r,e)=>{if(!e.currentTransmux){e.currentTransmux=r,av(e,r);return}e.transmuxQueue.push(av.bind(null,e,r))},G5=r=>{Pw("reset",r)},K5=r=>{Pw("endTimeline",r)},Dw=r=>{if(!r.transmuxer.currentTransmux){r.transmuxer.currentTransmux=r,Ew(r);return}r.transmuxer.transmuxQueue.push(r)},J5=r=>{const e=new Z5;e.currentTransmux=null,e.transmuxQueue=[];const t=e.terminate;return e.terminate=()=>(e.currentTransmux=null,e.transmuxQueue.length=0,t.call(e)),e.postMessage({action:"init",options:r}),e};var lp={reset:G5,endTimeline:K5,transmux:Dw,createTransmuxer:J5};const Ia=function(r){const e=r.transmuxer,t=r.endAction||r.action,i=r.callback,s=Lt({},r,{endAction:null,transmuxer:null,callback:null}),n=a=>{a.data.action===t&&(e.removeEventListener("message",n),a.data.data&&(a.data.data=new Uint8Array(a.data.data,r.byteOffset||0,r.byteLength||a.data.data.byteLength),r.data&&(r.data=a.data.data)),i(a.data))};if(e.addEventListener("message",n),r.data){const a=r.data instanceof ArrayBuffer;s.byteOffset=a?0:r.data.byteOffset,s.byteLength=r.data.byteLength;const o=[a?r.data:r.data.buffer];e.postMessage(s,o)}else e.postMessage(s)},Hr={FAILURE:2,TIMEOUT:-101,ABORTED:-102},Mw="wvtt",Dm=r=>{r.forEach(e=>{e.abort()})},e3=r=>({bandwidth:r.bandwidth,bytesReceived:r.bytesReceived||0,roundTripTime:r.roundTripTime||0}),t3=r=>{const e=r.target,i={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-e.requestTime||0};return i.bytesReceived=r.loaded,i.bandwidth=Math.floor(i.bytesReceived/i.roundTripTime*8*1e3),i},U0=(r,e)=>{const{requestType:t}=e,i=jn({requestType:t,request:e,error:r});return e.timedout?{status:e.status,message:"HLS request timed-out at URL: "+e.uri,code:Hr.TIMEOUT,xhr:e,metadata:i}:e.aborted?{status:e.status,message:"HLS request aborted at URL: "+e.uri,code:Hr.ABORTED,xhr:e,metadata:i}:r?{status:e.status,message:"HLS request errored at URL: "+e.uri,code:Hr.FAILURE,xhr:e,metadata:i}:e.responseType==="arraybuffer"&&e.response.byteLength===0?{status:e.status,message:"Empty HLS response at URL: "+e.uri,code:Hr.FAILURE,xhr:e,metadata:i}:null},ov=(r,e,t,i)=>(s,n)=>{const a=n.response,o=U0(s,n);if(o)return t(o,r);if(a.byteLength!==16)return t({status:n.status,message:"Invalid HLS key at URL: "+n.uri,code:Hr.FAILURE,xhr:n},r);const l=new DataView(a),u=new Uint32Array([l.getUint32(0),l.getUint32(4),l.getUint32(8),l.getUint32(12)]);for(let h=0;h<e.length;h++)e[h].bytes=u;const c={uri:n.uri};return i({type:"segmentkeyloadcomplete",segment:r,keyInfo:c}),t(null,r)},i3=(r,e)=>{e===Mw&&r.transmuxer.postMessage({action:"initMp4WebVttParser",data:r.map.bytes})},r3=(r,e,t)=>{e===Mw&&Ia({action:"getMp4WebVttText",data:r.bytes,transmuxer:r.transmuxer,callback:({data:i,mp4VttCues:s})=>{r.bytes=i,t(null,r,{mp4VttCues:s})}})},Iw=(r,e)=>{const t=c0(r.map.bytes);if(t!=="mp4"){const i=r.map.resolvedUri||r.map.uri,s=t||"unknown";return e({internal:!0,message:`Found unsupported ${s} container for initialization segment at URL: ${i}`,code:Hr.FAILURE,metadata:{mediaType:s}})}Ia({action:"probeMp4Tracks",data:r.map.bytes,transmuxer:r.transmuxer,callback:({tracks:i,data:s})=>(r.map.bytes=s,i.forEach(function(n){r.map.tracks=r.map.tracks||{},!r.map.tracks[n.type]&&(r.map.tracks[n.type]=n,typeof n.id=="number"&&n.timescale&&(r.map.timescales=r.map.timescales||{},r.map.timescales[n.id]=n.timescale),n.type==="text"&&i3(r,n.codec))}),e(null))})},s3=({segment:r,finishProcessingFn:e,triggerSegmentEventFn:t})=>(i,s)=>{const n=U0(i,s);if(n)return e(n,r);const a=new Uint8Array(s.response);if(t({type:"segmentloaded",segment:r}),r.map.key)return r.map.encryptedBytes=a,e(null,r);r.map.bytes=a,Iw(r,function(o){if(o)return o.xhr=s,o.status=s.status,e(o,r);e(null,r)})},n3=({segment:r,finishProcessingFn:e,responseType:t,triggerSegmentEventFn:i})=>(s,n)=>{const a=U0(s,n);if(a)return e(a,r);i({type:"segmentloaded",segment:r});const o=t==="arraybuffer"||!n.responseText?n.response:X5(n.responseText.substring(r.lastReachedChar||0));return r.stats=e3(n),r.key?r.encryptedBytes=new Uint8Array(o):r.bytes=new Uint8Array(o),e(null,r)},a3=({segment:r,bytes:e,trackInfoFn:t,timingInfoFn:i,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:n,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:h,onTransmuxerLog:f,triggerSegmentEventFn:m})=>{const S=r.map&&r.map.tracks||{},y=!!(S.audio&&S.video);let E=i.bind(null,r,"audio","start");const C=i.bind(null,r,"audio","end");let _=i.bind(null,r,"video","start");const b=i.bind(null,r,"video","end"),T=()=>Dw({bytes:e,transmuxer:r.transmuxer,audioAppendStart:r.audioAppendStart,gopsToAlignWith:r.gopsToAlignWith,remux:y,onData:w=>{w.type=w.type==="combined"?"video":w.type,c(r,w)},onTrackInfo:w=>{t&&(y&&(w.isMuxed=!0),t(r,w))},onAudioTimingInfo:w=>{E&&typeof w.start<"u"&&(E(w.start),E=null),C&&typeof w.end<"u"&&C(w.end)},onVideoTimingInfo:w=>{_&&typeof w.start<"u"&&(_(w.start),_=null),b&&typeof w.end<"u"&&b(w.end)},onVideoSegmentTimingInfo:w=>{const A={pts:{start:w.start.presentation,end:w.end.presentation},dts:{start:w.start.decode,end:w.end.decode}};m({type:"segmenttransmuxingtiminginfoavailable",segment:r,timingInfo:A}),s(w)},onAudioSegmentTimingInfo:w=>{const A={pts:{start:w.start.pts,end:w.end.pts},dts:{start:w.start.dts,end:w.end.dts}};m({type:"segmenttransmuxingtiminginfoavailable",segment:r,timingInfo:A}),n(w)},onId3:(w,A)=>{a(r,w,A)},onCaptions:w=>{o(r,[w])},isEndOfTimeline:l,onEndedTimeline:()=>{u()},onTransmuxerLog:f,onDone:(w,A)=>{h&&(w.type=w.type==="combined"?"video":w.type,m({type:"segmenttransmuxingcomplete",segment:r}),h(A,r,w))},segment:r,triggerSegmentEventFn:m});Ia({action:"probeTs",transmuxer:r.transmuxer,data:e,baseStartTime:r.baseStartTime,callback:w=>{r.bytes=e=w.data;const A=w.result;A&&(t(r,{hasAudio:A.hasAudio,hasVideo:A.hasVideo,isMuxed:y}),t=null),T()}})},Rw=({segment:r,bytes:e,trackInfoFn:t,timingInfoFn:i,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:n,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:h,onTransmuxerLog:f,triggerSegmentEventFn:m})=>{let S=new Uint8Array(e);if(kQ(S)){r.isFmp4=!0;const{tracks:y}=r.map;if(y.text&&(!y.audio||!y.video)){c(r,{data:S,type:"text"}),r3(r,y.text.codec,h);return}const C={isFmp4:!0,hasVideo:!!y.video,hasAudio:!!y.audio};y.audio&&y.audio.codec&&y.audio.codec!=="enca"&&(C.audioCodec=y.audio.codec),y.video&&y.video.codec&&y.video.codec!=="encv"&&(C.videoCodec=y.video.codec),y.video&&y.audio&&(C.isMuxed=!0),t(r,C);const _=(b,T)=>{c(r,{data:S,type:C.hasAudio&&!C.isMuxed?"audio":"video"}),T&&T.length&&a(r,T),b&&b.length&&o(r,b),h(null,r,{})};Ia({action:"probeMp4StartTime",timescales:r.map.timescales,data:S,transmuxer:r.transmuxer,callback:({data:b,startTime:T})=>{e=b.buffer,r.bytes=S=b,C.hasAudio&&!C.isMuxed&&i(r,"audio","start",T),C.hasVideo&&i(r,"video","start",T),Ia({action:"probeEmsgID3",data:S,transmuxer:r.transmuxer,offset:T,callback:({emsgData:w,id3Frames:A})=>{if(e=w.buffer,r.bytes=S=w,!y.video||!w.byteLength||!r.transmuxer){_(void 0,A);return}Ia({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:r.transmuxer,data:S,timescales:r.map.timescales,trackIds:[y.video.id],callback:I=>{e=I.data.buffer,r.bytes=S=I.data,I.logs.forEach(function(N){f(Je(N,{stream:"mp4CaptionParser"}))}),_(I.captions,A)}})}})}});return}if(!r.transmuxer){h(null,r,{});return}if(typeof r.container>"u"&&(r.container=c0(S)),r.container!=="ts"&&r.container!=="aac"){t(r,{hasAudio:!1,hasVideo:!1}),h(null,r,{});return}a3({segment:r,bytes:e,trackInfoFn:t,timingInfoFn:i,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:n,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:h,onTransmuxerLog:f,triggerSegmentEventFn:m})},Lw=function({id:r,key:e,encryptedBytes:t,decryptionWorker:i,segment:s,doneFn:n},a){const o=u=>{if(u.data.source===r){i.removeEventListener("message",o);const c=u.data.decrypted;a(new Uint8Array(c.bytes,c.byteOffset,c.byteLength))}};i.onerror=()=>{const u="An error occurred in the decryption worker",c=kn({segment:s}),h={message:u,metadata:{error:new Error(u),errorType:H.Error.StreamingFailedToDecryptSegment,segmentInfo:c,keyInfo:{uri:s.key.resolvedUri||s.map.key.resolvedUri}}};n(h,s)},i.addEventListener("message",o);let l;e.bytes.slice?l=e.bytes.slice():l=new Uint32Array(Array.prototype.slice.call(e.bytes)),i.postMessage(bw({source:r,encrypted:t,key:l,iv:e.iv}),[t.buffer,l.buffer])},o3=({decryptionWorker:r,segment:e,trackInfoFn:t,timingInfoFn:i,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:n,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:h,onTransmuxerLog:f,triggerSegmentEventFn:m})=>{m({type:"segmentdecryptionstart"}),Lw({id:e.requestId,key:e.key,encryptedBytes:e.encryptedBytes,decryptionWorker:r,segment:e,doneFn:h},S=>{e.bytes=S,m({type:"segmentdecryptioncomplete",segment:e}),Rw({segment:e,bytes:e.bytes,trackInfoFn:t,timingInfoFn:i,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:n,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:h,onTransmuxerLog:f,triggerSegmentEventFn:m})})},l3=({activeXhrs:r,decryptionWorker:e,trackInfoFn:t,timingInfoFn:i,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:n,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:h,onTransmuxerLog:f,triggerSegmentEventFn:m})=>{let S=0,y=!1;return(E,C)=>{if(!y){if(E)return y=!0,Dm(r),h(E,C);if(S+=1,S===r.length){const _=function(){if(C.encryptedBytes)return o3({decryptionWorker:e,segment:C,trackInfoFn:t,timingInfoFn:i,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:n,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:h,onTransmuxerLog:f,triggerSegmentEventFn:m});Rw({segment:C,bytes:C.bytes,trackInfoFn:t,timingInfoFn:i,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:n,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:h,onTransmuxerLog:f,triggerSegmentEventFn:m})};if(C.endOfAllRequests=Date.now(),C.map&&C.map.encryptedBytes&&!C.map.bytes)return m({type:"segmentdecryptionstart",segment:C}),Lw({decryptionWorker:e,id:C.requestId+"-init",encryptedBytes:C.map.encryptedBytes,key:C.map.key,segment:C,doneFn:h},b=>{C.map.bytes=b,m({type:"segmentdecryptioncomplete",segment:C}),Iw(C,T=>{if(T)return Dm(r),h(T,C);_()})});_()}}}},u3=({loadendState:r,abortFn:e})=>t=>{t.target.aborted&&e&&!r.calledAbortFn&&(e(),r.calledAbortFn=!0)},c3=({segment:r,progressFn:e,trackInfoFn:t,timingInfoFn:i,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:n,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c})=>h=>{if(!h.target.aborted)return r.stats=Je(r.stats,t3(h)),!r.stats.firstBytesReceivedAt&&r.stats.bytesReceived&&(r.stats.firstBytesReceivedAt=Date.now()),e(h,r)},h3=({xhr:r,xhrOptions:e,decryptionWorker:t,segment:i,abortFn:s,progressFn:n,trackInfoFn:a,timingInfoFn:o,videoSegmentTimingInfoFn:l,audioSegmentTimingInfoFn:u,id3Fn:c,captionsFn:h,isEndOfTimeline:f,endedTimelineFn:m,dataFn:S,doneFn:y,onTransmuxerLog:E,triggerSegmentEventFn:C})=>{const _=[],b=l3({activeXhrs:_,decryptionWorker:t,trackInfoFn:a,timingInfoFn:o,videoSegmentTimingInfoFn:l,audioSegmentTimingInfoFn:u,id3Fn:c,captionsFn:h,isEndOfTimeline:f,endedTimelineFn:m,dataFn:S,doneFn:y,onTransmuxerLog:E,triggerSegmentEventFn:C});if(i.key&&!i.key.bytes){const N=[i.key];i.map&&!i.map.bytes&&i.map.key&&i.map.key.resolvedUri===i.key.resolvedUri&&N.push(i.map.key);const P=Je(e,{uri:i.key.resolvedUri,responseType:"arraybuffer",requestType:"segment-key"}),R=ov(i,N,b,C),X={uri:i.key.resolvedUri};C({type:"segmentkeyloadstart",segment:i,keyInfo:X});const j=r(P,R);_.push(j)}if(i.map&&!i.map.bytes){if(i.map.key&&(!i.key||i.key.resolvedUri!==i.map.key.resolvedUri)){const j=Je(e,{uri:i.map.key.resolvedUri,responseType:"arraybuffer",requestType:"segment-key"}),Z=ov(i,[i.map.key],b,C),Y={uri:i.map.key.resolvedUri};C({type:"segmentkeyloadstart",segment:i,keyInfo:Y});const te=r(j,Z);_.push(te)}const P=Je(e,{uri:i.map.resolvedUri,responseType:"arraybuffer",headers:Am(i.map),requestType:"segment-media-initialization"}),R=s3({segment:i,finishProcessingFn:b,triggerSegmentEventFn:C});C({type:"segmentloadstart",segment:i});const X=r(P,R);_.push(X)}const T=Je(e,{uri:i.part&&i.part.resolvedUri||i.resolvedUri,responseType:"arraybuffer",headers:Am(i),requestType:"segment"}),w=n3({segment:i,finishProcessingFn:b,responseType:T.responseType,triggerSegmentEventFn:C});C({type:"segmentloadstart",segment:i});const A=r(T,w);A.addEventListener("progress",c3({segment:i,progressFn:n,trackInfoFn:a,timingInfoFn:o,videoSegmentTimingInfoFn:l,audioSegmentTimingInfoFn:u,id3Fn:c,captionsFn:h,isEndOfTimeline:f,endedTimelineFn:m,dataFn:S})),_.push(A);const I={};return _.forEach(N=>{N.addEventListener("loadend",u3({loadendState:I,abortFn:s}))}),()=>Dm(_)},wc=fr("PlaylistSelector"),lv=function(r){if(!r||!r.playlist)return;const e=r.playlist;return JSON.stringify({id:e.id,bandwidth:r.bandwidth,width:r.width,height:r.height,codecs:e.attributes&&e.attributes.CODECS||""})},Ra=function(r,e){if(!r)return"";const t=q.getComputedStyle(r);return t?t[e]:""},La=function(r,e){const t=r.slice();r.sort(function(i,s){const n=e(i,s);return n===0?t.indexOf(i)-t.indexOf(s):n})},q0=function(r,e){let t,i;return r.attributes.BANDWIDTH&&(t=r.attributes.BANDWIDTH),t=t||q.Number.MAX_VALUE,e.attributes.BANDWIDTH&&(i=e.attributes.BANDWIDTH),i=i||q.Number.MAX_VALUE,t-i},d3=function(r,e){let t,i;return r.attributes.RESOLUTION&&r.attributes.RESOLUTION.width&&(t=r.attributes.RESOLUTION.width),t=t||q.Number.MAX_VALUE,e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width&&(i=e.attributes.RESOLUTION.width),i=i||q.Number.MAX_VALUE,t===i&&r.attributes.BANDWIDTH&&e.attributes.BANDWIDTH?r.attributes.BANDWIDTH-e.attributes.BANDWIDTH:t-i};let Qw=function(r){const{main:e,bandwidth:t,playerWidth:i,playerHeight:s,playerObjectFit:n,limitRenditionByPlayerDimensions:a,playlistController:o}=r;if(!e)return;const l={bandwidth:t,width:i,height:s,limitRenditionByPlayerDimensions:a};let u=e.playlists;Mi.isAudioOnly(e)&&(u=o.getAudioTrackPlaylists_(),l.audioOnly=!0);let c=u.map(I=>{let N;const P=I.attributes&&I.attributes.RESOLUTION&&I.attributes.RESOLUTION.width,R=I.attributes&&I.attributes.RESOLUTION&&I.attributes.RESOLUTION.height;return N=I.attributes&&I.attributes.BANDWIDTH,N=N||q.Number.MAX_VALUE,{bandwidth:N,width:P,height:R,playlist:I}});La(c,(I,N)=>I.bandwidth-N.bandwidth),c=c.filter(I=>!Mi.isIncompatible(I.playlist));let h=c.filter(I=>Mi.isEnabled(I.playlist));h.length||(h=c.filter(I=>!Mi.isDisabled(I.playlist)));const f=h.filter(I=>I.bandwidth*Zt.BANDWIDTH_VARIANCE<t);let m=f[f.length-1];const S=f.filter(I=>I.bandwidth===m.bandwidth)[0];if(a===!1){const I=S||h[0]||c[0];if(I&&I.playlist){let N="sortedPlaylistReps";return S&&(N="bandwidthBestRep"),h[0]&&(N="enabledPlaylistReps"),wc(`choosing ${lv(I)} using ${N} with options`,l),I.playlist}return wc("could not choose a playlist with options",l),null}const y=f.filter(I=>I.width&&I.height);La(y,(I,N)=>I.width-N.width);const E=y.filter(I=>I.width===i&&I.height===s);m=E[E.length-1];const C=E.filter(I=>I.bandwidth===m.bandwidth)[0];let _,b,T;C||(_=y.filter(I=>n==="cover"?I.width>i&&I.height>s:I.width>i||I.height>s),b=_.filter(I=>I.width===_[0].width&&I.height===_[0].height),m=b[b.length-1],T=b.filter(I=>I.bandwidth===m.bandwidth)[0]);let w;if(o.leastPixelDiffSelector){const I=y.map(N=>(N.pixelDiff=Math.abs(N.width-i)+Math.abs(N.height-s),N));La(I,(N,P)=>N.pixelDiff===P.pixelDiff?P.bandwidth-N.bandwidth:N.pixelDiff-P.pixelDiff),w=I[0]}const A=w||T||C||S||h[0]||c[0];if(A&&A.playlist){let I="sortedPlaylistReps";return w?I="leastPixelDiffRep":T?I="resolutionPlusOneRep":C?I="resolutionBestRep":S?I="bandwidthBestRep":h[0]&&(I="enabledPlaylistReps"),wc(`choosing ${lv(A)} using ${I} with options`,l),A.playlist}return wc("could not choose a playlist with options",l),null};const uv=function(){let r=this.useDevicePixelRatio&&q.devicePixelRatio||1;return isNaN(this.customPixelRatio)||(r=this.customPixelRatio),Qw({main:this.playlists.main,bandwidth:this.systemBandwidth,playerWidth:parseInt(Ra(this.tech_.el(),"width"),10)*r,playerHeight:parseInt(Ra(this.tech_.el(),"height"),10)*r,playerObjectFit:this.usePlayerObjectFit?Ra(this.tech_.el(),"objectFit"):"",limitRenditionByPlayerDimensions:this.limitRenditionByPlayerDimensions,playlistController:this.playlistController_})},f3=function(r){let e=-1,t=-1;if(r<0||r>1)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){let i=this.useDevicePixelRatio&&q.devicePixelRatio||1;return isNaN(this.customPixelRatio)||(i=this.customPixelRatio),e<0&&(e=this.systemBandwidth,t=this.systemBandwidth),this.systemBandwidth>0&&this.systemBandwidth!==t&&(e=r*this.systemBandwidth+(1-r)*e,t=this.systemBandwidth),Qw({main:this.playlists.main,bandwidth:e,playerWidth:parseInt(Ra(this.tech_.el(),"width"),10)*i,playerHeight:parseInt(Ra(this.tech_.el(),"height"),10)*i,playerObjectFit:this.usePlayerObjectFit?Ra(this.tech_.el(),"objectFit"):"",limitRenditionByPlayerDimensions:this.limitRenditionByPlayerDimensions,playlistController:this.playlistController_})}},p3=function(r){const{main:e,currentTime:t,bandwidth:i,duration:s,segmentDuration:n,timeUntilRebuffer:a,currentTimeline:o,syncController:l}=r,u=e.playlists.filter(S=>!Mi.isIncompatible(S));let c=u.filter(Mi.isEnabled);c.length||(c=u.filter(S=>!Mi.isDisabled(S)));const f=c.filter(Mi.hasAttribute.bind(null,"BANDWIDTH")).map(S=>{const E=l.getSyncPoint(S,s,o,t)?1:2,_=Mi.estimateSegmentRequestTime(n,i,S)*E-a;return{playlist:S,rebufferingImpact:_}}),m=f.filter(S=>S.rebufferingImpact<=0);return La(m,(S,y)=>q0(y.playlist,S.playlist)),m.length?m[0]:(La(f,(S,y)=>S.rebufferingImpact-y.rebufferingImpact),f[0]||null)},m3=function(){const r=this.playlists.main.playlists.filter(Mi.isEnabled);return La(r,(t,i)=>q0(t,i)),r.filter(t=>!!wl(this.playlists.main,t).video)[0]||null},g3=r=>{let e=0,t;return r.bytes&&(t=new Uint8Array(r.bytes),r.segments.forEach(i=>{t.set(i,e),e+=i.byteLength})),t};function $w(r){try{return new URL(r).pathname.split("/").slice(-2).join("/")}catch{return""}}const O3=function(r,e,t){if(!r[t]){e.trigger({type:"usage",name:"vhs-608"});let i=t;/^cc708_/.test(t)&&(i="SERVICE"+t.split("_")[1]);const s=e.textTracks().getTrackById(i);if(s)r[t]=s;else{const n=e.options_.vhs&&e.options_.vhs.captionServices||{};let a=t,o=t,l=!1;const u=n[i];u&&(a=u.label,o=u.language,l=u.default),r[t]=e.addRemoteTextTrack({kind:"captions",id:i,default:l,label:a,language:o},!1).track}}},y3=function({inbandTextTracks:r,captionArray:e,timestampOffset:t}){if(!e)return;const i=q.WebKitDataCue||q.VTTCue;e.forEach(s=>{const n=s.stream;s.content?s.content.forEach(a=>{const o=new i(s.startTime+t,s.endTime+t,a.text);o.line=a.line,o.align="left",o.position=a.position,o.positionAlign="line-left",r[n].addCue(o)}):r[n].addCue(new i(s.startTime+t,s.endTime+t,s.text))})},b3=function(r){Object.defineProperties(r.frame,{id:{get(){return H.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),r.value.key}},value:{get(){return H.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),r.value.data}},privateData:{get(){return H.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),r.value.data}}})},v3=({inbandTextTracks:r,metadataArray:e,timestampOffset:t,videoDuration:i})=>{if(!e)return;const s=q.WebKitDataCue||q.VTTCue,n=r.metadataTrack_;if(!n||(e.forEach(c=>{const h=c.cueTime+t;typeof h!="number"||q.isNaN(h)||h<0||!(h<1/0)||!c.frames||!c.frames.length||c.frames.forEach(f=>{const m=new s(h,h,f.value||f.url||f.data||"");m.frame=f,m.value=f,b3(m),n.addCue(m)})}),!n.cues||!n.cues.length))return;const a=n.cues,o=[];for(let c=0;c<a.length;c++)a[c]&&o.push(a[c]);const l=o.reduce((c,h)=>{const f=c[h.startTime]||[];return f.push(h),c[h.startTime]=f,c},{}),u=Object.keys(l).sort((c,h)=>Number(c)-Number(h));u.forEach((c,h)=>{const f=l[c],m=isFinite(i)?i:c,S=Number(u[h+1])||m;f.forEach(y=>{y.endTime=S})})},S3={id:"ID",class:"CLASS",startDate:"START-DATE",duration:"DURATION",endDate:"END-DATE",endOnNext:"END-ON-NEXT",plannedDuration:"PLANNED-DURATION",scte35Out:"SCTE35-OUT",scte35In:"SCTE35-IN"},T3=new Set(["id","class","startDate","duration","endDate","endOnNext","startTime","endTime","processDateRange"]),_3=({inbandTextTracks:r,dateRanges:e})=>{const t=r.metadataTrack_;if(!t)return;const i=q.WebKitDataCue||q.VTTCue;e.forEach(s=>{for(const n of Object.keys(s)){if(T3.has(n))continue;const a=new i(s.startTime,s.endTime,"");a.id=s.id,a.type="com.apple.quicktime.HLS",a.value={key:S3[n],data:s[n]},(n==="scte35Out"||n==="scte35In")&&(a.value.data=new Uint8Array(a.value.data.match(/[\da-f]{2}/gi)).buffer),t.addCue(a)}s.processDateRange()})},cv=(r,e,t)=>{r.metadataTrack_||(r.metadataTrack_=t.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,H.browser.IS_ANY_SAFARI||(r.metadataTrack_.inBandMetadataTrackDispatchType=e))},dl=function(r,e,t){let i,s;if(t&&t.cues)for(i=t.cues.length;i--;)s=t.cues[i],s.startTime>=r&&s.endTime<=e&&t.removeCue(s)},x3=function(r){const e=r.cues;if(!e)return;const t={};for(let i=e.length-1;i>=0;i--){const s=e[i],n=`${s.startTime}-${s.endTime}-${s.text}`;t[n]?r.removeCue(s):t[n]=s}},w3=(r,e,t)=>{if(typeof e>"u"||e===null||!r.length)return[];const i=Math.ceil((e-t+3)*Dn.ONE_SECOND_IN_TS);let s;for(s=0;s<r.length&&!(r[s].pts>i);s++);return r.slice(s)},C3=(r,e,t)=>{if(!e.length)return r;if(t)return e.slice();const i=e[0].pts;let s=0;for(s;s<r.length&&!(r[s].pts>=i);s++);return r.slice(0,s).concat(e)},k3=(r,e,t,i)=>{const s=Math.ceil((e-i)*Dn.ONE_SECOND_IN_TS),n=Math.ceil((t-i)*Dn.ONE_SECOND_IN_TS),a=r.slice();let o=r.length;for(;o--&&!(r[o].pts<=n););if(o===-1)return a;let l=o+1;for(;l--&&!(r[l].pts<=s););return l=Math.max(l,0),a.splice(l,o-l+1),a},E3=function(r,e){if(!r&&!e||!r&&e||r&&!e)return!1;if(r===e)return!0;const t=Object.keys(r).sort(),i=Object.keys(e).sort();if(t.length!==i.length)return!1;for(let s=0;s<t.length;s++){const n=t[s];if(n!==i[s]||r[n]!==e[n])return!1}return!0},A3=function(r,e,t){e=e||[];const i=[];let s=0;for(let n=0;n<e.length;n++){const a=e[n];if(r===a.timeline&&(i.push(n),s+=a.duration,s>t))return n}return i.length===0?0:i[i.length-1]},Jo=1,P3=500,hv=r=>typeof r=="number"&&isFinite(r),Cc=1/60,D3=(r,e,t)=>r!=="main"||!e||!t?null:!t.hasAudio&&!t.hasVideo?"Neither audio nor video found in segment.":e.hasVideo&&!t.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!e.hasVideo&&t.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null,M3=(r,e,t)=>{let i=e-Zt.BACK_BUFFER_LENGTH;r.length&&(i=Math.max(i,r.start(0)));const s=e-t;return Math.min(s,i)},da=r=>{const{startOfSegment:e,duration:t,segment:i,part:s,playlist:{mediaSequence:n,id:a,segments:o=[]},mediaIndex:l,partIndex:u,timeline:c}=r,h=o.length-1;let f="mediaIndex/partIndex increment";r.getMediaInfoForTime?f=`getMediaInfoForTime (${r.getMediaInfoForTime})`:r.isSyncRequest&&(f="getSyncSegmentCandidate (isSyncRequest)"),r.independent&&(f+=` with independent ${r.independent}`);const m=typeof u=="number",S=r.segment.uri?"segment":"pre-segment",y=m?tw({preloadSegment:i})-1:0;return`${S} [${n+l}/${n+h}]`+(m?` part [${u}/${y}]`:"")+` segment start/end [${i.start} => ${i.end}]`+(m?` part start/end [${s.start} => ${s.end}]`:"")+` startOfSegment [${e}] duration [${t}] timeline [${c}] selected by [${f}] playlist [${a}]`},dv=r=>`${r}TimingInfo`,I3=({segmentTimeline:r,currentTimeline:e,startOfSegment:t,buffered:i,overrideCheck:s})=>!s&&r===e?null:r<e?t:i.length?i.end(i.length-1):t,Mm=({timelineChangeController:r,currentTimeline:e,segmentTimeline:t,loaderType:i,audioDisabled:s})=>{if(e===t)return!1;if(i==="audio"){const n=r.lastTimelineChange({type:"main"});return!n||n.to!==t}if(i==="main"&&s){const n=r.pendingTimelineChange({type:"audio"});return!(n&&n.to===t)}return!1},R3=r=>{if(!r)return!1;const e=r.pendingTimelineChange({type:"audio"}),t=r.pendingTimelineChange({type:"main"}),i=e&&t,s=i&&e.to!==t.to;return!!(i&&e.from!==-1&&t.from!==-1&&s)},L3=r=>{const e=r.timelineChangeController_.pendingTimelineChange({type:"audio"}),t=r.timelineChangeController_.pendingTimelineChange({type:"main"});return e&&t&&e.to<t.to},Vs=r=>{const e=r.pendingSegment_;if(!e)return;if(Mm({timelineChangeController:r.timelineChangeController_,currentTimeline:r.currentTimeline_,segmentTimeline:e.timeline,loaderType:r.loaderType_,audioDisabled:r.audioDisabled_})&&R3(r.timelineChangeController_)){if(L3(r)){r.timelineChangeController_.trigger("audioTimelineBehind");return}r.timelineChangeController_.trigger("fixBadTimelineChange")}},Q3=r=>{let e=0;return["video","audio"].forEach(function(t){const i=r[`${t}TimingInfo`];if(!i)return;const{start:s,end:n}=i;let a;typeof s=="bigint"||typeof n=="bigint"?a=q.BigInt(n)-q.BigInt(s):typeof s=="number"&&typeof n=="number"&&(a=n-s),typeof a<"u"&&a>e&&(e=a)}),typeof e=="bigint"&&e<Number.MAX_SAFE_INTEGER&&(e=Number(e)),e},fv=({segmentDuration:r,maxDuration:e})=>r?Math.round(r)>e+Zr:!1,$3=(r,e)=>{if(e!=="hls")return null;const t=Q3({audioTimingInfo:r.audioTimingInfo,videoTimingInfo:r.videoTimingInfo});if(!t)return null;const i=r.playlist.targetDuration,s=fv({segmentDuration:t,maxDuration:i*2}),n=fv({segmentDuration:t,maxDuration:i}),a=`Segment with index ${r.mediaIndex} from playlist ${r.playlist.id} has a duration of ${t} when the reported duration is ${r.duration} and the target duration is ${i}. For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1`;return s||n?{severity:s?"warn":"info",message:a}:null},kn=({type:r,segment:e})=>{if(!e)return;const t=!!(e.key||e.map&&e.map.ke),i=!!(e.map&&!e.map.bytes),s=e.startOfSegment===void 0?e.start:e.startOfSegment;return{type:r||e.type,uri:e.resolvedUri||e.uri,start:s,duration:e.duration,isEncrypted:t,isMediaInitialization:i}};class Im extends H.EventTarget{constructor(e,t={}){if(super(),!e)throw new TypeError("Initialization settings are required");if(typeof e.currentTime!="function")throw new TypeError("No currentTime getter specified");if(!e.mediaSource)throw new TypeError("No MediaSource specified");this.bandwidth=e.bandwidth,this.throughput={rate:0,count:0},this.roundTrip=NaN,this.resetStats_(),this.mediaIndex=null,this.partIndex=null,this.hasPlayed_=e.hasPlayed,this.currentTime_=e.currentTime,this.seekable_=e.seekable,this.seeking_=e.seeking,this.duration_=e.duration,this.mediaSource_=e.mediaSource,this.vhs_=e.vhs,this.loaderType_=e.loaderType,this.currentMediaInfo_=void 0,this.startingMediaInfo_=void 0,this.segmentMetadataTrack_=e.segmentMetadataTrack,this.goalBufferLength_=e.goalBufferLength,this.sourceType_=e.sourceType,this.sourceUpdater_=e.sourceUpdater,this.inbandTextTracks_=e.inbandTextTracks,this.state_="INIT",this.timelineChangeController_=e.timelineChangeController,this.shouldSaveSegmentTimingInfo_=!0,this.parse708captions_=e.parse708captions,this.useDtsForTimestampOffset_=e.useDtsForTimestampOffset,this.captionServices_=e.captionServices,this.exactManifestTimings=e.exactManifestTimings,this.addMetadataToTextTrack=e.addMetadataToTextTrack,this.checkBufferTimeout_=null,this.error_=void 0,this.currentTimeline_=-1,this.shouldForceTimestampOffsetAfterResync_=!1,this.pendingSegment_=null,this.xhrOptions_=null,this.pendingSegments_=[],this.audioDisabled_=!1,this.isPendingTimestampOffset_=!1,this.gopBuffer_=[],this.timeMapping_=0,this.safeAppend_=!1,this.appendInitSegment_={audio:!0,video:!0},this.playlistOfLastInitSegment_={audio:null,video:null},this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_={id3:[],caption:[]},this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=null,this.activeInitSegmentId_=null,this.initSegments_={},this.cacheEncryptionKeys_=e.cacheEncryptionKeys,this.keyCache_={},this.decrypter_=e.decrypter,this.syncController_=e.syncController,this.syncPoint_={segmentIndex:0,time:0},this.transmuxer_=this.createTransmuxer_(),this.triggerSyncInfoUpdate_=()=>this.trigger("syncinfoupdate"),this.syncController_.on("syncinfoupdate",this.triggerSyncInfoUpdate_),this.mediaSource_.addEventListener("sourceopen",()=>{this.isEndOfStream_()||(this.ended_=!1)}),this.fetchAtBuffer_=!1,this.logger_=fr(`SegmentLoader[${this.loaderType_}]`),Object.defineProperty(this,"state",{get(){return this.state_},set(i){i!==this.state_&&(this.logger_(`${this.state_} -> ${i}`),this.state_=i,this.trigger("statechange"))}}),this.sourceUpdater_.on("ready",()=>{this.hasEnoughInfoToAppend_()?this.processCallQueue_():Vs(this)}),this.sourceUpdater_.on("codecschange",i=>{this.trigger(Lt({type:"codecschange"},i))}),this.loaderType_==="main"&&this.timelineChangeController_.on("pendingtimelinechange",()=>{this.hasEnoughInfoToAppend_()?this.processCallQueue_():Vs(this)}),this.loaderType_==="audio"&&this.timelineChangeController_.on("timelinechange",i=>{this.trigger(Lt({type:"timelinechange"},i)),this.hasEnoughInfoToLoad_()?this.processLoadQueue_():Vs(this),this.hasEnoughInfoToAppend_()?this.processCallQueue_():Vs(this)})}get mediaSequenceSync_(){return this.syncController_.getMediaSequenceSync(this.loaderType_)}createTransmuxer_(){return lp.createTransmuxer({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_,captionServices:this.captionServices_})}resetStats_(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0,this.mediaAppends=0}dispose(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&q.clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()}setAudio(e){this.audioDisabled_=!e,e?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())}abort(){if(this.state!=="WAITING"){this.pendingSegment_&&(this.pendingSegment_=null),this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_);return}this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()}abort_(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_),this.waitingOnRemove_=!1,q.clearTimeout(this.quotaExceededErrorRetryTimeout_),this.quotaExceededErrorRetryTimeout_=null}checkForAbort_(e){return this.state==="APPENDING"&&!this.pendingSegment_?(this.state="READY",!0):!this.pendingSegment_||this.pendingSegment_.requestId!==e}error(e){return typeof e<"u"&&(this.logger_("error occurred:",e),this.error_=e),this.pendingSegment_=null,this.error_}endOfStream(){this.ended_=!0,this.transmuxer_&&lp.reset(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")}buffered_(){const e=this.getMediaInfo_();if(!this.sourceUpdater_||!e)return Yt();if(this.loaderType_==="main"){const{hasAudio:t,hasVideo:i,isMuxed:s}=e;if(i&&t&&!this.audioDisabled_&&!s)return this.sourceUpdater_.buffered();if(i)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()}initSegmentForMap(e,t=!1){if(!e)return null;const i=Vh(e);let s=this.initSegments_[i];return t&&!s&&e.bytes&&(this.initSegments_[i]=s={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:e.bytes,tracks:e.tracks,timescales:e.timescales}),s||e}segmentKey(e,t=!1){if(!e)return null;const i=vw(e);let s=this.keyCache_[i];this.cacheEncryptionKeys_&&t&&!s&&e.bytes&&(this.keyCache_[i]=s={resolvedUri:e.resolvedUri,bytes:e.bytes});const n={resolvedUri:(s||e).resolvedUri};return s&&(n.bytes=s.bytes),n}couldBeginLoading_(){return this.playlist_&&!this.paused()}load(){if(this.monitorBuffer_(),!!this.playlist_){if(this.state==="INIT"&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||this.state!=="READY"&&this.state!=="INIT"||(this.state="READY")}}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}playlist(e,t={}){if(!e||this.playlist_&&this.playlist_.endList&&e.endList&&this.playlist_.uri===e.uri)return;const i=this.playlist_,s=this.pendingSegment_;this.playlist_=e,this.xhrOptions_=t,this.state==="INIT"&&(e.syncInfo={mediaSequence:e.mediaSequence,time:0},this.loaderType_==="main"&&this.syncController_.setDateTimeMappingForStart(e));let n=null;if(i&&(i.id?n=i.id:i.uri&&(n=i.uri)),this.logger_(`playlist update [${n} => ${e.id||e.uri}]`),this.mediaSequenceSync_&&(this.mediaSequenceSync_.update(e,this.currentTime_()),this.logger_(`Playlist update:
currentTime: ${this.currentTime_()}
bufferedEnd: ${ap(this.buffered_())}
`,this.mediaSequenceSync_.diagnostics)),this.trigger("syncinfoupdate"),this.state==="INIT"&&this.couldBeginLoading_())return this.init_();if(!i||i.uri!==e.uri){this.mediaIndex!==null&&(!e.endList&&typeof e.partTargetDuration=="number"?this.resetLoader():this.resyncLoader()),this.currentMediaInfo_=void 0,this.trigger("playlistupdate");return}const a=e.mediaSequence-i.mediaSequence;if(this.logger_(`live window shift [${a}]`),this.mediaIndex!==null)if(this.mediaIndex-=a,this.mediaIndex<0)this.mediaIndex=null,this.partIndex=null;else{const o=this.playlist_.segments[this.mediaIndex];if(this.partIndex&&(!o.parts||!o.parts.length||!o.parts[this.partIndex])){const l=this.mediaIndex;this.logger_(`currently processing part (index ${this.partIndex}) no longer exists.`),this.resetLoader(),this.mediaIndex=l}}s&&(s.mediaIndex-=a,s.mediaIndex<0?(s.mediaIndex=null,s.partIndex=null):(s.mediaIndex>=0&&(s.segment=e.segments[s.mediaIndex]),s.partIndex>=0&&s.segment.parts&&(s.part=s.segment.parts[s.partIndex]))),this.syncController_.saveExpiredSegmentInfo(i,e)}pause(){this.checkBufferTimeout_&&(q.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)}paused(){return this.checkBufferTimeout_===null}resetEverything(e){this.ended_=!1,this.activeInitSegmentId_=null,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,e),this.transmuxer_&&(this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.transmuxer_.postMessage({action:"reset"}))}resetLoader(){this.fetchAtBuffer_=!1,this.mediaSequenceSync_&&this.mediaSequenceSync_.resetAppendedStatus(),this.resyncLoader()}resyncLoader(){this.transmuxer_&&lp.reset(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1;const e=this.currentMediaInfo_&&this.currentMediaInfo_.isFmp4;this.sourceType_==="hls"&&!e&&(this.shouldForceTimestampOffsetAfterResync_=!0),this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}remove(e,t,i=()=>{},s=!1){if(t===1/0&&(t=this.duration_()),t<=e){this.logger_("skipping remove because end ${end} is <= start ${start}");return}if(!this.sourceUpdater_||!this.getMediaInfo_()){this.logger_("skipping remove because no source updater or starting media info");return}let n=1;const a=()=>{n--,n===0&&i()};(s||!this.audioDisabled_)&&(n++,this.sourceUpdater_.removeAudio(e,t,a)),(s||this.loaderType_==="main")&&(this.gopBuffer_=k3(this.gopBuffer_,e,t,this.timeMapping_),n++,this.sourceUpdater_.removeVideo(e,t,a));for(const o in this.inbandTextTracks_)dl(e,t,this.inbandTextTracks_[o]);dl(e,t,this.segmentMetadataTrack_),a()}monitorBuffer_(){this.checkBufferTimeout_&&q.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=q.setTimeout(this.monitorBufferTick_.bind(this),1)}monitorBufferTick_(){this.state==="READY"&&this.fillBuffer_(),this.checkBufferTimeout_&&q.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=q.setTimeout(this.monitorBufferTick_.bind(this),P3)}fillBuffer_(){if(this.sourceUpdater_.updating())return;const e=this.chooseNextRequest_();if(!e)return;const t={segmentInfo:kn({type:this.loaderType_,segment:e})};this.trigger({type:"segmentselected",metadata:t}),typeof e.timestampOffset=="number"&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline})),this.loadSegment_(e)}isEndOfStream_(e=this.mediaIndex,t=this.playlist_,i=this.partIndex){if(!t||!this.mediaSource_)return!1;const s=typeof e=="number"&&t.segments[e],n=e+1===t.segments.length,a=!s||!s.parts||i+1===s.parts.length;return t.endList&&this.mediaSource_.readyState==="open"&&n&&a}chooseNextRequest_(){const e=this.buffered_(),t=ap(e)||0,i=$0(e,this.currentTime_()),s=!this.hasPlayed_()&&i>=1,n=i>=this.goalBufferLength_(),a=this.playlist_.segments;if(!a.length||s||n)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_(),this.loaderType_);const o={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:!this.syncPoint_};if(o.isSyncRequest)o.mediaIndex=A3(this.currentTimeline_,a,t),this.logger_(`choose next request. Can not find sync point. Fallback to media Index: ${o.mediaIndex}`);else if(this.mediaIndex!==null){const f=a[this.mediaIndex],m=typeof this.partIndex=="number"?this.partIndex:-1;o.startOfSegment=f.end?f.end:t,f.parts&&f.parts[m+1]?(o.mediaIndex=this.mediaIndex,o.partIndex=m+1):o.mediaIndex=this.mediaIndex+1}else{let f,m,S;const y=this.fetchAtBuffer_?t:this.currentTime_();if(this.mediaSequenceSync_&&this.logger_(`chooseNextRequest_ request after Quality Switch:
For TargetTime: ${y}.
CurrentTime: ${this.currentTime_()}
BufferedEnd: ${t}
Fetch At Buffer: ${this.fetchAtBuffer_}
`,this.mediaSequenceSync_.diagnostics),this.mediaSequenceSync_&&this.mediaSequenceSync_.isReliable){const E=this.getSyncInfoFromMediaSequenceSync_(y);if(!E){const C="No sync info found while using media sequence sync";return this.error({message:C,metadata:{errorType:H.Error.StreamingFailedToSelectNextSegment,error:new Error(C)}}),this.logger_("chooseNextRequest_ - no sync info found using media sequence sync"),null}this.logger_(`chooseNextRequest_ mediaSequence syncInfo (${E.start} --> ${E.end})`),f=E.segmentIndex,m=E.partIndex,S=E.start}else{this.logger_("chooseNextRequest_ - fallback to a regular segment selection algorithm, based on a syncPoint.");const E=Mi.getMediaInfoForTime({exactManifestTimings:this.exactManifestTimings,playlist:this.playlist_,currentTime:y,startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time});f=E.segmentIndex,m=E.partIndex,S=E.startTime}o.getMediaInfoForTime=this.fetchAtBuffer_?`bufferedEnd ${y}`:`currentTime ${y}`,o.mediaIndex=f,o.startOfSegment=S,o.partIndex=m,this.logger_(`choose next request. Playlist switched and we have a sync point. Media Index: ${o.mediaIndex} `)}const l=a[o.mediaIndex];let u=l&&typeof o.partIndex=="number"&&l.parts&&l.parts[o.partIndex];if(!l||typeof o.partIndex=="number"&&!u)return null;typeof o.partIndex!="number"&&l.parts&&(o.partIndex=0,u=l.parts[0]);const c=this.vhs_.playlists&&this.vhs_.playlists.main&&this.vhs_.playlists.main.independentSegments||this.playlist_.independentSegments;if(!i&&u&&!c&&!u.independent)if(o.partIndex===0){const f=a[o.mediaIndex-1],m=f.parts&&f.parts.length&&f.parts[f.parts.length-1];m&&m.independent&&(o.mediaIndex-=1,o.partIndex=f.parts.length-1,o.independent="previous segment")}else l.parts[o.partIndex-1].independent&&(o.partIndex-=1,o.independent="previous part");const h=this.mediaSource_&&this.mediaSource_.readyState==="ended";return o.mediaIndex>=a.length-1&&h&&!this.seeking_()?null:(this.shouldForceTimestampOffsetAfterResync_&&(this.shouldForceTimestampOffsetAfterResync_=!1,o.forceTimestampOffset=!0,this.logger_("choose next request. Force timestamp offset after loader resync")),this.generateSegmentInfo_(o))}getSyncInfoFromMediaSequenceSync_(e){if(!this.mediaSequenceSync_)return null;const t=Math.max(e,this.mediaSequenceSync_.start);e!==t&&this.logger_(`getSyncInfoFromMediaSequenceSync_. Pulled target time from ${e} to ${t}`);const i=this.mediaSequenceSync_.getSyncInfoForTime(t);if(!i)return null;if(!i.isAppended)return i;const s=this.mediaSequenceSync_.getSyncInfoForTime(i.end);return s?(s.isAppended&&this.logger_("getSyncInfoFromMediaSequenceSync_: We encounter unexpected scenario where next media sequence sync info is also appended!"),s):null}generateSegmentInfo_(e){const{independent:t,playlist:i,mediaIndex:s,startOfSegment:n,isSyncRequest:a,partIndex:o,forceTimestampOffset:l,getMediaInfoForTime:u}=e,c=i.segments[s],h=typeof o=="number"&&c.parts[o],f={requestId:"segment-loader-"+Math.random(),uri:h&&h.resolvedUri||c.resolvedUri,mediaIndex:s,partIndex:h?o:null,isSyncRequest:a,startOfSegment:n,playlist:i,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:c.timeline,duration:h&&h.duration||c.duration,segment:c,part:h,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:u,independent:t},m=typeof l<"u"?l:this.isPendingTimestampOffset_;f.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:c.timeline,currentTimeline:this.currentTimeline_,startOfSegment:n,buffered:this.buffered_(),overrideCheck:m});const S=ap(this.sourceUpdater_.audioBuffered());return typeof S=="number"&&(f.audioAppendStart=S-this.sourceUpdater_.audioTimestampOffset()),this.sourceUpdater_.videoBuffered().length&&(f.gopsToAlignWith=w3(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),f}timestampOffsetForSegment_(e){return I3(e)}earlyAbortWhenNeeded_(e){if(this.vhs_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH||Date.now()-(e.firstBytesReceivedAt||Date.now())<1e3)return;const t=this.currentTime_(),i=e.bandwidth,s=this.pendingSegment_.duration,n=Mi.estimateSegmentRequestTime(s,i,this.playlist_,e.bytesReceived),a=t5(this.buffered_(),t,this.vhs_.tech_.playbackRate())-1;if(n<=a)return;const o=p3({main:this.vhs_.playlists.main,currentTime:t,bandwidth:i,duration:this.duration_(),segmentDuration:s,timeUntilRebuffer:a,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(!o)return;const u=n-a-o.rebufferingImpact;let c=.5;a<=Zr&&(c=1),!(!o.playlist||o.playlist.uri===this.playlist_.uri||u<c)&&(this.bandwidth=o.playlist.attributes.BANDWIDTH*Zt.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}handleAbort_(e){this.logger_(`Aborting ${da(e)}`),this.mediaRequestsAborted+=1}handleProgress_(e,t){this.earlyAbortWhenNeeded_(t.stats),!this.checkForAbort_(t.requestId)&&this.trigger("progress")}handleTrackInfo_(e,t){const{hasAudio:i,hasVideo:s}=t,n={segmentInfo:kn({type:this.loaderType_,segment:e}),trackInfo:{hasAudio:i,hasVideo:s}};this.trigger({type:"segmenttransmuxingtrackinfoavailable",metadata:n}),this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId)&&(this.checkForIllegalMediaSwitch(t)||(t=t||{},E3(this.currentMediaInfo_,t)||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=t,this.currentMediaInfo_=t,this.logger_("trackinfo update",t),this.trigger("trackinfo")),!this.checkForAbort_(e.requestId)&&(this.pendingSegment_.trackInfo=t,this.hasEnoughInfoToAppend_()?this.processCallQueue_():Vs(this))))}handleTimingInfo_(e,t,i,s){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;const n=this.pendingSegment_,a=dv(t);n[a]=n[a]||{},n[a][i]=s,this.logger_(`timinginfo: ${t} - ${i} - ${s}`),this.hasEnoughInfoToAppend_()?this.processCallQueue_():Vs(this)}handleCaptions_(e,t){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(t.length===0){this.logger_("SegmentLoader received no captions from a caption event");return}if(!this.pendingSegment_.hasAppendedData_){this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,e,t));return}const s=this.sourceUpdater_.videoTimestampOffset()===null?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),n={};t.forEach(a=>{n[a.stream]=n[a.stream]||{startTime:1/0,captions:[],endTime:0};const o=n[a.stream];o.startTime=Math.min(o.startTime,a.startTime+s),o.endTime=Math.max(o.endTime,a.endTime+s),o.captions.push(a)}),Object.keys(n).forEach(a=>{const{startTime:o,endTime:l,captions:u}=n[a],c=this.inbandTextTracks_;this.logger_(`adding cues from ${o} -> ${l} for ${a}`),O3(c,this.vhs_.tech_,a),dl(o,l,c[a]),y3({captionArray:u,inbandTextTracks:c,timestampOffset:s})}),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}handleId3_(e,t,i){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(!this.pendingSegment_.hasAppendedData_){this.metadataQueue_.id3.push(this.handleId3_.bind(this,e,t,i));return}this.addMetadataToTextTrack(i,t,this.duration_())}processMetadataQueue_(){this.metadataQueue_.id3.forEach(e=>e()),this.metadataQueue_.caption.forEach(e=>e()),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]}processCallQueue_(){const e=this.callQueue_;this.callQueue_=[],e.forEach(t=>t())}processLoadQueue_(){const e=this.loadQueue_;this.loadQueue_=[],e.forEach(t=>t())}hasEnoughInfoToLoad_(){if(this.loaderType_!=="audio")return!0;const e=this.pendingSegment_;return e?this.getCurrentMediaInfo_()?!Mm({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}):!0:!1}getCurrentMediaInfo_(e=this.pendingSegment_){return e&&e.trackInfo||this.currentMediaInfo_}getMediaInfo_(e=this.pendingSegment_){return this.getCurrentMediaInfo_(e)||this.startingMediaInfo_}getPendingSegmentPlaylist(){return this.pendingSegment_?this.pendingSegment_.playlist:null}hasEnoughInfoToAppend_(){if(!this.sourceUpdater_.ready()||this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;const e=this.pendingSegment_,t=this.getCurrentMediaInfo_();if(!e||!t)return!1;const{hasAudio:i,hasVideo:s,isMuxed:n}=t;return!(s&&!e.videoTimingInfo||i&&!this.audioDisabled_&&!n&&!e.audioTimingInfo||Mm({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))}handleData_(e,t){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(this.callQueue_.length||!this.hasEnoughInfoToAppend_()){Vs(this),this.callQueue_.push(this.handleData_.bind(this,e,t));return}const i=this.pendingSegment_;if(this.setTimeMapping_(i.timeline),this.updateMediaSecondsLoaded_(i.part||i.segment),this.mediaSource_.readyState!=="closed"){if(e.map&&(e.map=this.initSegmentForMap(e.map,!0),i.segment.map=e.map),e.key&&this.segmentKey(e.key,!0),i.isFmp4=e.isFmp4,i.timingInfo=i.timingInfo||{},i.isFmp4)this.trigger("fmp4"),i.timingInfo.start=i[dv(t.type)].start;else{const s=this.getCurrentMediaInfo_(),n=this.loaderType_==="main"&&s&&s.hasVideo;let a;n&&(a=i.videoTimingInfo.start),i.timingInfo.start=this.trueSegmentStart_({currentStart:i.timingInfo.start,playlist:i.playlist,mediaIndex:i.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:n,firstVideoFrameTimeForData:a,videoTimingInfo:i.videoTimingInfo,audioTimingInfo:i.audioTimingInfo})}if(this.updateAppendInitSegmentStatus(i,t.type),this.updateSourceBufferTimestampOffset_(i),i.isSyncRequest){this.updateTimingInfoEnd_(i),this.syncController_.saveSegmentTimingInfo({segmentInfo:i,shouldSaveTimelineMapping:this.loaderType_==="main"});const s=this.chooseNextRequest_();if(s.mediaIndex!==i.mediaIndex||s.partIndex!==i.partIndex){this.logger_("sync segment was incorrect, not appending");return}this.logger_("sync segment was correct, appending")}i.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(i,t)}}updateAppendInitSegmentStatus(e,t){this.loaderType_==="main"&&typeof e.timestampOffset=="number"&&!e.changedTimestampOffset&&(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[t]!==e.playlist&&(this.appendInitSegment_[t]=!0)}getInitSegmentAndUpdateState_({type:e,initSegment:t,map:i,playlist:s}){if(i){const n=Vh(i);if(this.activeInitSegmentId_===n)return null;t=this.initSegmentForMap(i,!0).bytes,this.activeInitSegmentId_=n}return t&&this.appendInitSegment_[e]?(this.playlistOfLastInitSegment_[e]=s,this.appendInitSegment_[e]=!1,this.activeInitSegmentId_=null,t):null}handleQuotaExceededError_({segmentInfo:e,type:t,bytes:i},s){const n=this.sourceUpdater_.audioBuffered(),a=this.sourceUpdater_.videoBuffered();n.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+Mn(n).join(", ")),a.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+Mn(a).join(", "));const o=n.length?n.start(0):0,l=n.length?n.end(n.length-1):0,u=a.length?a.start(0):0,c=a.length?a.end(a.length-1):0;if(l-o<=Jo&&c-u<=Jo){this.logger_(`On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. Appended byte length: ${i.byteLength}, audio buffer: ${Mn(n).join(", ")}, video buffer: ${Mn(a).join(", ")}, `),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:1/0}),this.trigger("error");return}this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:e,type:t,bytes:i}));const f=this.currentTime_()-Jo;this.logger_(`On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to ${f}`),this.remove(0,f,()=>{this.logger_(`On QUOTA_EXCEEDED_ERR, retrying append in ${Jo}s`),this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=q.setTimeout(()=>{this.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"),this.quotaExceededErrorRetryTimeout_=null,this.processCallQueue_()},Jo*1e3)},!0)}handleAppendError_({segmentInfo:e,type:t,bytes:i},s){if(s){if(s.code===dw){this.handleQuotaExceededError_({segmentInfo:e,type:t,bytes:i});return}this.logger_("Received non QUOTA_EXCEEDED_ERR on append",s),this.error({message:`${t} append of ${i.length}b failed for segment #${e.mediaIndex} in playlist ${e.playlist.id}`,metadata:{errorType:H.Error.StreamingFailedToAppendSegment}}),this.trigger("appenderror")}}appendToSourceBuffer_({segmentInfo:e,type:t,initSegment:i,data:s,bytes:n}){if(!n){const o=[s];let l=s.byteLength;i&&(o.unshift(i),l+=i.byteLength),n=g3({bytes:l,segments:o})}const a={segmentInfo:kn({type:this.loaderType_,segment:e})};this.trigger({type:"segmentappendstart",metadata:a}),this.sourceUpdater_.appendBuffer({segmentInfo:e,type:t,bytes:n},this.handleAppendError_.bind(this,{segmentInfo:e,type:t,bytes:n}))}handleSegmentTimingInfo_(e,t,i){if(!this.pendingSegment_||t!==this.pendingSegment_.requestId)return;const s=this.pendingSegment_.segment,n=`${e}TimingInfo`;s[n]||(s[n]={}),s[n].transmuxerPrependedSeconds=i.prependedContentDuration||0,s[n].transmuxedPresentationStart=i.start.presentation,s[n].transmuxedDecodeStart=i.start.decode,s[n].transmuxedPresentationEnd=i.end.presentation,s[n].transmuxedDecodeEnd=i.end.decode,s[n].baseMediaDecodeTime=i.baseMediaDecodeTime}appendData_(e,t){const{type:i,data:s}=t;if(!s||!s.byteLength||i==="audio"&&this.audioDisabled_)return;const n=this.getInitSegmentAndUpdateState_({type:i,initSegment:t.initSegment,playlist:e.playlist,map:e.isFmp4?e.segment.map:null});this.appendToSourceBuffer_({segmentInfo:e,type:i,initSegment:n,data:s})}loadSegment_(e){if(this.state="WAITING",this.pendingSegment_=e,this.trimBackBuffer_(e),typeof e.timestampOffset=="number"&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),!this.hasEnoughInfoToLoad_()){Vs(this),this.loadQueue_.push(()=>{const t=Lt({},e,{forceTimestampOffset:!0});Lt(e,this.generateSegmentInfo_(t)),this.isPendingTimestampOffset_=!1,this.updateTransmuxerAndRequestSegment_(e)});return}this.updateTransmuxerAndRequestSegment_(e)}updateTransmuxerAndRequestSegment_(e){this.shouldUpdateTransmuxerTimestampOffset_(e.timestampOffset)&&(this.gopBuffer_.length=0,e.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:e.timestampOffset}));const t=this.createSimplifiedSegmentObj_(e),i=this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex),s=this.mediaIndex!==null,n=e.timeline!==this.currentTimeline_&&e.timeline>0,a=i||s&&n;this.logger_(`Requesting
${$w(e.uri)}
${da(e)}`),t.map&&!t.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),e.abortRequests=h3({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:t,abortFn:this.handleAbort_.bind(this,e),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",e.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",e.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:a,endedTimelineFn:()=>{this.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:({message:o,level:l,stream:u})=>{this.logger_(`${da(e)} logged from transmuxer stream ${u} as a ${l}: ${o}`)},triggerSegmentEventFn:({type:o,segment:l,keyInfo:u,trackInfo:c,timingInfo:h})=>{const m={segmentInfo:kn({segment:l})};u&&(m.keyInfo=u),c&&(m.trackInfo=c),h&&(m.timingInfo=h),this.trigger({type:o,metadata:m})}})}trimBackBuffer_(e){const t=M3(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);t>0&&this.remove(0,t)}createSimplifiedSegmentObj_(e){const t=e.segment,i=e.part,s=e.segment.key||e.segment.map&&e.segment.map.key,n=e.segment.map&&!e.segment.map.bytes,a={resolvedUri:i?i.resolvedUri:t.resolvedUri,byterange:i?i.byterange:t.byterange,requestId:e.requestId,transmuxer:e.transmuxer,audioAppendStart:e.audioAppendStart,gopsToAlignWith:e.gopsToAlignWith,part:e.part,type:this.loaderType_,start:e.startOfSegment,duration:e.duration,isEncrypted:s,isMediaInitialization:n},o=e.playlist.segments[e.mediaIndex-1];if(o&&o.timeline===t.timeline&&(o.videoTimingInfo?a.baseStartTime=o.videoTimingInfo.transmuxedDecodeEnd:o.audioTimingInfo&&(a.baseStartTime=o.audioTimingInfo.transmuxedDecodeEnd)),t.key){const l=t.key.iv||new Uint32Array([0,0,0,e.mediaIndex+e.playlist.mediaSequence]);a.key=this.segmentKey(t.key),a.key.iv=l}return t.map&&(a.map=this.initSegmentForMap(t.map)),a}saveTransferStats_(e){this.mediaRequests+=1,e&&(this.mediaBytesTransferred+=e.bytesReceived,this.mediaTransferDuration+=e.roundTripTime)}saveBandwidthRelatedStats_(e,t){if(this.pendingSegment_.byteLength=t.bytesReceived,e<Cc){this.logger_(`Ignoring segment's bandwidth because its duration of ${e} is less than the min to record ${Cc}`);return}const i={bandwidthInfo:{from:this.bandwidth,to:t.bandwidth}};this.trigger({type:"bandwidthupdated",metadata:i}),this.bandwidth=t.bandwidth,this.roundTrip=t.roundTripTime}handleTimeout_(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate"),this.trigger("timeout")}segmentRequestFinished_(e,t,i){if(this.callQueue_.length){this.callQueue_.push(this.segmentRequestFinished_.bind(this,e,t,i));return}if(this.saveTransferStats_(t.stats),!this.pendingSegment_||t.requestId!==this.pendingSegment_.requestId)return;if(e){if(this.pendingSegment_=null,this.state="READY",e.code===Hr.ABORTED)return;if(this.pause(),e.code===Hr.TIMEOUT){this.handleTimeout_();return}this.mediaRequestsErrored+=1,this.error(e),this.trigger("error");return}const s=this.pendingSegment_;this.saveBandwidthRelatedStats_(s.duration,t.stats),s.endOfAllRequests=t.endOfAllRequests,i.gopInfo&&(this.gopBuffer_=C3(this.gopBuffer_,i.gopInfo,this.safeAppend_)),this.state="APPENDING",this.trigger("appending"),this.waitForAppendsToComplete_(s)}setTimeMapping_(e){const t=this.syncController_.mappingForTimeline(e);t!==null&&(this.timeMapping_=t)}updateMediaSecondsLoaded_(e){typeof e.start=="number"&&typeof e.end=="number"?this.mediaSecondsLoaded+=e.end-e.start:this.mediaSecondsLoaded+=e.duration}shouldUpdateTransmuxerTimestampOffset_(e){return e===null?!1:this.loaderType_==="main"&&e!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&e!==this.sourceUpdater_.audioTimestampOffset()}trueSegmentStart_({currentStart:e,playlist:t,mediaIndex:i,firstVideoFrameTimeForData:s,currentVideoTimestampOffset:n,useVideoTimingInfo:a,videoTimingInfo:o,audioTimingInfo:l}){if(typeof e<"u")return e;if(!a)return l.start;const u=t.segments[i-1];return i===0||!u||typeof u.start>"u"||u.end!==s+n?s:o.start}waitForAppendsToComplete_(e){const t=this.getCurrentMediaInfo_(e);if(!t){this.error({message:"No starting media returned, likely due to an unsupported media format.",playlistExclusionDuration:1/0}),this.trigger("error");return}const{hasAudio:i,hasVideo:s,isMuxed:n}=t,a=this.loaderType_==="main"&&s,o=!this.audioDisabled_&&i&&!n;if(e.waitingOnAppends=0,!e.hasAppendedData_){!e.timingInfo&&typeof e.timestampOffset=="number"&&(this.isPendingTimestampOffset_=!0),e.timingInfo={start:0},e.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(e),this.processMetadataQueue_()),this.checkAppendsDone_(e);return}a&&e.waitingOnAppends++,o&&e.waitingOnAppends++,a&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,e)),o&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,e))}checkAppendsDone_(e){this.checkForAbort_(e.requestId)||(e.waitingOnAppends--,e.waitingOnAppends===0&&this.handleAppendsDone_())}checkForIllegalMediaSwitch(e){const t=D3(this.loaderType_,this.getCurrentMediaInfo_(),e);return t?(this.error({message:t,playlistExclusionDuration:1/0}),this.trigger("error"),!0):!1}updateSourceBufferTimestampOffset_(e){if(e.timestampOffset===null||typeof e.timingInfo.start!="number"||e.changedTimestampOffset||this.loaderType_!=="main")return;let t=!1;e.timestampOffset-=this.getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:e.segment.videoTimingInfo,audioTimingInfo:e.segment.audioTimingInfo,timingInfo:e.timingInfo}),e.changedTimestampOffset=!0,e.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(e.timestampOffset),t=!0),e.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(e.timestampOffset),t=!0),t&&this.trigger("timestampoffset")}getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:e,audioTimingInfo:t,timingInfo:i}){return this.useDtsForTimestampOffset_?e&&typeof e.transmuxedDecodeStart=="number"?e.transmuxedDecodeStart:t&&typeof t.transmuxedDecodeStart=="number"?t.transmuxedDecodeStart:i.start:i.start}updateTimingInfoEnd_(e){e.timingInfo=e.timingInfo||{};const t=this.getMediaInfo_(),s=this.loaderType_==="main"&&t&&t.hasVideo&&e.videoTimingInfo?e.videoTimingInfo:e.audioTimingInfo;s&&(e.timingInfo.end=typeof s.end=="number"?s.end:s.start+e.duration)}handleAppendsDone_(){if(this.pendingSegment_){const l={segmentInfo:kn({type:this.loaderType_,segment:this.pendingSegment_})};this.trigger({type:"appendsdone",metadata:l})}if(!this.pendingSegment_){this.state="READY",this.paused()||this.monitorBuffer_();return}const e=this.pendingSegment_;e.part&&e.part.syncInfo?e.part.syncInfo.markAppended():e.segment.syncInfo&&e.segment.syncInfo.markAppended(),this.updateTimingInfoEnd_(e),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:this.loaderType_==="main"});const t=$3(e,this.sourceType_);if(t&&(t.severity==="warn"?H.log.warn(t.message):this.logger_(t.message)),this.recordThroughput_(e),this.pendingSegment_=null,this.state="READY",e.isSyncRequest&&(this.trigger("syncinfoupdate"),!e.hasAppendedData_)){this.logger_(`Throwing away un-appended sync request ${da(e)}`);return}this.logger_(`Appended ${da(e)}`),this.addSegmentMetadataCue_(e),this.fetchAtBuffer_=!0,this.currentTimeline_!==e.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline}),this.loaderType_==="main"&&!this.audioDisabled_&&this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:e.timeline})),this.currentTimeline_=e.timeline,this.trigger("syncinfoupdate");const i=e.segment,s=e.part,n=i.end&&this.currentTime_()-i.end>e.playlist.targetDuration*3,a=s&&s.end&&this.currentTime_()-s.end>e.playlist.partTargetDuration*3;if(n||a){this.logger_(`bad ${n?"segment":"part"} ${da(e)}`),this.resetEverything();return}this.mediaIndex!==null&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=e.mediaIndex,this.partIndex=e.partIndex,this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex)&&this.endOfStream(),this.trigger("appended"),e.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_()}recordThroughput_(e){if(e.duration<Cc){this.logger_(`Ignoring segment's throughput because its duration of ${e.duration} is less than the min to record ${Cc}`);return}const t=this.throughput.rate,i=Date.now()-e.endOfAllRequests+1,s=Math.floor(e.byteLength/i*8*1e3);this.throughput.rate+=(s-t)/++this.throughput.count}addSegmentMetadataCue_(e){if(!this.segmentMetadataTrack_)return;const t=e.segment,i=t.start,s=t.end;if(!hv(i)||!hv(s))return;dl(i,s,this.segmentMetadataTrack_);const n=q.WebKitDataCue||q.VTTCue,a={custom:t.custom,dateTimeObject:t.dateTimeObject,dateTimeString:t.dateTimeString,programDateTime:t.programDateTime,bandwidth:e.playlist.attributes.BANDWIDTH,resolution:e.playlist.attributes.RESOLUTION,codecs:e.playlist.attributes.CODECS,byteLength:e.byteLength,uri:e.uri,timeline:e.timeline,playlist:e.playlist.id,start:i,end:s},o=JSON.stringify(a),l=new n(i,s,o);l.value=a,this.segmentMetadataTrack_.addCue(l)}}function _s(){}const Bw=function(r){return typeof r!="string"?r:r.replace(/./,e=>e.toUpperCase())},B3=["video","audio"],Rm=(r,e)=>{const t=e[`${r}Buffer`];return t&&t.updating||e.queuePending[r]},N3=(r,e)=>{for(let t=0;t<e.length;t++){const i=e[t];if(i.type==="mediaSource")return null;if(i.type===r)return t}return null},Qa=(r,e)=>{if(e.queue.length===0)return;let t=0,i=e.queue[t];if(i.type==="mediaSource"){!e.updating()&&e.mediaSource.readyState!=="closed"&&(e.queue.shift(),i.action(e),i.doneFn&&i.doneFn(),Qa("audio",e),Qa("video",e));return}if(r!=="mediaSource"&&!(!e.ready()||e.mediaSource.readyState==="closed"||Rm(r,e))){if(i.type!==r){if(t=N3(r,e.queue),t===null)return;i=e.queue[t]}if(e.queue.splice(t,1),e.queuePending[r]=i,i.action(r,e),!i.doneFn){e.queuePending[r]=null,Qa(r,e);return}}},Nw=(r,e)=>{const t=e[`${r}Buffer`],i=Bw(r);t&&(t.removeEventListener("updateend",e[`on${i}UpdateEnd_`]),t.removeEventListener("error",e[`on${i}Error_`]),e.codecs[r]=null,e[`${r}Buffer`]=null)},qr=(r,e)=>r&&e&&Array.prototype.indexOf.call(r.sourceBuffers,e)!==-1,$i={appendBuffer:(r,e,t)=>(i,s)=>{const n=s[`${i}Buffer`];if(qr(s.mediaSource,n)){s.logger_(`Appending segment ${e.mediaIndex}'s ${r.length} bytes to ${i}Buffer`);try{n.appendBuffer(r)}catch(a){s.logger_(`Error with code ${a.code} `+(a.code===dw?"(QUOTA_EXCEEDED_ERR) ":"")+`when appending segment ${e.mediaIndex} to ${i}Buffer`),s.queuePending[i]=null,t(a)}}},remove:(r,e)=>(t,i)=>{const s=i[`${t}Buffer`];if(qr(i.mediaSource,s)){i.logger_(`Removing ${r} to ${e} from ${t}Buffer`);try{s.remove(r,e)}catch{i.logger_(`Remove ${r} to ${e} from ${t}Buffer failed`)}}},timestampOffset:r=>(e,t)=>{const i=t[`${e}Buffer`];qr(t.mediaSource,i)&&(t.logger_(`Setting ${e}timestampOffset to ${r}`),i.timestampOffset=r)},callback:r=>(e,t)=>{r()},endOfStream:r=>e=>{if(e.mediaSource.readyState==="open"){e.logger_(`Calling mediaSource endOfStream(${r||""})`);try{e.mediaSource.endOfStream(r)}catch(t){H.log.warn("Failed to call media source endOfStream",t)}}},duration:r=>e=>{e.logger_(`Setting mediaSource duration to ${r}`);try{e.mediaSource.duration=r}catch(t){H.log.warn("Failed to set media source duration",t)}},abort:()=>(r,e)=>{if(e.mediaSource.readyState!=="open")return;const t=e[`${r}Buffer`];if(qr(e.mediaSource,t)){e.logger_(`calling abort on ${r}Buffer`);try{t.abort()}catch(i){H.log.warn(`Failed to abort on ${r}Buffer`,i)}}},addSourceBuffer:(r,e)=>t=>{const i=Bw(r),s=Ya(e);t.logger_(`Adding ${r}Buffer with codec ${e} to mediaSource`);const n=t.mediaSource.addSourceBuffer(s);n.addEventListener("updateend",t[`on${i}UpdateEnd_`]),n.addEventListener("error",t[`on${i}Error_`]),t.codecs[r]=e,t[`${r}Buffer`]=n},removeSourceBuffer:r=>e=>{const t=e[`${r}Buffer`];if(Nw(r,e),!!qr(e.mediaSource,t)){e.logger_(`Removing ${r}Buffer with codec ${e.codecs[r]} from mediaSource`);try{e.mediaSource.removeSourceBuffer(t)}catch(i){H.log.warn(`Failed to removeSourceBuffer ${r}Buffer`,i)}}},changeType:r=>(e,t)=>{const i=t[`${e}Buffer`],s=Ya(r);if(!qr(t.mediaSource,i))return;const n=r.substring(0,r.indexOf(".")),a=t.codecs[e];if(a.substring(0,a.indexOf("."))===n)return;const l={codecsChangeInfo:{from:a,to:r}};t.trigger({type:"codecschange",metadata:l}),t.logger_(`changing ${e}Buffer codec from ${a} to ${r}`);try{i.changeType(s),t.codecs[e]=r}catch(u){l.errorType=H.Error.StreamingCodecsChangeError,l.error=u,u.metadata=l,t.error_=u,t.trigger("error"),H.log.warn(`Failed to changeType on ${e}Buffer`,u)}}},Bi=({type:r,sourceUpdater:e,action:t,doneFn:i,name:s})=>{e.queue.push({type:r,action:t,doneFn:i,name:s}),Qa(r,e)},pv=(r,e)=>t=>{const i=e[`${r}Buffered`](),s=K$(i);if(e.logger_(`received "updateend" event for ${r} Source Buffer: `,s),e.queuePending[r]){const n=e.queuePending[r].doneFn;e.queuePending[r]=null,n&&n(e[`${r}Error_`])}Qa(r,e)};class Fw extends H.EventTarget{constructor(e){super(),this.mediaSource=e,this.sourceopenListener_=()=>Qa("mediaSource",this),this.mediaSource.addEventListener("sourceopen",this.sourceopenListener_),this.logger_=fr("SourceUpdater"),this.audioTimestampOffset_=0,this.videoTimestampOffset_=0,this.queue=[],this.queuePending={audio:null,video:null},this.delayedAudioAppendQueue_=[],this.videoAppendQueued_=!1,this.codecs={},this.onVideoUpdateEnd_=pv("video",this),this.onAudioUpdateEnd_=pv("audio",this),this.onVideoError_=t=>{this.videoError_=t},this.onAudioError_=t=>{this.audioError_=t},this.createdSourceBuffers_=!1,this.initializedEme_=!1,this.triggeredReady_=!1}initializedEme(){this.initializedEme_=!0,this.triggerReady()}hasCreatedSourceBuffers(){return this.createdSourceBuffers_}hasInitializedAnyEme(){return this.initializedEme_}ready(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()}createSourceBuffers(e){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(e),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())}triggerReady(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))}addSourceBuffer(e,t){Bi({type:"mediaSource",sourceUpdater:this,action:$i.addSourceBuffer(e,t),name:"addSourceBuffer"})}abort(e){Bi({type:e,sourceUpdater:this,action:$i.abort(e),name:"abort"})}removeSourceBuffer(e){if(!this.canRemoveSourceBuffer()){H.log.error("removeSourceBuffer is not supported!");return}Bi({type:"mediaSource",sourceUpdater:this,action:$i.removeSourceBuffer(e),name:"removeSourceBuffer"})}canRemoveSourceBuffer(){return!H.browser.IS_FIREFOX&&q.MediaSource&&q.MediaSource.prototype&&typeof q.MediaSource.prototype.removeSourceBuffer=="function"}static canChangeType(){return q.SourceBuffer&&q.SourceBuffer.prototype&&typeof q.SourceBuffer.prototype.changeType=="function"}canChangeType(){return this.constructor.canChangeType()}changeType(e,t){if(!this.canChangeType()){H.log.error("changeType is not supported!");return}Bi({type:e,sourceUpdater:this,action:$i.changeType(t),name:"changeType"})}addOrChangeSourceBuffers(e){if(!e||typeof e!="object"||Object.keys(e).length===0)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(e).forEach(t=>{const i=e[t];if(!this.hasCreatedSourceBuffers())return this.addSourceBuffer(t,i);this.canChangeType()&&this.changeType(t,i)})}appendBuffer(e,t){const{segmentInfo:i,type:s,bytes:n}=e;if(this.processedAppend_=!0,s==="audio"&&this.videoBuffer&&!this.videoAppendQueued_){this.delayedAudioAppendQueue_.push([e,t]),this.logger_(`delayed audio append of ${n.length} until video append`);return}const a=t;if(Bi({type:s,sourceUpdater:this,action:$i.appendBuffer(n,i||{mediaIndex:-1},a),doneFn:t,name:"appendBuffer"}),s==="video"){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;const o=this.delayedAudioAppendQueue_.slice();this.logger_(`queuing delayed audio ${o.length} appendBuffers`),this.delayedAudioAppendQueue_.length=0,o.forEach(l=>{this.appendBuffer.apply(this,l)})}}audioBuffered(){return qr(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:Yt()}videoBuffered(){return qr(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:Yt()}buffered(){const e=qr(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,t=qr(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return t&&!e?this.audioBuffered():e&&!t?this.videoBuffered():e5(this.audioBuffered(),this.videoBuffered())}setDuration(e,t=_s){Bi({type:"mediaSource",sourceUpdater:this,action:$i.duration(e),name:"duration",doneFn:t})}endOfStream(e=null,t=_s){typeof e!="string"&&(e=void 0),Bi({type:"mediaSource",sourceUpdater:this,action:$i.endOfStream(e),name:"endOfStream",doneFn:t})}removeAudio(e,t,i=_s){if(!this.audioBuffered().length||this.audioBuffered().end(0)===0){i();return}Bi({type:"audio",sourceUpdater:this,action:$i.remove(e,t),doneFn:i,name:"remove"})}removeVideo(e,t,i=_s){if(!this.videoBuffered().length||this.videoBuffered().end(0)===0){i();return}Bi({type:"video",sourceUpdater:this,action:$i.remove(e,t),doneFn:i,name:"remove"})}updating(){return!!(Rm("audio",this)||Rm("video",this))}audioTimestampOffset(e){return typeof e<"u"&&this.audioBuffer&&this.audioTimestampOffset_!==e&&(Bi({type:"audio",sourceUpdater:this,action:$i.timestampOffset(e),name:"timestampOffset"}),this.audioTimestampOffset_=e),this.audioTimestampOffset_}videoTimestampOffset(e){return typeof e<"u"&&this.videoBuffer&&this.videoTimestampOffset_!==e&&(Bi({type:"video",sourceUpdater:this,action:$i.timestampOffset(e),name:"timestampOffset"}),this.videoTimestampOffset_=e),this.videoTimestampOffset_}audioQueueCallback(e){this.audioBuffer&&Bi({type:"audio",sourceUpdater:this,action:$i.callback(e),name:"callback"})}videoQueueCallback(e){this.videoBuffer&&Bi({type:"video",sourceUpdater:this,action:$i.callback(e),name:"callback"})}dispose(){this.trigger("dispose"),B3.forEach(e=>{this.abort(e),this.canRemoveSourceBuffer()?this.removeSourceBuffer(e):this[`${e}QueueCallback`](()=>Nw(e,this))}),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()}}const mv=r=>decodeURIComponent(escape(String.fromCharCode.apply(null,r))),F3=r=>{const e=new Uint8Array(r);return Array.from(e).map(t=>t.toString(16).padStart(2,"0")).join("")},gv=new Uint8Array(`

`.split("").map(r=>r.charCodeAt(0)));class U3 extends Error{constructor(){super("Trying to parse received VTT cues, but there is no WebVTT. Make sure vtt.js is loaded.")}}class q3 extends Im{constructor(e,t={}){super(e,t),this.mediaSource_=null,this.subtitlesTrack_=null,this.featuresNativeTextTracks_=e.featuresNativeTextTracks,this.loadVttJs=e.loadVttJs,this.shouldSaveSegmentTimingInfo_=!1}buffered_(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return Yt();const e=this.subtitlesTrack_.cues,t=e[0].startTime,i=e[e.length-1].startTime;return Yt([[t,i]])}initSegmentForMap(e,t=!1){if(!e)return null;const i=Vh(e);let s=this.initSegments_[i];if(t&&!s&&e.bytes){const n=gv.byteLength+e.bytes.byteLength,a=new Uint8Array(n);a.set(e.bytes),a.set(gv,e.bytes.byteLength),this.initSegments_[i]=s={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:a}}return s||e}couldBeginLoading_(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}track(e){return typeof e>"u"?this.subtitlesTrack_:(this.subtitlesTrack_=e,this.state==="INIT"&&this.couldBeginLoading_()&&this.init_(),this.subtitlesTrack_)}remove(e,t){dl(e,t,this.subtitlesTrack_)}fillBuffer_(){const e=this.chooseNextRequest_();if(e){if(this.syncController_.timestampOffsetForTimeline(e.timeline)===null){const t=()=>{this.state="READY",this.paused()||this.monitorBuffer_()};this.syncController_.one("timestampoffset",t),this.state="WAITING_ON_TIMELINE";return}this.loadSegment_(e)}}timestampOffsetForSegment_(){return null}chooseNextRequest_(){return this.skipEmptySegments_(super.chooseNextRequest_())}skipEmptySegments_(e){for(;e&&e.segment.empty;){if(e.mediaIndex+1>=e.playlist.segments.length){e=null;break}e=this.generateSegmentInfo_({playlist:e.playlist,mediaIndex:e.mediaIndex+1,startOfSegment:e.startOfSegment+e.duration,isSyncRequest:e.isSyncRequest})}return e}stopForError(e){this.error(e),this.state="READY",this.pause(),this.trigger("error")}segmentRequestFinished_(e,t,i){if(!this.subtitlesTrack_){this.state="READY";return}if(this.saveTransferStats_(t.stats),!this.pendingSegment_){this.state="READY",this.mediaRequestsAborted+=1;return}if(e){e.code===Hr.TIMEOUT&&this.handleTimeout_(),e.code===Hr.ABORTED?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,this.stopForError(e);return}const s=this.pendingSegment_,n=i.mp4VttCues&&i.mp4VttCues.length;n&&(s.mp4VttCues=i.mp4VttCues),this.saveBandwidthRelatedStats_(s.duration,t.stats),t.key&&this.segmentKey(t.key,!0),this.state="APPENDING",this.trigger("appending");const a=s.segment;if(a.map&&(a.map.bytes=t.map.bytes),s.bytes=t.bytes,typeof q.WebVTT!="function"&&typeof this.loadVttJs=="function"){this.state="WAITING_ON_VTTJS",this.loadVttJs().then(()=>this.segmentRequestFinished_(e,t,i),()=>this.stopForError({message:"Error loading vtt.js"}));return}a.requested=!0;try{this.parseVTTCues_(s)}catch(o){this.stopForError({message:o.message,metadata:{errorType:H.Error.StreamingVttParserError,error:o}});return}if(n||this.updateTimeMapping_(s,this.syncController_.timelines[s.timeline],this.playlist_),s.cues.length?s.timingInfo={start:s.cues[0].startTime,end:s.cues[s.cues.length-1].endTime}:s.timingInfo={start:s.startOfSegment,end:s.startOfSegment+s.duration},s.isSyncRequest){this.trigger("syncinfoupdate"),this.pendingSegment_=null,this.state="READY";return}s.byteLength=s.bytes.byteLength,this.mediaSecondsLoaded+=a.duration,s.cues.forEach(o=>{this.subtitlesTrack_.addCue(this.featuresNativeTextTracks_?new q.VTTCue(o.startTime,o.endTime,o.text):o)}),x3(this.subtitlesTrack_),this.handleAppendsDone_()}handleData_(e,t){const i=e&&e.type==="vtt",s=t&&t.type==="text";i&&s&&super.handleData_(e,t)}updateTimingInfoEnd_(){}parseMp4VttCues_(e){const t=this.sourceUpdater_.videoTimestampOffset()===null?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset();e.mp4VttCues.forEach(i=>{const s=i.start+t,n=i.end+t,a=new q.VTTCue(s,n,i.cueText);i.settings&&i.settings.split(" ").forEach(o=>{const l=o.split(":"),u=l[0],c=l[1];a[u]=isNaN(c)?c:Number(c)}),e.cues.push(a)})}parseVTTCues_(e){let t,i=!1;if(typeof q.WebVTT!="function")throw new U3;if(e.cues=[],e.timestampmap={MPEGTS:0,LOCAL:0},e.mp4VttCues){this.parseMp4VttCues_(e);return}typeof q.TextDecoder=="function"?t=new q.TextDecoder("utf8"):(t=q.WebVTT.StringDecoder(),i=!0);const s=new q.WebVTT.Parser(q,q.vttjs,t);if(s.oncue=e.cues.push.bind(e.cues),s.ontimestampmap=a=>{e.timestampmap=a},s.onparsingerror=a=>{H.log.warn("Error encountered when parsing cues: "+a.message)},e.segment.map){let a=e.segment.map.bytes;i&&(a=mv(a)),s.parse(a)}let n=e.bytes;i&&(n=mv(n)),s.parse(n),s.flush()}updateTimeMapping_(e,t,i){const s=e.segment;if(!t)return;if(!e.cues.length){s.empty=!0;return}const{MPEGTS:n,LOCAL:a}=e.timestampmap,l=n/Dn.ONE_SECOND_IN_TS-a+t.mapping;if(e.cues.forEach(u=>{const c=u.endTime-u.startTime,h=this.handleRollover_(u.startTime+l,t.time);u.startTime=Math.max(h,0),u.endTime=Math.max(h+c,0)}),!i.syncInfo){const u=e.cues[0].startTime,c=e.cues[e.cues.length-1].startTime;i.syncInfo={mediaSequence:i.mediaSequence+e.mediaIndex,time:Math.min(u,c-s.duration)}}}handleRollover_(e,t){if(t===null)return e;let i=e*Dn.ONE_SECOND_IN_TS;const s=t*Dn.ONE_SECOND_IN_TS;let n;for(s<i?n=-8589934592:n=8589934592;Math.abs(i-s)>4294967296;)i+=n;return i/Dn.ONE_SECOND_IN_TS}}const V3=function(r,e){const t=r.cues;for(let i=0;i<t.length;i++){const s=t[i];if(e>=s.adStartTime&&e<=s.adEndTime)return s}return null},X3=function(r,e,t=0){if(!r.segments)return;let i=t,s;for(let n=0;n<r.segments.length;n++){const a=r.segments[n];if(s||(s=V3(e,i+a.duration/2)),s){if("cueIn"in a){s.endTime=i,s.adEndTime=i,i+=a.duration,s=null;continue}if(i<s.endTime){i+=a.duration;continue}s.endTime+=a.duration}else if("cueOut"in a&&(s=new q.VTTCue(i,i+a.duration,a.cueOut),s.adStartTime=i,s.adEndTime=i+parseFloat(a.cueOut),e.addCue(s)),"cueOutCont"in a){const[o,l]=a.cueOutCont.split("/").map(parseFloat);s=new q.VTTCue(i,i+a.duration,""),s.adStartTime=i-o,s.adEndTime=s.adStartTime+l,e.addCue(s)}i+=a.duration}};class Ov{constructor({start:e,end:t,segmentIndex:i,partIndex:s=null,appended:n=!1}){this.start_=e,this.end_=t,this.segmentIndex_=i,this.partIndex_=s,this.appended_=n}isInRange(e){return e>=this.start&&e<this.end}markAppended(){this.appended_=!0}resetAppendedStatus(){this.appended_=!1}get isAppended(){return this.appended_}get start(){return this.start_}get end(){return this.end_}get segmentIndex(){return this.segmentIndex_}get partIndex(){return this.partIndex_}}class j3{constructor(e,t=[]){this.segmentSyncInfo_=e,this.partsSyncInfo_=t}get segmentSyncInfo(){return this.segmentSyncInfo_}get partsSyncInfo(){return this.partsSyncInfo_}get hasPartsSyncInfo(){return this.partsSyncInfo_.length>0}resetAppendStatus(){this.segmentSyncInfo_.resetAppendedStatus(),this.partsSyncInfo_.forEach(e=>e.resetAppendedStatus())}}class Uw{constructor(){this.storage_=new Map,this.diagnostics_="",this.isReliable_=!1,this.start_=-1/0,this.end_=1/0}get start(){return this.start_}get end(){return this.end_}get diagnostics(){return this.diagnostics_}get isReliable(){return this.isReliable_}resetAppendedStatus(){this.storage_.forEach(e=>e.resetAppendStatus())}update(e,t){const{mediaSequence:i,segments:s}=e;if(this.isReliable_=this.isReliablePlaylist_(i,s),!!this.isReliable_)return this.updateStorage_(s,i,this.calculateBaseTime_(i,s,t))}getSyncInfoForTime(e){for(const{segmentSyncInfo:t,partsSyncInfo:i}of this.storage_.values())if(i.length){for(const s of i)if(s.isInRange(e))return s}else if(t.isInRange(e))return t;return null}getSyncInfoForMediaSequence(e){return this.storage_.get(e)}updateStorage_(e,t,i){const s=new Map;let n=`
`,a=i,o=t;this.start_=a,e.forEach((l,u)=>{const c=this.storage_.get(o),h=a,f=h+l.duration,m=!!(c&&c.segmentSyncInfo&&c.segmentSyncInfo.isAppended),S=new Ov({start:h,end:f,appended:m,segmentIndex:u});l.syncInfo=S;let y=a;const E=(l.parts||[]).map((C,_)=>{const b=y,T=y+C.duration,w=!!(c&&c.partsSyncInfo&&c.partsSyncInfo[_]&&c.partsSyncInfo[_].isAppended),A=new Ov({start:b,end:T,appended:w,segmentIndex:u,partIndex:_});return y=T,n+=`Media Sequence: ${o}.${_} | Range: ${b} --> ${T} | Appended: ${w}
`,C.syncInfo=A,A});s.set(o,new j3(S,E)),n+=`${$w(l.resolvedUri)} | Media Sequence: ${o} | Range: ${h} --> ${f} | Appended: ${m}
`,o++,a=f}),this.end_=a,this.storage_=s,this.diagnostics_=n}calculateBaseTime_(e,t,i){if(!this.storage_.size)return 0;if(this.storage_.has(e))return this.storage_.get(e).segmentSyncInfo.start;const s=Math.min(...this.storage_.keys());if(e<s){const n=s-e;let a=this.storage_.get(s).segmentSyncInfo.start;for(let o=0;o<n;o++){const l=t[o];a-=l.duration}return a}return i}isReliablePlaylist_(e,t){return e!=null&&Array.isArray(t)&&t.length}}class yv extends Uw{constructor(e){super(),this.parent_=e}calculateBaseTime_(e,t,i){if(!this.storage_.size){const s=this.parent_.getSyncInfoForMediaSequence(e);return s?s.segmentSyncInfo.start:0}return super.calculateBaseTime_(e,t,i)}}const z3=86400,up=[{name:"VOD",run:(r,e,t,i,s)=>t!==1/0?{time:0,segmentIndex:0,partIndex:null}:null},{name:"MediaSequence",run:(r,e,t,i,s,n)=>{const a=r.getMediaSequenceSync(n);if(!a||!a.isReliable)return null;const o=a.getSyncInfoForTime(s);return o?{time:o.start,partIndex:o.partIndex,segmentIndex:o.segmentIndex}:null}},{name:"ProgramDateTime",run:(r,e,t,i,s)=>{if(!Object.keys(r.timelineToDatetimeMappings).length)return null;let n=null,a=null;const o=xm(e);s=s||0;for(let l=0;l<o.length;l++){const u=e.endList||s===0?l:o.length-(l+1),c=o[u],h=c.segment,f=r.timelineToDatetimeMappings[h.timeline];if(!f||!h.dateTimeObject)continue;let S=h.dateTimeObject.getTime()/1e3+f;if(h.parts&&typeof c.partIndex=="number")for(let E=0;E<c.partIndex;E++)S+=h.parts[E].duration;const y=Math.abs(s-S);if(a!==null&&(y===0||a<y))break;a=y,n={time:S,segmentIndex:c.segmentIndex,partIndex:c.partIndex}}return n}},{name:"Segment",run:(r,e,t,i,s)=>{let n=null,a=null;s=s||0;const o=xm(e);for(let l=0;l<o.length;l++){const u=e.endList||s===0?l:o.length-(l+1),c=o[u],h=c.segment,f=c.part&&c.part.start||h&&h.start;if(h.timeline===i&&typeof f<"u"){const m=Math.abs(s-f);if(a!==null&&a<m)break;(!n||a===null||a>=m)&&(a=m,n={time:f,segmentIndex:c.segmentIndex,partIndex:c.partIndex})}}return n}},{name:"Discontinuity",run:(r,e,t,i,s)=>{let n=null;if(s=s||0,e.discontinuityStarts&&e.discontinuityStarts.length){let a=null;for(let o=0;o<e.discontinuityStarts.length;o++){const l=e.discontinuityStarts[o],u=e.discontinuitySequence+o+1,c=r.discontinuities[u];if(c){const h=Math.abs(s-c.time);if(a!==null&&a<h)break;(!n||a===null||a>=h)&&(a=h,n={time:c.time,segmentIndex:l,partIndex:null})}}}return n}},{name:"Playlist",run:(r,e,t,i,s)=>e.syncInfo?{time:e.syncInfo.time,segmentIndex:e.syncInfo.mediaSequence-e.mediaSequence,partIndex:null}:null}];class Z3 extends H.EventTarget{constructor(e={}){super(),this.timelines=[],this.discontinuities=[],this.timelineToDatetimeMappings={};const t=new Uw,i=new yv(t),s=new yv(t);this.mediaSequenceStorage_={main:t,audio:i,vtt:s},this.logger_=fr("SyncController")}getMediaSequenceSync(e){return this.mediaSequenceStorage_[e]||null}getSyncPoint(e,t,i,s,n){if(t!==1/0)return up.find(({name:l})=>l==="VOD").run(this,e,t);const a=this.runStrategies_(e,t,i,s,n);if(!a.length)return null;for(const o of a){const{syncPoint:l,strategy:u}=o,{segmentIndex:c,time:h}=l;if(c<0)continue;const f=e.segments[c],m=h,S=m+f.duration;if(this.logger_(`Strategy: ${u}. Current time: ${s}. selected segment: ${c}. Time: [${m} -> ${S}]}`),s>=m&&s<S)return this.logger_("Found sync point with exact match: ",l),l}return this.selectSyncPoint_(a,{key:"time",value:s})}getExpiredTime(e,t){if(!e||!e.segments)return null;const i=this.runStrategies_(e,t,e.discontinuitySequence,0);if(!i.length)return null;const s=this.selectSyncPoint_(i,{key:"segmentIndex",value:0});return s.segmentIndex>0&&(s.time*=-1),Math.abs(s.time+xl({defaultDuration:e.targetDuration,durationList:e.segments,startIndex:s.segmentIndex,endIndex:0}))}runStrategies_(e,t,i,s,n){const a=[];for(let o=0;o<up.length;o++){const l=up[o],u=l.run(this,e,t,i,s,n);u&&(u.strategy=l.name,a.push({strategy:l.name,syncPoint:u}))}return a}selectSyncPoint_(e,t){let i=e[0].syncPoint,s=Math.abs(e[0].syncPoint[t.key]-t.value),n=e[0].strategy;for(let a=1;a<e.length;a++){const o=Math.abs(e[a].syncPoint[t.key]-t.value);o<s&&(s=o,i=e[a].syncPoint,n=e[a].strategy)}return this.logger_(`syncPoint for [${t.key}: ${t.value}] chosen with strategy [${n}]: [time:${i.time}, segmentIndex:${i.segmentIndex}`+(typeof i.partIndex=="number"?`,partIndex:${i.partIndex}`:"")+"]"),i}saveExpiredSegmentInfo(e,t){const i=t.mediaSequence-e.mediaSequence;if(i>z3){H.log.warn(`Not saving expired segment info. Media sequence gap ${i} is too large.`);return}for(let s=i-1;s>=0;s--){const n=e.segments[s];if(n&&typeof n.start<"u"){t.syncInfo={mediaSequence:e.mediaSequence+s,time:n.start},this.logger_(`playlist refresh sync: [time:${t.syncInfo.time}, mediaSequence: ${t.syncInfo.mediaSequence}]`),this.trigger("syncinfoupdate");break}}}setDateTimeMappingForStart(e){if(this.timelineToDatetimeMappings={},e.segments&&e.segments.length&&e.segments[0].dateTimeObject){const t=e.segments[0],i=t.dateTimeObject.getTime()/1e3;this.timelineToDatetimeMappings[t.timeline]=-i}}saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:t}){const i=this.calculateSegmentTimeMapping_(e,e.timingInfo,t),s=e.segment;i&&(this.saveDiscontinuitySyncInfo_(e),e.playlist.syncInfo||(e.playlist.syncInfo={mediaSequence:e.playlist.mediaSequence+e.mediaIndex,time:s.start}));const n=s.dateTimeObject;s.discontinuity&&t&&n&&(this.timelineToDatetimeMappings[s.timeline]=-(n.getTime()/1e3))}timestampOffsetForTimeline(e){return typeof this.timelines[e]>"u"?null:this.timelines[e].time}mappingForTimeline(e){return typeof this.timelines[e]>"u"?null:this.timelines[e].mapping}calculateSegmentTimeMapping_(e,t,i){const s=e.segment,n=e.part;let a=this.timelines[e.timeline],o,l;if(typeof e.timestampOffset=="number")a={time:e.startOfSegment,mapping:e.startOfSegment-t.start},i&&(this.timelines[e.timeline]=a,this.trigger("timestampoffset"),this.logger_(`time mapping for timeline ${e.timeline}: [time: ${a.time}] [mapping: ${a.mapping}]`)),o=e.startOfSegment,l=t.end+a.mapping;else if(a)o=t.start+a.mapping,l=t.end+a.mapping;else return!1;return n&&(n.start=o,n.end=l),(!s.start||o<s.start)&&(s.start=o),s.end=l,!0}saveDiscontinuitySyncInfo_(e){const t=e.playlist,i=e.segment;if(i.discontinuity)this.discontinuities[i.timeline]={time:i.start,accuracy:0};else if(t.discontinuityStarts&&t.discontinuityStarts.length)for(let s=0;s<t.discontinuityStarts.length;s++){const n=t.discontinuityStarts[s],a=t.discontinuitySequence+s+1,o=n-e.mediaIndex,l=Math.abs(o);if(!this.discontinuities[a]||this.discontinuities[a].accuracy>l){let u;o<0?u=i.start-xl({defaultDuration:t.targetDuration,durationList:t.segments,startIndex:e.mediaIndex,endIndex:n}):u=i.end+xl({defaultDuration:t.targetDuration,durationList:t.segments,startIndex:e.mediaIndex+1,endIndex:n}),this.discontinuities[a]={time:u,accuracy:l}}}}dispose(){this.trigger("dispose"),this.off()}}class W3 extends H.EventTarget{constructor(){super(),this.pendingTimelineChanges_={},this.lastTimelineChanges_={}}clearPendingTimelineChange(e){this.pendingTimelineChanges_[e]=null,this.trigger("pendingtimelinechange")}pendingTimelineChange({type:e,from:t,to:i}){return typeof t=="number"&&typeof i=="number"&&(this.pendingTimelineChanges_[e]={type:e,from:t,to:i},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[e]}lastTimelineChange({type:e,from:t,to:i}){if(typeof t=="number"&&typeof i=="number"){this.lastTimelineChanges_[e]={type:e,from:t,to:i},delete this.pendingTimelineChanges_[e];const s={timelineChangeInfo:{from:t,to:i}};this.trigger({type:"timelinechange",metadata:s})}return this.lastTimelineChanges_[e]}dispose(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()}}const H3=Cw(kw(function(){var r=(function(){function y(){this.listeners={}}var E=y.prototype;return E.on=function(_,b){this.listeners[_]||(this.listeners[_]=[]),this.listeners[_].push(b)},E.off=function(_,b){if(!this.listeners[_])return!1;var T=this.listeners[_].indexOf(b);return this.listeners[_]=this.listeners[_].slice(0),this.listeners[_].splice(T,1),T>-1},E.trigger=function(_){var b=this.listeners[_];if(b)if(arguments.length===2)for(var T=b.length,w=0;w<T;++w)b[w].call(this,arguments[1]);else for(var A=Array.prototype.slice.call(arguments,1),I=b.length,N=0;N<I;++N)b[N].apply(this,A)},E.dispose=function(){this.listeners={}},E.pipe=function(_){this.on("data",function(b){_.push(b)})},y})();/*! @name pkcs7 @version 1.0.4 @license Apache-2.0 */function e(y){return y.subarray(0,y.byteLength-y[y.byteLength-1])}/*! @name aes-decrypter @version 4.0.2 @license Apache-2.0 */const t=function(){const y=[[[],[],[],[],[]],[[],[],[],[],[]]],E=y[0],C=y[1],_=E[4],b=C[4];let T,w,A;const I=[],N=[];let P,R,X,j,Z,Y;for(T=0;T<256;T++)N[(I[T]=T<<1^(T>>7)*283)^T]=T;for(w=A=0;!_[w];w^=P||1,A=N[A]||1)for(j=A^A<<1^A<<2^A<<3^A<<4,j=j>>8^j&255^99,_[w]=j,b[j]=w,X=I[R=I[P=I[w]]],Y=X*16843009^R*65537^P*257^w*16843008,Z=I[j]*257^j*16843008,T=0;T<4;T++)E[T][w]=Z=Z<<24^Z>>>8,C[T][j]=Y=Y<<24^Y>>>8;for(T=0;T<5;T++)E[T]=E[T].slice(0),C[T]=C[T].slice(0);return y};let i=null;class s{constructor(E){i||(i=t()),this._tables=[[i[0][0].slice(),i[0][1].slice(),i[0][2].slice(),i[0][3].slice(),i[0][4].slice()],[i[1][0].slice(),i[1][1].slice(),i[1][2].slice(),i[1][3].slice(),i[1][4].slice()]];let C,_,b;const T=this._tables[0][4],w=this._tables[1],A=E.length;let I=1;if(A!==4&&A!==6&&A!==8)throw new Error("Invalid aes key size");const N=E.slice(0),P=[];for(this._key=[N,P],C=A;C<4*A+28;C++)b=N[C-1],(C%A===0||A===8&&C%A===4)&&(b=T[b>>>24]<<24^T[b>>16&255]<<16^T[b>>8&255]<<8^T[b&255],C%A===0&&(b=b<<8^b>>>24^I<<24,I=I<<1^(I>>7)*283)),N[C]=N[C-A]^b;for(_=0;C;_++,C--)b=N[_&3?C:C-4],C<=4||_<4?P[_]=b:P[_]=w[0][T[b>>>24]]^w[1][T[b>>16&255]]^w[2][T[b>>8&255]]^w[3][T[b&255]]}decrypt(E,C,_,b,T,w){const A=this._key[1];let I=E^A[0],N=b^A[1],P=_^A[2],R=C^A[3],X,j,Z;const Y=A.length/4-2;let te,le=4;const G=this._tables[1],re=G[0],J=G[1],ne=G[2],ae=G[3],Se=G[4];for(te=0;te<Y;te++)X=re[I>>>24]^J[N>>16&255]^ne[P>>8&255]^ae[R&255]^A[le],j=re[N>>>24]^J[P>>16&255]^ne[R>>8&255]^ae[I&255]^A[le+1],Z=re[P>>>24]^J[R>>16&255]^ne[I>>8&255]^ae[N&255]^A[le+2],R=re[R>>>24]^J[I>>16&255]^ne[N>>8&255]^ae[P&255]^A[le+3],le+=4,I=X,N=j,P=Z;for(te=0;te<4;te++)T[(3&-te)+w]=Se[I>>>24]<<24^Se[N>>16&255]<<16^Se[P>>8&255]<<8^Se[R&255]^A[le++],X=I,I=N,N=P,P=R,R=X}}class n extends r{constructor(){super(r),this.jobs=[],this.delay=1,this.timeout_=null}processJob_(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null}push(E){this.jobs.push(E),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))}}const a=function(y){return y<<24|(y&65280)<<8|(y&16711680)>>8|y>>>24},o=function(y,E,C){const _=new Int32Array(y.buffer,y.byteOffset,y.byteLength>>2),b=new s(Array.prototype.slice.call(E)),T=new Uint8Array(y.byteLength),w=new Int32Array(T.buffer);let A,I,N,P,R,X,j,Z,Y;for(A=C[0],I=C[1],N=C[2],P=C[3],Y=0;Y<_.length;Y+=4)R=a(_[Y]),X=a(_[Y+1]),j=a(_[Y+2]),Z=a(_[Y+3]),b.decrypt(R,X,j,Z,w,Y),w[Y]=a(w[Y]^A),w[Y+1]=a(w[Y+1]^I),w[Y+2]=a(w[Y+2]^N),w[Y+3]=a(w[Y+3]^P),A=R,I=X,N=j,P=Z;return T};class l{constructor(E,C,_,b){const T=l.STEP,w=new Int32Array(E.buffer),A=new Uint8Array(E.byteLength);let I=0;for(this.asyncStream_=new n,this.asyncStream_.push(this.decryptChunk_(w.subarray(I,I+T),C,_,A)),I=T;I<w.length;I+=T)_=new Uint32Array([a(w[I-4]),a(w[I-3]),a(w[I-2]),a(w[I-1])]),this.asyncStream_.push(this.decryptChunk_(w.subarray(I,I+T),C,_,A));this.asyncStream_.push(function(){b(null,e(A))})}static get STEP(){return 32e3}decryptChunk_(E,C,_,b){return function(){const T=o(E,C,_);b.set(T,E.byteOffset)}}}var u=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},c;typeof window<"u"?c=window:typeof u<"u"?c=u:typeof self<"u"?c=self:c={};var h=c,f=function(E){return ArrayBuffer.isView==="function"?ArrayBuffer.isView(E):E&&E.buffer instanceof ArrayBuffer},m=h.BigInt||Number;m("0x1"),m("0x100"),m("0x10000"),m("0x1000000"),m("0x100000000"),m("0x10000000000"),m("0x1000000000000"),m("0x100000000000000"),m("0x10000000000000000"),(function(){var y=new Uint16Array([65484]),E=new Uint8Array(y.buffer,y.byteOffset,y.byteLength);return E[0]===255?"big":E[0]===204?"little":"unknown"})();const S=function(y){const E={};return Object.keys(y).forEach(C=>{const _=y[C];f(_)?E[C]={bytes:_.buffer,byteOffset:_.byteOffset,byteLength:_.byteLength}:E[C]=_}),E};self.onmessage=function(y){const E=y.data,C=new Uint8Array(E.encrypted.bytes,E.encrypted.byteOffset,E.encrypted.byteLength),_=new Uint32Array(E.key.bytes,E.key.byteOffset,E.key.byteLength/4),b=new Uint32Array(E.iv.bytes,E.iv.byteOffset,E.iv.byteLength/4);new l(C,_,b,function(T,w){self.postMessage(S({source:E.source,decrypted:w}),[w.buffer])})}}));var Y3=ww(H3);const G3=r=>{let e=r.default?"main":"alternative";return r.characteristics&&r.characteristics.indexOf("public.accessibility.describes-video")>=0&&(e="main-desc"),e},qw=(r,e)=>{r.abort(),r.pause(),e&&e.activePlaylistLoader&&(e.activePlaylistLoader.pause(),e.activePlaylistLoader=null)},Lm=(r,e)=>{e.activePlaylistLoader=r,r.load()},K3=(r,e)=>()=>{const{segmentLoaders:{[r]:t,main:i},mediaTypes:{[r]:s}}=e,n=s.activeTrack(),a=s.getActiveGroup(),o=s.activePlaylistLoader,l=s.lastGroup_;if(!(a&&l&&a.id===l.id)&&(s.lastGroup_=a,s.lastTrack_=n,qw(t,s),!(!a||a.isMainPlaylist))){if(!a.playlistLoader){o&&i.resetEverything();return}t.resyncLoader(),Lm(a.playlistLoader,s)}},J3=(r,e)=>()=>{const{segmentLoaders:{[r]:t},mediaTypes:{[r]:i}}=e;i.lastGroup_=null,t.abort(),t.pause()},e4=(r,e)=>()=>{const{mainPlaylistLoader:t,segmentLoaders:{[r]:i,main:s},mediaTypes:{[r]:n}}=e,a=n.activeTrack(),o=n.getActiveGroup(),l=n.activePlaylistLoader,u=n.lastTrack_;if(!(u&&a&&u.id===a.id)&&(n.lastGroup_=o,n.lastTrack_=a,qw(i,n),!!o)){if(o.isMainPlaylist){if(!a||!u||a.id===u.id)return;const c=e.vhs.playlistController_,h=c.selectPlaylist();if(c.media()===h)return;n.logger_(`track change. Switching main audio from ${u.id} to ${a.id}`),t.pause(),s.resetEverything(),c.fastQualityChange_(h);return}if(r==="AUDIO"){if(!o.playlistLoader){s.setAudio(!0),s.resetEverything();return}i.setAudio(!0),s.setAudio(!1)}if(l===o.playlistLoader){Lm(o.playlistLoader,n);return}i.track&&i.track(a),i.resetEverything(),Lm(o.playlistLoader,n)}},Xh={AUDIO:(r,e)=>()=>{const{mediaTypes:{[r]:t},excludePlaylist:i}=e,s=t.activeTrack(),n=t.activeGroup(),a=(n.filter(l=>l.default)[0]||n[0]).id,o=t.tracks[a];if(s===o){i({error:{message:"Problem encountered loading the default audio track."}});return}H.log.warn("Problem encountered loading the alternate audio track.Switching back to default.");for(const l in t.tracks)t.tracks[l].enabled=t.tracks[l]===o;t.onTrackChanged()},SUBTITLES:(r,e)=>()=>{const{mediaTypes:{[r]:t}}=e;H.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track.");const i=t.activeTrack();i&&(i.mode="disabled"),t.onTrackChanged()}},bv={AUDIO:(r,e,t)=>{if(!e)return;const{tech:i,requestOptions:s,segmentLoaders:{[r]:n}}=t;e.on("loadedmetadata",()=>{const a=e.media();n.playlist(a,s),(!i.paused()||a.endList&&i.preload()!=="none")&&n.load()}),e.on("loadedplaylist",()=>{n.playlist(e.media(),s),i.paused()||n.load()}),e.on("error",Xh[r](r,t))},SUBTITLES:(r,e,t)=>{const{tech:i,requestOptions:s,segmentLoaders:{[r]:n},mediaTypes:{[r]:a}}=t;e.on("loadedmetadata",()=>{const o=e.media();n.playlist(o,s),n.track(a.activeTrack()),(!i.paused()||o.endList&&i.preload()!=="none")&&n.load()}),e.on("loadedplaylist",()=>{n.playlist(e.media(),s),i.paused()||n.load()}),e.on("error",Xh[r](r,t))}},t4={AUDIO:(r,e)=>{const{vhs:t,sourceType:i,segmentLoaders:{[r]:s},requestOptions:n,main:{mediaGroups:a},mediaTypes:{[r]:{groups:o,tracks:l,logger_:u}},mainPlaylistLoader:c}=e,h=Qu(c.main);(!a[r]||Object.keys(a[r]).length===0)&&(a[r]={main:{default:{default:!0}}},h&&(a[r].main.default.playlists=c.main.playlists));for(const f in a[r]){o[f]||(o[f]=[]);for(const m in a[r][f]){let S=a[r][f][m],y;if(h?(u(`AUDIO group '${f}' label '${m}' is a main playlist`),S.isMainPlaylist=!0,y=null):i==="vhs-json"&&S.playlists?y=new Ta(S.playlists[0],t,n):S.resolvedUri?y=new Ta(S.resolvedUri,t,n):S.playlists&&i==="dash"?y=new Pm(S.playlists[0],t,n,c):y=null,S=Je({id:m,playlistLoader:y},S),bv[r](r,S.playlistLoader,e),o[f].push(S),typeof l[m]>"u"){const E=new H.AudioTrack({id:m,kind:G3(S),enabled:!1,language:S.language,default:S.default,label:m});l[m]=E}}}s.on("error",Xh[r](r,e))},SUBTITLES:(r,e)=>{const{tech:t,vhs:i,sourceType:s,segmentLoaders:{[r]:n},requestOptions:a,main:{mediaGroups:o},mediaTypes:{[r]:{groups:l,tracks:u}},mainPlaylistLoader:c}=e;for(const h in o[r]){l[h]||(l[h]=[]);for(const f in o[r][h]){if(!i.options_.useForcedSubtitles&&o[r][h][f].forced)continue;let m=o[r][h][f],S;if(s==="hls")S=new Ta(m.resolvedUri,i,a);else if(s==="dash"){if(!m.playlists.filter(E=>E.excludeUntil!==1/0).length)return;S=new Pm(m.playlists[0],i,a,c)}else s==="vhs-json"&&(S=new Ta(m.playlists?m.playlists[0]:m.resolvedUri,i,a));if(m=Je({id:f,playlistLoader:S},m),bv[r](r,m.playlistLoader,e),l[h].push(m),typeof u[f]>"u"){const y=t.addRemoteTextTrack({id:f,kind:"subtitles",default:m.default&&m.autoselect,language:m.language,label:f},!1).track;u[f]=y}}}n.on("error",Xh[r](r,e))},"CLOSED-CAPTIONS":(r,e)=>{const{tech:t,main:{mediaGroups:i},mediaTypes:{[r]:{groups:s,tracks:n}}}=e;for(const a in i[r]){s[a]||(s[a]=[]);for(const o in i[r][a]){const l=i[r][a][o];if(!/^(?:CC|SERVICE)/.test(l.instreamId))continue;const u=t.options_.vhs&&t.options_.vhs.captionServices||{};let c={label:o,language:l.language,instreamId:l.instreamId,default:l.default&&l.autoselect};if(u[c.instreamId]&&(c=Je(c,u[c.instreamId])),c.default===void 0&&delete c.default,s[a].push(Je({id:o},l)),typeof n[o]>"u"){const h=t.addRemoteTextTrack({id:c.instreamId,kind:"captions",default:c.default,language:c.language,label:c.label},!1).track;n[o]=h}}}}},Vw=(r,e)=>{for(let t=0;t<r.length;t++)if(F0(e,r[t])||r[t].playlists&&Vw(r[t].playlists,e))return!0;return!1},i4=(r,e)=>t=>{const{mainPlaylistLoader:i,mediaTypes:{[r]:{groups:s}}}=e,n=i.media();if(!n)return null;let a=null;n.attributes[r]&&(a=s[n.attributes[r]]);const o=Object.keys(s);if(!a)if(r==="AUDIO"&&o.length>1&&Qu(e.main))for(let l=0;l<o.length;l++){const u=s[o[l]];if(Vw(u,n)){a=u;break}}else s.main?a=s.main:o.length===1&&(a=s[o[0]]);return typeof t>"u"?a:t===null||!a?null:a.filter(l=>l.id===t.id)[0]||null},r4={AUDIO:(r,e)=>()=>{const{mediaTypes:{[r]:{tracks:t}}}=e;for(const i in t)if(t[i].enabled)return t[i];return null},SUBTITLES:(r,e)=>()=>{const{mediaTypes:{[r]:{tracks:t}}}=e;for(const i in t)if(t[i].mode==="showing"||t[i].mode==="hidden")return t[i];return null}},s4=(r,{mediaTypes:e})=>()=>{const t=e[r].activeTrack();return t?e[r].activeGroup(t):null},n4=r=>{["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(u=>{t4[u](u,r)});const{mediaTypes:e,mainPlaylistLoader:t,tech:i,vhs:s,segmentLoaders:{["AUDIO"]:n,main:a}}=r;["AUDIO","SUBTITLES"].forEach(u=>{e[u].activeGroup=i4(u,r),e[u].activeTrack=r4[u](u,r),e[u].onGroupChanged=K3(u,r),e[u].onGroupChanging=J3(u,r),e[u].onTrackChanged=e4(u,r),e[u].getActiveGroup=s4(u,r)});const o=e.AUDIO.activeGroup();if(o){const u=(o.filter(h=>h.default)[0]||o[0]).id;e.AUDIO.tracks[u].enabled=!0,e.AUDIO.onGroupChanged(),e.AUDIO.onTrackChanged(),e.AUDIO.getActiveGroup().playlistLoader?(a.setAudio(!1),n.setAudio(!0)):a.setAudio(!0)}t.on("mediachange",()=>{["AUDIO","SUBTITLES"].forEach(u=>e[u].onGroupChanged())}),t.on("mediachanging",()=>{["AUDIO","SUBTITLES"].forEach(u=>e[u].onGroupChanging())});const l=()=>{e.AUDIO.onTrackChanged(),i.trigger({type:"usage",name:"vhs-audio-change"})};i.audioTracks().addEventListener("change",l),i.remoteTextTracks().addEventListener("change",e.SUBTITLES.onTrackChanged),s.on("dispose",()=>{i.audioTracks().removeEventListener("change",l),i.remoteTextTracks().removeEventListener("change",e.SUBTITLES.onTrackChanged)}),i.clearTracks("audio");for(const u in e.AUDIO.tracks)i.audioTracks().addTrack(e.AUDIO.tracks[u])},a4=()=>{const r={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(e=>{r[e]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:_s,activeTrack:_s,getActiveGroup:_s,onGroupChanged:_s,onTrackChanged:_s,lastTrack_:null,logger_:fr(`MediaGroups[${e}]`)}}),r};class vv{constructor(){this.priority_=[],this.pathwayClones_=new Map}set version(e){e===1&&(this.version_=e)}set ttl(e){this.ttl_=e||300}set reloadUri(e){e&&(this.reloadUri_=Ai(this.reloadUri_,e))}set priority(e){e&&e.length&&(this.priority_=e)}set pathwayClones(e){e&&e.length&&(this.pathwayClones_=new Map(e.map(t=>[t.ID,t])))}get version(){return this.version_}get ttl(){return this.ttl_}get reloadUri(){return this.reloadUri_}get priority(){return this.priority_}get pathwayClones(){return this.pathwayClones_}}class o4 extends H.EventTarget{constructor(e,t){super(),this.currentPathway=null,this.defaultPathway=null,this.queryBeforeStart=!1,this.availablePathways_=new Set,this.steeringManifest=new vv,this.proxyServerUrl_=null,this.manifestType_=null,this.ttlTimeout_=null,this.request_=null,this.currentPathwayClones=new Map,this.nextPathwayClones=new Map,this.excludedSteeringManifestURLs=new Set,this.logger_=fr("Content Steering"),this.xhr_=e,this.getBandwidth_=t}assignTagProperties(e,t){this.manifestType_=t.serverUri?"HLS":"DASH";const i=t.serverUri||t.serverURL;if(!i){this.logger_(`steering manifest URL is ${i}, cannot request steering manifest.`),this.trigger("error");return}if(i.startsWith("data:")){this.decodeDataUriManifest_(i.substring(i.indexOf(",")+1));return}this.steeringManifest.reloadUri=Ai(e,i),this.defaultPathway=t.pathwayId||t.defaultServiceLocation,this.queryBeforeStart=t.queryBeforeStart,this.proxyServerUrl_=t.proxyServerURL,this.defaultPathway&&!this.queryBeforeStart&&this.trigger("content-steering")}requestSteeringManifest(e){const t=this.steeringManifest.reloadUri;if(!t)return;const i=e?t:this.getRequestURI(t);if(!i){this.logger_("No valid content steering manifest URIs. Stopping content steering."),this.trigger("error"),this.dispose();return}const s={contentSteeringInfo:{uri:i}};this.trigger({type:"contentsteeringloadstart",metadata:s}),this.request_=this.xhr_({uri:i,requestType:"content-steering-manifest"},(n,a)=>{if(n){if(a.status===410){this.logger_(`manifest request 410 ${n}.`),this.logger_(`There will be no more content steering requests to ${i} this session.`),this.excludedSteeringManifestURLs.add(i);return}if(a.status===429){const u=a.responseHeaders["retry-after"];this.logger_(`manifest request 429 ${n}.`),this.logger_(`content steering will retry in ${u} seconds.`),this.startTTLTimeout_(parseInt(u,10));return}this.logger_(`manifest failed to load ${n}.`),this.startTTLTimeout_();return}this.trigger({type:"contentsteeringloadcomplete",metadata:s});let o;try{o=JSON.parse(this.request_.responseText)}catch(u){const c={errorType:H.Error.StreamingContentSteeringParserError,error:u};this.trigger({type:"error",metadata:c})}this.assignSteeringProperties_(o);const l={contentSteeringInfo:s.contentSteeringInfo,contentSteeringManifest:{version:this.steeringManifest.version,reloadUri:this.steeringManifest.reloadUri,priority:this.steeringManifest.priority}};this.trigger({type:"contentsteeringparsed",metadata:l}),this.startTTLTimeout_()})}setProxyServerUrl_(e){const t=new q.URL(e),i=new q.URL(this.proxyServerUrl_);return i.searchParams.set("url",encodeURI(t.toString())),this.setSteeringParams_(i.toString())}decodeDataUriManifest_(e){const t=JSON.parse(q.atob(e));this.assignSteeringProperties_(t)}setSteeringParams_(e){const t=new q.URL(e),i=this.getPathway(),s=this.getBandwidth_();if(i){const n=`_${this.manifestType_}_pathway`;t.searchParams.set(n,i)}if(s){const n=`_${this.manifestType_}_throughput`;t.searchParams.set(n,s)}return t.toString()}assignSteeringProperties_(e){if(this.steeringManifest.version=e.VERSION,!this.steeringManifest.version){this.logger_(`manifest version is ${e.VERSION}, which is not supported.`),this.trigger("error");return}this.steeringManifest.ttl=e.TTL,this.steeringManifest.reloadUri=e["RELOAD-URI"],this.steeringManifest.priority=e["PATHWAY-PRIORITY"]||e["SERVICE-LOCATION-PRIORITY"],this.steeringManifest.pathwayClones=e["PATHWAY-CLONES"],this.nextPathwayClones=this.steeringManifest.pathwayClones,this.availablePathways_.size||(this.logger_("There are no available pathways for content steering. Ending content steering."),this.trigger("error"),this.dispose());const i=(s=>{for(const n of s)if(this.availablePathways_.has(n))return n;return[...this.availablePathways_][0]})(this.steeringManifest.priority);this.currentPathway!==i&&(this.currentPathway=i,this.trigger("content-steering"))}getPathway(){return this.currentPathway||this.defaultPathway}getRequestURI(e){if(!e)return null;const t=s=>this.excludedSteeringManifestURLs.has(s);if(this.proxyServerUrl_){const s=this.setProxyServerUrl_(e);if(!t(s))return s}const i=this.setSteeringParams_(e);return t(i)?null:i}startTTLTimeout_(e=this.steeringManifest.ttl){const t=e*1e3;this.ttlTimeout_=q.setTimeout(()=>{this.requestSteeringManifest()},t)}clearTTLTimeout_(){q.clearTimeout(this.ttlTimeout_),this.ttlTimeout_=null}abort(){this.request_&&this.request_.abort(),this.request_=null}dispose(){this.off("content-steering"),this.off("error"),this.abort(),this.clearTTLTimeout_(),this.currentPathway=null,this.defaultPathway=null,this.queryBeforeStart=null,this.proxyServerUrl_=null,this.manifestType_=null,this.ttlTimeout_=null,this.request_=null,this.excludedSteeringManifestURLs=new Set,this.availablePathways_=new Set,this.steeringManifest=new vv}addAvailablePathway(e){e&&this.availablePathways_.add(e)}clearAvailablePathways(){this.availablePathways_.clear()}excludePathway(e){return this.availablePathways_.delete(e)}didDASHTagChange(e,t){return!t&&this.steeringManifest.reloadUri||t&&(Ai(e,t.serverURL)!==this.steeringManifest.reloadUri||t.defaultServiceLocation!==this.defaultPathway||t.queryBeforeStart!==this.queryBeforeStart||t.proxyServerURL!==this.proxyServerUrl_)}getAvailablePathways(){return this.availablePathways_}}const l4=(r,e)=>{let t=null;return(...i)=>{clearTimeout(t),t=setTimeout(()=>{r.apply(null,i)},e)}},u4=10;let Xs;const c4=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"],h4=function(r){return this.audioSegmentLoader_[r]+this.mainSegmentLoader_[r]},d4=function({currentPlaylist:r,buffered:e,currentTime:t,nextPlaylist:i,bufferLowWaterLine:s,bufferHighWaterLine:n,duration:a,bufferBasedABR:o,log:l}){if(!i)return H.log.warn("We received no playlist to switch to. Please check your stream."),!1;const u=`allowing switch ${r&&r.id||"null"} -> ${i.id}`;if(!r)return l(`${u} as current playlist is not set`),!0;if(i.id===r.id)return!1;const c=!!Sa(e,t).length;if(!r.endList)return!c&&typeof r.partTargetDuration=="number"?(l(`not ${u} as current playlist is live llhls, but currentTime isn't in buffered.`),!1):(l(`${u} as current playlist is live`),!0);const h=$0(e,t),f=o?Zt.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:Zt.MAX_BUFFER_LOW_WATER_LINE;if(a<f)return l(`${u} as duration < max low water line (${a} < ${f})`),!0;const m=i.attributes.BANDWIDTH,S=r.attributes.BANDWIDTH;if(m<S&&(!o||h<n)){let y=`${u} as next bandwidth < current bandwidth (${m} < ${S})`;return o&&(y+=` and forwardBuffer < bufferHighWaterLine (${h} < ${n})`),l(y),!0}if((!o||m>S)&&h>=s){let y=`${u} as forwardBuffer >= bufferLowWaterLine (${h} >= ${s})`;return o&&(y+=` and next bandwidth > current bandwidth (${m} > ${S})`),l(y),!0}return l(`not ${u} as no switching criteria met`),!1};class f4 extends H.EventTarget{constructor(e){super(),this.fastQualityChange_=l4(this.fastQualityChange_.bind(this),100);const{src:t,withCredentials:i,tech:s,bandwidth:n,externVhs:a,useCueTags:o,playlistExclusionDuration:l,enableLowInitialPlaylist:u,sourceType:c,cacheEncryptionKeys:h,bufferBasedABR:f,leastPixelDiffSelector:m,captionServices:S,experimentalUseMMS:y}=e;if(!t)throw new Error("A non-empty playlist URL or JSON manifest string is required");let{maxPlaylistRetries:E}=e;(E===null||typeof E>"u")&&(E=1/0),Xs=a,this.bufferBasedABR=!!f,this.leastPixelDiffSelector=!!m,this.withCredentials=i,this.tech_=s,this.vhs_=s.vhs,this.player_=e.player_,this.sourceType_=c,this.useCueTags_=o,this.playlistExclusionDuration=l,this.maxPlaylistRetries=E,this.enableLowInitialPlaylist=u,this.usingManagedMediaSource_=!1,this.useCueTags_&&(this.cueTagsTrack_=this.tech_.addTextTrack("metadata","ad-cues"),this.cueTagsTrack_.inBandMetadataTrackDispatchType=""),this.requestOptions_={withCredentials:i,maxPlaylistRetries:E,timeout:null},this.on("error",this.pauseLoading),this.mediaTypes_=a4(),y&&q.ManagedMediaSource?(this.tech_.el_.disableRemotePlayback=!0,this.mediaSource=new q.ManagedMediaSource,this.usingManagedMediaSource_=!0,H.log("Using ManagedMediaSource")):q.MediaSource&&(this.mediaSource=new q.MediaSource),this.handleDurationChange_=this.handleDurationChange_.bind(this),this.handleSourceOpen_=this.handleSourceOpen_.bind(this),this.handleSourceEnded_=this.handleSourceEnded_.bind(this),this.load=this.load.bind(this),this.pause=this.pause.bind(this),this.mediaSource.addEventListener("durationchange",this.handleDurationChange_),this.mediaSource.addEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.addEventListener("sourceended",this.handleSourceEnded_),this.mediaSource.addEventListener("startstreaming",this.load),this.mediaSource.addEventListener("endstreaming",this.pause),this.seekable_=Yt(),this.hasPlayed_=!1,this.syncController_=new Z3(e),this.segmentMetadataTrack_=s.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,this.segmentMetadataTrack_.mode="hidden",this.decrypter_=new Y3,this.sourceUpdater_=new Fw(this.mediaSource),this.inbandTextTracks_={},this.timelineChangeController_=new W3,this.keyStatusMap_=new Map;const C={vhs:this.vhs_,parse708captions:e.parse708captions,useDtsForTimestampOffset:e.useDtsForTimestampOffset,captionServices:S,mediaSource:this.mediaSource,currentTime:this.tech_.currentTime.bind(this.tech_),seekable:()=>this.seekable(),seeking:()=>this.tech_.seeking(),duration:()=>this.duration(),hasPlayed:()=>this.hasPlayed_,goalBufferLength:()=>this.goalBufferLength(),bandwidth:n,syncController:this.syncController_,decrypter:this.decrypter_,sourceType:this.sourceType_,inbandTextTracks:this.inbandTextTracks_,cacheEncryptionKeys:h,sourceUpdater:this.sourceUpdater_,timelineChangeController:this.timelineChangeController_,exactManifestTimings:e.exactManifestTimings,addMetadataToTextTrack:this.addMetadataToTextTrack.bind(this)};this.mainPlaylistLoader_=this.sourceType_==="dash"?new Pm(t,this.vhs_,Je(this.requestOptions_,{addMetadataToTextTrack:this.addMetadataToTextTrack.bind(this)})):new Ta(t,this.vhs_,Je(this.requestOptions_,{addDateRangesToTextTrack:this.addDateRangesToTextTrack_.bind(this)})),this.setupMainPlaylistLoaderListeners_(),this.mainSegmentLoader_=new Im(Je(C,{segmentMetadataTrack:this.segmentMetadataTrack_,loaderType:"main"}),e),this.audioSegmentLoader_=new Im(Je(C,{loaderType:"audio"}),e),this.subtitleSegmentLoader_=new q3(Je(C,{loaderType:"vtt",featuresNativeTextTracks:this.tech_.featuresNativeTextTracks,loadVttJs:()=>new Promise((T,w)=>{function A(){s.off("vttjserror",I),T()}function I(){s.off("vttjsloaded",A),w()}s.one("vttjsloaded",A),s.one("vttjserror",I),s.addWebVttScript_()})}),e);const _=()=>this.mainSegmentLoader_.bandwidth;this.contentSteeringController_=new o4(this.vhs_.xhr,_),this.setupSegmentLoaderListeners_(),this.bufferBasedABR&&(this.mainPlaylistLoader_.one("loadedplaylist",()=>this.startABRTimer_()),this.tech_.on("pause",()=>this.stopABRTimer_()),this.tech_.on("play",()=>this.startABRTimer_())),c4.forEach(T=>{this[T+"_"]=h4.bind(this,T)}),this.logger_=fr("pc"),this.triggeredFmp4Usage=!1,this.tech_.preload()==="none"?(this.loadOnPlay_=()=>{this.loadOnPlay_=null,this.mainPlaylistLoader_.load()},this.tech_.one("play",this.loadOnPlay_)):this.mainPlaylistLoader_.load(),this.timeToLoadedData__=-1,this.mainAppendsToLoadedData__=-1,this.audioAppendsToLoadedData__=-1;const b=this.tech_.preload()==="none"?"play":"loadstart";this.tech_.one(b,()=>{const T=Date.now();this.tech_.one("loadeddata",()=>{this.timeToLoadedData__=Date.now()-T,this.mainAppendsToLoadedData__=this.mainSegmentLoader_.mediaAppends,this.audioAppendsToLoadedData__=this.audioSegmentLoader_.mediaAppends})})}mainAppendsToLoadedData_(){return this.mainAppendsToLoadedData__}audioAppendsToLoadedData_(){return this.audioAppendsToLoadedData__}appendsToLoadedData_(){const e=this.mainAppendsToLoadedData_(),t=this.audioAppendsToLoadedData_();return e===-1||t===-1?-1:e+t}timeToLoadedData_(){return this.timeToLoadedData__}checkABR_(e="abr"){const t=this.selectPlaylist();t&&this.shouldSwitchToMedia_(t)&&this.switchMedia_(t,e)}switchMedia_(e,t,i){const s=this.media(),n=s&&(s.id||s.uri),a=e&&(e.id||e.uri);if(n&&n!==a){this.logger_(`switch media ${n} -> ${a} from ${t}`);const o={renditionInfo:{id:a,bandwidth:e.attributes.BANDWIDTH,resolution:e.attributes.RESOLUTION,codecs:e.attributes.CODECS},cause:t};this.trigger({type:"renditionselected",metadata:o}),this.tech_.trigger({type:"usage",name:`vhs-rendition-change-${t}`})}this.mainPlaylistLoader_.media(e,i)}switchMediaForDASHContentSteering_(){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(e=>{const t=this.mediaTypes_[e],i=t?t.activeGroup():null,s=this.contentSteeringController_.getPathway();if(i&&s){const a=(i.length?i[0].playlists:i.playlists).filter(o=>o.attributes.serviceLocation===s);a.length&&this.mediaTypes_[e].activePlaylistLoader.media(a[0])}})}startABRTimer_(){this.stopABRTimer_(),this.abrTimer_=q.setInterval(()=>this.checkABR_(),250)}stopABRTimer_(){this.tech_.scrubbing&&this.tech_.scrubbing()||(q.clearInterval(this.abrTimer_),this.abrTimer_=null)}getAudioTrackPlaylists_(){const e=this.main(),t=e&&e.playlists||[];if(!e||!e.mediaGroups||!e.mediaGroups.AUDIO)return t;const i=e.mediaGroups.AUDIO,s=Object.keys(i);let n;if(Object.keys(this.mediaTypes_.AUDIO.groups).length)n=this.mediaTypes_.AUDIO.activeTrack();else{const o=i.main||s.length&&i[s[0]];for(const l in o)if(o[l].default){n={label:l};break}}if(!n)return t;const a=[];for(const o in i)if(i[o][n.label]){const l=i[o][n.label];if(l.playlists&&l.playlists.length)a.push.apply(a,l.playlists);else if(l.uri)a.push(l);else if(e.playlists.length)for(let u=0;u<e.playlists.length;u++){const c=e.playlists[u];c.attributes&&c.attributes.AUDIO&&c.attributes.AUDIO===o&&a.push(c)}}return a.length?a:t}setupMainPlaylistLoaderListeners_(){this.mainPlaylistLoader_.on("loadedmetadata",()=>{const t=this.mainPlaylistLoader_.media(),i=t.targetDuration*1.5*1e3;wm(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?this.requestOptions_.timeout=0:this.requestOptions_.timeout=i,t.endList&&this.tech_.preload()!=="none"&&(this.mainSegmentLoader_.playlist(t,this.requestOptions_),this.mainSegmentLoader_.load()),n4({sourceType:this.sourceType_,segmentLoaders:{AUDIO:this.audioSegmentLoader_,SUBTITLES:this.subtitleSegmentLoader_,main:this.mainSegmentLoader_},tech:this.tech_,requestOptions:this.requestOptions_,mainPlaylistLoader:this.mainPlaylistLoader_,vhs:this.vhs_,main:this.main(),mediaTypes:this.mediaTypes_,excludePlaylist:this.excludePlaylist.bind(this)}),this.triggerPresenceUsage_(this.main(),t),this.setupFirstPlay(),!this.mediaTypes_.AUDIO.activePlaylistLoader||this.mediaTypes_.AUDIO.activePlaylistLoader.media()?this.trigger("selectedinitialmedia"):this.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",()=>{this.trigger("selectedinitialmedia")})}),this.mainPlaylistLoader_.on("loadedplaylist",()=>{this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_);let t=this.mainPlaylistLoader_.media();if(!t){this.attachContentSteeringListeners_(),this.initContentSteeringController_(),this.excludeUnsupportedVariants_();let i;if(this.enableLowInitialPlaylist&&(i=this.selectInitialPlaylist()),i||(i=this.selectPlaylist()),!i||!this.shouldSwitchToMedia_(i)||(this.initialMedia_=i,this.switchMedia_(this.initialMedia_,"initial"),!(this.sourceType_==="vhs-json"&&this.initialMedia_.segments)))return;t=this.initialMedia_}this.handleUpdatedMediaPlaylist(t)}),this.mainPlaylistLoader_.on("error",()=>{const t=this.mainPlaylistLoader_.error;this.excludePlaylist({playlistToExclude:t.playlist,error:t})}),this.mainPlaylistLoader_.on("mediachanging",()=>{this.mainSegmentLoader_.abort(),this.mainSegmentLoader_.pause()}),this.mainPlaylistLoader_.on("mediachange",()=>{const t=this.mainPlaylistLoader_.media(),i=t.targetDuration*1.5*1e3;wm(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?this.requestOptions_.timeout=0:this.requestOptions_.timeout=i,this.sourceType_==="dash"&&this.mainPlaylistLoader_.isPaused&&this.mainPlaylistLoader_.load(),this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.playlist(t,this.requestOptions_),this.waitingForFastQualityPlaylistReceived_?this.runFastQualitySwitch_():this.mainSegmentLoader_.load(),this.tech_.trigger({type:"mediachange",bubbles:!0})}),this.mainPlaylistLoader_.on("playlistunchanged",()=>{const t=this.mainPlaylistLoader_.media();if(t.lastExcludeReason_==="playlist-unchanged")return;this.stuckAtPlaylistEnd_(t)&&(this.excludePlaylist({error:{message:"Playlist no longer updating.",reason:"playlist-unchanged"}}),this.tech_.trigger("playliststuck"))}),this.mainPlaylistLoader_.on("renditiondisabled",()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"})}),this.mainPlaylistLoader_.on("renditionenabled",()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"})}),["manifestrequeststart","manifestrequestcomplete","manifestparsestart","manifestparsecomplete","playlistrequeststart","playlistrequestcomplete","playlistparsestart","playlistparsecomplete","renditiondisabled","renditionenabled"].forEach(t=>{this.mainPlaylistLoader_.on(t,i=>{this.player_.trigger(Lt({},i))})})}handleUpdatedMediaPlaylist(e){this.useCueTags_&&this.updateAdCues_(e),this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.playlist(e,this.requestOptions_),this.waitingForFastQualityPlaylistReceived_&&this.runFastQualitySwitch_(),this.updateDuration(!e.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())}triggerPresenceUsage_(e,t){const i=e.mediaGroups||{};let s=!0;const n=Object.keys(i.AUDIO);for(const a in i.AUDIO)for(const o in i.AUDIO[a])i.AUDIO[a][o].uri||(s=!1);s&&this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),Object.keys(i.SUBTITLES).length&&this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),Xs.Playlist.isAes(t)&&this.tech_.trigger({type:"usage",name:"vhs-aes"}),n.length&&Object.keys(i.AUDIO[n[0]]).length>1&&this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.useCueTags_&&this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"})}shouldSwitchToMedia_(e){const t=this.mainPlaylistLoader_.media()||this.mainPlaylistLoader_.pendingMedia_,i=this.tech_.currentTime(),s=this.bufferLowWaterLine(),n=this.bufferHighWaterLine(),a=this.tech_.buffered();return d4({buffered:a,currentTime:i,currentPlaylist:t,nextPlaylist:e,bufferLowWaterLine:s,bufferHighWaterLine:n,duration:this.duration(),bufferBasedABR:this.bufferBasedABR,log:this.logger_})}setupSegmentLoaderListeners_(){this.mainSegmentLoader_.on("bandwidthupdate",()=>{this.checkABR_("bandwidthupdate"),this.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("timeout",()=>{this.bufferBasedABR&&this.mainSegmentLoader_.load()}),this.bufferBasedABR||this.mainSegmentLoader_.on("progress",()=>{this.trigger("progress")}),this.mainSegmentLoader_.on("error",()=>{const i=this.mainSegmentLoader_.error();this.excludePlaylist({playlistToExclude:i.playlist,error:i})}),this.mainSegmentLoader_.on("appenderror",()=>{this.error=this.mainSegmentLoader_.error_,this.trigger("error")}),this.mainSegmentLoader_.on("syncinfoupdate",()=>{this.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",()=>{this.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",()=>{this.onSyncInfoUpdate_()}),this.audioSegmentLoader_.on("appenderror",()=>{this.error=this.audioSegmentLoader_.error_,this.trigger("error")}),this.mainSegmentLoader_.on("ended",()=>{this.logger_("main segment loader ended"),this.onEndOfStream()}),this.timelineChangeController_.on("audioTimelineBehind",()=>{const i=this.audioSegmentLoader_.pendingSegment_;if(!i||!i.segment||!i.segment.syncInfo)return;const s=i.segment.syncInfo.end+.01;this.tech_.setCurrentTime(s)}),this.timelineChangeController_.on("fixBadTimelineChange",()=>{this.logger_("Fix bad timeline change. Restarting al segment loaders..."),this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.resetEverything(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.pause(),this.audioSegmentLoader_.resetEverything()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.pause(),this.subtitleSegmentLoader_.resetEverything()),this.load()}),this.mainSegmentLoader_.on("earlyabort",i=>{this.bufferBasedABR||(this.delegateLoaders_("all",["abort"]),this.excludePlaylist({error:{message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},playlistExclusionDuration:u4}))});const e=()=>{if(!this.sourceUpdater_.hasCreatedSourceBuffers())return this.tryToCreateSourceBuffers_();const i=this.getCodecsOrExclude_();i&&this.sourceUpdater_.addOrChangeSourceBuffers(i)};this.mainSegmentLoader_.on("trackinfo",e),this.audioSegmentLoader_.on("trackinfo",e),this.mainSegmentLoader_.on("fmp4",()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("fmp4",()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("ended",()=>{this.logger_("audioSegmentLoader ended"),this.onEndOfStream()}),["segmentselected","segmentloadstart","segmentloaded","segmentkeyloadstart","segmentkeyloadcomplete","segmentdecryptionstart","segmentdecryptioncomplete","segmenttransmuxingstart","segmenttransmuxingcomplete","segmenttransmuxingtrackinfoavailable","segmenttransmuxingtiminginfoavailable","segmentappendstart","appendsdone","bandwidthupdated","timelinechange","codecschange"].forEach(i=>{this.mainSegmentLoader_.on(i,s=>{this.player_.trigger(Lt({},s))}),this.audioSegmentLoader_.on(i,s=>{this.player_.trigger(Lt({},s))}),this.subtitleSegmentLoader_.on(i,s=>{this.player_.trigger(Lt({},s))})})}mediaSecondsLoaded_(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}load(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()}pause(){this.mainSegmentLoader_.pause(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.pause(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.pause()}fastQualityChange_(e=this.selectPlaylist()){if(e&&e===this.mainPlaylistLoader_.media()){this.logger_("skipping fastQualityChange because new media is same as old");return}this.switchMedia_(e,"fast-quality"),this.waitingForFastQualityPlaylistReceived_=!0}runFastQualitySwitch_(){this.waitingForFastQualityPlaylistReceived_=!1,this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.resetEverything(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.pause(),this.audioSegmentLoader_.resetEverything()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.pause(),this.subtitleSegmentLoader_.resetEverything()),this.load()}play(){if(this.setupFirstPlay())return;this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();const e=this.tech_.seekable();if(this.tech_.duration()===1/0&&this.tech_.currentTime()<e.start(0))return this.tech_.setCurrentTime(e.end(e.length-1))}setupFirstPlay(){const e=this.mainPlaylistLoader_.media();if(!e||this.tech_.paused()||this.hasPlayed_)return!1;if(!e.endList||e.start){const t=this.seekable();if(!t.length)return!1;const i=t.end(0);let s=i;if(e.start){const n=e.start.timeOffset;n<0?s=Math.max(i+n,t.start(0)):s=Math.min(i,n)}this.trigger("firstplay"),this.tech_.setCurrentTime(s)}return this.hasPlayed_=!0,this.load(),!0}handleSourceOpen_(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){const e=this.tech_.play();typeof e<"u"&&typeof e.then=="function"&&e.then(null,t=>{})}this.trigger("sourceopen")}handleSourceEnded_(){if(!this.inbandTextTracks_.metadataTrack_)return;const e=this.inbandTextTracks_.metadataTrack_.cues;if(!e||!e.length)return;const t=this.duration();e[e.length-1].endTime=isNaN(t)||Math.abs(t)===1/0?Number.MAX_VALUE:t}handleDurationChange_(){this.tech_.trigger("durationchange")}onEndOfStream(){let e=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){const t=this.mainSegmentLoader_.getCurrentMediaInfo_();!t||t.hasVideo?e=e&&this.audioSegmentLoader_.ended_:e=this.audioSegmentLoader_.ended_}e&&(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())}stuckAtPlaylistEnd_(e){if(!this.seekable().length)return!1;const i=this.syncController_.getExpiredTime(e,this.duration());if(i===null)return!1;const s=Xs.Playlist.playlistEnd(e,i),n=this.tech_.currentTime(),a=this.tech_.buffered();if(!a.length)return s-n<=Wr;const o=a.end(a.length-1);return o-n<=Wr&&s-o<=Wr}excludePlaylist({playlistToExclude:e=this.mainPlaylistLoader_.media(),error:t={},playlistExclusionDuration:i}){if(e=e||this.mainPlaylistLoader_.media(),i=i||t.playlistExclusionDuration||this.playlistExclusionDuration,!e){this.error=t,this.mediaSource.readyState!=="open"?this.trigger("error"):this.sourceUpdater_.endOfStream("network");return}e.playlistErrors_++;const s=this.mainPlaylistLoader_.main.playlists,n=s.filter(Yd),a=n.length===1&&n[0]===e;if(s.length===1&&i!==1/0)return H.log.warn(`Problem encountered with playlist ${e.id}. Trying again since it is the only playlist.`),this.tech_.trigger("retryplaylist"),this.mainPlaylistLoader_.load(a);if(a){if(this.main().contentSteering){const S=this.pathwayAttribute_(e),y=this.contentSteeringController_.steeringManifest.ttl*1e3;this.contentSteeringController_.excludePathway(S),this.excludeThenChangePathway_(),setTimeout(()=>{this.contentSteeringController_.addAvailablePathway(S)},y);return}let m=!1;s.forEach(S=>{if(S===e)return;const y=S.excludeUntil;typeof y<"u"&&y!==1/0&&(m=!0,delete S.excludeUntil)}),m&&(H.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}let o;e.playlistErrors_>this.maxPlaylistRetries?o=1/0:o=Date.now()+i*1e3,e.excludeUntil=o,t.reason&&(e.lastExcludeReason_=t.reason),this.tech_.trigger("excludeplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-excluded"});const l=this.selectPlaylist();if(!l){this.error="Playback cannot continue. No available working or supported playlists.",this.trigger("error");return}const u=t.internal?this.logger_:H.log.warn,c=t.message?" "+t.message:"";u(`${t.internal?"Internal problem":"Problem"} encountered with playlist ${e.id}.${c} Switching to playlist ${l.id}.`),l.attributes.AUDIO!==e.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),l.attributes.SUBTITLES!==e.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]);const h=l.targetDuration/2*1e3||5*1e3,f=typeof l.lastRequest=="number"&&Date.now()-l.lastRequest<=h;return this.switchMedia_(l,"exclude",a||f)}pauseLoading(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()}delegateLoaders_(e,t){const i=[],s=e==="all";(s||e==="main")&&i.push(this.mainPlaylistLoader_);const n=[];(s||e==="audio")&&n.push("AUDIO"),(s||e==="subtitle")&&(n.push("CLOSED-CAPTIONS"),n.push("SUBTITLES")),n.forEach(a=>{const o=this.mediaTypes_[a]&&this.mediaTypes_[a].activePlaylistLoader;o&&i.push(o)}),["main","audio","subtitle"].forEach(a=>{const o=this[`${a}SegmentLoader_`];o&&(e===a||e==="all")&&i.push(o)}),i.forEach(a=>t.forEach(o=>{typeof a[o]=="function"&&a[o]()}))}setCurrentTime(e){const t=Sa(this.tech_.buffered(),e);if(!(this.mainPlaylistLoader_&&this.mainPlaylistLoader_.media())||!this.mainPlaylistLoader_.media().segments)return 0;if(t&&t.length)return e;this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.resetEverything(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.pause(),this.audioSegmentLoader_.resetEverything()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.pause(),this.subtitleSegmentLoader_.resetEverything()),this.load()}duration(){if(!this.mainPlaylistLoader_)return 0;const e=this.mainPlaylistLoader_.media();return e?e.endList?this.mediaSource?this.mediaSource.duration:Xs.Playlist.duration(e):1/0:0}seekable(){return this.seekable_}getSeekableRange_(e,t){const i=e.media();if(!i)return null;const s=this.syncController_.getMediaSequenceSync(t);if(s&&s.isReliable){const o=s.start,l=s.end;if(!isFinite(o)||!isFinite(l))return null;const u=Xs.Playlist.liveEdgeDelay(this.mainPlaylistLoader_.main,i),c=Math.max(o,l-u);return Yt([[o,c]])}const n=this.syncController_.getExpiredTime(i,this.duration());if(n===null)return null;const a=Xs.Playlist.seekable(i,n,Xs.Playlist.liveEdgeDelay(this.mainPlaylistLoader_.main,i));return a.length?a:null}computeFinalSeekable_(e,t){if(!t)return e;const i=e.start(0),s=e.end(0),n=t.start(0),a=t.end(0);return n>s||i>a?e:Yt([[Math.max(i,n),Math.min(s,a)]])}onSyncInfoUpdate_(){if(!this.mainPlaylistLoader_)return;const e=this.getSeekableRange_(this.mainPlaylistLoader_,"main");if(!e)return;let t;if(this.mediaTypes_.AUDIO.activePlaylistLoader&&(t=this.getSeekableRange_(this.mediaTypes_.AUDIO.activePlaylistLoader,"audio"),!t))return;const i=this.seekable_;if(this.seekable_=this.computeFinalSeekable_(e,t),!this.seekable_||i&&i.length&&this.seekable_.length&&i.start(0)===this.seekable_.start(0)&&i.end(0)===this.seekable_.end(0))return;this.logger_(`seekable updated [${Jx(this.seekable_)}]`);const s={seekableRanges:this.seekable_};this.trigger({type:"seekablerangeschanged",metadata:s}),this.tech_.trigger("seekablechanged")}updateDuration(e){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),this.mediaSource.readyState!=="open"){this.updateDuration_=this.updateDuration.bind(this,e),this.mediaSource.addEventListener("sourceopen",this.updateDuration_);return}if(e){const s=this.seekable();if(!s.length)return;(isNaN(this.mediaSource.duration)||this.mediaSource.duration<s.end(s.length-1))&&this.sourceUpdater_.setDuration(s.end(s.length-1));return}const t=this.tech_.buffered();let i=Xs.Playlist.duration(this.mainPlaylistLoader_.media());t.length>0&&(i=Math.max(i,t.end(t.length-1))),this.mediaSource.duration!==i&&this.sourceUpdater_.setDuration(i)}dispose(){this.trigger("dispose"),this.decrypter_.terminate(),this.mainPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.contentSteeringController_.dispose(),this.keyStatusMap_.clear(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach(e=>{const t=this.mediaTypes_[e].groups;for(const i in t)t[i].forEach(s=>{s.playlistLoader&&s.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()}main(){return this.mainPlaylistLoader_.main}media(){return this.mainPlaylistLoader_.media()||this.initialMedia_}areMediaTypesKnown_(){const e=!!this.mediaTypes_.AUDIO.activePlaylistLoader,t=!!this.mainSegmentLoader_.getCurrentMediaInfo_(),i=e?!!this.audioSegmentLoader_.getCurrentMediaInfo_():!0;return!(!t||!i)}getCodecsOrExclude_(){const e={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}},t=this.mainSegmentLoader_.getPendingSegmentPlaylist()||this.media();e.video=e.main;const i=wl(this.main(),t),s={},n=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(e.main.hasVideo&&(s.video=i.video||e.main.videoCodec||tL),e.main.isMuxed&&(s.video+=`,${i.audio||e.main.audioCodec||ub}`),(e.main.hasAudio&&!e.main.isMuxed||e.audio.hasAudio||n)&&(s.audio=i.audio||e.main.audioCodec||e.audio.audioCodec||ub,e.audio.isFmp4=e.main.hasAudio&&!e.main.isMuxed?e.main.isFmp4:e.audio.isFmp4),!s.audio&&!s.video){this.excludePlaylist({playlistToExclude:t,error:{message:"Could not determine codecs for playlist."},playlistExclusionDuration:1/0});return}const a=(u,c)=>u?vl(c,this.usingManagedMediaSource_):Vf(c),o={};let l;if(["video","audio"].forEach(function(u){if(s.hasOwnProperty(u)&&!a(e[u].isFmp4,s[u])){const c=e[u].isFmp4?"browser":"muxer";o[c]=o[c]||[],o[c].push(s[u]),u==="audio"&&(l=c)}}),n&&l&&t.attributes.AUDIO){const u=t.attributes.AUDIO;this.main().playlists.forEach(c=>{(c.attributes&&c.attributes.AUDIO)===u&&c!==t&&(c.excludeUntil=1/0)}),this.logger_(`excluding audio group ${u} as ${l} does not support codec(s): "${s.audio}"`)}if(Object.keys(o).length){const u=Object.keys(o).reduce((c,h)=>(c&&(c+=", "),c+=`${h} does not support codec(s): "${o[h].join(",")}"`,c),"")+".";this.excludePlaylist({playlistToExclude:t,error:{internal:!0,message:u},playlistExclusionDuration:1/0});return}if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){const u=[];if(["video","audio"].forEach(c=>{const h=(Fr(this.sourceUpdater_.codecs[c]||"")[0]||{}).type,f=(Fr(s[c]||"")[0]||{}).type;h&&f&&h.toLowerCase()!==f.toLowerCase()&&u.push(`"${this.sourceUpdater_.codecs[c]}" -> "${s[c]}"`)}),u.length){this.excludePlaylist({playlistToExclude:t,error:{message:`Codec switching not supported: ${u.join(", ")}.`,internal:!0},playlistExclusionDuration:1/0});return}}return s}tryToCreateSourceBuffers_(){if(this.mediaSource.readyState!=="open"||this.sourceUpdater_.hasCreatedSourceBuffers()||!this.areMediaTypesKnown_())return;const e=this.getCodecsOrExclude_();if(!e)return;this.sourceUpdater_.createSourceBuffers(e);const t=[e.video,e.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(t)}excludeUnsupportedVariants_(){const e=this.main().playlists,t=[];Object.keys(e).forEach(i=>{const s=e[i];if(t.indexOf(s.id)!==-1)return;t.push(s.id);const n=wl(this.main,s),a=[];n.audio&&!Vf(n.audio)&&!vl(n.audio,this.usingManagedMediaSource_)&&a.push(`audio codec ${n.audio}`),n.video&&!Vf(n.video)&&!vl(n.video,this.usingManagedMediaSource_)&&a.push(`video codec ${n.video}`),n.text&&n.text==="stpp.ttml.im1t"&&a.push(`text codec ${n.text}`),a.length&&(s.excludeUntil=1/0,this.logger_(`excluding ${s.id} for unsupported: ${a.join(", ")}`))})}excludeIncompatibleVariants_(e){const t=[],i=this.main().playlists,s=ql(Fr(e)),n=iv(s),a=s.video&&Fr(s.video)[0]||null,o=s.audio&&Fr(s.audio)[0]||null;Object.keys(i).forEach(l=>{const u=i[l];if(t.indexOf(u.id)!==-1||u.excludeUntil===1/0)return;t.push(u.id);const c=[],h=wl(this.mainPlaylistLoader_.main,u),f=iv(h);if(!(!h.audio&&!h.video)){if(f!==n&&c.push(`codec count "${f}" !== "${n}"`),!this.sourceUpdater_.canChangeType()){const m=h.video&&Fr(h.video)[0]||null,S=h.audio&&Fr(h.audio)[0]||null;m&&a&&m.type.toLowerCase()!==a.type.toLowerCase()&&c.push(`video codec "${m.type}" !== "${a.type}"`),S&&o&&S.type.toLowerCase()!==o.type.toLowerCase()&&c.push(`audio codec "${S.type}" !== "${o.type}"`)}c.length&&(u.excludeUntil=1/0,this.logger_(`excluding ${u.id}: ${c.join(" && ")}`))}})}updateAdCues_(e){let t=0;const i=this.seekable();i.length&&(t=i.start(0)),X3(e,this.cueTagsTrack_,t)}goalBufferLength(){const e=this.tech_.currentTime(),t=Zt.GOAL_BUFFER_LENGTH,i=Zt.GOAL_BUFFER_LENGTH_RATE,s=Math.max(t,Zt.MAX_GOAL_BUFFER_LENGTH);return Math.min(t+e*i,s)}bufferLowWaterLine(){const e=this.tech_.currentTime(),t=Zt.BUFFER_LOW_WATER_LINE,i=Zt.BUFFER_LOW_WATER_LINE_RATE,s=Math.max(t,Zt.MAX_BUFFER_LOW_WATER_LINE),n=Math.max(t,Zt.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(t+e*i,this.bufferBasedABR?n:s)}bufferHighWaterLine(){return Zt.BUFFER_HIGH_WATER_LINE}addDateRangesToTextTrack_(e){cv(this.inbandTextTracks_,"com.apple.streaming",this.tech_),_3({inbandTextTracks:this.inbandTextTracks_,dateRanges:e})}addMetadataToTextTrack(e,t,i){const s=this.sourceUpdater_.videoBuffer?this.sourceUpdater_.videoTimestampOffset():this.sourceUpdater_.audioTimestampOffset();cv(this.inbandTextTracks_,e,this.tech_),v3({inbandTextTracks:this.inbandTextTracks_,metadataArray:t,timestampOffset:s,videoDuration:i})}pathwayAttribute_(e){return e.attributes["PATHWAY-ID"]||e.attributes.serviceLocation}initContentSteeringController_(){const e=this.main();if(e.contentSteering){for(const t of e.playlists)this.contentSteeringController_.addAvailablePathway(this.pathwayAttribute_(t));if(this.contentSteeringController_.assignTagProperties(e.uri,e.contentSteering),this.contentSteeringController_.queryBeforeStart){this.contentSteeringController_.requestSteeringManifest(!0);return}this.tech_.one("canplay",()=>{this.contentSteeringController_.requestSteeringManifest()})}}resetContentSteeringController_(){this.contentSteeringController_.clearAvailablePathways(),this.contentSteeringController_.dispose(),this.initContentSteeringController_()}attachContentSteeringListeners_(){this.contentSteeringController_.on("content-steering",this.excludeThenChangePathway_.bind(this)),["contentsteeringloadstart","contentsteeringloadcomplete","contentsteeringparsed"].forEach(t=>{this.contentSteeringController_.on(t,i=>{this.trigger(Lt({},i))})}),this.sourceType_==="dash"&&this.mainPlaylistLoader_.on("loadedplaylist",()=>{const t=this.main();(this.contentSteeringController_.didDASHTagChange(t.uri,t.contentSteering)||(()=>{const n=this.contentSteeringController_.getAvailablePathways(),a=[];for(const o of t.playlists){const l=o.attributes.serviceLocation;if(l&&(a.push(l),!n.has(l)))return!0}return!!(!a.length&&n.size)})())&&this.resetContentSteeringController_()})}excludeThenChangePathway_(){const e=this.contentSteeringController_.getPathway();if(!e)return;this.handlePathwayClones_();const i=this.main().playlists,s=new Set;let n=!1;Object.keys(i).forEach(a=>{const o=i[a],l=this.pathwayAttribute_(o),u=l&&e!==l;o.excludeUntil===1/0&&o.lastExcludeReason_==="content-steering"&&!u&&(delete o.excludeUntil,delete o.lastExcludeReason_,n=!0);const h=!o.excludeUntil&&o.excludeUntil!==1/0;!s.has(o.id)&&u&&h&&(s.add(o.id),o.excludeUntil=1/0,o.lastExcludeReason_="content-steering",this.logger_(`excluding ${o.id} for ${o.lastExcludeReason_}`))}),this.contentSteeringController_.manifestType_==="DASH"&&Object.keys(this.mediaTypes_).forEach(a=>{const o=this.mediaTypes_[a];if(o.activePlaylistLoader){const l=o.activePlaylistLoader.media_;l&&l.attributes.serviceLocation!==e&&(n=!0)}}),n&&this.changeSegmentPathway_()}handlePathwayClones_(){const t=this.main().playlists,i=this.contentSteeringController_.currentPathwayClones,s=this.contentSteeringController_.nextPathwayClones;if(i&&i.size||s&&s.size){for(const[a,o]of i.entries())s.get(a)||(this.mainPlaylistLoader_.updateOrDeleteClone(o),this.contentSteeringController_.excludePathway(a));for(const[a,o]of s.entries()){const l=i.get(a);if(!l){t.filter(c=>c.attributes["PATHWAY-ID"]===o["BASE-ID"]).forEach(c=>{this.mainPlaylistLoader_.addClonePathway(o,c)}),this.contentSteeringController_.addAvailablePathway(a);continue}this.equalPathwayClones_(l,o)||(this.mainPlaylistLoader_.updateOrDeleteClone(o,!0),this.contentSteeringController_.addAvailablePathway(a))}this.contentSteeringController_.currentPathwayClones=new Map(JSON.parse(JSON.stringify([...s])))}}equalPathwayClones_(e,t){if(e["BASE-ID"]!==t["BASE-ID"]||e.ID!==t.ID||e["URI-REPLACEMENT"].HOST!==t["URI-REPLACEMENT"].HOST)return!1;const i=e["URI-REPLACEMENT"].PARAMS,s=t["URI-REPLACEMENT"].PARAMS;for(const n in i)if(i[n]!==s[n])return!1;for(const n in s)if(i[n]!==s[n])return!1;return!0}changeSegmentPathway_(){const e=this.selectPlaylist();this.pauseLoading(),this.contentSteeringController_.manifestType_==="DASH"&&this.switchMediaForDASHContentSteering_(),this.switchMedia_(e,"content-steering")}excludeNonUsablePlaylistsByKeyId_(){if(!this.mainPlaylistLoader_||!this.mainPlaylistLoader_.main)return;let e=0;const t="non-usable";this.mainPlaylistLoader_.main.playlists.forEach(i=>{const s=this.mainPlaylistLoader_.getKeyIdSet(i);!s||!s.size||s.forEach(n=>{const a="usable",o=this.keyStatusMap_.has(n)&&this.keyStatusMap_.get(n)===a,l=i.lastExcludeReason_===t&&i.excludeUntil===1/0;o?o&&l&&(delete i.excludeUntil,delete i.lastExcludeReason_,this.logger_(`enabling playlist ${i.id} because key ID ${n} is ${a}`)):(i.excludeUntil!==1/0&&i.lastExcludeReason_!==t&&(i.excludeUntil=1/0,i.lastExcludeReason_=t,this.logger_(`excluding playlist ${i.id} because the key ID ${n} doesn't exist in the keyStatusMap or is not ${a}`)),e++)})}),e>=this.mainPlaylistLoader_.main.playlists.length&&this.mainPlaylistLoader_.main.playlists.forEach(i=>{const s=i&&i.attributes&&i.attributes.RESOLUTION&&i.attributes.RESOLUTION.height<720,n=i.excludeUntil===1/0&&i.lastExcludeReason_===t;s&&n&&(delete i.excludeUntil,H.log.warn(`enabling non-HD playlist ${i.id} because all playlists were excluded due to ${t} key IDs`))})}addKeyStatus_(e,t){const n=(typeof e=="string"?e:F3(e)).slice(0,32).toLowerCase();this.logger_(`KeyStatus '${t}' with key ID ${n} added to the keyStatusMap`),this.keyStatusMap_.set(n,t)}updatePlaylistByKeyStatus(e,t){this.addKeyStatus_(e,t),this.waitingForFastQualityPlaylistReceived_||this.excludeNonUsableThenChangePlaylist_(),this.mainPlaylistLoader_.off("loadedplaylist",this.excludeNonUsableThenChangePlaylist_.bind(this)),this.mainPlaylistLoader_.on("loadedplaylist",this.excludeNonUsableThenChangePlaylist_.bind(this))}excludeNonUsableThenChangePlaylist_(){this.excludeNonUsablePlaylistsByKeyId_(),this.fastQualityChange_()}}const p4=(r,e,t)=>i=>{const s=r.main.playlists[e],n=N0(s),a=Yd(s);if(typeof i>"u")return a;i?delete s.disabled:s.disabled=!0;const o={renditionInfo:{id:e,bandwidth:s.attributes.BANDWIDTH,resolution:s.attributes.RESOLUTION,codecs:s.attributes.CODECS},cause:"fast-quality"};return i!==a&&!n&&(i?(t(s),r.trigger({type:"renditionenabled",metadata:o})):r.trigger({type:"renditiondisabled",metadata:o})),i};class m4{constructor(e,t,i){const{playlistController_:s}=e,n=s.fastQualityChange_.bind(s);if(t.attributes){const a=t.attributes.RESOLUTION;this.width=a&&a.width,this.height=a&&a.height,this.bandwidth=t.attributes.BANDWIDTH,this.frameRate=t.attributes["FRAME-RATE"]}this.codecs=wl(s.main(),t),this.playlist=t,this.id=i,this.enabled=p4(e.playlists,t.id,n)}}const g4=function(r){r.representations=()=>{const e=r.playlistController_.main(),t=Qu(e)?r.playlistController_.getAudioTrackPlaylists_():e.playlists;return t?t.filter(i=>!N0(i)).map((i,s)=>new m4(r,i,i.id)):[]}},Sv=["seeking","seeked","pause","playing","error"];class O4 extends H.EventTarget{constructor(e){super(),this.playlistController_=e.playlistController,this.tech_=e.tech,this.seekable=e.seekable,this.allowSeeksWithinUnsafeLiveWindow=e.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=e.liveRangeSafeTimeDelta,this.media=e.media,this.playedRanges_=[],this.consecutiveUpdates=0,this.lastRecordedTime=null,this.checkCurrentTimeTimeout_=null,this.logger_=fr("PlaybackWatcher"),this.logger_("initialize");const t=()=>this.monitorCurrentTime_(),i=()=>this.monitorCurrentTime_(),s=()=>this.techWaiting_(),n=()=>this.resetTimeUpdate_(),a=this.playlistController_,o=["main","subtitle","audio"],l={};o.forEach(c=>{l[c]={reset:()=>this.resetSegmentDownloads_(c),updateend:()=>this.checkSegmentDownloads_(c)},a[`${c}SegmentLoader_`].on("appendsdone",l[c].updateend),a[`${c}SegmentLoader_`].on("playlistupdate",l[c].reset),this.tech_.on(["seeked","seeking"],l[c].reset)});const u=c=>{["main","audio"].forEach(h=>{a[`${h}SegmentLoader_`][c]("appended",this.seekingAppendCheck_)})};this.seekingAppendCheck_=()=>{this.fixesBadSeeks_()&&(this.consecutiveUpdates=0,this.lastRecordedTime=this.tech_.currentTime(),u("off"))},this.clearSeekingAppendCheck_=()=>u("off"),this.watchForBadSeeking_=()=>{this.clearSeekingAppendCheck_(),u("on")},this.tech_.on("seeked",this.clearSeekingAppendCheck_),this.tech_.on("seeking",this.watchForBadSeeking_),this.tech_.on("waiting",s),this.tech_.on(Sv,n),this.tech_.on("canplay",i),this.tech_.one("play",t),this.dispose=()=>{this.clearSeekingAppendCheck_(),this.logger_("dispose"),this.tech_.off("waiting",s),this.tech_.off(Sv,n),this.tech_.off("canplay",i),this.tech_.off("play",t),this.tech_.off("seeking",this.watchForBadSeeking_),this.tech_.off("seeked",this.clearSeekingAppendCheck_),o.forEach(c=>{a[`${c}SegmentLoader_`].off("appendsdone",l[c].updateend),a[`${c}SegmentLoader_`].off("playlistupdate",l[c].reset),this.tech_.off(["seeked","seeking"],l[c].reset)}),this.checkCurrentTimeTimeout_&&q.clearTimeout(this.checkCurrentTimeTimeout_),this.resetTimeUpdate_()}}monitorCurrentTime_(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&q.clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=q.setTimeout(this.monitorCurrentTime_.bind(this),250)}resetSegmentDownloads_(e){const t=this.playlistController_[`${e}SegmentLoader_`];this[`${e}StalledDownloads_`]>0&&this.logger_(`resetting possible stalled download count for ${e} loader`),this[`${e}StalledDownloads_`]=0,this[`${e}Buffered_`]=t.buffered_()}checkSegmentDownloads_(e){const t=this.playlistController_,i=t[`${e}SegmentLoader_`],s=i.buffered_(),n=i5(this[`${e}Buffered_`],s);if(this[`${e}Buffered_`]=s,n){const a={bufferedRanges:s};t.trigger({type:"bufferedrangeschanged",metadata:a}),this.resetSegmentDownloads_(e);return}this[`${e}StalledDownloads_`]++,this.logger_(`found #${this[`${e}StalledDownloads_`]} ${e} appends that did not increase buffer (possible stalled download)`,{playlistId:i.playlist_&&i.playlist_.id,buffered:Mn(s)}),!(this[`${e}StalledDownloads_`]<10)&&(this.logger_(`${e} loader stalled download exclusion`),this.resetSegmentDownloads_(e),this.tech_.trigger({type:"usage",name:`vhs-${e}-download-exclusion`}),e!=="subtitle"&&t.excludePlaylist({error:{message:`Excessive ${e} segment downloading detected.`},playlistExclusionDuration:1/0}))}checkCurrentTime_(){if(this.tech_.paused()||this.tech_.seeking())return;const e=this.tech_.currentTime(),t=this.tech_.buffered();if(this.lastRecordedTime===e&&(!t.length||e+Wr>=t.end(t.length-1)))return this.techWaiting_();if(this.consecutiveUpdates>=5&&e===this.lastRecordedTime)this.consecutiveUpdates++,this.waiting_();else if(e===this.lastRecordedTime)this.consecutiveUpdates++;else{this.playedRanges_.push(Yt([this.lastRecordedTime,e]));const i={playedRanges:this.playedRanges_};this.playlistController_.trigger({type:"playedrangeschanged",metadata:i}),this.consecutiveUpdates=0,this.lastRecordedTime=e}}resetTimeUpdate_(){this.consecutiveUpdates=0}fixesBadSeeks_(){if(!this.tech_.seeking())return!1;const t=this.seekable(),i=this.tech_.currentTime(),s=this.afterSeekableWindow_(t,i,this.media(),this.allowSeeksWithinUnsafeLiveWindow);let n;if(s&&(n=t.end(t.length-1)),this.beforeSeekableWindow_(t,i)){const S=t.start(0);n=S+(S===t.end(0)?0:Wr)}if(typeof n<"u")return this.logger_(`Trying to seek outside of seekable at time ${i} with seekable range ${Jx(t)}. Seeking to ${n}.`),this.tech_.setCurrentTime(n),!0;const a=this.playlistController_.sourceUpdater_,o=this.tech_.buffered(),l=a.audioBuffer?a.audioBuffered():null,u=a.videoBuffer?a.videoBuffered():null,c=this.media(),h=c.partTargetDuration?c.partTargetDuration:(c.targetDuration-Zr)*2,f=[l,u];for(let S=0;S<f.length;S++){if(!f[S])continue;if($0(f[S],i)<h)return!1}const m=xc(o,i);return m.length===0?!1:(n=m.start(0)+Wr,this.logger_(`Buffered region starts (${m.start(0)})  just beyond seek point (${i}). Seeking to ${n}.`),this.tech_.setCurrentTime(n),!0)}waiting_(){if(this.techWaiting_())return;const e=this.tech_.currentTime(),t=this.tech_.buffered(),i=Sa(t,e);if(i.length&&e+3<=i.end(0)){this.resetTimeUpdate_(),this.tech_.setCurrentTime(e),this.logger_(`Stopped at ${e} while inside a buffered region [${i.start(0)} -> ${i.end(0)}]. Attempting to resume playback by seeking to the current time.`),this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"});return}}techWaiting_(){const e=this.seekable(),t=this.tech_.currentTime();if(this.tech_.seeking())return!0;if(this.beforeSeekableWindow_(e,t)){const o=e.end(e.length-1);return this.logger_(`Fell out of live window at time ${t}. Seeking to live point (seekable end) ${o}`),this.resetTimeUpdate_(),this.tech_.setCurrentTime(o),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),!0}const i=this.tech_.vhs.playlistController_.sourceUpdater_,s=this.tech_.buffered();if(this.videoUnderflow_({audioBuffered:i.audioBuffered(),videoBuffered:i.videoBuffered(),currentTime:t}))return this.resetTimeUpdate_(),this.tech_.setCurrentTime(t),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),!0;const a=xc(s,t);return a.length>0?(this.logger_(`Stopped at ${t} and seeking to ${a.start(0)}`),this.resetTimeUpdate_(),this.skipTheGap_(t),!0):!1}afterSeekableWindow_(e,t,i,s=!1){if(!e.length)return!1;let n=e.end(e.length-1)+Wr;const a=!i.endList,o=typeof i.partTargetDuration=="number";return a&&(o||s)&&(n=e.end(e.length-1)+i.targetDuration*3),t>n}beforeSeekableWindow_(e,t){return!!(e.length&&e.start(0)>0&&t<e.start(0)-this.liveRangeSafeTimeDelta)}videoUnderflow_({videoBuffered:e,audioBuffered:t,currentTime:i}){if(!e)return;let s;if(e.length&&t.length){const n=Sa(e,i-3),a=Sa(e,i),o=Sa(t,i);o.length&&!a.length&&n.length&&(s={start:n.end(0),end:o.end(0)})}else xc(e,i).length||(s=this.gapFromVideoUnderflow_(e,i));return s?(this.logger_(`Encountered a gap in video from ${s.start} to ${s.end}. Seeking to current time ${i}`),!0):!1}skipTheGap_(e){const t=this.tech_.buffered(),i=this.tech_.currentTime(),s=xc(t,i);if(this.resetTimeUpdate_(),s.length===0||i!==e)return;this.logger_("skipTheGap_:","currentTime:",i,"scheduled currentTime:",e,"nextRange start:",s.start(0)),this.tech_.setCurrentTime(s.start(0)+Zr);const n={gapInfo:{from:i,to:s.start(0)}};this.playlistController_.trigger({type:"gapjumped",metadata:n}),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"})}gapFromVideoUnderflow_(e,t){const i=J$(e);for(let s=0;s<i.length;s++){const n=i.start(s),a=i.end(s);if(t-n<4&&t-n>2)return{start:n,end:a}}return null}}const y4={errorInterval:30,getSource(r){const t=this.tech({IWillNotUseThisInPlugins:!0}).currentSource_||this.currentSource();return r(t)}},Xw=function(r,e){let t=0,i=0;const s=Je(y4,e);r.ready(()=>{r.trigger({type:"usage",name:"vhs-error-reload-initialized"})});const n=function(){i&&r.currentTime(i)},a=function(c){c!=null&&(i=r.duration()!==1/0&&r.currentTime()||0,r.one("loadedmetadata",n),r.src(c),r.trigger({type:"usage",name:"vhs-error-reload"}),r.play())},o=function(){if(Date.now()-t<s.errorInterval*1e3){r.trigger({type:"usage",name:"vhs-error-reload-canceled"});return}if(!s.getSource||typeof s.getSource!="function"){H.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!");return}return t=Date.now(),s.getSource.call(r,a)},l=function(){r.off("loadedmetadata",n),r.off("error",o),r.off("dispose",l)},u=function(c){l(),Xw(r,c)};r.on("error",o),r.on("dispose",l),r.reloadSourceOnError=u},b4=function(r){Xw(this,r)};var jw="3.17.2",v4="7.1.0",S4="1.3.1",T4="7.2.0",_4="4.0.2";const Ct={PlaylistLoader:Ta,Playlist:Mi,utils:E5,STANDARD_PLAYLIST_SELECTOR:uv,INITIAL_PLAYLIST_SELECTOR:m3,lastBandwidthSelector:uv,movingAverageBandwidthSelector:f3,comparePlaylistBandwidth:q0,comparePlaylistResolution:d3,xhr:yw()};Object.keys(Zt).forEach(r=>{Object.defineProperty(Ct,r,{get(){return H.log.warn(`using Vhs.${r} is UNSAFE be sure you know what you are doing`),Zt[r]},set(e){if(H.log.warn(`using Vhs.${r} is UNSAFE be sure you know what you are doing`),typeof e!="number"||e<0){H.log.warn(`value of Vhs.${r} must be greater than or equal to 0`);return}Zt[r]=e}})});const zw="videojs-vhs",Zw=function(r,e){const t=e.media();let i=-1;for(let s=0;s<r.length;s++)if(r[s].id===t.id){i=s;break}r.selectedIndex_=i,r.trigger({selectedIndex:i,type:"change"})},x4=function(r,e){e.representations().forEach(t=>{r.addQualityLevel(t)}),Zw(r,e.playlists)};Ct.canPlaySource=function(){return H.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")};const w4=(r,e,t)=>{if(!r)return r;let i={};e&&e.attributes&&e.attributes.CODECS&&(i=ql(Fr(e.attributes.CODECS))),t&&t.attributes&&t.attributes.CODECS&&(i.audio=t.attributes.CODECS);const s=Ya(i.video),n=Ya(i.audio),a={};for(const o in r)a[o]={},n&&(a[o].audioContentType=n),s&&(a[o].videoContentType=s),e.contentProtection&&e.contentProtection[o]&&e.contentProtection[o].pssh&&(a[o].pssh=e.contentProtection[o].pssh),typeof r[o]=="string"&&(a[o].url=r[o]);return Je(r,a)},C4=(r,e)=>r.reduce((t,i)=>{if(!i.contentProtection)return t;const s=e.reduce((n,a)=>{const o=i.contentProtection[a];return o&&o.pssh&&(n[a]={pssh:o.pssh}),n},{});return Object.keys(s).length&&t.push(s),t},[]),k4=({player:r,sourceKeySystems:e,audioMedia:t,mainPlaylists:i})=>{if(!r.eme.initializeMediaKeys)return Promise.resolve();const s=t?i.concat([t]):i,n=C4(s,Object.keys(e)),a=[],o=[];return n.forEach(l=>{o.push(new Promise((u,c)=>{r.tech_.one("keysessioncreated",u)})),a.push(new Promise((u,c)=>{r.eme.initializeMediaKeys({keySystems:l},h=>{if(h){c(h);return}u()})}))}),Promise.race([Promise.all(a),Promise.race(o)])},E4=({player:r,sourceKeySystems:e,media:t,audioMedia:i})=>{const s=w4(e,t,i);return s?(r.currentSource().keySystems=s,s&&!r.eme?(H.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),!1):!0):!1},Ww=()=>{if(!q.localStorage)return null;const r=q.localStorage.getItem(zw);if(!r)return null;try{return JSON.parse(r)}catch{return null}},A4=r=>{if(!q.localStorage)return!1;let e=Ww();e=e?Je(e,r):r;try{q.localStorage.setItem(zw,JSON.stringify(e))}catch{return!1}return e},P4=r=>r.toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")===0?JSON.parse(r.substring(r.indexOf(",")+1)):r,Hw=(r,e)=>{r._requestCallbackSet||(r._requestCallbackSet=new Set),r._requestCallbackSet.add(e)},Yw=(r,e)=>{r._responseCallbackSet||(r._responseCallbackSet=new Set),r._responseCallbackSet.add(e)},Gw=(r,e)=>{r._requestCallbackSet&&(r._requestCallbackSet.delete(e),r._requestCallbackSet.size||delete r._requestCallbackSet)},Kw=(r,e)=>{r._responseCallbackSet&&(r._responseCallbackSet.delete(e),r._responseCallbackSet.size||delete r._responseCallbackSet)};Ct.supportsNativeHls=(function(){if(!ce||!ce.createElement)return!1;const r=ce.createElement("video");return H.getTech("Html5").isSupported()?["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some(function(t){return/maybe|probably/i.test(r.canPlayType(t))}):!1})();Ct.supportsNativeDash=(function(){return!ce||!ce.createElement||!H.getTech("Html5").isSupported()?!1:/maybe|probably/i.test(ce.createElement("video").canPlayType("application/dash+xml"))})();Ct.supportsTypeNatively=r=>r==="hls"?Ct.supportsNativeHls:r==="dash"?Ct.supportsNativeDash:!1;Ct.isSupported=function(){return H.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")};Ct.xhr.onRequest=function(r){Hw(Ct.xhr,r)};Ct.xhr.onResponse=function(r){Yw(Ct.xhr,r)};Ct.xhr.offRequest=function(r){Gw(Ct.xhr,r)};Ct.xhr.offResponse=function(r){Kw(Ct.xhr,r)};const D4=H.getComponent("Component");class Jw extends D4{constructor(e,t,i){if(super(t,i.vhs),typeof i.initialBandwidth=="number"&&(this.options_.bandwidth=i.initialBandwidth),this.logger_=fr("VhsHandler"),t.options_&&t.options_.playerId){const s=H.getPlayer(t.options_.playerId);this.player_=s}if(this.tech_=t,this.source_=e,this.stats={},this.ignoreNextSeekingEvent_=!1,this.setOptions_(),this.options_.overrideNative&&t.overrideNativeAudioTracks&&t.overrideNativeVideoTracks)t.overrideNativeAudioTracks(!0),t.overrideNativeVideoTracks(!0);else if(this.options_.overrideNative&&(t.featuresNativeVideoTracks||t.featuresNativeAudioTracks))throw new Error("Overriding native VHS requires emulated tracks. See https://git.io/vMpjB");this.on(ce,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],s=>{const n=ce.fullscreenElement||ce.webkitFullscreenElement||ce.mozFullScreenElement||ce.msFullscreenElement;n&&n.contains(this.tech_.el())?this.playlistController_.fastQualityChange_():this.playlistController_.checkABR_()}),this.on(this.tech_,"seeking",function(){if(this.ignoreNextSeekingEvent_){this.ignoreNextSeekingEvent_=!1;return}this.setCurrentTime(this.tech_.currentTime())}),this.on(this.tech_,"error",function(){this.tech_.error()&&this.playlistController_&&this.playlistController_.pauseLoading()}),this.on(this.tech_,"play",this.play)}setOptions_(e={}){if(this.options_=Je(this.options_,e),this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions!==!1,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.usePlayerObjectFit=this.options_.usePlayerObjectFit||!1,this.options_.useBandwidthFromLocalStorage=typeof this.source_.useBandwidthFromLocalStorage<"u"?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.useForcedSubtitles=this.options_.useForcedSubtitles||!1,this.options_.useNetworkInformationApi=typeof this.options_.useNetworkInformationApi<"u"?this.options_.useNetworkInformationApi:!0,this.options_.useDtsForTimestampOffset=this.options_.useDtsForTimestampOffset||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,this.options_.llhls=this.options_.llhls!==!1,this.options_.bufferBasedABR=this.options_.bufferBasedABR||!1,typeof this.options_.playlistExclusionDuration!="number"&&(this.options_.playlistExclusionDuration=60),typeof this.options_.bandwidth!="number"&&this.options_.useBandwidthFromLocalStorage){const i=Ww();i&&i.bandwidth&&(this.options_.bandwidth=i.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"})),i&&i.throughput&&(this.options_.throughput=i.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}))}typeof this.options_.bandwidth!="number"&&(this.options_.bandwidth=Zt.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===Zt.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","usePlayerObjectFit","customPixelRatio","limitRenditionByPlayerDimensions","bandwidth","customTagParsers","customTagMappers","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","bufferBasedABR","liveRangeSafeTimeDelta","llhls","useForcedSubtitles","useNetworkInformationApi","useDtsForTimestampOffset","exactManifestTimings","leastPixelDiffSelector"].forEach(i=>{typeof this.source_[i]<"u"&&(this.options_[i]=this.source_[i])}),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio,this.usePlayerObjectFit=this.options_.usePlayerObjectFit;const t=this.options_.customPixelRatio;typeof t=="number"&&t>=0&&(this.customPixelRatio=t)}setOptions(e={}){this.setOptions_(e)}src(e,t){if(!e)return;this.setOptions_(),this.options_.src=P4(this.source_.src),this.options_.tech=this.tech_,this.options_.externVhs=Ct,this.options_.sourceType=v_(t),this.options_.seekTo=n=>{this.tech_.setCurrentTime(n)},this.options_.player_=this.player_,this.playlistController_=new f4(this.options_);const i=Je({liveRangeSafeTimeDelta:Wr},this.options_,{seekable:()=>this.seekable(),media:()=>this.playlistController_.media(),playlistController:this.playlistController_});this.playbackWatcher_=new O4(i),this.attachStreamingEventListeners_(),this.playlistController_.on("error",()=>{const n=H.players[this.tech_.options_.playerId];let a=this.playlistController_.error;typeof a=="object"&&!a.code?a.code=3:typeof a=="string"&&(a={message:a,code:3}),n.error(a)});const s=this.options_.bufferBasedABR?Ct.movingAverageBandwidthSelector(.55):Ct.STANDARD_PLAYLIST_SELECTOR;this.playlistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):s.bind(this),this.playlistController_.selectInitialPlaylist=Ct.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.playlistController_.mainPlaylistLoader_,this.mediaSource=this.playlistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get(){return this.playlistController_.selectPlaylist},set(n){this.playlistController_.selectPlaylist=n.bind(this)}},throughput:{get(){return this.playlistController_.mainSegmentLoader_.throughput.rate},set(n){this.playlistController_.mainSegmentLoader_.throughput.rate=n,this.playlistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get(){let n=this.playlistController_.mainSegmentLoader_.bandwidth;const a=q.navigator.connection||q.navigator.mozConnection||q.navigator.webkitConnection,o=1e7;if(this.options_.useNetworkInformationApi&&a){const l=a.downlink*1e3*1e3;l>=o&&n>=o?n=Math.max(n,l):n=l}return n},set(n){this.playlistController_.mainSegmentLoader_.bandwidth=n,this.playlistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get(){const n=1/(this.bandwidth||1);let a;return this.throughput>0?a=1/this.throughput:a=0,Math.floor(1/(n+a))},set(){H.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:()=>this.bandwidth||0,enumerable:!0},mediaRequests:{get:()=>this.playlistController_.mediaRequests_()||0,enumerable:!0},mediaRequestsAborted:{get:()=>this.playlistController_.mediaRequestsAborted_()||0,enumerable:!0},mediaRequestsTimedout:{get:()=>this.playlistController_.mediaRequestsTimedout_()||0,enumerable:!0},mediaRequestsErrored:{get:()=>this.playlistController_.mediaRequestsErrored_()||0,enumerable:!0},mediaTransferDuration:{get:()=>this.playlistController_.mediaTransferDuration_()||0,enumerable:!0},mediaBytesTransferred:{get:()=>this.playlistController_.mediaBytesTransferred_()||0,enumerable:!0},mediaSecondsLoaded:{get:()=>this.playlistController_.mediaSecondsLoaded_()||0,enumerable:!0},mediaAppends:{get:()=>this.playlistController_.mediaAppends_()||0,enumerable:!0},mainAppendsToLoadedData:{get:()=>this.playlistController_.mainAppendsToLoadedData_()||0,enumerable:!0},audioAppendsToLoadedData:{get:()=>this.playlistController_.audioAppendsToLoadedData_()||0,enumerable:!0},appendsToLoadedData:{get:()=>this.playlistController_.appendsToLoadedData_()||0,enumerable:!0},timeToLoadedData:{get:()=>this.playlistController_.timeToLoadedData_()||0,enumerable:!0},buffered:{get:()=>Mn(this.tech_.buffered()),enumerable:!0},currentTime:{get:()=>this.tech_.currentTime(),enumerable:!0},currentSource:{get:()=>this.tech_.currentSource_,enumerable:!0},currentTech:{get:()=>this.tech_.name_,enumerable:!0},duration:{get:()=>this.tech_.duration(),enumerable:!0},main:{get:()=>this.playlists.main,enumerable:!0},playerDimensions:{get:()=>this.tech_.currentDimensions(),enumerable:!0},seekable:{get:()=>Mn(this.tech_.seekable()),enumerable:!0},timestamp:{get:()=>Date.now(),enumerable:!0},videoPlaybackQuality:{get:()=>this.tech_.getVideoPlaybackQuality(),enumerable:!0}}),this.tech_.one("canplay",this.playlistController_.setupFirstPlay.bind(this.playlistController_)),this.tech_.on("bandwidthupdate",()=>{this.options_.useBandwidthFromLocalStorage&&A4({bandwidth:this.bandwidth,throughput:Math.round(this.throughput)})}),this.playlistController_.on("selectedinitialmedia",()=>{g4(this)}),this.playlistController_.sourceUpdater_.on("createdsourcebuffers",()=>{this.setupEme_()}),this.on(this.playlistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.playlistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=q.URL.createObjectURL(this.playlistController_.mediaSource),(H.browser.IS_ANY_SAFARI||H.browser.IS_IOS)&&this.options_.overrideNative&&this.options_.sourceType==="hls"&&typeof this.tech_.addSourceElement=="function"?(this.tech_.addSourceElement(this.mediaSourceUrl_),this.tech_.addSourceElement(this.source_.src)):this.tech_.src(this.mediaSourceUrl_))}createKeySessions_(){const e=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader;this.logger_("waiting for EME key session creation"),k4({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:e&&e.media(),mainPlaylists:this.playlists.main.playlists}).then(()=>{this.logger_("created EME key session"),this.playlistController_.sourceUpdater_.initializedEme()}).catch(t=>{this.logger_("error while creating EME key session",t),this.player_.error({message:"Failed to initialize media keys for EME",code:3})})}handleWaitingForKey_(){this.logger_("waitingforkey fired, attempting to create any new key sessions"),this.createKeySessions_()}setupEme_(){const e=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader,t=E4({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:e&&e.media()});if(this.player_.tech_.on("keystatuschange",i=>{this.playlistController_.updatePlaylistByKeyStatus(i.keyId,i.status)}),this.handleWaitingForKey_=this.handleWaitingForKey_.bind(this),this.player_.tech_.on("waitingforkey",this.handleWaitingForKey_),!t){this.playlistController_.sourceUpdater_.initializedEme();return}this.createKeySessions_()}setupQualityLevels_(){const e=H.players[this.tech_.options_.playerId];!e||!e.qualityLevels||this.qualityLevels_||(this.qualityLevels_=e.qualityLevels(),this.playlistController_.on("selectedinitialmedia",()=>{x4(this.qualityLevels_,this)}),this.playlists.on("mediachange",()=>{Zw(this.qualityLevels_,this.playlists)}))}static version(){return{"@videojs/http-streaming":jw,"mux.js":v4,"mpd-parser":S4,"m3u8-parser":T4,"aes-decrypter":_4}}version(){return this.constructor.version()}canChangeType(){return Fw.canChangeType()}play(){this.playlistController_.play()}setCurrentTime(e){this.playlistController_.setCurrentTime(e)}duration(){return this.playlistController_.duration()}seekable(){return this.playlistController_.seekable()}dispose(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.playlistController_&&this.playlistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.mediaSourceUrl_&&q.URL.revokeObjectURL&&(q.URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),this.tech_&&this.tech_.off("waitingforkey",this.handleWaitingForKey_),super.dispose()}convertToProgramTime(e,t){return L5({playlist:this.playlistController_.media(),time:e,callback:t})}seekToProgramTime(e,t,i=!0,s=2){return _w({programTime:e,playlist:this.playlistController_.media(),retryCount:s,pauseAfterSeek:i,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:t})}setupXhrHooks_(){this.xhr.onRequest=e=>{Hw(this.xhr,e)},this.xhr.onResponse=e=>{Yw(this.xhr,e)},this.xhr.offRequest=e=>{Gw(this.xhr,e)},this.xhr.offResponse=e=>{Kw(this.xhr,e)},this.player_.trigger("xhr-hooks-ready")}attachStreamingEventListeners_(){const e=["seekablerangeschanged","bufferedrangeschanged","contentsteeringloadstart","contentsteeringloadcomplete","contentsteeringparsed"],t=["gapjumped","playedrangeschanged"];e.forEach(i=>{this.playlistController_.on(i,s=>{this.player_.trigger(Lt({},s))})}),t.forEach(i=>{this.playbackWatcher_.on(i,s=>{this.player_.trigger(Lt({},s))})})}}const jh={name:"videojs-http-streaming",VERSION:jw,canHandleSource(r,e={}){const t=Je(H.options,e);return!t.vhs.experimentalUseMMS&&!vl("avc1.4d400d,mp4a.40.2",!1)?!1:jh.canPlayType(r.type,t)},handleSource(r,e,t={}){const i=Je(H.options,t);return e.vhs=new Jw(r,e,i),e.vhs.xhr=yw(),e.vhs.setupXhrHooks_(),e.vhs.src(r.src,r.type),e.vhs},canPlayType(r,e){const t=v_(r);if(!t)return"";const i=jh.getOverrideNative(e);return!Ct.supportsTypeNatively(t)||i?"maybe":""},getOverrideNative(r={}){const{vhs:e={}}=r,t=!(H.browser.IS_ANY_SAFARI||H.browser.IS_IOS),{overrideNative:i=t}=e;return i}},M4=()=>vl("avc1.4d400d,mp4a.40.2",!0);M4()&&H.getTech("Html5").registerSourceHandler(jh,0);H.VhsHandler=Jw;H.VhsSourceHandler=jh;H.Vhs=Ct;H.use||H.registerComponent("Vhs",Ct);H.options.vhs=H.options.vhs||{};(!H.getPlugin||!H.getPlugin("reloadSourceOnError"))&&H.registerPlugin("reloadSourceOnError",b4);var cp=["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition"],$a={_disable:[],allowInput:!1,allowInvalidPreload:!1,altFormat:"F j, Y",altInput:!1,altInputClass:"form-control input",animate:typeof window=="object"&&window.navigator.userAgent.indexOf("MSIE")===-1,ariaDateFormat:"F j, Y",autoFillDefaultTime:!0,clickOpens:!0,closeOnSelect:!0,conjunction:", ",dateFormat:"Y-m-d",defaultHour:12,defaultMinute:0,defaultSeconds:0,disable:[],disableMobile:!1,enableSeconds:!1,enableTime:!1,errorHandler:function(r){return typeof console<"u"&&console.warn(r)},getWeek:function(r){var e=new Date(r.getTime());e.setHours(0,0,0,0),e.setDate(e.getDate()+3-(e.getDay()+6)%7);var t=new Date(e.getFullYear(),0,4);return 1+Math.round(((e.getTime()-t.getTime())/864e5-3+(t.getDay()+6)%7)/7)},hourIncrement:1,ignoredFocusElements:[],inline:!1,locale:"default",minuteIncrement:5,mode:"single",monthSelectorType:"dropdown",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",noCalendar:!1,now:new Date,onChange:[],onClose:[],onDayCreate:[],onDestroy:[],onKeyDown:[],onMonthChange:[],onOpen:[],onParseConfig:[],onReady:[],onValueUpdate:[],onYearChange:[],onPreCalendarPosition:[],plugins:[],position:"auto",positionElement:void 0,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",shorthandCurrentMonth:!1,showMonths:1,static:!1,time_24hr:!1,weekNumbers:!1,wrap:!1},Vl={weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:function(r){var e=r%100;if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle",amPM:["AM","PM"],yearAriaLabel:"Year",monthAriaLabel:"Month",hourAriaLabel:"Hour",minuteAriaLabel:"Minute",time_24hr:!1},Ei=function(r,e){return e===void 0&&(e=2),("000"+r).slice(e*-1)},er=function(r){return r===!0?1:0};function Tv(r,e){var t;return function(){var i=this,s=arguments;clearTimeout(t),t=setTimeout(function(){return r.apply(i,s)},e)}}var hp=function(r){return r instanceof Array?r:[r]};function yi(r,e,t){if(t===!0)return r.classList.add(e);r.classList.remove(e)}function Ge(r,e,t){var i=window.document.createElement(r);return e=e||"",t=t||"",i.className=e,t!==void 0&&(i.textContent=t),i}function kc(r){for(;r.firstChild;)r.removeChild(r.firstChild)}function e2(r,e){if(e(r))return r;if(r.parentNode)return e2(r.parentNode,e)}function Ec(r,e){var t=Ge("div","numInputWrapper"),i=Ge("input","numInput "+r),s=Ge("span","arrowUp"),n=Ge("span","arrowDown");if(navigator.userAgent.indexOf("MSIE 9.0")===-1?i.type="number":(i.type="text",i.pattern="\\d*"),e!==void 0)for(var a in e)i.setAttribute(a,e[a]);return t.appendChild(i),t.appendChild(s),t.appendChild(n),t}function Ni(r){try{if(typeof r.composedPath=="function"){var e=r.composedPath();return e[0]}return r.target}catch{return r.target}}var dp=function(){},zh=function(r,e,t){return t.months[e?"shorthand":"longhand"][r]},I4={D:dp,F:function(r,e,t){r.setMonth(t.months.longhand.indexOf(e))},G:function(r,e){r.setHours((r.getHours()>=12?12:0)+parseFloat(e))},H:function(r,e){r.setHours(parseFloat(e))},J:function(r,e){r.setDate(parseFloat(e))},K:function(r,e,t){r.setHours(r.getHours()%12+12*er(new RegExp(t.amPM[1],"i").test(e)))},M:function(r,e,t){r.setMonth(t.months.shorthand.indexOf(e))},S:function(r,e){r.setSeconds(parseFloat(e))},U:function(r,e){return new Date(parseFloat(e)*1e3)},W:function(r,e,t){var i=parseInt(e),s=new Date(r.getFullYear(),0,2+(i-1)*7,0,0,0,0);return s.setDate(s.getDate()-s.getDay()+t.firstDayOfWeek),s},Y:function(r,e){r.setFullYear(parseFloat(e))},Z:function(r,e){return new Date(e)},d:function(r,e){r.setDate(parseFloat(e))},h:function(r,e){r.setHours((r.getHours()>=12?12:0)+parseFloat(e))},i:function(r,e){r.setMinutes(parseFloat(e))},j:function(r,e){r.setDate(parseFloat(e))},l:dp,m:function(r,e){r.setMonth(parseFloat(e)-1)},n:function(r,e){r.setMonth(parseFloat(e)-1)},s:function(r,e){r.setSeconds(parseFloat(e))},u:function(r,e){return new Date(parseFloat(e))},w:dp,y:function(r,e){r.setFullYear(2e3+parseFloat(e))}},En={D:"",F:"",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"",M:"",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",u:"(.+)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},Cl={Z:function(r){return r.toISOString()},D:function(r,e,t){return e.weekdays.shorthand[Cl.w(r,e,t)]},F:function(r,e,t){return zh(Cl.n(r,e,t)-1,!1,e)},G:function(r,e,t){return Ei(Cl.h(r,e,t))},H:function(r){return Ei(r.getHours())},J:function(r,e){return e.ordinal!==void 0?r.getDate()+e.ordinal(r.getDate()):r.getDate()},K:function(r,e){return e.amPM[er(r.getHours()>11)]},M:function(r,e){return zh(r.getMonth(),!0,e)},S:function(r){return Ei(r.getSeconds())},U:function(r){return r.getTime()/1e3},W:function(r,e,t){return t.getWeek(r)},Y:function(r){return Ei(r.getFullYear(),4)},d:function(r){return Ei(r.getDate())},h:function(r){return r.getHours()%12?r.getHours()%12:12},i:function(r){return Ei(r.getMinutes())},j:function(r){return r.getDate()},l:function(r,e){return e.weekdays.longhand[r.getDay()]},m:function(r){return Ei(r.getMonth()+1)},n:function(r){return r.getMonth()+1},s:function(r){return r.getSeconds()},u:function(r){return r.getTime()},w:function(r){return r.getDay()},y:function(r){return String(r.getFullYear()).substring(2)}},t2=function(r){var e=r.config,t=e===void 0?$a:e,i=r.l10n,s=i===void 0?Vl:i,n=r.isMobile,a=n===void 0?!1:n;return function(o,l,u){var c=u||s;return t.formatDate!==void 0&&!a?t.formatDate(o,l,c):l.split("").map(function(h,f,m){return Cl[h]&&m[f-1]!=="\\"?Cl[h](o,c,t):h!=="\\"?h:""}).join("")}},Qm=function(r){var e=r.config,t=e===void 0?$a:e,i=r.l10n,s=i===void 0?Vl:i;return function(n,a,o,l){if(!(n!==0&&!n)){var u=l||s,c,h=n;if(n instanceof Date)c=new Date(n.getTime());else if(typeof n!="string"&&n.toFixed!==void 0)c=new Date(n);else if(typeof n=="string"){var f=a||(t||$a).dateFormat,m=String(n).trim();if(m==="today")c=new Date,o=!0;else if(t&&t.parseDate)c=t.parseDate(n,f);else if(/Z$/.test(m)||/GMT$/.test(m))c=new Date(n);else{for(var S=void 0,y=[],E=0,C=0,_="";E<f.length;E++){var b=f[E],T=b==="\\",w=f[E-1]==="\\"||T;if(En[b]&&!w){_+=En[b];var A=new RegExp(_).exec(n);A&&(S=!0)&&y[b!=="Y"?"push":"unshift"]({fn:I4[b],val:A[++C]})}else T||(_+=".")}c=!t||!t.noCalendar?new Date(new Date().getFullYear(),0,1,0,0,0,0):new Date(new Date().setHours(0,0,0,0)),y.forEach(function(I){var N=I.fn,P=I.val;return c=N(c,P,u)||c}),c=S?c:void 0}}if(!(c instanceof Date&&!isNaN(c.getTime()))){t.errorHandler(new Error("Invalid date provided: "+h));return}return o===!0&&c.setHours(0,0,0,0),c}}};function Vi(r,e,t){return t===void 0&&(t=!0),t!==!1?new Date(r.getTime()).setHours(0,0,0,0)-new Date(e.getTime()).setHours(0,0,0,0):r.getTime()-e.getTime()}var R4=function(r,e,t){return r>Math.min(e,t)&&r<Math.max(e,t)},fp=function(r,e,t){return r*3600+e*60+t},L4=function(r){var e=Math.floor(r/3600),t=(r-e*3600)/60;return[e,t,r-e*3600-t*60]},Q4={DAY:864e5};function pp(r){var e=r.defaultHour,t=r.defaultMinute,i=r.defaultSeconds;if(r.minDate!==void 0){var s=r.minDate.getHours(),n=r.minDate.getMinutes(),a=r.minDate.getSeconds();e<s&&(e=s),e===s&&t<n&&(t=n),e===s&&t===n&&i<a&&(i=r.minDate.getSeconds())}if(r.maxDate!==void 0){var o=r.maxDate.getHours(),l=r.maxDate.getMinutes();e=Math.min(e,o),e===o&&(t=Math.min(l,t)),e===o&&t===l&&(i=r.maxDate.getSeconds())}return{hours:e,minutes:t,seconds:i}}typeof Object.assign!="function"&&(Object.assign=function(r){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];if(!r)throw TypeError("Cannot convert undefined or null to object");for(var i=function(o){o&&Object.keys(o).forEach(function(l){return r[l]=o[l]})},s=0,n=e;s<n.length;s++){var a=n[s];i(a)}return r});var oi=function(){return oi=Object.assign||function(r){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(r[s]=e[s])}return r},oi.apply(this,arguments)},_v=function(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var i=Array(r),s=0,e=0;e<t;e++)for(var n=arguments[e],a=0,o=n.length;a<o;a++,s++)i[s]=n[a];return i},$4=300;function B4(r,e){var t={config:oi(oi({},$a),Rt.defaultConfig),l10n:Vl};t.parseDate=Qm({config:t.config,l10n:t.l10n}),t._handlers=[],t.pluginElements=[],t.loadedPlugins=[],t._bind=y,t._setHoursFromDate=f,t._positionCalendar=Kt,t.changeMonth=ae,t.changeYear=bt,t.clear=Se,t.close=we,t.onMouseOver=$t,t._createElement=Ge,t.createDay=A,t.destroy=Me,t.isEnabled=rt,t.jumpToDate=_,t.updateValue=wi,t.open=Bt,t.redraw=lt,t.set=os,t.setDate=Mr,t.toggle=ls;function i(){t.utils={getDaysInMonth:function(x,D){return x===void 0&&(x=t.currentMonth),D===void 0&&(D=t.currentYear),x===1&&(D%4===0&&D%100!==0||D%400===0)?29:t.l10n.daysInMonth[x]}}}function s(){t.element=t.input=r,t.isOpen=!1,Pt(),ni(),Qs(),mn(),i(),t.isMobile||w(),C(),(t.selectedDates.length||t.config.noCalendar)&&(t.config.enableTime&&f(t.config.noCalendar?t.latestSelectedDateObj:void 0),wi(!1)),o();var x=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);!t.isMobile&&x&&Kt(),st("onReady")}function n(){var x;return((x=t.calendarContainer)===null||x===void 0?void 0:x.getRootNode()).activeElement||document.activeElement}function a(x){return x.bind(t)}function o(){var x=t.config;x.weekNumbers===!1&&x.showMonths===1||x.noCalendar!==!0&&window.requestAnimationFrame(function(){if(t.calendarContainer!==void 0&&(t.calendarContainer.style.visibility="hidden",t.calendarContainer.style.display="block"),t.daysContainer!==void 0){var D=(t.days.offsetWidth+1)*x.showMonths;t.daysContainer.style.width=D+"px",t.calendarContainer.style.width=D+(t.weekWrapper!==void 0?t.weekWrapper.offsetWidth:0)+"px",t.calendarContainer.style.removeProperty("visibility"),t.calendarContainer.style.removeProperty("display")}})}function l(x){if(t.selectedDates.length===0){var D=t.config.minDate===void 0||Vi(new Date,t.config.minDate)>=0?new Date:new Date(t.config.minDate.getTime()),B=pp(t.config);D.setHours(B.hours,B.minutes,B.seconds,D.getMilliseconds()),t.selectedDates=[D],t.latestSelectedDateObj=D}x!==void 0&&x.type!=="blur"&&L(x);var W=t._input.value;h(),wi(),t._input.value!==W&&t._debouncedChange()}function u(x,D){return x%12+12*er(D===t.l10n.amPM[1])}function c(x){switch(x%24){case 0:case 12:return 12;default:return x%12}}function h(){if(!(t.hourElement===void 0||t.minuteElement===void 0)){var x=(parseInt(t.hourElement.value.slice(-2),10)||0)%24,D=(parseInt(t.minuteElement.value,10)||0)%60,B=t.secondElement!==void 0?(parseInt(t.secondElement.value,10)||0)%60:0;t.amPM!==void 0&&(x=u(x,t.amPM.textContent));var W=t.config.minTime!==void 0||t.config.minDate&&t.minDateHasTime&&t.latestSelectedDateObj&&Vi(t.latestSelectedDateObj,t.config.minDate,!0)===0,oe=t.config.maxTime!==void 0||t.config.maxDate&&t.maxDateHasTime&&t.latestSelectedDateObj&&Vi(t.latestSelectedDateObj,t.config.maxDate,!0)===0;if(t.config.maxTime!==void 0&&t.config.minTime!==void 0&&t.config.minTime>t.config.maxTime){var de=fp(t.config.minTime.getHours(),t.config.minTime.getMinutes(),t.config.minTime.getSeconds()),Ce=fp(t.config.maxTime.getHours(),t.config.maxTime.getMinutes(),t.config.maxTime.getSeconds()),ye=fp(x,D,B);if(ye>Ce&&ye<de){var Pe=L4(de);x=Pe[0],D=Pe[1],B=Pe[2]}}else{if(oe){var ge=t.config.maxTime!==void 0?t.config.maxTime:t.config.maxDate;x=Math.min(x,ge.getHours()),x===ge.getHours()&&(D=Math.min(D,ge.getMinutes())),D===ge.getMinutes()&&(B=Math.min(B,ge.getSeconds()))}if(W){var _e=t.config.minTime!==void 0?t.config.minTime:t.config.minDate;x=Math.max(x,_e.getHours()),x===_e.getHours()&&D<_e.getMinutes()&&(D=_e.getMinutes()),D===_e.getMinutes()&&(B=Math.max(B,_e.getSeconds()))}}m(x,D,B)}}function f(x){var D=x||t.latestSelectedDateObj;D&&D instanceof Date&&m(D.getHours(),D.getMinutes(),D.getSeconds())}function m(x,D,B){t.latestSelectedDateObj!==void 0&&t.latestSelectedDateObj.setHours(x%24,D,B||0,0),!(!t.hourElement||!t.minuteElement||t.isMobile)&&(t.hourElement.value=Ei(t.config.time_24hr?x:(12+x)%12+12*er(x%12===0)),t.minuteElement.value=Ei(D),t.amPM!==void 0&&(t.amPM.textContent=t.l10n.amPM[er(x>=12)]),t.secondElement!==void 0&&(t.secondElement.value=Ei(B)))}function S(x){var D=Ni(x),B=parseInt(D.value)+(x.delta||0);(B/1e3>1||x.key==="Enter"&&!/[^\d]/.test(B.toString()))&&bt(B)}function y(x,D,B,W){if(D instanceof Array)return D.forEach(function(oe){return y(x,oe,B,W)});if(x instanceof Array)return x.forEach(function(oe){return y(oe,D,B,W)});x.addEventListener(D,B,W),t._handlers.push({remove:function(){return x.removeEventListener(D,B,W)}})}function E(){st("onChange")}function C(){if(t.config.wrap&&["open","close","toggle","clear"].forEach(function(B){Array.prototype.forEach.call(t.element.querySelectorAll("[data-"+B+"]"),function(W){return y(W,"click",t[B])})}),t.isMobile){gn();return}var x=Tv(Dr,50);if(t._debouncedChange=Tv(E,$4),t.daysContainer&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&y(t.daysContainer,"mouseover",function(B){t.config.mode==="range"&&$t(Ni(B))}),y(t._input,"keydown",Qt),t.calendarContainer!==void 0&&y(t.calendarContainer,"keydown",Qt),!t.config.inline&&!t.config.static&&y(window,"resize",x),window.ontouchstart!==void 0?y(window.document,"touchstart",dt):y(window.document,"mousedown",dt),y(window.document,"focus",dt,{capture:!0}),t.config.clickOpens===!0&&(y(t._input,"focus",t.open),y(t._input,"click",t.open)),t.daysContainer!==void 0&&(y(t.monthNav,"click",M),y(t.monthNav,["keyup","increment"],S),y(t.daysContainer,"click",Gi)),t.timeContainer!==void 0&&t.minuteElement!==void 0&&t.hourElement!==void 0){var D=function(B){return Ni(B).select()};y(t.timeContainer,["increment"],l),y(t.timeContainer,"blur",l,{capture:!0}),y(t.timeContainer,"click",b),y([t.hourElement,t.minuteElement],["focus","click"],D),t.secondElement!==void 0&&y(t.secondElement,"focus",function(){return t.secondElement&&t.secondElement.select()}),t.amPM!==void 0&&y(t.amPM,"click",function(B){l(B)})}t.config.allowInput&&y(t._input,"blur",xi)}function _(x,D){var B=x!==void 0?t.parseDate(x):t.latestSelectedDateObj||(t.config.minDate&&t.config.minDate>t.now?t.config.minDate:t.config.maxDate&&t.config.maxDate<t.now?t.config.maxDate:t.now),W=t.currentYear,oe=t.currentMonth;try{B!==void 0&&(t.currentYear=B.getFullYear(),t.currentMonth=B.getMonth())}catch(de){de.message="Invalid date supplied: "+B,t.config.errorHandler(de)}D&&t.currentYear!==W&&(st("onYearChange"),Z()),D&&(t.currentYear!==W||t.currentMonth!==oe)&&st("onMonthChange"),t.redraw()}function b(x){var D=Ni(x);~D.className.indexOf("arrow")&&T(x,D.classList.contains("arrowUp")?1:-1)}function T(x,D,B){var W=x&&Ni(x),oe=B||W&&W.parentNode&&W.parentNode.firstChild,de=$s("increment");de.delta=D,oe&&oe.dispatchEvent(de)}function w(){var x=window.document.createDocumentFragment();if(t.calendarContainer=Ge("div","flatpickr-calendar"),t.calendarContainer.tabIndex=-1,!t.config.noCalendar){if(x.appendChild(le()),t.innerContainer=Ge("div","flatpickr-innerContainer"),t.config.weekNumbers){var D=ne(),B=D.weekWrapper,W=D.weekNumbers;t.innerContainer.appendChild(B),t.weekNumbers=W,t.weekWrapper=B}t.rContainer=Ge("div","flatpickr-rContainer"),t.rContainer.appendChild(re()),t.daysContainer||(t.daysContainer=Ge("div","flatpickr-days"),t.daysContainer.tabIndex=-1),j(),t.rContainer.appendChild(t.daysContainer),t.innerContainer.appendChild(t.rContainer),x.appendChild(t.innerContainer)}t.config.enableTime&&x.appendChild(G()),yi(t.calendarContainer,"rangeMode",t.config.mode==="range"),yi(t.calendarContainer,"animate",t.config.animate===!0),yi(t.calendarContainer,"multiMonth",t.config.showMonths>1),t.calendarContainer.appendChild(x);var oe=t.config.appendTo!==void 0&&t.config.appendTo.nodeType!==void 0;if((t.config.inline||t.config.static)&&(t.calendarContainer.classList.add(t.config.inline?"inline":"static"),t.config.inline&&(!oe&&t.element.parentNode?t.element.parentNode.insertBefore(t.calendarContainer,t._input.nextSibling):t.config.appendTo!==void 0&&t.config.appendTo.appendChild(t.calendarContainer)),t.config.static)){var de=Ge("div","flatpickr-wrapper");t.element.parentNode&&t.element.parentNode.insertBefore(de,t.element),de.appendChild(t.element),t.altInput&&de.appendChild(t.altInput),de.appendChild(t.calendarContainer)}!t.config.static&&!t.config.inline&&(t.config.appendTo!==void 0?t.config.appendTo:window.document.body).appendChild(t.calendarContainer)}function A(x,D,B,W){var oe=rt(D,!0),de=Ge("span",x,D.getDate().toString());return de.dateObj=D,de.$i=W,de.setAttribute("aria-label",t.formatDate(D,t.config.ariaDateFormat)),x.indexOf("hidden")===-1&&Vi(D,t.now)===0&&(t.todayDateElem=de,de.classList.add("today"),de.setAttribute("aria-current","date")),oe?(de.tabIndex=-1,us(D)&&(de.classList.add("selected"),t.selectedDateElem=de,t.config.mode==="range"&&(yi(de,"startRange",t.selectedDates[0]&&Vi(D,t.selectedDates[0],!0)===0),yi(de,"endRange",t.selectedDates[1]&&Vi(D,t.selectedDates[1],!0)===0),x==="nextMonthDay"&&de.classList.add("inRange")))):de.classList.add("flatpickr-disabled"),t.config.mode==="range"&&Ir(D)&&!us(D)&&de.classList.add("inRange"),t.weekNumbers&&t.config.showMonths===1&&x!=="prevMonthDay"&&W%7===6&&t.weekNumbers.insertAdjacentHTML("beforeend","<span class='flatpickr-day'>"+t.config.getWeek(D)+"</span>"),st("onDayCreate",de),de}function I(x){x.focus(),t.config.mode==="range"&&$t(x)}function N(x){for(var D=x>0?0:t.config.showMonths-1,B=x>0?t.config.showMonths:-1,W=D;W!=B;W+=x)for(var oe=t.daysContainer.children[W],de=x>0?0:oe.children.length-1,Ce=x>0?oe.children.length:-1,ye=de;ye!=Ce;ye+=x){var Pe=oe.children[ye];if(Pe.className.indexOf("hidden")===-1&&rt(Pe.dateObj))return Pe}}function P(x,D){for(var B=x.className.indexOf("Month")===-1?x.dateObj.getMonth():t.currentMonth,W=D>0?t.config.showMonths:-1,oe=D>0?1:-1,de=B-t.currentMonth;de!=W;de+=oe)for(var Ce=t.daysContainer.children[de],ye=B-t.currentMonth===de?x.$i+D:D<0?Ce.children.length-1:0,Pe=Ce.children.length,ge=ye;ge>=0&&ge<Pe&&ge!=(D>0?Pe:-1);ge+=oe){var _e=Ce.children[ge];if(_e.className.indexOf("hidden")===-1&&rt(_e.dateObj)&&Math.abs(x.$i-ge)>=Math.abs(D))return I(_e)}t.changeMonth(oe),R(N(oe),0)}function R(x,D){var B=n(),W=At(B||document.body),oe=x!==void 0?x:W?B:t.selectedDateElem!==void 0&&At(t.selectedDateElem)?t.selectedDateElem:t.todayDateElem!==void 0&&At(t.todayDateElem)?t.todayDateElem:N(D>0?1:-1);oe===void 0?t._input.focus():W?P(oe,D):I(oe)}function X(x,D){for(var B=(new Date(x,D,1).getDay()-t.l10n.firstDayOfWeek+7)%7,W=t.utils.getDaysInMonth((D-1+12)%12,x),oe=t.utils.getDaysInMonth(D,x),de=window.document.createDocumentFragment(),Ce=t.config.showMonths>1,ye=Ce?"prevMonthDay hidden":"prevMonthDay",Pe=Ce?"nextMonthDay hidden":"nextMonthDay",ge=W+1-B,_e=0;ge<=W;ge++,_e++)de.appendChild(A("flatpickr-day "+ye,new Date(x,D-1,ge),ge,_e));for(ge=1;ge<=oe;ge++,_e++)de.appendChild(A("flatpickr-day",new Date(x,D,ge),ge,_e));for(var Ie=oe+1;Ie<=42-B&&(t.config.showMonths===1||_e%7!==0);Ie++,_e++)de.appendChild(A("flatpickr-day "+Pe,new Date(x,D+1,Ie%oe),Ie,_e));var _t=Ge("div","dayContainer");return _t.appendChild(de),_t}function j(){if(t.daysContainer!==void 0){kc(t.daysContainer),t.weekNumbers&&kc(t.weekNumbers);for(var x=document.createDocumentFragment(),D=0;D<t.config.showMonths;D++){var B=new Date(t.currentYear,t.currentMonth,1);B.setMonth(t.currentMonth+D),x.appendChild(X(B.getFullYear(),B.getMonth()))}t.daysContainer.appendChild(x),t.days=t.daysContainer.firstChild,t.config.mode==="range"&&t.selectedDates.length===1&&$t()}}function Z(){if(!(t.config.showMonths>1||t.config.monthSelectorType!=="dropdown")){var x=function(W){return t.config.minDate!==void 0&&t.currentYear===t.config.minDate.getFullYear()&&W<t.config.minDate.getMonth()?!1:!(t.config.maxDate!==void 0&&t.currentYear===t.config.maxDate.getFullYear()&&W>t.config.maxDate.getMonth())};t.monthsDropdownContainer.tabIndex=-1,t.monthsDropdownContainer.innerHTML="";for(var D=0;D<12;D++)if(x(D)){var B=Ge("option","flatpickr-monthDropdown-month");B.value=new Date(t.currentYear,D).getMonth().toString(),B.textContent=zh(D,t.config.shorthandCurrentMonth,t.l10n),B.tabIndex=-1,t.currentMonth===D&&(B.selected=!0),t.monthsDropdownContainer.appendChild(B)}}}function Y(){var x=Ge("div","flatpickr-month"),D=window.document.createDocumentFragment(),B;t.config.showMonths>1||t.config.monthSelectorType==="static"?B=Ge("span","cur-month"):(t.monthsDropdownContainer=Ge("select","flatpickr-monthDropdown-months"),t.monthsDropdownContainer.setAttribute("aria-label",t.l10n.monthAriaLabel),y(t.monthsDropdownContainer,"change",function(Ce){var ye=Ni(Ce),Pe=parseInt(ye.value,10);t.changeMonth(Pe-t.currentMonth),st("onMonthChange")}),Z(),B=t.monthsDropdownContainer);var W=Ec("cur-year",{tabindex:"-1"}),oe=W.getElementsByTagName("input")[0];oe.setAttribute("aria-label",t.l10n.yearAriaLabel),t.config.minDate&&oe.setAttribute("min",t.config.minDate.getFullYear().toString()),t.config.maxDate&&(oe.setAttribute("max",t.config.maxDate.getFullYear().toString()),oe.disabled=!!t.config.minDate&&t.config.minDate.getFullYear()===t.config.maxDate.getFullYear());var de=Ge("div","flatpickr-current-month");return de.appendChild(B),de.appendChild(W),D.appendChild(de),x.appendChild(D),{container:x,yearElement:oe,monthElement:B}}function te(){kc(t.monthNav),t.monthNav.appendChild(t.prevMonthNav),t.config.showMonths&&(t.yearElements=[],t.monthElements=[]);for(var x=t.config.showMonths;x--;){var D=Y();t.yearElements.push(D.yearElement),t.monthElements.push(D.monthElement),t.monthNav.appendChild(D.container)}t.monthNav.appendChild(t.nextMonthNav)}function le(){return t.monthNav=Ge("div","flatpickr-months"),t.yearElements=[],t.monthElements=[],t.prevMonthNav=Ge("span","flatpickr-prev-month"),t.prevMonthNav.innerHTML=t.config.prevArrow,t.nextMonthNav=Ge("span","flatpickr-next-month"),t.nextMonthNav.innerHTML=t.config.nextArrow,te(),Object.defineProperty(t,"_hidePrevMonthArrow",{get:function(){return t.__hidePrevMonthArrow},set:function(x){t.__hidePrevMonthArrow!==x&&(yi(t.prevMonthNav,"flatpickr-disabled",x),t.__hidePrevMonthArrow=x)}}),Object.defineProperty(t,"_hideNextMonthArrow",{get:function(){return t.__hideNextMonthArrow},set:function(x){t.__hideNextMonthArrow!==x&&(yi(t.nextMonthNav,"flatpickr-disabled",x),t.__hideNextMonthArrow=x)}}),t.currentYearElement=t.yearElements[0],cs(),t.monthNav}function G(){t.calendarContainer.classList.add("hasTime"),t.config.noCalendar&&t.calendarContainer.classList.add("noCalendar");var x=pp(t.config);t.timeContainer=Ge("div","flatpickr-time"),t.timeContainer.tabIndex=-1;var D=Ge("span","flatpickr-time-separator",":"),B=Ec("flatpickr-hour",{"aria-label":t.l10n.hourAriaLabel});t.hourElement=B.getElementsByTagName("input")[0];var W=Ec("flatpickr-minute",{"aria-label":t.l10n.minuteAriaLabel});if(t.minuteElement=W.getElementsByTagName("input")[0],t.hourElement.tabIndex=t.minuteElement.tabIndex=-1,t.hourElement.value=Ei(t.latestSelectedDateObj?t.latestSelectedDateObj.getHours():t.config.time_24hr?x.hours:c(x.hours)),t.minuteElement.value=Ei(t.latestSelectedDateObj?t.latestSelectedDateObj.getMinutes():x.minutes),t.hourElement.setAttribute("step",t.config.hourIncrement.toString()),t.minuteElement.setAttribute("step",t.config.minuteIncrement.toString()),t.hourElement.setAttribute("min",t.config.time_24hr?"0":"1"),t.hourElement.setAttribute("max",t.config.time_24hr?"23":"12"),t.hourElement.setAttribute("maxlength","2"),t.minuteElement.setAttribute("min","0"),t.minuteElement.setAttribute("max","59"),t.minuteElement.setAttribute("maxlength","2"),t.timeContainer.appendChild(B),t.timeContainer.appendChild(D),t.timeContainer.appendChild(W),t.config.time_24hr&&t.timeContainer.classList.add("time24hr"),t.config.enableSeconds){t.timeContainer.classList.add("hasSeconds");var oe=Ec("flatpickr-second");t.secondElement=oe.getElementsByTagName("input")[0],t.secondElement.value=Ei(t.latestSelectedDateObj?t.latestSelectedDateObj.getSeconds():x.seconds),t.secondElement.setAttribute("step",t.minuteElement.getAttribute("step")),t.secondElement.setAttribute("min","0"),t.secondElement.setAttribute("max","59"),t.secondElement.setAttribute("maxlength","2"),t.timeContainer.appendChild(Ge("span","flatpickr-time-separator",":")),t.timeContainer.appendChild(oe)}return t.config.time_24hr||(t.amPM=Ge("span","flatpickr-am-pm",t.l10n.amPM[er((t.latestSelectedDateObj?t.hourElement.value:t.config.defaultHour)>11)]),t.amPM.title=t.l10n.toggleTitle,t.amPM.tabIndex=-1,t.timeContainer.appendChild(t.amPM)),t.timeContainer}function re(){t.weekdayContainer?kc(t.weekdayContainer):t.weekdayContainer=Ge("div","flatpickr-weekdays");for(var x=t.config.showMonths;x--;){var D=Ge("div","flatpickr-weekdaycontainer");t.weekdayContainer.appendChild(D)}return J(),t.weekdayContainer}function J(){if(t.weekdayContainer){var x=t.l10n.firstDayOfWeek,D=_v(t.l10n.weekdays.shorthand);x>0&&x<D.length&&(D=_v(D.splice(x,D.length),D.splice(0,x)));for(var B=t.config.showMonths;B--;)t.weekdayContainer.children[B].innerHTML=`
      <span class='flatpickr-weekday'>
        `+D.join("</span><span class='flatpickr-weekday'>")+`
      </span>
      `}}function ne(){t.calendarContainer.classList.add("hasWeeks");var x=Ge("div","flatpickr-weekwrapper");x.appendChild(Ge("span","flatpickr-weekday",t.l10n.weekAbbreviation));var D=Ge("div","flatpickr-weeks");return x.appendChild(D),{weekWrapper:x,weekNumbers:D}}function ae(x,D){D===void 0&&(D=!0);var B=D?x:x-t.currentMonth;B<0&&t._hidePrevMonthArrow===!0||B>0&&t._hideNextMonthArrow===!0||(t.currentMonth+=B,(t.currentMonth<0||t.currentMonth>11)&&(t.currentYear+=t.currentMonth>11?1:-1,t.currentMonth=(t.currentMonth+12)%12,st("onYearChange"),Z()),j(),st("onMonthChange"),cs())}function Se(x,D){if(x===void 0&&(x=!0),D===void 0&&(D=!0),t.input.value="",t.altInput!==void 0&&(t.altInput.value=""),t.mobileInput!==void 0&&(t.mobileInput.value=""),t.selectedDates=[],t.latestSelectedDateObj=void 0,D===!0&&(t.currentYear=t._initialDate.getFullYear(),t.currentMonth=t._initialDate.getMonth()),t.config.enableTime===!0){var B=pp(t.config),W=B.hours,oe=B.minutes,de=B.seconds;m(W,oe,de)}t.redraw(),x&&st("onChange")}function we(){t.isOpen=!1,t.isMobile||(t.calendarContainer!==void 0&&t.calendarContainer.classList.remove("open"),t._input!==void 0&&t._input.classList.remove("active")),st("onClose")}function Me(){t.config!==void 0&&st("onDestroy");for(var x=t._handlers.length;x--;)t._handlers[x].remove();if(t._handlers=[],t.mobileInput)t.mobileInput.parentNode&&t.mobileInput.parentNode.removeChild(t.mobileInput),t.mobileInput=void 0;else if(t.calendarContainer&&t.calendarContainer.parentNode)if(t.config.static&&t.calendarContainer.parentNode){var D=t.calendarContainer.parentNode;if(D.lastChild&&D.removeChild(D.lastChild),D.parentNode){for(;D.firstChild;)D.parentNode.insertBefore(D.firstChild,D);D.parentNode.removeChild(D)}}else t.calendarContainer.parentNode.removeChild(t.calendarContainer);t.altInput&&(t.input.type="text",t.altInput.parentNode&&t.altInput.parentNode.removeChild(t.altInput),delete t.altInput),t.input&&(t.input.type=t.input._type,t.input.classList.remove("flatpickr-input"),t.input.removeAttribute("readonly")),["_showTimeInput","latestSelectedDateObj","_hideNextMonthArrow","_hidePrevMonthArrow","__hideNextMonthArrow","__hidePrevMonthArrow","isMobile","isOpen","selectedDateElem","minDateHasTime","maxDateHasTime","days","daysContainer","_input","_positionElement","innerContainer","rContainer","monthNav","todayDateElem","calendarContainer","weekdayContainer","prevMonthNav","nextMonthNav","monthsDropdownContainer","currentMonthElement","currentYearElement","navigationCurrentMonth","selectedDateElem","config"].forEach(function(B){try{delete t[B]}catch{}})}function Te(x){return t.calendarContainer.contains(x)}function dt(x){if(t.isOpen&&!t.config.inline){var D=Ni(x),B=Te(D),W=D===t.input||D===t.altInput||t.element.contains(D)||x.path&&x.path.indexOf&&(~x.path.indexOf(t.input)||~x.path.indexOf(t.altInput)),oe=!W&&!B&&!Te(x.relatedTarget),de=!t.config.ignoredFocusElements.some(function(Ce){return Ce.contains(D)});oe&&de&&(t.config.allowInput&&t.setDate(t._input.value,!1,t.config.altInput?t.config.altFormat:t.config.dateFormat),t.timeContainer!==void 0&&t.minuteElement!==void 0&&t.hourElement!==void 0&&t.input.value!==""&&t.input.value!==void 0&&l(),t.close(),t.config&&t.config.mode==="range"&&t.selectedDates.length===1&&t.clear(!1))}}function bt(x){if(!(!x||t.config.minDate&&x<t.config.minDate.getFullYear()||t.config.maxDate&&x>t.config.maxDate.getFullYear())){var D=x,B=t.currentYear!==D;t.currentYear=D||t.currentYear,t.config.maxDate&&t.currentYear===t.config.maxDate.getFullYear()?t.currentMonth=Math.min(t.config.maxDate.getMonth(),t.currentMonth):t.config.minDate&&t.currentYear===t.config.minDate.getFullYear()&&(t.currentMonth=Math.max(t.config.minDate.getMonth(),t.currentMonth)),B&&(t.redraw(),st("onYearChange"),Z())}}function rt(x,D){var B;D===void 0&&(D=!0);var W=t.parseDate(x,void 0,D);if(t.config.minDate&&W&&Vi(W,t.config.minDate,D!==void 0?D:!t.minDateHasTime)<0||t.config.maxDate&&W&&Vi(W,t.config.maxDate,D!==void 0?D:!t.maxDateHasTime)>0)return!1;if(!t.config.enable&&t.config.disable.length===0)return!0;if(W===void 0)return!1;for(var oe=!!t.config.enable,de=(B=t.config.enable)!==null&&B!==void 0?B:t.config.disable,Ce=0,ye=void 0;Ce<de.length;Ce++){if(ye=de[Ce],typeof ye=="function"&&ye(W))return oe;if(ye instanceof Date&&W!==void 0&&ye.getTime()===W.getTime())return oe;if(typeof ye=="string"){var Pe=t.parseDate(ye,void 0,!0);return Pe&&Pe.getTime()===W.getTime()?oe:!oe}else if(typeof ye=="object"&&W!==void 0&&ye.from&&ye.to&&W.getTime()>=ye.from.getTime()&&W.getTime()<=ye.to.getTime())return oe}return!oe}function At(x){return t.daysContainer!==void 0?x.className.indexOf("hidden")===-1&&x.className.indexOf("flatpickr-disabled")===-1&&t.daysContainer.contains(x):!1}function xi(x){var D=x.target===t._input,B=t._input.value.trimEnd()!==hs();D&&B&&!(x.relatedTarget&&Te(x.relatedTarget))&&t.setDate(t._input.value,!0,x.target===t.altInput?t.config.altFormat:t.config.dateFormat)}function Qt(x){var D=Ni(x),B=t.config.wrap?r.contains(D):D===t._input,W=t.config.allowInput,oe=t.isOpen&&(!W||!B),de=t.config.inline&&B&&!W;if(x.keyCode===13&&B){if(W)return t.setDate(t._input.value,!0,D===t.altInput?t.config.altFormat:t.config.dateFormat),t.close(),D.blur();t.open()}else if(Te(D)||oe||de){var Ce=!!t.timeContainer&&t.timeContainer.contains(D);switch(x.keyCode){case 13:Ce?(x.preventDefault(),l(),Yi()):Gi(x);break;case 27:x.preventDefault(),Yi();break;case 8:case 46:B&&!t.config.allowInput&&(x.preventDefault(),t.clear());break;case 37:case 39:if(!Ce&&!B){x.preventDefault();var ye=n();if(t.daysContainer!==void 0&&(W===!1||ye&&At(ye))){var Pe=x.keyCode===39?1:-1;x.ctrlKey?(x.stopPropagation(),ae(Pe),R(N(1),0)):R(void 0,Pe)}}else t.hourElement&&t.hourElement.focus();break;case 38:case 40:x.preventDefault();var ge=x.keyCode===40?1:-1;t.daysContainer&&D.$i!==void 0||D===t.input||D===t.altInput?x.ctrlKey?(x.stopPropagation(),bt(t.currentYear-ge),R(N(1),0)):Ce||R(void 0,ge*7):D===t.currentYearElement?bt(t.currentYear-ge):t.config.enableTime&&(!Ce&&t.hourElement&&t.hourElement.focus(),l(x),t._debouncedChange());break;case 9:if(Ce){var _e=[t.hourElement,t.minuteElement,t.secondElement,t.amPM].concat(t.pluginElements).filter(function(xt){return xt}),Ie=_e.indexOf(D);if(Ie!==-1){var _t=_e[Ie+(x.shiftKey?-1:1)];x.preventDefault(),(_t||t._input).focus()}}else!t.config.noCalendar&&t.daysContainer&&t.daysContainer.contains(D)&&x.shiftKey&&(x.preventDefault(),t._input.focus());break}}if(t.amPM!==void 0&&D===t.amPM)switch(x.key){case t.l10n.amPM[0].charAt(0):case t.l10n.amPM[0].charAt(0).toLowerCase():t.amPM.textContent=t.l10n.amPM[0],h(),wi();break;case t.l10n.amPM[1].charAt(0):case t.l10n.amPM[1].charAt(0).toLowerCase():t.amPM.textContent=t.l10n.amPM[1],h(),wi();break}(B||Te(D))&&st("onKeyDown",x)}function $t(x,D){if(D===void 0&&(D="flatpickr-day"),!(t.selectedDates.length!==1||x&&(!x.classList.contains(D)||x.classList.contains("flatpickr-disabled")))){for(var B=x?x.dateObj.getTime():t.days.firstElementChild.dateObj.getTime(),W=t.parseDate(t.selectedDates[0],void 0,!0).getTime(),oe=Math.min(B,t.selectedDates[0].getTime()),de=Math.max(B,t.selectedDates[0].getTime()),Ce=!1,ye=0,Pe=0,ge=oe;ge<de;ge+=Q4.DAY)rt(new Date(ge),!0)||(Ce=Ce||ge>oe&&ge<de,ge<W&&(!ye||ge>ye)?ye=ge:ge>W&&(!Pe||ge<Pe)&&(Pe=ge));var _e=Array.from(t.rContainer.querySelectorAll("*:nth-child(-n+"+t.config.showMonths+") > ."+D));_e.forEach(function(Ie){var _t=Ie.dateObj,xt=_t.getTime(),ai=ye>0&&xt<ye||Pe>0&&xt>Pe;if(ai){Ie.classList.add("notAllowed"),["inRange","startRange","endRange"].forEach(function(We){Ie.classList.remove(We)});return}else if(Ce&&!ai)return;["startRange","inRange","endRange","notAllowed"].forEach(function(We){Ie.classList.remove(We)}),x!==void 0&&(x.classList.add(B<=t.selectedDates[0].getTime()?"startRange":"endRange"),W<B&&xt===W?Ie.classList.add("startRange"):W>B&&xt===W&&Ie.classList.add("endRange"),xt>=ye&&(Pe===0||xt<=Pe)&&R4(xt,W,B)&&Ie.classList.add("inRange"))})}}function Dr(){t.isOpen&&!t.config.static&&!t.config.inline&&Kt()}function Bt(x,D){if(D===void 0&&(D=t._positionElement),t.isMobile===!0){if(x){x.preventDefault();var B=Ni(x);B&&B.blur()}t.mobileInput!==void 0&&(t.mobileInput.focus(),t.mobileInput.click()),st("onOpen");return}else if(t._input.disabled||t.config.inline)return;var W=t.isOpen;t.isOpen=!0,W||(t.calendarContainer.classList.add("open"),t._input.classList.add("active"),st("onOpen"),Kt(D)),t.config.enableTime===!0&&t.config.noCalendar===!0&&t.config.allowInput===!1&&(x===void 0||!t.timeContainer.contains(x.relatedTarget))&&setTimeout(function(){return t.hourElement.select()},50)}function gr(x){return function(D){var B=t.config["_"+x+"Date"]=t.parseDate(D,t.config.dateFormat),W=t.config["_"+(x==="min"?"max":"min")+"Date"];B!==void 0&&(t[x==="min"?"minDateHasTime":"maxDateHasTime"]=B.getHours()>0||B.getMinutes()>0||B.getSeconds()>0),t.selectedDates&&(t.selectedDates=t.selectedDates.filter(function(oe){return rt(oe)}),!t.selectedDates.length&&x==="min"&&f(B),wi()),t.daysContainer&&(lt(),B!==void 0?t.currentYearElement[x]=B.getFullYear().toString():t.currentYearElement.removeAttribute(x),t.currentYearElement.disabled=!!W&&B!==void 0&&W.getFullYear()===B.getFullYear())}}function Pt(){var x=["wrap","weekNumbers","allowInput","allowInvalidPreload","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"],D=oi(oi({},JSON.parse(JSON.stringify(r.dataset||{}))),e),B={};t.config.parseDate=D.parseDate,t.config.formatDate=D.formatDate,Object.defineProperty(t.config,"enable",{get:function(){return t.config._enable},set:function(_e){t.config._enable=Ls(_e)}}),Object.defineProperty(t.config,"disable",{get:function(){return t.config._disable},set:function(_e){t.config._disable=Ls(_e)}});var W=D.mode==="time";if(!D.dateFormat&&(D.enableTime||W)){var oe=Rt.defaultConfig.dateFormat||$a.dateFormat;B.dateFormat=D.noCalendar||W?"H:i"+(D.enableSeconds?":S":""):oe+" H:i"+(D.enableSeconds?":S":"")}if(D.altInput&&(D.enableTime||W)&&!D.altFormat){var de=Rt.defaultConfig.altFormat||$a.altFormat;B.altFormat=D.noCalendar||W?"h:i"+(D.enableSeconds?":S K":" K"):de+(" h:i"+(D.enableSeconds?":S":"")+" K")}Object.defineProperty(t.config,"minDate",{get:function(){return t.config._minDate},set:gr("min")}),Object.defineProperty(t.config,"maxDate",{get:function(){return t.config._maxDate},set:gr("max")});var Ce=function(_e){return function(Ie){t.config[_e==="min"?"_minTime":"_maxTime"]=t.parseDate(Ie,"H:i:S")}};Object.defineProperty(t.config,"minTime",{get:function(){return t.config._minTime},set:Ce("min")}),Object.defineProperty(t.config,"maxTime",{get:function(){return t.config._maxTime},set:Ce("max")}),D.mode==="time"&&(t.config.noCalendar=!0,t.config.enableTime=!0),Object.assign(t.config,B,D);for(var ye=0;ye<x.length;ye++)t.config[x[ye]]=t.config[x[ye]]===!0||t.config[x[ye]]==="true";cp.filter(function(_e){return t.config[_e]!==void 0}).forEach(function(_e){t.config[_e]=hp(t.config[_e]||[]).map(a)}),t.isMobile=!t.config.disableMobile&&!t.config.inline&&t.config.mode==="single"&&!t.config.disable.length&&!t.config.enable&&!t.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);for(var ye=0;ye<t.config.plugins.length;ye++){var Pe=t.config.plugins[ye](t)||{};for(var ge in Pe)cp.indexOf(ge)>-1?t.config[ge]=hp(Pe[ge]).map(a).concat(t.config[ge]):typeof D[ge]>"u"&&(t.config[ge]=Pe[ge])}D.altInputClass||(t.config.altInputClass=as().className+" "+t.config.altInputClass),st("onParseConfig")}function as(){return t.config.wrap?r.querySelector("[data-input]"):r}function ni(){typeof t.config.locale!="object"&&typeof Rt.l10ns[t.config.locale]>"u"&&t.config.errorHandler(new Error("flatpickr: invalid locale "+t.config.locale)),t.l10n=oi(oi({},Rt.l10ns.default),typeof t.config.locale=="object"?t.config.locale:t.config.locale!=="default"?Rt.l10ns[t.config.locale]:void 0),En.D="("+t.l10n.weekdays.shorthand.join("|")+")",En.l="("+t.l10n.weekdays.longhand.join("|")+")",En.M="("+t.l10n.months.shorthand.join("|")+")",En.F="("+t.l10n.months.longhand.join("|")+")",En.K="("+t.l10n.amPM[0]+"|"+t.l10n.amPM[1]+"|"+t.l10n.amPM[0].toLowerCase()+"|"+t.l10n.amPM[1].toLowerCase()+")";var x=oi(oi({},e),JSON.parse(JSON.stringify(r.dataset||{})));x.time_24hr===void 0&&Rt.defaultConfig.time_24hr===void 0&&(t.config.time_24hr=t.l10n.time_24hr),t.formatDate=t2(t),t.parseDate=Qm({config:t.config,l10n:t.l10n})}function Kt(x){if(typeof t.config.position=="function")return void t.config.position(t,x);if(t.calendarContainer!==void 0){st("onPreCalendarPosition");var D=x||t._positionElement,B=Array.prototype.reduce.call(t.calendarContainer.children,(function(Yu,na){return Yu+na.offsetHeight}),0),W=t.calendarContainer.offsetWidth,oe=t.config.position.split(" "),de=oe[0],Ce=oe.length>1?oe[1]:null,ye=D.getBoundingClientRect(),Pe=window.innerHeight-ye.bottom,ge=de==="above"||de!=="below"&&Pe<B&&ye.top>B,_e=window.pageYOffset+ye.top+(ge?-B-2:D.offsetHeight+2);if(yi(t.calendarContainer,"arrowTop",!ge),yi(t.calendarContainer,"arrowBottom",ge),!t.config.inline){var Ie=window.pageXOffset+ye.left,_t=!1,xt=!1;Ce==="center"?(Ie-=(W-ye.width)/2,_t=!0):Ce==="right"&&(Ie-=W-ye.width,xt=!0),yi(t.calendarContainer,"arrowLeft",!_t&&!xt),yi(t.calendarContainer,"arrowCenter",_t),yi(t.calendarContainer,"arrowRight",xt);var ai=window.document.body.offsetWidth-(window.pageXOffset+ye.right),We=Ie+W>window.document.body.offsetWidth,ds=ai+W>window.document.body.offsetWidth;if(yi(t.calendarContainer,"rightMost",We),!t.config.static)if(t.calendarContainer.style.top=_e+"px",!We)t.calendarContainer.style.left=Ie+"px",t.calendarContainer.style.right="auto";else if(!ds)t.calendarContainer.style.left="auto",t.calendarContainer.style.right=ai+"px";else{var Ve=Ue();if(Ve===void 0)return;var ia=window.document.body.offsetWidth,ra=Math.max(0,ia/2-W/2),sa=".flatpickr-calendar.centerMost:before",df=".flatpickr-calendar.centerMost:after",fs=Ve.cssRules.length,ft="{left:"+ye.left+"px;right:auto;}";yi(t.calendarContainer,"rightMost",!1),yi(t.calendarContainer,"centerMost",!0),Ve.insertRule(sa+","+df+ft,fs),t.calendarContainer.style.left=ra+"px",t.calendarContainer.style.right="auto"}}}}function Ue(){for(var x=null,D=0;D<document.styleSheets.length;D++){var B=document.styleSheets[D];if(B.cssRules){try{B.cssRules}catch{continue}x=B;break}}return x??ot()}function ot(){var x=document.createElement("style");return document.head.appendChild(x),x.sheet}function lt(){t.config.noCalendar||t.isMobile||(Z(),cs(),j())}function Yi(){t._input.focus(),window.navigator.userAgent.indexOf("MSIE")!==-1||navigator.msMaxTouchPoints!==void 0?setTimeout(t.close,0):t.close()}function Gi(x){x.preventDefault(),x.stopPropagation();var D=function(_e){return _e.classList&&_e.classList.contains("flatpickr-day")&&!_e.classList.contains("flatpickr-disabled")&&!_e.classList.contains("notAllowed")},B=e2(Ni(x),D);if(B!==void 0){var W=B,oe=t.latestSelectedDateObj=new Date(W.dateObj.getTime()),de=(oe.getMonth()<t.currentMonth||oe.getMonth()>t.currentMonth+t.config.showMonths-1)&&t.config.mode!=="range";if(t.selectedDateElem=W,t.config.mode==="single")t.selectedDates=[oe];else if(t.config.mode==="multiple"){var Ce=us(oe);Ce?t.selectedDates.splice(parseInt(Ce),1):t.selectedDates.push(oe)}else t.config.mode==="range"&&(t.selectedDates.length===2&&t.clear(!1,!1),t.latestSelectedDateObj=oe,t.selectedDates.push(oe),Vi(oe,t.selectedDates[0],!0)!==0&&t.selectedDates.sort(function(_e,Ie){return _e.getTime()-Ie.getTime()}));if(h(),de){var ye=t.currentYear!==oe.getFullYear();t.currentYear=oe.getFullYear(),t.currentMonth=oe.getMonth(),ye&&(st("onYearChange"),Z()),st("onMonthChange")}if(cs(),j(),wi(),!de&&t.config.mode!=="range"&&t.config.showMonths===1?I(W):t.selectedDateElem!==void 0&&t.hourElement===void 0&&t.selectedDateElem&&t.selectedDateElem.focus(),t.hourElement!==void 0&&t.hourElement!==void 0&&t.hourElement.focus(),t.config.closeOnSelect){var Pe=t.config.mode==="single"&&!t.config.enableTime,ge=t.config.mode==="range"&&t.selectedDates.length===2&&!t.config.enableTime;(Pe||ge)&&Yi()}E()}}var Ki={locale:[ni,J],showMonths:[te,o,re],minDate:[_],maxDate:[_],positionElement:[Ze],clickOpens:[function(){t.config.clickOpens===!0?(y(t._input,"focus",t.open),y(t._input,"click",t.open)):(t._input.removeEventListener("focus",t.open),t._input.removeEventListener("click",t.open))}]};function os(x,D){if(x!==null&&typeof x=="object"){Object.assign(t.config,x);for(var B in x)Ki[B]!==void 0&&Ki[B].forEach(function(W){return W()})}else t.config[x]=D,Ki[x]!==void 0?Ki[x].forEach(function(W){return W()}):cp.indexOf(x)>-1&&(t.config[x]=hp(D));t.redraw(),wi(!0)}function Or(x,D){var B=[];if(x instanceof Array)B=x.map(function(W){return t.parseDate(W,D)});else if(x instanceof Date||typeof x=="number")B=[t.parseDate(x,D)];else if(typeof x=="string")switch(t.config.mode){case"single":case"time":B=[t.parseDate(x,D)];break;case"multiple":B=x.split(t.config.conjunction).map(function(W){return t.parseDate(W,D)});break;case"range":B=x.split(t.l10n.rangeSeparator).map(function(W){return t.parseDate(W,D)});break}else t.config.errorHandler(new Error("Invalid date supplied: "+JSON.stringify(x)));t.selectedDates=t.config.allowInvalidPreload?B:B.filter(function(W){return W instanceof Date&&rt(W,!1)}),t.config.mode==="range"&&t.selectedDates.sort(function(W,oe){return W.getTime()-oe.getTime()})}function Mr(x,D,B){if(D===void 0&&(D=!1),B===void 0&&(B=t.config.dateFormat),x!==0&&!x||x instanceof Array&&x.length===0)return t.clear(D);Or(x,B),t.latestSelectedDateObj=t.selectedDates[t.selectedDates.length-1],t.redraw(),_(void 0,D),f(),t.selectedDates.length===0&&t.clear(!1),wi(D),D&&st("onChange")}function Ls(x){return x.slice().map(function(D){return typeof D=="string"||typeof D=="number"||D instanceof Date?t.parseDate(D,void 0,!0):D&&typeof D=="object"&&D.from&&D.to?{from:t.parseDate(D.from,void 0),to:t.parseDate(D.to,void 0)}:D}).filter(function(D){return D})}function mn(){t.selectedDates=[],t.now=t.parseDate(t.config.now)||new Date;var x=t.config.defaultDate||((t.input.nodeName==="INPUT"||t.input.nodeName==="TEXTAREA")&&t.input.placeholder&&t.input.value===t.input.placeholder?null:t.input.value);x&&Or(x,t.config.dateFormat),t._initialDate=t.selectedDates.length>0?t.selectedDates[0]:t.config.minDate&&t.config.minDate.getTime()>t.now.getTime()?t.config.minDate:t.config.maxDate&&t.config.maxDate.getTime()<t.now.getTime()?t.config.maxDate:t.now,t.currentYear=t._initialDate.getFullYear(),t.currentMonth=t._initialDate.getMonth(),t.selectedDates.length>0&&(t.latestSelectedDateObj=t.selectedDates[0]),t.config.minTime!==void 0&&(t.config.minTime=t.parseDate(t.config.minTime,"H:i")),t.config.maxTime!==void 0&&(t.config.maxTime=t.parseDate(t.config.maxTime,"H:i")),t.minDateHasTime=!!t.config.minDate&&(t.config.minDate.getHours()>0||t.config.minDate.getMinutes()>0||t.config.minDate.getSeconds()>0),t.maxDateHasTime=!!t.config.maxDate&&(t.config.maxDate.getHours()>0||t.config.maxDate.getMinutes()>0||t.config.maxDate.getSeconds()>0)}function Qs(){if(t.input=as(),!t.input){t.config.errorHandler(new Error("Invalid input element specified"));return}t.input._type=t.input.type,t.input.type="text",t.input.classList.add("flatpickr-input"),t._input=t.input,t.config.altInput&&(t.altInput=Ge(t.input.nodeName,t.config.altInputClass),t._input=t.altInput,t.altInput.placeholder=t.input.placeholder,t.altInput.disabled=t.input.disabled,t.altInput.required=t.input.required,t.altInput.tabIndex=t.input.tabIndex,t.altInput.type="text",t.input.setAttribute("type","hidden"),!t.config.static&&t.input.parentNode&&t.input.parentNode.insertBefore(t.altInput,t.input.nextSibling)),t.config.allowInput||t._input.setAttribute("readonly","readonly"),Ze()}function Ze(){t._positionElement=t.config.positionElement||t._input}function gn(){var x=t.config.enableTime?t.config.noCalendar?"time":"datetime-local":"date";t.mobileInput=Ge("input",t.input.className+" flatpickr-mobile"),t.mobileInput.tabIndex=1,t.mobileInput.type=x,t.mobileInput.disabled=t.input.disabled,t.mobileInput.required=t.input.required,t.mobileInput.placeholder=t.input.placeholder,t.mobileFormatStr=x==="datetime-local"?"Y-m-d\\TH:i:S":x==="date"?"Y-m-d":"H:i:S",t.selectedDates.length>0&&(t.mobileInput.defaultValue=t.mobileInput.value=t.formatDate(t.selectedDates[0],t.mobileFormatStr)),t.config.minDate&&(t.mobileInput.min=t.formatDate(t.config.minDate,"Y-m-d")),t.config.maxDate&&(t.mobileInput.max=t.formatDate(t.config.maxDate,"Y-m-d")),t.input.getAttribute("step")&&(t.mobileInput.step=String(t.input.getAttribute("step"))),t.input.type="hidden",t.altInput!==void 0&&(t.altInput.type="hidden");try{t.input.parentNode&&t.input.parentNode.insertBefore(t.mobileInput,t.input.nextSibling)}catch{}y(t.mobileInput,"change",function(D){t.setDate(Ni(D).value,!1,t.mobileFormatStr),st("onChange"),st("onClose")})}function ls(x){if(t.isOpen===!0)return t.close();t.open(x)}function st(x,D){if(t.config!==void 0){var B=t.config[x];if(B!==void 0&&B.length>0)for(var W=0;B[W]&&W<B.length;W++)B[W](t.selectedDates,t.input.value,t,D);x==="onChange"&&(t.input.dispatchEvent($s("change")),t.input.dispatchEvent($s("input")))}}function $s(x){var D=document.createEvent("Event");return D.initEvent(x,!0,!0),D}function us(x){for(var D=0;D<t.selectedDates.length;D++){var B=t.selectedDates[D];if(B instanceof Date&&Vi(B,x)===0)return""+D}return!1}function Ir(x){return t.config.mode!=="range"||t.selectedDates.length<2?!1:Vi(x,t.selectedDates[0])>=0&&Vi(x,t.selectedDates[1])<=0}function cs(){t.config.noCalendar||t.isMobile||!t.monthNav||(t.yearElements.forEach(function(x,D){var B=new Date(t.currentYear,t.currentMonth,1);B.setMonth(t.currentMonth+D),t.config.showMonths>1||t.config.monthSelectorType==="static"?t.monthElements[D].textContent=zh(B.getMonth(),t.config.shorthandCurrentMonth,t.l10n)+" ":t.monthsDropdownContainer.value=B.getMonth().toString(),x.value=B.getFullYear().toString()}),t._hidePrevMonthArrow=t.config.minDate!==void 0&&(t.currentYear===t.config.minDate.getFullYear()?t.currentMonth<=t.config.minDate.getMonth():t.currentYear<t.config.minDate.getFullYear()),t._hideNextMonthArrow=t.config.maxDate!==void 0&&(t.currentYear===t.config.maxDate.getFullYear()?t.currentMonth+1>t.config.maxDate.getMonth():t.currentYear>t.config.maxDate.getFullYear()))}function hs(x){var D=x||(t.config.altInput?t.config.altFormat:t.config.dateFormat);return t.selectedDates.map(function(B){return t.formatDate(B,D)}).filter(function(B,W,oe){return t.config.mode!=="range"||t.config.enableTime||oe.indexOf(B)===W}).join(t.config.mode!=="range"?t.config.conjunction:t.l10n.rangeSeparator)}function wi(x){x===void 0&&(x=!0),t.mobileInput!==void 0&&t.mobileFormatStr&&(t.mobileInput.value=t.latestSelectedDateObj!==void 0?t.formatDate(t.latestSelectedDateObj,t.mobileFormatStr):""),t.input.value=hs(t.config.dateFormat),t.altInput!==void 0&&(t.altInput.value=hs(t.config.altFormat)),x!==!1&&st("onValueUpdate")}function M(x){var D=Ni(x),B=t.prevMonthNav.contains(D),W=t.nextMonthNav.contains(D);B||W?ae(B?-1:1):t.yearElements.indexOf(D)>=0?D.select():D.classList.contains("arrowUp")?t.changeYear(t.currentYear+1):D.classList.contains("arrowDown")&&t.changeYear(t.currentYear-1)}function L(x){x.preventDefault();var D=x.type==="keydown",B=Ni(x),W=B;t.amPM!==void 0&&B===t.amPM&&(t.amPM.textContent=t.l10n.amPM[er(t.amPM.textContent===t.l10n.amPM[0])]);var oe=parseFloat(W.getAttribute("min")),de=parseFloat(W.getAttribute("max")),Ce=parseFloat(W.getAttribute("step")),ye=parseInt(W.value,10),Pe=x.delta||(D?x.which===38?1:-1:0),ge=ye+Ce*Pe;if(typeof W.value<"u"&&W.value.length===2){var _e=W===t.hourElement,Ie=W===t.minuteElement;ge<oe?(ge=de+ge+er(!_e)+(er(_e)&&er(!t.amPM)),Ie&&T(void 0,-1,t.hourElement)):ge>de&&(ge=W===t.hourElement?ge-de-er(!t.amPM):oe,Ie&&T(void 0,1,t.hourElement)),t.amPM&&_e&&(Ce===1?ge+ye===23:Math.abs(ge-ye)>Ce)&&(t.amPM.textContent=t.l10n.amPM[er(t.amPM.textContent===t.l10n.amPM[0])]),W.value=Ei(ge)}}return s(),t}function Ba(r,e){for(var t=Array.prototype.slice.call(r).filter(function(a){return a instanceof HTMLElement}),i=[],s=0;s<t.length;s++){var n=t[s];try{if(n.getAttribute("data-fp-omit")!==null)continue;n._flatpickr!==void 0&&(n._flatpickr.destroy(),n._flatpickr=void 0),n._flatpickr=B4(n,e||{}),i.push(n._flatpickr)}catch(a){console.error(a)}}return i.length===1?i[0]:i}typeof HTMLElement<"u"&&typeof HTMLCollection<"u"&&typeof NodeList<"u"&&(HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(r){return Ba(this,r)},HTMLElement.prototype.flatpickr=function(r){return Ba([this],r)});var Rt=function(r,e){return typeof r=="string"?Ba(window.document.querySelectorAll(r),e):r instanceof Node?Ba([r],e):Ba(r,e)};Rt.defaultConfig={};Rt.l10ns={en:oi({},Vl),default:oi({},Vl)};Rt.localize=function(r){Rt.l10ns.default=oi(oi({},Rt.l10ns.default),r)};Rt.setDefaults=function(r){Rt.defaultConfig=oi(oi({},Rt.defaultConfig),r)};Rt.parseDate=Qm({});Rt.formatDate=t2({});Rt.compareDates=Vi;typeof jQuery<"u"&&typeof jQuery.fn<"u"&&(jQuery.fn.flatpickr=function(r){return Ba(this,r)});Date.prototype.fp_incr=function(r){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+(typeof r=="string"?parseInt(r,10):r))};typeof window<"u"&&(window.flatpickr=Rt);let $m=[],i2=[];(()=>{let r="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,t=0;e<r.length;e++)(e%2?i2:$m).push(t=t+r[e])})();function N4(r){if(r<768)return!1;for(let e=0,t=$m.length;;){let i=e+t>>1;if(r<$m[i])t=i;else if(r>=i2[i])e=i+1;else return!0;if(e==t)return!1}}function xv(r){return r>=127462&&r<=127487}const wv=8205;function F4(r,e,t=!0,i=!0){return(t?r2:U4)(r,e,i)}function r2(r,e,t){if(e==r.length)return e;e&&s2(r.charCodeAt(e))&&n2(r.charCodeAt(e-1))&&e--;let i=mp(r,e);for(e+=Cv(i);e<r.length;){let s=mp(r,e);if(i==wv||s==wv||t&&N4(s))e+=Cv(s),i=s;else if(xv(s)){let n=0,a=e-2;for(;a>=0&&xv(mp(r,a));)n++,a-=2;if(n%2==0)break;e+=2}else break}return e}function U4(r,e,t){for(;e>0;){let i=r2(r,e-2,t);if(i<e)return i;e--}return 0}function mp(r,e){let t=r.charCodeAt(e);if(!n2(t)||e+1==r.length)return t;let i=r.charCodeAt(e+1);return s2(i)?(t-55296<<10)+(i-56320)+65536:t}function s2(r){return r>=56320&&r<57344}function n2(r){return r>=55296&&r<56320}function Cv(r){return r<65536?1:2}class ze{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,i){[e,t]=no(this,e,t);let s=[];return this.decompose(0,e,s,2),i.length&&i.decompose(0,i.length,s,3),this.decompose(t,this.length,s,1),Vr.from(s,this.length-(t-e)+i.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){[e,t]=no(this,e,t);let i=[];return this.decompose(e,t,i,0),Vr.from(i,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),i=this.length-this.scanIdentical(e,-1),s=new kl(this),n=new kl(e);for(let a=t,o=t;;){if(s.next(a),n.next(a),a=0,s.lineBreak!=n.lineBreak||s.done!=n.done||s.value!=n.value)return!1;if(o+=s.value.length,s.done||o>=i)return!0}}iter(e=1){return new kl(this,e)}iterRange(e,t=this.length){return new a2(this,e,t)}iterLines(e,t){let i;if(e==null)i=this.iter();else{t==null&&(t=this.lines+1);let s=this.line(e).from;i=this.iterRange(s,Math.max(s,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new o2(i)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?ze.empty:e.length<=32?new It(e):Vr.from(It.split(e,[]))}}class It extends ze{constructor(e,t=q4(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,i,s){for(let n=0;;n++){let a=this.text[n],o=s+a.length;if((t?i:o)>=e)return new V4(s,o,i,a);s=o+1,i++}}decompose(e,t,i,s){let n=e<=0&&t>=this.length?this:new It(kv(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(s&1){let a=i.pop(),o=oh(n.text,a.text.slice(),0,n.length);if(o.length<=32)i.push(new It(o,a.length+n.length));else{let l=o.length>>1;i.push(new It(o.slice(0,l)),new It(o.slice(l)))}}else i.push(n)}replace(e,t,i){if(!(i instanceof It))return super.replace(e,t,i);[e,t]=no(this,e,t);let s=oh(this.text,oh(i.text,kv(this.text,0,e)),t),n=this.length+i.length-(t-e);return s.length<=32?new It(s,n):Vr.from(It.split(s,[]),n)}sliceString(e,t=this.length,i=`
`){[e,t]=no(this,e,t);let s="";for(let n=0,a=0;n<=t&&a<this.text.length;a++){let o=this.text[a],l=n+o.length;n>e&&a&&(s+=i),e<l&&t>n&&(s+=o.slice(Math.max(0,e-n),t-n)),n=l+1}return s}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let i=[],s=-1;for(let n of e)i.push(n),s+=n.length+1,i.length==32&&(t.push(new It(i,s)),i=[],s=-1);return s>-1&&t.push(new It(i,s)),t}}class Vr extends ze{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let i of e)this.lines+=i.lines}lineInner(e,t,i,s){for(let n=0;;n++){let a=this.children[n],o=s+a.length,l=i+a.lines-1;if((t?l:o)>=e)return a.lineInner(e,t,i,s);s=o+1,i=l+1}}decompose(e,t,i,s){for(let n=0,a=0;a<=t&&n<this.children.length;n++){let o=this.children[n],l=a+o.length;if(e<=l&&t>=a){let u=s&((a<=e?1:0)|(l>=t?2:0));a>=e&&l<=t&&!u?i.push(o):o.decompose(e-a,t-a,i,u)}a=l+1}}replace(e,t,i){if([e,t]=no(this,e,t),i.lines<this.lines)for(let s=0,n=0;s<this.children.length;s++){let a=this.children[s],o=n+a.length;if(e>=n&&t<=o){let l=a.replace(e-n,t-n,i),u=this.lines-a.lines+l.lines;if(l.lines<u>>4&&l.lines>u>>6){let c=this.children.slice();return c[s]=l,new Vr(c,this.length-(t-e)+i.length)}return super.replace(n,o,l)}n=o+1}return super.replace(e,t,i)}sliceString(e,t=this.length,i=`
`){[e,t]=no(this,e,t);let s="";for(let n=0,a=0;n<this.children.length&&a<=t;n++){let o=this.children[n],l=a+o.length;a>e&&n&&(s+=i),e<l&&t>a&&(s+=o.sliceString(e-a,t-a,i)),a=l+1}return s}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof Vr))return 0;let i=0,[s,n,a,o]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;s+=t,n+=t){if(s==a||n==o)return i;let l=this.children[s],u=e.children[n];if(l!=u)return i+l.scanIdentical(u,t);i+=l.length+1}}static from(e,t=e.reduce((i,s)=>i+s.length+1,-1)){let i=0;for(let m of e)i+=m.lines;if(i<32){let m=[];for(let S of e)S.flatten(m);return new It(m,t)}let s=Math.max(32,i>>5),n=s<<1,a=s>>1,o=[],l=0,u=-1,c=[];function h(m){let S;if(m.lines>n&&m instanceof Vr)for(let y of m.children)h(y);else m.lines>a&&(l>a||!l)?(f(),o.push(m)):m instanceof It&&l&&(S=c[c.length-1])instanceof It&&m.lines+S.lines<=32?(l+=m.lines,u+=m.length+1,c[c.length-1]=new It(S.text.concat(m.text),S.length+1+m.length)):(l+m.lines>s&&f(),l+=m.lines,u+=m.length+1,c.push(m))}function f(){l!=0&&(o.push(c.length==1?c[0]:Vr.from(c,u)),u=-1,l=c.length=0)}for(let m of e)h(m);return f(),o.length==1?o[0]:new Vr(o,t)}}ze.empty=new It([""],0);function q4(r){let e=-1;for(let t of r)e+=t.length+1;return e}function oh(r,e,t=0,i=1e9){for(let s=0,n=0,a=!0;n<r.length&&s<=i;n++){let o=r[n],l=s+o.length;l>=t&&(l>i&&(o=o.slice(0,i-s)),s<t&&(o=o.slice(t-s)),a?(e[e.length-1]+=o,a=!1):e.push(o)),s=l+1}return e}function kv(r,e,t){return oh(r,[""],e,t)}class kl{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof It?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let i=this.nodes.length-1,s=this.nodes[i],n=this.offsets[i],a=n>>1,o=s instanceof It?s.text.length:s.children.length;if(a==(t>0?o:0)){if(i==0)return this.done=!0,this.value="",this;t>0&&this.offsets[i-1]++,this.nodes.pop(),this.offsets.pop()}else if((n&1)==(t>0?0:1)){if(this.offsets[i]+=t,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(s instanceof It){let l=s.text[a+(t<0?-1:0)];if(this.offsets[i]+=t,l.length>Math.max(0,e))return this.value=e==0?l:t>0?l.slice(e):l.slice(0,l.length-e),this;e-=l.length}else{let l=s.children[a+(t<0?-1:0)];e>l.length?(e-=l.length,this.offsets[i]+=t):(t<0&&this.offsets[i]--,this.nodes.push(l),this.offsets.push(t>0?1:(l instanceof It?l.text.length:l.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class a2{constructor(e,t,i){this.value="",this.done=!1,this.cursor=new kl(e,t>i?-1:1),this.pos=t>i?e.length:0,this.from=Math.min(t,i),this.to=Math.max(t,i)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let i=t<0?this.pos-this.from:this.to-this.pos;e>i&&(e=i),i-=e;let{value:s}=this.cursor.next(e);return this.pos+=(s.length+e)*t,this.value=s.length<=i?s:t<0?s.slice(s.length-i):s.slice(0,i),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class o2{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:i,value:s}=this.inner.next(e);return t&&this.afterBreak?(this.value="",this.afterBreak=!1):t?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=s,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(ze.prototype[Symbol.iterator]=function(){return this.iter()},kl.prototype[Symbol.iterator]=a2.prototype[Symbol.iterator]=o2.prototype[Symbol.iterator]=function(){return this});let V4=class{constructor(e,t,i,s){this.from=e,this.to=t,this.number=i,this.text=s}get length(){return this.to-this.from}};function no(r,e,t){return e=Math.max(0,Math.min(r.length,e)),[e,Math.max(e,Math.min(r.length,t))]}function si(r,e,t=!0,i=!0){return F4(r,e,t,i)}function X4(r){return r>=56320&&r<57344}function j4(r){return r>=55296&&r<56320}function Pi(r,e){let t=r.charCodeAt(e);if(!j4(t)||e+1==r.length)return t;let i=r.charCodeAt(e+1);return X4(i)?(t-55296<<10)+(i-56320)+65536:t}function V0(r){return r<=65535?String.fromCharCode(r):(r-=65536,String.fromCharCode((r>>10)+55296,(r&1023)+56320))}function Xr(r){return r<65536?1:2}const Bm=/\r\n?|\n/;var ii=(function(r){return r[r.Simple=0]="Simple",r[r.TrackDel=1]="TrackDel",r[r.TrackBefore=2]="TrackBefore",r[r.TrackAfter=3]="TrackAfter",r})(ii||(ii={}));class Jr{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t+1];e+=i<0?this.sections[t]:i}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let t=0,i=0,s=0;t<this.sections.length;){let n=this.sections[t++],a=this.sections[t++];a<0?(e(i,s,n),s+=n):s+=a,i+=n}}iterChangedRanges(e,t=!1){Nm(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let i=this.sections[t++],s=this.sections[t++];s<0?e.push(i,s):e.push(s,i)}return new Jr(e)}composeDesc(e){return this.empty?e:e.empty?this:l2(this,e)}mapDesc(e,t=!1){return e.empty?this:Fm(this,e,t)}mapPos(e,t=-1,i=ii.Simple){let s=0,n=0;for(let a=0;a<this.sections.length;){let o=this.sections[a++],l=this.sections[a++],u=s+o;if(l<0){if(u>e)return n+(e-s);n+=o}else{if(i!=ii.Simple&&u>=e&&(i==ii.TrackDel&&s<e&&u>e||i==ii.TrackBefore&&s<e||i==ii.TrackAfter&&u>e))return null;if(u>e||u==e&&t<0&&!o)return e==s||t<0?n:n+l;n+=l}s=u}if(e>s)throw new RangeError(`Position ${e} is out of range for changeset of length ${s}`);return n}touchesRange(e,t=e){for(let i=0,s=0;i<this.sections.length&&s<=t;){let n=this.sections[i++],a=this.sections[i++],o=s+n;if(a>=0&&s<=t&&o>=e)return s<e&&o>t?"cover":!0;s=o}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let i=this.sections[t++],s=this.sections[t++];e+=(e?" ":"")+i+(s>=0?":"+s:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(t=>typeof t!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new Jr(e)}static create(e){return new Jr(e)}}class Vt extends Jr{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return Nm(this,(t,i,s,n,a)=>e=e.replace(s,s+(i-t),a),!1),e}mapDesc(e,t=!1){return Fm(this,e,t,!0)}invert(e){let t=this.sections.slice(),i=[];for(let s=0,n=0;s<t.length;s+=2){let a=t[s],o=t[s+1];if(o>=0){t[s]=o,t[s+1]=a;let l=s>>1;for(;i.length<l;)i.push(ze.empty);i.push(a?e.slice(n,n+a):ze.empty)}n+=a}return new Vt(t,i)}compose(e){return this.empty?e:e.empty?this:l2(this,e,!0)}map(e,t=!1){return e.empty?this:Fm(this,e,t,!0)}iterChanges(e,t=!1){Nm(this,e,t)}get desc(){return Jr.create(this.sections)}filter(e){let t=[],i=[],s=[],n=new Xl(this);e:for(let a=0,o=0;;){let l=a==e.length?1e9:e[a++];for(;o<l||o==l&&n.len==0;){if(n.done)break e;let c=Math.min(n.len,l-o);li(s,c,-1);let h=n.ins==-1?-1:n.off==0?n.ins:0;li(t,c,h),h>0&&en(i,t,n.text),n.forward(c),o+=c}let u=e[a++];for(;o<u;){if(n.done)break e;let c=Math.min(n.len,u-o);li(t,c,-1),li(s,c,n.ins==-1?-1:n.off==0?n.ins:0),n.forward(c),o+=c}}return{changes:new Vt(t,i),filtered:Jr.create(s)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t],s=this.sections[t+1];s<0?e.push(i):s==0?e.push([i]):e.push([i].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,i){let s=[],n=[],a=0,o=null;function l(c=!1){if(!c&&!s.length)return;a<t&&li(s,t-a,-1);let h=new Vt(s,n);o=o?o.compose(h.map(o)):h,s=[],n=[],a=0}function u(c){if(Array.isArray(c))for(let h of c)u(h);else if(c instanceof Vt){if(c.length!=t)throw new RangeError(`Mismatched change set length (got ${c.length}, expected ${t})`);l(),o=o?o.compose(c.map(o)):c}else{let{from:h,to:f=h,insert:m}=c;if(h>f||h<0||f>t)throw new RangeError(`Invalid change range ${h} to ${f} (in doc of length ${t})`);let S=m?typeof m=="string"?ze.of(m.split(i||Bm)):m:ze.empty,y=S.length;if(h==f&&y==0)return;h<a&&l(),h>a&&li(s,h-a,-1),li(s,f-h,y),en(n,s,S),a=f}}return u(e),l(!o),o}static empty(e){return new Vt(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],i=[];for(let s=0;s<e.length;s++){let n=e[s];if(typeof n=="number")t.push(n,-1);else{if(!Array.isArray(n)||typeof n[0]!="number"||n.some((a,o)=>o&&typeof a!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(n.length==1)t.push(n[0],0);else{for(;i.length<s;)i.push(ze.empty);i[s]=ze.of(n.slice(1)),t.push(n[0],i[s].length)}}}return new Vt(t,i)}static createSet(e,t){return new Vt(e,t)}}function li(r,e,t,i=!1){if(e==0&&t<=0)return;let s=r.length-2;s>=0&&t<=0&&t==r[s+1]?r[s]+=e:s>=0&&e==0&&r[s]==0?r[s+1]+=t:i?(r[s]+=e,r[s+1]+=t):r.push(e,t)}function en(r,e,t){if(t.length==0)return;let i=e.length-2>>1;if(i<r.length)r[r.length-1]=r[r.length-1].append(t);else{for(;r.length<i;)r.push(ze.empty);r.push(t)}}function Nm(r,e,t){let i=r.inserted;for(let s=0,n=0,a=0;a<r.sections.length;){let o=r.sections[a++],l=r.sections[a++];if(l<0)s+=o,n+=o;else{let u=s,c=n,h=ze.empty;for(;u+=o,c+=l,l&&i&&(h=h.append(i[a-2>>1])),!(t||a==r.sections.length||r.sections[a+1]<0);)o=r.sections[a++],l=r.sections[a++];e(s,u,n,c,h),s=u,n=c}}}function Fm(r,e,t,i=!1){let s=[],n=i?[]:null,a=new Xl(r),o=new Xl(e);for(let l=-1;;){if(a.done&&o.len||o.done&&a.len)throw new Error("Mismatched change set lengths");if(a.ins==-1&&o.ins==-1){let u=Math.min(a.len,o.len);li(s,u,-1),a.forward(u),o.forward(u)}else if(o.ins>=0&&(a.ins<0||l==a.i||a.off==0&&(o.len<a.len||o.len==a.len&&!t))){let u=o.len;for(li(s,o.ins,-1);u;){let c=Math.min(a.len,u);a.ins>=0&&l<a.i&&a.len<=c&&(li(s,0,a.ins),n&&en(n,s,a.text),l=a.i),a.forward(c),u-=c}o.next()}else if(a.ins>=0){let u=0,c=a.len;for(;c;)if(o.ins==-1){let h=Math.min(c,o.len);u+=h,c-=h,o.forward(h)}else if(o.ins==0&&o.len<c)c-=o.len,o.next();else break;li(s,u,l<a.i?a.ins:0),n&&l<a.i&&en(n,s,a.text),l=a.i,a.forward(a.len-c)}else{if(a.done&&o.done)return n?Vt.createSet(s,n):Jr.create(s);throw new Error("Mismatched change set lengths")}}}function l2(r,e,t=!1){let i=[],s=t?[]:null,n=new Xl(r),a=new Xl(e);for(let o=!1;;){if(n.done&&a.done)return s?Vt.createSet(i,s):Jr.create(i);if(n.ins==0)li(i,n.len,0,o),n.next();else if(a.len==0&&!a.done)li(i,0,a.ins,o),s&&en(s,i,a.text),a.next();else{if(n.done||a.done)throw new Error("Mismatched change set lengths");{let l=Math.min(n.len2,a.len),u=i.length;if(n.ins==-1){let c=a.ins==-1?-1:a.off?0:a.ins;li(i,l,c,o),s&&c&&en(s,i,a.text)}else a.ins==-1?(li(i,n.off?0:n.len,l,o),s&&en(s,i,n.textBit(l))):(li(i,n.off?0:n.len,a.off?0:a.ins,o),s&&!a.off&&en(s,i,a.text));o=(n.ins>l||a.ins>=0&&a.len>l)&&(o||i.length>u),n.forward2(l),a.forward(l)}}}}class Xl{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?ze.empty:e[t]}textBit(e){let{inserted:t}=this.set,i=this.i-2>>1;return i>=t.length&&!e?ze.empty:t[i].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class In{constructor(e,t,i){this.from=e,this.to=t,this.flags=i}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,t=-1){let i,s;return this.empty?i=s=e.mapPos(this.from,t):(i=e.mapPos(this.from,1),s=e.mapPos(this.to,-1)),i==this.from&&s==this.to?this:new In(i,s,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return ie.range(e,t);let i=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return ie.range(this.anchor,i)}eq(e,t=!1){return this.anchor==e.anchor&&this.head==e.head&&(!t||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return ie.range(e.anchor,e.head)}static create(e,t,i){return new In(e,t,i)}}class ie{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:ie.create(this.ranges.map(i=>i.map(e,t)),this.mainIndex)}eq(e,t=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let i=0;i<this.ranges.length;i++)if(!this.ranges[i].eq(e.ranges[i],t))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new ie([this.main],0)}addRange(e,t=!0){return ie.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let i=this.ranges.slice();return i[t]=e,ie.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new ie(e.ranges.map(t=>In.fromJSON(t)),e.main)}static single(e,t=e){return new ie([ie.range(e,t)],0)}static create(e,t=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let i=0,s=0;s<e.length;s++){let n=e[s];if(n.empty?n.from<=i:n.from<i)return ie.normalized(e.slice(),t);i=n.to}return new ie(e,t)}static cursor(e,t=0,i,s){return In.create(e,e,(t==0?0:t<0?8:16)|(i==null?7:Math.min(6,i))|(s??16777215)<<6)}static range(e,t,i,s){let n=(i??16777215)<<6|(s==null?7:Math.min(6,s));return t<e?In.create(t,e,48|n):In.create(e,t,(t>e?8:0)|n)}static normalized(e,t=0){let i=e[t];e.sort((s,n)=>s.from-n.from),t=e.indexOf(i);for(let s=1;s<e.length;s++){let n=e[s],a=e[s-1];if(n.empty?n.from<=a.to:n.from<a.to){let o=a.from,l=Math.max(n.to,a.to);s<=t&&t--,e.splice(--s,2,n.anchor>n.head?ie.range(l,o):ie.range(o,l))}}return new ie(e,t)}}function u2(r,e){for(let t of r.ranges)if(t.to>e)throw new RangeError("Selection points outside of document")}let X0=0;class ve{constructor(e,t,i,s,n){this.combine=e,this.compareInput=t,this.compare=i,this.isStatic=s,this.id=X0++,this.default=e([]),this.extensions=typeof n=="function"?n(this):n}get reader(){return this}static define(e={}){return new ve(e.combine||(t=>t),e.compareInput||((t,i)=>t===i),e.compare||(e.combine?(t,i)=>t===i:j0),!!e.static,e.enables)}of(e){return new lh([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new lh(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new lh(e,this,2,t)}from(e,t){return t||(t=i=>i),this.compute([e],i=>t(i.field(e)))}}function j0(r,e){return r==e||r.length==e.length&&r.every((t,i)=>t===e[i])}class lh{constructor(e,t,i,s){this.dependencies=e,this.facet=t,this.type=i,this.value=s,this.id=X0++}dynamicSlot(e){var t;let i=this.value,s=this.facet.compareInput,n=this.id,a=e[n]>>1,o=this.type==2,l=!1,u=!1,c=[];for(let h of this.dependencies)h=="doc"?l=!0:h=="selection"?u=!0:(((t=e[h.id])!==null&&t!==void 0?t:1)&1)==0&&c.push(e[h.id]);return{create(h){return h.values[a]=i(h),1},update(h,f){if(l&&f.docChanged||u&&(f.docChanged||f.selection)||Um(h,c)){let m=i(h);if(o?!Ev(m,h.values[a],s):!s(m,h.values[a]))return h.values[a]=m,1}return 0},reconfigure:(h,f)=>{let m,S=f.config.address[n];if(S!=null){let y=Wh(f,S);if(this.dependencies.every(E=>E instanceof ve?f.facet(E)===h.facet(E):E instanceof Gt?f.field(E,!1)==h.field(E,!1):!0)||(o?Ev(m=i(h),y,s):s(m=i(h),y)))return h.values[a]=y,0}else m=i(h);return h.values[a]=m,1}}}}function Ev(r,e,t){if(r.length!=e.length)return!1;for(let i=0;i<r.length;i++)if(!t(r[i],e[i]))return!1;return!0}function Um(r,e){let t=!1;for(let i of e)El(r,i)&1&&(t=!0);return t}function z4(r,e,t){let i=t.map(l=>r[l.id]),s=t.map(l=>l.type),n=i.filter(l=>!(l&1)),a=r[e.id]>>1;function o(l){let u=[];for(let c=0;c<i.length;c++){let h=Wh(l,i[c]);if(s[c]==2)for(let f of h)u.push(f);else u.push(h)}return e.combine(u)}return{create(l){for(let u of i)El(l,u);return l.values[a]=o(l),1},update(l,u){if(!Um(l,n))return 0;let c=o(l);return e.compare(c,l.values[a])?0:(l.values[a]=c,1)},reconfigure(l,u){let c=Um(l,i),h=u.config.facets[e.id],f=u.facet(e);if(h&&!c&&j0(t,h))return l.values[a]=f,0;let m=o(l);return e.compare(m,f)?(l.values[a]=f,0):(l.values[a]=m,1)}}}const Ac=ve.define({static:!0});class Gt{constructor(e,t,i,s,n){this.id=e,this.createF=t,this.updateF=i,this.compareF=s,this.spec=n,this.provides=void 0}static define(e){let t=new Gt(X0++,e.create,e.update,e.compare||((i,s)=>i===s),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(Ac).find(i=>i.field==this);return((t==null?void 0:t.create)||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:i=>(i.values[t]=this.create(i),1),update:(i,s)=>{let n=i.values[t],a=this.updateF(n,s);return this.compareF(n,a)?0:(i.values[t]=a,1)},reconfigure:(i,s)=>{let n=i.facet(Ac),a=s.facet(Ac),o;return(o=n.find(l=>l.field==this))&&o!=a.find(l=>l.field==this)?(i.values[t]=o.create(i),1):s.config.address[this.id]!=null?(i.values[t]=s.field(this),0):(i.values[t]=this.create(i),1)}}}init(e){return[this,Ac.of({field:this,create:e})]}get extension(){return this}}const An={lowest:4,low:3,default:2,high:1,highest:0};function el(r){return e=>new c2(e,r)}const Ms={highest:el(An.highest),high:el(An.high),default:el(An.default),low:el(An.low),lowest:el(An.lowest)};class c2{constructor(e,t){this.inner=e,this.prec=t}}class Gd{of(e){return new qm(this,e)}reconfigure(e){return Gd.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class qm{constructor(e,t){this.compartment=e,this.inner=t}}class Zh{constructor(e,t,i,s,n,a){for(this.base=e,this.compartments=t,this.dynamicSlots=i,this.address=s,this.staticValues=n,this.facets=a,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return t==null?e.default:this.staticValues[t>>1]}static resolve(e,t,i){let s=[],n=Object.create(null),a=new Map;for(let f of Z4(e,t,a))f instanceof Gt?s.push(f):(n[f.facet.id]||(n[f.facet.id]=[])).push(f);let o=Object.create(null),l=[],u=[];for(let f of s)o[f.id]=u.length<<1,u.push(m=>f.slot(m));let c=i==null?void 0:i.config.facets;for(let f in n){let m=n[f],S=m[0].facet,y=c&&c[f]||[];if(m.every(E=>E.type==0))if(o[S.id]=l.length<<1|1,j0(y,m))l.push(i.facet(S));else{let E=S.combine(m.map(C=>C.value));l.push(i&&S.compare(E,i.facet(S))?i.facet(S):E)}else{for(let E of m)E.type==0?(o[E.id]=l.length<<1|1,l.push(E.value)):(o[E.id]=u.length<<1,u.push(C=>E.dynamicSlot(C)));o[S.id]=u.length<<1,u.push(E=>z4(E,S,m))}}let h=u.map(f=>f(o));return new Zh(e,a,h,o,l,n)}}function Z4(r,e,t){let i=[[],[],[],[],[]],s=new Map;function n(a,o){let l=s.get(a);if(l!=null){if(l<=o)return;let u=i[l].indexOf(a);u>-1&&i[l].splice(u,1),a instanceof qm&&t.delete(a.compartment)}if(s.set(a,o),Array.isArray(a))for(let u of a)n(u,o);else if(a instanceof qm){if(t.has(a.compartment))throw new RangeError("Duplicate use of compartment in extensions");let u=e.get(a.compartment)||a.inner;t.set(a.compartment,u),n(u,o)}else if(a instanceof c2)n(a.inner,a.prec);else if(a instanceof Gt)i[o].push(a),a.provides&&n(a.provides,o);else if(a instanceof lh)i[o].push(a),a.facet.extensions&&n(a.facet.extensions,An.default);else{let u=a.extension;if(!u)throw new Error(`Unrecognized extension value in extension set (${a}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);n(u,o)}}return n(r,An.default),i.reduce((a,o)=>a.concat(o))}function El(r,e){if(e&1)return 2;let t=e>>1,i=r.status[t];if(i==4)throw new Error("Cyclic dependency between fields and/or facets");if(i&2)return i;r.status[t]=4;let s=r.computeSlot(r,r.config.dynamicSlots[t]);return r.status[t]=2|s}function Wh(r,e){return e&1?r.config.staticValues[e>>1]:r.values[e>>1]}const h2=ve.define(),Vm=ve.define({combine:r=>r.some(e=>e),static:!0}),d2=ve.define({combine:r=>r.length?r[0]:void 0,static:!0}),f2=ve.define(),p2=ve.define(),m2=ve.define(),g2=ve.define({combine:r=>r.length?r[0]:!1});class Is{constructor(e,t){this.type=e,this.value=t}static define(){return new W4}}class W4{of(e){return new Is(this,e)}}class H4{constructor(e){this.map=e}of(e){return new $e(this,e)}}class $e{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return t===void 0?void 0:t==this.value?this:new $e(this.type,t)}is(e){return this.type==e}static define(e={}){return new H4(e.map||(t=>t))}static mapEffects(e,t){if(!e.length)return e;let i=[];for(let s of e){let n=s.map(t);n&&i.push(n)}return i}}$e.reconfigure=$e.define();$e.appendConfig=$e.define();class Ut{constructor(e,t,i,s,n,a){this.startState=e,this.changes=t,this.selection=i,this.effects=s,this.annotations=n,this.scrollIntoView=a,this._doc=null,this._state=null,i&&u2(i,t.newLength),n.some(o=>o.type==Ut.time)||(this.annotations=n.concat(Ut.time.of(Date.now())))}static create(e,t,i,s,n,a){return new Ut(e,t,i,s,n,a)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(Ut.userEvent);return!!(t&&(t==e||t.length>e.length&&t.slice(0,e.length)==e&&t[e.length]=="."))}}Ut.time=Is.define();Ut.userEvent=Is.define();Ut.addToHistory=Is.define();Ut.remote=Is.define();function Y4(r,e){let t=[];for(let i=0,s=0;;){let n,a;if(i<r.length&&(s==e.length||e[s]>=r[i]))n=r[i++],a=r[i++];else if(s<e.length)n=e[s++],a=e[s++];else return t;!t.length||t[t.length-1]<n?t.push(n,a):t[t.length-1]<a&&(t[t.length-1]=a)}}function O2(r,e,t){var i;let s,n,a;return t?(s=e.changes,n=Vt.empty(e.changes.length),a=r.changes.compose(e.changes)):(s=e.changes.map(r.changes),n=r.changes.mapDesc(e.changes,!0),a=r.changes.compose(s)),{changes:a,selection:e.selection?e.selection.map(n):(i=r.selection)===null||i===void 0?void 0:i.map(s),effects:$e.mapEffects(r.effects,s).concat($e.mapEffects(e.effects,n)),annotations:r.annotations.length?r.annotations.concat(e.annotations):e.annotations,scrollIntoView:r.scrollIntoView||e.scrollIntoView}}function Xm(r,e,t){let i=e.selection,s=Na(e.annotations);return e.userEvent&&(s=s.concat(Ut.userEvent.of(e.userEvent))),{changes:e.changes instanceof Vt?e.changes:Vt.of(e.changes||[],t,r.facet(d2)),selection:i&&(i instanceof ie?i:ie.single(i.anchor,i.head)),effects:Na(e.effects),annotations:s,scrollIntoView:!!e.scrollIntoView}}function y2(r,e,t){let i=Xm(r,e.length?e[0]:{},r.doc.length);e.length&&e[0].filter===!1&&(t=!1);for(let n=1;n<e.length;n++){e[n].filter===!1&&(t=!1);let a=!!e[n].sequential;i=O2(i,Xm(r,e[n],a?i.changes.newLength:r.doc.length),a)}let s=Ut.create(r,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return K4(t?G4(s):s)}function G4(r){let e=r.startState,t=!0;for(let s of e.facet(f2)){let n=s(r);if(n===!1){t=!1;break}Array.isArray(n)&&(t=t===!0?n:Y4(t,n))}if(t!==!0){let s,n;if(t===!1)n=r.changes.invertedDesc,s=Vt.empty(e.doc.length);else{let a=r.changes.filter(t);s=a.changes,n=a.filtered.mapDesc(a.changes).invertedDesc}r=Ut.create(e,s,r.selection&&r.selection.map(n),$e.mapEffects(r.effects,n),r.annotations,r.scrollIntoView)}let i=e.facet(p2);for(let s=i.length-1;s>=0;s--){let n=i[s](r);n instanceof Ut?r=n:Array.isArray(n)&&n.length==1&&n[0]instanceof Ut?r=n[0]:r=y2(e,Na(n),!1)}return r}function K4(r){let e=r.startState,t=e.facet(m2),i=r;for(let s=t.length-1;s>=0;s--){let n=t[s](r);n&&Object.keys(n).length&&(i=O2(i,Xm(e,n,r.changes.newLength),!0))}return i==r?r:Ut.create(e,r.changes,r.selection,i.effects,i.annotations,i.scrollIntoView)}const J4=[];function Na(r){return r==null?J4:Array.isArray(r)?r:[r]}var Tt=(function(r){return r[r.Word=0]="Word",r[r.Space=1]="Space",r[r.Other=2]="Other",r})(Tt||(Tt={}));const eB=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let jm;try{jm=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function tB(r){if(jm)return jm.test(r);for(let e=0;e<r.length;e++){let t=r[e];if(/\w/.test(t)||t>""&&(t.toUpperCase()!=t.toLowerCase()||eB.test(t)))return!0}return!1}function iB(r){return e=>{if(!/\S/.test(e))return Tt.Space;if(tB(e))return Tt.Word;for(let t=0;t<r.length;t++)if(e.indexOf(r[t])>-1)return Tt.Word;return Tt.Other}}class He{constructor(e,t,i,s,n,a){this.config=e,this.doc=t,this.selection=i,this.values=s,this.status=e.statusTemplate.slice(),this.computeSlot=n,a&&(a._state=this);for(let o=0;o<this.config.dynamicSlots.length;o++)El(this,o<<1);this.computeSlot=null}field(e,t=!0){let i=this.config.address[e.id];if(i==null){if(t)throw new RangeError("Field is not present in this state");return}return El(this,i),Wh(this,i)}update(...e){return y2(this,e,!0)}applyTransaction(e){let t=this.config,{base:i,compartments:s}=t;for(let o of e.effects)o.is(Gd.reconfigure)?(t&&(s=new Map,t.compartments.forEach((l,u)=>s.set(u,l)),t=null),s.set(o.value.compartment,o.value.extension)):o.is($e.reconfigure)?(t=null,i=o.value):o.is($e.appendConfig)&&(t=null,i=Na(i).concat(o.value));let n;t?n=e.startState.values.slice():(t=Zh.resolve(i,s,this),n=new He(t,this.doc,this.selection,t.dynamicSlots.map(()=>null),(l,u)=>u.reconfigure(l,this),null).values);let a=e.startState.facet(Vm)?e.newSelection:e.newSelection.asSingle();new He(t,e.newDoc,a,n,(o,l)=>l.update(o,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:ie.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,i=e(t.ranges[0]),s=this.changes(i.changes),n=[i.range],a=Na(i.effects);for(let o=1;o<t.ranges.length;o++){let l=e(t.ranges[o]),u=this.changes(l.changes),c=u.map(s);for(let f=0;f<o;f++)n[f]=n[f].map(c);let h=s.mapDesc(u,!0);n.push(l.range.map(h)),s=s.compose(c),a=$e.mapEffects(a,c).concat($e.mapEffects(Na(l.effects),h))}return{changes:s,selection:ie.create(n,t.mainIndex),effects:a}}changes(e=[]){return e instanceof Vt?e:Vt.of(e,this.doc.length,this.facet(He.lineSeparator))}toText(e){return ze.of(e.split(this.facet(He.lineSeparator)||Bm))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return t==null?e.default:(El(this,t),Wh(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let i in e){let s=e[i];s instanceof Gt&&this.config.address[s.id]!=null&&(t[i]=s.spec.toJSON(this.field(e[i]),this))}return t}static fromJSON(e,t={},i){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let s=[];if(i){for(let n in i)if(Object.prototype.hasOwnProperty.call(e,n)){let a=i[n],o=e[n];s.push(a.init(l=>a.spec.fromJSON(o,l)))}}return He.create({doc:e.doc,selection:ie.fromJSON(e.selection),extensions:t.extensions?s.concat([t.extensions]):s})}static create(e={}){let t=Zh.resolve(e.extensions||[],new Map),i=e.doc instanceof ze?e.doc:ze.of((e.doc||"").split(t.staticFacet(He.lineSeparator)||Bm)),s=e.selection?e.selection instanceof ie?e.selection:ie.single(e.selection.anchor,e.selection.head):ie.single(0);return u2(s,i.length),t.staticFacet(Vm)||(s=s.asSingle()),new He(t,i,s,t.dynamicSlots.map(()=>null),(n,a)=>a.create(n),null)}get tabSize(){return this.facet(He.tabSize)}get lineBreak(){return this.facet(He.lineSeparator)||`
`}get readOnly(){return this.facet(g2)}phrase(e,...t){for(let i of this.facet(He.phrases))if(Object.prototype.hasOwnProperty.call(i,e)){e=i[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(i,s)=>{if(s=="$")return"$";let n=+(s||1);return!n||n>t.length?i:t[n-1]})),e}languageDataAt(e,t,i=-1){let s=[];for(let n of this.facet(h2))for(let a of n(this,t,i))Object.prototype.hasOwnProperty.call(a,e)&&s.push(a[e]);return s}charCategorizer(e){return iB(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:i,length:s}=this.doc.lineAt(e),n=this.charCategorizer(e),a=e-i,o=e-i;for(;a>0;){let l=si(t,a,!1);if(n(t.slice(l,a))!=Tt.Word)break;a=l}for(;o<s;){let l=si(t,o);if(n(t.slice(o,l))!=Tt.Word)break;o=l}return a==o?null:ie.range(a+i,o+i)}}He.allowMultipleSelections=Vm;He.tabSize=ve.define({combine:r=>r.length?r[0]:4});He.lineSeparator=d2;He.readOnly=g2;He.phrases=ve.define({compare(r,e){let t=Object.keys(r),i=Object.keys(e);return t.length==i.length&&t.every(s=>r[s]==e[s])}});He.languageData=h2;He.changeFilter=f2;He.transactionFilter=p2;He.transactionExtender=m2;Gd.reconfigure=$e.define();function ns(r,e,t={}){let i={};for(let s of r)for(let n of Object.keys(s)){let a=s[n],o=i[n];if(o===void 0)i[n]=a;else if(!(o===a||a===void 0))if(Object.hasOwnProperty.call(t,n))i[n]=t[n](o,a);else throw new Error("Config merge conflict for field "+n)}for(let s in e)i[s]===void 0&&(i[s]=e[s]);return i}class Hn{eq(e){return this==e}range(e,t=e){return zm.create(e,t,this)}}Hn.prototype.startSide=Hn.prototype.endSide=0;Hn.prototype.point=!1;Hn.prototype.mapMode=ii.TrackDel;let zm=class b2{constructor(e,t,i){this.from=e,this.to=t,this.value=i}static create(e,t,i){return new b2(e,t,i)}};function Zm(r,e){return r.from-e.from||r.value.startSide-e.value.startSide}class z0{constructor(e,t,i,s){this.from=e,this.to=t,this.value=i,this.maxPoint=s}get length(){return this.to[this.to.length-1]}findIndex(e,t,i,s=0){let n=i?this.to:this.from;for(let a=s,o=n.length;;){if(a==o)return a;let l=a+o>>1,u=n[l]-e||(i?this.value[l].endSide:this.value[l].startSide)-t;if(l==a)return u>=0?a:o;u>=0?o=l:a=l+1}}between(e,t,i,s){for(let n=this.findIndex(t,-1e9,!0),a=this.findIndex(i,1e9,!1,n);n<a;n++)if(s(this.from[n]+e,this.to[n]+e,this.value[n])===!1)return!1}map(e,t){let i=[],s=[],n=[],a=-1,o=-1;for(let l=0;l<this.value.length;l++){let u=this.value[l],c=this.from[l]+e,h=this.to[l]+e,f,m;if(c==h){let S=t.mapPos(c,u.startSide,u.mapMode);if(S==null||(f=m=S,u.startSide!=u.endSide&&(m=t.mapPos(c,u.endSide),m<f)))continue}else if(f=t.mapPos(c,u.startSide),m=t.mapPos(h,u.endSide),f>m||f==m&&u.startSide>0&&u.endSide<=0)continue;(m-f||u.endSide-u.startSide)<0||(a<0&&(a=f),u.point&&(o=Math.max(o,m-f)),i.push(u),s.push(f-a),n.push(m-a))}return{mapped:i.length?new z0(s,n,i,o):null,pos:a}}}class Ye{constructor(e,t,i,s){this.chunkPos=e,this.chunk=t,this.nextLayer=i,this.maxPoint=s}static create(e,t,i,s){return new Ye(e,t,i,s)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:i=!1,filterFrom:s=0,filterTo:n=this.length}=e,a=e.filter;if(t.length==0&&!a)return this;if(i&&(t=t.slice().sort(Zm)),this.isEmpty)return t.length?Ye.of(t):this;let o=new v2(this,null,-1).goto(0),l=0,u=[],c=new As;for(;o.value||l<t.length;)if(l<t.length&&(o.from-t[l].from||o.startSide-t[l].value.startSide)>=0){let h=t[l++];c.addInner(h.from,h.to,h.value)||u.push(h)}else o.rangeIndex==1&&o.chunkIndex<this.chunk.length&&(l==t.length||this.chunkEnd(o.chunkIndex)<t[l].from)&&(!a||s>this.chunkEnd(o.chunkIndex)||n<this.chunkPos[o.chunkIndex])&&c.addChunk(this.chunkPos[o.chunkIndex],this.chunk[o.chunkIndex])?o.nextChunk():((!a||s>o.to||n<o.from||a(o.from,o.to,o.value))&&(c.addInner(o.from,o.to,o.value)||u.push(zm.create(o.from,o.to,o.value))),o.next());return c.finishInner(this.nextLayer.isEmpty&&!u.length?Ye.empty:this.nextLayer.update({add:u,filter:a,filterFrom:s,filterTo:n}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],i=[],s=-1;for(let a=0;a<this.chunk.length;a++){let o=this.chunkPos[a],l=this.chunk[a],u=e.touchesRange(o,o+l.length);if(u===!1)s=Math.max(s,l.maxPoint),t.push(l),i.push(e.mapPos(o));else if(u===!0){let{mapped:c,pos:h}=l.map(o,e);c&&(s=Math.max(s,c.maxPoint),t.push(c),i.push(h))}}let n=this.nextLayer.map(e);return t.length==0?n:new Ye(i,t,n||Ye.empty,s)}between(e,t,i){if(!this.isEmpty){for(let s=0;s<this.chunk.length;s++){let n=this.chunkPos[s],a=this.chunk[s];if(t>=n&&e<=n+a.length&&a.between(n,e-n,t-n,i)===!1)return}this.nextLayer.between(e,t,i)}}iter(e=0){return jl.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return jl.from(e).goto(t)}static compare(e,t,i,s,n=-1){let a=e.filter(h=>h.maxPoint>0||!h.isEmpty&&h.maxPoint>=n),o=t.filter(h=>h.maxPoint>0||!h.isEmpty&&h.maxPoint>=n),l=Av(a,o,i),u=new tl(a,l,n),c=new tl(o,l,n);i.iterGaps((h,f,m)=>Pv(u,h,c,f,m,s)),i.empty&&i.length==0&&Pv(u,0,c,0,0,s)}static eq(e,t,i=0,s){s==null&&(s=999999999);let n=e.filter(c=>!c.isEmpty&&t.indexOf(c)<0),a=t.filter(c=>!c.isEmpty&&e.indexOf(c)<0);if(n.length!=a.length)return!1;if(!n.length)return!0;let o=Av(n,a),l=new tl(n,o,0).goto(i),u=new tl(a,o,0).goto(i);for(;;){if(l.to!=u.to||!Wm(l.active,u.active)||l.point&&(!u.point||!l.point.eq(u.point)))return!1;if(l.to>s)return!0;l.next(),u.next()}}static spans(e,t,i,s,n=-1){let a=new tl(e,null,n).goto(t),o=t,l=a.openStart;for(;;){let u=Math.min(a.to,i);if(a.point){let c=a.activeForPoint(a.to),h=a.pointFrom<t?c.length+1:a.point.startSide<0?c.length:Math.min(c.length,l);s.point(o,u,a.point,c,h,a.pointRank),l=Math.min(a.openEnd(u),c.length)}else u>o&&(s.span(o,u,a.active,l),l=a.openEnd(u));if(a.to>i)return l+(a.point&&a.to>i?1:0);o=a.to,a.next()}}static of(e,t=!1){let i=new As;for(let s of e instanceof zm?[e]:t?rB(e):e)i.add(s.from,s.to,s.value);return i.finish()}static join(e){if(!e.length)return Ye.empty;let t=e[e.length-1];for(let i=e.length-2;i>=0;i--)for(let s=e[i];s!=Ye.empty;s=s.nextLayer)t=new Ye(s.chunkPos,s.chunk,t,Math.max(s.maxPoint,t.maxPoint));return t}}Ye.empty=new Ye([],[],null,-1);function rB(r){if(r.length>1)for(let e=r[0],t=1;t<r.length;t++){let i=r[t];if(Zm(e,i)>0)return r.slice().sort(Zm);e=i}return r}Ye.empty.nextLayer=Ye.empty;class As{finishChunk(e){this.chunks.push(new z0(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,t,i){this.addInner(e,t,i)||(this.nextLayer||(this.nextLayer=new As)).add(e,t,i)}addInner(e,t,i){let s=e-this.lastTo||i.startSide-this.last.endSide;if(s<=0&&(e-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return s<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=i,this.lastFrom=e,this.lastTo=t,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let i=t.value.length-1;return this.last=t.value[i],this.lastFrom=t.from[i]+e,this.lastTo=t.to[i]+e,!0}finish(){return this.finishInner(Ye.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let t=Ye.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function Av(r,e,t){let i=new Map;for(let n of r)for(let a=0;a<n.chunk.length;a++)n.chunk[a].maxPoint<=0&&i.set(n.chunk[a],n.chunkPos[a]);let s=new Set;for(let n of e)for(let a=0;a<n.chunk.length;a++){let o=i.get(n.chunk[a]);o!=null&&(t?t.mapPos(o):o)==n.chunkPos[a]&&!(t!=null&&t.touchesRange(o,o+n.chunk[a].length))&&s.add(n.chunk[a])}return s}class v2{constructor(e,t,i,s=0){this.layer=e,this.skip=t,this.minPoint=i,this.rank=s}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,i){for(;this.chunkIndex<this.layer.chunk.length;){let s=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(s)||this.layer.chunkEnd(this.chunkIndex)<e||s.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}if(this.chunkIndex<this.layer.chunk.length){let s=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!i||this.rangeIndex<s)&&this.setRangeIndex(s)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],i=e+t.from[this.rangeIndex];if(this.from=i,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class jl{constructor(e){this.heap=e}static from(e,t=null,i=-1){let s=[];for(let n=0;n<e.length;n++)for(let a=e[n];!a.isEmpty;a=a.nextLayer)a.maxPoint>=i&&s.push(new v2(a,t,i,n));return s.length==1?s[0]:new jl(s)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let i of this.heap)i.goto(e,t);for(let i=this.heap.length>>1;i>=0;i--)gp(this.heap,i);return this.next(),this}forward(e,t){for(let i of this.heap)i.forward(e,t);for(let i=this.heap.length>>1;i>=0;i--)gp(this.heap,i);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),gp(this.heap,0)}}}function gp(r,e){for(let t=r[e];;){let i=(e<<1)+1;if(i>=r.length)break;let s=r[i];if(i+1<r.length&&s.compare(r[i+1])>=0&&(s=r[i+1],i++),t.compare(s)<0)break;r[i]=t,r[e]=s,e=i}}class tl{constructor(e,t,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=jl.from(e,t,i)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){Pc(this.active,e),Pc(this.activeTo,e),Pc(this.activeRank,e),this.minActive=Dv(this.active,this.activeTo)}addActive(e){let t=0,{value:i,to:s,rank:n}=this.cursor;for(;t<this.activeRank.length&&(n-this.activeRank[t]||s-this.activeTo[t])>0;)t++;Dc(this.active,t,i),Dc(this.activeTo,t,s),Dc(this.activeRank,t,n),e&&Dc(e,t,this.cursor.from),this.minActive=Dv(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let i=this.openStart<0?[]:null;for(;;){let s=this.minActive;if(s>-1&&(this.activeTo[s]-this.cursor.from||this.active[s].endSide-this.cursor.startSide)<0){if(this.activeTo[s]>e){this.to=this.activeTo[s],this.endSide=this.active[s].endSide;break}this.removeActive(s),i&&Pc(i,s)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let n=this.cursor.value;if(!n.point)this.addActive(i),this.cursor.next();else if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=n,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=n.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(i){this.openStart=0;for(let s=i.length-1;s>=0&&i[s]<e;s--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>e||this.activeTo[i]==e&&this.active[i].endSide>=this.point.endSide)&&t.push(this.active[i]);return t.reverse()}openEnd(e){let t=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>e;i--)t++;return t}}function Pv(r,e,t,i,s,n){r.goto(e),t.goto(i);let a=i+s,o=i,l=i-e;for(;;){let u=r.to+l-t.to,c=u||r.endSide-t.endSide,h=c<0?r.to+l:t.to,f=Math.min(h,a);if(r.point||t.point?r.point&&t.point&&(r.point==t.point||r.point.eq(t.point))&&Wm(r.activeForPoint(r.to),t.activeForPoint(t.to))||n.comparePoint(o,f,r.point,t.point):f>o&&!Wm(r.active,t.active)&&n.compareRange(o,f,r.active,t.active),h>a)break;(u||r.openEnd!=t.openEnd)&&n.boundChange&&n.boundChange(h),o=h,c<=0&&r.next(),c>=0&&t.next()}}function Wm(r,e){if(r.length!=e.length)return!1;for(let t=0;t<r.length;t++)if(r[t]!=e[t]&&!r[t].eq(e[t]))return!1;return!0}function Pc(r,e){for(let t=e,i=r.length-1;t<i;t++)r[t]=r[t+1];r.pop()}function Dc(r,e,t){for(let i=r.length-1;i>=e;i--)r[i+1]=r[i];r[e]=t}function Dv(r,e){let t=-1,i=1e9;for(let s=0;s<e.length;s++)(e[s]-i||r[s].endSide-r[t].endSide)<0&&(t=s,i=e[s]);return t}function wr(r,e,t=r.length){let i=0;for(let s=0;s<t&&s<r.length;)r.charCodeAt(s)==9?(i+=e-i%e,s++):(i++,s=si(r,s));return i}function Hm(r,e,t,i){for(let s=0,n=0;;){if(n>=e)return s;if(s==r.length)break;n+=r.charCodeAt(s)==9?t-n%t:1,s=si(r,s)}return i===!0?-1:r.length}const Ym="ͼ",Mv=typeof Symbol>"u"?"__"+Ym:Symbol.for(Ym),Gm=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),Iv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class ln{constructor(e,t){this.rules=[];let{finish:i}=t||{};function s(a){return/^@/.test(a)?[a]:a.split(/,\s*/)}function n(a,o,l,u){let c=[],h=/^@(\w+)\b/.exec(a[0]),f=h&&h[1]=="keyframes";if(h&&o==null)return l.push(a[0]+";");for(let m in o){let S=o[m];if(/&/.test(m))n(m.split(/,\s*/).map(y=>a.map(E=>y.replace(/&/,E))).reduce((y,E)=>y.concat(E)),S,l);else if(S&&typeof S=="object"){if(!h)throw new RangeError("The value of a property ("+m+") should be a primitive value.");n(s(m),S,c,f)}else S!=null&&c.push(m.replace(/_.*/,"").replace(/[A-Z]/g,y=>"-"+y.toLowerCase())+": "+S+";")}(c.length||f)&&l.push((i&&!h&&!u?a.map(i):a).join(", ")+" {"+c.join(" ")+"}")}for(let a in e)n(s(a),e[a],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=Iv[Mv]||1;return Iv[Mv]=e+1,Ym+e.toString(36)}static mount(e,t,i){let s=e[Gm],n=i&&i.nonce;s?n&&s.setNonce(n):s=new sB(e,n),s.mount(Array.isArray(t)?t:[t],e)}}let Rv=new Map;class sB{constructor(e,t){let i=e.ownerDocument||e,s=i.defaultView;if(!e.head&&e.adoptedStyleSheets&&s.CSSStyleSheet){let n=Rv.get(i);if(n)return e[Gm]=n;this.sheet=new s.CSSStyleSheet,Rv.set(i,this)}else this.styleTag=i.createElement("style"),t&&this.styleTag.setAttribute("nonce",t);this.modules=[],e[Gm]=this}mount(e,t){let i=this.sheet,s=0,n=0;for(let a=0;a<e.length;a++){let o=e[a],l=this.modules.indexOf(o);if(l<n&&l>-1&&(this.modules.splice(l,1),n--,l=-1),l==-1){if(this.modules.splice(n++,0,o),i)for(let u=0;u<o.rules.length;u++)i.insertRule(o.rules[u],s++)}else{for(;n<l;)s+=this.modules[n++].rules.length;s+=o.rules.length,n++}}if(i)t.adoptedStyleSheets.indexOf(this.sheet)<0&&(t.adoptedStyleSheets=[this.sheet,...t.adoptedStyleSheets]);else{let a="";for(let l=0;l<this.modules.length;l++)a+=this.modules[l].getRules()+`
`;this.styleTag.textContent=a;let o=t.head||t;this.styleTag.parentNode!=o&&o.insertBefore(this.styleTag,o.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var un={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},zl={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},nB=typeof navigator<"u"&&/Mac/.test(navigator.platform),aB=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var ti=0;ti<10;ti++)un[48+ti]=un[96+ti]=String(ti);for(var ti=1;ti<=24;ti++)un[ti+111]="F"+ti;for(var ti=65;ti<=90;ti++)un[ti]=String.fromCharCode(ti+32),zl[ti]=String.fromCharCode(ti);for(var Op in un)zl.hasOwnProperty(Op)||(zl[Op]=un[Op]);function oB(r){var e=nB&&r.metaKey&&r.shiftKey&&!r.ctrlKey&&!r.altKey||aB&&r.shiftKey&&r.key&&r.key.length==1||r.key=="Unidentified",t=!e&&r.key||(r.shiftKey?zl:un)[r.keyCode]||r.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}function ut(){var r=arguments[0];typeof r=="string"&&(r=document.createElement(r));var e=1,t=arguments[1];if(t&&typeof t=="object"&&t.nodeType==null&&!Array.isArray(t)){for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var s=t[i];typeof s=="string"?r.setAttribute(i,s):s!=null&&(r[i]=s)}e++}for(;e<arguments.length;e++)S2(r,arguments[e]);return r}function S2(r,e){if(typeof e=="string")r.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)r.appendChild(e);else if(Array.isArray(e))for(var t=0;t<e.length;t++)S2(r,e[t]);else throw new RangeError("Unsupported child node: "+e)}let bi=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},Km=typeof document<"u"?document:{documentElement:{style:{}}};const Jm=/Edge\/(\d+)/.exec(bi.userAgent),T2=/MSIE \d/.test(bi.userAgent),eg=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(bi.userAgent),Kd=!!(T2||eg||Jm),Lv=!Kd&&/gecko\/(\d+)/i.test(bi.userAgent),yp=!Kd&&/Chrome\/(\d+)/.exec(bi.userAgent),lB="webkitFontSmoothing"in Km.documentElement.style,tg=!Kd&&/Apple Computer/.test(bi.vendor),Qv=tg&&(/Mobile\/\w+/.test(bi.userAgent)||bi.maxTouchPoints>2);var Oe={mac:Qv||/Mac/.test(bi.platform),windows:/Win/.test(bi.platform),linux:/Linux|X11/.test(bi.platform),ie:Kd,ie_version:T2?Km.documentMode||6:eg?+eg[1]:Jm?+Jm[1]:0,gecko:Lv,gecko_version:Lv?+(/Firefox\/(\d+)/.exec(bi.userAgent)||[0,0])[1]:0,chrome:!!yp,chrome_version:yp?+yp[1]:0,ios:Qv,android:/Android\b/.test(bi.userAgent),webkit_version:lB?+(/\bAppleWebKit\/(\d+)/.exec(bi.userAgent)||[0,0])[1]:0,safari:tg,safari_version:tg?+(/\bVersion\/(\d+(\.\d+)?)/.exec(bi.userAgent)||[0,0])[1]:0,tabSize:Km.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};function Zl(r){let e;return r.nodeType==11?e=r.getSelection?r:r.ownerDocument:e=r,e.getSelection()}function ig(r,e){return e?r==e||r.contains(e.nodeType!=1?e.parentNode:e):!1}function uh(r,e){if(!e.anchorNode)return!1;try{return ig(r,e.anchorNode)}catch{return!1}}function Wl(r){return r.nodeType==3?Gn(r,0,r.nodeValue.length).getClientRects():r.nodeType==1?r.getClientRects():[]}function Al(r,e,t,i){return t?$v(r,e,t,i,-1)||$v(r,e,t,i,1):!1}function Yn(r){for(var e=0;;e++)if(r=r.previousSibling,!r)return e}function Hh(r){return r.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(r.nodeName)}function $v(r,e,t,i,s){for(;;){if(r==t&&e==i)return!0;if(e==(s<0?0:ss(r))){if(r.nodeName=="DIV")return!1;let n=r.parentNode;if(!n||n.nodeType!=1)return!1;e=Yn(r)+(s<0?0:1),r=n}else if(r.nodeType==1){if(r=r.childNodes[e+(s<0?-1:0)],r.nodeType==1&&r.contentEditable=="false")return!1;e=s<0?ss(r):0}else return!1}}function ss(r){return r.nodeType==3?r.nodeValue.length:r.childNodes.length}function Jd(r,e){let t=e?r.left:r.right;return{left:t,right:t,top:r.top,bottom:r.bottom}}function uB(r){let e=r.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:r.innerWidth,top:0,bottom:r.innerHeight}}function _2(r,e){let t=e.width/r.offsetWidth,i=e.height/r.offsetHeight;return(t>.995&&t<1.005||!isFinite(t)||Math.abs(e.width-r.offsetWidth)<1)&&(t=1),(i>.995&&i<1.005||!isFinite(i)||Math.abs(e.height-r.offsetHeight)<1)&&(i=1),{scaleX:t,scaleY:i}}function cB(r,e,t,i,s,n,a,o){let l=r.ownerDocument,u=l.defaultView||window;for(let c=r,h=!1;c&&!h;)if(c.nodeType==1){let f,m=c==l.body,S=1,y=1;if(m)f=uB(u);else{if(/^(fixed|sticky)$/.test(getComputedStyle(c).position)&&(h=!0),c.scrollHeight<=c.clientHeight&&c.scrollWidth<=c.clientWidth){c=c.assignedSlot||c.parentNode;continue}let _=c.getBoundingClientRect();({scaleX:S,scaleY:y}=_2(c,_)),f={left:_.left,right:_.left+c.clientWidth*S,top:_.top,bottom:_.top+c.clientHeight*y}}let E=0,C=0;if(s=="nearest")e.top<f.top?(C=e.top-(f.top+a),t>0&&e.bottom>f.bottom+C&&(C=e.bottom-f.bottom+a)):e.bottom>f.bottom&&(C=e.bottom-f.bottom+a,t<0&&e.top-C<f.top&&(C=e.top-(f.top+a)));else{let _=e.bottom-e.top,b=f.bottom-f.top;C=(s=="center"&&_<=b?e.top+_/2-b/2:s=="start"||s=="center"&&t<0?e.top-a:e.bottom-b+a)-f.top}if(i=="nearest"?e.left<f.left?(E=e.left-(f.left+n),t>0&&e.right>f.right+E&&(E=e.right-f.right+n)):e.right>f.right&&(E=e.right-f.right+n,t<0&&e.left<f.left+E&&(E=e.left-(f.left+n))):E=(i=="center"?e.left+(e.right-e.left)/2-(f.right-f.left)/2:i=="start"==o?e.left-n:e.right-(f.right-f.left)+n)-f.left,E||C)if(m)u.scrollBy(E,C);else{let _=0,b=0;if(C){let T=c.scrollTop;c.scrollTop+=C/y,b=(c.scrollTop-T)*y}if(E){let T=c.scrollLeft;c.scrollLeft+=E/S,_=(c.scrollLeft-T)*S}e={left:e.left-_,top:e.top-b,right:e.right-_,bottom:e.bottom-b},_&&Math.abs(_-E)<1&&(i="nearest"),b&&Math.abs(b-C)<1&&(s="nearest")}if(m)break;(e.top<f.top||e.bottom>f.bottom||e.left<f.left||e.right>f.right)&&(e={left:Math.max(e.left,f.left),right:Math.min(e.right,f.right),top:Math.max(e.top,f.top),bottom:Math.min(e.bottom,f.bottom)}),c=c.assignedSlot||c.parentNode}else if(c.nodeType==11)c=c.host;else break}function hB(r){let e=r.ownerDocument,t,i;for(let s=r.parentNode;s&&!(s==e.body||t&&i);)if(s.nodeType==1)!i&&s.scrollHeight>s.clientHeight&&(i=s),!t&&s.scrollWidth>s.clientWidth&&(t=s),s=s.assignedSlot||s.parentNode;else if(s.nodeType==11)s=s.host;else break;return{x:t,y:i}}class dB{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:t,focusNode:i}=e;this.set(t,Math.min(e.anchorOffset,t?ss(t):0),i,Math.min(e.focusOffset,i?ss(i):0))}set(e,t,i,s){this.anchorNode=e,this.anchorOffset=t,this.focusNode=i,this.focusOffset=s}}let wn=null;Oe.safari&&Oe.safari_version>=26&&(wn=!1);function x2(r){if(r.setActive)return r.setActive();if(wn)return r.focus(wn);let e=[];for(let t=r;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(r.focus(wn==null?{get preventScroll(){return wn={preventScroll:!0},!0}}:void 0),!wn){wn=!1;for(let t=0;t<e.length;){let i=e[t++],s=e[t++],n=e[t++];i.scrollTop!=s&&(i.scrollTop=s),i.scrollLeft!=n&&(i.scrollLeft=n)}}}let Bv;function Gn(r,e,t=e){let i=Bv||(Bv=document.createRange());return i.setEnd(r,t),i.setStart(r,e),i}function Fa(r,e,t,i){let s={key:e,code:e,keyCode:t,which:t,cancelable:!0};i&&({altKey:s.altKey,ctrlKey:s.ctrlKey,shiftKey:s.shiftKey,metaKey:s.metaKey}=i);let n=new KeyboardEvent("keydown",s);n.synthetic=!0,r.dispatchEvent(n);let a=new KeyboardEvent("keyup",s);return a.synthetic=!0,r.dispatchEvent(a),n.defaultPrevented||a.defaultPrevented}function fB(r){for(;r;){if(r&&(r.nodeType==9||r.nodeType==11&&r.host))return r;r=r.assignedSlot||r.parentNode}return null}function w2(r){for(;r.attributes.length;)r.removeAttributeNode(r.attributes[0])}function pB(r,e){let t=e.focusNode,i=e.focusOffset;if(!t||e.anchorNode!=t||e.anchorOffset!=i)return!1;for(i=Math.min(i,ss(t));;)if(i){if(t.nodeType!=1)return!1;let s=t.childNodes[i-1];s.contentEditable=="false"?i--:(t=s,i=ss(t))}else{if(t==r)return!0;i=Yn(t),t=t.parentNode}}function C2(r){return r.scrollTop>Math.max(1,r.scrollHeight-r.clientHeight-4)}function k2(r,e){for(let t=r,i=e;;){if(t.nodeType==3&&i>0)return{node:t,offset:i};if(t.nodeType==1&&i>0){if(t.contentEditable=="false")return null;t=t.childNodes[i-1],i=ss(t)}else if(t.parentNode&&!Hh(t))i=Yn(t),t=t.parentNode;else return null}}function E2(r,e){for(let t=r,i=e;;){if(t.nodeType==3&&i<t.nodeValue.length)return{node:t,offset:i};if(t.nodeType==1&&i<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[i],i=0}else if(t.parentNode&&!Hh(t))i=Yn(t)+1,t=t.parentNode;else return null}}class ui{constructor(e,t,i=!0){this.node=e,this.offset=t,this.precise=i}static before(e,t){return new ui(e.parentNode,Yn(e),t)}static after(e,t){return new ui(e.parentNode,Yn(e)+1,t)}}const Z0=[];class at{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let i of this.children){if(i==e)return t;t+=i.length+i.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,t){if(this.flags&2){let i=this.dom,s=null,n;for(let a of this.children){if(a.flags&7){if(!a.dom&&(n=s?s.nextSibling:i.firstChild)){let o=at.get(n);(!o||!o.parent&&o.canReuseDOM(a))&&a.reuseDOM(n)}a.sync(e,t),a.flags&=-8}if(n=s?s.nextSibling:i.firstChild,t&&!t.written&&t.node==i&&n!=a.dom&&(t.written=!0),a.dom.parentNode==i)for(;n&&n!=a.dom;)n=Nv(n);else i.insertBefore(a.dom,n);s=a.dom}for(n=s?s.nextSibling:i.firstChild,n&&t&&t.node==i&&(t.written=!0);n;)n=Nv(n)}else if(this.flags&1)for(let i of this.children)i.flags&7&&(i.sync(e,t),i.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,t){let i;if(e==this.dom)i=this.dom.childNodes[t];else{let s=ss(e)==0?0:t==0?-1:1;for(;;){let n=e.parentNode;if(n==this.dom)break;s==0&&n.firstChild!=n.lastChild&&(e==n.firstChild?s=-1:s=1),e=n}s<0?i=e:i=e.nextSibling}if(i==this.dom.firstChild)return 0;for(;i&&!at.get(i);)i=i.nextSibling;if(!i)return this.length;for(let s=0,n=0;;s++){let a=this.children[s];if(a.dom==i)return n;n+=a.length+a.breakAfter}}domBoundsAround(e,t,i=0){let s=-1,n=-1,a=-1,o=-1;for(let l=0,u=i,c=i;l<this.children.length;l++){let h=this.children[l],f=u+h.length;if(u<e&&f>t)return h.domBoundsAround(e,t,u);if(f>=e&&s==-1&&(s=l,n=u),u>t&&h.dom.parentNode==this.dom){a=l,o=c;break}c=f,u=f+h.breakAfter}return{from:n,to:o<0?i+this.length:o,startDOM:(s?this.children[s-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:a<this.children.length&&a>=0?this.children[a].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.flags|=2),t.flags&1)return;t.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,i=Z0){this.markDirty();for(let s=e;s<t;s++){let n=this.children[s];n.parent==this&&i.indexOf(n)<0&&n.destroy()}i.length<250?this.children.splice(e,t-e,...i):this.children=[].concat(this.children.slice(0,e),i,this.children.slice(t));for(let s=0;s<i.length;s++)i[s].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new A2(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,t,i,s,n,a){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}at.prototype.breakAfter=0;function Nv(r){let e=r.nextSibling;return r.parentNode.removeChild(r),e}class A2{constructor(e,t,i){this.children=e,this.pos=t,this.i=i,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let i=this.children[--this.i];this.pos-=i.length+i.breakAfter}}}function P2(r,e,t,i,s,n,a,o,l){let{children:u}=r,c=u.length?u[e]:null,h=n.length?n[n.length-1]:null,f=h?h.breakAfter:a;if(!(e==i&&c&&!a&&!f&&n.length<2&&c.merge(t,s,n.length?h:null,t==0,o,l))){if(i<u.length){let m=u[i];m&&(s<m.length||m.breakAfter&&(h!=null&&h.breakAfter))?(e==i&&(m=m.split(s),s=0),!f&&h&&m.merge(0,s,h,!0,0,l)?n[n.length-1]=m:((s||m.children.length&&!m.children[0].length)&&m.merge(0,s,null,!1,0,l),n.push(m))):m!=null&&m.breakAfter&&(h?h.breakAfter=1:a=1),i++}for(c&&(c.breakAfter=a,t>0&&(!a&&n.length&&c.merge(t,c.length,n[0],!1,o,0)?c.breakAfter=n.shift().breakAfter:(t<c.length||c.children.length&&c.children[c.children.length-1].length==0)&&c.merge(t,c.length,null,!1,o,0),e++));e<i&&n.length;)if(u[i-1].become(n[n.length-1]))i--,n.pop(),l=n.length?0:o;else if(u[e].become(n[0]))e++,n.shift(),o=n.length?0:l;else break;!n.length&&e&&i<u.length&&!u[e-1].breakAfter&&u[i].merge(0,0,u[e-1],!1,o,l)&&e--,(e<i||n.length)&&r.replaceChildren(e,i,n)}}function D2(r,e,t,i,s,n){let a=r.childCursor(),{i:o,off:l}=a.findPos(t,1),{i:u,off:c}=a.findPos(e,-1),h=e-t;for(let f of i)h+=f.length;r.length+=h,P2(r,u,c,o,l,i,0,s,n)}const mB=256;class Cr extends at{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,t,i){return this.flags&8||i&&(!(i instanceof Cr)||this.length-(t-e)+i.length>mB||i.flags&8)?!1:(this.text=this.text.slice(0,e)+(i?i.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new Cr(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t.flags|=this.flags&8,t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new ui(this.dom,e)}domBoundsAround(e,t,i){return{from:i,to:i+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return gB(this.dom,e,t)}}class Ps extends at{constructor(e,t=[],i=0){super(),this.mark=e,this.children=t,this.length=i;for(let s of t)s.setParent(this)}setAttrs(e){if(w2(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,t){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,t)}merge(e,t,i,s,n,a){return i&&(!(i instanceof Ps&&i.mark.eq(this.mark))||e&&n<=0||t<this.length&&a<=0)?!1:(D2(this,e,t,i?i.children.slice():[],n-1,a-1),this.markDirty(),!0)}split(e){let t=[],i=0,s=-1,n=0;for(let o of this.children){let l=i+o.length;l>e&&t.push(i<e?o.split(e-i):o),s<0&&i>=e&&(s=n),i=l,n++}let a=this.length-e;return this.length=e,s>-1&&(this.children.length=s,this.markDirty()),new Ps(this.mark,t,a)}domAtPos(e){return M2(this,e)}coordsAt(e,t){return R2(this,e,t)}}function gB(r,e,t){let i=r.nodeValue.length;e>i&&(e=i);let s=e,n=e,a=0;e==0&&t<0||e==i&&t>=0?Oe.chrome||Oe.gecko||(e?(s--,a=1):n<i&&(n++,a=-1)):t<0?s--:n<i&&n++;let o=Gn(r,s,n).getClientRects();if(!o.length)return null;let l=o[(a?a<0:t>=0)?0:o.length-1];return Oe.safari&&!a&&l.width==0&&(l=Array.prototype.find.call(o,u=>u.width)||l),a?Jd(l,a<0):l||null}class tn extends at{static create(e,t,i){return new tn(e,t,i)}constructor(e,t,i){super(),this.widget=e,this.length=t,this.side=i,this.prevWidget=null}split(e){let t=tn.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,t,i,s,n,a){return i&&(!(i instanceof tn)||!this.widget.compare(i.widget)||e>0&&n<=0||t<this.length&&a<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-t),!0)}become(e){return e instanceof tn&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return ze.empty;let e=this;for(;e.parent;)e=e.parent;let{view:t}=e,i=t&&t.state.doc,s=this.posAtStart;return i?i.slice(s,s+this.length):ze.empty}domAtPos(e){return(this.length?e==0:this.side>0)?ui.before(this.dom):ui.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let i=this.widget.coordsAt(this.dom,e,t);if(i)return i;let s=this.dom.getClientRects(),n=null;if(!s.length)return null;let a=this.side?this.side<0:e>0;for(let o=a?s.length-1:0;n=s[o],!(e>0?o==0:o==s.length-1||n.top<n.bottom);o+=a?-1:1);return Jd(n,!a)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class ao extends at{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof ao&&e.side==this.side}split(){return new ao(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?ui.before(this.dom):ui.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return ze.empty}get isHidden(){return!0}}Cr.prototype.children=tn.prototype.children=ao.prototype.children=Z0;function M2(r,e){let t=r.dom,{children:i}=r,s=0;for(let n=0;s<i.length;s++){let a=i[s],o=n+a.length;if(!(o==n&&a.getSide()<=0)){if(e>n&&e<o&&a.dom.parentNode==t)return a.domAtPos(e-n);if(e<=n)break;n=o}}for(let n=s;n>0;n--){let a=i[n-1];if(a.dom.parentNode==t)return a.domAtPos(a.length)}for(let n=s;n<i.length;n++){let a=i[n];if(a.dom.parentNode==t)return a.domAtPos(0)}return new ui(t,0)}function I2(r,e,t){let i,{children:s}=r;t>0&&e instanceof Ps&&s.length&&(i=s[s.length-1])instanceof Ps&&i.mark.eq(e.mark)?I2(i,e.children[0],t-1):(s.push(e),e.setParent(r)),r.length+=e.length}function R2(r,e,t){let i=null,s=-1,n=null,a=-1;function o(u,c){for(let h=0,f=0;h<u.children.length&&f<=c;h++){let m=u.children[h],S=f+m.length;S>=c&&(m.children.length?o(m,c-f):(!n||n.isHidden&&(t>0||yB(n,m)))&&(S>c||f==S&&m.getSide()>0)?(n=m,a=c-f):(f<c||f==S&&m.getSide()<0&&!m.isHidden)&&(i=m,s=c-f)),f=S}}o(r,e);let l=(t<0?i:n)||i||n;return l?l.coordsAt(Math.max(0,l==i?s:a),t):OB(r)}function OB(r){let e=r.dom.lastChild;if(!e)return r.dom.getBoundingClientRect();let t=Wl(e);return t[t.length-1]||null}function yB(r,e){let t=r.coordsAt(0,1),i=e.coordsAt(0,1);return t&&i&&i.top<t.bottom}function rg(r,e){for(let t in r)t=="class"&&e.class?e.class+=" "+r.class:t=="style"&&e.style?e.style+=";"+r.style:e[t]=r[t];return e}const Fv=Object.create(null);function Yh(r,e,t){if(r==e)return!0;r||(r=Fv),e||(e=Fv);let i=Object.keys(r),s=Object.keys(e);if(i.length-(t&&i.indexOf(t)>-1?1:0)!=s.length-(t&&s.indexOf(t)>-1?1:0))return!1;for(let n of i)if(n!=t&&(s.indexOf(n)==-1||r[n]!==e[n]))return!1;return!0}function sg(r,e,t){let i=!1;if(e)for(let s in e)t&&s in t||(i=!0,s=="style"?r.style.cssText="":r.removeAttribute(s));if(t)for(let s in t)e&&e[s]==t[s]||(i=!0,s=="style"?r.style.cssText=t[s]:r.setAttribute(s,t[s]));return i}function bB(r){let e=Object.create(null);for(let t=0;t<r.attributes.length;t++){let i=r.attributes[t];e[i.name]=i.value}return e}class Rs{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,t,i){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var Ti=(function(r){return r[r.Text=0]="Text",r[r.WidgetBefore=1]="WidgetBefore",r[r.WidgetAfter=2]="WidgetAfter",r[r.WidgetRange=3]="WidgetRange",r})(Ti||(Ti={}));class Ae extends Hn{constructor(e,t,i,s){super(),this.startSide=e,this.endSide=t,this.widget=i,this.spec=s}get heightRelevant(){return!1}static mark(e){return new $u(e)}static widget(e){let t=Math.max(-1e4,Math.min(1e4,e.side||0)),i=!!e.block;return t+=i&&!e.inlineOrder?t>0?3e8:-4e8:t>0?1e8:-1e8,new cn(e,t,t,i,e.widget||null,!1)}static replace(e){let t=!!e.block,i,s;if(e.isBlockGap)i=-5e8,s=4e8;else{let{start:n,end:a}=L2(e,t);i=(n?t?-3e8:-1:5e8)-1,s=(a?t?2e8:1:-6e8)+1}return new cn(e,i,s,t,e.widget||null,!0)}static line(e){return new Bu(e)}static set(e,t=!1){return Ye.of(e,t)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Ae.none=Ye.empty;class $u extends Ae{constructor(e){let{start:t,end:i}=L2(e);super(t?-1:5e8,i?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var t,i;return this==e||e instanceof $u&&this.tagName==e.tagName&&(this.class||((t=this.attrs)===null||t===void 0?void 0:t.class))==(e.class||((i=e.attrs)===null||i===void 0?void 0:i.class))&&Yh(this.attrs,e.attrs,"class")}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}$u.prototype.point=!1;class Bu extends Ae{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof Bu&&this.spec.class==e.spec.class&&Yh(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}Bu.prototype.mapMode=ii.TrackBefore;Bu.prototype.point=!0;class cn extends Ae{constructor(e,t,i,s,n,a){super(t,i,n,e),this.block=s,this.isReplace=a,this.mapMode=s?t<=0?ii.TrackBefore:ii.TrackAfter:ii.TrackDel}get type(){return this.startSide!=this.endSide?Ti.WidgetRange:this.startSide<=0?Ti.WidgetBefore:Ti.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof cn&&vB(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}cn.prototype.point=!0;function L2(r,e=!1){let{inclusiveStart:t,inclusiveEnd:i}=r;return t==null&&(t=r.inclusive),i==null&&(i=r.inclusive),{start:t??e,end:i??e}}function vB(r,e){return r==e||!!(r&&e&&r.compare(e))}function ch(r,e,t,i=0){let s=t.length-1;s>=0&&t[s]+i>=r?t[s]=Math.max(t[s],e):t.push(r,e)}class Nt extends at{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,i,s,n,a){if(i){if(!(i instanceof Nt))return!1;this.dom||i.transferDOM(this)}return s&&this.setDeco(i?i.attrs:null),D2(this,e,t,i?i.children.slice():[],n,a),!0}split(e){let t=new Nt;if(t.breakAfter=this.breakAfter,this.length==0)return t;let{i,off:s}=this.childPos(e);s&&(t.append(this.children[i].split(s),0),this.children[i].merge(s,this.children[i].length,null,!1,0,0),i++);for(let n=i;n<this.children.length;n++)t.append(this.children[n],0);for(;i>0&&this.children[i-1].length==0;)this.children[--i].destroy();return this.children.length=i,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){Yh(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){I2(this,e,t)}addLineDeco(e){let t=e.spec.attributes,i=e.spec.class;t&&(this.attrs=rg(t,this.attrs||{})),i&&(this.attrs=rg({class:i},this.attrs||{}))}domAtPos(e){return M2(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,t){var i;this.dom?this.flags&4&&(w2(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(sg(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,t);let s=this.dom.lastChild;for(;s&&at.get(s)instanceof Ps;)s=s.lastChild;if(!s||!this.length||s.nodeName!="BR"&&((i=at.get(s))===null||i===void 0?void 0:i.isEditable)==!1&&(!Oe.ios||!this.children.some(n=>n instanceof Cr))){let n=document.createElement("BR");n.cmIgnore=!0,this.dom.appendChild(n)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,t;for(let i of this.children){if(!(i instanceof Cr)||/[^ -~]/.test(i.text))return null;let s=Wl(i.dom);if(s.length!=1)return null;e+=s[0].width,t=s[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:t}:null}coordsAt(e,t){let i=R2(this,e,t);if(!this.children.length&&i&&this.parent){let{heightOracle:s}=this.parent.view.viewState,n=i.bottom-i.top;if(Math.abs(n-s.lineHeight)<2&&s.textHeight<n){let a=(n-s.textHeight)/2;return{top:i.top+a,bottom:i.bottom-a,left:i.left,right:i.left}}}return i}become(e){return e instanceof Nt&&this.children.length==0&&e.children.length==0&&Yh(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,t){for(let i=0,s=0;i<e.children.length;i++){let n=e.children[i],a=s+n.length;if(a>=t){if(n instanceof Nt)return n;if(a>t)break}s=a+n.breakAfter}return null}}class Cs extends at{constructor(e,t,i){super(),this.widget=e,this.length=t,this.deco=i,this.breakAfter=0,this.prevWidget=null}merge(e,t,i,s,n,a){return i&&(!(i instanceof Cs)||!this.widget.compare(i.widget)||e>0&&n<=0||t<this.length&&a<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-t),!0)}domAtPos(e){return e==0?ui.before(this.dom):ui.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let i=new Cs(this.widget,t,this.deco);return i.breakAfter=this.breakAfter,i}get children(){return Z0}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):ze.empty}domBoundsAround(){return null}become(e){return e instanceof Cs&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,t){let i=this.widget.coordsAt(this.dom,e,t);return i||(this.widget instanceof ng?null:Jd(this.dom.getBoundingClientRect(),this.length?e==0:t<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:t,endSide:i}=this.deco;return t==i?!1:e<0?t<0:i>0}}class ng extends Rs{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class Pl{constructor(e,t,i,s){this.doc=e,this.pos=t,this.end=i,this.disallowBlockEffectsFor=s,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof Cs&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new Nt),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(Mc(new ao(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof Cs)&&this.getLine()}buildText(e,t,i){for(;e>0;){if(this.textOff==this.text.length){let{value:a,lineBreak:o,done:l}=this.cursor.next(this.skip);if(this.skip=0,l)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=a,this.textOff=0}let s=Math.min(this.text.length-this.textOff,e),n=Math.min(s,512);this.flushBuffer(t.slice(t.length-i)),this.getLine().append(Mc(new Cr(this.text.slice(this.textOff,this.textOff+n)),t),i),this.atCursorPos=!0,this.textOff+=n,e-=n,i=s<=n?0:t.length}}span(e,t,i,s){this.buildText(t-e,i,s),this.pos=t,this.openStart<0&&(this.openStart=s)}point(e,t,i,s,n,a){if(this.disallowBlockEffectsFor[a]&&i instanceof cn){if(i.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let o=t-e;if(i instanceof cn)if(i.block)i.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new Cs(i.widget||oo.block,o,i));else{let l=tn.create(i.widget||oo.inline,o,o?0:i.startSide),u=this.atCursorPos&&!l.isEditable&&n<=s.length&&(e<t||i.startSide>0),c=!l.isEditable&&(e<t||n>s.length||i.startSide<=0),h=this.getLine();this.pendingBuffer==2&&!u&&!l.isEditable&&(this.pendingBuffer=0),this.flushBuffer(s),u&&(h.append(Mc(new ao(1),s),n),n=s.length+Math.max(0,n-s.length)),h.append(Mc(l,s),n),this.atCursorPos=c,this.pendingBuffer=c?e<t||n>s.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=s.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(i);o&&(this.textOff+o<=this.text.length?this.textOff+=o:(this.skip+=o-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=n)}static build(e,t,i,s,n){let a=new Pl(e,t,i,n);return a.openEnd=Ye.spans(s,t,i,a),a.openStart<0&&(a.openStart=a.openEnd),a.finish(a.openEnd),a}}function Mc(r,e){for(let t of e)r=new Ps(t,[r],r.length);return r}class oo extends Rs{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}oo.inline=new oo("span");oo.block=new oo("div");var yt=(function(r){return r[r.LTR=0]="LTR",r[r.RTL=1]="RTL",r})(yt||(yt={}));const Kn=yt.LTR,W0=yt.RTL;function Q2(r){let e=[];for(let t=0;t<r.length;t++)e.push(1<<+r[t]);return e}const SB=Q2("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),TB=Q2("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),ag=Object.create(null),Qr=[];for(let r of["()","[]","{}"]){let e=r.charCodeAt(0),t=r.charCodeAt(1);ag[e]=t,ag[t]=-e}function $2(r){return r<=247?SB[r]:1424<=r&&r<=1524?2:1536<=r&&r<=1785?TB[r-1536]:1774<=r&&r<=2220?4:8192<=r&&r<=8204?256:64336<=r&&r<=65023?4:1}const _B=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class rn{get dir(){return this.level%2?W0:Kn}constructor(e,t,i){this.from=e,this.to=t,this.level=i}side(e,t){return this.dir==t==e?this.to:this.from}forward(e,t){return e==(this.dir==t)}static find(e,t,i,s){let n=-1;for(let a=0;a<e.length;a++){let o=e[a];if(o.from<=t&&o.to>=t){if(o.level==i)return a;(n<0||(s!=0?s<0?o.from<t:o.to>t:e[n].level>o.level))&&(n=a)}}if(n<0)throw new RangeError("Index out of range");return n}}function B2(r,e){if(r.length!=e.length)return!1;for(let t=0;t<r.length;t++){let i=r[t],s=e[t];if(i.from!=s.from||i.to!=s.to||i.direction!=s.direction||!B2(i.inner,s.inner))return!1}return!0}const ct=[];function xB(r,e,t,i,s){for(let n=0;n<=i.length;n++){let a=n?i[n-1].to:e,o=n<i.length?i[n].from:t,l=n?256:s;for(let u=a,c=l,h=l;u<o;u++){let f=$2(r.charCodeAt(u));f==512?f=c:f==8&&h==4&&(f=16),ct[u]=f==4?2:f,f&7&&(h=f),c=f}for(let u=a,c=l,h=l;u<o;u++){let f=ct[u];if(f==128)u<o-1&&c==ct[u+1]&&c&24?f=ct[u]=c:ct[u]=256;else if(f==64){let m=u+1;for(;m<o&&ct[m]==64;)m++;let S=u&&c==8||m<t&&ct[m]==8?h==1?1:8:256;for(let y=u;y<m;y++)ct[y]=S;u=m-1}else f==8&&h==1&&(ct[u]=1);c=f,f&7&&(h=f)}}}function wB(r,e,t,i,s){let n=s==1?2:1;for(let a=0,o=0,l=0;a<=i.length;a++){let u=a?i[a-1].to:e,c=a<i.length?i[a].from:t;for(let h=u,f,m,S;h<c;h++)if(m=ag[f=r.charCodeAt(h)])if(m<0){for(let y=o-3;y>=0;y-=3)if(Qr[y+1]==-m){let E=Qr[y+2],C=E&2?s:E&4?E&1?n:s:0;C&&(ct[h]=ct[Qr[y]]=C),o=y;break}}else{if(Qr.length==189)break;Qr[o++]=h,Qr[o++]=f,Qr[o++]=l}else if((S=ct[h])==2||S==1){let y=S==s;l=y?0:1;for(let E=o-3;E>=0;E-=3){let C=Qr[E+2];if(C&2)break;if(y)Qr[E+2]|=2;else{if(C&4)break;Qr[E+2]|=4}}}}}function CB(r,e,t,i){for(let s=0,n=i;s<=t.length;s++){let a=s?t[s-1].to:r,o=s<t.length?t[s].from:e;for(let l=a;l<o;){let u=ct[l];if(u==256){let c=l+1;for(;;)if(c==o){if(s==t.length)break;c=t[s++].to,o=s<t.length?t[s].from:e}else if(ct[c]==256)c++;else break;let h=n==1,f=(c<e?ct[c]:i)==1,m=h==f?h?1:2:i;for(let S=c,y=s,E=y?t[y-1].to:r;S>l;)S==E&&(S=t[--y].from,E=y?t[y-1].to:r),ct[--S]=m;l=c}else n=u,l++}}}function og(r,e,t,i,s,n,a){let o=i%2?2:1;if(i%2==s%2)for(let l=e,u=0;l<t;){let c=!0,h=!1;if(u==n.length||l<n[u].from){let y=ct[l];y!=o&&(c=!1,h=y==16)}let f=!c&&o==1?[]:null,m=c?i:i+1,S=l;e:for(;;)if(u<n.length&&S==n[u].from){if(h)break e;let y=n[u];if(!c)for(let E=y.to,C=u+1;;){if(E==t)break e;if(C<n.length&&n[C].from==E)E=n[C++].to;else{if(ct[E]==o)break e;break}}if(u++,f)f.push(y);else{y.from>l&&a.push(new rn(l,y.from,m));let E=y.direction==Kn!=!(m%2);lg(r,E?i+1:i,s,y.inner,y.from,y.to,a),l=y.to}S=y.to}else{if(S==t||(c?ct[S]!=o:ct[S]==o))break;S++}f?og(r,l,S,i+1,s,f,a):l<S&&a.push(new rn(l,S,m)),l=S}else for(let l=t,u=n.length;l>e;){let c=!0,h=!1;if(!u||l>n[u-1].to){let y=ct[l-1];y!=o&&(c=!1,h=y==16)}let f=!c&&o==1?[]:null,m=c?i:i+1,S=l;e:for(;;)if(u&&S==n[u-1].to){if(h)break e;let y=n[--u];if(!c)for(let E=y.from,C=u;;){if(E==e)break e;if(C&&n[C-1].to==E)E=n[--C].from;else{if(ct[E-1]==o)break e;break}}if(f)f.push(y);else{y.to<l&&a.push(new rn(y.to,l,m));let E=y.direction==Kn!=!(m%2);lg(r,E?i+1:i,s,y.inner,y.from,y.to,a),l=y.from}S=y.from}else{if(S==e||(c?ct[S-1]!=o:ct[S-1]==o))break;S--}f?og(r,S,l,i+1,s,f,a):S<l&&a.push(new rn(S,l,m)),l=S}}function lg(r,e,t,i,s,n,a){let o=e%2?2:1;xB(r,s,n,i,o),wB(r,s,n,i,o),CB(s,n,i,o),og(r,s,n,e,t,i,a)}function kB(r,e,t){if(!r)return[new rn(0,0,e==W0?1:0)];if(e==Kn&&!t.length&&!_B.test(r))return N2(r.length);if(t.length)for(;r.length>ct.length;)ct[ct.length]=256;let i=[],s=e==Kn?0:1;return lg(r,s,s,t,0,r.length,i),i}function N2(r){return[new rn(0,r,0)]}let F2="";function EB(r,e,t,i,s){var n;let a=i.head-r.from,o=rn.find(e,a,(n=i.bidiLevel)!==null&&n!==void 0?n:-1,i.assoc),l=e[o],u=l.side(s,t);if(a==u){let f=o+=s?1:-1;if(f<0||f>=e.length)return null;l=e[o=f],a=l.side(!s,t),u=l.side(s,t)}let c=si(r.text,a,l.forward(s,t));(c<l.from||c>l.to)&&(c=u),F2=r.text.slice(Math.min(a,c),Math.max(a,c));let h=o==(s?e.length-1:0)?null:e[o+(s?1:-1)];return h&&c==u&&h.level+(s?0:1)<l.level?ie.cursor(h.side(!s,t)+r.from,h.forward(s,t)?1:-1,h.level):ie.cursor(c+r.from,l.forward(s,t)?-1:1,l.level)}function AB(r,e,t){for(let i=e;i<t;i++){let s=$2(r.charCodeAt(i));if(s==1)return Kn;if(s==2||s==4)return W0}return Kn}const U2=ve.define(),q2=ve.define(),V2=ve.define(),X2=ve.define(),ug=ve.define(),j2=ve.define(),z2=ve.define(),H0=ve.define(),Y0=ve.define(),Z2=ve.define({combine:r=>r.some(e=>e)}),W2=ve.define({combine:r=>r.some(e=>e)}),H2=ve.define();class Ua{constructor(e,t="nearest",i="nearest",s=5,n=5,a=!1){this.range=e,this.y=t,this.x=i,this.yMargin=s,this.xMargin=n,this.isSnapshot=a}map(e){return e.empty?this:new Ua(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new Ua(ie.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const Ic=$e.define({map:(r,e)=>r.map(e)}),Y2=$e.define();function Ii(r,e,t){let i=r.facet(X2);i.length?i[0](e):window.onerror&&window.onerror(String(e),t,void 0,void 0,e)||(t?console.error(t+":",e):console.error(e))}const xs=ve.define({combine:r=>r.length?r[0]:!0});let PB=0;const _a=ve.define({combine(r){return r.filter((e,t)=>{for(let i=0;i<t;i++)if(r[i].plugin==e.plugin)return!1;return!0})}});class qt{constructor(e,t,i,s,n){this.id=e,this.create=t,this.domEventHandlers=i,this.domEventObservers=s,this.baseExtensions=n(this),this.extension=this.baseExtensions.concat(_a.of({plugin:this,arg:void 0}))}of(e){return this.baseExtensions.concat(_a.of({plugin:this,arg:e}))}static define(e,t){const{eventHandlers:i,eventObservers:s,provide:n,decorations:a}=t||{};return new qt(PB++,e,i,s,o=>{let l=[];return a&&l.push(Hl.of(u=>{let c=u.plugin(o);return c?a(c):Ae.none})),n&&l.push(n(o)),l})}static fromClass(e,t){return qt.define((i,s)=>new e(i,s),t)}}class bp{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(i){if(Ii(t.state,i,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(t){Ii(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(!((t=this.value)===null||t===void 0)&&t.destroy)try{this.value.destroy()}catch(i){Ii(e.state,i,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const G2=ve.define(),G0=ve.define(),Hl=ve.define(),K2=ve.define(),Nu=ve.define(),J2=ve.define();function Uv(r,e){let t=r.state.facet(J2);if(!t.length)return t;let i=t.map(n=>n instanceof Function?n(r):n),s=[];return Ye.spans(i,e.from,e.to,{point(){},span(n,a,o,l){let u=n-e.from,c=a-e.from,h=s;for(let f=o.length-1;f>=0;f--,l--){let m=o[f].spec.bidiIsolate,S;if(m==null&&(m=AB(e.text,u,c)),l>0&&h.length&&(S=h[h.length-1]).to==u&&S.direction==m)S.to=c,h=S.inner;else{let y={from:u,to:c,direction:m,inner:[]};h.push(y),h=y.inner}}}}),s}const eC=ve.define();function K0(r){let e=0,t=0,i=0,s=0;for(let n of r.state.facet(eC)){let a=n(r);a&&(a.left!=null&&(e=Math.max(e,a.left)),a.right!=null&&(t=Math.max(t,a.right)),a.top!=null&&(i=Math.max(i,a.top)),a.bottom!=null&&(s=Math.max(s,a.bottom)))}return{left:e,right:t,top:i,bottom:s}}const fl=ve.define();class lr{constructor(e,t,i,s){this.fromA=e,this.toA=t,this.fromB=i,this.toB=s}join(e){return new lr(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,i=this;for(;t>0;t--){let s=e[t-1];if(!(s.fromA>i.toA)){if(s.toA<i.fromA)break;i=i.join(s),e.splice(t-1,1)}}return e.splice(t,0,i),e}static extendWithRanges(e,t){if(t.length==0)return e;let i=[];for(let s=0,n=0,a=0,o=0;;s++){let l=s==e.length?null:e[s],u=a-o,c=l?l.fromB:1e9;for(;n<t.length&&t[n]<c;){let h=t[n],f=t[n+1],m=Math.max(o,h),S=Math.min(c,f);if(m<=S&&new lr(m+u,S+u,m,S).addToSet(i),f>c)break;n+=2}if(!l)return i;new lr(l.fromA,l.toA,l.fromB,l.toB).addToSet(i),a=l.toA,o=l.toB}}}class Gh{constructor(e,t,i){this.view=e,this.state=t,this.transactions=i,this.flags=0,this.startState=e.state,this.changes=Vt.empty(this.startState.doc.length);for(let n of i)this.changes=this.changes.compose(n.changes);let s=[];this.changes.iterChangedRanges((n,a,o,l)=>s.push(new lr(n,a,o,l))),this.changedRanges=s}static create(e,t,i){return new Gh(e,t,i)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class qv extends at{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=Ae.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new Nt],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new lr(0,0,0,e.state.doc.length)],0,null)}update(e){var t;let i=e.changedRanges;this.minWidth>0&&i.length&&(i.every(({fromA:u,toA:c})=>c<this.minWidthFrom||u>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let s=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((t=this.domChanged)===null||t===void 0)&&t.newSel?s=this.domChanged.newSel.head:!$B(e.changes,this.hasComposition)&&!e.selectionSet&&(s=e.state.selection.main.head));let n=s>-1?MB(this.view,e.changes,s):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:u,to:c}=this.hasComposition;i=new lr(u,c,e.changes.mapPos(u,-1),e.changes.mapPos(c,1)).addToSet(i.slice())}this.hasComposition=n?{from:n.range.fromB,to:n.range.toB}:null,(Oe.ie||Oe.chrome)&&!n&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let a=this.decorations,o=this.updateDeco(),l=LB(a,o,e.changes);return i=lr.extendWithRanges(i,l),!(this.flags&7)&&i.length==0?!1:(this.updateInner(i,e.startState.doc.length,n),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t,i){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t,i);let{observer:s}=this.view;s.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let a=Oe.chrome||Oe.ios?{node:s.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,a),this.flags&=-8,a&&(a.written||s.selectionRange.focusNode!=a.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(a=>a.flags&=-9);let n=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let a of this.children)a instanceof Cs&&a.widget instanceof ng&&n.push(a.dom);s.updateGaps(n)}updateChildren(e,t,i){let s=i?i.range.addToSet(e.slice()):e,n=this.childCursor(t);for(let a=s.length-1;;a--){let o=a>=0?s[a]:null;if(!o)break;let{fromA:l,toA:u,fromB:c,toB:h}=o,f,m,S,y;if(i&&i.range.fromB<h&&i.range.toB>c){let T=Pl.build(this.view.state.doc,c,i.range.fromB,this.decorations,this.dynamicDecorationMap),w=Pl.build(this.view.state.doc,i.range.toB,h,this.decorations,this.dynamicDecorationMap);m=T.breakAtStart,S=T.openStart,y=w.openEnd;let A=this.compositionView(i);w.breakAtStart?A.breakAfter=1:w.content.length&&A.merge(A.length,A.length,w.content[0],!1,w.openStart,0)&&(A.breakAfter=w.content[0].breakAfter,w.content.shift()),T.content.length&&A.merge(0,0,T.content[T.content.length-1],!0,0,T.openEnd)&&T.content.pop(),f=T.content.concat(A).concat(w.content)}else({content:f,breakAtStart:m,openStart:S,openEnd:y}=Pl.build(this.view.state.doc,c,h,this.decorations,this.dynamicDecorationMap));let{i:E,off:C}=n.findPos(u,1),{i:_,off:b}=n.findPos(l,-1);P2(this,_,b,E,C,f,m,S,y)}i&&this.fixCompositionDOM(i)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let t of e.transactions)for(let i of t.effects)i.is(Y2)&&(this.editContextFormatting=i.value)}compositionView(e){let t=new Cr(e.text.nodeValue);t.flags|=8;for(let{deco:s}of e.marks)t=new Ps(s,[t],t.length);let i=new Nt;return i.append(t,0),i}fixCompositionDOM(e){let t=(n,a)=>{a.flags|=8|(a.children.some(l=>l.flags&7)?1:0),this.markedForComposition.add(a);let o=at.get(n);o&&o!=a&&(o.dom=null),a.setDOM(n)},i=this.childPos(e.range.fromB,1),s=this.children[i.i];t(e.line,s);for(let n=e.marks.length-1;n>=-1;n--)i=s.childPos(i.off,1),s=s.children[i.i],t(n>=0?e.marks[n].node:e.text,s)}updateSelection(e=!1,t=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let i=this.view.root.activeElement,s=i==this.dom,n=!s&&!(this.view.state.facet(xs)||this.dom.tabIndex>-1)&&uh(this.dom,this.view.observer.selectionRange)&&!(i&&this.dom.contains(i));if(!(s||t||n))return;let a=this.forceSelection;this.forceSelection=!1;let o=this.view.state.selection.main,l=this.moveToLine(this.domAtPos(o.anchor)),u=o.empty?l:this.moveToLine(this.domAtPos(o.head));if(Oe.gecko&&o.empty&&!this.hasComposition&&DB(l)){let h=document.createTextNode("");this.view.observer.ignore(()=>l.node.insertBefore(h,l.node.childNodes[l.offset]||null)),l=u=new ui(h,0),a=!0}let c=this.view.observer.selectionRange;(a||!c.focusNode||(!Al(l.node,l.offset,c.anchorNode,c.anchorOffset)||!Al(u.node,u.offset,c.focusNode,c.focusOffset))&&!this.suppressWidgetCursorChange(c,o))&&(this.view.observer.ignore(()=>{Oe.android&&Oe.chrome&&this.dom.contains(c.focusNode)&&QB(c.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let h=Zl(this.view.root);if(h)if(o.empty){if(Oe.gecko){let f=IB(l.node,l.offset);if(f&&f!=3){let m=(f==1?k2:E2)(l.node,l.offset);m&&(l=new ui(m.node,m.offset))}}h.collapse(l.node,l.offset),o.bidiLevel!=null&&h.caretBidiLevel!==void 0&&(h.caretBidiLevel=o.bidiLevel)}else if(h.extend){h.collapse(l.node,l.offset);try{h.extend(u.node,u.offset)}catch{}}else{let f=document.createRange();o.anchor>o.head&&([l,u]=[u,l]),f.setEnd(u.node,u.offset),f.setStart(l.node,l.offset),h.removeAllRanges(),h.addRange(f)}n&&this.view.root.activeElement==this.dom&&(this.dom.blur(),i&&i.focus())}),this.view.observer.setSelectionRange(l,u)),this.impreciseAnchor=l.precise?null:new ui(c.anchorNode,c.anchorOffset),this.impreciseHead=u.precise?null:new ui(c.focusNode,c.focusOffset)}suppressWidgetCursorChange(e,t){return this.hasComposition&&t.empty&&Al(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==t.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,t=e.state.selection.main,i=Zl(e.root),{anchorNode:s,anchorOffset:n}=e.observer.selectionRange;if(!i||!t.empty||!t.assoc||!i.modify)return;let a=Nt.find(this,t.head);if(!a)return;let o=a.posAtStart;if(t.head==o||t.head==o+a.length)return;let l=this.coordsAt(t.head,-1),u=this.coordsAt(t.head,1);if(!l||!u||l.bottom>u.top)return;let c=this.domAtPos(t.head+t.assoc);i.collapse(c.node,c.offset),i.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let h=e.observer.selectionRange;e.docView.posFromDOM(h.anchorNode,h.anchorOffset)!=t.from&&i.collapse(s,n)}moveToLine(e){let t=this.dom,i;if(e.node!=t)return e;for(let s=e.offset;!i&&s<t.childNodes.length;s++){let n=at.get(t.childNodes[s]);n instanceof Nt&&(i=n.domAtPos(0))}for(let s=e.offset-1;!i&&s>=0;s--){let n=at.get(t.childNodes[s]);n instanceof Nt&&(i=n.domAtPos(n.length))}return i?new ui(i.node,i.offset,!0):e}nearest(e){for(let t=e;t;){let i=at.get(t);if(i&&i.rootView==this)return i;t=t.parentNode}return null}posFromDOM(e,t){let i=this.nearest(e);if(!i)throw new RangeError("Trying to find position for a DOM position outside of the document");return i.localPosFromDOM(e,t)+i.posAtStart}domAtPos(e){let{i:t,off:i}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let s=this.children[t];if(i<s.length||s instanceof Nt)break;t++,i=0}return this.children[t].domAtPos(i)}coordsAt(e,t){let i=null,s=0;for(let n=this.length,a=this.children.length-1;a>=0;a--){let o=this.children[a],l=n-o.breakAfter,u=l-o.length;if(l<e)break;if(u<=e&&(u<e||o.covers(-1))&&(l>e||o.covers(1))&&(!i||o instanceof Nt&&!(i instanceof Nt&&t>=0)))i=o,s=u;else if(i&&u==e&&l==e&&o instanceof Cs&&Math.abs(t)<2){if(o.deco.startSide<0)break;a&&(i=null)}n=u}return i?i.coordsAt(e-s,t):null}coordsForChar(e){let{i:t,off:i}=this.childPos(e,1),s=this.children[t];if(!(s instanceof Nt))return null;for(;s.children.length;){let{i:o,off:l}=s.childPos(i,1);for(;;o++){if(o==s.children.length)return null;if((s=s.children[o]).length)break}i=l}if(!(s instanceof Cr))return null;let n=si(s.text,i);if(n==i)return null;let a=Gn(s.dom,i,n).getClientRects();for(let o=0;o<a.length;o++){let l=a[o];if(o==a.length-1||l.top<l.bottom&&l.left<l.right)return l}return null}measureVisibleLineHeights(e){let t=[],{from:i,to:s}=e,n=this.view.contentDOM.clientWidth,a=n>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,o=-1,l=this.view.textDirection==yt.LTR;for(let u=0,c=0;c<this.children.length;c++){let h=this.children[c],f=u+h.length;if(f>s)break;if(u>=i){let m=h.dom.getBoundingClientRect();if(t.push(m.height),a){let S=h.dom.lastChild,y=S?Wl(S):[];if(y.length){let E=y[y.length-1],C=l?E.right-m.left:m.right-E.left;C>o&&(o=C,this.minWidth=n,this.minWidthFrom=u,this.minWidthTo=f)}}}u=f+h.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return getComputedStyle(this.children[t].dom).direction=="rtl"?yt.RTL:yt.LTR}measureTextSize(){for(let n of this.children)if(n instanceof Nt){let a=n.measureTextSize();if(a)return a}let e=document.createElement("div"),t,i,s;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let n=Wl(e.firstChild)[0];t=e.getBoundingClientRect().height,i=n?n.width/27:7,s=n?n.height:t,e.remove()}),{lineHeight:t,charWidth:i,textHeight:s}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new A2(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let i=0,s=0;;s++){let n=s==t.viewports.length?null:t.viewports[s],a=n?n.from-1:this.length;if(a>i){let o=(t.lineBlockAt(a).bottom-t.lineBlockAt(i).top)/this.view.scaleY;e.push(Ae.replace({widget:new ng(o),block:!0,inclusive:!0,isBlockGap:!0}).range(i,a))}if(!n)break;i=n.to+1}return Ae.set(e)}updateDeco(){let e=1,t=this.view.state.facet(Hl).map(n=>(this.dynamicDecorationMap[e++]=typeof n=="function")?n(this.view):n),i=!1,s=this.view.state.facet(K2).map((n,a)=>{let o=typeof n=="function";return o&&(i=!0),o?n(this.view):n});for(s.length&&(this.dynamicDecorationMap[e++]=i,t.push(Ye.join(s))),this.decorations=[this.editContextFormatting,...t,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let u=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=u.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let u of this.view.state.facet(H2))try{if(u(this.view,e.range,e))return!0}catch(c){Ii(this.view.state,c,"scroll handler")}let{range:t}=e,i=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),s;if(!i)return;!t.empty&&(s=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(i={left:Math.min(i.left,s.left),top:Math.min(i.top,s.top),right:Math.max(i.right,s.right),bottom:Math.max(i.bottom,s.bottom)});let n=K0(this.view),a={left:i.left-n.left,top:i.top-n.top,right:i.right+n.right,bottom:i.bottom+n.bottom},{offsetWidth:o,offsetHeight:l}=this.view.scrollDOM;cB(this.view.scrollDOM,a,t.head<t.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,o),-o),Math.max(Math.min(e.yMargin,l),-l),this.view.textDirection==yt.LTR)}}function DB(r){return r.node.nodeType==1&&r.node.firstChild&&(r.offset==0||r.node.childNodes[r.offset-1].contentEditable=="false")&&(r.offset==r.node.childNodes.length||r.node.childNodes[r.offset].contentEditable=="false")}function tC(r,e){let t=r.observer.selectionRange;if(!t.focusNode)return null;let i=k2(t.focusNode,t.focusOffset),s=E2(t.focusNode,t.focusOffset),n=i||s;if(s&&i&&s.node!=i.node){let o=at.get(s.node);if(!o||o instanceof Cr&&o.text!=s.node.nodeValue)n=s;else if(r.docView.lastCompositionAfterCursor){let l=at.get(i.node);!l||l instanceof Cr&&l.text!=i.node.nodeValue||(n=s)}}if(r.docView.lastCompositionAfterCursor=n!=i,!n)return null;let a=e-n.offset;return{from:a,to:a+n.node.nodeValue.length,node:n.node}}function MB(r,e,t){let i=tC(r,t);if(!i)return null;let{node:s,from:n,to:a}=i,o=s.nodeValue;if(/[\n\r]/.test(o)||r.state.doc.sliceString(i.from,i.to)!=o)return null;let l=e.invertedDesc,u=new lr(l.mapPos(n),l.mapPos(a),n,a),c=[];for(let h=s.parentNode;;h=h.parentNode){let f=at.get(h);if(f instanceof Ps)c.push({node:h,deco:f.mark});else{if(f instanceof Nt||h.nodeName=="DIV"&&h.parentNode==r.contentDOM)return{range:u,text:s,marks:c,line:h};if(h!=r.contentDOM)c.push({node:h,deco:new $u({inclusive:!0,attributes:bB(h),tagName:h.tagName.toLowerCase()})});else return null}}}function IB(r,e){return r.nodeType!=1?0:(e&&r.childNodes[e-1].contentEditable=="false"?1:0)|(e<r.childNodes.length&&r.childNodes[e].contentEditable=="false"?2:0)}let RB=class{constructor(){this.changes=[]}compareRange(e,t){ch(e,t,this.changes)}comparePoint(e,t){ch(e,t,this.changes)}boundChange(e){ch(e,e,this.changes)}};function LB(r,e,t){let i=new RB;return Ye.compare(r,e,t,i),i.changes}function QB(r,e){for(let t=r;t&&t!=e;t=t.assignedSlot||t.parentNode)if(t.nodeType==1&&t.contentEditable=="false")return!0;return!1}function $B(r,e){let t=!1;return e&&r.iterChangedRanges((i,s)=>{i<e.to&&s>e.from&&(t=!0)}),t}function BB(r,e,t=1){let i=r.charCategorizer(e),s=r.doc.lineAt(e),n=e-s.from;if(s.length==0)return ie.cursor(e);n==0?t=1:n==s.length&&(t=-1);let a=n,o=n;t<0?a=si(s.text,n,!1):o=si(s.text,n);let l=i(s.text.slice(a,o));for(;a>0;){let u=si(s.text,a,!1);if(i(s.text.slice(u,a))!=l)break;a=u}for(;o<s.length;){let u=si(s.text,o);if(i(s.text.slice(o,u))!=l)break;o=u}return ie.range(a+s.from,o+s.from)}function NB(r,e){return e.left>r?e.left-r:Math.max(0,r-e.right)}function FB(r,e){return e.top>r?e.top-r:Math.max(0,r-e.bottom)}function vp(r,e){return r.top<e.bottom-1&&r.bottom>e.top+1}function Vv(r,e){return e<r.top?{top:e,left:r.left,right:r.right,bottom:r.bottom}:r}function Xv(r,e){return e>r.bottom?{top:r.top,left:r.left,right:r.right,bottom:e}:r}function cg(r,e,t){let i,s,n,a,o=!1,l,u,c,h;for(let S=r.firstChild;S;S=S.nextSibling){let y=Wl(S);for(let E=0;E<y.length;E++){let C=y[E];s&&vp(s,C)&&(C=Vv(Xv(C,s.bottom),s.top));let _=NB(e,C),b=FB(t,C);if(_==0&&b==0)return S.nodeType==3?jv(S,e,t):cg(S,e,t);(!i||a>b||a==b&&n>_)&&(i=S,s=C,n=_,a=b,o=_?e<C.left?E>0:E<y.length-1:!0),_==0?t>C.bottom&&(!c||c.bottom<C.bottom)?(l=S,c=C):t<C.top&&(!h||h.top>C.top)&&(u=S,h=C):c&&vp(c,C)?c=Xv(c,C.bottom):h&&vp(h,C)&&(h=Vv(h,C.top))}}if(c&&c.bottom>=t?(i=l,s=c):h&&h.top<=t&&(i=u,s=h),!i)return{node:r,offset:0};let f=Math.max(s.left,Math.min(s.right,e));if(i.nodeType==3)return jv(i,f,t);if(o&&i.contentEditable!="false")return cg(i,f,t);let m=Array.prototype.indexOf.call(r.childNodes,i)+(e>=(s.left+s.right)/2?1:0);return{node:r,offset:m}}function jv(r,e,t){let i=r.nodeValue.length,s=-1,n=1e9,a=0;for(let o=0;o<i;o++){let l=Gn(r,o,o+1).getClientRects();for(let u=0;u<l.length;u++){let c=l[u];if(c.top==c.bottom)continue;a||(a=e-c.left);let h=(c.top>t?c.top-t:t-c.bottom)-1;if(c.left-1<=e&&c.right+1>=e&&h<n){let f=e>=(c.left+c.right)/2,m=f;if((Oe.chrome||Oe.gecko)&&Gn(r,o).getBoundingClientRect().left==c.right&&(m=!f),h<=0)return{node:r,offset:o+(m?1:0)};s=o+(m?1:0),n=h}}}return{node:r,offset:s>-1?s:a>0?r.nodeValue.length:0}}function iC(r,e,t,i=-1){var s,n;let a=r.contentDOM.getBoundingClientRect(),o=a.top+r.viewState.paddingTop,l,{docHeight:u}=r.viewState,{x:c,y:h}=e,f=h-o;if(f<0)return 0;if(f>u)return r.state.doc.length;for(let T=r.viewState.heightOracle.textHeight/2,w=!1;l=r.elementAtHeight(f),l.type!=Ti.Text;)for(;f=i>0?l.bottom+T:l.top-T,!(f>=0&&f<=u);){if(w)return t?null:0;w=!0,i=-i}h=o+f;let m=l.from;if(m<r.viewport.from)return r.viewport.from==0?0:t?null:zv(r,a,l,c,h);if(m>r.viewport.to)return r.viewport.to==r.state.doc.length?r.state.doc.length:t?null:zv(r,a,l,c,h);let S=r.dom.ownerDocument,y=r.root.elementFromPoint?r.root:S,E=y.elementFromPoint(c,h);E&&!r.contentDOM.contains(E)&&(E=null),E||(c=Math.max(a.left+1,Math.min(a.right-1,c)),E=y.elementFromPoint(c,h),E&&!r.contentDOM.contains(E)&&(E=null));let C,_=-1;if(E&&((s=r.docView.nearest(E))===null||s===void 0?void 0:s.isEditable)!=!1){if(S.caretPositionFromPoint){let T=S.caretPositionFromPoint(c,h);T&&({offsetNode:C,offset:_}=T)}else if(S.caretRangeFromPoint){let T=S.caretRangeFromPoint(c,h);T&&({startContainer:C,startOffset:_}=T)}C&&(!r.contentDOM.contains(C)||Oe.safari&&UB(C,_,c)||Oe.chrome&&qB(C,_,c))&&(C=void 0),C&&(_=Math.min(ss(C),_))}if(!C||!r.docView.dom.contains(C)){let T=Nt.find(r.docView,m);if(!T)return f>l.top+l.height/2?l.to:l.from;({node:C,offset:_}=cg(T.dom,c,h))}let b=r.docView.nearest(C);if(!b)return null;if(b.isWidget&&((n=b.dom)===null||n===void 0?void 0:n.nodeType)==1){let T=b.dom.getBoundingClientRect();return e.y<T.top||e.y<=T.bottom&&e.x<=(T.left+T.right)/2?b.posAtStart:b.posAtEnd}else return b.localPosFromDOM(C,_)+b.posAtStart}function zv(r,e,t,i,s){let n=Math.round((i-e.left)*r.defaultCharacterWidth);if(r.lineWrapping&&t.height>r.defaultLineHeight*1.5){let o=r.viewState.heightOracle.textHeight,l=Math.floor((s-t.top-(r.defaultLineHeight-o)*.5)/o);n+=l*r.viewState.heightOracle.lineLength}let a=r.state.sliceDoc(t.from,t.to);return t.from+Hm(a,n,r.state.tabSize)}function rC(r,e,t){let i,s=r;if(r.nodeType!=3||e!=(i=r.nodeValue.length))return!1;for(;;){let n=s.nextSibling;if(n){if(n.nodeName=="BR")break;return!1}else{let a=s.parentNode;if(!a||a.nodeName=="DIV")break;s=a}}return Gn(r,i-1,i).getBoundingClientRect().right>t}function UB(r,e,t){return rC(r,e,t)}function qB(r,e,t){if(e!=0)return rC(r,e,t);for(let s=r;;){let n=s.parentNode;if(!n||n.nodeType!=1||n.firstChild!=s)return!1;if(n.classList.contains("cm-line"))break;s=n}let i=r.nodeType==1?r.getBoundingClientRect():Gn(r,0,Math.max(r.nodeValue.length,1)).getBoundingClientRect();return t-i.left>5}function hg(r,e,t){let i=r.lineBlockAt(e);if(Array.isArray(i.type)){let s;for(let n of i.type){if(n.from>e)break;if(!(n.to<e)){if(n.from<e&&n.to>e)return n;(!s||n.type==Ti.Text&&(s.type!=n.type||(t<0?n.from<e:n.to>e)))&&(s=n)}}return s||i}return i}function VB(r,e,t,i){let s=hg(r,e.head,e.assoc||-1),n=!i||s.type!=Ti.Text||!(r.lineWrapping||s.widgetLineBreaks)?null:r.coordsAtPos(e.assoc<0&&e.head>s.from?e.head-1:e.head);if(n){let a=r.dom.getBoundingClientRect(),o=r.textDirectionAt(s.from),l=r.posAtCoords({x:t==(o==yt.LTR)?a.right-1:a.left+1,y:(n.top+n.bottom)/2});if(l!=null)return ie.cursor(l,t?-1:1)}return ie.cursor(t?s.to:s.from,t?-1:1)}function Zv(r,e,t,i){let s=r.state.doc.lineAt(e.head),n=r.bidiSpans(s),a=r.textDirectionAt(s.from);for(let o=e,l=null;;){let u=EB(s,n,a,o,t),c=F2;if(!u){if(s.number==(t?r.state.doc.lines:1))return o;c=`
`,s=r.state.doc.line(s.number+(t?1:-1)),n=r.bidiSpans(s),u=r.visualLineSide(s,!t)}if(l){if(!l(c))return o}else{if(!i)return u;l=i(c)}o=u}}function XB(r,e,t){let i=r.state.charCategorizer(e),s=i(t);return n=>{let a=i(n);return s==Tt.Space&&(s=a),s==a}}function jB(r,e,t,i){let s=e.head,n=t?1:-1;if(s==(t?r.state.doc.length:0))return ie.cursor(s,e.assoc);let a=e.goalColumn,o,l=r.contentDOM.getBoundingClientRect(),u=r.coordsAtPos(s,e.assoc||-1),c=r.documentTop;if(u)a==null&&(a=u.left-l.left),o=n<0?u.top:u.bottom;else{let m=r.viewState.lineBlockAt(s);a==null&&(a=Math.min(l.right-l.left,r.defaultCharacterWidth*(s-m.from))),o=(n<0?m.top:m.bottom)+c}let h=l.left+a,f=i??r.viewState.heightOracle.textHeight>>1;for(let m=0;;m+=10){let S=o+(f+m)*n,y=iC(r,{x:h,y:S},!1,n);if(S<l.top||S>l.bottom||(n<0?y<s:y>s)){let E=r.docView.coordsForChar(y),C=!E||S<E.top?-1:1;return ie.cursor(y,C,void 0,a)}}}function Dl(r,e,t){for(;;){let i=0;for(let s of r)s.between(e-1,e+1,(n,a,o)=>{if(e>n&&e<a){let l=i||t||(e-n<a-e?-1:1);e=l<0?n:a,i=l}});if(!i)return e}}function sC(r,e){let t=null;for(let i=0;i<e.ranges.length;i++){let s=e.ranges[i],n=null;if(s.empty){let a=Dl(r,s.from,0);a!=s.from&&(n=ie.cursor(a,-1))}else{let a=Dl(r,s.from,-1),o=Dl(r,s.to,1);(a!=s.from||o!=s.to)&&(n=ie.range(s.from==s.anchor?a:o,s.from==s.head?a:o))}n&&(t||(t=e.ranges.slice()),t[i]=n)}return t?ie.create(t,e.mainIndex):e}function Sp(r,e,t){let i=Dl(r.state.facet(Nu).map(s=>s(r)),t.from,e.head>t.from?-1:1);return i==t.from?t:ie.cursor(i,i<t.from?1:-1)}const pl="￿";class zB{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(He.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=pl}readRange(e,t){if(!e)return this;let i=e.parentNode;for(let s=e;;){this.findPointBefore(i,s);let n=this.text.length;this.readNode(s);let a=s.nextSibling;if(a==t)break;let o=at.get(s),l=at.get(a);(o&&l?o.breakAfter:(o?o.breakAfter:Hh(s))||Hh(a)&&(s.nodeName!="BR"||s.cmIgnore)&&this.text.length>n)&&!WB(a,t)&&this.lineBreak(),s=a}return this.findPointBefore(i,t),this}readTextNode(e){let t=e.nodeValue;for(let i of this.points)i.node==e&&(i.pos=this.text.length+Math.min(i.offset,t.length));for(let i=0,s=this.lineSeparator?null:/\r\n?|\n/g;;){let n=-1,a=1,o;if(this.lineSeparator?(n=t.indexOf(this.lineSeparator,i),a=this.lineSeparator.length):(o=s.exec(t))&&(n=o.index,a=o[0].length),this.append(t.slice(i,n<0?t.length:n)),n<0)break;if(this.lineBreak(),a>1)for(let l of this.points)l.node==e&&l.pos>this.text.length&&(l.pos-=a-1);i=n+a}}readNode(e){if(e.cmIgnore)return;let t=at.get(e),i=t&&t.overrideDOMText;if(i!=null){this.findPointInside(e,i.length);for(let s=i.iter();!s.next().done;)s.lineBreak?this.lineBreak():this.append(s.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let i of this.points)i.node==e&&e.childNodes[i.offset]==t&&(i.pos=this.text.length)}findPointInside(e,t){for(let i of this.points)(e.nodeType==3?i.node==e:e.contains(i.node))&&(i.pos=this.text.length+(ZB(e,i.node,i.offset)?t:0))}}function ZB(r,e,t){for(;;){if(!e||t<ss(e))return!1;if(e==r)return!0;t=Yn(e)+1,e=e.parentNode}}function WB(r,e){let t;for(;!(r==e||!r);r=r.nextSibling){let i=at.get(r);if(!(i!=null&&i.isWidget||r.cmIgnore))return!1;i&&(t||(t=[])).push(i)}if(t)for(let i of t){let s=i.overrideDOMText;if(s!=null&&s.length)return!1}return!0}class Wv{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class HB{constructor(e,t,i,s){this.typeOver=s,this.bounds=null,this.text="",this.domChanged=t>-1;let{impreciseHead:n,impreciseAnchor:a}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=e.docView.domBoundsAround(t,i,0))){let o=n||a?[]:GB(e),l=new zB(o,e.state);l.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=l.text,this.newSel=KB(o,this.bounds.from)}else{let o=e.observer.selectionRange,l=n&&n.node==o.focusNode&&n.offset==o.focusOffset||!ig(e.contentDOM,o.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(o.focusNode,o.focusOffset),u=a&&a.node==o.anchorNode&&a.offset==o.anchorOffset||!ig(e.contentDOM,o.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(o.anchorNode,o.anchorOffset),c=e.viewport;if((Oe.ios||Oe.chrome)&&e.state.selection.main.empty&&l!=u&&(c.from>0||c.to<e.state.doc.length)){let h=Math.min(l,u),f=Math.max(l,u),m=c.from-h,S=c.to-f;(m==0||m==1||h==0)&&(S==0||S==-1||f==e.state.doc.length)&&(l=0,u=e.state.doc.length)}this.newSel=ie.single(u,l)}}}function nC(r,e){let t,{newSel:i}=e,s=r.state.selection.main,n=r.inputState.lastKeyTime>Date.now()-100?r.inputState.lastKeyCode:-1;if(e.bounds){let{from:a,to:o}=e.bounds,l=s.from,u=null;(n===8||Oe.android&&e.text.length<o-a)&&(l=s.to,u="end");let c=aC(r.state.doc.sliceString(a,o,pl),e.text,l-a,u);c&&(Oe.chrome&&n==13&&c.toB==c.from+2&&e.text.slice(c.from,c.toB)==pl+pl&&c.toB--,t={from:a+c.from,to:a+c.toA,insert:ze.of(e.text.slice(c.from,c.toB).split(pl))})}else i&&(!r.hasFocus&&r.state.facet(xs)||i.main.eq(s))&&(i=null);if(!t&&!i)return!1;if(!t&&e.typeOver&&!s.empty&&i&&i.main.empty?t={from:s.from,to:s.to,insert:r.state.doc.slice(s.from,s.to)}:(Oe.mac||Oe.android)&&t&&t.from==t.to&&t.from==s.head-1&&/^\. ?$/.test(t.insert.toString())&&r.contentDOM.getAttribute("autocorrect")=="off"?(i&&t.insert.length==2&&(i=ie.single(i.main.anchor-1,i.main.head-1)),t={from:t.from,to:t.to,insert:ze.of([t.insert.toString().replace("."," ")])}):t&&t.from>=s.from&&t.to<=s.to&&(t.from!=s.from||t.to!=s.to)&&s.to-s.from-(t.to-t.from)<=4?t={from:s.from,to:s.to,insert:r.state.doc.slice(s.from,t.from).append(t.insert).append(r.state.doc.slice(t.to,s.to))}:Oe.chrome&&t&&t.from==t.to&&t.from==s.head&&t.insert.toString()==`
 `&&r.lineWrapping&&(i&&(i=ie.single(i.main.anchor-1,i.main.head-1)),t={from:s.from,to:s.to,insert:ze.of([" "])}),t)return J0(r,t,i,n);if(i&&!i.main.eq(s)){let a=!1,o="select";return r.inputState.lastSelectionTime>Date.now()-50&&(r.inputState.lastSelectionOrigin=="select"&&(a=!0),o=r.inputState.lastSelectionOrigin,o=="select.pointer"&&(i=sC(r.state.facet(Nu).map(l=>l(r)),i))),r.dispatch({selection:i,scrollIntoView:a,userEvent:o}),!0}else return!1}function J0(r,e,t,i=-1){if(Oe.ios&&r.inputState.flushIOSKey(e))return!0;let s=r.state.selection.main;if(Oe.android&&(e.to==s.to&&(e.from==s.from||e.from==s.from-1&&r.state.sliceDoc(e.from,s.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&Fa(r.contentDOM,"Enter",13)||(e.from==s.from-1&&e.to==s.to&&e.insert.length==0||i==8&&e.insert.length<e.to-e.from&&e.to>s.head)&&Fa(r.contentDOM,"Backspace",8)||e.from==s.from&&e.to==s.to+1&&e.insert.length==0&&Fa(r.contentDOM,"Delete",46)))return!0;let n=e.insert.toString();r.inputState.composing>=0&&r.inputState.composing++;let a,o=()=>a||(a=YB(r,e,t));return r.state.facet(j2).some(l=>l(r,e.from,e.to,n,o))||r.dispatch(o()),!0}function YB(r,e,t){let i,s=r.state,n=s.selection.main,a=-1;if(e.from==e.to&&e.from<n.from||e.from>n.to){let l=e.from<n.from?-1:1,u=l<0?n.from:n.to,c=Dl(s.facet(Nu).map(h=>h(r)),u,l);e.from==c&&(a=c)}if(a>-1)i={changes:e,selection:ie.cursor(e.from+e.insert.length,-1)};else if(e.from>=n.from&&e.to<=n.to&&e.to-e.from>=(n.to-n.from)/3&&(!t||t.main.empty&&t.main.from==e.from+e.insert.length)&&r.inputState.composing<0){let l=n.from<e.from?s.sliceDoc(n.from,e.from):"",u=n.to>e.to?s.sliceDoc(e.to,n.to):"";i=s.replaceSelection(r.state.toText(l+e.insert.sliceString(0,void 0,r.state.lineBreak)+u))}else{let l=s.changes(e),u=t&&t.main.to<=l.newLength?t.main:void 0;if(s.selection.ranges.length>1&&r.inputState.composing>=0&&e.to<=n.to&&e.to>=n.to-10){let c=r.state.sliceDoc(e.from,e.to),h,f=t&&tC(r,t.main.head);if(f){let y=e.insert.length-(e.to-e.from);h={from:f.from,to:f.to-y}}else h=r.state.doc.lineAt(n.head);let m=n.to-e.to,S=n.to-n.from;i=s.changeByRange(y=>{if(y.from==n.from&&y.to==n.to)return{changes:l,range:u||y.map(l)};let E=y.to-m,C=E-c.length;if(y.to-y.from!=S||r.state.sliceDoc(C,E)!=c||y.to>=h.from&&y.from<=h.to)return{range:y};let _=s.changes({from:C,to:E,insert:e.insert}),b=y.to-n.to;return{changes:_,range:u?ie.range(Math.max(0,u.anchor+b),Math.max(0,u.head+b)):y.map(_)}})}else i={changes:l,selection:u&&s.selection.replaceRange(u)}}let o="input.type";return(r.composing||r.inputState.compositionPendingChange&&r.inputState.compositionEndedAt>Date.now()-50)&&(r.inputState.compositionPendingChange=!1,o+=".compose",r.inputState.compositionFirstChange&&(o+=".start",r.inputState.compositionFirstChange=!1)),s.update(i,{userEvent:o,scrollIntoView:!0})}function aC(r,e,t,i){let s=Math.min(r.length,e.length),n=0;for(;n<s&&r.charCodeAt(n)==e.charCodeAt(n);)n++;if(n==s&&r.length==e.length)return null;let a=r.length,o=e.length;for(;a>0&&o>0&&r.charCodeAt(a-1)==e.charCodeAt(o-1);)a--,o--;if(i=="end"){let l=Math.max(0,n-Math.min(a,o));t-=a+l-n}if(a<n&&r.length<e.length){let l=t<=n&&t>=a?n-t:0;n-=l,o=n+(o-a),a=n}else if(o<n){let l=t<=n&&t>=o?n-t:0;n-=l,a=n+(a-o),o=n}return{from:n,toA:a,toB:o}}function GB(r){let e=[];if(r.root.activeElement!=r.contentDOM)return e;let{anchorNode:t,anchorOffset:i,focusNode:s,focusOffset:n}=r.observer.selectionRange;return t&&(e.push(new Wv(t,i)),(s!=t||n!=i)&&e.push(new Wv(s,n))),e}function KB(r,e){if(r.length==0)return null;let t=r[0].pos,i=r.length==2?r[1].pos:t;return t>-1&&i>-1?ie.single(t+e,i+e):null}class JB{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,Oe.safari&&e.contentDOM.addEventListener("input",()=>null),Oe.gecko&&mN(e.contentDOM.ownerDocument)}handleEvent(e){!oN(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,t){let i=this.handlers[e];if(i){for(let s of i.observers)s(this.view,t);for(let s of i.handlers){if(t.defaultPrevented)break;if(s(this.view,t)){t.preventDefault();break}}}}ensureHandlers(e){let t=eN(e),i=this.handlers,s=this.view.contentDOM;for(let n in t)if(n!="scroll"){let a=!t[n].handlers.length,o=i[n];o&&a!=!o.handlers.length&&(s.removeEventListener(n,this.handleEvent),o=null),o||s.addEventListener(n,this.handleEvent,{passive:a})}for(let n in i)n!="scroll"&&!t[n]&&s.removeEventListener(n,this.handleEvent);this.handlers=t}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&lC.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),Oe.android&&Oe.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let t;return Oe.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((t=oC.find(i=>i.keyCode==e.keyCode))&&!e.ctrlKey||tN.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=t||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let t=this.pendingIOSKey;return!t||t.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,Fa(this.view.contentDOM,t.key,t.keyCode,t instanceof KeyboardEvent?t:void 0))}ignoreDuringComposition(e){return!/^key/.test(e.type)||e.synthetic?!1:this.composing>0?!0:Oe.safari&&!Oe.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function Hv(r,e){return(t,i)=>{try{return e.call(r,i,t)}catch(s){Ii(t.state,s)}}}function eN(r){let e=Object.create(null);function t(i){return e[i]||(e[i]={observers:[],handlers:[]})}for(let i of r){let s=i.spec,n=s&&s.plugin.domEventHandlers,a=s&&s.plugin.domEventObservers;if(n)for(let o in n){let l=n[o];l&&t(o).handlers.push(Hv(i.value,l))}if(a)for(let o in a){let l=a[o];l&&t(o).observers.push(Hv(i.value,l))}}for(let i in kr)t(i).handlers.push(kr[i]);for(let i in dr)t(i).observers.push(dr[i]);return e}const oC=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],tN="dthko",lC=[16,17,18,20,91,92,224,225],Rc=6;function Lc(r){return Math.max(0,r)*.7+8}function iN(r,e){return Math.max(Math.abs(r.clientX-e.clientX),Math.abs(r.clientY-e.clientY))}class rN{constructor(e,t,i,s){this.view=e,this.startEvent=t,this.style=i,this.mustSelect=s,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParents=hB(e.contentDOM),this.atoms=e.state.facet(Nu).map(a=>a(e));let n=e.contentDOM.ownerDocument;n.addEventListener("mousemove",this.move=this.move.bind(this)),n.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(He.allowMultipleSelections)&&sN(e,t),this.dragging=aN(e,t)&&hC(t)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&iN(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let t=0,i=0,s=0,n=0,a=this.view.win.innerWidth,o=this.view.win.innerHeight;this.scrollParents.x&&({left:s,right:a}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:n,bottom:o}=this.scrollParents.y.getBoundingClientRect());let l=K0(this.view);e.clientX-l.left<=s+Rc?t=-Lc(s-e.clientX):e.clientX+l.right>=a-Rc&&(t=Lc(e.clientX-a)),e.clientY-l.top<=n+Rc?i=-Lc(n-e.clientY):e.clientY+l.bottom>=o-Rc&&(i=Lc(e.clientY-o)),this.setScrollSpeed(t,i)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:t}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),t&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=t,t=0),(e||t)&&this.view.win.scrollBy(e,t),this.dragging===!1&&this.select(this.lastEvent)}select(e){let{view:t}=this,i=sC(this.atoms,this.style.get(e,this.extend,this.multiple));(this.mustSelect||!i.eq(t.state.selection,this.dragging===!1))&&this.view.dispatch({selection:i,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(t=>t.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function sN(r,e){let t=r.state.facet(U2);return t.length?t[0](e):Oe.mac?e.metaKey:e.ctrlKey}function nN(r,e){let t=r.state.facet(q2);return t.length?t[0](e):Oe.mac?!e.altKey:!e.ctrlKey}function aN(r,e){let{main:t}=r.state.selection;if(t.empty)return!1;let i=Zl(r.root);if(!i||i.rangeCount==0)return!0;let s=i.getRangeAt(0).getClientRects();for(let n=0;n<s.length;n++){let a=s[n];if(a.left<=e.clientX&&a.right>=e.clientX&&a.top<=e.clientY&&a.bottom>=e.clientY)return!0}return!1}function oN(r,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target,i;t!=r.contentDOM;t=t.parentNode)if(!t||t.nodeType==11||(i=at.get(t))&&i.ignoreEvent(e))return!1;return!0}const kr=Object.create(null),dr=Object.create(null),uC=Oe.ie&&Oe.ie_version<15||Oe.ios&&Oe.webkit_version<604;function lN(r){let e=r.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{r.focus(),t.remove(),cC(r,t.value)},50)}function ef(r,e,t){for(let i of r.facet(e))t=i(t,r);return t}function cC(r,e){e=ef(r.state,H0,e);let{state:t}=r,i,s=1,n=t.toText(e),a=n.lines==t.selection.ranges.length;if(dg!=null&&t.selection.ranges.every(l=>l.empty)&&dg==n.toString()){let l=-1;i=t.changeByRange(u=>{let c=t.doc.lineAt(u.from);if(c.from==l)return{range:u};l=c.from;let h=t.toText((a?n.line(s++).text:e)+t.lineBreak);return{changes:{from:c.from,insert:h},range:ie.cursor(u.from+h.length)}})}else a?i=t.changeByRange(l=>{let u=n.line(s++);return{changes:{from:l.from,to:l.to,insert:u.text},range:ie.cursor(l.from+u.length)}}):i=t.replaceSelection(n);r.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}dr.scroll=r=>{r.inputState.lastScrollTop=r.scrollDOM.scrollTop,r.inputState.lastScrollLeft=r.scrollDOM.scrollLeft};kr.keydown=(r,e)=>(r.inputState.setSelectionOrigin("select"),e.keyCode==27&&r.inputState.tabFocusMode!=0&&(r.inputState.tabFocusMode=Date.now()+2e3),!1);dr.touchstart=(r,e)=>{r.inputState.lastTouchTime=Date.now(),r.inputState.setSelectionOrigin("select.pointer")};dr.touchmove=r=>{r.inputState.setSelectionOrigin("select.pointer")};kr.mousedown=(r,e)=>{if(r.observer.flush(),r.inputState.lastTouchTime>Date.now()-2e3)return!1;let t=null;for(let i of r.state.facet(V2))if(t=i(r,e),t)break;if(!t&&e.button==0&&(t=hN(r,e)),t){let i=!r.hasFocus;r.inputState.startMouseSelection(new rN(r,e,t,i)),i&&r.observer.ignore(()=>{x2(r.contentDOM);let n=r.root.activeElement;n&&!n.contains(r.contentDOM)&&n.blur()});let s=r.inputState.mouseSelection;if(s)return s.start(e),s.dragging===!1}else r.inputState.setSelectionOrigin("select.pointer");return!1};function Yv(r,e,t,i){if(i==1)return ie.cursor(e,t);if(i==2)return BB(r.state,e,t);{let s=Nt.find(r.docView,e),n=r.state.doc.lineAt(s?s.posAtEnd:e),a=s?s.posAtStart:n.from,o=s?s.posAtEnd:n.to;return o<r.state.doc.length&&o==n.to&&o++,ie.range(a,o)}}let Gv=(r,e,t)=>e>=t.top&&e<=t.bottom&&r>=t.left&&r<=t.right;function uN(r,e,t,i){let s=Nt.find(r.docView,e);if(!s)return 1;let n=e-s.posAtStart;if(n==0)return 1;if(n==s.length)return-1;let a=s.coordsAt(n,-1);if(a&&Gv(t,i,a))return-1;let o=s.coordsAt(n,1);return o&&Gv(t,i,o)?1:a&&a.bottom>=i?-1:1}function Kv(r,e){let t=r.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:t,bias:uN(r,t,e.clientX,e.clientY)}}const cN=Oe.ie&&Oe.ie_version<=11;let Jv=null,eS=0,tS=0;function hC(r){if(!cN)return r.detail;let e=Jv,t=tS;return Jv=r,tS=Date.now(),eS=!e||t>Date.now()-400&&Math.abs(e.clientX-r.clientX)<2&&Math.abs(e.clientY-r.clientY)<2?(eS+1)%3:1}function hN(r,e){let t=Kv(r,e),i=hC(e),s=r.state.selection;return{update(n){n.docChanged&&(t.pos=n.changes.mapPos(t.pos),s=s.map(n.changes))},get(n,a,o){let l=Kv(r,n),u,c=Yv(r,l.pos,l.bias,i);if(t.pos!=l.pos&&!a){let h=Yv(r,t.pos,t.bias,i),f=Math.min(h.from,c.from),m=Math.max(h.to,c.to);c=f<c.from?ie.range(f,m):ie.range(m,f)}return a?s.replaceRange(s.main.extend(c.from,c.to)):o&&i==1&&s.ranges.length>1&&(u=dN(s,l.pos))?u:o?s.addRange(c):ie.create([c])}}}function dN(r,e){for(let t=0;t<r.ranges.length;t++){let{from:i,to:s}=r.ranges[t];if(i<=e&&s>=e)return ie.create(r.ranges.slice(0,t).concat(r.ranges.slice(t+1)),r.mainIndex==t?0:r.mainIndex-(r.mainIndex>t?1:0))}return null}kr.dragstart=(r,e)=>{let{selection:{main:t}}=r.state;if(e.target.draggable){let s=r.docView.nearest(e.target);if(s&&s.isWidget){let n=s.posAtStart,a=n+s.length;(n>=t.to||a<=t.from)&&(t=ie.range(n,a))}}let{inputState:i}=r;return i.mouseSelection&&(i.mouseSelection.dragging=!0),i.draggedContent=t,e.dataTransfer&&(e.dataTransfer.setData("Text",ef(r.state,Y0,r.state.sliceDoc(t.from,t.to))),e.dataTransfer.effectAllowed="copyMove"),!1};kr.dragend=r=>(r.inputState.draggedContent=null,!1);function iS(r,e,t,i){if(t=ef(r.state,H0,t),!t)return;let s=r.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:n}=r.inputState,a=i&&n&&nN(r,e)?{from:n.from,to:n.to}:null,o={from:s,insert:t},l=r.state.changes(a?[a,o]:o);r.focus(),r.dispatch({changes:l,selection:{anchor:l.mapPos(s,-1),head:l.mapPos(s,1)},userEvent:a?"move.drop":"input.drop"}),r.inputState.draggedContent=null}kr.drop=(r,e)=>{if(!e.dataTransfer)return!1;if(r.state.readOnly)return!0;let t=e.dataTransfer.files;if(t&&t.length){let i=Array(t.length),s=0,n=()=>{++s==t.length&&iS(r,e,i.filter(a=>a!=null).join(r.state.lineBreak),!1)};for(let a=0;a<t.length;a++){let o=new FileReader;o.onerror=n,o.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(o.result)||(i[a]=o.result),n()},o.readAsText(t[a])}return!0}else{let i=e.dataTransfer.getData("Text");if(i)return iS(r,e,i,!0),!0}return!1};kr.paste=(r,e)=>{if(r.state.readOnly)return!0;r.observer.flush();let t=uC?null:e.clipboardData;return t?(cC(r,t.getData("text/plain")||t.getData("text/uri-list")),!0):(lN(r),!1)};function fN(r,e){let t=r.dom.parentNode;if(!t)return;let i=t.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=e,i.focus(),i.selectionEnd=e.length,i.selectionStart=0,setTimeout(()=>{i.remove(),r.focus()},50)}function pN(r){let e=[],t=[],i=!1;for(let s of r.selection.ranges)s.empty||(e.push(r.sliceDoc(s.from,s.to)),t.push(s));if(!e.length){let s=-1;for(let{from:n}of r.selection.ranges){let a=r.doc.lineAt(n);a.number>s&&(e.push(a.text),t.push({from:a.from,to:Math.min(r.doc.length,a.to+1)})),s=a.number}i=!0}return{text:ef(r,Y0,e.join(r.lineBreak)),ranges:t,linewise:i}}let dg=null;kr.copy=kr.cut=(r,e)=>{let{text:t,ranges:i,linewise:s}=pN(r.state);if(!t&&!s)return!1;dg=s?t:null,e.type=="cut"&&!r.state.readOnly&&r.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"});let n=uC?null:e.clipboardData;return n?(n.clearData(),n.setData("text/plain",t),!0):(fN(r,t),!1)};const dC=Is.define();function fC(r,e){let t=[];for(let i of r.facet(z2)){let s=i(r,e);s&&t.push(s)}return t.length?r.update({effects:t,annotations:dC.of(!0)}):null}function pC(r){setTimeout(()=>{let e=r.hasFocus;if(e!=r.inputState.notifiedFocused){let t=fC(r.state,e);t?r.dispatch(t):r.update([])}},10)}dr.focus=r=>{r.inputState.lastFocusTime=Date.now(),!r.scrollDOM.scrollTop&&(r.inputState.lastScrollTop||r.inputState.lastScrollLeft)&&(r.scrollDOM.scrollTop=r.inputState.lastScrollTop,r.scrollDOM.scrollLeft=r.inputState.lastScrollLeft),pC(r)};dr.blur=r=>{r.observer.clearSelectionRange(),pC(r)};dr.compositionstart=dr.compositionupdate=r=>{r.observer.editContext||(r.inputState.compositionFirstChange==null&&(r.inputState.compositionFirstChange=!0),r.inputState.composing<0&&(r.inputState.composing=0))};dr.compositionend=r=>{r.observer.editContext||(r.inputState.composing=-1,r.inputState.compositionEndedAt=Date.now(),r.inputState.compositionPendingKey=!0,r.inputState.compositionPendingChange=r.observer.pendingRecords().length>0,r.inputState.compositionFirstChange=null,Oe.chrome&&Oe.android?r.observer.flushSoon():r.inputState.compositionPendingChange?Promise.resolve().then(()=>r.observer.flush()):setTimeout(()=>{r.inputState.composing<0&&r.docView.hasComposition&&r.update([])},50))};dr.contextmenu=r=>{r.inputState.lastContextMenu=Date.now()};kr.beforeinput=(r,e)=>{var t,i;if(e.inputType=="insertReplacementText"&&r.observer.editContext){let n=(t=e.dataTransfer)===null||t===void 0?void 0:t.getData("text/plain"),a=e.getTargetRanges();if(n&&a.length){let o=a[0],l=r.posAtDOM(o.startContainer,o.startOffset),u=r.posAtDOM(o.endContainer,o.endOffset);return J0(r,{from:l,to:u,insert:r.state.toText(n)},null),!0}}let s;if(Oe.chrome&&Oe.android&&(s=oC.find(n=>n.inputType==e.inputType))&&(r.observer.delayAndroidKey(s.key,s.keyCode),s.key=="Backspace"||s.key=="Delete")){let n=((i=window.visualViewport)===null||i===void 0?void 0:i.height)||0;setTimeout(()=>{var a;(((a=window.visualViewport)===null||a===void 0?void 0:a.height)||0)>n+10&&r.hasFocus&&(r.contentDOM.blur(),r.focus())},100)}return Oe.ios&&e.inputType=="deleteContentForward"&&r.observer.flushSoon(),Oe.safari&&e.inputType=="insertText"&&r.inputState.composing>=0&&setTimeout(()=>dr.compositionend(r,e),20),!1};const rS=new Set;function mN(r){rS.has(r)||(rS.add(r),r.addEventListener("copy",()=>{}),r.addEventListener("cut",()=>{}))}const sS=["pre-wrap","normal","pre-line","break-spaces"];let lo=!1;function nS(){lo=!1}class gN{constructor(e){this.lineWrapping=e,this.doc=ze.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,t){let i=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(i+=Math.max(0,Math.ceil((t-e-i*this.lineLength*.5)/this.lineLength))),this.lineHeight*i}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/Math.max(1,this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return sS.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let i=0;i<e.length;i++){let s=e[i];s<0?i++:this.heightSamples[Math.floor(s*10)]||(t=!0,this.heightSamples[Math.floor(s*10)]=!0)}return t}refresh(e,t,i,s,n,a){let o=sS.indexOf(e)>-1,l=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=o;if(this.lineWrapping=o,this.lineHeight=t,this.charWidth=i,this.textHeight=s,this.lineLength=n,l){this.heightSamples={};for(let u=0;u<a.length;u++){let c=a[u];c<0?u++:this.heightSamples[Math.floor(c*10)]=!0}}return l}}class ON{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class jr{constructor(e,t,i,s,n){this.from=e,this.length=t,this.top=i,this.height=s,this._content=n}get type(){return typeof this._content=="number"?Ti.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof cn?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let t=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new jr(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var Ot=(function(r){return r[r.ByPos=0]="ByPos",r[r.ByHeight=1]="ByHeight",r[r.ByPosNoHeight=2]="ByPosNoHeight",r})(Ot||(Ot={}));const hh=.001;class _i{constructor(e,t,i=2){this.length=e,this.height=t,this.flags=i}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>hh&&(lo=!0),this.height=e)}replace(e,t,i){return _i.of(i)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,i,s){let n=this,a=i.doc;for(let o=s.length-1;o>=0;o--){let{fromA:l,toA:u,fromB:c,toB:h}=s[o],f=n.lineAt(l,Ot.ByPosNoHeight,i.setDoc(t),0,0),m=f.to>=u?f:n.lineAt(u,Ot.ByPosNoHeight,i,0,0);for(h+=m.to-u,u=m.to;o>0&&f.from<=s[o-1].toA;)l=s[o-1].fromA,c=s[o-1].fromB,o--,l<f.from&&(f=n.lineAt(l,Ot.ByPosNoHeight,i,0,0));c+=f.from-l,l=f.from;let S=eO.build(i.setDoc(a),e,c,h);n=Kh(n,n.replace(l,u,S))}return n.updateHeight(i,0)}static empty(){return new Xi(0,0)}static of(e){if(e.length==1)return e[0];let t=0,i=e.length,s=0,n=0;for(;;)if(t==i)if(s>n*2){let o=e[t-1];o.break?e.splice(--t,1,o.left,null,o.right):e.splice(--t,1,o.left,o.right),i+=1+o.break,s-=o.size}else if(n>s*2){let o=e[i];o.break?e.splice(i,1,o.left,null,o.right):e.splice(i,1,o.left,o.right),i+=2+o.break,n-=o.size}else break;else if(s<n){let o=e[t++];o&&(s+=o.size)}else{let o=e[--i];o&&(n+=o.size)}let a=0;return e[t-1]==null?(a=1,t--):e[t]==null&&(a=1,i++),new yN(_i.of(e.slice(0,t)),a,_i.of(e.slice(i)))}}function Kh(r,e){return r==e?r:(r.constructor!=e.constructor&&(lo=!0),e)}_i.prototype.size=1;class mC extends _i{constructor(e,t,i){super(e,t),this.deco=i}blockAt(e,t,i,s){return new jr(s,this.length,i,this.height,this.deco||0)}lineAt(e,t,i,s,n){return this.blockAt(0,i,s,n)}forEachLine(e,t,i,s,n,a){e<=n+this.length&&t>=n&&a(this.blockAt(0,i,s,n))}updateHeight(e,t=0,i=!1,s){return s&&s.from<=t&&s.more&&this.setHeight(s.heights[s.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Xi extends mC{constructor(e,t){super(e,t,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,t,i,s){return new jr(s,this.length,i,this.height,this.breaks)}replace(e,t,i){let s=i[0];return i.length==1&&(s instanceof Xi||s instanceof Jt&&s.flags&4)&&Math.abs(this.length-s.length)<10?(s instanceof Jt?s=new Xi(s.length,this.height):s.height=this.height,this.outdated||(s.outdated=!1),s):_i.of(i)}updateHeight(e,t=0,i=!1,s){return s&&s.from<=t&&s.more?this.setHeight(s.heights[s.index++]):(i||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Jt extends _i{constructor(e){super(e,0)}heightMetrics(e,t){let i=e.doc.lineAt(t).number,s=e.doc.lineAt(t+this.length).number,n=s-i+1,a,o=0;if(e.lineWrapping){let l=Math.min(this.height,e.lineHeight*n);a=l/n,this.length>n+1&&(o=(this.height-l)/(this.length-n-1))}else a=this.height/n;return{firstLine:i,lastLine:s,perLine:a,perChar:o}}blockAt(e,t,i,s){let{firstLine:n,lastLine:a,perLine:o,perChar:l}=this.heightMetrics(t,s);if(t.lineWrapping){let u=s+(e<t.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-i)/this.height))*this.length)),c=t.doc.lineAt(u),h=o+c.length*l,f=Math.max(i,e-h/2);return new jr(c.from,c.length,f,h,0)}else{let u=Math.max(0,Math.min(a-n,Math.floor((e-i)/o))),{from:c,length:h}=t.doc.line(n+u);return new jr(c,h,i+o*u,o,0)}}lineAt(e,t,i,s,n){if(t==Ot.ByHeight)return this.blockAt(e,i,s,n);if(t==Ot.ByPosNoHeight){let{from:m,to:S}=i.doc.lineAt(e);return new jr(m,S-m,0,0,0)}let{firstLine:a,perLine:o,perChar:l}=this.heightMetrics(i,n),u=i.doc.lineAt(e),c=o+u.length*l,h=u.number-a,f=s+o*h+l*(u.from-n-h);return new jr(u.from,u.length,Math.max(s,Math.min(f,s+this.height-c)),c,0)}forEachLine(e,t,i,s,n,a){e=Math.max(e,n),t=Math.min(t,n+this.length);let{firstLine:o,perLine:l,perChar:u}=this.heightMetrics(i,n);for(let c=e,h=s;c<=t;){let f=i.doc.lineAt(c);if(c==e){let S=f.number-o;h+=l*S+u*(e-n-S)}let m=l+u*f.length;a(new jr(f.from,f.length,h,m,0)),h+=m,c=f.to+1}}replace(e,t,i){let s=this.length-t;if(s>0){let n=i[i.length-1];n instanceof Jt?i[i.length-1]=new Jt(n.length+s):i.push(null,new Jt(s-1))}if(e>0){let n=i[0];n instanceof Jt?i[0]=new Jt(e+n.length):i.unshift(new Jt(e-1),null)}return _i.of(i)}decomposeLeft(e,t){t.push(new Jt(e-1),null)}decomposeRight(e,t){t.push(null,new Jt(this.length-e-1))}updateHeight(e,t=0,i=!1,s){let n=t+this.length;if(s&&s.from<=t+this.length&&s.more){let a=[],o=Math.max(t,s.from),l=-1;for(s.from>t&&a.push(new Jt(s.from-t-1).updateHeight(e,t));o<=n&&s.more;){let c=e.doc.lineAt(o).length;a.length&&a.push(null);let h=s.heights[s.index++];l==-1?l=h:Math.abs(h-l)>=hh&&(l=-2);let f=new Xi(c,h);f.outdated=!1,a.push(f),o+=c+1}o<=n&&a.push(null,new Jt(n-o).updateHeight(e,o));let u=_i.of(a);return(l<0||Math.abs(u.height-this.height)>=hh||Math.abs(l-this.heightMetrics(e,t).perLine)>=hh)&&(lo=!0),Kh(this,u)}else(i||this.outdated)&&(this.setHeight(e.heightForGap(t,t+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class yN extends _i{constructor(e,t,i){super(e.length+t+i.length,e.height+i.height,t|(e.outdated||i.outdated?2:0)),this.left=e,this.right=i,this.size=e.size+i.size}get break(){return this.flags&1}blockAt(e,t,i,s){let n=i+this.left.height;return e<n?this.left.blockAt(e,t,i,s):this.right.blockAt(e,t,n,s+this.left.length+this.break)}lineAt(e,t,i,s,n){let a=s+this.left.height,o=n+this.left.length+this.break,l=t==Ot.ByHeight?e<a:e<o,u=l?this.left.lineAt(e,t,i,s,n):this.right.lineAt(e,t,i,a,o);if(this.break||(l?u.to<o:u.from>o))return u;let c=t==Ot.ByPosNoHeight?Ot.ByPosNoHeight:Ot.ByPos;return l?u.join(this.right.lineAt(o,c,i,a,o)):this.left.lineAt(o,c,i,s,n).join(u)}forEachLine(e,t,i,s,n,a){let o=s+this.left.height,l=n+this.left.length+this.break;if(this.break)e<l&&this.left.forEachLine(e,t,i,s,n,a),t>=l&&this.right.forEachLine(e,t,i,o,l,a);else{let u=this.lineAt(l,Ot.ByPos,i,s,n);e<u.from&&this.left.forEachLine(e,u.from-1,i,s,n,a),u.to>=e&&u.from<=t&&a(u),t>u.to&&this.right.forEachLine(u.to+1,t,i,o,l,a)}}replace(e,t,i){let s=this.left.length+this.break;if(t<s)return this.balanced(this.left.replace(e,t,i),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-s,t-s,i));let n=[];e>0&&this.decomposeLeft(e,n);let a=n.length;for(let o of i)n.push(o);if(e>0&&aS(n,a-1),t<this.length){let o=n.length;this.decomposeRight(t,n),aS(n,o)}return _i.of(n)}decomposeLeft(e,t){let i=this.left.length;if(e<=i)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(i++,e>=i&&t.push(null)),e>i&&this.right.decomposeLeft(e-i,t)}decomposeRight(e,t){let i=this.left.length,s=i+this.break;if(e>=s)return this.right.decomposeRight(e-s,t);e<i&&this.left.decomposeRight(e,t),this.break&&e<s&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?_i.of(this.break?[e,null,t]:[e,t]):(this.left=Kh(this.left,e),this.right=Kh(this.right,t),this.setHeight(e.height+t.height),this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,i=!1,s){let{left:n,right:a}=this,o=t+n.length+this.break,l=null;return s&&s.from<=t+n.length&&s.more?l=n=n.updateHeight(e,t,i,s):n.updateHeight(e,t,i),s&&s.from<=o+a.length&&s.more?l=a=a.updateHeight(e,o,i,s):a.updateHeight(e,o,i),l?this.balanced(n,a):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function aS(r,e){let t,i;r[e]==null&&(t=r[e-1])instanceof Jt&&(i=r[e+1])instanceof Jt&&r.splice(e-1,3,new Jt(t.length+1+i.length))}const bN=5;class eO{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let i=Math.min(t,this.lineEnd),s=this.nodes[this.nodes.length-1];s instanceof Xi?s.length+=i-this.pos:(i>this.pos||!this.isCovered)&&this.nodes.push(new Xi(i-this.pos,-1)),this.writtenTo=i,t>i&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,i){if(e<t||i.heightRelevant){let s=i.widget?i.widget.estimatedHeight:0,n=i.widget?i.widget.lineBreaks:0;s<0&&(s=this.oracle.lineHeight);let a=t-e;i.block?this.addBlock(new mC(a,s,i)):(a||n||s>=bN)&&this.addLineDeco(s,n,a)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new Xi(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let i=new Jt(t-e);return this.oracle.doc.lineAt(e).to==t&&(i.flags|=4),i}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof Xi)return e;let t=new Xi(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine();let t=e.deco;t&&t.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,t&&t.endSide>0&&(this.covering=e)}addLineDeco(e,t,i){let s=this.ensureLine();s.length+=i,s.collapsed+=i,s.widgetHeight=Math.max(s.widgetHeight,e),s.breaks+=t,this.writtenTo=this.pos=this.pos+i}finish(e){let t=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(t instanceof Xi)&&!this.isCovered?this.nodes.push(new Xi(0,-1)):(this.writtenTo<this.pos||t==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let i=e;for(let s of this.nodes)s instanceof Xi&&s.updateHeight(this.oracle,i),i+=s?s.length:1;return this.nodes}static build(e,t,i,s){let n=new eO(i,e);return Ye.spans(t,i,s,n,0),n.finish(i)}}function vN(r,e,t){let i=new SN;return Ye.compare(r,e,t,i,0),i.changes}class SN{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,i,s){(e<t||i&&i.heightRelevant||s&&s.heightRelevant)&&ch(e,t,this.changes,5)}}function TN(r,e){let t=r.getBoundingClientRect(),i=r.ownerDocument,s=i.defaultView||window,n=Math.max(0,t.left),a=Math.min(s.innerWidth,t.right),o=Math.max(0,t.top),l=Math.min(s.innerHeight,t.bottom);for(let u=r.parentNode;u&&u!=i.body;)if(u.nodeType==1){let c=u,h=window.getComputedStyle(c);if((c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth)&&h.overflow!="visible"){let f=c.getBoundingClientRect();n=Math.max(n,f.left),a=Math.min(a,f.right),o=Math.max(o,f.top),l=Math.min(u==r.parentNode?s.innerHeight:l,f.bottom)}u=h.position=="absolute"||h.position=="fixed"?c.offsetParent:c.parentNode}else if(u.nodeType==11)u=u.host;else break;return{left:n-t.left,right:Math.max(n,a)-t.left,top:o-(t.top+e),bottom:Math.max(o,l)-(t.top+e)}}function _N(r){let e=r.getBoundingClientRect(),t=r.ownerDocument.defaultView||window;return e.left<t.innerWidth&&e.right>0&&e.top<t.innerHeight&&e.bottom>0}function xN(r,e){let t=r.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}class Tp{constructor(e,t,i,s){this.from=e,this.to=t,this.size=i,this.displaySize=s}static same(e,t){if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++){let s=e[i],n=t[i];if(s.from!=n.from||s.to!=n.to||s.size!=n.size)return!1}return!0}draw(e,t){return Ae.replace({widget:new wN(this.displaySize*(t?e.scaleY:e.scaleX),t)}).range(this.from,this.to)}}class wN extends Rs{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class oS{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=lS,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=yt.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(G0).some(i=>typeof i!="function"&&i.class=="cm-lineWrapping");this.heightOracle=new gN(t),this.stateDeco=e.facet(Hl).filter(i=>typeof i!="function"),this.heightMap=_i.empty().applyChanges(this.stateDeco,ze.empty,this.heightOracle.setDoc(e.doc),[new lr(0,0,0,e.doc.length)]);for(let i=0;i<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());i++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Ae.set(this.lineGaps.map(i=>i.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let i=0;i<=1;i++){let s=i?t.head:t.anchor;if(!e.some(({from:n,to:a})=>s>=n&&s<=a)){let{from:n,to:a}=this.lineBlockAt(s);e.push(new Qc(n,a))}}return this.viewports=e.sort((i,s)=>i.from-s.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?lS:new tO(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(ml(e,this.scaler))})}update(e,t=null){this.state=e.state;let i=this.stateDeco;this.stateDeco=this.state.facet(Hl).filter(c=>typeof c!="function");let s=e.changedRanges,n=lr.extendWithRanges(s,vN(i,this.stateDeco,e?e.changes:Vt.empty(this.state.doc.length))),a=this.heightMap.height,o=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);nS(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),n),(this.heightMap.height!=a||lo)&&(e.flags|=2),o?(this.scrollAnchorPos=e.changes.mapPos(o.from,-1),this.scrollAnchorHeight=o.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=a);let l=n.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<l.from||t.range.head>l.to)||!this.viewportIsAppropriate(l))&&(l=this.getViewport(0,t));let u=l.from!=this.viewport.from||l.to!=this.viewport.to;this.viewport=l,e.flags|=this.updateForViewport(),(u||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(W2)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,i=window.getComputedStyle(t),s=this.heightOracle,n=i.whiteSpace;this.defaultTextDirection=i.direction=="rtl"?yt.RTL:yt.LTR;let a=this.heightOracle.mustRefreshForWrapping(n),o=t.getBoundingClientRect(),l=a||this.mustMeasureContent||this.contentDOMHeight!=o.height;this.contentDOMHeight=o.height,this.mustMeasureContent=!1;let u=0,c=0;if(o.width&&o.height){let{scaleX:T,scaleY:w}=_2(t,o);(T>.005&&Math.abs(this.scaleX-T)>.005||w>.005&&Math.abs(this.scaleY-w)>.005)&&(this.scaleX=T,this.scaleY=w,u|=16,a=l=!0)}let h=(parseInt(i.paddingTop)||0)*this.scaleY,f=(parseInt(i.paddingBottom)||0)*this.scaleY;(this.paddingTop!=h||this.paddingBottom!=f)&&(this.paddingTop=h,this.paddingBottom=f,u|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(s.lineWrapping&&(l=!0),this.editorWidth=e.scrollDOM.clientWidth,u|=16);let m=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=m&&(this.scrollAnchorHeight=-1,this.scrollTop=m),this.scrolledToBottom=C2(e.scrollDOM);let S=(this.printing?xN:TN)(t,this.paddingTop),y=S.top-this.pixelViewport.top,E=S.bottom-this.pixelViewport.bottom;this.pixelViewport=S;let C=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(C!=this.inView&&(this.inView=C,C&&(l=!0)),!this.inView&&!this.scrollTarget&&!_N(e.dom))return 0;let _=o.width;if((this.contentDOMWidth!=_||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=o.width,this.editorHeight=e.scrollDOM.clientHeight,u|=16),l){let T=e.docView.measureVisibleLineHeights(this.viewport);if(s.mustRefreshForHeights(T)&&(a=!0),a||s.lineWrapping&&Math.abs(_-this.contentDOMWidth)>s.charWidth){let{lineHeight:w,charWidth:A,textHeight:I}=e.docView.measureTextSize();a=w>0&&s.refresh(n,w,A,I,Math.max(5,_/A),T),a&&(e.docView.minWidth=0,u|=16)}y>0&&E>0?c=Math.max(y,E):y<0&&E<0&&(c=Math.min(y,E)),nS();for(let w of this.viewports){let A=w.from==this.viewport.from?T:e.docView.measureVisibleLineHeights(w);this.heightMap=(a?_i.empty().applyChanges(this.stateDeco,ze.empty,this.heightOracle,[new lr(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(s,0,a,new ON(w.from,A))}lo&&(u|=2)}let b=!this.viewportIsAppropriate(this.viewport,c)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return b&&(u&2&&(u|=this.updateScaler()),this.viewport=this.getViewport(c,this.scrollTarget),u|=this.updateForViewport()),(u&2||b)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(a?[]:this.lineGaps,e)),u|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),u}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let i=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),s=this.heightMap,n=this.heightOracle,{visibleTop:a,visibleBottom:o}=this,l=new Qc(s.lineAt(a-i*1e3,Ot.ByHeight,n,0,0).from,s.lineAt(o+(1-i)*1e3,Ot.ByHeight,n,0,0).to);if(t){let{head:u}=t.range;if(u<l.from||u>l.to){let c=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),h=s.lineAt(u,Ot.ByPos,n,0,0),f;t.y=="center"?f=(h.top+h.bottom)/2-c/2:t.y=="start"||t.y=="nearest"&&u<l.from?f=h.top:f=h.bottom-c,l=new Qc(s.lineAt(f-1e3/2,Ot.ByHeight,n,0,0).from,s.lineAt(f+c+1e3/2,Ot.ByHeight,n,0,0).to)}}return l}mapViewport(e,t){let i=t.mapPos(e.from,-1),s=t.mapPos(e.to,1);return new Qc(this.heightMap.lineAt(i,Ot.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(s,Ot.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:t},i=0){if(!this.inView)return!0;let{top:s}=this.heightMap.lineAt(e,Ot.ByPos,this.heightOracle,0,0),{bottom:n}=this.heightMap.lineAt(t,Ot.ByPos,this.heightOracle,0,0),{visibleTop:a,visibleBottom:o}=this;return(e==0||s<=a-Math.max(10,Math.min(-i,250)))&&(t==this.state.doc.length||n>=o+Math.max(10,Math.min(i,250)))&&s>a-2*1e3&&n<o+2*1e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let i=[];for(let s of e)t.touchesRange(s.from,s.to)||i.push(new Tp(t.mapPos(s.from),t.mapPos(s.to),s.size,s.displaySize));return i}ensureLineGaps(e,t){let i=this.heightOracle.lineWrapping,s=i?1e4:2e3,n=s>>1,a=s<<1;if(this.defaultTextDirection!=yt.LTR&&!i)return[];let o=[],l=(c,h,f,m)=>{if(h-c<n)return;let S=this.state.selection.main,y=[S.from];S.empty||y.push(S.to);for(let C of y)if(C>c&&C<h){l(c,C-10,f,m),l(C+10,h,f,m);return}let E=kN(e,C=>C.from>=f.from&&C.to<=f.to&&Math.abs(C.from-c)<n&&Math.abs(C.to-h)<n&&!y.some(_=>C.from<_&&C.to>_));if(!E){if(h<f.to&&t&&i&&t.visibleRanges.some(b=>b.from<=h&&b.to>=h)){let b=t.moveToLineBoundary(ie.cursor(h),!1,!0).head;b>c&&(h=b)}let C=this.gapSize(f,c,h,m),_=i||C<2e6?C:2e6;E=new Tp(c,h,C,_)}o.push(E)},u=c=>{if(c.length<a||c.type!=Ti.Text)return;let h=CN(c.from,c.to,this.stateDeco);if(h.total<a)return;let f=this.scrollTarget?this.scrollTarget.range.head:null,m,S;if(i){let y=s/this.heightOracle.lineLength*this.heightOracle.lineHeight,E,C;if(f!=null){let _=Bc(h,f),b=((this.visibleBottom-this.visibleTop)/2+y)/c.height;E=_-b,C=_+b}else E=(this.visibleTop-c.top-y)/c.height,C=(this.visibleBottom-c.top+y)/c.height;m=$c(h,E),S=$c(h,C)}else{let y=h.total*this.heightOracle.charWidth,E=s*this.heightOracle.charWidth,C=0;if(y>2e6)for(let A of e)A.from>=c.from&&A.from<c.to&&A.size!=A.displaySize&&A.from*this.heightOracle.charWidth+C<this.pixelViewport.left&&(C=A.size-A.displaySize);let _=this.pixelViewport.left+C,b=this.pixelViewport.right+C,T,w;if(f!=null){let A=Bc(h,f),I=((b-_)/2+E)/y;T=A-I,w=A+I}else T=(_-E)/y,w=(b+E)/y;m=$c(h,T),S=$c(h,w)}m>c.from&&l(c.from,m,c,h),S<c.to&&l(S,c.to,c,h)};for(let c of this.viewportLines)Array.isArray(c.type)?c.type.forEach(u):u(c);return o}gapSize(e,t,i,s){let n=Bc(s,i)-Bc(s,t);return this.heightOracle.lineWrapping?e.height*n:s.total*this.heightOracle.charWidth*n}updateLineGaps(e){Tp.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Ae.set(e.map(t=>t.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let t=this.stateDeco;this.lineGaps.length&&(t=t.concat(this.lineGapDeco));let i=[];Ye.spans(t,this.viewport.from,this.viewport.to,{span(n,a){i.push({from:n,to:a})},point(){}},20);let s=0;if(i.length!=this.visibleRanges.length)s=12;else for(let n=0;n<i.length&&!(s&8);n++){let a=this.visibleRanges[n],o=i[n];(a.from!=o.from||a.to!=o.to)&&(s|=4,e&&e.mapPos(a.from,-1)==o.from&&e.mapPos(a.to,1)==o.to||(s|=8))}return this.visibleRanges=i,s}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||ml(this.heightMap.lineAt(e,Ot.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(t=>t.top<=e&&t.bottom>=e)||ml(this.heightMap.lineAt(this.scaler.fromDOM(e),Ot.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let t=this.lineBlockAtHeight(e+8);return t.from>=this.viewport.from||this.viewportLines[0].top-e>200?t:this.viewportLines[0]}elementAtHeight(e){return ml(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Qc{constructor(e,t){this.from=e,this.to=t}}function CN(r,e,t){let i=[],s=r,n=0;return Ye.spans(t,r,e,{span(){},point(a,o){a>s&&(i.push({from:s,to:a}),n+=a-s),s=o}},20),s<e&&(i.push({from:s,to:e}),n+=e-s),{total:n,ranges:i}}function $c({total:r,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let i=Math.floor(r*t);for(let s=0;;s++){let{from:n,to:a}=e[s],o=a-n;if(i<=o)return n+i;i-=o}}function Bc(r,e){let t=0;for(let{from:i,to:s}of r.ranges){if(e<=s){t+=e-i;break}t+=s-i}return t/r.total}function kN(r,e){for(let t of r)if(e(t))return t}const lS={toDOM(r){return r},fromDOM(r){return r},scale:1,eq(r){return r==this}};class tO{constructor(e,t,i){let s=0,n=0,a=0;this.viewports=i.map(({from:o,to:l})=>{let u=t.lineAt(o,Ot.ByPos,e,0,0).top,c=t.lineAt(l,Ot.ByPos,e,0,0).bottom;return s+=c-u,{from:o,to:l,top:u,bottom:c,domTop:0,domBottom:0}}),this.scale=(7e6-s)/(t.height-s);for(let o of this.viewports)o.domTop=a+(o.top-n)*this.scale,a=o.domBottom=o.domTop+(o.bottom-o.top),n=o.bottom}toDOM(e){for(let t=0,i=0,s=0;;t++){let n=t<this.viewports.length?this.viewports[t]:null;if(!n||e<n.top)return s+(e-i)*this.scale;if(e<=n.bottom)return n.domTop+(e-n.top);i=n.bottom,s=n.domBottom}}fromDOM(e){for(let t=0,i=0,s=0;;t++){let n=t<this.viewports.length?this.viewports[t]:null;if(!n||e<n.domTop)return i+(e-s)/this.scale;if(e<=n.domBottom)return n.top+(e-n.domTop);i=n.bottom,s=n.domBottom}}eq(e){return e instanceof tO?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((t,i)=>t.from==e.viewports[i].from&&t.to==e.viewports[i].to):!1}}function ml(r,e){if(e.scale==1)return r;let t=e.toDOM(r.top),i=e.toDOM(r.bottom);return new jr(r.from,r.length,t,i-t,Array.isArray(r._content)?r._content.map(s=>ml(s,e)):r._content)}const Nc=ve.define({combine:r=>r.join(" ")}),fg=ve.define({combine:r=>r.indexOf(!0)>-1}),pg=ln.newName(),gC=ln.newName(),OC=ln.newName(),yC={"&light":"."+gC,"&dark":"."+OC};function mg(r,e,t){return new ln(e,{finish(i){return/&/.test(i)?i.replace(/&\w*/,s=>{if(s=="&")return r;if(!t||!t[s])throw new RangeError(`Unsupported selector: ${s}`);return t[s]}):r+" "+i}})}const EN=mg("."+pg,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},yC),AN={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},_p=Oe.ie&&Oe.ie_version<=11;class PN{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new dB,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(t=>{for(let i of t)this.queue.push(i);(Oe.ie&&Oe.ie_version<=11||Oe.ios&&e.composing)&&t.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&Oe.android&&e.constructor.EDIT_CONTEXT!==!1&&!(Oe.chrome&&Oe.chrome_version<126)&&(this.editContext=new MN(e),e.state.facet(xs)&&(e.contentDOM.editContext=this.editContext.editContext)),_p&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var t;((t=this.view.docView)===null||t===void 0?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,i)=>t!=e[i]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:i}=this,s=this.selectionRange;if(i.state.facet(xs)?i.root.activeElement!=this.dom:!uh(this.dom,s))return;let n=s.anchorNode&&i.docView.nearest(s.anchorNode);if(n&&n.ignoreEvent(e)){t||(this.selectionChanged=!1);return}(Oe.ie&&Oe.ie_version<=11||Oe.android&&Oe.chrome)&&!i.state.selection.main.empty&&s.focusNode&&Al(s.focusNode,s.focusOffset,s.anchorNode,s.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=Zl(e.root);if(!t)return!1;let i=Oe.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&DN(this.view,t)||t;if(!i||this.selectionRange.eq(i))return!1;let s=uh(this.dom,i);return s&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&pB(this.dom,i)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(i),s&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let i=this.dom;i;)if(i.nodeType==1)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==i?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);for(let i of this.scrollTargets=t)i.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,AN),_p&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),_p&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var i;if(!this.delayedAndroidKey){let s=()=>{let n=this.delayedAndroidKey;n&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=n.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&n.force&&Fa(this.dom,n.key,n.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(s)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(!((i=this.delayedAndroidKey)===null||i===void 0)&&i.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let t=-1,i=-1,s=!1;for(let n of e){let a=this.readMutation(n);a&&(a.typeOver&&(s=!0),t==-1?{from:t,to:i}=a:(t=Math.min(a.from,t),i=Math.max(a.to,i)))}return{from:t,to:i,typeOver:s}}readChange(){let{from:e,to:t,typeOver:i}=this.processRecords(),s=this.selectionChanged&&uh(this.dom,this.selectionRange);if(e<0&&!s)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let n=new HB(this.view,e,t,i);return this.view.docView.domChanged={newSel:n.newSel?n.newSel.main:null},n}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return this.view.requestMeasure(),!1;let i=this.view.state,s=nC(this.view,t);return this.view.state==i&&(t.domChanged||t.newSel&&!t.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),s}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty(e.type=="attributes"),e.type=="attributes"&&(t.flags|=4),e.type=="childList"){let i=uS(t,e.previousSibling||e.target.previousSibling,-1),s=uS(t,e.nextSibling||e.target.nextSibling,1);return{from:i?t.posAfter(i):t.posAtStart,to:s?t.posBefore(s):t.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(xs)!=e.state.facet(xs)&&(e.view.contentDOM.editContext=e.state.facet(xs)?this.editContext.editContext:null))}destroy(){var e,t,i;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(t=this.gapIntersection)===null||t===void 0||t.disconnect(),(i=this.resizeScroll)===null||i===void 0||i.disconnect();for(let s of this.scrollTargets)s.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function uS(r,e,t){for(;e;){let i=at.get(e);if(i&&i.parent==r)return i;let s=e.parentNode;e=s!=r.dom?s:t>0?e.nextSibling:e.previousSibling}return null}function cS(r,e){let t=e.startContainer,i=e.startOffset,s=e.endContainer,n=e.endOffset,a=r.docView.domAtPos(r.state.selection.main.anchor);return Al(a.node,a.offset,s,n)&&([t,i,s,n]=[s,n,t,i]),{anchorNode:t,anchorOffset:i,focusNode:s,focusOffset:n}}function DN(r,e){if(e.getComposedRanges){let s=e.getComposedRanges(r.root)[0];if(s)return cS(r,s)}let t=null;function i(s){s.preventDefault(),s.stopImmediatePropagation(),t=s.getTargetRanges()[0]}return r.contentDOM.addEventListener("beforeinput",i,!0),r.dom.ownerDocument.execCommand("indent"),r.contentDOM.removeEventListener("beforeinput",i,!0),t?cS(r,t):null}class MN{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let t=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=i=>{let s=e.state.selection.main,{anchor:n,head:a}=s,o=this.toEditorPos(i.updateRangeStart),l=this.toEditorPos(i.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:i.updateRangeStart,editorBase:o,drifted:!1});let u=l-o>i.text.length;o==this.from&&n<this.from?o=n:l==this.to&&n>this.to&&(l=n);let c=aC(e.state.sliceDoc(o,l),i.text,(u?s.from:s.to)-o,u?"end":null);if(!c){let f=ie.single(this.toEditorPos(i.selectionStart),this.toEditorPos(i.selectionEnd));f.main.eq(s)||e.dispatch({selection:f,userEvent:"select"});return}let h={from:c.from+o,to:c.toA+o,insert:ze.of(i.text.slice(c.from,c.toB).split(`
`))};if((Oe.mac||Oe.android)&&h.from==a-1&&/^\. ?$/.test(i.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(h={from:o,to:l,insert:ze.of([i.text.replace("."," ")])}),this.pendingContextChange=h,!e.state.readOnly){let f=this.to-this.from+(h.to-h.from+h.insert.length);J0(e,h,ie.single(this.toEditorPos(i.selectionStart,f),this.toEditorPos(i.selectionEnd,f)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state)),h.from<h.to&&!h.insert.length&&e.inputState.composing>=0&&!/[\\p{Alphabetic}\\p{Number}_]/.test(t.text.slice(Math.max(0,i.updateRangeStart-1),Math.min(t.text.length,i.updateRangeStart+1)))&&this.handlers.compositionend(i)},this.handlers.characterboundsupdate=i=>{let s=[],n=null;for(let a=this.toEditorPos(i.rangeStart),o=this.toEditorPos(i.rangeEnd);a<o;a++){let l=e.coordsForChar(a);n=l&&new DOMRect(l.left,l.top,l.right-l.left,l.bottom-l.top)||n||new DOMRect,s.push(n)}t.updateCharacterBounds(i.rangeStart,s)},this.handlers.textformatupdate=i=>{let s=[];for(let n of i.getTextFormats()){let a=n.underlineStyle,o=n.underlineThickness;if(!/none/i.test(a)&&!/none/i.test(o)){let l=this.toEditorPos(n.rangeStart),u=this.toEditorPos(n.rangeEnd);if(l<u){let c=`text-decoration: underline ${/^[a-z]/.test(a)?a+" ":a=="Dashed"?"dashed ":a=="Squiggle"?"wavy ":""}${/thin/i.test(o)?1:2}px`;s.push(Ae.mark({attributes:{style:c}}).range(l,u))}}}e.dispatch({effects:Y2.of(Ae.set(s))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:i}=this.composing;this.composing=null,i&&this.reset(e.state)}};for(let i in this.handlers)t.addEventListener(i,this.handlers[i]);this.measureReq={read:i=>{this.editContext.updateControlBounds(i.contentDOM.getBoundingClientRect());let s=Zl(i.root);s&&s.rangeCount&&this.editContext.updateSelectionBounds(s.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let t=0,i=!1,s=this.pendingContextChange;return e.changes.iterChanges((n,a,o,l,u)=>{if(i)return;let c=u.length-(a-n);if(s&&a>=s.to)if(s.from==n&&s.to==a&&s.insert.eq(u)){s=this.pendingContextChange=null,t+=c,this.to+=c;return}else s=null,this.revertPending(e.state);if(n+=t,a+=t,a<=this.from)this.from+=c,this.to+=c;else if(n<this.to){if(n<this.from||a>this.to||this.to-this.from+u.length>3e4){i=!0;return}this.editContext.updateText(this.toContextPos(n),this.toContextPos(a),u.toString()),this.to+=c}t+=c}),s&&!i&&this.revertPending(e.state),!i}update(e){let t=this.pendingContextChange,i=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(i.from,i.to)&&e.transactions.some(s=>!s.isUserEvent("input.type")&&s.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||t)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:t}=e.selection.main;this.from=Math.max(0,t-1e4),this.to=Math.min(e.doc.length,t+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let t=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(t.from),this.toContextPos(t.from+t.insert.length),e.doc.sliceString(t.from,t.to))}setSelection(e){let{main:t}=e.selection,i=this.toContextPos(Math.max(this.from,Math.min(this.to,t.anchor))),s=this.toContextPos(t.head);(this.editContext.selectionStart!=i||this.editContext.selectionEnd!=s)&&this.editContext.updateSelection(i,s)}rangeIsValid(e){let{head:t}=e.selection.main;return!(this.from>0&&t-this.from<500||this.to<e.doc.length&&this.to-t<500||this.to-this.from>1e4*3)}toEditorPos(e,t=this.to-this.from){e=Math.min(e,t);let i=this.composing;return i&&i.drifted?i.editorBase+(e-i.contextBase):e+this.from}toContextPos(e){let t=this.composing;return t&&t.drifted?t.contextBase+(e-t.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class me{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var t;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:i}=e;this.dispatchTransactions=e.dispatchTransactions||i&&(s=>s.forEach(n=>i(n,this)))||(s=>this.update(s)),this.dispatch=this.dispatch.bind(this),this._root=e.root||fB(e.parent)||document,this.viewState=new oS(e.state||He.create(e)),e.scrollTo&&e.scrollTo.is(Ic)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(_a).map(s=>new bp(s));for(let s of this.plugins)s.update(this);this.observer=new PN(this),this.inputState=new JB(this),this.inputState.ensureHandlers(this.plugins),this.docView=new qv(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((t=document.fonts)===null||t===void 0)&&t.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let t=e.length==1&&e[0]instanceof Ut?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(t,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,i=!1,s,n=this.state;for(let f of e){if(f.startState!=n)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");n=f.state}if(this.destroyed){this.viewState.state=n;return}let a=this.hasFocus,o=0,l=null;e.some(f=>f.annotation(dC))?(this.inputState.notifiedFocused=a,o=1):a!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=a,l=fC(n,a),l||(o=1));let u=this.observer.delayedAndroidKey,c=null;if(u?(this.observer.clearDelayedAndroidKey(),c=this.observer.readChange(),(c&&!this.state.doc.eq(n.doc)||!this.state.selection.eq(n.selection))&&(c=null)):this.observer.clear(),n.facet(He.phrases)!=this.state.facet(He.phrases))return this.setState(n);s=Gh.create(this,n,e),s.flags|=o;let h=this.viewState.scrollTarget;try{this.updateState=2;for(let f of e){if(h&&(h=h.map(f.changes)),f.scrollIntoView){let{main:m}=f.state.selection;h=new Ua(m.empty?m:ie.cursor(m.head,m.head>m.anchor?-1:1))}for(let m of f.effects)m.is(Ic)&&(h=m.value.clip(this.state))}this.viewState.update(s,h),this.bidiCache=Jh.update(this.bidiCache,s.changes),s.empty||(this.updatePlugins(s),this.inputState.update(s)),t=this.docView.update(s),this.state.facet(fl)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(f=>f.isUserEvent("select.pointer")))}finally{this.updateState=0}if(s.startState.facet(Nc)!=s.state.facet(Nc)&&(this.viewState.mustMeasureContent=!0),(t||i||h||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),t&&this.docViewUpdate(),!s.empty)for(let f of this.state.facet(ug))try{f(s)}catch(m){Ii(this.state,m,"update listener")}(l||c)&&Promise.resolve().then(()=>{l&&this.state==l.startState&&this.dispatch(l),c&&!nC(this,c)&&u.force&&Fa(this.contentDOM,u.key,u.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let i of this.plugins)i.destroy(this);this.viewState=new oS(e),this.plugins=e.facet(_a).map(i=>new bp(i)),this.pluginMap.clear();for(let i of this.plugins)i.update(this);this.docView.destroy(),this.docView=new qv(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(_a),i=e.state.facet(_a);if(t!=i){let s=[];for(let n of i){let a=t.indexOf(n);if(a<0)s.push(new bp(n));else{let o=this.plugins[a];o.mustUpdate=e,s.push(o)}}for(let n of this.plugins)n.mustUpdate!=e&&n.destroy(this);this.plugins=s,this.pluginMap.clear()}else for(let s of this.plugins)s.mustUpdate=e;for(let s=0;s<this.plugins.length;s++)this.plugins[s].update(this);t!=i&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let t=e.value;if(t&&t.docViewUpdate)try{t.docViewUpdate(this)}catch(i){Ii(this.state,i,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,i=this.scrollDOM,s=i.scrollTop*this.scaleY,{scrollAnchorPos:n,scrollAnchorHeight:a}=this.viewState;Math.abs(s-this.viewState.scrollTop)>1&&(a=-1),this.viewState.scrollAnchorHeight=-1;try{for(let o=0;;o++){if(a<0)if(C2(i))n=-1,a=this.viewState.heightMap.height;else{let m=this.viewState.scrollAnchorAt(s);n=m.from,a=m.top}this.updateState=1;let l=this.viewState.measure(this);if(!l&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(o>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let u=[];l&4||([this.measureRequests,u]=[u,this.measureRequests]);let c=u.map(m=>{try{return m.read(this)}catch(S){return Ii(this.state,S),hS}}),h=Gh.create(this,this.state,[]),f=!1;h.flags|=l,t?t.flags|=l:t=h,this.updateState=2,h.empty||(this.updatePlugins(h),this.inputState.update(h),this.updateAttrs(),f=this.docView.update(h),f&&this.docViewUpdate());for(let m=0;m<u.length;m++)if(c[m]!=hS)try{let S=u[m];S.write&&S.write(c[m],this)}catch(S){Ii(this.state,S)}if(f&&this.docView.updateSelection(!0),!h.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,a=-1;continue}else{let S=(n<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(n).top)-a;if(S>1||S<-1){s=s+S,i.scrollTop=s/this.scaleY,a=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let o of this.state.facet(ug))o(t)}get themeClasses(){return pg+" "+(this.state.facet(fg)?OC:gC)+" "+this.state.facet(Nc)}updateAttrs(){let e=dS(this,G2,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(xs)?"true":"false",class:"cm-content",style:`${Oe.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),dS(this,G0,t);let i=this.observer.ignore(()=>{let s=sg(this.contentDOM,this.contentAttrs,t),n=sg(this.dom,this.editorAttrs,e);return s||n});return this.editorAttrs=e,this.contentAttrs=t,i}showAnnouncements(e){let t=!0;for(let i of e)for(let s of i.effects)if(s.is(me.announce)){t&&(this.announceDOM.textContent=""),t=!1;let n=this.announceDOM.appendChild(document.createElement("div"));n.textContent=s.value}}mountStyles(){this.styleModules=this.state.facet(fl);let e=this.state.facet(me.cspNonce);ln.mount(this.root,this.styleModules.concat(EN).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(t===void 0||t&&t.plugin!=e)&&this.pluginMap.set(e,t=this.plugins.find(i=>i.plugin==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,i){return Sp(this,e,Zv(this,e,t,i))}moveByGroup(e,t){return Sp(this,e,Zv(this,e,t,i=>XB(this,e.head,i)))}visualLineSide(e,t){let i=this.bidiSpans(e),s=this.textDirectionAt(e.from),n=i[t?i.length-1:0];return ie.cursor(n.side(t,s)+e.from,n.forward(!t,s)?1:-1)}moveToLineBoundary(e,t,i=!0){return VB(this,e,t,i)}moveVertically(e,t,i){return Sp(this,e,jB(this,e,t,i))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),iC(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let i=this.docView.coordsAt(e,t);if(!i||i.left==i.right)return i;let s=this.state.doc.lineAt(e),n=this.bidiSpans(s),a=n[rn.find(n,e-s.from,-1,t)];return Jd(i,a.dir==yt.LTR==t>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(Z2)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>IN)return N2(e.length);let t=this.textDirectionAt(e.from),i;for(let n of this.bidiCache)if(n.from==e.from&&n.dir==t&&(n.fresh||B2(n.isolates,i=Uv(this,e))))return n.order;i||(i=Uv(this,e));let s=kB(e.text,t,i);return this.bidiCache.push(new Jh(e.from,e.to,t,i,!0,s)),s}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||Oe.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{x2(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return Ic.of(new Ua(typeof e=="number"?ie.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:t}=this.scrollDOM,i=this.viewState.scrollAnchorAt(e);return Ic.of(new Ua(ie.cursor(i.from),"start","start",i.top-e,t,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return qt.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return qt.define(()=>({}),{eventObservers:e})}static theme(e,t){let i=ln.newName(),s=[Nc.of(i),fl.of(mg(`.${i}`,e))];return t&&t.dark&&s.push(fg.of(!0)),s}static baseTheme(e){return Ms.lowest(fl.of(mg("."+pg,e,yC)))}static findFromDOM(e){var t;let i=e.querySelector(".cm-content"),s=i&&at.get(i)||at.get(e);return((t=s==null?void 0:s.rootView)===null||t===void 0?void 0:t.view)||null}}me.styleModule=fl;me.inputHandler=j2;me.clipboardInputFilter=H0;me.clipboardOutputFilter=Y0;me.scrollHandler=H2;me.focusChangeEffect=z2;me.perLineTextDirection=Z2;me.exceptionSink=X2;me.updateListener=ug;me.editable=xs;me.mouseSelectionStyle=V2;me.dragMovesSelection=q2;me.clickAddsSelectionRange=U2;me.decorations=Hl;me.outerDecorations=K2;me.atomicRanges=Nu;me.bidiIsolatedRanges=J2;me.scrollMargins=eC;me.darkTheme=fg;me.cspNonce=ve.define({combine:r=>r.length?r[0]:""});me.contentAttributes=G0;me.editorAttributes=G2;me.lineWrapping=me.contentAttributes.of({class:"cm-lineWrapping"});me.announce=$e.define();const IN=4096,hS={};class Jh{constructor(e,t,i,s,n,a){this.from=e,this.to=t,this.dir=i,this.isolates=s,this.fresh=n,this.order=a}static update(e,t){if(t.empty&&!e.some(n=>n.fresh))return e;let i=[],s=e.length?e[e.length-1].dir:yt.LTR;for(let n=Math.max(0,e.length-10);n<e.length;n++){let a=e[n];a.dir==s&&!t.touchesRange(a.from,a.to)&&i.push(new Jh(t.mapPos(a.from,1),t.mapPos(a.to,-1),a.dir,a.isolates,!1,a.order))}return i}}function dS(r,e,t){for(let i=r.state.facet(e),s=i.length-1;s>=0;s--){let n=i[s],a=typeof n=="function"?n(r):n;a&&rg(a,t)}return t}const RN=Oe.mac?"mac":Oe.windows?"win":Oe.linux?"linux":"key";function LN(r,e){const t=r.split(/-(?!$)/);let i=t[t.length-1];i=="Space"&&(i=" ");let s,n,a,o;for(let l=0;l<t.length-1;++l){const u=t[l];if(/^(cmd|meta|m)$/i.test(u))o=!0;else if(/^a(lt)?$/i.test(u))s=!0;else if(/^(c|ctrl|control)$/i.test(u))n=!0;else if(/^s(hift)?$/i.test(u))a=!0;else if(/^mod$/i.test(u))e=="mac"?o=!0:n=!0;else throw new Error("Unrecognized modifier name: "+u)}return s&&(i="Alt-"+i),n&&(i="Ctrl-"+i),o&&(i="Meta-"+i),a&&(i="Shift-"+i),i}function Fc(r,e,t){return e.altKey&&(r="Alt-"+r),e.ctrlKey&&(r="Ctrl-"+r),e.metaKey&&(r="Meta-"+r),t!==!1&&e.shiftKey&&(r="Shift-"+r),r}const QN=Ms.default(me.domEventHandlers({keydown(r,e){return vC(bC(e.state),r,e,"editor")}})),Fu=ve.define({enables:QN}),fS=new WeakMap;function bC(r){let e=r.facet(Fu),t=fS.get(e);return t||fS.set(e,t=NN(e.reduce((i,s)=>i.concat(s),[]))),t}function $N(r,e,t){return vC(bC(r.state),e,r,t)}let Ys=null;const BN=4e3;function NN(r,e=RN){let t=Object.create(null),i=Object.create(null),s=(a,o)=>{let l=i[a];if(l==null)i[a]=o;else if(l!=o)throw new Error("Key binding "+a+" is used both as a regular binding and as a multi-stroke prefix")},n=(a,o,l,u,c)=>{var h,f;let m=t[a]||(t[a]=Object.create(null)),S=o.split(/ (?!$)/).map(C=>LN(C,e));for(let C=1;C<S.length;C++){let _=S.slice(0,C).join(" ");s(_,!0),m[_]||(m[_]={preventDefault:!0,stopPropagation:!1,run:[b=>{let T=Ys={view:b,prefix:_,scope:a};return setTimeout(()=>{Ys==T&&(Ys=null)},BN),!0}]})}let y=S.join(" ");s(y,!1);let E=m[y]||(m[y]={preventDefault:!1,stopPropagation:!1,run:((f=(h=m._any)===null||h===void 0?void 0:h.run)===null||f===void 0?void 0:f.slice())||[]});l&&E.run.push(l),u&&(E.preventDefault=!0),c&&(E.stopPropagation=!0)};for(let a of r){let o=a.scope?a.scope.split(" "):["editor"];if(a.any)for(let u of o){let c=t[u]||(t[u]=Object.create(null));c._any||(c._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:h}=a;for(let f in c)c[f].run.push(m=>h(m,gg))}let l=a[e]||a.key;if(l)for(let u of o)n(u,l,a.run,a.preventDefault,a.stopPropagation),a.shift&&n(u,"Shift-"+l,a.shift,a.preventDefault,a.stopPropagation)}return t}let gg=null;function vC(r,e,t,i){gg=e;let s=oB(e),n=Pi(s,0),a=Xr(n)==s.length&&s!=" ",o="",l=!1,u=!1,c=!1;Ys&&Ys.view==t&&Ys.scope==i&&(o=Ys.prefix+" ",lC.indexOf(e.keyCode)<0&&(u=!0,Ys=null));let h=new Set,f=E=>{if(E){for(let C of E.run)if(!h.has(C)&&(h.add(C),C(t)))return E.stopPropagation&&(c=!0),!0;E.preventDefault&&(E.stopPropagation&&(c=!0),u=!0)}return!1},m=r[i],S,y;return m&&(f(m[o+Fc(s,e,!a)])?l=!0:a&&(e.altKey||e.metaKey||e.ctrlKey)&&!(Oe.windows&&e.ctrlKey&&e.altKey)&&!(Oe.mac&&e.altKey&&!(e.ctrlKey||e.metaKey))&&(S=un[e.keyCode])&&S!=s?(f(m[o+Fc(S,e,!0)])||e.shiftKey&&(y=zl[e.keyCode])!=s&&y!=S&&f(m[o+Fc(y,e,!1)]))&&(l=!0):a&&e.shiftKey&&f(m[o+Fc(s,e,!0)])&&(l=!0),!l&&f(m._any)&&(l=!0)),u&&(l=!0),l&&c&&e.stopPropagation(),gg=null,l}class Uu{constructor(e,t,i,s,n){this.className=e,this.left=t,this.top=i,this.width=s,this.height=n}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,t){return t.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,t,i){if(i.empty){let s=e.coordsAtPos(i.head,i.assoc||1);if(!s)return[];let n=SC(e);return[new Uu(t,s.left-n.left,s.top-n.top,null,s.bottom-s.top)]}else return FN(e,t,i)}}function SC(r){let e=r.scrollDOM.getBoundingClientRect();return{left:(r.textDirection==yt.LTR?e.left:e.right-r.scrollDOM.clientWidth*r.scaleX)-r.scrollDOM.scrollLeft*r.scaleX,top:e.top-r.scrollDOM.scrollTop*r.scaleY}}function pS(r,e,t,i){let s=r.coordsAtPos(e,t*2);if(!s)return i;let n=r.dom.getBoundingClientRect(),a=(s.top+s.bottom)/2,o=r.posAtCoords({x:n.left+1,y:a}),l=r.posAtCoords({x:n.right-1,y:a});return o==null||l==null?i:{from:Math.max(i.from,Math.min(o,l)),to:Math.min(i.to,Math.max(o,l))}}function FN(r,e,t){if(t.to<=r.viewport.from||t.from>=r.viewport.to)return[];let i=Math.max(t.from,r.viewport.from),s=Math.min(t.to,r.viewport.to),n=r.textDirection==yt.LTR,a=r.contentDOM,o=a.getBoundingClientRect(),l=SC(r),u=a.querySelector(".cm-line"),c=u&&window.getComputedStyle(u),h=o.left+(c?parseInt(c.paddingLeft)+Math.min(0,parseInt(c.textIndent)):0),f=o.right-(c?parseInt(c.paddingRight):0),m=hg(r,i,1),S=hg(r,s,-1),y=m.type==Ti.Text?m:null,E=S.type==Ti.Text?S:null;if(y&&(r.lineWrapping||m.widgetLineBreaks)&&(y=pS(r,i,1,y)),E&&(r.lineWrapping||S.widgetLineBreaks)&&(E=pS(r,s,-1,E)),y&&E&&y.from==E.from&&y.to==E.to)return _(b(t.from,t.to,y));{let w=y?b(t.from,null,y):T(m,!1),A=E?b(null,t.to,E):T(S,!0),I=[];return(y||m).to<(E||S).from-(y&&E?1:0)||m.widgetLineBreaks>1&&w.bottom+r.defaultLineHeight/2<A.top?I.push(C(h,w.bottom,f,A.top)):w.bottom<A.top&&r.elementAtHeight((w.bottom+A.top)/2).type==Ti.Text&&(w.bottom=A.top=(w.bottom+A.top)/2),_(w).concat(I).concat(_(A))}function C(w,A,I,N){return new Uu(e,w-l.left,A-l.top,I-w,N-A)}function _({top:w,bottom:A,horizontal:I}){let N=[];for(let P=0;P<I.length;P+=2)N.push(C(I[P],w,I[P+1],A));return N}function b(w,A,I){let N=1e9,P=-1e9,R=[];function X(Y,te,le,G,re){let J=r.coordsAtPos(Y,Y==I.to?-2:2),ne=r.coordsAtPos(le,le==I.from?2:-2);!J||!ne||(N=Math.min(J.top,ne.top,N),P=Math.max(J.bottom,ne.bottom,P),re==yt.LTR?R.push(n&&te?h:J.left,n&&G?f:ne.right):R.push(!n&&G?h:ne.left,!n&&te?f:J.right))}let j=w??I.from,Z=A??I.to;for(let Y of r.visibleRanges)if(Y.to>j&&Y.from<Z)for(let te=Math.max(Y.from,j),le=Math.min(Y.to,Z);;){let G=r.state.doc.lineAt(te);for(let re of r.bidiSpans(G)){let J=re.from+G.from,ne=re.to+G.from;if(J>=le)break;ne>te&&X(Math.max(J,te),w==null&&J<=j,Math.min(ne,le),A==null&&ne>=Z,re.dir)}if(te=G.to+1,te>=le)break}return R.length==0&&X(j,w==null,Z,A==null,r.textDirection),{top:N,bottom:P,horizontal:R}}function T(w,A){let I=o.top+(A?w.top:w.bottom);return{top:I,bottom:I,horizontal:[]}}}function UN(r,e){return r.constructor==e.constructor&&r.eq(e)}class qN{constructor(e,t){this.view=e,this.layer=t,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),t.above&&this.dom.classList.add("cm-layer-above"),t.class&&this.dom.classList.add(t.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),t.mount&&t.mount(this.dom,e)}update(e){e.startState.facet(dh)!=e.state.facet(dh)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let t=0,i=e.facet(dh);for(;t<i.length&&i[t]!=this.layer;)t++;this.dom.style.zIndex=String((this.layer.above?150:-1)-t)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:t}=this.view;(e!=this.scaleX||t!=this.scaleY)&&(this.scaleX=e,this.scaleY=t,this.dom.style.transform=`scale(${1/e}, ${1/t})`)}draw(e){if(e.length!=this.drawn.length||e.some((t,i)=>!UN(t,this.drawn[i]))){let t=this.dom.firstChild,i=0;for(let s of e)s.update&&t&&s.constructor&&this.drawn[i].constructor&&s.update(t,this.drawn[i])?(t=t.nextSibling,i++):this.dom.insertBefore(s.draw(),t);for(;t;){let s=t.nextSibling;t.remove(),t=s}this.drawn=e,Oe.safari&&Oe.safari_version>=26&&(this.dom.style.display=this.dom.firstChild?"":"none")}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const dh=ve.define();function TC(r){return[qt.define(e=>new qN(e,r)),dh.of(r)]}const Yl=ve.define({combine(r){return ns(r,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})}});function VN(r={}){return[Yl.of(r),XN,jN,zN,W2.of(!0)]}function _C(r){return r.startState.facet(Yl)!=r.state.facet(Yl)}const XN=TC({above:!0,markers(r){let{state:e}=r,t=e.facet(Yl),i=[];for(let s of e.selection.ranges){let n=s==e.selection.main;if(s.empty||t.drawRangeCursor){let a=n?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",o=s.empty?s:ie.cursor(s.head,s.head>s.anchor?-1:1);for(let l of Uu.forRange(r,a,o))i.push(l)}}return i},update(r,e){r.transactions.some(i=>i.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let t=_C(r);return t&&mS(r.state,e),r.docChanged||r.selectionSet||t},mount(r,e){mS(e.state,r)},class:"cm-cursorLayer"});function mS(r,e){e.style.animationDuration=r.facet(Yl).cursorBlinkRate+"ms"}const jN=TC({above:!1,markers(r){return r.state.selection.ranges.map(e=>e.empty?[]:Uu.forRange(r,"cm-selectionBackground",e)).reduce((e,t)=>e.concat(t))},update(r,e){return r.docChanged||r.selectionSet||r.viewportChanged||_C(r)},class:"cm-selectionLayer"}),zN=Ms.highest(me.theme({".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-content":{caretColor:"transparent !important","& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}})),xC=$e.define({map(r,e){return r==null?null:e.mapPos(r)}}),gl=Gt.define({create(){return null},update(r,e){return r!=null&&(r=e.changes.mapPos(r)),e.effects.reduce((t,i)=>i.is(xC)?i.value:t,r)}}),ZN=qt.fromClass(class{constructor(r){this.view=r,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(r){var e;let t=r.state.field(gl);t==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(r.startState.field(gl)!=t||r.docChanged||r.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:r}=this,e=r.state.field(gl),t=e!=null&&r.coordsAtPos(e);if(!t)return null;let i=r.scrollDOM.getBoundingClientRect();return{left:t.left-i.left+r.scrollDOM.scrollLeft*r.scaleX,top:t.top-i.top+r.scrollDOM.scrollTop*r.scaleY,height:t.bottom-t.top}}drawCursor(r){if(this.cursor){let{scaleX:e,scaleY:t}=this.view;r?(this.cursor.style.left=r.left/e+"px",this.cursor.style.top=r.top/t+"px",this.cursor.style.height=r.height/t+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(r){this.view.state.field(gl)!=r&&this.view.dispatch({effects:xC.of(r)})}},{eventObservers:{dragover(r){this.setDropPos(this.view.posAtCoords({x:r.clientX,y:r.clientY}))},dragleave(r){(r.target==this.view.contentDOM||!this.view.contentDOM.contains(r.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function WN(){return[gl,ZN]}function gS(r,e,t,i,s){e.lastIndex=0;for(let n=r.iterRange(t,i),a=t,o;!n.next().done;a+=n.value.length)if(!n.lineBreak)for(;o=e.exec(n.value);)s(a+o.index,o)}function HN(r,e){let t=r.visibleRanges;if(t.length==1&&t[0].from==r.viewport.from&&t[0].to==r.viewport.to)return t;let i=[];for(let{from:s,to:n}of t)s=Math.max(r.state.doc.lineAt(s).from,s-e),n=Math.min(r.state.doc.lineAt(n).to,n+e),i.length&&i[i.length-1].to>=s?i[i.length-1].to=n:i.push({from:s,to:n});return i}class YN{constructor(e){const{regexp:t,decoration:i,decorate:s,boundary:n,maxLength:a=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=t,s)this.addMatch=(o,l,u,c)=>s(c,u,u+o[0].length,o,l);else if(typeof i=="function")this.addMatch=(o,l,u,c)=>{let h=i(o,l,u);h&&c(u,u+o[0].length,h)};else if(i)this.addMatch=(o,l,u,c)=>c(u,u+o[0].length,i);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=n,this.maxLength=a}createDeco(e){let t=new As,i=t.add.bind(t);for(let{from:s,to:n}of HN(e,this.maxLength))gS(e.state.doc,this.regexp,s,n,(a,o)=>this.addMatch(o,e,a,i));return t.finish()}updateDeco(e,t){let i=1e9,s=-1;return e.docChanged&&e.changes.iterChanges((n,a,o,l)=>{l>=e.view.viewport.from&&o<=e.view.viewport.to&&(i=Math.min(o,i),s=Math.max(l,s))}),e.viewportMoved||s-i>1e3?this.createDeco(e.view):s>-1?this.updateRange(e.view,t.map(e.changes),i,s):t}updateRange(e,t,i,s){for(let n of e.visibleRanges){let a=Math.max(n.from,i),o=Math.min(n.to,s);if(o>=a){let l=e.state.doc.lineAt(a),u=l.to<o?e.state.doc.lineAt(o):l,c=Math.max(n.from,l.from),h=Math.min(n.to,u.to);if(this.boundary){for(;a>l.from;a--)if(this.boundary.test(l.text[a-1-l.from])){c=a;break}for(;o<u.to;o++)if(this.boundary.test(u.text[o-u.from])){h=o;break}}let f=[],m,S=(y,E,C)=>f.push(C.range(y,E));if(l==u)for(this.regexp.lastIndex=c-l.from;(m=this.regexp.exec(l.text))&&m.index<h-l.from;)this.addMatch(m,e,m.index+l.from,S);else gS(e.state.doc,this.regexp,c,h,(y,E)=>this.addMatch(E,e,y,S));t=t.update({filterFrom:c,filterTo:h,filter:(y,E)=>y<c||E>h,add:f})}}return t}}const Og=/x/.unicode!=null?"gu":"g",GN=new RegExp(`[\0-\b
--­؜​‎‏\u2028\u2029‭‮⁦⁧⁩\uFEFF￹-￼]`,Og),KN={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let xp=null;function JN(){var r;if(xp==null&&typeof document<"u"&&document.body){let e=document.body.style;xp=((r=e.tabSize)!==null&&r!==void 0?r:e.MozTabSize)!=null}return xp||!1}const fh=ve.define({combine(r){let e=ns(r,{render:null,specialChars:GN,addSpecialChars:null});return(e.replaceTabs=!JN())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,Og)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,Og)),e}});function e8(r={}){return[fh.of(r),t8()]}let OS=null;function t8(){return OS||(OS=qt.fromClass(class{constructor(r){this.view=r,this.decorations=Ae.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(r.state.facet(fh)),this.decorations=this.decorator.createDeco(r)}makeDecorator(r){return new YN({regexp:r.specialChars,decoration:(e,t,i)=>{let{doc:s}=t.state,n=Pi(e[0],0);if(n==9){let a=s.lineAt(i),o=t.state.tabSize,l=wr(a.text,o,i-a.from);return Ae.replace({widget:new n8((o-l%o)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[n]||(this.decorationCache[n]=Ae.replace({widget:new s8(r,n)}))},boundary:r.replaceTabs?void 0:/[^]/})}update(r){let e=r.state.facet(fh);r.startState.facet(fh)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(r.view)):this.decorations=this.decorator.updateDeco(r,this.decorations)}},{decorations:r=>r.decorations}))}const i8="•";function r8(r){return r>=32?i8:r==10?"␤":String.fromCharCode(9216+r)}class s8 extends Rs{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=r8(this.code),i=e.state.phrase("Control character")+" "+(KN[this.code]||"0x"+this.code.toString(16)),s=this.options.render&&this.options.render(this.code,i,t);if(s)return s;let n=document.createElement("span");return n.textContent=t,n.title=i,n.setAttribute("aria-label",i),n.className="cm-specialChar",n}ignoreEvent(){return!1}}class n8 extends Rs{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function a8(){return l8}const o8=Ae.line({class:"cm-activeLine"}),l8=qt.fromClass(class{constructor(r){this.decorations=this.getDeco(r)}update(r){(r.docChanged||r.selectionSet)&&(this.decorations=this.getDeco(r.view))}getDeco(r){let e=-1,t=[];for(let i of r.state.selection.ranges){let s=r.lineBlockAt(i.head);s.from>e&&(t.push(o8.range(s.from)),e=s.from)}return Ae.set(t)}},{decorations:r=>r.decorations}),yg=2e3;function u8(r,e,t){let i=Math.min(e.line,t.line),s=Math.max(e.line,t.line),n=[];if(e.off>yg||t.off>yg||e.col<0||t.col<0){let a=Math.min(e.off,t.off),o=Math.max(e.off,t.off);for(let l=i;l<=s;l++){let u=r.doc.line(l);u.length<=o&&n.push(ie.range(u.from+a,u.to+o))}}else{let a=Math.min(e.col,t.col),o=Math.max(e.col,t.col);for(let l=i;l<=s;l++){let u=r.doc.line(l),c=Hm(u.text,a,r.tabSize,!0);if(c<0)n.push(ie.cursor(u.to));else{let h=Hm(u.text,o,r.tabSize);n.push(ie.range(u.from+c,u.from+h))}}}return n}function c8(r,e){let t=r.coordsAtPos(r.viewport.from);return t?Math.round(Math.abs((t.left-e)/r.defaultCharacterWidth)):-1}function yS(r,e){let t=r.posAtCoords({x:e.clientX,y:e.clientY},!1),i=r.state.doc.lineAt(t),s=t-i.from,n=s>yg?-1:s==i.length?c8(r,e.clientX):wr(i.text,r.state.tabSize,t-i.from);return{line:i.number,col:n,off:s}}function h8(r,e){let t=yS(r,e),i=r.state.selection;return t?{update(s){if(s.docChanged){let n=s.changes.mapPos(s.startState.doc.line(t.line).from),a=s.state.doc.lineAt(n);t={line:a.number,col:t.col,off:Math.min(t.off,a.length)},i=i.map(s.changes)}},get(s,n,a){let o=yS(r,s);if(!o)return i;let l=u8(r.state,t,o);return l.length?a?ie.create(l.concat(i.ranges)):ie.create(l):i}}:null}function d8(r){let e=(t=>t.altKey&&t.button==0);return me.mouseSelectionStyle.of((t,i)=>e(i)?h8(t,i):null)}const f8={Alt:[18,r=>!!r.altKey],Control:[17,r=>!!r.ctrlKey],Shift:[16,r=>!!r.shiftKey],Meta:[91,r=>!!r.metaKey]},p8={style:"cursor: crosshair"};function m8(r={}){let[e,t]=f8[r.key||"Alt"],i=qt.fromClass(class{constructor(s){this.view=s,this.isDown=!1}set(s){this.isDown!=s&&(this.isDown=s,this.view.update([]))}},{eventObservers:{keydown(s){this.set(s.keyCode==e||t(s))},keyup(s){(s.keyCode==e||!t(s))&&this.set(!1)},mousemove(s){this.set(t(s))}}});return[i,me.contentAttributes.of(s=>{var n;return!((n=s.plugin(i))===null||n===void 0)&&n.isDown?p8:null})]}const il="-10000px";class wC{constructor(e,t,i,s){this.facet=t,this.createTooltipView=i,this.removeTooltipView=s,this.input=e.state.facet(t),this.tooltips=this.input.filter(a=>a);let n=null;this.tooltipViews=this.tooltips.map(a=>n=i(a,n))}update(e,t){var i;let s=e.state.facet(this.facet),n=s.filter(l=>l);if(s===this.input){for(let l of this.tooltipViews)l.update&&l.update(e);return!1}let a=[],o=t?[]:null;for(let l=0;l<n.length;l++){let u=n[l],c=-1;if(u){for(let h=0;h<this.tooltips.length;h++){let f=this.tooltips[h];f&&f.create==u.create&&(c=h)}if(c<0)a[l]=this.createTooltipView(u,l?a[l-1]:null),o&&(o[l]=!!u.above);else{let h=a[l]=this.tooltipViews[c];o&&(o[l]=t[c]),h.update&&h.update(e)}}}for(let l of this.tooltipViews)a.indexOf(l)<0&&(this.removeTooltipView(l),(i=l.destroy)===null||i===void 0||i.call(l));return t&&(o.forEach((l,u)=>t[u]=l),t.length=o.length),this.input=s,this.tooltips=n,this.tooltipViews=a,!0}}function g8(r){let e=r.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:e.clientHeight,right:e.clientWidth}}const wp=ve.define({combine:r=>{var e,t,i;return{position:Oe.ios?"absolute":((e=r.find(s=>s.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((t=r.find(s=>s.parent))===null||t===void 0?void 0:t.parent)||null,tooltipSpace:((i=r.find(s=>s.tooltipSpace))===null||i===void 0?void 0:i.tooltipSpace)||g8}}}),bS=new WeakMap,iO=qt.fromClass(class{constructor(r){this.view=r,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=r.state.facet(wp);this.position=e.position,this.parent=e.parent,this.classes=r.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new wC(r,rO,(t,i)=>this.createTooltip(t,i),t=>{this.resizeObserver&&this.resizeObserver.unobserve(t.dom),t.dom.remove()}),this.above=this.manager.tooltips.map(t=>!!t.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(t=>{Date.now()>this.lastTransaction-50&&t.length>0&&t[t.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),r.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let r of this.manager.tooltipViews)this.intersectionObserver.observe(r.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(r){r.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(r,this.above);e&&this.observeIntersection();let t=e||r.geometryChanged,i=r.state.facet(wp);if(i.position!=this.position&&!this.madeAbsolute){this.position=i.position;for(let s of this.manager.tooltipViews)s.dom.style.position=this.position;t=!0}if(i.parent!=this.parent){this.parent&&this.container.remove(),this.parent=i.parent,this.createContainer();for(let s of this.manager.tooltipViews)this.container.appendChild(s.dom);t=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);t&&this.maybeMeasure()}createTooltip(r,e){let t=r.create(this.view),i=e?e.dom:null;if(t.dom.classList.add("cm-tooltip"),r.arrow&&!t.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let s=document.createElement("div");s.className="cm-tooltip-arrow",t.dom.appendChild(s)}return t.dom.style.position=this.position,t.dom.style.top=il,t.dom.style.left="0px",this.container.insertBefore(t.dom,i),t.mount&&t.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(t.dom),t}destroy(){var r,e,t;this.view.win.removeEventListener("resize",this.measureSoon);for(let i of this.manager.tooltipViews)i.dom.remove(),(r=i.destroy)===null||r===void 0||r.call(i);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(t=this.intersectionObserver)===null||t===void 0||t.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let r=1,e=1,t=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:n}=this.manager.tooltipViews[0];if(Oe.gecko)t=n.offsetParent!=this.container.ownerDocument.body;else if(n.style.top==il&&n.style.left=="0px"){let a=n.getBoundingClientRect();t=Math.abs(a.top+1e4)>1||Math.abs(a.left)>1}}if(t||this.position=="absolute")if(this.parent){let n=this.parent.getBoundingClientRect();n.width&&n.height&&(r=n.width/this.parent.offsetWidth,e=n.height/this.parent.offsetHeight)}else({scaleX:r,scaleY:e}=this.view.viewState);let i=this.view.scrollDOM.getBoundingClientRect(),s=K0(this.view);return{visible:{left:i.left+s.left,top:i.top+s.top,right:i.right-s.right,bottom:i.bottom-s.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((n,a)=>{let o=this.manager.tooltipViews[a];return o.getCoords?o.getCoords(n.pos):this.view.coordsAtPos(n.pos)}),size:this.manager.tooltipViews.map(({dom:n})=>n.getBoundingClientRect()),space:this.view.state.facet(wp).tooltipSpace(this.view),scaleX:r,scaleY:e,makeAbsolute:t}}writeMeasure(r){var e;if(r.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let o of this.manager.tooltipViews)o.dom.style.position="absolute"}let{visible:t,space:i,scaleX:s,scaleY:n}=r,a=[];for(let o=0;o<this.manager.tooltips.length;o++){let l=this.manager.tooltips[o],u=this.manager.tooltipViews[o],{dom:c}=u,h=r.pos[o],f=r.size[o];if(!h||l.clip!==!1&&(h.bottom<=Math.max(t.top,i.top)||h.top>=Math.min(t.bottom,i.bottom)||h.right<Math.max(t.left,i.left)-.1||h.left>Math.min(t.right,i.right)+.1)){c.style.top=il;continue}let m=l.arrow?u.dom.querySelector(".cm-tooltip-arrow"):null,S=m?7:0,y=f.right-f.left,E=(e=bS.get(u))!==null&&e!==void 0?e:f.bottom-f.top,C=u.offset||y8,_=this.view.textDirection==yt.LTR,b=f.width>i.right-i.left?_?i.left:i.right-f.width:_?Math.max(i.left,Math.min(h.left-(m?14:0)+C.x,i.right-y)):Math.min(Math.max(i.left,h.left-y+(m?14:0)-C.x),i.right-y),T=this.above[o];!l.strictSide&&(T?h.top-E-S-C.y<i.top:h.bottom+E+S+C.y>i.bottom)&&T==i.bottom-h.bottom>h.top-i.top&&(T=this.above[o]=!T);let w=(T?h.top-i.top:i.bottom-h.bottom)-S;if(w<E&&u.resize!==!1){if(w<this.view.defaultLineHeight){c.style.top=il;continue}bS.set(u,E),c.style.height=(E=w)/n+"px"}else c.style.height&&(c.style.height="");let A=T?h.top-E-S-C.y:h.bottom+S+C.y,I=b+y;if(u.overlap!==!0)for(let N of a)N.left<I&&N.right>b&&N.top<A+E&&N.bottom>A&&(A=T?N.top-E-2-S:N.bottom+S+2);if(this.position=="absolute"?(c.style.top=(A-r.parent.top)/n+"px",vS(c,(b-r.parent.left)/s)):(c.style.top=A/n+"px",vS(c,b/s)),m){let N=h.left+(_?C.x:-C.x)-(b+14-7);m.style.left=N/s+"px"}u.overlap!==!0&&a.push({left:b,top:A,right:I,bottom:A+E}),c.classList.toggle("cm-tooltip-above",T),c.classList.toggle("cm-tooltip-below",!T),u.positioned&&u.positioned(r.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let r of this.manager.tooltipViews)r.dom.style.top=il}},{eventObservers:{scroll(){this.maybeMeasure()}}});function vS(r,e){let t=parseInt(r.style.left,10);(isNaN(t)||Math.abs(e-t)>1)&&(r.style.left=e+"px")}const O8=me.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:"14px",position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),y8={x:0,y:0},rO=ve.define({enables:[iO,O8]}),ed=ve.define({combine:r=>r.reduce((e,t)=>e.concat(t),[])});class tf{static create(e){return new tf(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new wC(e,ed,(t,i)=>this.createHostedView(t,i),t=>t.dom.remove())}createHostedView(e,t){let i=e.create(this.view);return i.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(i.dom,t?t.dom.nextSibling:this.dom.firstChild),this.mounted&&i.mount&&i.mount(this.view),i}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(e){for(let t of this.manager.tooltipViews)t.positioned&&t.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let t of this.manager.tooltipViews)(e=t.destroy)===null||e===void 0||e.call(t)}passProp(e){let t;for(let i of this.manager.tooltipViews){let s=i[e];if(s!==void 0){if(t===void 0)t=s;else if(t!==s)return}}return t}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const b8=rO.compute([ed],r=>{let e=r.facet(ed);return e.length===0?null:{pos:Math.min(...e.map(t=>t.pos)),end:Math.max(...e.map(t=>{var i;return(i=t.end)!==null&&i!==void 0?i:t.pos})),create:tf.create,above:e[0].above,arrow:e.some(t=>t.arrow)}});class v8{constructor(e,t,i,s,n){this.view=e,this.source=t,this.field=i,this.setHover=s,this.hoverTime=n,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:t}=this,i=e.docView.nearest(t.target);if(!i)return;let s,n=1;if(i instanceof tn)s=i.posAtStart;else{if(s=e.posAtCoords(t),s==null)return;let o=e.coordsAtPos(s);if(!o||t.y<o.top||t.y>o.bottom||t.x<o.left-e.defaultCharacterWidth||t.x>o.right+e.defaultCharacterWidth)return;let l=e.bidiSpans(e.state.doc.lineAt(s)).find(c=>c.from<=s&&c.to>=s),u=l&&l.dir==yt.RTL?-1:1;n=t.x<o.left?-u:u}let a=this.source(e,s,n);if(a!=null&&a.then){let o=this.pending={pos:s};a.then(l=>{this.pending==o&&(this.pending=null,l&&!(Array.isArray(l)&&!l.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(l)?l:[l])}))},l=>Ii(e.state,l,"hover tooltip"))}else a&&!(Array.isArray(a)&&!a.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(a)?a:[a])})}get tooltip(){let e=this.view.plugin(iO),t=e?e.manager.tooltips.findIndex(i=>i.create==tf.create):-1;return t>-1?e.manager.tooltipViews[t]:null}mousemove(e){var t,i;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:s,tooltip:n}=this;if(s.length&&n&&!S8(n.dom,e)||this.pending){let{pos:a}=s[0]||this.pending,o=(i=(t=s[0])===null||t===void 0?void 0:t.end)!==null&&i!==void 0?i:a;(a==o?this.view.posAtCoords(this.lastMove)!=a:!T8(this.view,a,o,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:t}=this;if(t.length){let{tooltip:i}=this;i&&i.dom.contains(e.relatedTarget)?this.watchTooltipLeave(i.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let t=i=>{e.removeEventListener("mouseleave",t),this.active.length&&!this.view.dom.contains(i.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",t)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const Uc=4;function S8(r,e){let{left:t,right:i,top:s,bottom:n}=r.getBoundingClientRect(),a;if(a=r.querySelector(".cm-tooltip-arrow")){let o=a.getBoundingClientRect();s=Math.min(o.top,s),n=Math.max(o.bottom,n)}return e.clientX>=t-Uc&&e.clientX<=i+Uc&&e.clientY>=s-Uc&&e.clientY<=n+Uc}function T8(r,e,t,i,s,n){let a=r.scrollDOM.getBoundingClientRect(),o=r.documentTop+r.documentPadding.top+r.contentHeight;if(a.left>i||a.right<i||a.top>s||Math.min(a.bottom,o)<s)return!1;let l=r.posAtCoords({x:i,y:s},!1);return l>=e&&l<=t}function _8(r,e={}){let t=$e.define(),i=Gt.define({create(){return[]},update(s,n){if(s.length&&(e.hideOnChange&&(n.docChanged||n.selection)?s=[]:e.hideOn&&(s=s.filter(a=>!e.hideOn(n,a))),n.docChanged)){let a=[];for(let o of s){let l=n.changes.mapPos(o.pos,-1,ii.TrackDel);if(l!=null){let u=Object.assign(Object.create(null),o);u.pos=l,u.end!=null&&(u.end=n.changes.mapPos(u.end)),a.push(u)}}s=a}for(let a of n.effects)a.is(t)&&(s=a.value),a.is(x8)&&(s=[]);return s},provide:s=>ed.from(s)});return{active:i,extension:[i,qt.define(s=>new v8(s,r,i,t,e.hoverTime||300)),b8]}}function CC(r,e){let t=r.plugin(iO);if(!t)return null;let i=t.manager.tooltips.indexOf(e);return i<0?null:t.manager.tooltipViews[i]}const x8=$e.define(),SS=ve.define({combine(r){let e,t;for(let i of r)e=e||i.topContainer,t=t||i.bottomContainer;return{topContainer:e,bottomContainer:t}}});function Gl(r,e){let t=r.plugin(kC),i=t?t.specs.indexOf(e):-1;return i>-1?t.panels[i]:null}const kC=qt.fromClass(class{constructor(r){this.input=r.state.facet(Kl),this.specs=this.input.filter(t=>t),this.panels=this.specs.map(t=>t(r));let e=r.state.facet(SS);this.top=new qc(r,!0,e.topContainer),this.bottom=new qc(r,!1,e.bottomContainer),this.top.sync(this.panels.filter(t=>t.top)),this.bottom.sync(this.panels.filter(t=>!t.top));for(let t of this.panels)t.dom.classList.add("cm-panel"),t.mount&&t.mount()}update(r){let e=r.state.facet(SS);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new qc(r.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new qc(r.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let t=r.state.facet(Kl);if(t!=this.input){let i=t.filter(l=>l),s=[],n=[],a=[],o=[];for(let l of i){let u=this.specs.indexOf(l),c;u<0?(c=l(r.view),o.push(c)):(c=this.panels[u],c.update&&c.update(r)),s.push(c),(c.top?n:a).push(c)}this.specs=i,this.panels=s,this.top.sync(n),this.bottom.sync(a);for(let l of o)l.dom.classList.add("cm-panel"),l.mount&&l.mount()}else for(let i of this.panels)i.update&&i.update(r)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:r=>me.scrollMargins.of(e=>{let t=e.plugin(r);return t&&{top:t.top.scrollMargin(),bottom:t.bottom.scrollMargin()}})});class qc{constructor(e,t,i){this.view=e,this.top=t,this.container=i,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let t=this.container||this.view.dom;t.insertBefore(this.dom,this.top?t.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=TS(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=TS(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function TS(r){let e=r.nextSibling;return r.remove(),e}const Kl=ve.define({enables:kC});class Ds extends Hn{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}Ds.prototype.elementClass="";Ds.prototype.toDOM=void 0;Ds.prototype.mapMode=ii.TrackBefore;Ds.prototype.startSide=Ds.prototype.endSide=-1;Ds.prototype.point=!0;const ph=ve.define(),w8=ve.define(),C8={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>Ye.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{},side:"before"},Ml=ve.define();function k8(r){return[EC(),Ml.of({...C8,...r})]}const _S=ve.define({combine:r=>r.some(e=>e)});function EC(r){return[E8]}const E8=qt.fromClass(class{constructor(r){this.view=r,this.domAfter=null,this.prevViewport=r.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=r.state.facet(Ml).map(e=>new wS(r,e)),this.fixed=!r.state.facet(_S);for(let e of this.gutters)e.config.side=="after"?this.getDOMAfter().appendChild(e.dom):this.dom.appendChild(e.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),r.scrollDOM.insertBefore(this.dom,r.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(r){if(this.updateGutters(r)){let e=this.prevViewport,t=r.view.viewport,i=Math.min(e.to,t.to)-Math.max(e.from,t.from);this.syncGutters(i<(t.to-t.from)*.8)}if(r.geometryChanged){let e=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=e,this.domAfter&&(this.domAfter.style.minHeight=e)}this.view.state.facet(_S)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=r.view.viewport}syncGutters(r){let e=this.dom.nextSibling;r&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let t=Ye.iter(this.view.state.facet(ph),this.view.viewport.from),i=[],s=this.gutters.map(n=>new A8(n,this.view.viewport,-this.view.documentPadding.top));for(let n of this.view.viewportLineBlocks)if(i.length&&(i=[]),Array.isArray(n.type)){let a=!0;for(let o of n.type)if(o.type==Ti.Text&&a){bg(t,i,o.from);for(let l of s)l.line(this.view,o,i);a=!1}else if(o.widget)for(let l of s)l.widget(this.view,o)}else if(n.type==Ti.Text){bg(t,i,n.from);for(let a of s)a.line(this.view,n,i)}else if(n.widget)for(let a of s)a.widget(this.view,n);for(let n of s)n.finish();r&&(this.view.scrollDOM.insertBefore(this.dom,e),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(r){let e=r.startState.facet(Ml),t=r.state.facet(Ml),i=r.docChanged||r.heightChanged||r.viewportChanged||!Ye.eq(r.startState.facet(ph),r.state.facet(ph),r.view.viewport.from,r.view.viewport.to);if(e==t)for(let s of this.gutters)s.update(r)&&(i=!0);else{i=!0;let s=[];for(let n of t){let a=e.indexOf(n);a<0?s.push(new wS(this.view,n)):(this.gutters[a].update(r),s.push(this.gutters[a]))}for(let n of this.gutters)n.dom.remove(),s.indexOf(n)<0&&n.destroy();for(let n of s)n.config.side=="after"?this.getDOMAfter().appendChild(n.dom):this.dom.appendChild(n.dom);this.gutters=s}return i}destroy(){for(let r of this.gutters)r.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:r=>me.scrollMargins.of(e=>{let t=e.plugin(r);if(!t||t.gutters.length==0||!t.fixed)return null;let i=t.dom.offsetWidth*e.scaleX,s=t.domAfter?t.domAfter.offsetWidth*e.scaleX:0;return e.textDirection==yt.LTR?{left:i,right:s}:{right:i,left:s}})});function xS(r){return Array.isArray(r)?r:[r]}function bg(r,e,t){for(;r.value&&r.from<=t;)r.from==t&&e.push(r.value),r.next()}class A8{constructor(e,t,i){this.gutter=e,this.height=i,this.i=0,this.cursor=Ye.iter(e.markers,t.from)}addElement(e,t,i){let{gutter:s}=this,n=(t.top-this.height)/e.scaleY,a=t.height/e.scaleY;if(this.i==s.elements.length){let o=new AC(e,a,n,i);s.elements.push(o),s.dom.appendChild(o.dom)}else s.elements[this.i].update(e,a,n,i);this.height=t.bottom,this.i++}line(e,t,i){let s=[];bg(this.cursor,s,t.from),i.length&&(s=s.concat(i));let n=this.gutter.config.lineMarker(e,t,s);n&&s.unshift(n);let a=this.gutter;s.length==0&&!a.config.renderEmptyElements||this.addElement(e,t,s)}widget(e,t){let i=this.gutter.config.widgetMarker(e,t.widget,t),s=i?[i]:null;for(let n of e.state.facet(w8)){let a=n(e,t.widget,t);a&&(s||(s=[])).push(a)}s&&this.addElement(e,t,s)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class wS{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let i in t.domEventHandlers)this.dom.addEventListener(i,s=>{let n=s.target,a;if(n!=this.dom&&this.dom.contains(n)){for(;n.parentNode!=this.dom;)n=n.parentNode;let l=n.getBoundingClientRect();a=(l.top+l.bottom)/2}else a=s.clientY;let o=e.lineBlockAtHeight(a-e.documentTop);t.domEventHandlers[i](e,o,s)&&s.preventDefault()});this.markers=xS(t.markers(e)),t.initialSpacer&&(this.spacer=new AC(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=xS(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let s=this.config.updateSpacer(this.spacer.markers[0],e);s!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[s])}let i=e.view.viewport;return!Ye.eq(this.markers,t,i.from,i.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class AC{constructor(e,t,i,s){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,i,s)}update(e,t,i,s){this.height!=t&&(this.height=t,this.dom.style.height=t+"px"),this.above!=i&&(this.dom.style.marginTop=(this.above=i)?i+"px":""),P8(this.markers,s)||this.setMarkers(e,s)}setMarkers(e,t){let i="cm-gutterElement",s=this.dom.firstChild;for(let n=0,a=0;;){let o=a,l=n<t.length?t[n++]:null,u=!1;if(l){let c=l.elementClass;c&&(i+=" "+c);for(let h=a;h<this.markers.length;h++)if(this.markers[h].compare(l)){o=h,u=!0;break}}else o=this.markers.length;for(;a<o;){let c=this.markers[a++];if(c.toDOM){c.destroy(s);let h=s.nextSibling;s.remove(),s=h}}if(!l)break;l.toDOM&&(u?s=s.nextSibling:this.dom.insertBefore(l.toDOM(e),s)),u&&a++}this.dom.className=i,this.markers=t}destroy(){this.setMarkers(null,[])}}function P8(r,e){if(r.length!=e.length)return!1;for(let t=0;t<r.length;t++)if(!r[t].compare(e[t]))return!1;return!0}const D8=ve.define(),M8=ve.define(),xa=ve.define({combine(r){return ns(r,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let i=Object.assign({},e);for(let s in t){let n=i[s],a=t[s];i[s]=n?(o,l,u)=>n(o,l,u)||a(o,l,u):a}return i}})}});class Cp extends Ds{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function kp(r,e){return r.state.facet(xa).formatNumber(e,r.state)}const I8=Ml.compute([xa],r=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(D8)},lineMarker(e,t,i){return i.some(s=>s.toDOM)?null:new Cp(kp(e,e.state.doc.lineAt(t.from).number))},widgetMarker:(e,t,i)=>{for(let s of e.state.facet(M8)){let n=s(e,t,i);if(n)return n}return null},lineMarkerChange:e=>e.startState.facet(xa)!=e.state.facet(xa),initialSpacer(e){return new Cp(kp(e,CS(e.state.doc.lines)))},updateSpacer(e,t){let i=kp(t.view,CS(t.view.state.doc.lines));return i==e.number?e:new Cp(i)},domEventHandlers:r.facet(xa).domEventHandlers,side:"before"}));function R8(r={}){return[xa.of(r),EC(),I8]}function CS(r){let e=9;for(;e<r;)e=e*10+9;return e}const L8=new class extends Ds{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},Q8=ph.compute(["selection"],r=>{let e=[],t=-1;for(let i of r.selection.ranges){let s=r.doc.lineAt(i.head).from;s>t&&(t=s,e.push(L8.range(s)))}return Ye.of(e)});function $8(){return Q8}const PC=1024;let B8=0;class rr{constructor(e,t){this.from=e,this.to=t}}class Qe{constructor(e={}){this.id=B8++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=Xt.match(e)),t=>{let i=e(t);return i===void 0?null:[this,i]}}}Qe.closedBy=new Qe({deserialize:r=>r.split(" ")});Qe.openedBy=new Qe({deserialize:r=>r.split(" ")});Qe.group=new Qe({deserialize:r=>r.split(" ")});Qe.isolate=new Qe({deserialize:r=>{if(r&&r!="rtl"&&r!="ltr"&&r!="auto")throw new RangeError("Invalid value for isolate: "+r);return r||"auto"}});Qe.contextHash=new Qe({perNode:!0});Qe.lookAhead=new Qe({perNode:!0});Qe.mounted=new Qe({perNode:!0});class Jl{constructor(e,t,i){this.tree=e,this.overlay=t,this.parser=i}static get(e){return e&&e.props&&e.props[Qe.mounted.id]}}const N8=Object.create(null);class Xt{constructor(e,t,i,s=0){this.name=e,this.props=t,this.id=i,this.flags=s}static define(e){let t=e.props&&e.props.length?Object.create(null):N8,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),s=new Xt(e.name||"",t,e.id,i);if(e.props){for(let n of e.props)if(Array.isArray(n)||(n=n(s)),n){if(n[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[n[0].id]=n[1]}}return s}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(Qe.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let i in e)for(let s of i.split(" "))t[s]=e[i];return i=>{for(let s=i.prop(Qe.group),n=-1;n<(s?s.length:0);n++){let a=t[n<0?i.name:s[n]];if(a)return a}}}}Xt.none=new Xt("",Object.create(null),0,8);class qu{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let i of this.types){let s=null;for(let n of e){let a=n(i);a&&(s||(s=Object.assign({},i.props)),s[a[0].id]=a[1])}t.push(s?new Xt(i.name,s,i.id,i.flags):i)}return new qu(t)}}const Vc=new WeakMap,kS=new WeakMap;var pt;(function(r){r[r.ExcludeBuffers=1]="ExcludeBuffers",r[r.IncludeAnonymous=2]="IncludeAnonymous",r[r.IgnoreMounts=4]="IgnoreMounts",r[r.IgnoreOverlays=8]="IgnoreOverlays"})(pt||(pt={}));class et{constructor(e,t,i,s,n){if(this.type=e,this.children=t,this.positions=i,this.length=s,this.props=null,n&&n.length){this.props=Object.create(null);for(let[a,o]of n)this.props[typeof a=="number"?a:a.id]=o}}toString(){let e=Jl.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let i of this.children){let s=i.toString();s&&(t&&(t+=","),t+=s)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new td(this.topNode,e)}cursorAt(e,t=0,i=0){let s=Vc.get(this)||this.topNode,n=new td(s);return n.moveTo(e,t),Vc.set(this,n._tree),n}get topNode(){return new fi(this,0,0,null)}resolve(e,t=0){let i=eu(Vc.get(this)||this.topNode,e,t,!1);return Vc.set(this,i),i}resolveInner(e,t=0){let i=eu(kS.get(this)||this.topNode,e,t,!0);return kS.set(this,i),i}resolveStack(e,t=0){return q8(this,e,t)}iterate(e){let{enter:t,leave:i,from:s=0,to:n=this.length}=e,a=e.mode||0,o=(a&pt.IncludeAnonymous)>0;for(let l=this.cursor(a|pt.IncludeAnonymous);;){let u=!1;if(l.from<=n&&l.to>=s&&(!o&&l.type.isAnonymous||t(l)!==!1)){if(l.firstChild())continue;u=!0}for(;u&&i&&(o||!l.type.isAnonymous)&&i(l),!l.nextSibling();){if(!l.parent())return;u=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:aO(Xt.none,this.children,this.positions,0,this.children.length,0,this.length,(t,i,s)=>new et(this.type,t,i,s,this.propValues),e.makeTree||((t,i,s)=>new et(Xt.none,t,i,s)))}static build(e){return V8(e)}}et.empty=new et(Xt.none,[],[],0);class sO{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new sO(this.buffer,this.index)}}class hn{constructor(e,t,i){this.buffer=e,this.length=t,this.set=i}get type(){return Xt.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],i=this.buffer[e+3],s=this.set.types[t],n=s.name;if(/\W/.test(n)&&!s.isError&&(n=JSON.stringify(n)),e+=4,i==e)return n;let a=[];for(;e<i;)a.push(this.childString(e)),e=this.buffer[e+3];return n+"("+a.join(",")+")"}findChild(e,t,i,s,n){let{buffer:a}=this,o=-1;for(let l=e;l!=t&&!(DC(n,s,a[l+1],a[l+2])&&(o=l,i>0));l=a[l+3]);return o}slice(e,t,i){let s=this.buffer,n=new Uint16Array(t-e),a=0;for(let o=e,l=0;o<t;){n[l++]=s[o++],n[l++]=s[o++]-i;let u=n[l++]=s[o++]-i;n[l++]=s[o++]-e,a=Math.max(a,u)}return new hn(n,a,this.set)}}function DC(r,e,t,i){switch(r){case-2:return t<e;case-1:return i>=e&&t<e;case 0:return t<e&&i>e;case 1:return t<=e&&i>e;case 2:return i>e;case 4:return!0}}function eu(r,e,t,i){for(var s;r.from==r.to||(t<1?r.from>=e:r.from>e)||(t>-1?r.to<=e:r.to<e);){let a=!i&&r instanceof fi&&r.index<0?null:r.parent;if(!a)return r;r=a}let n=i?0:pt.IgnoreOverlays;if(i)for(let a=r,o=a.parent;o;a=o,o=a.parent)a instanceof fi&&a.index<0&&((s=o.enter(e,t,n))===null||s===void 0?void 0:s.from)!=a.from&&(r=o);for(;;){let a=r.enter(e,t,n);if(!a)return r;r=a}}class MC{cursor(e=0){return new td(this,e)}getChild(e,t=null,i=null){let s=ES(this,e,t,i);return s.length?s[0]:null}getChildren(e,t=null,i=null){return ES(this,e,t,i)}resolve(e,t=0){return eu(this,e,t,!1)}resolveInner(e,t=0){return eu(this,e,t,!0)}matchContext(e){return vg(this.parent,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),i=this;for(;t;){let s=t.lastChild;if(!s||s.to!=t.to)break;s.type.isError&&s.from==s.to?(i=t,t=s.prevSibling):t=s}return i}get node(){return this}get next(){return this.parent}}class fi extends MC{constructor(e,t,i,s){super(),this._tree=e,this.from=t,this.index=i,this._parent=s}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,i,s,n=0){for(let a=this;;){for(let{children:o,positions:l}=a._tree,u=t>0?o.length:-1;e!=u;e+=t){let c=o[e],h=l[e]+a.from;if(DC(s,i,h,h+c.length)){if(c instanceof hn){if(n&pt.ExcludeBuffers)continue;let f=c.findChild(0,c.buffer.length,t,i-h,s);if(f>-1)return new Yr(new F8(a,c,e,h),null,f)}else if(n&pt.IncludeAnonymous||!c.type.isAnonymous||nO(c)){let f;if(!(n&pt.IgnoreMounts)&&(f=Jl.get(c))&&!f.overlay)return new fi(f.tree,h,e,a);let m=new fi(c,h,e,a);return n&pt.IncludeAnonymous||!m.type.isAnonymous?m:m.nextChild(t<0?c.children.length-1:0,t,i,s)}}}if(n&pt.IncludeAnonymous||!a.type.isAnonymous||(a.index>=0?e=a.index+t:e=t<0?-1:a._parent._tree.children.length,a=a._parent,!a))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,i=0){let s;if(!(i&pt.IgnoreOverlays)&&(s=Jl.get(this._tree))&&s.overlay){let n=e-this.from;for(let{from:a,to:o}of s.overlay)if((t>0?a<=n:a<n)&&(t<0?o>=n:o>n))return new fi(s.tree,s.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function ES(r,e,t,i){let s=r.cursor(),n=[];if(!s.firstChild())return n;if(t!=null){for(let a=!1;!a;)if(a=s.type.is(t),!s.nextSibling())return n}for(;;){if(i!=null&&s.type.is(i))return n;if(s.type.is(e)&&n.push(s.node),!s.nextSibling())return i==null?n:[]}}function vg(r,e,t=e.length-1){for(let i=r;t>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(e[t]&&e[t]!=i.name)return!1;t--}}return!0}class F8{constructor(e,t,i,s){this.parent=e,this.buffer=t,this.index=i,this.start=s}}class Yr extends MC{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,i){super(),this.context=e,this._parent=t,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}child(e,t,i){let{buffer:s}=this.context,n=s.findChild(this.index+4,s.buffer[this.index+3],e,t-this.context.start,i);return n<0?null:new Yr(this.context,this,n)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,i=0){if(i&pt.ExcludeBuffers)return null;let{buffer:s}=this.context,n=s.findChild(this.index+4,s.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return n<0?null:new Yr(this.context,this,n)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Yr(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new Yr(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:i}=this.context,s=this.index+4,n=i.buffer[this.index+3];if(n>s){let a=i.buffer[this.index+1];e.push(i.slice(s,n,a)),t.push(0)}return new et(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function IC(r){if(!r.length)return null;let e=0,t=r[0];for(let n=1;n<r.length;n++){let a=r[n];(a.from>t.from||a.to<t.to)&&(t=a,e=n)}let i=t instanceof fi&&t.index<0?null:t.parent,s=r.slice();return i?s[e]=i:s.splice(e,1),new U8(s,t)}class U8{constructor(e,t){this.heads=e,this.node=t}get next(){return IC(this.heads)}}function q8(r,e,t){let i=r.resolveInner(e,t),s=null;for(let n=i instanceof fi?i:i.context.parent;n;n=n.parent)if(n.index<0){let a=n.parent;(s||(s=[i])).push(a.resolve(e,t)),n=a}else{let a=Jl.get(n.tree);if(a&&a.overlay&&a.overlay[0].from<=e&&a.overlay[a.overlay.length-1].to>=e){let o=new fi(a.tree,a.overlay[0].from+n.from,-1,n);(s||(s=[i])).push(eu(o,e,t,!1))}}return s?IC(s):i}class td{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof fi)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let i=e._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:i,buffer:s}=this.buffer;return this.type=t||s.set.types[s.buffer[e]],this.from=i+s.buffer[e+1],this.to=i+s.buffer[e+2],!0}yield(e){return e?e instanceof fi?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,i,this.mode));let{buffer:s}=this.buffer,n=s.findChild(this.index+4,s.buffer[this.index+3],e,t-this.buffer.start,i);return n<0?!1:(this.stack.push(this.index),this.yieldBuf(n))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,i=this.mode){return this.buffer?i&pt.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&pt.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&pt.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,i=this.stack.length-1;if(e<0){let s=i<0?0:this.stack[i]+4;if(this.index!=s)return this.yieldBuf(t.findChild(s,this.index,-1,0,4))}else{let s=t.buffer[this.index+3];if(s<(i<0?t.buffer.length:t.buffer[this.stack[i]+3]))return this.yieldBuf(s)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,i,{buffer:s}=this;if(s){if(e>0){if(this.index<s.buffer.buffer.length)return!1}else for(let n=0;n<this.index;n++)if(s.buffer.buffer[n+3]<this.index)return!1;({index:t,parent:i}=s)}else({index:t,_parent:i}=this._tree);for(;i;{index:t,_parent:i}=i)if(t>-1)for(let n=t+e,a=e<0?-1:i._tree.children.length;n!=a;n+=e){let o=i._tree.children[n];if(this.mode&pt.IncludeAnonymous||o instanceof hn||!o.type.isAnonymous||nO(o))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,i=0;if(e&&e.context==this.buffer)e:for(let s=this.index,n=this.stack.length;n>=0;){for(let a=e;a;a=a._parent)if(a.index==s){if(s==this.index)return a;t=a,i=n+1;break e}s=this.stack[--n]}for(let s=i;s<this.stack.length;s++)t=new Yr(this.buffer,t,this.stack[s]);return this.bufferNode=new Yr(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let i=0;;){let s=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(s=!0)}for(;;){if(s&&t&&t(this),s=this.type.isAnonymous,!i)return;if(this.nextSibling())break;this.parent(),i--,s=!0}}}matchContext(e){if(!this.buffer)return vg(this.node.parent,e);let{buffer:t}=this.buffer,{types:i}=t.set;for(let s=e.length-1,n=this.stack.length-1;s>=0;n--){if(n<0)return vg(this._tree,e,s);let a=i[t.buffer[this.stack[n]]];if(!a.isAnonymous){if(e[s]&&e[s]!=a.name)return!1;s--}}return!0}}function nO(r){return r.children.some(e=>e instanceof hn||!e.type.isAnonymous||nO(e))}function V8(r){var e;let{buffer:t,nodeSet:i,maxBufferLength:s=PC,reused:n=[],minRepeatType:a=i.types.length}=r,o=Array.isArray(t)?new sO(t,t.length):t,l=i.types,u=0,c=0;function h(w,A,I,N,P,R){let{id:X,start:j,end:Z,size:Y}=o,te=c,le=u;for(;Y<0;)if(o.next(),Y==-1){let ae=n[X];I.push(ae),N.push(j-w);return}else if(Y==-3){u=X;return}else if(Y==-4){c=X;return}else throw new RangeError(`Unrecognized record size: ${Y}`);let G=l[X],re,J,ne=j-w;if(Z-j<=s&&(J=E(o.pos-A,P))){let ae=new Uint16Array(J.size-J.skip),Se=o.pos-J.size,we=ae.length;for(;o.pos>Se;)we=C(J.start,ae,we);re=new hn(ae,Z-J.start,i),ne=J.start-w}else{let ae=o.pos-Y;o.next();let Se=[],we=[],Me=X>=a?X:-1,Te=0,dt=Z;for(;o.pos>ae;)Me>=0&&o.id==Me&&o.size>=0?(o.end<=dt-s&&(S(Se,we,j,Te,o.end,dt,Me,te,le),Te=Se.length,dt=o.end),o.next()):R>2500?f(j,ae,Se,we):h(j,ae,Se,we,Me,R+1);if(Me>=0&&Te>0&&Te<Se.length&&S(Se,we,j,Te,j,dt,Me,te,le),Se.reverse(),we.reverse(),Me>-1&&Te>0){let bt=m(G,le);re=aO(G,Se,we,0,Se.length,0,Z-j,bt,bt)}else re=y(G,Se,we,Z-j,te-Z,le)}I.push(re),N.push(ne)}function f(w,A,I,N){let P=[],R=0,X=-1;for(;o.pos>A;){let{id:j,start:Z,end:Y,size:te}=o;if(te>4)o.next();else{if(X>-1&&Z<X)break;X<0&&(X=Y-s),P.push(j,Z,Y),R++,o.next()}}if(R){let j=new Uint16Array(R*4),Z=P[P.length-2];for(let Y=P.length-3,te=0;Y>=0;Y-=3)j[te++]=P[Y],j[te++]=P[Y+1]-Z,j[te++]=P[Y+2]-Z,j[te++]=te;I.push(new hn(j,P[2]-Z,i)),N.push(Z-w)}}function m(w,A){return(I,N,P)=>{let R=0,X=I.length-1,j,Z;if(X>=0&&(j=I[X])instanceof et){if(!X&&j.type==w&&j.length==P)return j;(Z=j.prop(Qe.lookAhead))&&(R=N[X]+j.length+Z)}return y(w,I,N,P,R,A)}}function S(w,A,I,N,P,R,X,j,Z){let Y=[],te=[];for(;w.length>N;)Y.push(w.pop()),te.push(A.pop()+I-P);w.push(y(i.types[X],Y,te,R-P,j-R,Z)),A.push(P-I)}function y(w,A,I,N,P,R,X){if(R){let j=[Qe.contextHash,R];X=X?[j].concat(X):[j]}if(P>25){let j=[Qe.lookAhead,P];X=X?[j].concat(X):[j]}return new et(w,A,I,N,X)}function E(w,A){let I=o.fork(),N=0,P=0,R=0,X=I.end-s,j={size:0,start:0,skip:0};e:for(let Z=I.pos-w;I.pos>Z;){let Y=I.size;if(I.id==A&&Y>=0){j.size=N,j.start=P,j.skip=R,R+=4,N+=4,I.next();continue}let te=I.pos-Y;if(Y<0||te<Z||I.start<X)break;let le=I.id>=a?4:0,G=I.start;for(I.next();I.pos>te;){if(I.size<0)if(I.size==-3)le+=4;else break e;else I.id>=a&&(le+=4);I.next()}P=G,N+=Y,R+=le}return(A<0||N==w)&&(j.size=N,j.start=P,j.skip=R),j.size>4?j:void 0}function C(w,A,I){let{id:N,start:P,end:R,size:X}=o;if(o.next(),X>=0&&N<a){let j=I;if(X>4){let Z=o.pos-(X-4);for(;o.pos>Z;)I=C(w,A,I)}A[--I]=j,A[--I]=R-w,A[--I]=P-w,A[--I]=N}else X==-3?u=N:X==-4&&(c=N);return I}let _=[],b=[];for(;o.pos>0;)h(r.start||0,r.bufferStart||0,_,b,-1,0);let T=(e=r.length)!==null&&e!==void 0?e:_.length?b[0]+_[0].length:0;return new et(l[r.topID],_.reverse(),b.reverse(),T)}const AS=new WeakMap;function mh(r,e){if(!r.isAnonymous||e instanceof hn||e.type!=r)return 1;let t=AS.get(e);if(t==null){t=1;for(let i of e.children){if(i.type!=r||!(i instanceof et)){t=1;break}t+=mh(r,i)}AS.set(e,t)}return t}function aO(r,e,t,i,s,n,a,o,l){let u=0;for(let S=i;S<s;S++)u+=mh(r,e[S]);let c=Math.ceil(u*1.5/8),h=[],f=[];function m(S,y,E,C,_){for(let b=E;b<C;){let T=b,w=y[b],A=mh(r,S[b]);for(b++;b<C;b++){let I=mh(r,S[b]);if(A+I>=c)break;A+=I}if(b==T+1){if(A>c){let I=S[T];m(I.children,I.positions,0,I.children.length,y[T]+_);continue}h.push(S[T])}else{let I=y[b-1]+S[b-1].length-w;h.push(aO(r,S,y,T,b,w,I,null,l))}f.push(w+_-n)}}return m(e,t,i,s,0),(o||l)(h,f,a)}class RC{constructor(){this.map=new WeakMap}setBuffer(e,t,i){let s=this.map.get(e);s||this.map.set(e,s=new Map),s.set(t,i)}getBuffer(e,t){let i=this.map.get(e);return i&&i.get(t)}set(e,t){e instanceof Yr?this.setBuffer(e.context.buffer,e.index,t):e instanceof fi&&this.map.set(e.tree,t)}get(e){return e instanceof Yr?this.getBuffer(e.context.buffer,e.index):e instanceof fi?this.map.get(e.tree):void 0}cursorSet(e,t){e.buffer?this.setBuffer(e.buffer.buffer,e.index,t):this.map.set(e.tree,t)}cursorGet(e){return e.buffer?this.getBuffer(e.buffer.buffer,e.index):this.map.get(e.tree)}}class ks{constructor(e,t,i,s,n=!1,a=!1){this.from=e,this.to=t,this.tree=i,this.offset=s,this.open=(n?1:0)|(a?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],i=!1){let s=[new ks(0,e.length,e,0,!1,i)];for(let n of t)n.to>e.length&&s.push(n);return s}static applyChanges(e,t,i=128){if(!t.length)return e;let s=[],n=1,a=e.length?e[0]:null;for(let o=0,l=0,u=0;;o++){let c=o<t.length?t[o]:null,h=c?c.fromA:1e9;if(h-l>=i)for(;a&&a.from<h;){let f=a;if(l>=f.from||h<=f.to||u){let m=Math.max(f.from,l)-u,S=Math.min(f.to,h)-u;f=m>=S?null:new ks(m,S,f.tree,f.offset+u,o>0,!!c)}if(f&&s.push(f),a.to>h)break;a=n<e.length?e[n++]:null}if(!c)break;l=c.toA,u=c.toA-c.toB}return s}}class oO{startParse(e,t,i){return typeof e=="string"&&(e=new X8(e)),i=i?i.length?i.map(s=>new rr(s.from,s.to)):[new rr(0,0)]:[new rr(0,e.length)],this.createParse(e,t||[],i)}parse(e,t,i){let s=this.startParse(e,t,i);for(;;){let n=s.advance();if(n)return n}}}class X8{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}function LC(r){return(e,t,i,s)=>new z8(e,r,t,i,s)}class PS{constructor(e,t,i,s,n){this.parser=e,this.parse=t,this.overlay=i,this.target=s,this.from=n}}function DS(r){if(!r.length||r.some(e=>e.from>=e.to))throw new RangeError("Invalid inner parse ranges given: "+JSON.stringify(r))}class j8{constructor(e,t,i,s,n,a,o){this.parser=e,this.predicate=t,this.mounts=i,this.index=s,this.start=n,this.target=a,this.prev=o,this.depth=0,this.ranges=[]}}const Sg=new Qe({perNode:!0});class z8{constructor(e,t,i,s,n){this.nest=t,this.input=i,this.fragments=s,this.ranges=n,this.inner=[],this.innerDone=0,this.baseTree=null,this.stoppedAt=null,this.baseParse=e}advance(){if(this.baseParse){let i=this.baseParse.advance();if(!i)return null;if(this.baseParse=null,this.baseTree=i,this.startInner(),this.stoppedAt!=null)for(let s of this.inner)s.parse.stopAt(this.stoppedAt)}if(this.innerDone==this.inner.length){let i=this.baseTree;return this.stoppedAt!=null&&(i=new et(i.type,i.children,i.positions,i.length,i.propValues.concat([[Sg,this.stoppedAt]]))),i}let e=this.inner[this.innerDone],t=e.parse.advance();if(t){this.innerDone++;let i=Object.assign(Object.create(null),e.target.props);i[Qe.mounted.id]=new Jl(t,e.overlay,e.parser),e.target.props=i}return null}get parsedPos(){if(this.baseParse)return 0;let e=this.input.length;for(let t=this.innerDone;t<this.inner.length;t++)this.inner[t].from<e&&(e=Math.min(e,this.inner[t].parse.parsedPos));return e}stopAt(e){if(this.stoppedAt=e,this.baseParse)this.baseParse.stopAt(e);else for(let t=this.innerDone;t<this.inner.length;t++)this.inner[t].parse.stopAt(e)}startInner(){let e=new H8(this.fragments),t=null,i=null,s=new td(new fi(this.baseTree,this.ranges[0].from,0,null),pt.IncludeAnonymous|pt.IgnoreMounts);e:for(let n,a;;){let o=!0,l;if(this.stoppedAt!=null&&s.from>=this.stoppedAt)o=!1;else if(e.hasNode(s)){if(t){let u=t.mounts.find(c=>c.frag.from<=s.from&&c.frag.to>=s.to&&c.mount.overlay);if(u)for(let c of u.mount.overlay){let h=c.from+u.pos,f=c.to+u.pos;h>=s.from&&f<=s.to&&!t.ranges.some(m=>m.from<f&&m.to>h)&&t.ranges.push({from:h,to:f})}}o=!1}else if(i&&(a=Z8(i.ranges,s.from,s.to)))o=a!=2;else if(!s.type.isAnonymous&&(n=this.nest(s,this.input))&&(s.from<s.to||!n.overlay)){s.tree||W8(s);let u=e.findMounts(s.from,n.parser);if(typeof n.overlay=="function")t=new j8(n.parser,n.overlay,u,this.inner.length,s.from,s.tree,t);else{let c=RS(this.ranges,n.overlay||(s.from<s.to?[new rr(s.from,s.to)]:[]));c.length&&DS(c),(c.length||!n.overlay)&&this.inner.push(new PS(n.parser,c.length?n.parser.startParse(this.input,LS(u,c),c):n.parser.startParse(""),n.overlay?n.overlay.map(h=>new rr(h.from-s.from,h.to-s.from)):null,s.tree,c.length?c[0].from:s.from)),n.overlay?c.length&&(i={ranges:c,depth:0,prev:i}):o=!1}}else if(t&&(l=t.predicate(s))&&(l===!0&&(l=new rr(s.from,s.to)),l.from<l.to)){let u=t.ranges.length-1;u>=0&&t.ranges[u].to==l.from?t.ranges[u]={from:t.ranges[u].from,to:l.to}:t.ranges.push(l)}if(o&&s.firstChild())t&&t.depth++,i&&i.depth++;else for(;!s.nextSibling();){if(!s.parent())break e;if(t&&!--t.depth){let u=RS(this.ranges,t.ranges);u.length&&(DS(u),this.inner.splice(t.index,0,new PS(t.parser,t.parser.startParse(this.input,LS(t.mounts,u),u),t.ranges.map(c=>new rr(c.from-t.start,c.to-t.start)),t.target,u[0].from))),t=t.prev}i&&!--i.depth&&(i=i.prev)}}}}function Z8(r,e,t){for(let i of r){if(i.from>=t)break;if(i.to>e)return i.from<=e&&i.to>=t?2:1}return 0}function MS(r,e,t,i,s,n){if(e<t){let a=r.buffer[e+1];i.push(r.slice(e,t,a)),s.push(a-n)}}function W8(r){let{node:e}=r,t=[],i=e.context.buffer;do t.push(r.index),r.parent();while(!r.tree);let s=r.tree,n=s.children.indexOf(i),a=s.children[n],o=a.buffer,l=[n];function u(c,h,f,m,S,y){let E=t[y],C=[],_=[];MS(a,c,E,C,_,m);let b=o[E+1],T=o[E+2];l.push(C.length);let w=y?u(E+4,o[E+3],a.set.types[o[E]],b,T-b,y-1):e.toTree();return C.push(w),_.push(b-m),MS(a,o[E+3],h,C,_,m),new et(f,C,_,S)}s.children[n]=u(0,o.length,Xt.none,0,a.length,t.length-1);for(let c of l){let h=r.tree.children[c],f=r.tree.positions[c];r.yield(new fi(h,f+r.from,c,r._tree))}}class IS{constructor(e,t){this.offset=t,this.done=!1,this.cursor=e.cursor(pt.IncludeAnonymous|pt.IgnoreMounts)}moveTo(e){let{cursor:t}=this,i=e-this.offset;for(;!this.done&&t.from<i;)t.to>=e&&t.enter(i,1,pt.IgnoreOverlays|pt.ExcludeBuffers)||t.next(!1)||(this.done=!0)}hasNode(e){if(this.moveTo(e.from),!this.done&&this.cursor.from+this.offset==e.from&&this.cursor.tree)for(let t=this.cursor.tree;;){if(t==e.tree)return!0;if(t.children.length&&t.positions[0]==0&&t.children[0]instanceof et)t=t.children[0];else break}return!1}}let H8=class{constructor(e){var t;if(this.fragments=e,this.curTo=0,this.fragI=0,e.length){let i=this.curFrag=e[0];this.curTo=(t=i.tree.prop(Sg))!==null&&t!==void 0?t:i.to,this.inner=new IS(i.tree,-i.offset)}else this.curFrag=this.inner=null}hasNode(e){for(;this.curFrag&&e.from>=this.curTo;)this.nextFrag();return this.curFrag&&this.curFrag.from<=e.from&&this.curTo>=e.to&&this.inner.hasNode(e)}nextFrag(){var e;if(this.fragI++,this.fragI==this.fragments.length)this.curFrag=this.inner=null;else{let t=this.curFrag=this.fragments[this.fragI];this.curTo=(e=t.tree.prop(Sg))!==null&&e!==void 0?e:t.to,this.inner=new IS(t.tree,-t.offset)}}findMounts(e,t){var i;let s=[];if(this.inner){this.inner.cursor.moveTo(e,1);for(let n=this.inner.cursor.node;n;n=n.parent){let a=(i=n.tree)===null||i===void 0?void 0:i.prop(Qe.mounted);if(a&&a.parser==t)for(let o=this.fragI;o<this.fragments.length;o++){let l=this.fragments[o];if(l.from>=n.to)break;l.tree==this.curFrag.tree&&s.push({frag:l,pos:n.from-l.offset,mount:a})}}}return s}};function RS(r,e){let t=null,i=e;for(let s=1,n=0;s<r.length;s++){let a=r[s-1].to,o=r[s].from;for(;n<i.length;n++){let l=i[n];if(l.from>=o)break;l.to<=a||(t||(i=t=e.slice()),l.from<a?(t[n]=new rr(l.from,a),l.to>o&&t.splice(n+1,0,new rr(o,l.to))):l.to>o?t[n--]=new rr(o,l.to):t.splice(n--,1))}}return i}function Y8(r,e,t,i){let s=0,n=0,a=!1,o=!1,l=-1e9,u=[];for(;;){let c=s==r.length?1e9:a?r[s].to:r[s].from,h=n==e.length?1e9:o?e[n].to:e[n].from;if(a!=o){let f=Math.max(l,t),m=Math.min(c,h,i);f<m&&u.push(new rr(f,m))}if(l=Math.min(c,h),l==1e9)break;c==l&&(a?(a=!1,s++):a=!0),h==l&&(o?(o=!1,n++):o=!0)}return u}function LS(r,e){let t=[];for(let{pos:i,mount:s,frag:n}of r){let a=i+(s.overlay?s.overlay[0].from:0),o=a+s.tree.length,l=Math.max(n.from,a),u=Math.min(n.to,o);if(s.overlay){let c=s.overlay.map(f=>new rr(f.from+i,f.to+i)),h=Y8(e,c,l,u);for(let f=0,m=l;;f++){let S=f==h.length,y=S?u:h[f].from;if(y>m&&t.push(new ks(m,y,s.tree,-a,n.from>=m||n.openStart,n.to<=y||n.openEnd)),S)break;m=h[f].to}}else t.push(new ks(l,u,s.tree,-a,n.from>=a||n.openStart,n.to<=o||n.openEnd))}return t}let G8=0;class ji{constructor(e,t,i,s){this.name=e,this.set=t,this.base=i,this.modified=s,this.id=G8++}toString(){let{name:e}=this;for(let t of this.modified)t.name&&(e=`${t.name}(${e})`);return e}static define(e,t){let i=typeof e=="string"?e:"?";if(e instanceof ji&&(t=e),t!=null&&t.base)throw new Error("Can not derive from a modified tag");let s=new ji(i,[],null,[]);if(s.set.push(s),t)for(let n of t.set)s.set.push(n);return s}static defineModifier(e){let t=new id(e);return i=>i.modified.indexOf(t)>-1?i:id.get(i.base||i,i.modified.concat(t).sort((s,n)=>s.id-n.id))}}let K8=0;class id{constructor(e){this.name=e,this.instances=[],this.id=K8++}static get(e,t){if(!t.length)return e;let i=t[0].instances.find(o=>o.base==e&&J8(t,o.modified));if(i)return i;let s=[],n=new ji(e.name,s,e,t);for(let o of t)o.instances.push(n);let a=eF(t);for(let o of e.set)if(!o.modified.length)for(let l of a)s.push(id.get(o,l));return n}}function J8(r,e){return r.length==e.length&&r.every((t,i)=>t==e[i])}function eF(r){let e=[[]];for(let t=0;t<r.length;t++)for(let i=0,s=e.length;i<s;i++)e.push(e[i].concat(r[t]));return e.sort((t,i)=>i.length-t.length)}function Eo(r){let e=Object.create(null);for(let t in r){let i=r[t];Array.isArray(i)||(i=[i]);for(let s of t.split(" "))if(s){let n=[],a=2,o=s;for(let h=0;;){if(o=="..."&&h>0&&h+3==s.length){a=1;break}let f=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(o);if(!f)throw new RangeError("Invalid path: "+s);if(n.push(f[0]=="*"?"":f[0][0]=='"'?JSON.parse(f[0]):f[0]),h+=f[0].length,h==s.length)break;let m=s[h++];if(h==s.length&&m=="!"){a=0;break}if(m!="/")throw new RangeError("Invalid path: "+s);o=s.slice(h)}let l=n.length-1,u=n[l];if(!u)throw new RangeError("Invalid path: "+s);let c=new rd(i,a,l>0?n.slice(0,l):null);e[u]=c.sort(e[u])}}return QC.add(e)}const QC=new Qe;class rd{constructor(e,t,i,s){this.tags=e,this.mode=t,this.context=i,this.next=s}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}rd.empty=new rd([],2,null);function $C(r,e){let t=Object.create(null);for(let n of r)if(!Array.isArray(n.tag))t[n.tag.id]=n.class;else for(let a of n.tag)t[a.id]=n.class;let{scope:i,all:s=null}=e||{};return{style:n=>{let a=s;for(let o of n)for(let l of o.set){let u=t[l.id];if(u){a=a?a+" "+u:u;break}}return a},scope:i}}function tF(r,e){let t=null;for(let i of r){let s=i.style(e);s&&(t=t?t+" "+s:s)}return t}function iF(r,e,t,i=0,s=r.length){let n=new rF(i,Array.isArray(e)?e:[e],t);n.highlightRange(r.cursor(),i,s,"",n.highlighters),n.flush(s)}class rF{constructor(e,t,i){this.at=e,this.highlighters=t,this.span=i,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,i,s,n){let{type:a,from:o,to:l}=e;if(o>=i||l<=t)return;a.isTop&&(n=this.highlighters.filter(m=>!m.scope||m.scope(a)));let u=s,c=sF(e)||rd.empty,h=tF(n,c.tags);if(h&&(u&&(u+=" "),u+=h,c.mode==1&&(s+=(s?" ":"")+h)),this.startSpan(Math.max(t,o),u),c.opaque)return;let f=e.tree&&e.tree.prop(Qe.mounted);if(f&&f.overlay){let m=e.node.enter(f.overlay[0].from+o,1),S=this.highlighters.filter(E=>!E.scope||E.scope(f.tree.type)),y=e.firstChild();for(let E=0,C=o;;E++){let _=E<f.overlay.length?f.overlay[E]:null,b=_?_.from+o:l,T=Math.max(t,C),w=Math.min(i,b);if(T<w&&y)for(;e.from<w&&(this.highlightRange(e,T,w,s,n),this.startSpan(Math.min(w,e.to),u),!(e.to>=b||!e.nextSibling())););if(!_||b>i)break;C=_.to+o,C>t&&(this.highlightRange(m.cursor(),Math.max(t,_.from+o),Math.min(i,C),"",S),this.startSpan(Math.min(i,C),u))}y&&e.parent()}else if(e.firstChild()){f&&(s="");do if(!(e.to<=t)){if(e.from>=i)break;this.highlightRange(e,t,i,s,n),this.startSpan(Math.min(i,e.to),u)}while(e.nextSibling());e.parent()}}}function sF(r){let e=r.type.prop(QC);for(;e&&e.context&&!r.matchContext(e.context);)e=e.next;return e||null}const pe=ji.define,Xc=pe(),Zs=pe(),QS=pe(Zs),$S=pe(Zs),Ws=pe(),jc=pe(Ws),Ep=pe(Ws),Nr=pe(),Tn=pe(Nr),$r=pe(),Br=pe(),Tg=pe(),rl=pe(Tg),zc=pe(),U={comment:Xc,lineComment:pe(Xc),blockComment:pe(Xc),docComment:pe(Xc),name:Zs,variableName:pe(Zs),typeName:QS,tagName:pe(QS),propertyName:$S,attributeName:pe($S),className:pe(Zs),labelName:pe(Zs),namespace:pe(Zs),macroName:pe(Zs),literal:Ws,string:jc,docString:pe(jc),character:pe(jc),attributeValue:pe(jc),number:Ep,integer:pe(Ep),float:pe(Ep),bool:pe(Ws),regexp:pe(Ws),escape:pe(Ws),color:pe(Ws),url:pe(Ws),keyword:$r,self:pe($r),null:pe($r),atom:pe($r),unit:pe($r),modifier:pe($r),operatorKeyword:pe($r),controlKeyword:pe($r),definitionKeyword:pe($r),moduleKeyword:pe($r),operator:Br,derefOperator:pe(Br),arithmeticOperator:pe(Br),logicOperator:pe(Br),bitwiseOperator:pe(Br),compareOperator:pe(Br),updateOperator:pe(Br),definitionOperator:pe(Br),typeOperator:pe(Br),controlOperator:pe(Br),punctuation:Tg,separator:pe(Tg),bracket:rl,angleBracket:pe(rl),squareBracket:pe(rl),paren:pe(rl),brace:pe(rl),content:Nr,heading:Tn,heading1:pe(Tn),heading2:pe(Tn),heading3:pe(Tn),heading4:pe(Tn),heading5:pe(Tn),heading6:pe(Tn),contentSeparator:pe(Nr),list:pe(Nr),quote:pe(Nr),emphasis:pe(Nr),strong:pe(Nr),link:pe(Nr),monospace:pe(Nr),strikethrough:pe(Nr),inserted:pe(),deleted:pe(),changed:pe(),invalid:pe(),meta:zc,documentMeta:pe(zc),annotation:pe(zc),processingInstruction:pe(zc),definition:ji.defineModifier("definition"),constant:ji.defineModifier("constant"),function:ji.defineModifier("function"),standard:ji.defineModifier("standard"),local:ji.defineModifier("local"),special:ji.defineModifier("special")};for(let r in U){let e=U[r];e instanceof ji&&(e.name=r)}$C([{tag:U.link,class:"tok-link"},{tag:U.heading,class:"tok-heading"},{tag:U.emphasis,class:"tok-emphasis"},{tag:U.strong,class:"tok-strong"},{tag:U.keyword,class:"tok-keyword"},{tag:U.atom,class:"tok-atom"},{tag:U.bool,class:"tok-bool"},{tag:U.url,class:"tok-url"},{tag:U.labelName,class:"tok-labelName"},{tag:U.inserted,class:"tok-inserted"},{tag:U.deleted,class:"tok-deleted"},{tag:U.literal,class:"tok-literal"},{tag:U.string,class:"tok-string"},{tag:U.number,class:"tok-number"},{tag:[U.regexp,U.escape,U.special(U.string)],class:"tok-string2"},{tag:U.variableName,class:"tok-variableName"},{tag:U.local(U.variableName),class:"tok-variableName tok-local"},{tag:U.definition(U.variableName),class:"tok-variableName tok-definition"},{tag:U.special(U.variableName),class:"tok-variableName2"},{tag:U.definition(U.propertyName),class:"tok-propertyName tok-definition"},{tag:U.typeName,class:"tok-typeName"},{tag:U.namespace,class:"tok-namespace"},{tag:U.className,class:"tok-className"},{tag:U.macroName,class:"tok-macroName"},{tag:U.propertyName,class:"tok-propertyName"},{tag:U.operator,class:"tok-operator"},{tag:U.comment,class:"tok-comment"},{tag:U.meta,class:"tok-meta"},{tag:U.invalid,class:"tok-invalid"},{tag:U.punctuation,class:"tok-punctuation"}]);var Ap;const Rn=new Qe;function lO(r){return ve.define({combine:r?e=>e.concat(r):void 0})}const uO=new Qe;class sr{constructor(e,t,i=[],s=""){this.data=e,this.name=s,He.prototype.hasOwnProperty("tree")||Object.defineProperty(He.prototype,"tree",{get(){return ht(this)}}),this.parser=t,this.extension=[dn.of(this),He.languageData.of((n,a,o)=>{let l=BS(n,a,o),u=l.type.prop(Rn);if(!u)return[];let c=n.facet(u),h=l.type.prop(uO);if(h){let f=l.resolve(a-l.from,o);for(let m of h)if(m.test(f,n)){let S=n.facet(m.facet);return m.type=="replace"?S:S.concat(c)}}return c})].concat(i)}isActiveAt(e,t,i=-1){return BS(e,t,i).type.prop(Rn)==this.data}findRegions(e){let t=e.facet(dn);if((t==null?void 0:t.data)==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let i=[],s=(n,a)=>{if(n.prop(Rn)==this.data){i.push({from:a,to:a+n.length});return}let o=n.prop(Qe.mounted);if(o){if(o.tree.prop(Rn)==this.data){if(o.overlay)for(let l of o.overlay)i.push({from:l.from+a,to:l.to+a});else i.push({from:a,to:a+n.length});return}else if(o.overlay){let l=i.length;if(s(o.tree,o.overlay[0].from+a),i.length>l)return}}for(let l=0;l<n.children.length;l++){let u=n.children[l];u instanceof et&&s(u,n.positions[l]+a)}};return s(ht(e),0),i}get allowsNesting(){return!0}}sr.setState=$e.define();function BS(r,e,t){let i=r.facet(dn),s=ht(r).topNode;if(!i||i.allowsNesting)for(let n=s;n;n=n.enter(e,t,pt.ExcludeBuffers))n.type.isTop&&(s=n);return s}class uo extends sr{constructor(e,t,i){super(e,t,[],i),this.parser=t}static define(e){let t=lO(e.languageData);return new uo(t,e.parser.configure({props:[Rn.add(i=>i.isTop?t:void 0)]}),e.name)}configure(e,t){return new uo(this.data,this.parser.configure(e),t||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function ht(r){let e=r.field(sr.state,!1);return e?e.tree:et.empty}class nF{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let i=this.cursorPos-this.string.length;return e<i||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-i,t-i)}}let sl=null;class tu{constructor(e,t,i=[],s,n,a,o,l){this.parser=e,this.state=t,this.fragments=i,this.tree=s,this.treeLen=n,this.viewport=a,this.skipped=o,this.scheduleOn=l,this.parse=null,this.tempSkipped=[]}static create(e,t,i){return new tu(e,t,[],et.empty,0,i,[],null)}startParse(){return this.parser.startParse(new nF(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=et.empty&&this.isDone(t??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var i;if(typeof e=="number"){let s=Date.now()+e;e=()=>Date.now()>s}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let s=this.parse.advance();if(s)if(this.fragments=this.withoutTempSkipped(ks.addTree(s,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(i=this.parse.stoppedAt)!==null&&i!==void 0?i:this.state.doc.length,this.tree=s,this.parse=null,this.treeLen<(t??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(ks.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=sl;sl=this;try{return e()}finally{sl=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=NS(e,t.from,t.to);return e}changes(e,t){let{fragments:i,tree:s,treeLen:n,viewport:a,skipped:o}=this;if(this.takeTree(),!e.empty){let l=[];if(e.iterChangedRanges((u,c,h,f)=>l.push({fromA:u,toA:c,fromB:h,toB:f})),i=ks.applyChanges(i,l),s=et.empty,n=0,a={from:e.mapPos(a.from,-1),to:e.mapPos(a.to,1)},this.skipped.length){o=[];for(let u of this.skipped){let c=e.mapPos(u.from,1),h=e.mapPos(u.to,-1);c<h&&o.push({from:c,to:h})}}}return new tu(this.parser,t,i,s,n,a,o,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from:s,to:n}=this.skipped[i];s<e.to&&n>e.from&&(this.fragments=NS(this.fragments,s,n),this.skipped.splice(i--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends oO{createParse(t,i,s){let n=s[0].from,a=s[s.length-1].to;return{parsedPos:n,advance(){let l=sl;if(l){for(let u of s)l.tempSkipped.push(u);e&&(l.scheduleOn=l.scheduleOn?Promise.all([l.scheduleOn,e]):e)}return this.parsedPos=a,new et(Xt.none,[],[],a-n)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return sl}}function NS(r,e,t){return ks.applyChanges(r,[{fromA:e,toA:t,fromB:e,toB:t}])}class co{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),i=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,i)||t.takeTree(),new co(t)}static init(e){let t=Math.min(3e3,e.doc.length),i=tu.create(e.facet(dn).parser,e,{from:0,to:t});return i.work(20,t)||i.takeTree(),new co(i)}}sr.state=Gt.define({create:co.init,update(r,e){for(let t of e.effects)if(t.is(sr.setState))return t.value;return e.startState.facet(dn)!=e.state.facet(dn)?co.init(e.state):r.apply(e)}});let BC=r=>{let e=setTimeout(()=>r(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(BC=r=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(r,{timeout:400})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});const Pp=typeof navigator<"u"&&(!((Ap=navigator.scheduling)===null||Ap===void 0)&&Ap.isInputPending)?()=>navigator.scheduling.isInputPending():null,aF=qt.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(sr.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(sr.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=BC(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:s}}=this.view,n=i.field(sr.state);if(n.tree==n.context.tree&&n.context.isDone(s+1e5))return;let a=Date.now()+Math.min(this.chunkBudget,100,e&&!Pp?Math.max(25,e.timeRemaining()-5):1e9),o=n.context.treeLen<s&&i.doc.length>s+1e3,l=n.context.work(()=>Pp&&Pp()||Date.now()>a,s+(o?0:1e5));this.chunkBudget-=Date.now()-t,(l||this.chunkBudget<=0)&&(n.context.takeTree(),this.view.dispatch({effects:sr.setState.of(new co(n.context))})),this.chunkBudget>0&&!(l&&!o)&&this.scheduleWork(),this.checkAsyncSchedule(n.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>Ii(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),dn=ve.define({combine(r){return r.length?r[0]:null},enables:r=>[sr.state,aF,me.contentAttributes.compute([r],e=>{let t=e.facet(r);return t&&t.name?{"data-language":t.name}:{}})]});class iu{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}}class sd{constructor(e,t,i,s,n,a=void 0){this.name=e,this.alias=t,this.extensions=i,this.filename=s,this.loadFunc=n,this.support=a,this.loading=null}load(){return this.loading||(this.loading=this.loadFunc().then(e=>this.support=e,e=>{throw this.loading=null,e}))}static of(e){let{load:t,support:i}=e;if(!t){if(!i)throw new RangeError("Must pass either 'load' or 'support' to LanguageDescription.of");t=()=>Promise.resolve(i)}return new sd(e.name,(e.alias||[]).concat(e.name).map(s=>s.toLowerCase()),e.extensions||[],e.filename,t,i)}static matchFilename(e,t){for(let s of e)if(s.filename&&s.filename.test(t))return s;let i=/\.([^.]+)$/.exec(t);if(i){for(let s of e)if(s.extensions.indexOf(i[1])>-1)return s}return null}static matchLanguageName(e,t,i=!0){t=t.toLowerCase();for(let s of e)if(s.alias.some(n=>n==t))return s;if(i)for(let s of e)for(let n of s.alias){let a=t.indexOf(n);if(a>-1&&(n.length>2||!/\w/.test(t[a-1])&&!/\w/.test(t[a+n.length])))return s}return null}}const oF=ve.define(),Vu=ve.define({combine:r=>{if(!r.length)return"  ";let e=r[0];if(!e||/\S/.test(e)||Array.from(e).some(t=>t!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(r[0]));return e}});function nd(r){let e=r.facet(Vu);return e.charCodeAt(0)==9?r.tabSize*e.length:e.length}function ru(r,e){let t="",i=r.tabSize,s=r.facet(Vu)[0];if(s=="	"){for(;e>=i;)t+="	",e-=i;s=" "}for(let n=0;n<e;n++)t+=s;return t}function cO(r,e){r instanceof He&&(r=new rf(r));for(let i of r.state.facet(oF)){let s=i(r,e);if(s!==void 0)return s}let t=ht(r.state);return t.length>=e?lF(r,t,e):null}class rf{constructor(e,t={}){this.state=e,this.options=t,this.unit=nd(e)}lineAt(e,t=1){let i=this.state.doc.lineAt(e),{simulateBreak:s,simulateDoubleBreak:n}=this.options;return s!=null&&s>=i.from&&s<=i.to?n&&s==e?{text:"",from:e}:(t<0?s<e:s<=e)?{text:i.text.slice(s-i.from),from:s}:{text:i.text.slice(0,s-i.from),from:i.from}:i}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:i,from:s}=this.lineAt(e,t);return i.slice(e-s,Math.min(i.length,e+100-s))}column(e,t=1){let{text:i,from:s}=this.lineAt(e,t),n=this.countColumn(i,e-s),a=this.options.overrideIndentation?this.options.overrideIndentation(s):-1;return a>-1&&(n+=a-this.countColumn(i,i.search(/\S|$/))),n}countColumn(e,t=e.length){return wr(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:i,from:s}=this.lineAt(e,t),n=this.options.overrideIndentation;if(n){let a=n(s);if(a>-1)return a}return this.countColumn(i,i.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const Xu=new Qe;function lF(r,e,t){let i=e.resolveStack(t),s=e.resolveInner(t,-1).resolve(t,0).enterUnfinishedNodesBefore(t);if(s!=i.node){let n=[];for(let a=s;a&&!(a.from<i.node.from||a.to>i.node.to||a.from==i.node.from&&a.type==i.node.type);a=a.parent)n.push(a);for(let a=n.length-1;a>=0;a--)i={node:n[a],next:i}}return NC(i,r,t)}function NC(r,e,t){for(let i=r;i;i=i.next){let s=cF(i.node);if(s)return s(hO.create(e,t,i))}return 0}function uF(r){return r.pos==r.options.simulateBreak&&r.options.simulateDoubleBreak}function cF(r){let e=r.type.prop(Xu);if(e)return e;let t=r.firstChild,i;if(t&&(i=t.type.prop(Qe.closedBy))){let s=r.lastChild,n=s&&i.indexOf(s.name)>-1;return a=>FC(a,!0,1,void 0,n&&!uF(a)?s.from:void 0)}return r.parent==null?hF:null}function hF(){return 0}class hO extends rf{constructor(e,t,i){super(e.state,e.options),this.base=e,this.pos=t,this.context=i}get node(){return this.context.node}static create(e,t,i){return new hO(e,t,i)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let t=this.state.doc.lineAt(e.from);for(;;){let i=e.resolve(t.from);for(;i.parent&&i.parent.from==i.from;)i=i.parent;if(dF(i,e))break;t=this.state.doc.lineAt(i.from)}return this.lineIndent(t.from)}continue(){return NC(this.context.next,this.base,this.pos)}}function dF(r,e){for(let t=e;t;t=t.parent)if(r==t)return!0;return!1}function fF(r){let e=r.node,t=e.childAfter(e.from),i=e.lastChild;if(!t)return null;let s=r.options.simulateBreak,n=r.state.doc.lineAt(t.from),a=s==null||s<=n.from?n.to:Math.min(n.to,s);for(let o=t.to;;){let l=e.childAfter(o);if(!l||l==i)return null;if(!l.type.isSkipped){if(l.from>=a)return null;let u=/^ */.exec(n.text.slice(t.to-n.from))[0].length;return{from:t.from,to:t.to+u}}o=l.to}}function pF({closing:r,align:e=!0,units:t=1}){return i=>FC(i,e,t,r)}function FC(r,e,t,i,s){let n=r.textAfter,a=n.match(/^\s*/)[0].length,o=i&&n.slice(a,a+i.length)==i||s==r.pos+a,l=e?fF(r):null;return l?o?r.column(l.from):r.column(l.to):r.baseIndent+(o?0:r.unit*t)}const mF=r=>r.baseIndent;function gh({except:r,units:e=1}={}){return t=>{let i=r&&r.test(t.textAfter);return t.baseIndent+(i?0:e*t.unit)}}const gF=200;function OF(){return He.transactionFilter.of(r=>{if(!r.docChanged||!r.isUserEvent("input.type")&&!r.isUserEvent("input.complete"))return r;let e=r.startState.languageDataAt("indentOnInput",r.startState.selection.main.head);if(!e.length)return r;let t=r.newDoc,{head:i}=r.newSelection.main,s=t.lineAt(i);if(i>s.from+gF)return r;let n=t.sliceString(s.from,i);if(!e.some(u=>u.test(n)))return r;let{state:a}=r,o=-1,l=[];for(let{head:u}of a.selection.ranges){let c=a.doc.lineAt(u);if(c.from==o)continue;o=c.from;let h=cO(a,c.from);if(h==null)continue;let f=/^\s*/.exec(c.text)[0],m=ru(a,h);f!=m&&l.push({from:c.from,to:c.from+f.length,insert:m})}return l.length?[r,{changes:l,sequential:!0}]:r})}const UC=ve.define(),Ao=new Qe;function qC(r){let e=r.firstChild,t=r.lastChild;return e&&e.to<t.from?{from:e.to,to:t.type.isError?r.to:t.from}:null}function yF(r,e,t){let i=ht(r);if(i.length<t)return null;let s=i.resolveStack(t,1),n=null;for(let a=s;a;a=a.next){let o=a.node;if(o.to<=t||o.from>t)continue;if(n&&o.from<e)break;let l=o.type.prop(Ao);if(l&&(o.to<i.length-50||i.length==r.doc.length||!bF(o))){let u=l(o,r);u&&u.from<=t&&u.from>=e&&u.to>t&&(n=u)}}return n}function bF(r){let e=r.lastChild;return e&&e.to==r.to&&e.type.isError}function ad(r,e,t){for(let i of r.facet(UC)){let s=i(r,e,t);if(s)return s}return yF(r,e,t)}function VC(r,e){let t=e.mapPos(r.from,1),i=e.mapPos(r.to,-1);return t>=i?void 0:{from:t,to:i}}const sf=$e.define({map:VC}),ju=$e.define({map:VC});function XC(r){let e=[];for(let{head:t}of r.state.selection.ranges)e.some(i=>i.from<=t&&i.to>=t)||e.push(r.lineBlockAt(t));return e}const Jn=Gt.define({create(){return Ae.none},update(r,e){e.isUserEvent("delete")&&e.changes.iterChangedRanges((t,i)=>r=FS(r,t,i)),r=r.map(e.changes);for(let t of e.effects)if(t.is(sf)&&!vF(r,t.value.from,t.value.to)){let{preparePlaceholder:i}=e.state.facet(ZC),s=i?Ae.replace({widget:new kF(i(e.state,t.value))}):US;r=r.update({add:[s.range(t.value.from,t.value.to)]})}else t.is(ju)&&(r=r.update({filter:(i,s)=>t.value.from!=i||t.value.to!=s,filterFrom:t.value.from,filterTo:t.value.to}));return e.selection&&(r=FS(r,e.selection.main.head)),r},provide:r=>me.decorations.from(r),toJSON(r,e){let t=[];return r.between(0,e.doc.length,(i,s)=>{t.push(i,s)}),t},fromJSON(r){if(!Array.isArray(r)||r.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let t=0;t<r.length;){let i=r[t++],s=r[t++];if(typeof i!="number"||typeof s!="number")throw new RangeError("Invalid JSON for fold state");e.push(US.range(i,s))}return Ae.set(e,!0)}});function FS(r,e,t=e){let i=!1;return r.between(e,t,(s,n)=>{s<t&&n>e&&(i=!0)}),i?r.update({filterFrom:e,filterTo:t,filter:(s,n)=>s>=t||n<=e}):r}function od(r,e,t){var i;let s=null;return(i=r.field(Jn,!1))===null||i===void 0||i.between(e,t,(n,a)=>{(!s||s.from>n)&&(s={from:n,to:a})}),s}function vF(r,e,t){let i=!1;return r.between(e,e,(s,n)=>{s==e&&n==t&&(i=!0)}),i}function jC(r,e){return r.field(Jn,!1)?e:e.concat($e.appendConfig.of(WC()))}const SF=r=>{for(let e of XC(r)){let t=ad(r.state,e.from,e.to);if(t)return r.dispatch({effects:jC(r.state,[sf.of(t),zC(r,t)])}),!0}return!1},TF=r=>{if(!r.state.field(Jn,!1))return!1;let e=[];for(let t of XC(r)){let i=od(r.state,t.from,t.to);i&&e.push(ju.of(i),zC(r,i,!1))}return e.length&&r.dispatch({effects:e}),e.length>0};function zC(r,e,t=!0){let i=r.state.doc.lineAt(e.from).number,s=r.state.doc.lineAt(e.to).number;return me.announce.of(`${r.state.phrase(t?"Folded lines":"Unfolded lines")} ${i} ${r.state.phrase("to")} ${s}.`)}const _F=r=>{let{state:e}=r,t=[];for(let i=0;i<e.doc.length;){let s=r.lineBlockAt(i),n=ad(e,s.from,s.to);n&&t.push(sf.of(n)),i=(n?r.lineBlockAt(n.to):s).to+1}return t.length&&r.dispatch({effects:jC(r.state,t)}),!!t.length},xF=r=>{let e=r.state.field(Jn,!1);if(!e||!e.size)return!1;let t=[];return e.between(0,r.state.doc.length,(i,s)=>{t.push(ju.of({from:i,to:s}))}),r.dispatch({effects:t}),!0},wF=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:SF},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:TF},{key:"Ctrl-Alt-[",run:_F},{key:"Ctrl-Alt-]",run:xF}],CF={placeholderDOM:null,preparePlaceholder:null,placeholderText:"…"},ZC=ve.define({combine(r){return ns(r,CF)}});function WC(r){return[Jn,PF]}function HC(r,e){let{state:t}=r,i=t.facet(ZC),s=a=>{let o=r.lineBlockAt(r.posAtDOM(a.target)),l=od(r.state,o.from,o.to);l&&r.dispatch({effects:ju.of(l)}),a.preventDefault()};if(i.placeholderDOM)return i.placeholderDOM(r,s,e);let n=document.createElement("span");return n.textContent=i.placeholderText,n.setAttribute("aria-label",t.phrase("folded code")),n.title=t.phrase("unfold"),n.className="cm-foldPlaceholder",n.onclick=s,n}const US=Ae.replace({widget:new class extends Rs{toDOM(r){return HC(r,null)}}});class kF extends Rs{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return HC(e,this.value)}}const EF={openText:"⌄",closedText:"›",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class Dp extends Ds{constructor(e,t){super(),this.config=e,this.open=t}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}}function AF(r={}){let e={...EF,...r},t=new Dp(e,!0),i=new Dp(e,!1),s=qt.fromClass(class{constructor(a){this.from=a.viewport.from,this.markers=this.buildMarkers(a)}update(a){(a.docChanged||a.viewportChanged||a.startState.facet(dn)!=a.state.facet(dn)||a.startState.field(Jn,!1)!=a.state.field(Jn,!1)||ht(a.startState)!=ht(a.state)||e.foldingChanged(a))&&(this.markers=this.buildMarkers(a.view))}buildMarkers(a){let o=new As;for(let l of a.viewportLineBlocks){let u=od(a.state,l.from,l.to)?i:ad(a.state,l.from,l.to)?t:null;u&&o.add(l.from,l.from,u)}return o.finish()}}),{domEventHandlers:n}=e;return[s,k8({class:"cm-foldGutter",markers(a){var o;return((o=a.plugin(s))===null||o===void 0?void 0:o.markers)||Ye.empty},initialSpacer(){return new Dp(e,!1)},domEventHandlers:{...n,click:(a,o,l)=>{if(n.click&&n.click(a,o,l))return!0;let u=od(a.state,o.from,o.to);if(u)return a.dispatch({effects:ju.of(u)}),!0;let c=ad(a.state,o.from,o.to);return c?(a.dispatch({effects:sf.of(c)}),!0):!1}}}),WC()]}const PF=me.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class zu{constructor(e,t){this.specs=e;let i;function s(o){let l=ln.newName();return(i||(i=Object.create(null)))["."+l]=o,l}const n=typeof t.all=="string"?t.all:t.all?s(t.all):void 0,a=t.scope;this.scope=a instanceof sr?o=>o.prop(Rn)==a.data:a?o=>o==a:void 0,this.style=$C(e.map(o=>({tag:o.tag,class:o.class||s(Object.assign({},o,{tag:null}))})),{all:n}).style,this.module=i?new ln(i):null,this.themeType=t.themeType}static define(e,t){return new zu(e,t||{})}}const _g=ve.define(),YC=ve.define({combine(r){return r.length?[r[0]]:null}});function Mp(r){let e=r.facet(_g);return e.length?e:r.facet(YC)}function GC(r,e){let t=[MF],i;return r instanceof zu&&(r.module&&t.push(me.styleModule.of(r.module)),i=r.themeType),e!=null&&e.fallback?t.push(YC.of(r)):i?t.push(_g.computeN([me.darkTheme],s=>s.facet(me.darkTheme)==(i=="dark")?[r]:[])):t.push(_g.of(r)),t}class DF{constructor(e){this.markCache=Object.create(null),this.tree=ht(e.state),this.decorations=this.buildDeco(e,Mp(e.state)),this.decoratedTo=e.viewport.to}update(e){let t=ht(e.state),i=Mp(e.state),s=i!=Mp(e.startState),{viewport:n}=e.view,a=e.changes.mapPos(this.decoratedTo,1);t.length<n.to&&!s&&t.type==this.tree.type&&a>=n.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=a):(t!=this.tree||e.viewportChanged||s)&&(this.tree=t,this.decorations=this.buildDeco(e.view,i),this.decoratedTo=n.to)}buildDeco(e,t){if(!t||!this.tree.length)return Ae.none;let i=new As;for(let{from:s,to:n}of e.visibleRanges)iF(this.tree,t,(a,o,l)=>{i.add(a,o,this.markCache[l]||(this.markCache[l]=Ae.mark({class:l})))},s,n);return i.finish()}}const MF=Ms.high(qt.fromClass(DF,{decorations:r=>r.decorations})),IF=zu.define([{tag:U.meta,color:"#404740"},{tag:U.link,textDecoration:"underline"},{tag:U.heading,textDecoration:"underline",fontWeight:"bold"},{tag:U.emphasis,fontStyle:"italic"},{tag:U.strong,fontWeight:"bold"},{tag:U.strikethrough,textDecoration:"line-through"},{tag:U.keyword,color:"#708"},{tag:[U.atom,U.bool,U.url,U.contentSeparator,U.labelName],color:"#219"},{tag:[U.literal,U.inserted],color:"#164"},{tag:[U.string,U.deleted],color:"#a11"},{tag:[U.regexp,U.escape,U.special(U.string)],color:"#e40"},{tag:U.definition(U.variableName),color:"#00f"},{tag:U.local(U.variableName),color:"#30a"},{tag:[U.typeName,U.namespace],color:"#085"},{tag:U.className,color:"#167"},{tag:[U.special(U.variableName),U.macroName],color:"#256"},{tag:U.definition(U.propertyName),color:"#00c"},{tag:U.comment,color:"#940"},{tag:U.invalid,color:"#f00"}]),RF=me.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),KC=1e4,JC="()[]{}",ek=ve.define({combine(r){return ns(r,{afterCursor:!0,brackets:JC,maxScanDistance:KC,renderMatch:$F})}}),LF=Ae.mark({class:"cm-matchingBracket"}),QF=Ae.mark({class:"cm-nonmatchingBracket"});function $F(r){let e=[],t=r.matched?LF:QF;return e.push(t.range(r.start.from,r.start.to)),r.end&&e.push(t.range(r.end.from,r.end.to)),e}const BF=Gt.define({create(){return Ae.none},update(r,e){if(!e.docChanged&&!e.selection)return r;let t=[],i=e.state.facet(ek);for(let s of e.state.selection.ranges){if(!s.empty)continue;let n=Gr(e.state,s.head,-1,i)||s.head>0&&Gr(e.state,s.head-1,1,i)||i.afterCursor&&(Gr(e.state,s.head,1,i)||s.head<e.state.doc.length&&Gr(e.state,s.head+1,-1,i));n&&(t=t.concat(i.renderMatch(n,e.state)))}return Ae.set(t,!0)},provide:r=>me.decorations.from(r)}),NF=[BF,RF];function FF(r={}){return[ek.of(r),NF]}const tk=new Qe;function xg(r,e,t){let i=r.prop(e<0?Qe.openedBy:Qe.closedBy);if(i)return i;if(r.name.length==1){let s=t.indexOf(r.name);if(s>-1&&s%2==(e<0?1:0))return[t[s+e]]}return null}function wg(r){let e=r.type.prop(tk);return e?e(r.node):r}function Gr(r,e,t,i={}){let s=i.maxScanDistance||KC,n=i.brackets||JC,a=ht(r),o=a.resolveInner(e,t);for(let l=o;l;l=l.parent){let u=xg(l.type,t,n);if(u&&l.from<l.to){let c=wg(l);if(c&&(t>0?e>=c.from&&e<c.to:e>c.from&&e<=c.to))return UF(r,e,t,l,c,u,n)}}return qF(r,e,t,a,o.type,s,n)}function UF(r,e,t,i,s,n,a){let o=i.parent,l={from:s.from,to:s.to},u=0,c=o==null?void 0:o.cursor();if(c&&(t<0?c.childBefore(i.from):c.childAfter(i.to)))do if(t<0?c.to<=i.from:c.from>=i.to){if(u==0&&n.indexOf(c.type.name)>-1&&c.from<c.to){let h=wg(c);return{start:l,end:h?{from:h.from,to:h.to}:void 0,matched:!0}}else if(xg(c.type,t,a))u++;else if(xg(c.type,-t,a)){if(u==0){let h=wg(c);return{start:l,end:h&&h.from<h.to?{from:h.from,to:h.to}:void 0,matched:!1}}u--}}while(t<0?c.prevSibling():c.nextSibling());return{start:l,matched:!1}}function qF(r,e,t,i,s,n,a){let o=t<0?r.sliceDoc(e-1,e):r.sliceDoc(e,e+1),l=a.indexOf(o);if(l<0||l%2==0!=t>0)return null;let u={from:t<0?e-1:e,to:t>0?e+1:e},c=r.doc.iterRange(e,t>0?r.doc.length:0),h=0;for(let f=0;!c.next().done&&f<=n;){let m=c.value;t<0&&(f+=m.length);let S=e+f*t;for(let y=t>0?0:m.length-1,E=t>0?m.length:-1;y!=E;y+=t){let C=a.indexOf(m[y]);if(!(C<0||i.resolveInner(S+y,1).type!=s))if(C%2==0==t>0)h++;else{if(h==1)return{start:u,end:{from:S+y,to:S+y+1},matched:C>>1==l>>1};h--}}t>0&&(f+=m.length)}return c.done?{start:u,matched:!1}:null}const VF=Object.create(null),qS=[Xt.none],VS=[],XS=Object.create(null),XF=Object.create(null);for(let[r,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])XF[r]=jF(VF,e);function Ip(r,e){VS.indexOf(r)>-1||(VS.push(r),console.warn(e))}function jF(r,e){let t=[];for(let o of e.split(" ")){let l=[];for(let u of o.split(".")){let c=r[u]||U[u];c?typeof c=="function"?l.length?l=l.map(c):Ip(u,`Modifier ${u} used at start of tag`):l.length?Ip(u,`Tag ${u} used as modifier`):l=Array.isArray(c)?c:[c]:Ip(u,`Unknown highlighting tag ${u}`)}for(let u of l)t.push(u)}if(!t.length)return 0;let i=e.replace(/ /g,"_"),s=i+" "+t.map(o=>o.id),n=XS[s];if(n)return n.id;let a=XS[s]=Xt.define({id:qS.length,name:i,props:[Eo({[i]:t})]});return qS.push(a),a.id}yt.RTL,yt.LTR;const zF=r=>{let{state:e}=r,t=e.doc.lineAt(e.selection.main.from),i=fO(r.state,t.from);return i.line?ZF(r):i.block?HF(r):!1};function dO(r,e){return({state:t,dispatch:i})=>{if(t.readOnly)return!1;let s=r(e,t);return s?(i(t.update(s)),!0):!1}}const ZF=dO(KF,0),WF=dO(ik,0),HF=dO((r,e)=>ik(r,e,GF(e)),0);function fO(r,e){let t=r.languageDataAt("commentTokens",e,1);return t.length?t[0]:{}}const nl=50;function YF(r,{open:e,close:t},i,s){let n=r.sliceDoc(i-nl,i),a=r.sliceDoc(s,s+nl),o=/\s*$/.exec(n)[0].length,l=/^\s*/.exec(a)[0].length,u=n.length-o;if(n.slice(u-e.length,u)==e&&a.slice(l,l+t.length)==t)return{open:{pos:i-o,margin:o&&1},close:{pos:s+l,margin:l&&1}};let c,h;s-i<=2*nl?c=h=r.sliceDoc(i,s):(c=r.sliceDoc(i,i+nl),h=r.sliceDoc(s-nl,s));let f=/^\s*/.exec(c)[0].length,m=/\s*$/.exec(h)[0].length,S=h.length-m-t.length;return c.slice(f,f+e.length)==e&&h.slice(S,S+t.length)==t?{open:{pos:i+f+e.length,margin:/\s/.test(c.charAt(f+e.length))?1:0},close:{pos:s-m-t.length,margin:/\s/.test(h.charAt(S-1))?1:0}}:null}function GF(r){let e=[];for(let t of r.selection.ranges){let i=r.doc.lineAt(t.from),s=t.to<=i.to?i:r.doc.lineAt(t.to);s.from>i.from&&s.from==t.to&&(s=t.to==i.to+1?i:r.doc.lineAt(t.to-1));let n=e.length-1;n>=0&&e[n].to>i.from?e[n].to=s.to:e.push({from:i.from+/^\s*/.exec(i.text)[0].length,to:s.to})}return e}function ik(r,e,t=e.selection.ranges){let i=t.map(n=>fO(e,n.from).block);if(!i.every(n=>n))return null;let s=t.map((n,a)=>YF(e,i[a],n.from,n.to));if(r!=2&&!s.every(n=>n))return{changes:e.changes(t.map((n,a)=>s[a]?[]:[{from:n.from,insert:i[a].open+" "},{from:n.to,insert:" "+i[a].close}]))};if(r!=1&&s.some(n=>n)){let n=[];for(let a=0,o;a<s.length;a++)if(o=s[a]){let l=i[a],{open:u,close:c}=o;n.push({from:u.pos-l.open.length,to:u.pos+u.margin},{from:c.pos-c.margin,to:c.pos+l.close.length})}return{changes:n}}return null}function KF(r,e,t=e.selection.ranges){let i=[],s=-1;for(let{from:n,to:a}of t){let o=i.length,l=1e9,u=fO(e,n).line;if(u){for(let c=n;c<=a;){let h=e.doc.lineAt(c);if(h.from>s&&(n==a||a>h.from)){s=h.from;let f=/^\s*/.exec(h.text)[0].length,m=f==h.length,S=h.text.slice(f,f+u.length)==u?f:-1;f<h.text.length&&f<l&&(l=f),i.push({line:h,comment:S,token:u,indent:f,empty:m,single:!1})}c=h.to+1}if(l<1e9)for(let c=o;c<i.length;c++)i[c].indent<i[c].line.text.length&&(i[c].indent=l);i.length==o+1&&(i[o].single=!0)}}if(r!=2&&i.some(n=>n.comment<0&&(!n.empty||n.single))){let n=[];for(let{line:o,token:l,indent:u,empty:c,single:h}of i)(h||!c)&&n.push({from:o.from+u,insert:l+" "});let a=e.changes(n);return{changes:a,selection:e.selection.map(a,1)}}else if(r!=1&&i.some(n=>n.comment>=0)){let n=[];for(let{line:a,comment:o,token:l}of i)if(o>=0){let u=a.from+o,c=u+l.length;a.text[c-a.from]==" "&&c++,n.push({from:u,to:c})}return{changes:n}}return null}const Cg=Is.define(),JF=Is.define(),e6=ve.define(),rk=ve.define({combine(r){return ns(r,{minDepth:100,newGroupDelay:500,joinToEvent:(e,t)=>t},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,t)=>(i,s)=>e(i,s)||t(i,s)})}}),sk=Gt.define({create(){return Kr.empty},update(r,e){let t=e.state.facet(rk),i=e.annotation(Cg);if(i){let l=Ri.fromTransaction(e,i.selection),u=i.side,c=u==0?r.undone:r.done;return l?c=ld(c,c.length,t.minDepth,l):c=ok(c,e.startState.selection),new Kr(u==0?i.rest:c,u==0?c:i.rest)}let s=e.annotation(JF);if((s=="full"||s=="before")&&(r=r.isolate()),e.annotation(Ut.addToHistory)===!1)return e.changes.empty?r:r.addMapping(e.changes.desc);let n=Ri.fromTransaction(e),a=e.annotation(Ut.time),o=e.annotation(Ut.userEvent);return n?r=r.addChanges(n,a,o,t,e):e.selection&&(r=r.addSelection(e.startState.selection,a,o,t.newGroupDelay)),(s=="full"||s=="after")&&(r=r.isolate()),r},toJSON(r){return{done:r.done.map(e=>e.toJSON()),undone:r.undone.map(e=>e.toJSON())}},fromJSON(r){return new Kr(r.done.map(Ri.fromJSON),r.undone.map(Ri.fromJSON))}});function t6(r={}){return[sk,rk.of(r),me.domEventHandlers({beforeinput(e,t){let i=e.inputType=="historyUndo"?nk:e.inputType=="historyRedo"?kg:null;return i?(e.preventDefault(),i(t)):!1}})]}function nf(r,e){return function({state:t,dispatch:i}){if(!e&&t.readOnly)return!1;let s=t.field(sk,!1);if(!s)return!1;let n=s.pop(r,t,e);return n?(i(n),!0):!1}}const nk=nf(0,!1),kg=nf(1,!1),i6=nf(0,!0),r6=nf(1,!0);class Ri{constructor(e,t,i,s,n){this.changes=e,this.effects=t,this.mapped=i,this.startSelection=s,this.selectionsAfter=n}setSelAfter(e){return new Ri(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,i;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(t=this.mapped)===null||t===void 0?void 0:t.toJSON(),startSelection:(i=this.startSelection)===null||i===void 0?void 0:i.toJSON(),selectionsAfter:this.selectionsAfter.map(s=>s.toJSON())}}static fromJSON(e){return new Ri(e.changes&&Vt.fromJSON(e.changes),[],e.mapped&&Jr.fromJSON(e.mapped),e.startSelection&&ie.fromJSON(e.startSelection),e.selectionsAfter.map(ie.fromJSON))}static fromTransaction(e,t){let i=nr;for(let s of e.startState.facet(e6)){let n=s(e);n.length&&(i=i.concat(n))}return!i.length&&e.changes.empty?null:new Ri(e.changes.invert(e.startState.doc),i,void 0,t||e.startState.selection,nr)}static selection(e){return new Ri(void 0,nr,void 0,void 0,e)}}function ld(r,e,t,i){let s=e+1>t+20?e-t-1:0,n=r.slice(s,e);return n.push(i),n}function s6(r,e){let t=[],i=!1;return r.iterChangedRanges((s,n)=>t.push(s,n)),e.iterChangedRanges((s,n,a,o)=>{for(let l=0;l<t.length;){let u=t[l++],c=t[l++];o>=u&&a<=c&&(i=!0)}}),i}function n6(r,e){return r.ranges.length==e.ranges.length&&r.ranges.filter((t,i)=>t.empty!=e.ranges[i].empty).length===0}function ak(r,e){return r.length?e.length?r.concat(e):r:e}const nr=[],a6=200;function ok(r,e){if(r.length){let t=r[r.length-1],i=t.selectionsAfter.slice(Math.max(0,t.selectionsAfter.length-a6));return i.length&&i[i.length-1].eq(e)?r:(i.push(e),ld(r,r.length-1,1e9,t.setSelAfter(i)))}else return[Ri.selection([e])]}function o6(r){let e=r[r.length-1],t=r.slice();return t[r.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),t}function Rp(r,e){if(!r.length)return r;let t=r.length,i=nr;for(;t;){let s=l6(r[t-1],e,i);if(s.changes&&!s.changes.empty||s.effects.length){let n=r.slice(0,t);return n[t-1]=s,n}else e=s.mapped,t--,i=s.selectionsAfter}return i.length?[Ri.selection(i)]:nr}function l6(r,e,t){let i=ak(r.selectionsAfter.length?r.selectionsAfter.map(o=>o.map(e)):nr,t);if(!r.changes)return Ri.selection(i);let s=r.changes.map(e),n=e.mapDesc(r.changes,!0),a=r.mapped?r.mapped.composeDesc(n):n;return new Ri(s,$e.mapEffects(r.effects,e),a,r.startSelection.map(n),i)}const u6=/^(input\.type|delete)($|\.)/;class Kr{constructor(e,t,i=0,s=void 0){this.done=e,this.undone=t,this.prevTime=i,this.prevUserEvent=s}isolate(){return this.prevTime?new Kr(this.done,this.undone):this}addChanges(e,t,i,s,n){let a=this.done,o=a[a.length-1];return o&&o.changes&&!o.changes.empty&&e.changes&&(!i||u6.test(i))&&(!o.selectionsAfter.length&&t-this.prevTime<s.newGroupDelay&&s.joinToEvent(n,s6(o.changes,e.changes))||i=="input.type.compose")?a=ld(a,a.length-1,s.minDepth,new Ri(e.changes.compose(o.changes),ak($e.mapEffects(e.effects,o.changes),o.effects),o.mapped,o.startSelection,nr)):a=ld(a,a.length,s.minDepth,e),new Kr(a,nr,t,i)}addSelection(e,t,i,s){let n=this.done.length?this.done[this.done.length-1].selectionsAfter:nr;return n.length>0&&t-this.prevTime<s&&i==this.prevUserEvent&&i&&/^select($|\.)/.test(i)&&n6(n[n.length-1],e)?this:new Kr(ok(this.done,e),this.undone,t,i)}addMapping(e){return new Kr(Rp(this.done,e),Rp(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,i){let s=e==0?this.done:this.undone;if(s.length==0)return null;let n=s[s.length-1],a=n.selectionsAfter[0]||t.selection;if(i&&n.selectionsAfter.length)return t.update({selection:n.selectionsAfter[n.selectionsAfter.length-1],annotations:Cg.of({side:e,rest:o6(s),selection:a}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(n.changes){let o=s.length==1?nr:s.slice(0,s.length-1);return n.mapped&&(o=Rp(o,n.mapped)),t.update({changes:n.changes,selection:n.startSelection,effects:n.effects,annotations:Cg.of({side:e,rest:o,selection:a}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}Kr.empty=new Kr(nr,nr);const c6=[{key:"Mod-z",run:nk,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:kg,preventDefault:!0},{linux:"Ctrl-Shift-z",run:kg,preventDefault:!0},{key:"Mod-u",run:i6,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:r6,preventDefault:!0}];function Po(r,e){return ie.create(r.ranges.map(e),r.mainIndex)}function Ar(r,e){return r.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function Pr({state:r,dispatch:e},t){let i=Po(r.selection,t);return i.eq(r.selection,!0)?!1:(e(Ar(r,i)),!0)}function af(r,e){return ie.cursor(e?r.to:r.from)}function lk(r,e){return Pr(r,t=>t.empty?r.moveByChar(t,e):af(t,e))}function pi(r){return r.textDirectionAt(r.state.selection.main.head)==yt.LTR}const uk=r=>lk(r,!pi(r)),ck=r=>lk(r,pi(r));function hk(r,e){return Pr(r,t=>t.empty?r.moveByGroup(t,e):af(t,e))}const h6=r=>hk(r,!pi(r)),d6=r=>hk(r,pi(r));function f6(r,e,t){if(e.type.prop(t))return!0;let i=e.to-e.from;return i&&(i>2||/[^\s,.;:]/.test(r.sliceDoc(e.from,e.to)))||e.firstChild}function of(r,e,t){let i=ht(r).resolveInner(e.head),s=t?Qe.closedBy:Qe.openedBy;for(let l=e.head;;){let u=t?i.childAfter(l):i.childBefore(l);if(!u)break;f6(r,u,s)?i=u:l=t?u.to:u.from}let n=i.type.prop(s),a,o;return n&&(a=t?Gr(r,i.from,1):Gr(r,i.to,-1))&&a.matched?o=t?a.end.to:a.end.from:o=t?i.to:i.from,ie.cursor(o,t?-1:1)}const p6=r=>Pr(r,e=>of(r.state,e,!pi(r))),m6=r=>Pr(r,e=>of(r.state,e,pi(r)));function dk(r,e){return Pr(r,t=>{if(!t.empty)return af(t,e);let i=r.moveVertically(t,e);return i.head!=t.head?i:r.moveToLineBoundary(t,e)})}const fk=r=>dk(r,!1),pk=r=>dk(r,!0);function mk(r){let e=r.scrollDOM.clientHeight<r.scrollDOM.scrollHeight-2,t=0,i=0,s;if(e){for(let n of r.state.facet(me.scrollMargins)){let a=n(r);a!=null&&a.top&&(t=Math.max(a==null?void 0:a.top,t)),a!=null&&a.bottom&&(i=Math.max(a==null?void 0:a.bottom,i))}s=r.scrollDOM.clientHeight-t-i}else s=(r.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:t,marginBottom:i,selfScroll:e,height:Math.max(r.defaultLineHeight,s-5)}}function gk(r,e){let t=mk(r),{state:i}=r,s=Po(i.selection,a=>a.empty?r.moveVertically(a,e,t.height):af(a,e));if(s.eq(i.selection))return!1;let n;if(t.selfScroll){let a=r.coordsAtPos(i.selection.main.head),o=r.scrollDOM.getBoundingClientRect(),l=o.top+t.marginTop,u=o.bottom-t.marginBottom;a&&a.top>l&&a.bottom<u&&(n=me.scrollIntoView(s.main.head,{y:"start",yMargin:a.top-l}))}return r.dispatch(Ar(i,s),{effects:n}),!0}const jS=r=>gk(r,!1),Eg=r=>gk(r,!0);function pn(r,e,t){let i=r.lineBlockAt(e.head),s=r.moveToLineBoundary(e,t);if(s.head==e.head&&s.head!=(t?i.to:i.from)&&(s=r.moveToLineBoundary(e,t,!1)),!t&&s.head==i.from&&i.length){let n=/^\s*/.exec(r.state.sliceDoc(i.from,Math.min(i.from+100,i.to)))[0].length;n&&e.head!=i.from+n&&(s=ie.cursor(i.from+n))}return s}const g6=r=>Pr(r,e=>pn(r,e,!0)),O6=r=>Pr(r,e=>pn(r,e,!1)),y6=r=>Pr(r,e=>pn(r,e,!pi(r))),b6=r=>Pr(r,e=>pn(r,e,pi(r))),v6=r=>Pr(r,e=>ie.cursor(r.lineBlockAt(e.head).from,1)),S6=r=>Pr(r,e=>ie.cursor(r.lineBlockAt(e.head).to,-1));function T6(r,e,t){let i=!1,s=Po(r.selection,n=>{let a=Gr(r,n.head,-1)||Gr(r,n.head,1)||n.head>0&&Gr(r,n.head-1,1)||n.head<r.doc.length&&Gr(r,n.head+1,-1);if(!a||!a.end)return n;i=!0;let o=a.start.from==n.head?a.end.to:a.end.from;return ie.cursor(o)});return i?(e(Ar(r,s)),!0):!1}const _6=({state:r,dispatch:e})=>T6(r,e);function pr(r,e){let t=Po(r.state.selection,i=>{let s=e(i);return ie.range(i.anchor,s.head,s.goalColumn,s.bidiLevel||void 0)});return t.eq(r.state.selection)?!1:(r.dispatch(Ar(r.state,t)),!0)}function Ok(r,e){return pr(r,t=>r.moveByChar(t,e))}const yk=r=>Ok(r,!pi(r)),bk=r=>Ok(r,pi(r));function vk(r,e){return pr(r,t=>r.moveByGroup(t,e))}const x6=r=>vk(r,!pi(r)),w6=r=>vk(r,pi(r)),C6=r=>pr(r,e=>of(r.state,e,!pi(r))),k6=r=>pr(r,e=>of(r.state,e,pi(r)));function Sk(r,e){return pr(r,t=>r.moveVertically(t,e))}const Tk=r=>Sk(r,!1),_k=r=>Sk(r,!0);function xk(r,e){return pr(r,t=>r.moveVertically(t,e,mk(r).height))}const zS=r=>xk(r,!1),ZS=r=>xk(r,!0),E6=r=>pr(r,e=>pn(r,e,!0)),A6=r=>pr(r,e=>pn(r,e,!1)),P6=r=>pr(r,e=>pn(r,e,!pi(r))),D6=r=>pr(r,e=>pn(r,e,pi(r))),M6=r=>pr(r,e=>ie.cursor(r.lineBlockAt(e.head).from)),I6=r=>pr(r,e=>ie.cursor(r.lineBlockAt(e.head).to)),WS=({state:r,dispatch:e})=>(e(Ar(r,{anchor:0})),!0),HS=({state:r,dispatch:e})=>(e(Ar(r,{anchor:r.doc.length})),!0),YS=({state:r,dispatch:e})=>(e(Ar(r,{anchor:r.selection.main.anchor,head:0})),!0),GS=({state:r,dispatch:e})=>(e(Ar(r,{anchor:r.selection.main.anchor,head:r.doc.length})),!0),R6=({state:r,dispatch:e})=>(e(r.update({selection:{anchor:0,head:r.doc.length},userEvent:"select"})),!0),L6=({state:r,dispatch:e})=>{let t=lf(r).map(({from:i,to:s})=>ie.range(i,Math.min(s+1,r.doc.length)));return e(r.update({selection:ie.create(t),userEvent:"select"})),!0},Q6=({state:r,dispatch:e})=>{let t=Po(r.selection,i=>{let s=ht(r),n=s.resolveStack(i.from,1);if(i.empty){let a=s.resolveStack(i.from,-1);a.node.from>=n.node.from&&a.node.to<=n.node.to&&(n=a)}for(let a=n;a;a=a.next){let{node:o}=a;if((o.from<i.from&&o.to>=i.to||o.to>i.to&&o.from<=i.from)&&a.next)return ie.range(o.to,o.from)}return i});return t.eq(r.selection)?!1:(e(Ar(r,t)),!0)};function wk(r,e){let{state:t}=r,i=t.selection,s=t.selection.ranges.slice();for(let n of t.selection.ranges){let a=t.doc.lineAt(n.head);if(e?a.to<r.state.doc.length:a.from>0)for(let o=n;;){let l=r.moveVertically(o,e);if(l.head<a.from||l.head>a.to){s.some(u=>u.head==l.head)||s.push(l);break}else{if(l.head==o.head)break;o=l}}}return s.length==i.ranges.length?!1:(r.dispatch(Ar(t,ie.create(s,s.length-1))),!0)}const $6=r=>wk(r,!1),B6=r=>wk(r,!0),N6=({state:r,dispatch:e})=>{let t=r.selection,i=null;return t.ranges.length>1?i=ie.create([t.main]):t.main.empty||(i=ie.create([ie.cursor(t.main.head)])),i?(e(Ar(r,i)),!0):!1};function Zu(r,e){if(r.state.readOnly)return!1;let t="delete.selection",{state:i}=r,s=i.changeByRange(n=>{let{from:a,to:o}=n;if(a==o){let l=e(n);l<a?(t="delete.backward",l=Zc(r,l,!1)):l>a&&(t="delete.forward",l=Zc(r,l,!0)),a=Math.min(a,l),o=Math.max(o,l)}else a=Zc(r,a,!1),o=Zc(r,o,!0);return a==o?{range:n}:{changes:{from:a,to:o},range:ie.cursor(a,a<n.head?-1:1)}});return s.changes.empty?!1:(r.dispatch(i.update(s,{scrollIntoView:!0,userEvent:t,effects:t=="delete.selection"?me.announce.of(i.phrase("Selection deleted")):void 0})),!0)}function Zc(r,e,t){if(r instanceof me)for(let i of r.state.facet(me.atomicRanges).map(s=>s(r)))i.between(e,e,(s,n)=>{s<e&&n>e&&(e=t?n:s)});return e}const Ck=(r,e,t)=>Zu(r,i=>{let s=i.from,{state:n}=r,a=n.doc.lineAt(s),o,l;if(t&&!e&&s>a.from&&s<a.from+200&&!/[^ \t]/.test(o=a.text.slice(0,s-a.from))){if(o[o.length-1]=="	")return s-1;let u=wr(o,n.tabSize),c=u%nd(n)||nd(n);for(let h=0;h<c&&o[o.length-1-h]==" ";h++)s--;l=s}else l=si(a.text,s-a.from,e,e)+a.from,l==s&&a.number!=(e?n.doc.lines:1)?l+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(a.text.slice(l-a.from,s-a.from))&&(l=si(a.text,l-a.from,!1,!1)+a.from);return l}),Ag=r=>Ck(r,!1,!0),kk=r=>Ck(r,!0,!1),Ek=(r,e)=>Zu(r,t=>{let i=t.head,{state:s}=r,n=s.doc.lineAt(i),a=s.charCategorizer(i);for(let o=null;;){if(i==(e?n.to:n.from)){i==t.head&&n.number!=(e?s.doc.lines:1)&&(i+=e?1:-1);break}let l=si(n.text,i-n.from,e)+n.from,u=n.text.slice(Math.min(i,l)-n.from,Math.max(i,l)-n.from),c=a(u);if(o!=null&&c!=o)break;(u!=" "||i!=t.head)&&(o=c),i=l}return i}),Ak=r=>Ek(r,!1),F6=r=>Ek(r,!0),U6=r=>Zu(r,e=>{let t=r.lineBlockAt(e.head).to;return e.head<t?t:Math.min(r.state.doc.length,e.head+1)}),q6=r=>Zu(r,e=>{let t=r.moveToLineBoundary(e,!1).head;return e.head>t?t:Math.max(0,e.head-1)}),V6=r=>Zu(r,e=>{let t=r.moveToLineBoundary(e,!0).head;return e.head<t?t:Math.min(r.state.doc.length,e.head+1)}),X6=({state:r,dispatch:e})=>{if(r.readOnly)return!1;let t=r.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:ze.of(["",""])},range:ie.cursor(i.from)}));return e(r.update(t,{scrollIntoView:!0,userEvent:"input"})),!0},j6=({state:r,dispatch:e})=>{if(r.readOnly)return!1;let t=r.changeByRange(i=>{if(!i.empty||i.from==0||i.from==r.doc.length)return{range:i};let s=i.from,n=r.doc.lineAt(s),a=s==n.from?s-1:si(n.text,s-n.from,!1)+n.from,o=s==n.to?s+1:si(n.text,s-n.from,!0)+n.from;return{changes:{from:a,to:o,insert:r.doc.slice(s,o).append(r.doc.slice(a,s))},range:ie.cursor(o)}});return t.changes.empty?!1:(e(r.update(t,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function lf(r){let e=[],t=-1;for(let i of r.selection.ranges){let s=r.doc.lineAt(i.from),n=r.doc.lineAt(i.to);if(!i.empty&&i.to==n.from&&(n=r.doc.lineAt(i.to-1)),t>=s.number){let a=e[e.length-1];a.to=n.to,a.ranges.push(i)}else e.push({from:s.from,to:n.to,ranges:[i]});t=n.number+1}return e}function Pk(r,e,t){if(r.readOnly)return!1;let i=[],s=[];for(let n of lf(r)){if(t?n.to==r.doc.length:n.from==0)continue;let a=r.doc.lineAt(t?n.to+1:n.from-1),o=a.length+1;if(t){i.push({from:n.to,to:a.to},{from:n.from,insert:a.text+r.lineBreak});for(let l of n.ranges)s.push(ie.range(Math.min(r.doc.length,l.anchor+o),Math.min(r.doc.length,l.head+o)))}else{i.push({from:a.from,to:n.from},{from:n.to,insert:r.lineBreak+a.text});for(let l of n.ranges)s.push(ie.range(l.anchor-o,l.head-o))}}return i.length?(e(r.update({changes:i,scrollIntoView:!0,selection:ie.create(s,r.selection.mainIndex),userEvent:"move.line"})),!0):!1}const z6=({state:r,dispatch:e})=>Pk(r,e,!1),Z6=({state:r,dispatch:e})=>Pk(r,e,!0);function Dk(r,e,t){if(r.readOnly)return!1;let i=[];for(let s of lf(r))t?i.push({from:s.from,insert:r.doc.slice(s.from,s.to)+r.lineBreak}):i.push({from:s.to,insert:r.lineBreak+r.doc.slice(s.from,s.to)});return e(r.update({changes:i,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const W6=({state:r,dispatch:e})=>Dk(r,e,!1),H6=({state:r,dispatch:e})=>Dk(r,e,!0),Y6=r=>{if(r.state.readOnly)return!1;let{state:e}=r,t=e.changes(lf(e).map(({from:s,to:n})=>(s>0?s--:n<e.doc.length&&n++,{from:s,to:n}))),i=Po(e.selection,s=>{let n;if(r.lineWrapping){let a=r.lineBlockAt(s.head),o=r.coordsAtPos(s.head,s.assoc||1);o&&(n=a.bottom+r.documentTop-o.bottom+r.defaultLineHeight/2)}return r.moveVertically(s,!0,n)}).map(t);return r.dispatch({changes:t,selection:i,scrollIntoView:!0,userEvent:"delete.line"}),!0};function G6(r,e){if(/\(\)|\[\]|\{\}/.test(r.sliceDoc(e-1,e+1)))return{from:e,to:e};let t=ht(r).resolveInner(e),i=t.childBefore(e),s=t.childAfter(e),n;return i&&s&&i.to<=e&&s.from>=e&&(n=i.type.prop(Qe.closedBy))&&n.indexOf(s.name)>-1&&r.doc.lineAt(i.to).from==r.doc.lineAt(s.from).from&&!/\S/.test(r.sliceDoc(i.to,s.from))?{from:i.to,to:s.from}:null}const KS=Mk(!1),K6=Mk(!0);function Mk(r){return({state:e,dispatch:t})=>{if(e.readOnly)return!1;let i=e.changeByRange(s=>{let{from:n,to:a}=s,o=e.doc.lineAt(n),l=!r&&n==a&&G6(e,n);r&&(n=a=(a<=o.to?o:e.doc.lineAt(a)).to);let u=new rf(e,{simulateBreak:n,simulateDoubleBreak:!!l}),c=cO(u,n);for(c==null&&(c=wr(/^\s*/.exec(e.doc.lineAt(n).text)[0],e.tabSize));a<o.to&&/\s/.test(o.text[a-o.from]);)a++;l?{from:n,to:a}=l:n>o.from&&n<o.from+100&&!/\S/.test(o.text.slice(0,n))&&(n=o.from);let h=["",ru(e,c)];return l&&h.push(ru(e,u.lineIndent(o.from,-1))),{changes:{from:n,to:a,insert:ze.of(h)},range:ie.cursor(n+1+h[1].length)}});return t(e.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}}function pO(r,e){let t=-1;return r.changeByRange(i=>{let s=[];for(let a=i.from;a<=i.to;){let o=r.doc.lineAt(a);o.number>t&&(i.empty||i.to>o.from)&&(e(o,s,i),t=o.number),a=o.to+1}let n=r.changes(s);return{changes:s,range:ie.range(n.mapPos(i.anchor,1),n.mapPos(i.head,1))}})}const J6=({state:r,dispatch:e})=>{if(r.readOnly)return!1;let t=Object.create(null),i=new rf(r,{overrideIndentation:n=>{let a=t[n];return a??-1}}),s=pO(r,(n,a,o)=>{let l=cO(i,n.from);if(l==null)return;/\S/.test(n.text)||(l=0);let u=/^\s*/.exec(n.text)[0],c=ru(r,l);(u!=c||o.from<n.from+u.length)&&(t[n.from]=l,a.push({from:n.from,to:n.from+u.length,insert:c}))});return s.changes.empty||e(r.update(s,{userEvent:"indent"})),!0},e7=({state:r,dispatch:e})=>r.readOnly?!1:(e(r.update(pO(r,(t,i)=>{i.push({from:t.from,insert:r.facet(Vu)})}),{userEvent:"input.indent"})),!0),t7=({state:r,dispatch:e})=>r.readOnly?!1:(e(r.update(pO(r,(t,i)=>{let s=/^\s*/.exec(t.text)[0];if(!s)return;let n=wr(s,r.tabSize),a=0,o=ru(r,Math.max(0,n-nd(r)));for(;a<s.length&&a<o.length&&s.charCodeAt(a)==o.charCodeAt(a);)a++;i.push({from:t.from+a,to:t.from+s.length,insert:o.slice(a)})}),{userEvent:"delete.dedent"})),!0),i7=r=>(r.setTabFocusMode(),!0),r7=[{key:"Ctrl-b",run:uk,shift:yk,preventDefault:!0},{key:"Ctrl-f",run:ck,shift:bk},{key:"Ctrl-p",run:fk,shift:Tk},{key:"Ctrl-n",run:pk,shift:_k},{key:"Ctrl-a",run:v6,shift:M6},{key:"Ctrl-e",run:S6,shift:I6},{key:"Ctrl-d",run:kk},{key:"Ctrl-h",run:Ag},{key:"Ctrl-k",run:U6},{key:"Ctrl-Alt-h",run:Ak},{key:"Ctrl-o",run:X6},{key:"Ctrl-t",run:j6},{key:"Ctrl-v",run:Eg}],s7=[{key:"ArrowLeft",run:uk,shift:yk,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:h6,shift:x6,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:y6,shift:P6,preventDefault:!0},{key:"ArrowRight",run:ck,shift:bk,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:d6,shift:w6,preventDefault:!0},{mac:"Cmd-ArrowRight",run:b6,shift:D6,preventDefault:!0},{key:"ArrowUp",run:fk,shift:Tk,preventDefault:!0},{mac:"Cmd-ArrowUp",run:WS,shift:YS},{mac:"Ctrl-ArrowUp",run:jS,shift:zS},{key:"ArrowDown",run:pk,shift:_k,preventDefault:!0},{mac:"Cmd-ArrowDown",run:HS,shift:GS},{mac:"Ctrl-ArrowDown",run:Eg,shift:ZS},{key:"PageUp",run:jS,shift:zS},{key:"PageDown",run:Eg,shift:ZS},{key:"Home",run:O6,shift:A6,preventDefault:!0},{key:"Mod-Home",run:WS,shift:YS},{key:"End",run:g6,shift:E6,preventDefault:!0},{key:"Mod-End",run:HS,shift:GS},{key:"Enter",run:KS,shift:KS},{key:"Mod-a",run:R6},{key:"Backspace",run:Ag,shift:Ag,preventDefault:!0},{key:"Delete",run:kk,preventDefault:!0},{key:"Mod-Backspace",mac:"Alt-Backspace",run:Ak,preventDefault:!0},{key:"Mod-Delete",mac:"Alt-Delete",run:F6,preventDefault:!0},{mac:"Mod-Backspace",run:q6,preventDefault:!0},{mac:"Mod-Delete",run:V6,preventDefault:!0}].concat(r7.map(r=>({mac:r.key,run:r.run,shift:r.shift}))),n7=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:p6,shift:C6},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:m6,shift:k6},{key:"Alt-ArrowUp",run:z6},{key:"Shift-Alt-ArrowUp",run:W6},{key:"Alt-ArrowDown",run:Z6},{key:"Shift-Alt-ArrowDown",run:H6},{key:"Mod-Alt-ArrowUp",run:$6},{key:"Mod-Alt-ArrowDown",run:B6},{key:"Escape",run:N6},{key:"Mod-Enter",run:K6},{key:"Alt-l",mac:"Ctrl-l",run:L6},{key:"Mod-i",run:Q6,preventDefault:!0},{key:"Mod-[",run:t7},{key:"Mod-]",run:e7},{key:"Mod-Alt-\\",run:J6},{key:"Shift-Mod-k",run:Y6},{key:"Shift-Mod-\\",run:_6},{key:"Mod-/",run:zF},{key:"Alt-A",run:WF},{key:"Ctrl-m",mac:"Shift-Alt-m",run:i7}].concat(s7),JS=typeof String.prototype.normalize=="function"?r=>r.normalize("NFKD"):r=>r;class ho{constructor(e,t,i=0,s=e.length,n,a){this.test=a,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(i,s),this.bufferStart=i,this.normalize=n?o=>n(JS(o)):JS,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return Pi(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=V0(e),i=this.bufferStart+this.bufferPos;this.bufferPos+=Xr(e);let s=this.normalize(t);if(s.length)for(let n=0,a=i;;n++){let o=s.charCodeAt(n),l=this.match(o,a,this.bufferPos+this.bufferStart);if(n==s.length-1){if(l)return this.value=l,this;break}a==i&&n<t.length&&t.charCodeAt(n)==o&&a++}}}match(e,t,i){let s=null;for(let n=0;n<this.matches.length;n+=2){let a=this.matches[n],o=!1;this.query.charCodeAt(a)==e&&(a==this.query.length-1?s={from:this.matches[n+1],to:i}:(this.matches[n]++,o=!0)),o||(this.matches.splice(n,2),n-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?s={from:t,to:i}:this.matches.push(1,t)),s&&this.test&&!this.test(s.from,s.to,this.buffer,this.bufferStart)&&(s=null),s}}typeof Symbol<"u"&&(ho.prototype[Symbol.iterator]=function(){return this});const Ik={from:-1,to:-1,match:/.*/.exec("")},mO="gm"+(/x/.unicode==null?"":"u");class Rk{constructor(e,t,i,s=0,n=e.length){if(this.text=e,this.to=n,this.curLine="",this.done=!1,this.value=Ik,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new Lk(e,t,i,s,n);this.re=new RegExp(t,mO+(i!=null&&i.ignoreCase?"i":"")),this.test=i==null?void 0:i.test,this.iter=e.iter();let a=e.lineAt(s);this.curLineStart=a.from,this.matchPos=ud(e,s),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){let i=this.curLineStart+t.index,s=i+t[0].length;if(this.matchPos=ud(this.text,s+(i==s?1:0)),i==this.curLineStart+this.curLine.length&&this.nextLine(),(i<s||i>this.value.to)&&(!this.test||this.test(i,s,t)))return this.value={from:i,to:s,match:t},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const Lp=new WeakMap;class qa{constructor(e,t){this.from=e,this.text=t}get to(){return this.from+this.text.length}static get(e,t,i){let s=Lp.get(e);if(!s||s.from>=i||s.to<=t){let o=new qa(t,e.sliceString(t,i));return Lp.set(e,o),o}if(s.from==t&&s.to==i)return s;let{text:n,from:a}=s;return a>t&&(n=e.sliceString(t,a)+n,a=t),s.to<i&&(n+=e.sliceString(s.to,i)),Lp.set(e,new qa(a,n)),new qa(t,n.slice(t-a,i-a))}}class Lk{constructor(e,t,i,s,n){this.text=e,this.to=n,this.done=!1,this.value=Ik,this.matchPos=ud(e,s),this.re=new RegExp(t,mO+(i!=null&&i.ignoreCase?"i":"")),this.test=i==null?void 0:i.test,this.flat=qa.get(e,s,this.chunkEnd(s+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t){let i=this.flat.from+t.index,s=i+t[0].length;if((this.flat.to>=this.to||t.index+t[0].length<=this.flat.text.length-10)&&(!this.test||this.test(i,s,t)))return this.value={from:i,to:s,match:t},this.matchPos=ud(this.text,s+(i==s?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=qa.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(Rk.prototype[Symbol.iterator]=Lk.prototype[Symbol.iterator]=function(){return this});function a7(r){try{return new RegExp(r,mO),!0}catch{return!1}}function ud(r,e){if(e>=r.length)return e;let t=r.lineAt(e),i;for(;e<t.to&&(i=t.text.charCodeAt(e-t.from))>=56320&&i<57344;)e++;return e}function Pg(r){let e=String(r.state.doc.lineAt(r.state.selection.main.head).number),t=ut("input",{class:"cm-textfield",name:"line",value:e}),i=ut("form",{class:"cm-gotoLine",onkeydown:n=>{n.keyCode==27?(n.preventDefault(),r.dispatch({effects:Il.of(!1)}),r.focus()):n.keyCode==13&&(n.preventDefault(),s())},onsubmit:n=>{n.preventDefault(),s()}},ut("label",r.state.phrase("Go to line"),": ",t)," ",ut("button",{class:"cm-button",type:"submit"},r.state.phrase("go")),ut("button",{name:"close",onclick:()=>{r.dispatch({effects:Il.of(!1)}),r.focus()},"aria-label":r.state.phrase("close"),type:"button"},["×"]));function s(){let n=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(t.value);if(!n)return;let{state:a}=r,o=a.doc.lineAt(a.selection.main.head),[,l,u,c,h]=n,f=c?+c.slice(1):0,m=u?+u:o.number;if(u&&h){let E=m/100;l&&(E=E*(l=="-"?-1:1)+o.number/a.doc.lines),m=Math.round(a.doc.lines*E)}else u&&l&&(m=m*(l=="-"?-1:1)+o.number);let S=a.doc.line(Math.max(1,Math.min(a.doc.lines,m))),y=ie.cursor(S.from+Math.max(0,Math.min(f,S.length)));r.dispatch({effects:[Il.of(!1),me.scrollIntoView(y.from,{y:"center"})],selection:y}),r.focus()}return{dom:i}}const Il=$e.define(),e1=Gt.define({create(){return!0},update(r,e){for(let t of e.effects)t.is(Il)&&(r=t.value);return r},provide:r=>Kl.from(r,e=>e?Pg:null)}),o7=r=>{let e=Gl(r,Pg);if(!e){let t=[Il.of(!0)];r.state.field(e1,!1)==null&&t.push($e.appendConfig.of([e1,l7])),r.dispatch({effects:t}),e=Gl(r,Pg)}return e&&e.dom.querySelector("input").select(),!0},l7=me.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}}),u7={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},c7=ve.define({combine(r){return ns(r,u7,{highlightWordAroundCursor:(e,t)=>e||t,minSelectionLength:Math.min,maxMatches:Math.min})}});function h7(r){return[g7,m7]}const d7=Ae.mark({class:"cm-selectionMatch"}),f7=Ae.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function t1(r,e,t,i){return(t==0||r(e.sliceDoc(t-1,t))!=Tt.Word)&&(i==e.doc.length||r(e.sliceDoc(i,i+1))!=Tt.Word)}function p7(r,e,t,i){return r(e.sliceDoc(t,t+1))==Tt.Word&&r(e.sliceDoc(i-1,i))==Tt.Word}const m7=qt.fromClass(class{constructor(r){this.decorations=this.getDeco(r)}update(r){(r.selectionSet||r.docChanged||r.viewportChanged)&&(this.decorations=this.getDeco(r.view))}getDeco(r){let e=r.state.facet(c7),{state:t}=r,i=t.selection;if(i.ranges.length>1)return Ae.none;let s=i.main,n,a=null;if(s.empty){if(!e.highlightWordAroundCursor)return Ae.none;let l=t.wordAt(s.head);if(!l)return Ae.none;a=t.charCategorizer(s.head),n=t.sliceDoc(l.from,l.to)}else{let l=s.to-s.from;if(l<e.minSelectionLength||l>200)return Ae.none;if(e.wholeWords){if(n=t.sliceDoc(s.from,s.to),a=t.charCategorizer(s.head),!(t1(a,t,s.from,s.to)&&p7(a,t,s.from,s.to)))return Ae.none}else if(n=t.sliceDoc(s.from,s.to),!n)return Ae.none}let o=[];for(let l of r.visibleRanges){let u=new ho(t.doc,n,l.from,l.to);for(;!u.next().done;){let{from:c,to:h}=u.value;if((!a||t1(a,t,c,h))&&(s.empty&&c<=s.from&&h>=s.to?o.push(f7.range(c,h)):(c>=s.to||h<=s.from)&&o.push(d7.range(c,h)),o.length>e.maxMatches))return Ae.none}}return Ae.set(o)}},{decorations:r=>r.decorations}),g7=me.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),O7=({state:r,dispatch:e})=>{let{selection:t}=r,i=ie.create(t.ranges.map(s=>r.wordAt(s.head)||ie.cursor(s.head)),t.mainIndex);return i.eq(t)?!1:(e(r.update({selection:i})),!0)};function y7(r,e){let{main:t,ranges:i}=r.selection,s=r.wordAt(t.head),n=s&&s.from==t.from&&s.to==t.to;for(let a=!1,o=new ho(r.doc,e,i[i.length-1].to);;)if(o.next(),o.done){if(a)return null;o=new ho(r.doc,e,0,Math.max(0,i[i.length-1].from-1)),a=!0}else{if(a&&i.some(l=>l.from==o.value.from))continue;if(n){let l=r.wordAt(o.value.from);if(!l||l.from!=o.value.from||l.to!=o.value.to)continue}return o.value}}const b7=({state:r,dispatch:e})=>{let{ranges:t}=r.selection;if(t.some(n=>n.from===n.to))return O7({state:r,dispatch:e});let i=r.sliceDoc(t[0].from,t[0].to);if(r.selection.ranges.some(n=>r.sliceDoc(n.from,n.to)!=i))return!1;let s=y7(r,i);return s?(e(r.update({selection:r.selection.addRange(ie.range(s.from,s.to),!1),effects:me.scrollIntoView(s.to)})),!0):!1},Do=ve.define({combine(r){return ns(r,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new D7(e),scrollToMatch:e=>me.scrollIntoView(e)})}});class Qk{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||a7(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(t,i)=>i=="n"?`
`:i=="r"?"\r":i=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new _7(this):new S7(this)}getCursor(e,t=0,i){let s=e.doc?e:He.create({doc:e});return i==null&&(i=s.doc.length),this.regexp?ga(this,s,t,i):ma(this,s,t,i)}}class $k{constructor(e){this.spec=e}}function ma(r,e,t,i){return new ho(e.doc,r.unquoted,t,i,r.caseSensitive?void 0:s=>s.toLowerCase(),r.wholeWord?v7(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function v7(r,e){return(t,i,s,n)=>((n>t||n+s.length<i)&&(n=Math.max(0,t-2),s=r.sliceString(n,Math.min(r.length,i+2))),(e(cd(s,t-n))!=Tt.Word||e(hd(s,t-n))!=Tt.Word)&&(e(hd(s,i-n))!=Tt.Word||e(cd(s,i-n))!=Tt.Word))}class S7 extends $k{constructor(e){super(e)}nextMatch(e,t,i){let s=ma(this.spec,e,i,e.doc.length).nextOverlapping();if(s.done){let n=Math.min(e.doc.length,t+this.spec.unquoted.length);s=ma(this.spec,e,0,n).nextOverlapping()}return s.done||s.value.from==t&&s.value.to==i?null:s.value}prevMatchInRange(e,t,i){for(let s=i;;){let n=Math.max(t,s-1e4-this.spec.unquoted.length),a=ma(this.spec,e,n,s),o=null;for(;!a.nextOverlapping().done;)o=a.value;if(o)return o;if(n==t)return null;s-=1e4}}prevMatch(e,t,i){let s=this.prevMatchInRange(e,0,t);return s||(s=this.prevMatchInRange(e,Math.max(0,i-this.spec.unquoted.length),e.doc.length)),s&&(s.from!=t||s.to!=i)?s:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,t){let i=ma(this.spec,e,0,e.doc.length),s=[];for(;!i.next().done;){if(s.length>=t)return null;s.push(i.value)}return s}highlight(e,t,i,s){let n=ma(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(i+this.spec.unquoted.length,e.doc.length));for(;!n.next().done;)s(n.value.from,n.value.to)}}function ga(r,e,t,i){return new Rk(e.doc,r.search,{ignoreCase:!r.caseSensitive,test:r.wholeWord?T7(e.charCategorizer(e.selection.main.head)):void 0},t,i)}function cd(r,e){return r.slice(si(r,e,!1),e)}function hd(r,e){return r.slice(e,si(r,e))}function T7(r){return(e,t,i)=>!i[0].length||(r(cd(i.input,i.index))!=Tt.Word||r(hd(i.input,i.index))!=Tt.Word)&&(r(hd(i.input,i.index+i[0].length))!=Tt.Word||r(cd(i.input,i.index+i[0].length))!=Tt.Word)}class _7 extends $k{nextMatch(e,t,i){let s=ga(this.spec,e,i,e.doc.length).next();return s.done&&(s=ga(this.spec,e,0,t).next()),s.done?null:s.value}prevMatchInRange(e,t,i){for(let s=1;;s++){let n=Math.max(t,i-s*1e4),a=ga(this.spec,e,n,i),o=null;for(;!a.next().done;)o=a.value;if(o&&(n==t||o.from>n+10))return o;if(n==t)return null}}prevMatch(e,t,i){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(t,i)=>{if(i=="&")return e.match[0];if(i=="$")return"$";for(let s=i.length;s>0;s--){let n=+i.slice(0,s);if(n>0&&n<e.match.length)return e.match[n]+i.slice(s)}return t})}matchAll(e,t){let i=ga(this.spec,e,0,e.doc.length),s=[];for(;!i.next().done;){if(s.length>=t)return null;s.push(i.value)}return s}highlight(e,t,i,s){let n=ga(this.spec,e,Math.max(0,t-250),Math.min(i+250,e.doc.length));for(;!n.next().done;)s(n.value.from,n.value.to)}}const su=$e.define(),gO=$e.define(),sn=Gt.define({create(r){return new Qp(Dg(r).create(),null)},update(r,e){for(let t of e.effects)t.is(su)?r=new Qp(t.value.create(),r.panel):t.is(gO)&&(r=new Qp(r.query,t.value?OO:null));return r},provide:r=>Kl.from(r,e=>e.panel)});class Qp{constructor(e,t){this.query=e,this.panel=t}}const x7=Ae.mark({class:"cm-searchMatch"}),w7=Ae.mark({class:"cm-searchMatch cm-searchMatch-selected"}),C7=qt.fromClass(class{constructor(r){this.view=r,this.decorations=this.highlight(r.state.field(sn))}update(r){let e=r.state.field(sn);(e!=r.startState.field(sn)||r.docChanged||r.selectionSet||r.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:r,panel:e}){if(!e||!r.spec.valid)return Ae.none;let{view:t}=this,i=new As;for(let s=0,n=t.visibleRanges,a=n.length;s<a;s++){let{from:o,to:l}=n[s];for(;s<a-1&&l>n[s+1].from-500;)l=n[++s].to;r.highlight(t.state,o,l,(u,c)=>{let h=t.state.selection.ranges.some(f=>f.from==u&&f.to==c);i.add(u,c,h?w7:x7)})}return i.finish()}},{decorations:r=>r.decorations});function Wu(r){return e=>{let t=e.state.field(sn,!1);return t&&t.query.spec.valid?r(e,t):Fk(e)}}const dd=Wu((r,{query:e})=>{let{to:t}=r.state.selection.main,i=e.nextMatch(r.state,t,t);if(!i)return!1;let s=ie.single(i.from,i.to),n=r.state.facet(Do);return r.dispatch({selection:s,effects:[yO(r,i),n.scrollToMatch(s.main,r)],userEvent:"select.search"}),Nk(r),!0}),fd=Wu((r,{query:e})=>{let{state:t}=r,{from:i}=t.selection.main,s=e.prevMatch(t,i,i);if(!s)return!1;let n=ie.single(s.from,s.to),a=r.state.facet(Do);return r.dispatch({selection:n,effects:[yO(r,s),a.scrollToMatch(n.main,r)],userEvent:"select.search"}),Nk(r),!0}),k7=Wu((r,{query:e})=>{let t=e.matchAll(r.state,1e3);return!t||!t.length?!1:(r.dispatch({selection:ie.create(t.map(i=>ie.range(i.from,i.to))),userEvent:"select.search.matches"}),!0)}),E7=({state:r,dispatch:e})=>{let t=r.selection;if(t.ranges.length>1||t.main.empty)return!1;let{from:i,to:s}=t.main,n=[],a=0;for(let o=new ho(r.doc,r.sliceDoc(i,s));!o.next().done;){if(n.length>1e3)return!1;o.value.from==i&&(a=n.length),n.push(ie.range(o.value.from,o.value.to))}return e(r.update({selection:ie.create(n,a),userEvent:"select.search.matches"})),!0},i1=Wu((r,{query:e})=>{let{state:t}=r,{from:i,to:s}=t.selection.main;if(t.readOnly)return!1;let n=e.nextMatch(t,i,i);if(!n)return!1;let a=n,o=[],l,u,c=[];a.from==i&&a.to==s&&(u=t.toText(e.getReplacement(a)),o.push({from:a.from,to:a.to,insert:u}),a=e.nextMatch(t,a.from,a.to),c.push(me.announce.of(t.phrase("replaced match on line $",t.doc.lineAt(i).number)+".")));let h=r.state.changes(o);return a&&(l=ie.single(a.from,a.to).map(h),c.push(yO(r,a)),c.push(t.facet(Do).scrollToMatch(l.main,r))),r.dispatch({changes:h,selection:l,effects:c,userEvent:"input.replace"}),!0}),A7=Wu((r,{query:e})=>{if(r.state.readOnly)return!1;let t=e.matchAll(r.state,1e9).map(s=>{let{from:n,to:a}=s;return{from:n,to:a,insert:e.getReplacement(s)}});if(!t.length)return!1;let i=r.state.phrase("replaced $ matches",t.length)+".";return r.dispatch({changes:t,effects:me.announce.of(i),userEvent:"input.replace.all"}),!0});function OO(r){return r.state.facet(Do).createPanel(r)}function Dg(r,e){var t,i,s,n,a;let o=r.selection.main,l=o.empty||o.to>o.from+100?"":r.sliceDoc(o.from,o.to);if(e&&!l)return e;let u=r.facet(Do);return new Qk({search:((t=e==null?void 0:e.literal)!==null&&t!==void 0?t:u.literal)?l:l.replace(/\n/g,"\\n"),caseSensitive:(i=e==null?void 0:e.caseSensitive)!==null&&i!==void 0?i:u.caseSensitive,literal:(s=e==null?void 0:e.literal)!==null&&s!==void 0?s:u.literal,regexp:(n=e==null?void 0:e.regexp)!==null&&n!==void 0?n:u.regexp,wholeWord:(a=e==null?void 0:e.wholeWord)!==null&&a!==void 0?a:u.wholeWord})}function Bk(r){let e=Gl(r,OO);return e&&e.dom.querySelector("[main-field]")}function Nk(r){let e=Bk(r);e&&e==r.root.activeElement&&e.select()}const Fk=r=>{let e=r.state.field(sn,!1);if(e&&e.panel){let t=Bk(r);if(t&&t!=r.root.activeElement){let i=Dg(r.state,e.query.spec);i.valid&&r.dispatch({effects:su.of(i)}),t.focus(),t.select()}}else r.dispatch({effects:[gO.of(!0),e?su.of(Dg(r.state,e.query.spec)):$e.appendConfig.of(I7)]});return!0},Uk=r=>{let e=r.state.field(sn,!1);if(!e||!e.panel)return!1;let t=Gl(r,OO);return t&&t.dom.contains(r.root.activeElement)&&r.focus(),r.dispatch({effects:gO.of(!1)}),!0},P7=[{key:"Mod-f",run:Fk,scope:"editor search-panel"},{key:"F3",run:dd,shift:fd,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:dd,shift:fd,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:Uk,scope:"editor search-panel"},{key:"Mod-Shift-l",run:E7},{key:"Mod-Alt-g",run:o7},{key:"Mod-d",run:b7,preventDefault:!0}];class D7{constructor(e){this.view=e;let t=this.query=e.state.field(sn).query.spec;this.commit=this.commit.bind(this),this.searchField=ut("input",{value:t.search,placeholder:Fi(e,"Find"),"aria-label":Fi(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=ut("input",{value:t.replace,placeholder:Fi(e,"Replace"),"aria-label":Fi(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=ut("input",{type:"checkbox",name:"case",form:"",checked:t.caseSensitive,onchange:this.commit}),this.reField=ut("input",{type:"checkbox",name:"re",form:"",checked:t.regexp,onchange:this.commit}),this.wordField=ut("input",{type:"checkbox",name:"word",form:"",checked:t.wholeWord,onchange:this.commit});function i(s,n,a){return ut("button",{class:"cm-button",name:s,onclick:n,type:"button"},a)}this.dom=ut("div",{onkeydown:s=>this.keydown(s),class:"cm-search"},[this.searchField,i("next",()=>dd(e),[Fi(e,"next")]),i("prev",()=>fd(e),[Fi(e,"previous")]),i("select",()=>k7(e),[Fi(e,"all")]),ut("label",null,[this.caseField,Fi(e,"match case")]),ut("label",null,[this.reField,Fi(e,"regexp")]),ut("label",null,[this.wordField,Fi(e,"by word")]),...e.state.readOnly?[]:[ut("br"),this.replaceField,i("replace",()=>i1(e),[Fi(e,"replace")]),i("replaceAll",()=>A7(e),[Fi(e,"replace all")])],ut("button",{name:"close",onclick:()=>Uk(e),"aria-label":Fi(e,"close"),type:"button"},["×"])])}commit(){let e=new Qk({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:su.of(e)}))}keydown(e){$N(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?fd:dd)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),i1(this.view))}update(e){for(let t of e.transactions)for(let i of t.effects)i.is(su)&&!i.value.eq(this.query)&&this.setQuery(i.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(Do).top}}function Fi(r,e){return r.state.phrase(e)}const Wc=30,Hc=/[\s\.,:;?!]/;function yO(r,{from:e,to:t}){let i=r.state.doc.lineAt(e),s=r.state.doc.lineAt(t).to,n=Math.max(i.from,e-Wc),a=Math.min(s,t+Wc),o=r.state.sliceDoc(n,a);if(n!=i.from){for(let l=0;l<Wc;l++)if(!Hc.test(o[l+1])&&Hc.test(o[l])){o=o.slice(l);break}}if(a!=s){for(let l=o.length-1;l>o.length-Wc;l--)if(!Hc.test(o[l-1])&&Hc.test(o[l])){o=o.slice(0,l);break}}return me.announce.of(`${r.state.phrase("current match")}. ${o} ${r.state.phrase("on line")} ${i.number}.`)}const M7=me.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),I7=[sn,Ms.low(C7),M7];class bO{constructor(e,t,i,s){this.state=e,this.pos=t,this.explicit=i,this.view=s,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let t=ht(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),i=Math.max(t.from,this.pos-250),s=t.text.slice(i-t.from,this.pos-t.from),n=s.search(Vk(e,!1));return n<0?null:{from:i+n,to:this.pos,text:s.slice(n)}}get aborted(){return this.abortListeners==null}addEventListener(e,t,i){e=="abort"&&this.abortListeners&&(this.abortListeners.push(t),i&&i.onDocChange&&(this.abortOnDocChange=!0))}}function r1(r){let e=Object.keys(r).join(""),t=/\w/.test(e);return t&&(e=e.replace(/\w/g,"")),`[${t?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function R7(r){let e=Object.create(null),t=Object.create(null);for(let{label:s}of r){e[s[0]]=!0;for(let n=1;n<s.length;n++)t[s[n]]=!0}let i=r1(e)+r1(t)+"*$";return[new RegExp("^"+i),new RegExp(i)]}function qk(r){let e=r.map(s=>typeof s=="string"?{label:s}:s),[t,i]=e.every(s=>/^\w+$/.test(s.label))?[/\w*$/,/\w+$/]:R7(e);return s=>{let n=s.matchBefore(i);return n||s.explicit?{from:n?n.from:s.pos,options:e,validFor:t}:null}}function L7(r,e){return t=>{for(let i=ht(t.state).resolveInner(t.pos,-1);i;i=i.parent){if(r.indexOf(i.name)>-1)return null;if(i.type.isTop)break}return e(t)}}class s1{constructor(e,t,i,s){this.completion=e,this.source=t,this.match=i,this.score=s}}function zn(r){return r.selection.main.from}function Vk(r,e){var t;let{source:i}=r,s=e&&i[0]!="^",n=i[i.length-1]!="$";return!s&&!n?r:new RegExp(`${s?"^":""}(?:${i})${n?"$":""}`,(t=r.flags)!==null&&t!==void 0?t:r.ignoreCase?"i":"")}const vO=Is.define();function Q7(r,e,t,i){let{main:s}=r.selection,n=t-s.from,a=i-s.from;return{...r.changeByRange(o=>{if(o!=s&&t!=i&&r.sliceDoc(o.from+n,o.from+a)!=r.sliceDoc(t,i))return{range:o};let l=r.toText(e);return{changes:{from:o.from+n,to:i==s.from?o.to:o.from+a,insert:l},range:ie.cursor(o.from+n+l.length)}}),scrollIntoView:!0,userEvent:"input.complete"}}const n1=new WeakMap;function $7(r){if(!Array.isArray(r))return r;let e=n1.get(r);return e||n1.set(r,e=qk(r)),e}const pd=$e.define(),nu=$e.define();class B7{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let t=0;t<e.length;){let i=Pi(e,t),s=Xr(i);this.chars.push(i);let n=e.slice(t,t+s),a=n.toUpperCase();this.folded.push(Pi(a==n?n.toLowerCase():a,0)),t+=s}this.astral=e.length!=this.chars.length}ret(e,t){return this.score=e,this.matched=t,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:t,folded:i,any:s,precise:n,byWord:a}=this;if(t.length==1){let _=Pi(e,0),b=Xr(_),T=b==e.length?0:-100;if(_!=t[0])if(_==i[0])T+=-200;else return null;return this.ret(T,[0,b])}let o=e.indexOf(this.pattern);if(o==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let l=t.length,u=0;if(o<0){for(let _=0,b=Math.min(e.length,200);_<b&&u<l;){let T=Pi(e,_);(T==t[u]||T==i[u])&&(s[u++]=_),_+=Xr(T)}if(u<l)return null}let c=0,h=0,f=!1,m=0,S=-1,y=-1,E=/[a-z]/.test(e),C=!0;for(let _=0,b=Math.min(e.length,200),T=0;_<b&&h<l;){let w=Pi(e,_);o<0&&(c<l&&w==t[c]&&(n[c++]=_),m<l&&(w==t[m]||w==i[m]?(m==0&&(S=_),y=_+1,m++):m=0));let A,I=w<255?w>=48&&w<=57||w>=97&&w<=122?2:w>=65&&w<=90?1:0:(A=V0(w))!=A.toLowerCase()?1:A!=A.toUpperCase()?2:0;(!_||I==1&&E||T==0&&I!=0)&&(t[h]==w||i[h]==w&&(f=!0)?a[h++]=_:a.length&&(C=!1)),T=I,_+=Xr(w)}return h==l&&a[0]==0&&C?this.result(-100+(f?-200:0),a,e):m==l&&S==0?this.ret(-200-e.length+(y==e.length?0:-100),[0,y]):o>-1?this.ret(-700-e.length,[o,o+this.pattern.length]):m==l?this.ret(-900-e.length,[S,y]):h==l?this.result(-100+(f?-200:0)+-700+(C?0:-1100),a,e):t.length==2?null:this.result((s[0]?-700:0)+-200+-1100,s,e)}result(e,t,i){let s=[],n=0;for(let a of t){let o=a+(this.astral?Xr(Pi(i,a)):1);n&&s[n-1]==a?s[n-1]=o:(s[n++]=a,s[n++]=o)}return this.ret(e-i.length,s)}}class N7{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let t=e.slice(0,this.pattern.length),i=t==this.pattern?0:t.toLowerCase()==this.folded?-200:null;return i==null?null:(this.matched=[0,t.length],this.score=i+(e.length==this.pattern.length?0:-100),this)}}const Ht=ve.define({combine(r){return ns(r,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:F7,filterStrict:!1,compareCompletions:(e,t)=>e.label.localeCompare(t.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,tooltipClass:(e,t)=>i=>a1(e(i),t(i)),optionClass:(e,t)=>i=>a1(e(i),t(i)),addToOptions:(e,t)=>e.concat(t),filterStrict:(e,t)=>e||t})}});function a1(r,e){return r?e?r+" "+e:r:e}function F7(r,e,t,i,s,n){let a=r.textDirection==yt.RTL,o=a,l=!1,u="top",c,h,f=e.left-s.left,m=s.right-e.right,S=i.right-i.left,y=i.bottom-i.top;if(o&&f<Math.min(S,m)?o=!1:!o&&m<Math.min(S,f)&&(o=!0),S<=(o?f:m))c=Math.max(s.top,Math.min(t.top,s.bottom-y))-e.top,h=Math.min(400,o?f:m);else{l=!0,h=Math.min(400,(a?e.right:s.right-e.left)-30);let _=s.bottom-e.bottom;_>=y||_>e.top?c=t.bottom-e.top:(u="bottom",c=e.bottom-t.top)}let E=(e.bottom-e.top)/n.offsetHeight,C=(e.right-e.left)/n.offsetWidth;return{style:`${u}: ${c/E}px; max-width: ${h/C}px`,class:"cm-completionInfo-"+(l?a?"left-narrow":"right-narrow":o?"left":"right")}}function U7(r){let e=r.addToOptions.slice();return r.icons&&e.push({render(t){let i=document.createElement("div");return i.classList.add("cm-completionIcon"),t.type&&i.classList.add(...t.type.split(/\s+/g).map(s=>"cm-completionIcon-"+s)),i.setAttribute("aria-hidden","true"),i},position:20}),e.push({render(t,i,s,n){let a=document.createElement("span");a.className="cm-completionLabel";let o=t.displayLabel||t.label,l=0;for(let u=0;u<n.length;){let c=n[u++],h=n[u++];c>l&&a.appendChild(document.createTextNode(o.slice(l,c)));let f=a.appendChild(document.createElement("span"));f.appendChild(document.createTextNode(o.slice(c,h))),f.className="cm-completionMatchedText",l=h}return l<o.length&&a.appendChild(document.createTextNode(o.slice(l))),a},position:50},{render(t){if(!t.detail)return null;let i=document.createElement("span");return i.className="cm-completionDetail",i.textContent=t.detail,i},position:80}),e.sort((t,i)=>t.position-i.position).map(t=>t.render)}function $p(r,e,t){if(r<=t)return{from:0,to:r};if(e<0&&(e=0),e<=r>>1){let s=Math.floor(e/t);return{from:s*t,to:(s+1)*t}}let i=Math.floor((r-e)/t);return{from:r-(i+1)*t,to:r-i*t}}class q7{constructor(e,t,i){this.view=e,this.stateField=t,this.applyCompletion=i,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:l=>this.placeInfo(l),key:this},this.space=null,this.currentClass="";let s=e.state.field(t),{options:n,selected:a}=s.open,o=e.state.facet(Ht);this.optionContent=U7(o),this.optionClass=o.optionClass,this.tooltipClass=o.tooltipClass,this.range=$p(n.length,a,o.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",l=>{let{options:u}=e.state.field(t).open;for(let c=l.target,h;c&&c!=this.dom;c=c.parentNode)if(c.nodeName=="LI"&&(h=/-(\d+)$/.exec(c.id))&&+h[1]<u.length){this.applyCompletion(e,u[+h[1]]),l.preventDefault();return}}),this.dom.addEventListener("focusout",l=>{let u=e.state.field(this.stateField,!1);u&&u.tooltip&&e.state.facet(Ht).closeOnBlur&&l.relatedTarget!=e.contentDOM&&e.dispatch({effects:nu.of(null)})}),this.showOptions(n,s.id)}mount(){this.updateSel()}showOptions(e,t){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,t,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var t;let i=e.state.field(this.stateField),s=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),i!=s){let{options:n,selected:a,disabled:o}=i.open;(!s.open||s.open.options!=n)&&(this.range=$p(n.length,a,e.state.facet(Ht).maxRenderedOptions),this.showOptions(n,i.id)),this.updateSel(),o!=((t=s.open)===null||t===void 0?void 0:t.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!o)}}updateTooltipClass(e){let t=this.tooltipClass(e);if(t!=this.currentClass){for(let i of this.currentClass.split(" "))i&&this.dom.classList.remove(i);for(let i of t.split(" "))i&&this.dom.classList.add(i);this.currentClass=t}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;if((t.selected>-1&&t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=$p(t.options.length,t.selected,this.view.state.facet(Ht).maxRenderedOptions),this.showOptions(t.options,e.id)),this.updateSelectedOption(t.selected)){this.destroyInfo();let{completion:i}=t.options[t.selected],{info:s}=i;if(!s)return;let n=typeof s=="string"?document.createTextNode(s):s(i);if(!n)return;"then"in n?n.then(a=>{a&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(a,i)}).catch(a=>Ii(this.view.state,a,"completion info")):this.addInfoPane(n,i)}}addInfoPane(e,t){this.destroyInfo();let i=this.info=document.createElement("div");if(i.className="cm-tooltip cm-completionInfo",e.nodeType!=null)i.appendChild(e),this.infoDestroy=null;else{let{dom:s,destroy:n}=e;i.appendChild(s),this.infoDestroy=n||null}this.dom.appendChild(i),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let t=null;for(let i=this.list.firstChild,s=this.range.from;i;i=i.nextSibling,s++)i.nodeName!="LI"||!i.id?s--:s==e?i.hasAttribute("aria-selected")||(i.setAttribute("aria-selected","true"),t=i):i.hasAttribute("aria-selected")&&i.removeAttribute("aria-selected");return t&&X7(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),i=this.info.getBoundingClientRect(),s=e.getBoundingClientRect(),n=this.space;if(!n){let a=this.dom.ownerDocument.documentElement;n={left:0,top:0,right:a.clientWidth,bottom:a.clientHeight}}return s.top>Math.min(n.bottom,t.bottom)-10||s.bottom<Math.max(n.top,t.top)+10?null:this.view.state.facet(Ht).positionInfo(this.view,t,s,i,n,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,t,i){const s=document.createElement("ul");s.id=t,s.setAttribute("role","listbox"),s.setAttribute("aria-expanded","true"),s.setAttribute("aria-label",this.view.state.phrase("Completions")),s.addEventListener("mousedown",a=>{a.target==s&&a.preventDefault()});let n=null;for(let a=i.from;a<i.to;a++){let{completion:o,match:l}=e[a],{section:u}=o;if(u){let f=typeof u=="string"?u:u.name;if(f!=n&&(a>i.from||i.from==0))if(n=f,typeof u!="string"&&u.header)s.appendChild(u.header(u));else{let m=s.appendChild(document.createElement("completion-section"));m.textContent=f}}const c=s.appendChild(document.createElement("li"));c.id=t+"-"+a,c.setAttribute("role","option");let h=this.optionClass(o);h&&(c.className=h);for(let f of this.optionContent){let m=f(o,this.view.state,this.view,l);m&&c.appendChild(m)}}return i.from&&s.classList.add("cm-completionListIncompleteTop"),i.to<e.length&&s.classList.add("cm-completionListIncompleteBottom"),s}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function V7(r,e){return t=>new q7(t,r,e)}function X7(r,e){let t=r.getBoundingClientRect(),i=e.getBoundingClientRect(),s=t.height/r.offsetHeight;i.top<t.top?r.scrollTop-=(t.top-i.top)/s:i.bottom>t.bottom&&(r.scrollTop+=(i.bottom-t.bottom)/s)}function o1(r){return(r.boost||0)*100+(r.apply?10:0)+(r.info?5:0)+(r.type?1:0)}function j7(r,e){let t=[],i=null,s=null,n=c=>{t.push(c);let{section:h}=c.completion;if(h){i||(i=[]);let f=typeof h=="string"?h:h.name;i.some(m=>m.name==f)||i.push(typeof h=="string"?{name:f}:h)}},a=e.facet(Ht);for(let c of r)if(c.hasResult()){let h=c.result.getMatch;if(c.result.filter===!1)for(let f of c.result.options)n(new s1(f,c.source,h?h(f):[],1e9-t.length));else{let f=e.sliceDoc(c.from,c.to),m,S=a.filterStrict?new N7(f):new B7(f);for(let y of c.result.options)if(m=S.match(y.label)){let E=y.displayLabel?h?h(y,m.matched):[]:m.matched,C=m.score+(y.boost||0);if(n(new s1(y,c.source,E,C)),typeof y.section=="object"&&y.section.rank==="dynamic"){let{name:_}=y.section;s||(s=Object.create(null)),s[_]=Math.max(C,s[_]||-1e9)}}}}if(i){let c=Object.create(null),h=0,f=(m,S)=>(m.rank==="dynamic"&&S.rank==="dynamic"?s[S.name]-s[m.name]:0)||(typeof m.rank=="number"?m.rank:1e9)-(typeof S.rank=="number"?S.rank:1e9)||(m.name<S.name?-1:1);for(let m of i.sort(f))h-=1e5,c[m.name]=h;for(let m of t){let{section:S}=m.completion;S&&(m.score+=c[typeof S=="string"?S:S.name])}}let o=[],l=null,u=a.compareCompletions;for(let c of t.sort((h,f)=>f.score-h.score||u(h.completion,f.completion))){let h=c.completion;!l||l.label!=h.label||l.detail!=h.detail||l.type!=null&&h.type!=null&&l.type!=h.type||l.apply!=h.apply||l.boost!=h.boost?o.push(c):o1(c.completion)>o1(l)&&(o[o.length-1]=c),l=c.completion}return o}class wa{constructor(e,t,i,s,n,a){this.options=e,this.attrs=t,this.tooltip=i,this.timestamp=s,this.selected=n,this.disabled=a}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new wa(this.options,l1(t,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,t,i,s,n,a){if(s&&!a&&e.some(u=>u.isPending))return s.setDisabled();let o=j7(e,t);if(!o.length)return s&&e.some(u=>u.isPending)?s.setDisabled():null;let l=t.facet(Ht).selectOnOpen?0:-1;if(s&&s.selected!=l&&s.selected!=-1){let u=s.options[s.selected].completion;for(let c=0;c<o.length;c++)if(o[c].completion==u){l=c;break}}return new wa(o,l1(i,l),{pos:e.reduce((u,c)=>c.hasResult()?Math.min(u,c.from):u,1e8),create:G7,above:n.aboveCursor},s?s.timestamp:Date.now(),l,!1)}map(e){return new wa(this.options,this.attrs,{...this.tooltip,pos:e.mapPos(this.tooltip.pos)},this.timestamp,this.selected,this.disabled)}setDisabled(){return new wa(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class md{constructor(e,t,i){this.active=e,this.id=t,this.open=i}static start(){return new md(H7,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:t}=e,i=t.facet(Ht),n=(i.override||t.languageDataAt("autocomplete",zn(t)).map($7)).map(l=>(this.active.find(c=>c.source==l)||new ar(l,this.active.some(c=>c.state!=0)?1:0)).update(e,i));n.length==this.active.length&&n.every((l,u)=>l==this.active[u])&&(n=this.active);let a=this.open,o=e.effects.some(l=>l.is(SO));a&&e.docChanged&&(a=a.map(e.changes)),e.selection||n.some(l=>l.hasResult()&&e.changes.touchesRange(l.from,l.to))||!z7(n,this.active)||o?a=wa.build(n,t,this.id,a,i,o):a&&a.disabled&&!n.some(l=>l.isPending)&&(a=null),!a&&n.every(l=>!l.isPending)&&n.some(l=>l.hasResult())&&(n=n.map(l=>l.hasResult()?new ar(l.source,0):l));for(let l of e.effects)l.is(jk)&&(a=a&&a.setSelected(l.value,this.id));return n==this.active&&a==this.open?this:new md(n,this.id,a)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?Z7:W7}}function z7(r,e){if(r==e)return!0;for(let t=0,i=0;;){for(;t<r.length&&!r[t].hasResult();)t++;for(;i<e.length&&!e[i].hasResult();)i++;let s=t==r.length,n=i==e.length;if(s||n)return s==n;if(r[t++].result!=e[i++].result)return!1}}const Z7={"aria-autocomplete":"list"},W7={};function l1(r,e){let t={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":r};return e>-1&&(t["aria-activedescendant"]=r+"-"+e),t}const H7=[];function Xk(r,e){if(r.isUserEvent("input.complete")){let i=r.annotation(vO);if(i&&e.activateOnCompletion(i))return 12}let t=r.isUserEvent("input.type");return t&&e.activateOnTyping?5:t?1:r.isUserEvent("delete.backward")?2:r.selection?8:r.docChanged?16:0}class ar{constructor(e,t,i=!1){this.source=e,this.state=t,this.explicit=i}hasResult(){return!1}get isPending(){return this.state==1}update(e,t){let i=Xk(e,t),s=this;(i&8||i&16&&this.touches(e))&&(s=new ar(s.source,0)),i&4&&s.state==0&&(s=new ar(this.source,1)),s=s.updateFor(e,i);for(let n of e.effects)if(n.is(pd))s=new ar(s.source,1,n.value);else if(n.is(nu))s=new ar(s.source,0);else if(n.is(SO))for(let a of n.value)a.source==s.source&&(s=a);return s}updateFor(e,t){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange(zn(e.state))}}class Va extends ar{constructor(e,t,i,s,n,a){super(e,3,t),this.limit=i,this.result=s,this.from=n,this.to=a}hasResult(){return!0}updateFor(e,t){var i;if(!(t&3))return this.map(e.changes);let s=this.result;s.map&&!e.changes.empty&&(s=s.map(s,e.changes));let n=e.changes.mapPos(this.from),a=e.changes.mapPos(this.to,1),o=zn(e.state);if(o>a||!s||t&2&&(zn(e.startState)==this.from||o<this.limit))return new ar(this.source,t&4?1:0);let l=e.changes.mapPos(this.limit);return Y7(s.validFor,e.state,n,a)?new Va(this.source,this.explicit,l,s,n,a):s.update&&(s=s.update(s,n,a,new bO(e.state,o,!1)))?new Va(this.source,this.explicit,l,s,s.from,(i=s.to)!==null&&i!==void 0?i:zn(e.state)):new ar(this.source,1,this.explicit)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new Va(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new ar(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}function Y7(r,e,t,i){if(!r)return!1;let s=e.sliceDoc(t,i);return typeof r=="function"?r(s,t,i,e):Vk(r,!0).test(s)}const SO=$e.define({map(r,e){return r.map(t=>t.map(e))}}),jk=$e.define(),Di=Gt.define({create(){return md.start()},update(r,e){return r.update(e)},provide:r=>[rO.from(r,e=>e.tooltip),me.contentAttributes.from(r,e=>e.attrs)]});function TO(r,e){const t=e.completion.apply||e.completion.label;let i=r.state.field(Di).active.find(s=>s.source==e.source);return i instanceof Va?(typeof t=="string"?r.dispatch({...Q7(r.state,t,i.from,i.to),annotations:vO.of(e.completion)}):t(r,e.completion,i.from,i.to),!0):!1}const G7=V7(Di,TO);function Yc(r,e="option"){return t=>{let i=t.state.field(Di,!1);if(!i||!i.open||i.open.disabled||Date.now()-i.open.timestamp<t.state.facet(Ht).interactionDelay)return!1;let s=1,n;e=="page"&&(n=CC(t,i.open.tooltip))&&(s=Math.max(2,Math.floor(n.dom.offsetHeight/n.dom.querySelector("li").offsetHeight)-1));let{length:a}=i.open.options,o=i.open.selected>-1?i.open.selected+s*(r?1:-1):r?0:a-1;return o<0?o=e=="page"?0:a-1:o>=a&&(o=e=="page"?a-1:0),t.dispatch({effects:jk.of(o)}),!0}}const K7=r=>{let e=r.state.field(Di,!1);return r.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<r.state.facet(Ht).interactionDelay?!1:TO(r,e.open.options[e.open.selected])},Bp=r=>r.state.field(Di,!1)?(r.dispatch({effects:pd.of(!0)}),!0):!1,J7=r=>{let e=r.state.field(Di,!1);return!e||!e.active.some(t=>t.state!=0)?!1:(r.dispatch({effects:nu.of(null)}),!0)};class eU{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}}const tU=50,iU=1e3,rU=qt.fromClass(class{constructor(r){this.view=r,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let e of r.state.field(Di).active)e.isPending&&this.startQuery(e)}update(r){let e=r.state.field(Di),t=r.state.facet(Ht);if(!r.selectionSet&&!r.docChanged&&r.startState.field(Di)==e)return;let i=r.transactions.some(n=>{let a=Xk(n,t);return a&8||(n.selection||n.docChanged)&&!(a&3)});for(let n=0;n<this.running.length;n++){let a=this.running[n];if(i||a.context.abortOnDocChange&&r.docChanged||a.updates.length+r.transactions.length>tU&&Date.now()-a.time>iU){for(let o of a.context.abortListeners)try{o()}catch(l){Ii(this.view.state,l)}a.context.abortListeners=null,this.running.splice(n--,1)}else a.updates.push(...r.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),r.transactions.some(n=>n.effects.some(a=>a.is(pd)))&&(this.pendingStart=!0);let s=this.pendingStart?50:t.activateOnTypingDelay;if(this.debounceUpdate=e.active.some(n=>n.isPending&&!this.running.some(a=>a.active.source==n.source))?setTimeout(()=>this.startUpdate(),s):-1,this.composing!=0)for(let n of r.transactions)n.isUserEvent("input.type")?this.composing=2:this.composing==2&&n.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:r}=this.view,e=r.field(Di);for(let t of e.active)t.isPending&&!this.running.some(i=>i.active.source==t.source)&&this.startQuery(t);this.running.length&&e.open&&e.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(Ht).updateSyncTime))}startQuery(r){let{state:e}=this.view,t=zn(e),i=new bO(e,t,r.explicit,this.view),s=new eU(r,i);this.running.push(s),Promise.resolve(r.source(i)).then(n=>{s.context.aborted||(s.done=n||null,this.scheduleAccept())},n=>{this.view.dispatch({effects:nu.of(null)}),Ii(this.view.state,n)})}scheduleAccept(){this.running.every(r=>r.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(Ht).updateSyncTime))}accept(){var r;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],t=this.view.state.facet(Ht),i=this.view.state.field(Di);for(let s=0;s<this.running.length;s++){let n=this.running[s];if(n.done===void 0)continue;if(this.running.splice(s--,1),n.done){let o=zn(n.updates.length?n.updates[0].startState:this.view.state),l=Math.min(o,n.done.from+(n.active.explicit?0:1)),u=new Va(n.active.source,n.active.explicit,l,n.done,n.done.from,(r=n.done.to)!==null&&r!==void 0?r:o);for(let c of n.updates)u=u.update(c,t);if(u.hasResult()){e.push(u);continue}}let a=i.active.find(o=>o.source==n.active.source);if(a&&a.isPending)if(n.done==null){let o=new ar(n.active.source,0);for(let l of n.updates)o=o.update(l,t);o.isPending||e.push(o)}else this.startQuery(a)}(e.length||i.open&&i.open.disabled)&&this.view.dispatch({effects:SO.of(e)})}},{eventHandlers:{blur(r){let e=this.view.state.field(Di,!1);if(e&&e.tooltip&&this.view.state.facet(Ht).closeOnBlur){let t=e.open&&CC(this.view,e.open.tooltip);(!t||!t.dom.contains(r.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:nu.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:pd.of(!1)}),20),this.composing=0}}}),sU=typeof navigator=="object"&&/Win/.test(navigator.platform),nU=Ms.highest(me.domEventHandlers({keydown(r,e){let t=e.state.field(Di,!1);if(!t||!t.open||t.open.disabled||t.open.selected<0||r.key.length>1||r.ctrlKey&&!(sU&&r.altKey)||r.metaKey)return!1;let i=t.open.options[t.open.selected],s=t.active.find(a=>a.source==i.source),n=i.completion.commitCharacters||s.result.commitCharacters;return n&&n.indexOf(r.key)>-1&&TO(e,i),!1}})),zk=me.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"···"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'ƒ'"}},".cm-completionIcon-class":{"&:after":{content:"'○'"}},".cm-completionIcon-interface":{"&:after":{content:"'◌'"}},".cm-completionIcon-variable":{"&:after":{content:"'𝑥'"}},".cm-completionIcon-constant":{"&:after":{content:"'𝐶'"}},".cm-completionIcon-type":{"&:after":{content:"'𝑡'"}},".cm-completionIcon-enum":{"&:after":{content:"'∪'"}},".cm-completionIcon-property":{"&:after":{content:"'□'"}},".cm-completionIcon-keyword":{"&:after":{content:"'🔑︎'"}},".cm-completionIcon-namespace":{"&:after":{content:"'▢'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class aU{constructor(e,t,i,s){this.field=e,this.line=t,this.from=i,this.to=s}}class _O{constructor(e,t,i){this.field=e,this.from=t,this.to=i}map(e){let t=e.mapPos(this.from,-1,ii.TrackDel),i=e.mapPos(this.to,1,ii.TrackDel);return t==null||i==null?null:new _O(this.field,t,i)}}class xO{constructor(e,t){this.lines=e,this.fieldPositions=t}instantiate(e,t){let i=[],s=[t],n=e.doc.lineAt(t),a=/^\s*/.exec(n.text)[0];for(let l of this.lines){if(i.length){let u=a,c=/^\t*/.exec(l)[0].length;for(let h=0;h<c;h++)u+=e.facet(Vu);s.push(t+u.length-c),l=u+l.slice(c)}i.push(l),t+=l.length+1}let o=this.fieldPositions.map(l=>new _O(l.field,s[l.line]+l.from,s[l.line]+l.to));return{text:i,ranges:o}}static parse(e){let t=[],i=[],s=[],n;for(let a of e.split(/\r\n?|\n/)){for(;n=/[#$]\{(?:(\d+)(?::([^{}]*))?|((?:\\[{}]|[^{}])*))\}/.exec(a);){let o=n[1]?+n[1]:null,l=n[2]||n[3]||"",u=-1,c=l.replace(/\\[{}]/g,h=>h[1]);for(let h=0;h<t.length;h++)(o!=null?t[h].seq==o:c&&t[h].name==c)&&(u=h);if(u<0){let h=0;for(;h<t.length&&(o==null||t[h].seq!=null&&t[h].seq<o);)h++;t.splice(h,0,{seq:o,name:c}),u=h;for(let f of s)f.field>=u&&f.field++}for(let h of s)if(h.line==i.length&&h.from>n.index){let f=n[2]?3+(n[1]||"").length:2;h.from-=f,h.to-=f}s.push(new aU(u,i.length,n.index,n.index+c.length)),a=a.slice(0,n.index)+l+a.slice(n.index+n[0].length)}a=a.replace(/\\([{}])/g,(o,l,u)=>{for(let c of s)c.line==i.length&&c.from>u&&(c.from--,c.to--);return l}),i.push(a)}return new xO(i,s)}}let oU=Ae.widget({widget:new class extends Rs{toDOM(){let r=document.createElement("span");return r.className="cm-snippetFieldPosition",r}ignoreEvent(){return!1}}}),lU=Ae.mark({class:"cm-snippetField"});class Mo{constructor(e,t){this.ranges=e,this.active=t,this.deco=Ae.set(e.map(i=>(i.from==i.to?oU:lU).range(i.from,i.to)),!0)}map(e){let t=[];for(let i of this.ranges){let s=i.map(e);if(!s)return null;t.push(s)}return new Mo(t,this.active)}selectionInsideField(e){return e.ranges.every(t=>this.ranges.some(i=>i.field==this.active&&i.from<=t.from&&i.to>=t.to))}}const Hu=$e.define({map(r,e){return r&&r.map(e)}}),uU=$e.define(),au=Gt.define({create(){return null},update(r,e){for(let t of e.effects){if(t.is(Hu))return t.value;if(t.is(uU)&&r)return new Mo(r.ranges,t.value)}return r&&e.docChanged&&(r=r.map(e.changes)),r&&e.selection&&!r.selectionInsideField(e.selection)&&(r=null),r},provide:r=>me.decorations.from(r,e=>e?e.deco:Ae.none)});function wO(r,e){return ie.create(r.filter(t=>t.field==e).map(t=>ie.range(t.from,t.to)))}function cU(r){let e=xO.parse(r);return(t,i,s,n)=>{let{text:a,ranges:o}=e.instantiate(t.state,s),{main:l}=t.state.selection,u={changes:{from:s,to:n==l.from?l.to:n,insert:ze.of(a)},scrollIntoView:!0,annotations:i?[vO.of(i),Ut.userEvent.of("input.complete")]:void 0};if(o.length&&(u.selection=wO(o,0)),o.some(c=>c.field>0)){let c=new Mo(o,0),h=u.effects=[Hu.of(c)];t.state.field(au,!1)===void 0&&h.push($e.appendConfig.of([au,mU,gU,zk]))}t.dispatch(t.state.update(u))}}function Zk(r){return({state:e,dispatch:t})=>{let i=e.field(au,!1);if(!i||r<0&&i.active==0)return!1;let s=i.active+r,n=r>0&&!i.ranges.some(a=>a.field==s+r);return t(e.update({selection:wO(i.ranges,s),effects:Hu.of(n?null:new Mo(i.ranges,s)),scrollIntoView:!0})),!0}}const hU=({state:r,dispatch:e})=>r.field(au,!1)?(e(r.update({effects:Hu.of(null)})),!0):!1,dU=Zk(1),fU=Zk(-1),pU=[{key:"Tab",run:dU,shift:fU},{key:"Escape",run:hU}],u1=ve.define({combine(r){return r.length?r[0]:pU}}),mU=Ms.highest(Fu.compute([u1],r=>r.facet(u1)));function Ci(r,e){return{...e,apply:cU(r)}}const gU=me.domEventHandlers({mousedown(r,e){let t=e.state.field(au,!1),i;if(!t||(i=e.posAtCoords({x:r.clientX,y:r.clientY}))==null)return!1;let s=t.ranges.find(n=>n.from<=i&&n.to>=i);return!s||s.field==t.active?!1:(e.dispatch({selection:wO(t.ranges,s.field),effects:Hu.of(t.ranges.some(n=>n.field>s.field)?new Mo(t.ranges,s.field):null),scrollIntoView:!0}),!0)}}),ou={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},Ln=$e.define({map(r,e){let t=e.mapPos(r,-1,ii.TrackAfter);return t??void 0}}),CO=new class extends Hn{};CO.startSide=1;CO.endSide=-1;const Wk=Gt.define({create(){return Ye.empty},update(r,e){if(r=r.map(e.changes),e.selection){let t=e.state.doc.lineAt(e.selection.main.head);r=r.update({filter:i=>i>=t.from&&i<=t.to})}for(let t of e.effects)t.is(Ln)&&(r=r.update({add:[CO.range(t.value,t.value+1)]}));return r}});function OU(){return[bU,Wk]}const Np="()[]{}<>«»»«［］｛｝";function Hk(r){for(let e=0;e<Np.length;e+=2)if(Np.charCodeAt(e)==r)return Np.charAt(e+1);return V0(r<128?r:r+1)}function Yk(r,e){return r.languageDataAt("closeBrackets",e)[0]||ou}const yU=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),bU=me.inputHandler.of((r,e,t,i)=>{if((yU?r.composing:r.compositionStarted)||r.state.readOnly)return!1;let s=r.state.selection.main;if(i.length>2||i.length==2&&Xr(Pi(i,0))==1||e!=s.from||t!=s.to)return!1;let n=TU(r.state,i);return n?(r.dispatch(n),!0):!1}),vU=({state:r,dispatch:e})=>{if(r.readOnly)return!1;let i=Yk(r,r.selection.main.head).brackets||ou.brackets,s=null,n=r.changeByRange(a=>{if(a.empty){let o=_U(r.doc,a.head);for(let l of i)if(l==o&&uf(r.doc,a.head)==Hk(Pi(l,0)))return{changes:{from:a.head-l.length,to:a.head+l.length},range:ie.cursor(a.head-l.length)}}return{range:s=a}});return s||e(r.update(n,{scrollIntoView:!0,userEvent:"delete.backward"})),!s},SU=[{key:"Backspace",run:vU}];function TU(r,e){let t=Yk(r,r.selection.main.head),i=t.brackets||ou.brackets;for(let s of i){let n=Hk(Pi(s,0));if(e==s)return n==s?CU(r,s,i.indexOf(s+s+s)>-1,t):xU(r,s,n,t.before||ou.before);if(e==n&&Gk(r,r.selection.main.from))return wU(r,s,n)}return null}function Gk(r,e){let t=!1;return r.field(Wk).between(0,r.doc.length,i=>{i==e&&(t=!0)}),t}function uf(r,e){let t=r.sliceString(e,e+2);return t.slice(0,Xr(Pi(t,0)))}function _U(r,e){let t=r.sliceString(e-2,e);return Xr(Pi(t,0))==t.length?t:t.slice(1)}function xU(r,e,t,i){let s=null,n=r.changeByRange(a=>{if(!a.empty)return{changes:[{insert:e,from:a.from},{insert:t,from:a.to}],effects:Ln.of(a.to+e.length),range:ie.range(a.anchor+e.length,a.head+e.length)};let o=uf(r.doc,a.head);return!o||/\s/.test(o)||i.indexOf(o)>-1?{changes:{insert:e+t,from:a.head},effects:Ln.of(a.head+e.length),range:ie.cursor(a.head+e.length)}:{range:s=a}});return s?null:r.update(n,{scrollIntoView:!0,userEvent:"input.type"})}function wU(r,e,t){let i=null,s=r.changeByRange(n=>n.empty&&uf(r.doc,n.head)==t?{changes:{from:n.head,to:n.head+t.length,insert:t},range:ie.cursor(n.head+t.length)}:i={range:n});return i?null:r.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function CU(r,e,t,i){let s=i.stringPrefixes||ou.stringPrefixes,n=null,a=r.changeByRange(o=>{if(!o.empty)return{changes:[{insert:e,from:o.from},{insert:e,from:o.to}],effects:Ln.of(o.to+e.length),range:ie.range(o.anchor+e.length,o.head+e.length)};let l=o.head,u=uf(r.doc,l),c;if(u==e){if(c1(r,l))return{changes:{insert:e+e,from:l},effects:Ln.of(l+e.length),range:ie.cursor(l+e.length)};if(Gk(r,l)){let f=t&&r.sliceDoc(l,l+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:l,to:l+f.length,insert:f},range:ie.cursor(l+f.length)}}}else{if(t&&r.sliceDoc(l-2*e.length,l)==e+e&&(c=h1(r,l-2*e.length,s))>-1&&c1(r,c))return{changes:{insert:e+e+e+e,from:l},effects:Ln.of(l+e.length),range:ie.cursor(l+e.length)};if(r.charCategorizer(l)(u)!=Tt.Word&&h1(r,l,s)>-1&&!kU(r,l,e,s))return{changes:{insert:e+e,from:l},effects:Ln.of(l+e.length),range:ie.cursor(l+e.length)}}return{range:n=o}});return n?null:r.update(a,{scrollIntoView:!0,userEvent:"input.type"})}function c1(r,e){let t=ht(r).resolveInner(e+1);return t.parent&&t.from==e}function kU(r,e,t,i){let s=ht(r).resolveInner(e,-1),n=i.reduce((a,o)=>Math.max(a,o.length),0);for(let a=0;a<5;a++){let o=r.sliceDoc(s.from,Math.min(s.to,s.from+t.length+n)),l=o.indexOf(t);if(!l||l>-1&&i.indexOf(o.slice(0,l))>-1){let c=s.firstChild;for(;c&&c.from==s.from&&c.to-c.from>t.length+l;){if(r.sliceDoc(c.to-t.length,c.to)==t)return!1;c=c.firstChild}return!0}let u=s.to==e&&s.parent;if(!u)break;s=u}return!1}function h1(r,e,t){let i=r.charCategorizer(e);if(i(r.sliceDoc(e-1,e))!=Tt.Word)return e;for(let s of t){let n=e-s.length;if(r.sliceDoc(n,e)==s&&i(r.sliceDoc(n-1,n))!=Tt.Word)return n}return-1}function EU(r={}){return[nU,Di,Ht.of(r),rU,AU,zk]}const Kk=[{key:"Ctrl-Space",run:Bp},{mac:"Alt-`",run:Bp},{mac:"Alt-i",run:Bp},{key:"Escape",run:J7},{key:"ArrowDown",run:Yc(!0)},{key:"ArrowUp",run:Yc(!1)},{key:"PageDown",run:Yc(!0,"page")},{key:"PageUp",run:Yc(!1,"page")},{key:"Enter",run:K7}],AU=Ms.highest(Fu.computeN([Ht],r=>r.facet(Ht).defaultKeymap?[Kk]:[]));class d1{constructor(e,t,i){this.from=e,this.to=t,this.diagnostic=i}}class Pn{constructor(e,t,i){this.diagnostics=e,this.panel=t,this.selected=i}static init(e,t,i){let s=i.facet(lu).markerFilter;s&&(e=s(e,i));let n=e.slice().sort((c,h)=>c.from-h.from||c.to-h.to),a=new As,o=[],l=0;for(let c=0;;){let h=c==n.length?null:n[c];if(!h&&!o.length)break;let f,m;for(o.length?(f=l,m=o.reduce((y,E)=>Math.min(y,E.to),h&&h.from>f?h.from:1e8)):(f=h.from,m=h.to,o.push(h),c++);c<n.length;){let y=n[c];if(y.from==f&&(y.to>y.from||y.to==f))o.push(y),c++,m=Math.min(y.to,m);else{m=Math.min(y.from,m);break}}let S=qU(o);if(o.some(y=>y.from==y.to||y.from==y.to-1&&i.doc.lineAt(y.from).to==y.from))a.add(f,f,Ae.widget({widget:new BU(S),diagnostics:o.slice()}));else{let y=o.reduce((E,C)=>C.markClass?E+" "+C.markClass:E,"");a.add(f,m,Ae.mark({class:"cm-lintRange cm-lintRange-"+S+y,diagnostics:o.slice(),inclusiveEnd:o.some(E=>E.to>m)}))}l=m;for(let y=0;y<o.length;y++)o[y].to<=l&&o.splice(y--,1)}let u=a.finish();return new Pn(u,t,fo(u))}}function fo(r,e=null,t=0){let i=null;return r.between(t,1e9,(s,n,{spec:a})=>{if(!(e&&a.diagnostics.indexOf(e)<0))if(!i)i=new d1(s,n,e||a.diagnostics[0]);else{if(a.diagnostics.indexOf(i.diagnostic)<0)return!1;i=new d1(i.from,n,i.diagnostic)}}),i}function PU(r,e){let t=e.pos,i=e.end||t,s=r.state.facet(lu).hideOn(r,t,i);if(s!=null)return s;let n=r.startState.doc.lineAt(e.pos);return!!(r.effects.some(a=>a.is(Jk))||r.changes.touchesRange(n.from,Math.max(n.to,i)))}function DU(r,e){return r.field(zi,!1)?e:e.concat($e.appendConfig.of(VU))}const Jk=$e.define(),kO=$e.define(),eE=$e.define(),zi=Gt.define({create(){return new Pn(Ae.none,null,null)},update(r,e){if(e.docChanged&&r.diagnostics.size){let t=r.diagnostics.map(e.changes),i=null,s=r.panel;if(r.selected){let n=e.changes.mapPos(r.selected.from,1);i=fo(t,r.selected.diagnostic,n)||fo(t,null,n)}!t.size&&s&&e.state.facet(lu).autoPanel&&(s=null),r=new Pn(t,s,i)}for(let t of e.effects)if(t.is(Jk)){let i=e.state.facet(lu).autoPanel?t.value.length?uu.open:null:r.panel;r=Pn.init(t.value,i,e.state)}else t.is(kO)?r=new Pn(r.diagnostics,t.value?uu.open:null,r.selected):t.is(eE)&&(r=new Pn(r.diagnostics,r.panel,t.value));return r},provide:r=>[Kl.from(r,e=>e.panel),me.decorations.from(r,e=>e.diagnostics)]}),MU=Ae.mark({class:"cm-lintRange cm-lintRange-active"});function IU(r,e,t){let{diagnostics:i}=r.state.field(zi),s,n=-1,a=-1;i.between(e-(t<0?1:0),e+(t>0?1:0),(l,u,{spec:c})=>{if(e>=l&&e<=u&&(l==u||(e>l||t>0)&&(e<u||t<0)))return s=c.diagnostics,n=l,a=u,!1});let o=r.state.facet(lu).tooltipFilter;return s&&o&&(s=o(s,r.state)),s?{pos:n,end:a,above:r.state.doc.lineAt(n).to<a,create(){return{dom:RU(r,s)}}}:null}function RU(r,e){return ut("ul",{class:"cm-tooltip-lint"},e.map(t=>iE(r,t,!1)))}const LU=r=>{let e=r.state.field(zi,!1);(!e||!e.panel)&&r.dispatch({effects:DU(r.state,[kO.of(!0)])});let t=Gl(r,uu.open);return t&&t.dom.querySelector(".cm-panel-lint ul").focus(),!0},f1=r=>{let e=r.state.field(zi,!1);return!e||!e.panel?!1:(r.dispatch({effects:kO.of(!1)}),!0)},QU=r=>{let e=r.state.field(zi,!1);if(!e)return!1;let t=r.state.selection.main,i=e.diagnostics.iter(t.to+1);return!i.value&&(i=e.diagnostics.iter(0),!i.value||i.from==t.from&&i.to==t.to)?!1:(r.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0}),!0)},$U=[{key:"Mod-Shift-m",run:LU,preventDefault:!0},{key:"F8",run:QU}],lu=ve.define({combine(r){return{sources:r.map(e=>e.source).filter(e=>e!=null),...ns(r.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{delay:Math.max,markerFilter:p1,tooltipFilter:p1,needsRefresh:(e,t)=>e?t?i=>e(i)||t(i):e:t,hideOn:(e,t)=>e?t?(i,s,n)=>e(i,s,n)||t(i,s,n):e:t,autoPanel:(e,t)=>e||t})}}});function p1(r,e){return r?e?(t,i)=>e(r(t,i),i):r:e}function tE(r){let e=[];if(r)e:for(let{name:t}of r){for(let i=0;i<t.length;i++){let s=t[i];if(/[a-zA-Z]/.test(s)&&!e.some(n=>n.toLowerCase()==s.toLowerCase())){e.push(s);continue e}}e.push("")}return e}function iE(r,e,t){var i;let s=t?tE(e.actions):[];return ut("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},ut("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(r):e.message),(i=e.actions)===null||i===void 0?void 0:i.map((n,a)=>{let o=!1,l=m=>{if(m.preventDefault(),o)return;o=!0;let S=fo(r.state.field(zi).diagnostics,e);S&&n.apply(r,S.from,S.to)},{name:u}=n,c=s[a]?u.indexOf(s[a]):-1,h=c<0?u:[u.slice(0,c),ut("u",u.slice(c,c+1)),u.slice(c+1)],f=n.markClass?" "+n.markClass:"";return ut("button",{type:"button",class:"cm-diagnosticAction"+f,onclick:l,onmousedown:l,"aria-label":` Action: ${u}${c<0?"":` (access key "${s[a]})"`}.`},h)}),e.source&&ut("div",{class:"cm-diagnosticSource"},e.source))}class BU extends Rs{constructor(e){super(),this.sev=e}eq(e){return e.sev==this.sev}toDOM(){return ut("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}}class m1{constructor(e,t){this.diagnostic=t,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=iE(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class uu{constructor(e){this.view=e,this.items=[];let t=s=>{if(s.keyCode==27)f1(this.view),this.view.focus();else if(s.keyCode==38||s.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(s.keyCode==40||s.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(s.keyCode==36)this.moveSelection(0);else if(s.keyCode==35)this.moveSelection(this.items.length-1);else if(s.keyCode==13)this.view.focus();else if(s.keyCode>=65&&s.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:n}=this.items[this.selectedIndex],a=tE(n.actions);for(let o=0;o<a.length;o++)if(a[o].toUpperCase().charCodeAt(0)==s.keyCode){let l=fo(this.view.state.field(zi).diagnostics,n);l&&n.actions[o].apply(e,l.from,l.to)}}else return;s.preventDefault()},i=s=>{for(let n=0;n<this.items.length;n++)this.items[n].dom.contains(s.target)&&this.moveSelection(n)};this.list=ut("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:t,onclick:i}),this.dom=ut("div",{class:"cm-panel-lint"},this.list,ut("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>f1(this.view)},"×")),this.update()}get selectedIndex(){let e=this.view.state.field(zi).selected;if(!e)return-1;for(let t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return-1}update(){let{diagnostics:e,selected:t}=this.view.state.field(zi),i=0,s=!1,n=null,a=new Set;for(e.between(0,this.view.state.doc.length,(o,l,{spec:u})=>{for(let c of u.diagnostics){if(a.has(c))continue;a.add(c);let h=-1,f;for(let m=i;m<this.items.length;m++)if(this.items[m].diagnostic==c){h=m;break}h<0?(f=new m1(this.view,c),this.items.splice(i,0,f),s=!0):(f=this.items[h],h>i&&(this.items.splice(i,h-i),s=!0)),t&&f.diagnostic==t.diagnostic?f.dom.hasAttribute("aria-selected")||(f.dom.setAttribute("aria-selected","true"),n=f):f.dom.hasAttribute("aria-selected")&&f.dom.removeAttribute("aria-selected"),i++}});i<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)s=!0,this.items.pop();this.items.length==0&&(this.items.push(new m1(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),s=!0),n?(this.list.setAttribute("aria-activedescendant",n.id),this.view.requestMeasure({key:this,read:()=>({sel:n.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:o,panel:l})=>{let u=l.height/this.list.offsetHeight;o.top<l.top?this.list.scrollTop-=(l.top-o.top)/u:o.bottom>l.bottom&&(this.list.scrollTop+=(o.bottom-l.bottom)/u)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),s&&this.sync()}sync(){let e=this.list.firstChild;function t(){let i=e;e=i.nextSibling,i.remove()}for(let i of this.items)if(i.dom.parentNode==this.list){for(;e!=i.dom;)t();e=i.dom.nextSibling}else this.list.insertBefore(i.dom,e);for(;e;)t()}moveSelection(e){if(this.selectedIndex<0)return;let t=this.view.state.field(zi),i=fo(t.diagnostics,this.items[e].diagnostic);i&&this.view.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:eE.of(i)})}static open(e){return new uu(e)}}function NU(r,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(r)}</svg>')`}function Gc(r){return NU(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${r}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const FU=me.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:Gc("#d11")},".cm-lintRange-warning":{backgroundImage:Gc("orange")},".cm-lintRange-info":{backgroundImage:Gc("#999")},".cm-lintRange-hint":{backgroundImage:Gc("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function UU(r){return r=="error"?4:r=="warning"?3:r=="info"?2:1}function qU(r){let e="hint",t=1;for(let i of r){let s=UU(i.severity);s>t&&(t=s,e=i.severity)}return e}const VU=[zi,me.decorations.compute([zi],r=>{let{selected:e,panel:t}=r.field(zi);return!e||!t||e.from==e.to?Ae.none:Ae.set([MU.range(e.from,e.to)])}),_8(IU,{hideOn:PU}),FU],XU=[R8(),$8(),e8(),t6(),AF(),VN(),WN(),He.allowMultipleSelections.of(!0),OF(),GC(IF,{fallback:!0}),FF(),OU(),EU(),d8(),m8(),a8(),h7(),Fu.of([...SU,...n7,...P7,...c6,...wF,...Kk,...$U])];class gd{static create(e,t,i,s,n){let a=s+(s<<8)+e+(t<<4)|0;return new gd(e,t,i,a,n,[],[])}constructor(e,t,i,s,n,a,o){this.type=e,this.value=t,this.from=i,this.hash=s,this.end=n,this.children=a,this.positions=o,this.hashProp=[[Qe.contextHash,s]]}addChild(e,t){e.prop(Qe.contextHash)!=this.hash&&(e=new et(e.type,e.children,e.positions,e.length,this.hashProp)),this.children.push(e),this.positions.push(t)}toTree(e,t=this.end){let i=this.children.length-1;return i>=0&&(t=Math.max(t,this.positions[i]+this.children[i].length+this.from)),new et(e.types[this.type],this.children,this.positions,t-this.from).balance({makeTree:(s,n,a)=>new et(Xt.none,s,n,a,this.hashProp)})}}var he;(function(r){r[r.Document=1]="Document",r[r.CodeBlock=2]="CodeBlock",r[r.FencedCode=3]="FencedCode",r[r.Blockquote=4]="Blockquote",r[r.HorizontalRule=5]="HorizontalRule",r[r.BulletList=6]="BulletList",r[r.OrderedList=7]="OrderedList",r[r.ListItem=8]="ListItem",r[r.ATXHeading1=9]="ATXHeading1",r[r.ATXHeading2=10]="ATXHeading2",r[r.ATXHeading3=11]="ATXHeading3",r[r.ATXHeading4=12]="ATXHeading4",r[r.ATXHeading5=13]="ATXHeading5",r[r.ATXHeading6=14]="ATXHeading6",r[r.SetextHeading1=15]="SetextHeading1",r[r.SetextHeading2=16]="SetextHeading2",r[r.HTMLBlock=17]="HTMLBlock",r[r.LinkReference=18]="LinkReference",r[r.Paragraph=19]="Paragraph",r[r.CommentBlock=20]="CommentBlock",r[r.ProcessingInstructionBlock=21]="ProcessingInstructionBlock",r[r.Escape=22]="Escape",r[r.Entity=23]="Entity",r[r.HardBreak=24]="HardBreak",r[r.Emphasis=25]="Emphasis",r[r.StrongEmphasis=26]="StrongEmphasis",r[r.Link=27]="Link",r[r.Image=28]="Image",r[r.InlineCode=29]="InlineCode",r[r.HTMLTag=30]="HTMLTag",r[r.Comment=31]="Comment",r[r.ProcessingInstruction=32]="ProcessingInstruction",r[r.Autolink=33]="Autolink",r[r.HeaderMark=34]="HeaderMark",r[r.QuoteMark=35]="QuoteMark",r[r.ListMark=36]="ListMark",r[r.LinkMark=37]="LinkMark",r[r.EmphasisMark=38]="EmphasisMark",r[r.CodeMark=39]="CodeMark",r[r.CodeText=40]="CodeText",r[r.CodeInfo=41]="CodeInfo",r[r.LinkTitle=42]="LinkTitle",r[r.LinkLabel=43]="LinkLabel",r[r.URL=44]="URL"})(he||(he={}));class jU{constructor(e,t){this.start=e,this.content=t,this.marks=[],this.parsers=[]}}class zU{constructor(){this.text="",this.baseIndent=0,this.basePos=0,this.depth=0,this.markers=[],this.pos=0,this.indent=0,this.next=-1}forward(){this.basePos>this.pos&&this.forwardInner()}forwardInner(){let e=this.skipSpace(this.basePos);this.indent=this.countIndent(e,this.pos,this.indent),this.pos=e,this.next=e==this.text.length?-1:this.text.charCodeAt(e)}skipSpace(e){return Rl(this.text,e)}reset(e){for(this.text=e,this.baseIndent=this.basePos=this.pos=this.indent=0,this.forwardInner(),this.depth=1;this.markers.length;)this.markers.pop()}moveBase(e){this.basePos=e,this.baseIndent=this.countIndent(e,this.pos,this.indent)}moveBaseColumn(e){this.baseIndent=e,this.basePos=this.findColumn(e)}addMarker(e){this.markers.push(e)}countIndent(e,t=0,i=0){for(let s=t;s<e;s++)i+=this.text.charCodeAt(s)==9?4-i%4:1;return i}findColumn(e){let t=0;for(let i=0;t<this.text.length&&i<e;t++)i+=this.text.charCodeAt(t)==9?4-i%4:1;return t}scrub(){if(!this.baseIndent)return this.text;let e="";for(let t=0;t<this.basePos;t++)e+=" ";return e+this.text.slice(this.basePos)}}function g1(r,e,t){if(t.pos==t.text.length||r!=e.block&&t.indent>=e.stack[t.depth+1].value+t.baseIndent)return!0;if(t.indent>=t.baseIndent+4)return!1;let i=(r.type==he.OrderedList?PO:AO)(t,e,!1);return i>0&&(r.type!=he.BulletList||EO(t,e,!1)<0)&&t.text.charCodeAt(t.pos+i-1)==r.value}const rE={[he.Blockquote](r,e,t){return t.next!=62?!1:(t.markers.push(je(he.QuoteMark,e.lineStart+t.pos,e.lineStart+t.pos+1)),t.moveBase(t.pos+(mr(t.text.charCodeAt(t.pos+1))?2:1)),r.end=e.lineStart+t.text.length,!0)},[he.ListItem](r,e,t){return t.indent<t.baseIndent+r.value&&t.next>-1?!1:(t.moveBaseColumn(t.baseIndent+r.value),!0)},[he.OrderedList]:g1,[he.BulletList]:g1,[he.Document](){return!0}};function mr(r){return r==32||r==9||r==10||r==13}function Rl(r,e=0){for(;e<r.length&&mr(r.charCodeAt(e));)e++;return e}function O1(r,e,t){for(;e>t&&mr(r.charCodeAt(e-1));)e--;return e}function sE(r){if(r.next!=96&&r.next!=126)return-1;let e=r.pos+1;for(;e<r.text.length&&r.text.charCodeAt(e)==r.next;)e++;if(e<r.pos+3)return-1;if(r.next==96){for(let t=e;t<r.text.length;t++)if(r.text.charCodeAt(t)==96)return-1}return e}function nE(r){return r.next!=62?-1:r.text.charCodeAt(r.pos+1)==32?2:1}function EO(r,e,t){if(r.next!=42&&r.next!=45&&r.next!=95)return-1;let i=1;for(let s=r.pos+1;s<r.text.length;s++){let n=r.text.charCodeAt(s);if(n==r.next)i++;else if(!mr(n))return-1}return t&&r.next==45&&lE(r)>-1&&r.depth==e.stack.length&&e.parser.leafBlockParsers.indexOf(dE.SetextHeading)>-1||i<3?-1:1}function aE(r,e){for(let t=r.stack.length-1;t>=0;t--)if(r.stack[t].type==e)return!0;return!1}function AO(r,e,t){return(r.next==45||r.next==43||r.next==42)&&(r.pos==r.text.length-1||mr(r.text.charCodeAt(r.pos+1)))&&(!t||aE(e,he.BulletList)||r.skipSpace(r.pos+2)<r.text.length)?1:-1}function PO(r,e,t){let i=r.pos,s=r.next;for(;s>=48&&s<=57;){i++;if(i==r.text.length)return-1;s=r.text.charCodeAt(i)}return i==r.pos||i>r.pos+9||s!=46&&s!=41||i<r.text.length-1&&!mr(r.text.charCodeAt(i+1))||t&&!aE(e,he.OrderedList)&&(r.skipSpace(i+1)==r.text.length||i>r.pos+1||r.next!=49)?-1:i+1-r.pos}function oE(r){if(r.next!=35)return-1;let e=r.pos+1;for(;e<r.text.length&&r.text.charCodeAt(e)==35;)e++;if(e<r.text.length&&r.text.charCodeAt(e)!=32)return-1;let t=e-r.pos;return t>6?-1:t}function lE(r){if(r.next!=45&&r.next!=61||r.indent>=r.baseIndent+4)return-1;let e=r.pos+1;for(;e<r.text.length&&r.text.charCodeAt(e)==r.next;)e++;let t=e;for(;e<r.text.length&&mr(r.text.charCodeAt(e));)e++;return e==r.text.length?t:-1}const Mg=/^[ \t]*$/,uE=/-->/,cE=/\?>/,Ig=[[/^<(?:script|pre|style)(?:\s|>|$)/i,/<\/(?:script|pre|style)>/i],[/^\s*<!--/,uE],[/^\s*<\?/,cE],[/^\s*<![A-Z]/,/>/],[/^\s*<!\[CDATA\[/,/\]\]>/],[/^\s*<\/?(?:address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h1|h2|h3|h4|h5|h6|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul)(?:\s|\/?>|$)/i,Mg],[/^\s*(?:<\/[a-z][\w-]*\s*>|<[a-z][\w-]*(\s+[a-z:_][\w-.]*(?:\s*=\s*(?:[^\s"'=<>`]+|'[^']*'|"[^"]*"))?)*\s*>)\s*$/i,Mg]];function hE(r,e,t){if(r.next!=60)return-1;let i=r.text.slice(r.pos);for(let s=0,n=Ig.length-(t?1:0);s<n;s++)if(Ig[s][0].test(i))return s;return-1}function y1(r,e){let t=r.countIndent(e,r.pos,r.indent),i=r.countIndent(r.skipSpace(e),e,t);return i>=t+5?t+1:i}function _n(r,e,t){let i=r.length-1;i>=0&&r[i].to==e&&r[i].type==he.CodeText?r[i].to=t:r.push(je(he.CodeText,e,t))}const Kc={LinkReference:void 0,IndentedCode(r,e){let t=e.baseIndent+4;if(e.indent<t)return!1;let i=e.findColumn(t),s=r.lineStart+i,n=r.lineStart+e.text.length,a=[],o=[];for(_n(a,s,n);r.nextLine()&&e.depth>=r.stack.length;)if(e.pos==e.text.length){_n(o,r.lineStart-1,r.lineStart);for(let l of e.markers)o.push(l)}else{if(e.indent<t)break;{if(o.length){for(let u of o)u.type==he.CodeText?_n(a,u.from,u.to):a.push(u);o=[]}_n(a,r.lineStart-1,r.lineStart);for(let u of e.markers)a.push(u);n=r.lineStart+e.text.length;let l=r.lineStart+e.findColumn(e.baseIndent+4);l<n&&_n(a,l,n)}}return o.length&&(o=o.filter(l=>l.type!=he.CodeText),o.length&&(e.markers=o.concat(e.markers))),r.addNode(r.buffer.writeElements(a,-s).finish(he.CodeBlock,n-s),s),!0},FencedCode(r,e){let t=sE(e);if(t<0)return!1;let i=r.lineStart+e.pos,s=e.next,n=t-e.pos,a=e.skipSpace(t),o=O1(e.text,e.text.length,a),l=[je(he.CodeMark,i,i+n)];a<o&&l.push(je(he.CodeInfo,r.lineStart+a,r.lineStart+o));for(let u=!0;r.nextLine()&&e.depth>=r.stack.length;u=!1){let c=e.pos;if(e.indent-e.baseIndent<4)for(;c<e.text.length&&e.text.charCodeAt(c)==s;)c++;if(c-e.pos>=n&&e.skipSpace(c)==e.text.length){for(let h of e.markers)l.push(h);l.push(je(he.CodeMark,r.lineStart+e.pos,r.lineStart+c)),r.nextLine();break}else{u||_n(l,r.lineStart-1,r.lineStart);for(let m of e.markers)l.push(m);let h=r.lineStart+e.basePos,f=r.lineStart+e.text.length;h<f&&_n(l,h,f)}}return r.addNode(r.buffer.writeElements(l,-i).finish(he.FencedCode,r.prevLineEnd()-i),i),!0},Blockquote(r,e){let t=nE(e);return t<0?!1:(r.startContext(he.Blockquote,e.pos),r.addNode(he.QuoteMark,r.lineStart+e.pos,r.lineStart+e.pos+1),e.moveBase(e.pos+t),null)},HorizontalRule(r,e){if(EO(e,r,!1)<0)return!1;let t=r.lineStart+e.pos;return r.nextLine(),r.addNode(he.HorizontalRule,t),!0},BulletList(r,e){let t=AO(e,r,!1);if(t<0)return!1;r.block.type!=he.BulletList&&r.startContext(he.BulletList,e.basePos,e.next);let i=y1(e,e.pos+1);return r.startContext(he.ListItem,e.basePos,i-e.baseIndent),r.addNode(he.ListMark,r.lineStart+e.pos,r.lineStart+e.pos+t),e.moveBaseColumn(i),null},OrderedList(r,e){let t=PO(e,r,!1);if(t<0)return!1;r.block.type!=he.OrderedList&&r.startContext(he.OrderedList,e.basePos,e.text.charCodeAt(e.pos+t-1));let i=y1(e,e.pos+t);return r.startContext(he.ListItem,e.basePos,i-e.baseIndent),r.addNode(he.ListMark,r.lineStart+e.pos,r.lineStart+e.pos+t),e.moveBaseColumn(i),null},ATXHeading(r,e){let t=oE(e);if(t<0)return!1;let i=e.pos,s=r.lineStart+i,n=O1(e.text,e.text.length,i),a=n;for(;a>i&&e.text.charCodeAt(a-1)==e.next;)a--;(a==n||a==i||!mr(e.text.charCodeAt(a-1)))&&(a=e.text.length);let o=r.buffer.write(he.HeaderMark,0,t).writeElements(r.parser.parseInline(e.text.slice(i+t+1,a),s+t+1),-s);a<e.text.length&&o.write(he.HeaderMark,a-i,n-i);let l=o.finish(he.ATXHeading1-1+t,e.text.length-i);return r.nextLine(),r.addNode(l,s),!0},HTMLBlock(r,e){let t=hE(e,r,!1);if(t<0)return!1;let i=r.lineStart+e.pos,s=Ig[t][1],n=[],a=s!=Mg;for(;!s.test(e.text)&&r.nextLine();){if(e.depth<r.stack.length){a=!1;break}for(let u of e.markers)n.push(u)}a&&r.nextLine();let o=s==uE?he.CommentBlock:s==cE?he.ProcessingInstructionBlock:he.HTMLBlock,l=r.prevLineEnd();return r.addNode(r.buffer.writeElements(n,-i).finish(o,l-i),i),!0},SetextHeading:void 0};class ZU{constructor(e){this.stage=0,this.elts=[],this.pos=0,this.start=e.start,this.advance(e.content)}nextLine(e,t,i){if(this.stage==-1)return!1;let s=i.content+`
`+t.scrub(),n=this.advance(s);return n>-1&&n<s.length?this.complete(e,i,n):!1}finish(e,t){return(this.stage==2||this.stage==3)&&Rl(t.content,this.pos)==t.content.length?this.complete(e,t,t.content.length):!1}complete(e,t,i){return e.addLeafElement(t,je(he.LinkReference,this.start,this.start+i,this.elts)),!0}nextStage(e){return e?(this.pos=e.to-this.start,this.elts.push(e),this.stage++,!0):(e===!1&&(this.stage=-1),!1)}advance(e){for(;;){if(this.stage==-1)return-1;if(this.stage==0){if(!this.nextStage(SE(e,this.pos,this.start,!0)))return-1;if(e.charCodeAt(this.pos)!=58)return this.stage=-1;this.elts.push(je(he.LinkMark,this.pos+this.start,this.pos+this.start+1)),this.pos++}else if(this.stage==1){if(!this.nextStage(bE(e,Rl(e,this.pos),this.start)))return-1}else if(this.stage==2){let t=Rl(e,this.pos),i=0;if(t>this.pos){let s=vE(e,t,this.start);if(s){let n=Fp(e,s.to-this.start);n>0&&(this.nextStage(s),i=n)}}return i||(i=Fp(e,this.pos)),i>0&&i<e.length?i:-1}else return Fp(e,this.pos)}}}function Fp(r,e){for(;e<r.length;e++){let t=r.charCodeAt(e);if(t==10)break;if(!mr(t))return-1}return e}class WU{nextLine(e,t,i){let s=t.depth<e.stack.length?-1:lE(t),n=t.next;if(s<0)return!1;let a=je(he.HeaderMark,e.lineStart+t.pos,e.lineStart+s);return e.nextLine(),e.addLeafElement(i,je(n==61?he.SetextHeading1:he.SetextHeading2,i.start,e.prevLineEnd(),[...e.parser.parseInline(i.content,i.start),a])),!0}finish(){return!1}}const dE={LinkReference(r,e){return e.content.charCodeAt(0)==91?new ZU(e):null},SetextHeading(){return new WU}},HU=[(r,e)=>oE(e)>=0,(r,e)=>sE(e)>=0,(r,e)=>nE(e)>=0,(r,e)=>AO(e,r,!0)>=0,(r,e)=>PO(e,r,!0)>=0,(r,e)=>EO(e,r,!0)>=0,(r,e)=>hE(e,r,!0)>=0],YU={text:"",end:0};class GU{constructor(e,t,i,s){this.parser=e,this.input=t,this.ranges=s,this.line=new zU,this.atEnd=!1,this.reusePlaceholders=new Map,this.stoppedAt=null,this.rangeI=0,this.to=s[s.length-1].to,this.lineStart=this.absoluteLineStart=this.absoluteLineEnd=s[0].from,this.block=gd.create(he.Document,0,this.lineStart,0,0),this.stack=[this.block],this.fragments=i.length?new tq(i,t):null,this.readLine()}get parsedPos(){return this.absoluteLineStart}advance(){if(this.stoppedAt!=null&&this.absoluteLineStart>this.stoppedAt)return this.finish();let{line:e}=this;for(;;){for(let i=0;;){let s=e.depth<this.stack.length?this.stack[this.stack.length-1]:null;for(;i<e.markers.length&&(!s||e.markers[i].from<s.end);){let n=e.markers[i++];this.addNode(n.type,n.from,n.to)}if(!s)break;this.finishContext()}if(e.pos<e.text.length)break;if(!this.nextLine())return this.finish()}if(this.fragments&&this.reuseFragment(e.basePos))return null;e:for(;;){for(let i of this.parser.blockParsers)if(i){let s=i(this,e);if(s!=!1){if(s==!0)return null;e.forward();continue e}}break}let t=new jU(this.lineStart+e.pos,e.text.slice(e.pos));for(let i of this.parser.leafBlockParsers)if(i){let s=i(this,t);s&&t.parsers.push(s)}e:for(;this.nextLine()&&e.pos!=e.text.length;){if(e.indent<e.baseIndent+4){for(let i of this.parser.endLeafBlock)if(i(this,e,t))break e}for(let i of t.parsers)if(i.nextLine(this,e,t))return null;t.content+=`
`+e.scrub();for(let i of e.markers)t.marks.push(i)}return this.finishLeaf(t),null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}reuseFragment(e){if(!this.fragments.moveTo(this.absoluteLineStart+e,this.absoluteLineStart)||!this.fragments.matches(this.block.hash))return!1;let t=this.fragments.takeNodes(this);return t?(this.absoluteLineStart+=t,this.lineStart=TE(this.absoluteLineStart,this.ranges),this.moveRangeI(),this.absoluteLineStart<this.to?(this.lineStart++,this.absoluteLineStart++,this.readLine()):(this.atEnd=!0,this.readLine()),!0):!1}get depth(){return this.stack.length}parentType(e=this.depth-1){return this.parser.nodeSet.types[this.stack[e].type]}nextLine(){return this.lineStart+=this.line.text.length,this.absoluteLineEnd>=this.to?(this.absoluteLineStart=this.absoluteLineEnd,this.atEnd=!0,this.readLine(),!1):(this.lineStart++,this.absoluteLineStart=this.absoluteLineEnd+1,this.moveRangeI(),this.readLine(),!0)}peekLine(){return this.scanLine(this.absoluteLineEnd+1).text}moveRangeI(){for(;this.rangeI<this.ranges.length-1&&this.absoluteLineStart>=this.ranges[this.rangeI].to;)this.rangeI++,this.absoluteLineStart=Math.max(this.absoluteLineStart,this.ranges[this.rangeI].from)}scanLine(e){let t=YU;if(t.end=e,e>=this.to)t.text="";else if(t.text=this.lineChunkAt(e),t.end+=t.text.length,this.ranges.length>1){let i=this.absoluteLineStart,s=this.rangeI;for(;this.ranges[s].to<t.end;){s++;let n=this.ranges[s].from,a=this.lineChunkAt(n);t.end=n+a.length,t.text=t.text.slice(0,this.ranges[s-1].to-i)+a,i=t.end-t.text.length}}return t}readLine(){let{line:e}=this,{text:t,end:i}=this.scanLine(this.absoluteLineStart);for(this.absoluteLineEnd=i,e.reset(t);e.depth<this.stack.length;e.depth++){let s=this.stack[e.depth],n=this.parser.skipContextMarkup[s.type];if(!n)throw new Error("Unhandled block context "+he[s.type]);if(!n(s,this,e))break;e.forward()}}lineChunkAt(e){let t=this.input.chunk(e),i;if(this.input.lineChunks)i=t==`
`?"":t;else{let s=t.indexOf(`
`);i=s<0?t:t.slice(0,s)}return e+i.length>this.to?i.slice(0,this.to-e):i}prevLineEnd(){return this.atEnd?this.lineStart:this.lineStart-1}startContext(e,t,i=0){this.block=gd.create(e,i,this.lineStart+t,this.block.hash,this.lineStart+this.line.text.length),this.stack.push(this.block)}startComposite(e,t,i=0){this.startContext(this.parser.getNodeType(e),t,i)}addNode(e,t,i){typeof e=="number"&&(e=new et(this.parser.nodeSet.types[e],po,po,(i??this.prevLineEnd())-t)),this.block.addChild(e,t-this.block.from)}addElement(e){this.block.addChild(e.toTree(this.parser.nodeSet),e.from-this.block.from)}addLeafElement(e,t){this.addNode(this.buffer.writeElements(Qg(t.children,e.marks),-t.from).finish(t.type,t.to-t.from),t.from)}finishContext(){let e=this.stack.pop(),t=this.stack[this.stack.length-1];t.addChild(e.toTree(this.parser.nodeSet),e.from-t.from),this.block=t}finish(){for(;this.stack.length>1;)this.finishContext();return this.addGaps(this.block.toTree(this.parser.nodeSet,this.lineStart))}addGaps(e){return this.ranges.length>1?fE(this.ranges,0,e.topNode,this.ranges[0].from,this.reusePlaceholders):e}finishLeaf(e){for(let i of e.parsers)if(i.finish(this,e))return;let t=Qg(this.parser.parseInline(e.content,e.start),e.marks);this.addNode(this.buffer.writeElements(t,-e.start).finish(he.Paragraph,e.content.length),e.start)}elt(e,t,i,s){return typeof e=="string"?je(this.parser.getNodeType(e),t,i,s):new gE(e,t)}get buffer(){return new mE(this.parser.nodeSet)}}function fE(r,e,t,i,s){let n=r[e].to,a=[],o=[],l=t.from+i;function u(c,h){for(;h?c>=n:c>n;){let f=r[e+1].from-n;i+=f,c+=f,e++,n=r[e].to}}for(let c=t.firstChild;c;c=c.nextSibling){u(c.from+i,!0);let h=c.from+i,f,m=s.get(c.tree);m?f=m:c.to+i>n?(f=fE(r,e,c,i,s),u(c.to+i,!1)):f=c.toTree(),a.push(f),o.push(h-l)}return u(t.to+i,!1),new et(t.type,a,o,t.to+i-l,t.tree?t.tree.propValues:void 0)}class cf extends oO{constructor(e,t,i,s,n,a,o,l,u){super(),this.nodeSet=e,this.blockParsers=t,this.leafBlockParsers=i,this.blockNames=s,this.endLeafBlock=n,this.skipContextMarkup=a,this.inlineParsers=o,this.inlineNames=l,this.wrappers=u,this.nodeTypes=Object.create(null);for(let c of e.types)this.nodeTypes[c.name]=c.id}createParse(e,t,i){let s=new GU(this,e,t,i);for(let n of this.wrappers)s=n(s,e,t,i);return s}configure(e){let t=Rg(e);if(!t)return this;let{nodeSet:i,skipContextMarkup:s}=this,n=this.blockParsers.slice(),a=this.leafBlockParsers.slice(),o=this.blockNames.slice(),l=this.inlineParsers.slice(),u=this.inlineNames.slice(),c=this.endLeafBlock.slice(),h=this.wrappers;if(al(t.defineNodes)){s=Object.assign({},s);let f=i.types.slice(),m;for(let S of t.defineNodes){let{name:y,block:E,composite:C,style:_}=typeof S=="string"?{name:S}:S;if(f.some(w=>w.name==y))continue;C&&(s[f.length]=(w,A,I)=>C(A,I,w.value));let b=f.length,T=C?["Block","BlockContext"]:E?b>=he.ATXHeading1&&b<=he.SetextHeading2?["Block","LeafBlock","Heading"]:["Block","LeafBlock"]:void 0;f.push(Xt.define({id:b,name:y,props:T&&[[Qe.group,T]]})),_&&(m||(m={}),Array.isArray(_)||_ instanceof ji?m[y]=_:Object.assign(m,_))}i=new qu(f),m&&(i=i.extend(Eo(m)))}if(al(t.props)&&(i=i.extend(...t.props)),al(t.remove))for(let f of t.remove){let m=this.blockNames.indexOf(f),S=this.inlineNames.indexOf(f);m>-1&&(n[m]=a[m]=void 0),S>-1&&(l[S]=void 0)}if(al(t.parseBlock))for(let f of t.parseBlock){let m=o.indexOf(f.name);if(m>-1)n[m]=f.parse,a[m]=f.leaf;else{let S=f.before?Jc(o,f.before):f.after?Jc(o,f.after)+1:o.length-1;n.splice(S,0,f.parse),a.splice(S,0,f.leaf),o.splice(S,0,f.name)}f.endLeaf&&c.push(f.endLeaf)}if(al(t.parseInline))for(let f of t.parseInline){let m=u.indexOf(f.name);if(m>-1)l[m]=f.parse;else{let S=f.before?Jc(u,f.before):f.after?Jc(u,f.after)+1:u.length-1;l.splice(S,0,f.parse),u.splice(S,0,f.name)}}return t.wrap&&(h=h.concat(t.wrap)),new cf(i,n,a,o,c,s,l,u,h)}getNodeType(e){let t=this.nodeTypes[e];if(t==null)throw new RangeError(`Unknown node type '${e}'`);return t}parseInline(e,t){let i=new JU(this,e,t);e:for(let s=t;s<i.end;){let n=i.char(s);for(let a of this.inlineParsers)if(a){let o=a(i,n,s);if(o>=0){s=o;continue e}}s++}return i.resolveMarkers(0)}}function al(r){return r!=null&&r.length>0}function Rg(r){if(!Array.isArray(r))return r;if(r.length==0)return null;let e=Rg(r[0]);if(r.length==1)return e;let t=Rg(r.slice(1));if(!t||!e)return e||t;let i=(a,o)=>(a||po).concat(o||po),s=e.wrap,n=t.wrap;return{props:i(e.props,t.props),defineNodes:i(e.defineNodes,t.defineNodes),parseBlock:i(e.parseBlock,t.parseBlock),parseInline:i(e.parseInline,t.parseInline),remove:i(e.remove,t.remove),wrap:s?n?(a,o,l,u)=>s(n(a,o,l,u),o,l,u):s:n}}function Jc(r,e){let t=r.indexOf(e);if(t<0)throw new RangeError(`Position specified relative to unknown parser ${e}`);return t}let pE=[Xt.none];for(let r=1,e;e=he[r];r++)pE[r]=Xt.define({id:r,name:e,props:r>=he.Escape?[]:[[Qe.group,r in rE?["Block","BlockContext"]:["Block","LeafBlock"]]],top:e=="Document"});const po=[];let mE=class{constructor(e){this.nodeSet=e,this.content=[],this.nodes=[]}write(e,t,i,s=0){return this.content.push(e,t,i,4+s*4),this}writeElements(e,t=0){for(let i of e)i.writeTo(this,t);return this}finish(e,t){return et.build({buffer:this.content,nodeSet:this.nodeSet,reused:this.nodes,topID:e,length:t})}},cu=class{constructor(e,t,i,s=po){this.type=e,this.from=t,this.to=i,this.children=s}writeTo(e,t){let i=e.content.length;e.writeElements(this.children,t),e.content.push(this.type,this.from+t,this.to+t,e.content.length+4-i)}toTree(e){return new mE(e).writeElements(this.children,-this.from).finish(this.type,this.to-this.from)}};class gE{constructor(e,t){this.tree=e,this.from=t}get to(){return this.from+this.tree.length}get type(){return this.tree.type.id}get children(){return po}writeTo(e,t){e.nodes.push(this.tree),e.content.push(e.nodes.length-1,this.from+t,this.to+t,-1)}toTree(){return this.tree}}function je(r,e,t,i){return new cu(r,e,t,i)}const OE={resolve:"Emphasis",mark:"EmphasisMark"},yE={resolve:"Emphasis",mark:"EmphasisMark"},Oa={},Lg={};class tr{constructor(e,t,i,s){this.type=e,this.from=t,this.to=i,this.side=s}}const b1="!\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~";let hu=/[!"#$%&'()*+,\-.\/:;<=>?@\[\\\]^_`{|}~\xA1\u2010-\u2027]/;try{hu=new RegExp("[\\p{S}|\\p{P}]","u")}catch{}const Up={Escape(r,e,t){if(e!=92||t==r.end-1)return-1;let i=r.char(t+1);for(let s=0;s<b1.length;s++)if(b1.charCodeAt(s)==i)return r.append(je(he.Escape,t,t+2));return-1},Entity(r,e,t){if(e!=38)return-1;let i=/^(?:#\d+|#x[a-f\d]+|\w+);/i.exec(r.slice(t+1,t+31));return i?r.append(je(he.Entity,t,t+1+i[0].length)):-1},InlineCode(r,e,t){if(e!=96||t&&r.char(t-1)==96)return-1;let i=t+1;for(;i<r.end&&r.char(i)==96;)i++;let s=i-t,n=0;for(;i<r.end;i++)if(r.char(i)==96){if(n++,n==s&&r.char(i+1)!=96)return r.append(je(he.InlineCode,t,i+1,[je(he.CodeMark,t,t+s),je(he.CodeMark,i+1-s,i+1)]))}else n=0;return-1},HTMLTag(r,e,t){if(e!=60||t==r.end-1)return-1;let i=r.slice(t+1,r.end),s=/^(?:[a-z][-\w+.]+:[^\s>]+|[a-z\d.!#$%&'*+/=?^_`{|}~-]+@[a-z\d](?:[a-z\d-]{0,61}[a-z\d])?(?:\.[a-z\d](?:[a-z\d-]{0,61}[a-z\d])?)*)>/i.exec(i);if(s)return r.append(je(he.Autolink,t,t+1+s[0].length,[je(he.LinkMark,t,t+1),je(he.URL,t+1,t+s[0].length),je(he.LinkMark,t+s[0].length,t+1+s[0].length)]));let n=/^!--[^>](?:-[^-]|[^-])*?-->/i.exec(i);if(n)return r.append(je(he.Comment,t,t+1+n[0].length));let a=/^\?[^]*?\?>/.exec(i);if(a)return r.append(je(he.ProcessingInstruction,t,t+1+a[0].length));let o=/^(?:![A-Z][^]*?>|!\[CDATA\[[^]*?\]\]>|\/\s*[a-zA-Z][\w-]*\s*>|\s*[a-zA-Z][\w-]*(\s+[a-zA-Z:_][\w-.:]*(?:\s*=\s*(?:[^\s"'=<>`]+|'[^']*'|"[^"]*"))?)*\s*(\/\s*)?>)/.exec(i);return o?r.append(je(he.HTMLTag,t,t+1+o[0].length)):-1},Emphasis(r,e,t){if(e!=95&&e!=42)return-1;let i=t+1;for(;r.char(i)==e;)i++;let s=r.slice(t-1,t),n=r.slice(i,i+1),a=hu.test(s),o=hu.test(n),l=/\s|^$/.test(s),u=/\s|^$/.test(n),c=!u&&(!o||l||a),h=!l&&(!a||u||o),f=c&&(e==42||!h||a),m=h&&(e==42||!c||o);return r.append(new tr(e==95?OE:yE,t,i,(f?1:0)|(m?2:0)))},HardBreak(r,e,t){if(e==92&&r.char(t+1)==10)return r.append(je(he.HardBreak,t,t+2));if(e==32){let i=t+1;for(;r.char(i)==32;)i++;if(r.char(i)==10&&i>=t+2)return r.append(je(he.HardBreak,t,i+1))}return-1},Link(r,e,t){return e==91?r.append(new tr(Oa,t,t+1,1)):-1},Image(r,e,t){return e==33&&r.char(t+1)==91?r.append(new tr(Lg,t,t+2,1)):-1},LinkEnd(r,e,t){if(e!=93)return-1;for(let i=r.parts.length-1;i>=0;i--){let s=r.parts[i];if(s instanceof tr&&(s.type==Oa||s.type==Lg)){if(!s.side||r.skipSpace(s.to)==t&&!/[(\[]/.test(r.slice(t+1,t+2)))return r.parts[i]=null,-1;let n=r.takeContent(i),a=r.parts[i]=KU(r,n,s.type==Oa?he.Link:he.Image,s.from,t+1);if(s.type==Oa)for(let o=0;o<i;o++){let l=r.parts[o];l instanceof tr&&l.type==Oa&&(l.side=0)}return a.to}}return-1}};function KU(r,e,t,i,s){let{text:n}=r,a=r.char(s),o=s;if(e.unshift(je(he.LinkMark,i,i+(t==he.Image?2:1))),e.push(je(he.LinkMark,s-1,s)),a==40){let l=r.skipSpace(s+1),u=bE(n,l-r.offset,r.offset),c;u&&(l=r.skipSpace(u.to),l!=u.to&&(c=vE(n,l-r.offset,r.offset),c&&(l=r.skipSpace(c.to)))),r.char(l)==41&&(e.push(je(he.LinkMark,s,s+1)),o=l+1,u&&e.push(u),c&&e.push(c),e.push(je(he.LinkMark,l,o)))}else if(a==91){let l=SE(n,s-r.offset,r.offset,!1);l&&(e.push(l),o=l.to)}return je(t,i,o,e)}function bE(r,e,t){if(r.charCodeAt(e)==60){for(let s=e+1;s<r.length;s++){let n=r.charCodeAt(s);if(n==62)return je(he.URL,e+t,s+1+t);if(n==60||n==10)return!1}return null}else{let s=0,n=e;for(let a=!1;n<r.length;n++){let o=r.charCodeAt(n);if(mr(o))break;if(a)a=!1;else if(o==40)s++;else if(o==41){if(!s)break;s--}else o==92&&(a=!0)}return n>e?je(he.URL,e+t,n+t):n==r.length?null:!1}}function vE(r,e,t){let i=r.charCodeAt(e);if(i!=39&&i!=34&&i!=40)return!1;let s=i==40?41:i;for(let n=e+1,a=!1;n<r.length;n++){let o=r.charCodeAt(n);if(a)a=!1;else{if(o==s)return je(he.LinkTitle,e+t,n+1+t);o==92&&(a=!0)}}return null}function SE(r,e,t,i){for(let s=!1,n=e+1,a=Math.min(r.length,n+999);n<a;n++){let o=r.charCodeAt(n);if(s)s=!1;else{if(o==93)return i?!1:je(he.LinkLabel,e+t,n+1+t);if(i&&!mr(o)&&(i=!1),o==91)return!1;o==92&&(s=!0)}}return null}class JU{constructor(e,t,i){this.parser=e,this.text=t,this.offset=i,this.parts=[]}char(e){return e>=this.end?-1:this.text.charCodeAt(e-this.offset)}get end(){return this.offset+this.text.length}slice(e,t){return this.text.slice(e-this.offset,t-this.offset)}append(e){return this.parts.push(e),e.to}addDelimiter(e,t,i,s,n){return this.append(new tr(e,t,i,(s?1:0)|(n?2:0)))}get hasOpenLink(){for(let e=this.parts.length-1;e>=0;e--){let t=this.parts[e];if(t instanceof tr&&(t.type==Oa||t.type==Lg))return!0}return!1}addElement(e){return this.append(e)}resolveMarkers(e){for(let i=e;i<this.parts.length;i++){let s=this.parts[i];if(!(s instanceof tr&&s.type.resolve&&s.side&2))continue;let n=s.type==OE||s.type==yE,a=s.to-s.from,o,l=i-1;for(;l>=e;l--){let y=this.parts[l];if(y instanceof tr&&y.side&1&&y.type==s.type&&!(n&&(s.side&1||y.side&2)&&(y.to-y.from+a)%3==0&&((y.to-y.from)%3||a%3))){o=y;break}}if(!o)continue;let u=s.type.resolve,c=[],h=o.from,f=s.to;if(n){let y=Math.min(2,o.to-o.from,a);h=o.to-y,f=s.from+y,u=y==1?"Emphasis":"StrongEmphasis"}o.type.mark&&c.push(this.elt(o.type.mark,h,o.to));for(let y=l+1;y<i;y++)this.parts[y]instanceof cu&&c.push(this.parts[y]),this.parts[y]=null;s.type.mark&&c.push(this.elt(s.type.mark,s.from,f));let m=this.elt(u,h,f,c);this.parts[l]=n&&o.from!=h?new tr(o.type,o.from,h,o.side):null,(this.parts[i]=n&&s.to!=f?new tr(s.type,f,s.to,s.side):null)?this.parts.splice(i,0,m):this.parts[i]=m}let t=[];for(let i=e;i<this.parts.length;i++){let s=this.parts[i];s instanceof cu&&t.push(s)}return t}findOpeningDelimiter(e){for(let t=this.parts.length-1;t>=0;t--){let i=this.parts[t];if(i instanceof tr&&i.type==e)return t}return null}takeContent(e){let t=this.resolveMarkers(e);return this.parts.length=e,t}skipSpace(e){return Rl(this.text,e-this.offset)+this.offset}elt(e,t,i,s){return typeof e=="string"?je(this.parser.getNodeType(e),t,i,s):new gE(e,t)}}function Qg(r,e){if(!e.length)return r;if(!r.length)return e;let t=r.slice(),i=0;for(let s of e){for(;i<t.length&&t[i].to<s.to;)i++;if(i<t.length&&t[i].from<s.from){let n=t[i];n instanceof cu&&(t[i]=new cu(n.type,n.from,n.to,Qg(n.children,[s])))}else t.splice(i++,0,s)}return t}const eq=[he.CodeBlock,he.ListItem,he.OrderedList,he.BulletList];let tq=class{constructor(e,t){this.fragments=e,this.input=t,this.i=0,this.fragment=null,this.fragmentEnd=-1,this.cursor=null,e.length&&(this.fragment=e[this.i++])}nextFragment(){this.fragment=this.i<this.fragments.length?this.fragments[this.i++]:null,this.cursor=null,this.fragmentEnd=-1}moveTo(e,t){for(;this.fragment&&this.fragment.to<=e;)this.nextFragment();if(!this.fragment||this.fragment.from>(e?e-1:0))return!1;if(this.fragmentEnd<0){let n=this.fragment.to;for(;n>0&&this.input.read(n-1,n)!=`
`;)n--;this.fragmentEnd=n?n-1:0}let i=this.cursor;i||(i=this.cursor=this.fragment.tree.cursor(),i.firstChild());let s=e+this.fragment.offset;for(;i.to<=s;)if(!i.parent())return!1;for(;;){if(i.from>=s)return this.fragment.from<=t;if(!i.childAfter(s))return!1}}matches(e){let t=this.cursor.tree;return t&&t.prop(Qe.contextHash)==e}takeNodes(e){let t=this.cursor,i=this.fragment.offset,s=this.fragmentEnd-(this.fragment.openEnd?1:0),n=e.absoluteLineStart,a=n,o=e.block.children.length,l=a,u=o;for(;;){if(t.to-i>s){if(t.type.isAnonymous&&t.firstChild())continue;break}let c=TE(t.from-i,e.ranges);if(t.to-i<=e.ranges[e.rangeI].to)e.addNode(t.tree,c);else{let h=new et(e.parser.nodeSet.types[he.Paragraph],[],[],0,e.block.hashProp);e.reusePlaceholders.set(h,t.tree),e.addNode(h,c)}if(t.type.is("Block")&&(eq.indexOf(t.type.id)<0?(a=t.to-i,o=e.block.children.length):(a=l,o=u,l=t.to-i,u=e.block.children.length)),!t.nextSibling())break}for(;e.block.children.length>o;)e.block.children.pop(),e.block.positions.pop();return a-n}};function TE(r,e){let t=r;for(let i=1;i<e.length;i++){let s=e[i-1].to,n=e[i].from;s<r&&(t-=n-s)}return t}const iq=Eo({"Blockquote/...":U.quote,HorizontalRule:U.contentSeparator,"ATXHeading1/... SetextHeading1/...":U.heading1,"ATXHeading2/... SetextHeading2/...":U.heading2,"ATXHeading3/...":U.heading3,"ATXHeading4/...":U.heading4,"ATXHeading5/...":U.heading5,"ATXHeading6/...":U.heading6,"Comment CommentBlock":U.comment,Escape:U.escape,Entity:U.character,"Emphasis/...":U.emphasis,"StrongEmphasis/...":U.strong,"Link/... Image/...":U.link,"OrderedList/... BulletList/...":U.list,"BlockQuote/...":U.quote,"InlineCode CodeText":U.monospace,"URL Autolink":U.url,"HeaderMark HardBreak QuoteMark ListMark LinkMark EmphasisMark CodeMark":U.processingInstruction,"CodeInfo LinkLabel":U.labelName,LinkTitle:U.string,Paragraph:U.content}),rq=new cf(new qu(pE).extend(iq),Object.keys(Kc).map(r=>Kc[r]),Object.keys(Kc).map(r=>dE[r]),Object.keys(Kc),HU,rE,Object.keys(Up).map(r=>Up[r]),Object.keys(Up),[]);function sq(r,e,t){let i=[];for(let s=r.firstChild,n=e;;s=s.nextSibling){let a=s?s.from:t;if(a>n&&i.push({from:n,to:a}),!s)break;n=s.to}return i}function nq(r){let{codeParser:e,htmlParser:t}=r;return{wrap:LC((s,n)=>{let a=s.type.id;if(e&&(a==he.CodeBlock||a==he.FencedCode)){let o="";if(a==he.FencedCode){let u=s.node.getChild(he.CodeInfo);u&&(o=n.read(u.from,u.to))}let l=e(o);if(l)return{parser:l,overlay:u=>u.type.id==he.CodeText}}else if(t&&(a==he.HTMLBlock||a==he.HTMLTag||a==he.CommentBlock))return{parser:t,overlay:sq(s.node,s.from,s.to)};return null})}}const aq={resolve:"Strikethrough",mark:"StrikethroughMark"},oq={defineNodes:[{name:"Strikethrough",style:{"Strikethrough/...":U.strikethrough}},{name:"StrikethroughMark",style:U.processingInstruction}],parseInline:[{name:"Strikethrough",parse(r,e,t){if(e!=126||r.char(t+1)!=126||r.char(t+2)==126)return-1;let i=r.slice(t-1,t),s=r.slice(t+2,t+3),n=/\s|^$/.test(i),a=/\s|^$/.test(s),o=hu.test(i),l=hu.test(s);return r.addDelimiter(aq,t,t+2,!a&&(!l||n||o),!n&&(!o||a||l))},after:"Emphasis"}]};function Ll(r,e,t=0,i,s=0){let n=0,a=!0,o=-1,l=-1,u=!1,c=()=>{i.push(r.elt("TableCell",s+o,s+l,r.parser.parseInline(e.slice(o,l),s+o)))};for(let h=t;h<e.length;h++){let f=e.charCodeAt(h);f==124&&!u?((!a||o>-1)&&n++,a=!1,i&&(o>-1&&c(),i.push(r.elt("TableDelimiter",h+s,h+s+1))),o=l=-1):(u||f!=32&&f!=9)&&(o<0&&(o=h),l=h+1),u=!u&&f==92}return o>-1&&(n++,i&&c()),n}function v1(r,e){for(let t=e;t<r.length;t++){let i=r.charCodeAt(t);if(i==124)return!0;i==92&&t++}return!1}const _E=/^\|?(\s*:?-+:?\s*\|)+(\s*:?-+:?\s*)?$/;class S1{constructor(){this.rows=null}nextLine(e,t,i){if(this.rows==null){this.rows=!1;let s;if((t.next==45||t.next==58||t.next==124)&&_E.test(s=t.text.slice(t.pos))){let n=[];Ll(e,i.content,0,n,i.start)==Ll(e,s,t.pos)&&(this.rows=[e.elt("TableHeader",i.start,i.start+i.content.length,n),e.elt("TableDelimiter",e.lineStart+t.pos,e.lineStart+t.text.length)])}}else if(this.rows){let s=[];Ll(e,t.text,t.pos,s,e.lineStart),this.rows.push(e.elt("TableRow",e.lineStart+t.pos,e.lineStart+t.text.length,s))}return!1}finish(e,t){return this.rows?(e.addLeafElement(t,e.elt("Table",t.start,t.start+t.content.length,this.rows)),!0):!1}}const lq={defineNodes:[{name:"Table",block:!0},{name:"TableHeader",style:{"TableHeader/...":U.heading}},"TableRow",{name:"TableCell",style:U.content},{name:"TableDelimiter",style:U.processingInstruction}],parseBlock:[{name:"Table",leaf(r,e){return v1(e.content,0)?new S1:null},endLeaf(r,e,t){if(t.parsers.some(s=>s instanceof S1)||!v1(e.text,e.basePos))return!1;let i=r.peekLine();return _E.test(i)&&Ll(r,e.text,e.basePos)==Ll(r,i,e.basePos)},before:"SetextHeading"}]};class uq{nextLine(){return!1}finish(e,t){return e.addLeafElement(t,e.elt("Task",t.start,t.start+t.content.length,[e.elt("TaskMarker",t.start,t.start+3),...e.parser.parseInline(t.content.slice(3),t.start+3)])),!0}}const cq={defineNodes:[{name:"Task",block:!0,style:U.list},{name:"TaskMarker",style:U.atom}],parseBlock:[{name:"TaskList",leaf(r,e){return/^\[[ xX]\][ \t]/.test(e.content)&&r.parentType().name=="ListItem"?new uq:null},after:"SetextHeading"}]},T1=/(www\.)|(https?:\/\/)|([\w.+-]{1,100}@)|(mailto:|xmpp:)/gy,_1=/[\w-]+(\.[\w-]+)+(\/[^\s<]*)?/gy,hq=/[\w-]+\.[\w-]+($|\/)/,x1=/[\w.+-]+@[\w-]+(\.[\w.-]+)+/gy,w1=/\/[a-zA-Z\d@.]+/gy;function C1(r,e,t,i){let s=0;for(let n=e;n<t;n++)r[n]==i&&s++;return s}function dq(r,e){_1.lastIndex=e;let t=_1.exec(r);if(!t||hq.exec(t[0])[0].indexOf("_")>-1)return-1;let i=e+t[0].length;for(;;){let s=r[i-1],n;if(/[?!.,:*_~]/.test(s)||s==")"&&C1(r,e,i,")")>C1(r,e,i,"("))i--;else if(s==";"&&(n=/&(?:#\d+|#x[a-f\d]+|\w+);$/.exec(r.slice(e,i))))i=e+n.index;else break}return i}function k1(r,e){x1.lastIndex=e;let t=x1.exec(r);if(!t)return-1;let i=t[0][t[0].length-1];return i=="_"||i=="-"?-1:e+t[0].length-(i=="."?1:0)}const fq={parseInline:[{name:"Autolink",parse(r,e,t){let i=t-r.offset;if(i&&/\w/.test(r.text[i-1]))return-1;T1.lastIndex=i;let s=T1.exec(r.text),n=-1;if(!s)return-1;if(s[1]||s[2]){if(n=dq(r.text,i+s[0].length),n>-1&&r.hasOpenLink){let a=/([^\[\]]|\[[^\]]*\])*/.exec(r.text.slice(i,n));n=i+a[0].length}}else s[3]?n=k1(r.text,i):(n=k1(r.text,i+s[0].length),n>-1&&s[0]=="xmpp:"&&(w1.lastIndex=n,s=w1.exec(r.text),s&&(n=s.index+s[0].length)));return n<0?-1:(r.addElement(r.elt("URL",t,n+r.offset)),n+r.offset)}}]},pq=[lq,cq,oq,fq];function xE(r,e,t){return(i,s,n)=>{if(s!=r||i.char(n+1)==r)return-1;let a=[i.elt(t,n,n+1)];for(let o=n+1;o<i.end;o++){let l=i.char(o);if(l==r)return i.addElement(i.elt(e,n,o+1,a.concat(i.elt(t,o,o+1))));if(l==92&&a.push(i.elt("Escape",o,o+++2)),mr(l))break}return-1}}const mq={defineNodes:[{name:"Superscript",style:U.special(U.content)},{name:"SuperscriptMark",style:U.processingInstruction}],parseInline:[{name:"Superscript",parse:xE(94,"Superscript","SuperscriptMark")}]},gq={defineNodes:[{name:"Subscript",style:U.special(U.content)},{name:"SubscriptMark",style:U.processingInstruction}],parseInline:[{name:"Subscript",parse:xE(126,"Subscript","SubscriptMark")}]},Oq={defineNodes:[{name:"Emoji",style:U.character}],parseInline:[{name:"Emoji",parse(r,e,t){let i;return e!=58||!(i=/^[a-zA-Z_0-9]+:/.exec(r.slice(t+1,r.end)))?-1:r.addElement(r.elt("Emoji",t,t+1+i[0].length))}}]};var E1={};class Od{constructor(e,t,i,s,n,a,o,l,u,c=0,h){this.p=e,this.stack=t,this.state=i,this.reducePos=s,this.pos=n,this.score=a,this.buffer=o,this.bufferBase=l,this.curContext=u,this.lookAhead=c,this.parent=h}toString(){return`[${this.stack.filter((e,t)=>t%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,t,i=0){let s=e.parser.context;return new Od(e,[],t,i,i,0,[],0,s?new A1(s,s.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var t;let i=e>>19,s=e&65535,{parser:n}=this.p,a=this.reducePos<this.pos-25;a&&this.setLookAhead(this.pos);let o=n.dynamicPrecedence(s);if(o&&(this.score+=o),i==0){this.pushState(n.getGoto(this.state,s,!0),this.reducePos),s<n.minRepeatTerm&&this.storeNode(s,this.reducePos,this.reducePos,a?8:4,!0),this.reduceContext(s,this.reducePos);return}let l=this.stack.length-(i-1)*3-(e&262144?6:0),u=l?this.stack[l-2]:this.p.ranges[0].from,c=this.reducePos-u;c>=2e3&&!(!((t=this.p.parser.nodeSet.types[s])===null||t===void 0)&&t.isAnonymous)&&(u==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=c):this.p.lastBigReductionSize<c&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=u,this.p.lastBigReductionSize=c));let h=l?this.stack[l-1]:0,f=this.bufferBase+this.buffer.length-h;if(s<n.minRepeatTerm||e&131072){let m=n.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(s,u,m,f+4,!0)}if(e&262144)this.state=this.stack[l];else{let m=this.stack[l-3];this.state=n.getGoto(m,s,!0)}for(;this.stack.length>l;)this.stack.pop();this.reduceContext(s,u)}storeNode(e,t,i,s=4,n=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let a=this,o=this.buffer.length;if(o==0&&a.parent&&(o=a.bufferBase-a.parent.bufferBase,a=a.parent),o>0&&a.buffer[o-4]==0&&a.buffer[o-1]>-1){if(t==i)return;if(a.buffer[o-2]>=t){a.buffer[o-2]=i;return}}}if(!n||this.pos==i)this.buffer.push(e,t,i,s);else{let a=this.buffer.length;if(a>0&&this.buffer[a-4]!=0){let o=!1;for(let l=a;l>0&&this.buffer[l-2]>i;l-=4)if(this.buffer[l-1]>=0){o=!0;break}if(o)for(;a>0&&this.buffer[a-2]>i;)this.buffer[a]=this.buffer[a-4],this.buffer[a+1]=this.buffer[a-3],this.buffer[a+2]=this.buffer[a-2],this.buffer[a+3]=this.buffer[a-1],a-=4,s>4&&(s-=4)}this.buffer[a]=e,this.buffer[a+1]=t,this.buffer[a+2]=i,this.buffer[a+3]=s}}shift(e,t,i,s){if(e&131072)this.pushState(e&65535,this.pos);else if((e&262144)==0){let n=e,{parser:a}=this.p;(s>this.pos||t<=a.maxNode)&&(this.pos=s,a.stateFlag(n,1)||(this.reducePos=s)),this.pushState(n,i),this.shiftContext(t,i),t<=a.maxNode&&this.buffer.push(t,i,s,4)}else this.pos=s,this.shiftContext(t,i),t<=this.p.parser.maxNode&&this.buffer.push(t,i,s,4)}apply(e,t,i,s){e&65536?this.reduce(e):this.shift(e,t,i,s)}useNode(e,t){let i=this.p.reused.length-1;(i<0||this.p.reused[i]!=e)&&(this.p.reused.push(e),i++);let s=this.pos;this.reducePos=this.pos=s+e.length,this.pushState(t,s),this.buffer.push(i,s,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let i=e.buffer.slice(t),s=e.bufferBase+t;for(;e&&s==e.bufferBase;)e=e.parent;return new Od(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,i,s,this.curContext,this.lookAhead,e)}recoverByDelete(e,t){let i=e<=this.p.parser.maxNode;i&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,i?8:4),this.pos=this.reducePos=t,this.score-=190}canShift(e){for(let t=new yq(this);;){let i=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if(i==0)return!1;if((i&65536)==0)return!0;t.reduce(i)}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>8||this.stack.length>=120){let s=[];for(let n=0,a;n<t.length;n+=2)(a=t[n+1])!=this.state&&this.p.parser.hasAction(a,e)&&s.push(t[n],a);if(this.stack.length<120)for(let n=0;s.length<8&&n<t.length;n+=2){let a=t[n+1];s.some((o,l)=>l&1&&o==a)||s.push(t[n],a)}t=s}let i=[];for(let s=0;s<t.length&&i.length<4;s+=2){let n=t[s+1];if(n==this.state)continue;let a=this.split();a.pushState(n,this.pos),a.storeNode(0,a.pos,a.pos,4,!0),a.shiftContext(t[s],this.pos),a.reducePos=this.pos,a.score-=200,i.push(a)}return i}forceReduce(){let{parser:e}=this.p,t=e.stateSlot(this.state,5);if((t&65536)==0)return!1;if(!e.validAction(this.state,t)){let i=t>>19,s=t&65535,n=this.stack.length-i*3;if(n<0||e.getGoto(this.stack[n],s,!1)<0){let a=this.findForcedReduction();if(a==null)return!1;t=a}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(t),!0}findForcedReduction(){let{parser:e}=this.p,t=[],i=(s,n)=>{if(!t.includes(s))return t.push(s),e.allActions(s,a=>{if(!(a&393216))if(a&65536){let o=(a>>19)-n;if(o>1){let l=a&65535,u=this.stack.length-o*3;if(u>=0&&e.getGoto(this.stack[u],l,!1)>=0)return o<<19|65536|l}}else{let o=i(a,n+1);if(o!=null)return o}})};return i(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}reduceContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(e){if(e!=this.curContext.context){let t=new A1(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class A1{constructor(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0}}class yq{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let t=e&65535,i=e>>19;i==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(i-1)*3;let s=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=s}}class yd{constructor(e,t,i){this.stack=e,this.pos=t,this.index=i,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,t=e.bufferBase+e.buffer.length){return new yd(e,t,t-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new yd(this.stack,this.pos,this.index)}}function Ol(r,e=Uint16Array){if(typeof r!="string")return r;let t=null;for(let i=0,s=0;i<r.length;){let n=0;for(;;){let a=r.charCodeAt(i++),o=!1;if(a==126){n=65535;break}a>=92&&a--,a>=34&&a--;let l=a-32;if(l>=46&&(l-=46,o=!0),n+=l,o)break;n*=46}t?t[s++]=n:t=new e(n)}return t}class Oh{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const P1=new Oh;class bq{constructor(e,t){this.input=e,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=P1,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(e,t){let i=this.range,s=this.rangeIndex,n=this.pos+e;for(;n<i.from;){if(!s)return null;let a=this.ranges[--s];n-=i.from-a.to,i=a}for(;t<0?n>i.to:n>=i.to;){if(s==this.ranges.length-1)return null;let a=this.ranges[++s];n+=a.from-i.to,i=a}return n}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let t of this.ranges)if(t.to>e)return Math.max(e,t.from);return this.end}peek(e){let t=this.chunkOff+e,i,s;if(t>=0&&t<this.chunk.length)i=this.pos+e,s=this.chunk.charCodeAt(t);else{let n=this.resolveOffset(e,1);if(n==null)return-1;if(i=n,i>=this.chunk2Pos&&i<this.chunk2Pos+this.chunk2.length)s=this.chunk2.charCodeAt(i-this.chunk2Pos);else{let a=this.rangeIndex,o=this.range;for(;o.to<=i;)o=this.ranges[++a];this.chunk2=this.input.chunk(this.chunk2Pos=i),i+this.chunk2.length>o.to&&(this.chunk2=this.chunk2.slice(0,o.to-i)),s=this.chunk2.charCodeAt(0)}}return i>=this.token.lookAhead&&(this.token.lookAhead=i+1),s}acceptToken(e,t=0){let i=t?this.resolveOffset(t,-1):this.pos;if(i==null||i<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=i}acceptTokenTo(e,t){this.token.value=e,this.token.end=t}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),t=this.pos+e.length;this.chunk=t>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=P1,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);let i="";for(let s of this.ranges){if(s.from>=t)break;s.to>e&&(i+=this.input.read(Math.max(s.from,e),Math.min(s.to,t)))}return i}}class Xa{constructor(e,t){this.data=e,this.id=t}token(e,t){let{parser:i}=t.p;wE(this.data,e,t,this.id,i.data,i.tokenPrecTable)}}Xa.prototype.contextual=Xa.prototype.fallback=Xa.prototype.extend=!1;class bd{constructor(e,t,i){this.precTable=t,this.elseToken=i,this.data=typeof e=="string"?Ol(e):e}token(e,t){let i=e.pos,s=0;for(;;){let n=e.next<0,a=e.resolveOffset(1,1);if(wE(this.data,e,t,0,this.data,this.precTable),e.token.value>-1)break;if(this.elseToken==null)return;if(n||s++,a==null)break;e.reset(a,e.token)}s&&(e.reset(i,e.token),e.acceptToken(this.elseToken,s))}}bd.prototype.contextual=Xa.prototype.fallback=Xa.prototype.extend=!1;class Hi{constructor(e,t={}){this.token=e,this.contextual=!!t.contextual,this.fallback=!!t.fallback,this.extend=!!t.extend}}function wE(r,e,t,i,s,n){let a=0,o=1<<i,{dialect:l}=t.p.parser;e:for(;(o&r[a])!=0;){let u=r[a+1];for(let m=a+3;m<u;m+=2)if((r[m+1]&o)>0){let S=r[m];if(l.allows(S)&&(e.token.value==-1||e.token.value==S||vq(S,e.token.value,s,n))){e.acceptToken(S);break}}let c=e.next,h=0,f=r[a+2];if(e.next<0&&f>h&&r[u+f*3-3]==65535){a=r[u+f*3-1];continue e}for(;h<f;){let m=h+f>>1,S=u+m+(m<<1),y=r[S],E=r[S+1]||65536;if(c<y)f=m;else if(c>=E)h=m+1;else{a=r[S+2],e.advance();continue e}}break}}function D1(r,e,t){for(let i=e,s;(s=r[i])!=65535;i++)if(s==t)return i-e;return-1}function vq(r,e,t,i){let s=D1(t,i,e);return s<0||D1(t,i,r)<s}const Ui=typeof process<"u"&&E1&&/\bparse\b/.test(E1.LOG);let qp=null;function M1(r,e,t){let i=r.cursor(pt.IncludeAnonymous);for(i.moveTo(e);;)if(!(t<0?i.childBefore(e):i.childAfter(e)))for(;;){if((t<0?i.to<e:i.from>e)&&!i.type.isError)return t<0?Math.max(0,Math.min(i.to-1,e-25)):Math.min(r.length,Math.max(i.from+1,e+25));if(t<0?i.prevSibling():i.nextSibling())break;if(!i.parent())return t<0?0:r.length}}class Sq{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?M1(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?M1(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let i=this.trees[t],s=this.index[t];if(s==i.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let n=i.children[s],a=this.start[t]+i.positions[s];if(a>e)return this.nextStart=a,null;if(n instanceof et){if(a==e){if(a<this.safeFrom)return null;let o=a+n.length;if(o<=this.safeTo){let l=n.prop(Qe.lookAhead);if(!l||o+l<this.fragment.to)return n}}this.index[t]++,a+n.length>=Math.max(this.safeFrom,e)&&(this.trees.push(n),this.start.push(a),this.index.push(0))}else this.index[t]++,this.nextStart=a+n.length}}}class Tq{constructor(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(i=>new Oh)}getActions(e){let t=0,i=null,{parser:s}=e.p,{tokenizers:n}=s,a=s.stateSlot(e.state,3),o=e.curContext?e.curContext.hash:0,l=0;for(let u=0;u<n.length;u++){if((1<<u&a)==0)continue;let c=n[u],h=this.tokens[u];if(!(i&&!c.fallback)&&((c.contextual||h.start!=e.pos||h.mask!=a||h.context!=o)&&(this.updateCachedToken(h,c,e),h.mask=a,h.context=o),h.lookAhead>h.end+25&&(l=Math.max(h.lookAhead,l)),h.value!=0)){let f=t;if(h.extended>-1&&(t=this.addActions(e,h.extended,h.end,t)),t=this.addActions(e,h.value,h.end,t),!c.extend&&(i=h,t>f))break}}for(;this.actions.length>t;)this.actions.pop();return l&&e.setLookAhead(l),!i&&e.pos==this.stream.end&&(i=new Oh,i.value=e.p.parser.eofTerm,i.start=i.end=e.pos,t=this.addActions(e,i.value,i.end,t)),this.mainToken=i,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let t=new Oh,{pos:i,p:s}=e;return t.start=i,t.end=Math.min(i+1,s.stream.end),t.value=i==s.stream.end?s.parser.eofTerm:0,t}updateCachedToken(e,t,i){let s=this.stream.clipPos(i.pos);if(t.token(this.stream.reset(s,e),i),e.value>-1){let{parser:n}=i.p;for(let a=0;a<n.specialized.length;a++)if(n.specialized[a]==e.value){let o=n.specializers[a](this.stream.read(e.start,e.end),i);if(o>=0&&i.p.parser.dialect.allows(o>>1)){(o&1)==0?e.value=o>>1:e.extended=o>>1;break}}}else e.value=0,e.end=this.stream.clipPos(s+1)}putAction(e,t,i,s){for(let n=0;n<s;n+=3)if(this.actions[n]==e)return s;return this.actions[s++]=e,this.actions[s++]=t,this.actions[s++]=i,s}addActions(e,t,i,s){let{state:n}=e,{parser:a}=e.p,{data:o}=a;for(let l=0;l<2;l++)for(let u=a.stateSlot(n,l?2:1);;u+=3){if(o[u]==65535)if(o[u+1]==1)u=bs(o,u+2);else{s==0&&o[u+1]==2&&(s=this.putAction(bs(o,u+2),t,i,s));break}o[u]==t&&(s=this.putAction(bs(o,u+1),t,i,s))}return s}}class _q{constructor(e,t,i,s){this.parser=e,this.input=t,this.ranges=s,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new bq(t,s),this.tokens=new Tq(e,this.stream),this.topTerm=e.top[1];let{from:n}=s[0];this.stacks=[Od.start(this,e.top[0],n)],this.fragments=i.length&&this.stream.end-n>e.bufferLength*4?new Sq(i,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,t=this.minStackPos,i=this.stacks=[],s,n;if(this.bigReductionCount>300&&e.length==1){let[a]=e;for(;a.forceReduce()&&a.stack.length&&a.stack[a.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let a=0;a<e.length;a++){let o=e[a];for(;;){if(this.tokens.mainToken=null,o.pos>t)i.push(o);else{if(this.advanceStack(o,i,e))continue;{s||(s=[],n=[]),s.push(o);let l=this.tokens.getMainToken(o);n.push(l.value,l.end)}}break}}if(!i.length){let a=s&&wq(s);if(a)return Ui&&console.log("Finish with "+this.stackID(a)),this.stackToTree(a);if(this.parser.strict)throw Ui&&s&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+t);this.recovering||(this.recovering=5)}if(this.recovering&&s){let a=this.stoppedAt!=null&&s[0].pos>this.stoppedAt?s[0]:this.runRecovery(s,n,i);if(a)return Ui&&console.log("Force-finish "+this.stackID(a)),this.stackToTree(a.forceAll())}if(this.recovering){let a=this.recovering==1?1:this.recovering*3;if(i.length>a)for(i.sort((o,l)=>l.score-o.score);i.length>a;)i.pop();i.some(o=>o.reducePos>t)&&this.recovering--}else if(i.length>1){e:for(let a=0;a<i.length-1;a++){let o=i[a];for(let l=a+1;l<i.length;l++){let u=i[l];if(o.sameState(u)||o.buffer.length>500&&u.buffer.length>500)if((o.score-u.score||o.buffer.length-u.buffer.length)>0)i.splice(l--,1);else{i.splice(a--,1);continue e}}}i.length>12&&i.splice(12,i.length-12)}this.minStackPos=i[0].pos;for(let a=1;a<i.length;a++)i[a].pos<this.minStackPos&&(this.minStackPos=i[a].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,t,i){let s=e.pos,{parser:n}=this,a=Ui?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&s>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let u=e.curContext&&e.curContext.tracker.strict,c=u?e.curContext.hash:0;for(let h=this.fragments.nodeAt(s);h;){let f=this.parser.nodeSet.types[h.type.id]==h.type?n.getGoto(e.state,h.type.id):-1;if(f>-1&&h.length&&(!u||(h.prop(Qe.contextHash)||0)==c))return e.useNode(h,f),Ui&&console.log(a+this.stackID(e)+` (via reuse of ${n.getName(h.type.id)})`),!0;if(!(h instanceof et)||h.children.length==0||h.positions[0]>0)break;let m=h.children[0];if(m instanceof et&&h.positions[0]==0)h=m;else break}}let o=n.stateSlot(e.state,4);if(o>0)return e.reduce(o),Ui&&console.log(a+this.stackID(e)+` (via always-reduce ${n.getName(o&65535)})`),!0;if(e.stack.length>=8400)for(;e.stack.length>6e3&&e.forceReduce(););let l=this.tokens.getActions(e);for(let u=0;u<l.length;){let c=l[u++],h=l[u++],f=l[u++],m=u==l.length||!i,S=m?e:e.split(),y=this.tokens.mainToken;if(S.apply(c,h,y?y.start:S.pos,f),Ui&&console.log(a+this.stackID(S)+` (via ${(c&65536)==0?"shift":`reduce of ${n.getName(c&65535)}`} for ${n.getName(h)} @ ${s}${S==e?"":", split"})`),m)return!0;S.pos>s?t.push(S):i.push(S)}return!1}advanceFully(e,t){let i=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>i)return I1(e,t),!0}}runRecovery(e,t,i){let s=null,n=!1;for(let a=0;a<e.length;a++){let o=e[a],l=t[a<<1],u=t[(a<<1)+1],c=Ui?this.stackID(o)+" -> ":"";if(o.deadEnd&&(n||(n=!0,o.restart(),Ui&&console.log(c+this.stackID(o)+" (restarted)"),this.advanceFully(o,i))))continue;let h=o.split(),f=c;for(let m=0;h.forceReduce()&&m<10&&(Ui&&console.log(f+this.stackID(h)+" (via force-reduce)"),!this.advanceFully(h,i));m++)Ui&&(f=this.stackID(h)+" -> ");for(let m of o.recoverByInsert(l))Ui&&console.log(c+this.stackID(m)+" (via recover-insert)"),this.advanceFully(m,i);this.stream.end>o.pos?(u==o.pos&&(u++,l=0),o.recoverByDelete(l,u),Ui&&console.log(c+this.stackID(o)+` (via recover-delete ${this.parser.getName(l)})`),I1(o,i)):(!s||s.score<o.score)&&(s=o)}return s}stackToTree(e){return e.close(),et.build({buffer:yd.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let t=(qp||(qp=new WeakMap)).get(e);return t||qp.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}}function I1(r,e){for(let t=0;t<e.length;t++){let i=e[t];if(i.pos==r.pos&&i.sameState(r)){e[t].score<r.score&&(e[t]=r);return}}e.push(r)}class xq{constructor(e,t,i){this.source=e,this.flags=t,this.disabled=i}allows(e){return!this.disabled||this.disabled[e]==0}}const Vp=r=>r;class CE{constructor(e){this.start=e.start,this.shift=e.shift||Vp,this.reduce=e.reduce||Vp,this.reuse=e.reuse||Vp,this.hash=e.hash||(()=>0),this.strict=e.strict!==!1}}class mo extends oO{constructor(e){if(super(),this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let t=e.nodeNames.split(" ");this.minRepeatTerm=t.length;for(let o=0;o<e.repeatNodeCount;o++)t.push("");let i=Object.keys(e.topRules).map(o=>e.topRules[o][1]),s=[];for(let o=0;o<t.length;o++)s.push([]);function n(o,l,u){s[o].push([l,l.deserialize(String(u))])}if(e.nodeProps)for(let o of e.nodeProps){let l=o[0];typeof l=="string"&&(l=Qe[l]);for(let u=1;u<o.length;){let c=o[u++];if(c>=0)n(c,l,o[u++]);else{let h=o[u+-c];for(let f=-c;f>0;f--)n(o[u++],l,h);u++}}}this.nodeSet=new qu(t.map((o,l)=>Xt.define({name:l>=this.minRepeatTerm?void 0:o,id:l,props:s[l],top:i.indexOf(l)>-1,error:l==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(l)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=PC;let a=Ol(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let o=0;o<this.specializerSpecs.length;o++)this.specialized[o]=this.specializerSpecs[o].term;this.specializers=this.specializerSpecs.map(R1),this.states=Ol(e.states,Uint32Array),this.data=Ol(e.stateData),this.goto=Ol(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(o=>typeof o=="number"?new Xa(a,o):o),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,t,i){let s=new _q(this,e,t,i);for(let n of this.wrappers)s=n(s,e,t,i);return s}getGoto(e,t,i=!1){let s=this.goto;if(t>=s[0])return-1;for(let n=s[t+1];;){let a=s[n++],o=a&1,l=s[n++];if(o&&i)return l;for(let u=n+(a>>1);n<u;n++)if(s[n]==e)return l;if(o)return-1}}hasAction(e,t){let i=this.data;for(let s=0;s<2;s++)for(let n=this.stateSlot(e,s?2:1),a;;n+=3){if((a=i[n])==65535)if(i[n+1]==1)a=i[n=bs(i,n+2)];else{if(i[n+1]==2)return bs(i,n+2);break}if(a==t||a==0)return bs(i,n+1)}return 0}stateSlot(e,t){return this.states[e*6+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}validAction(e,t){return!!this.allActions(e,i=>i==t?!0:null)}allActions(e,t){let i=this.stateSlot(e,4),s=i?t(i):void 0;for(let n=this.stateSlot(e,1);s==null;n+=3){if(this.data[n]==65535)if(this.data[n+1]==1)n=bs(this.data,n+2);else break;s=t(bs(this.data,n+1))}return s}nextStates(e){let t=[];for(let i=this.stateSlot(e,1);;i+=3){if(this.data[i]==65535)if(this.data[i+1]==1)i=bs(this.data,i+2);else break;if((this.data[i+2]&1)==0){let s=this.data[i+1];t.some((n,a)=>a&1&&n==s)||t.push(this.data[i],s)}}return t}configure(e){let t=Object.assign(Object.create(mo.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let i=this.topRules[e.top];if(!i)throw new RangeError(`Invalid top rule name ${e.top}`);t.top=i}return e.tokenizers&&(t.tokenizers=this.tokenizers.map(i=>{let s=e.tokenizers.find(n=>n.from==i);return s?s.to:i})),e.specializers&&(t.specializers=this.specializers.slice(),t.specializerSpecs=this.specializerSpecs.map((i,s)=>{let n=e.specializers.find(o=>o.from==i.external);if(!n)return i;let a=Object.assign(Object.assign({},i),{external:n.to});return t.specializers[s]=R1(a),a})),e.contextTracker&&(t.context=e.contextTracker),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(t.strict=e.strict),e.wrap&&(t.wrappers=t.wrappers.concat(e.wrap)),e.bufferLength!=null&&(t.bufferLength=e.bufferLength),t}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return t==null?0:t[e]||0}parseDialect(e){let t=Object.keys(this.dialects),i=t.map(()=>!1);if(e)for(let n of e.split(" ")){let a=t.indexOf(n);a>=0&&(i[a]=!0)}let s=null;for(let n=0;n<t.length;n++)if(!i[n])for(let a=this.dialects[t[n]],o;(o=this.data[a++])!=65535;)(s||(s=new Uint8Array(this.maxTerm+1)))[o]=1;return new xq(e,i,s)}static deserialize(e){return new mo(e)}}function bs(r,e){return r[e]|r[e+1]<<16}function wq(r){let e=null;for(let t of r){let i=t.p.stoppedAt;(t.pos==t.p.stream.end||i!=null&&t.pos>i)&&t.p.parser.stateFlag(t.state,2)&&(!e||e.score<t.score)&&(e=t)}return e}function R1(r){if(r.external){let e=r.extend?1:0;return(t,i)=>r.external(t,i)<<1|e}return r.get}const Cq=55,kq=1,Eq=56,Aq=2,Pq=57,Dq=3,L1=4,Mq=5,DO=6,kE=7,EE=8,AE=9,PE=10,Iq=11,Rq=12,Lq=13,Xp=58,Qq=14,$q=15,Q1=59,DE=21,Bq=23,ME=24,Nq=25,$g=27,IE=28,Fq=29,Uq=32,qq=35,Vq=37,Xq=38,jq=0,zq=1,Zq={area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},Wq={dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},$1={dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}};function Hq(r){return r==45||r==46||r==58||r>=65&&r<=90||r==95||r>=97&&r<=122||r>=161}let B1=null,N1=null,F1=0;function Bg(r,e){let t=r.pos+e;if(F1==t&&N1==r)return B1;let i=r.peek(e),s="";for(;Hq(i);)s+=String.fromCharCode(i),i=r.peek(++e);return N1=r,F1=t,B1=s?s.toLowerCase():i==Yq||i==Gq?void 0:null}const RE=60,vd=62,MO=47,Yq=63,Gq=33,Kq=45;function U1(r,e){this.name=r,this.parent=e}const Jq=[DO,PE,kE,EE,AE],e9=new CE({start:null,shift(r,e,t,i){return Jq.indexOf(e)>-1?new U1(Bg(i,1)||"",r):r},reduce(r,e){return e==DE&&r?r.parent:r},reuse(r,e,t,i){let s=e.type.id;return s==DO||s==Vq?new U1(Bg(i,1)||"",r):r},strict:!1}),t9=new Hi((r,e)=>{if(r.next!=RE){r.next<0&&e.context&&r.acceptToken(Xp);return}r.advance();let t=r.next==MO;t&&r.advance();let i=Bg(r,0);if(i===void 0)return;if(!i)return r.acceptToken(t?$q:Qq);let s=e.context?e.context.name:null;if(t){if(i==s)return r.acceptToken(Iq);if(s&&Wq[s])return r.acceptToken(Xp,-2);if(e.dialectEnabled(jq))return r.acceptToken(Rq);for(let n=e.context;n;n=n.parent)if(n.name==i)return;r.acceptToken(Lq)}else{if(i=="script")return r.acceptToken(kE);if(i=="style")return r.acceptToken(EE);if(i=="textarea")return r.acceptToken(AE);if(Zq.hasOwnProperty(i))return r.acceptToken(PE);s&&$1[s]&&$1[s][i]?r.acceptToken(Xp,-1):r.acceptToken(DO)}},{contextual:!0}),i9=new Hi(r=>{for(let e=0,t=0;;t++){if(r.next<0){t&&r.acceptToken(Q1);break}if(r.next==Kq)e++;else if(r.next==vd&&e>=2){t>=3&&r.acceptToken(Q1,-2);break}else e=0;r.advance()}});function r9(r){for(;r;r=r.parent)if(r.name=="svg"||r.name=="math")return!0;return!1}const s9=new Hi((r,e)=>{if(r.next==MO&&r.peek(1)==vd){let t=e.dialectEnabled(zq)||r9(e.context);r.acceptToken(t?Mq:L1,2)}else r.next==vd&&r.acceptToken(L1,1)});function IO(r,e,t){let i=2+r.length;return new Hi(s=>{for(let n=0,a=0,o=0;;o++){if(s.next<0){o&&s.acceptToken(e);break}if(n==0&&s.next==RE||n==1&&s.next==MO||n>=2&&n<i&&s.next==r.charCodeAt(n-2))n++,a++;else if(n==i&&s.next==vd){o>a?s.acceptToken(e,-a):s.acceptToken(t,-(a-2));break}else if((s.next==10||s.next==13)&&o){s.acceptToken(e,1);break}else n=a=0;s.advance()}})}const n9=IO("script",Cq,kq),a9=IO("style",Eq,Aq),o9=IO("textarea",Pq,Dq),l9=Eo({"Text RawText IncompleteTag IncompleteCloseTag":U.content,"StartTag StartCloseTag SelfClosingEndTag EndTag":U.angleBracket,TagName:U.tagName,"MismatchedCloseTag/TagName":[U.tagName,U.invalid],AttributeName:U.attributeName,"AttributeValue UnquotedAttributeValue":U.attributeValue,Is:U.definitionOperator,"EntityReference CharacterReference":U.character,Comment:U.blockComment,ProcessingInst:U.processingInstruction,DoctypeDecl:U.documentMeta}),u9=mo.deserialize({version:14,states:",xOVO!rOOO!ZQ#tO'#CrO!`Q#tO'#C{O!eQ#tO'#DOO!jQ#tO'#DRO!oQ#tO'#DTO!tOaO'#CqO#PObO'#CqO#[OdO'#CqO$kO!rO'#CqOOO`'#Cq'#CqO$rO$fO'#DUO$zQ#tO'#DWO%PQ#tO'#DXOOO`'#Dl'#DlOOO`'#DZ'#DZQVO!rOOO%UQ&rO,59^O%aQ&rO,59gO%lQ&rO,59jO%wQ&rO,59mO&SQ&rO,59oOOOa'#D_'#D_O&_OaO'#CyO&jOaO,59]OOOb'#D`'#D`O&rObO'#C|O&}ObO,59]OOOd'#Da'#DaO'VOdO'#DPO'bOdO,59]OOO`'#Db'#DbO'jO!rO,59]O'qQ#tO'#DSOOO`,59],59]OOOp'#Dc'#DcO'vO$fO,59pOOO`,59p,59pO(OQ#|O,59rO(TQ#|O,59sOOO`-E7X-E7XO(YQ&rO'#CtOOQW'#D['#D[O(hQ&rO1G.xOOOa1G.x1G.xOOO`1G/Z1G/ZO(sQ&rO1G/ROOOb1G/R1G/RO)OQ&rO1G/UOOOd1G/U1G/UO)ZQ&rO1G/XOOO`1G/X1G/XO)fQ&rO1G/ZOOOa-E7]-E7]O)qQ#tO'#CzOOO`1G.w1G.wOOOb-E7^-E7^O)vQ#tO'#C}OOOd-E7_-E7_O){Q#tO'#DQOOO`-E7`-E7`O*QQ#|O,59nOOOp-E7a-E7aOOO`1G/[1G/[OOO`1G/^1G/^OOO`1G/_1G/_O*VQ,UO,59`OOQW-E7Y-E7YOOOa7+$d7+$dOOO`7+$u7+$uOOOb7+$m7+$mOOOd7+$p7+$pOOO`7+$s7+$sO*bQ#|O,59fO*gQ#|O,59iO*lQ#|O,59lOOO`1G/Y1G/YO*qO7[O'#CwO+SOMhO'#CwOOQW1G.z1G.zOOO`1G/Q1G/QOOO`1G/T1G/TOOO`1G/W1G/WOOOO'#D]'#D]O+eO7[O,59cOOQW,59c,59cOOOO'#D^'#D^O+vOMhO,59cOOOO-E7Z-E7ZOOQW1G.}1G.}OOOO-E7[-E7[",stateData:",c~O!_OS~OUSOVPOWQOXROYTO[]O][O^^O_^Oa^Ob^Oc^Od^Oy^O|_O!eZO~OgaO~OgbO~OgcO~OgdO~OgeO~O!XfOPmP![mP~O!YiOQpP![pP~O!ZlORsP![sP~OUSOVPOWQOXROYTOZqO[]O][O^^O_^Oa^Ob^Oc^Od^Oy^O!eZO~O![rO~P#gO!]sO!fuO~OgvO~OgwO~OS|OT}OiyO~OS!POT}OiyO~OS!ROT}OiyO~OS!TOT}OiyO~OS}OT}OiyO~O!XfOPmX![mX~OP!WO![!XO~O!YiOQpX![pX~OQ!ZO![!XO~O!ZlORsX![sX~OR!]O![!XO~O![!XO~P#gOg!_O~O!]sO!f!aO~OS!bO~OS!cO~Oj!dOShXThXihX~OS!fOT!gOiyO~OS!hOT!gOiyO~OS!iOT!gOiyO~OS!jOT!gOiyO~OS!gOT!gOiyO~Og!kO~Og!lO~Og!mO~OS!nO~Ol!qO!a!oO!c!pO~OS!rO~OS!sO~OS!tO~Ob!uOc!uOd!uO!a!wO!b!uO~Ob!xOc!xOd!xO!c!wO!d!xO~Ob!uOc!uOd!uO!a!{O!b!uO~Ob!xOc!xOd!xO!c!{O!d!xO~OT~cbd!ey|!e~",goto:"%q!aPPPPPPPPPPPPPPPPPPPPP!b!hP!nPP!zP!}#Q#T#Z#^#a#g#j#m#s#y!bP!b!bP$P$V$m$s$y%P%V%]%cPPPPPPPP%iX^OX`pXUOX`pezabcde{!O!Q!S!UR!q!dRhUR!XhXVOX`pRkVR!XkXWOX`pRnWR!XnXXOX`pQrXR!XpXYOX`pQ`ORx`Q{aQ!ObQ!QcQ!SdQ!UeZ!e{!O!Q!S!UQ!v!oR!z!vQ!y!pR!|!yQgUR!VgQjVR!YjQmWR![mQpXR!^pQtZR!`tS_O`ToXp",nodeNames:"⚠ StartCloseTag StartCloseTag StartCloseTag EndTag SelfClosingEndTag StartTag StartTag StartTag StartTag StartTag StartCloseTag StartCloseTag StartCloseTag IncompleteTag IncompleteCloseTag Document Text EntityReference CharacterReference InvalidEntity Element OpenTag TagName Attribute AttributeName Is AttributeValue UnquotedAttributeValue ScriptText CloseTag OpenTag StyleText CloseTag OpenTag TextareaText CloseTag OpenTag CloseTag SelfClosingTag Comment ProcessingInst MismatchedCloseTag CloseTag DoctypeDecl",maxTerm:68,context:e9,nodeProps:[["closedBy",-10,1,2,3,7,8,9,10,11,12,13,"EndTag",6,"EndTag SelfClosingEndTag",-4,22,31,34,37,"CloseTag"],["openedBy",4,"StartTag StartCloseTag",5,"StartTag",-4,30,33,36,38,"OpenTag"],["group",-10,14,15,18,19,20,21,40,41,42,43,"Entity",17,"Entity TextContent",-3,29,32,35,"TextContent Entity"],["isolate",-11,22,30,31,33,34,36,37,38,39,42,43,"ltr",-3,27,28,40,""]],propSources:[l9],skippedNodes:[0],repeatNodeCount:9,tokenData:"!<p!aR!YOX$qXY,QYZ,QZ[$q[]&X]^,Q^p$qpq,Qqr-_rs3_sv-_vw3}wxHYx}-_}!OH{!O!P-_!P!Q$q!Q![-_![!]Mz!]!^-_!^!_!$S!_!`!;x!`!a&X!a!c-_!c!}Mz!}#R-_#R#SMz#S#T1k#T#oMz#o#s-_#s$f$q$f%W-_%W%oMz%o%p-_%p&aMz&a&b-_&b1pMz1p4U-_4U4dMz4d4e-_4e$ISMz$IS$I`-_$I`$IbMz$Ib$Kh-_$Kh%#tMz%#t&/x-_&/x&EtMz&Et&FV-_&FV;'SMz;'S;:j!#|;:j;=`3X<%l?&r-_?&r?AhMz?Ah?BY$q?BY?MnMz?MnO$q!Z$|caPlW!b`!dpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr$qrs&}sv$qvw+Pwx(tx!^$q!^!_*V!_!a&X!a#S$q#S#T&X#T;'S$q;'S;=`+z<%lO$q!R&bXaP!b`!dpOr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&Xq'UVaP!dpOv&}wx'kx!^&}!^!_(V!_;'S&};'S;=`(n<%lO&}P'pTaPOv'kw!^'k!_;'S'k;'S;=`(P<%lO'kP(SP;=`<%l'kp([S!dpOv(Vx;'S(V;'S;=`(h<%lO(Vp(kP;=`<%l(Vq(qP;=`<%l&}a({WaP!b`Or(trs'ksv(tw!^(t!^!_)e!_;'S(t;'S;=`*P<%lO(t`)jT!b`Or)esv)ew;'S)e;'S;=`)y<%lO)e`)|P;=`<%l)ea*SP;=`<%l(t!Q*^V!b`!dpOr*Vrs(Vsv*Vwx)ex;'S*V;'S;=`*s<%lO*V!Q*vP;=`<%l*V!R*|P;=`<%l&XW+UYlWOX+PZ[+P^p+Pqr+Psw+Px!^+P!a#S+P#T;'S+P;'S;=`+t<%lO+PW+wP;=`<%l+P!Z+}P;=`<%l$q!a,]`aP!b`!dp!_^OX&XXY,QYZ,QZ]&X]^,Q^p&Xpq,Qqr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&X!_-ljiSaPlW!b`!dpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr-_rs&}sv-_vw/^wx(tx!P-_!P!Q$q!Q!^-_!^!_*V!_!a&X!a#S-_#S#T1k#T#s-_#s$f$q$f;'S-_;'S;=`3X<%l?Ah-_?Ah?BY$q?BY?Mn-_?MnO$q[/ebiSlWOX+PZ[+P^p+Pqr/^sw/^x!P/^!P!Q+P!Q!^/^!a#S/^#S#T0m#T#s/^#s$f+P$f;'S/^;'S;=`1e<%l?Ah/^?Ah?BY+P?BY?Mn/^?MnO+PS0rXiSqr0msw0mx!P0m!Q!^0m!a#s0m$f;'S0m;'S;=`1_<%l?Ah0m?BY?Mn0mS1bP;=`<%l0m[1hP;=`<%l/^!V1vciSaP!b`!dpOq&Xqr1krs&}sv1kvw0mwx(tx!P1k!P!Q&X!Q!^1k!^!_*V!_!a&X!a#s1k#s$f&X$f;'S1k;'S;=`3R<%l?Ah1k?Ah?BY&X?BY?Mn1k?MnO&X!V3UP;=`<%l1k!_3[P;=`<%l-_!Z3hV!ahaP!dpOv&}wx'kx!^&}!^!_(V!_;'S&};'S;=`(n<%lO&}!_4WiiSlWd!ROX5uXZ7SZ[5u[^7S^p5uqr8trs7Sst>]tw8twx7Sx!P8t!P!Q5u!Q!]8t!]!^/^!^!a7S!a#S8t#S#T;{#T#s8t#s$f5u$f;'S8t;'S;=`>V<%l?Ah8t?Ah?BY5u?BY?Mn8t?MnO5u!Z5zblWOX5uXZ7SZ[5u[^7S^p5uqr5urs7Sst+Ptw5uwx7Sx!]5u!]!^7w!^!a7S!a#S5u#S#T7S#T;'S5u;'S;=`8n<%lO5u!R7VVOp7Sqs7St!]7S!]!^7l!^;'S7S;'S;=`7q<%lO7S!R7qOb!R!R7tP;=`<%l7S!Z8OYlWb!ROX+PZ[+P^p+Pqr+Psw+Px!^+P!a#S+P#T;'S+P;'S;=`+t<%lO+P!Z8qP;=`<%l5u!_8{iiSlWOX5uXZ7SZ[5u[^7S^p5uqr8trs7Sst/^tw8twx7Sx!P8t!P!Q5u!Q!]8t!]!^:j!^!a7S!a#S8t#S#T;{#T#s8t#s$f5u$f;'S8t;'S;=`>V<%l?Ah8t?Ah?BY5u?BY?Mn8t?MnO5u!_:sbiSlWb!ROX+PZ[+P^p+Pqr/^sw/^x!P/^!P!Q+P!Q!^/^!a#S/^#S#T0m#T#s/^#s$f+P$f;'S/^;'S;=`1e<%l?Ah/^?Ah?BY+P?BY?Mn/^?MnO+P!V<QciSOp7Sqr;{rs7Sst0mtw;{wx7Sx!P;{!P!Q7S!Q!];{!]!^=]!^!a7S!a#s;{#s$f7S$f;'S;{;'S;=`>P<%l?Ah;{?Ah?BY7S?BY?Mn;{?MnO7S!V=dXiSb!Rqr0msw0mx!P0m!Q!^0m!a#s0m$f;'S0m;'S;=`1_<%l?Ah0m?BY?Mn0m!V>SP;=`<%l;{!_>YP;=`<%l8t!_>dhiSlWOX@OXZAYZ[@O[^AY^p@OqrBwrsAYswBwwxAYx!PBw!P!Q@O!Q!]Bw!]!^/^!^!aAY!a#SBw#S#TE{#T#sBw#s$f@O$f;'SBw;'S;=`HS<%l?AhBw?Ah?BY@O?BY?MnBw?MnO@O!Z@TalWOX@OXZAYZ[@O[^AY^p@Oqr@OrsAYsw@OwxAYx!]@O!]!^Az!^!aAY!a#S@O#S#TAY#T;'S@O;'S;=`Bq<%lO@O!RA]UOpAYq!]AY!]!^Ao!^;'SAY;'S;=`At<%lOAY!RAtOc!R!RAwP;=`<%lAY!ZBRYlWc!ROX+PZ[+P^p+Pqr+Psw+Px!^+P!a#S+P#T;'S+P;'S;=`+t<%lO+P!ZBtP;=`<%l@O!_COhiSlWOX@OXZAYZ[@O[^AY^p@OqrBwrsAYswBwwxAYx!PBw!P!Q@O!Q!]Bw!]!^Dj!^!aAY!a#SBw#S#TE{#T#sBw#s$f@O$f;'SBw;'S;=`HS<%l?AhBw?Ah?BY@O?BY?MnBw?MnO@O!_DsbiSlWc!ROX+PZ[+P^p+Pqr/^sw/^x!P/^!P!Q+P!Q!^/^!a#S/^#S#T0m#T#s/^#s$f+P$f;'S/^;'S;=`1e<%l?Ah/^?Ah?BY+P?BY?Mn/^?MnO+P!VFQbiSOpAYqrE{rsAYswE{wxAYx!PE{!P!QAY!Q!]E{!]!^GY!^!aAY!a#sE{#s$fAY$f;'SE{;'S;=`G|<%l?AhE{?Ah?BYAY?BY?MnE{?MnOAY!VGaXiSc!Rqr0msw0mx!P0m!Q!^0m!a#s0m$f;'S0m;'S;=`1_<%l?Ah0m?BY?Mn0m!VHPP;=`<%lE{!_HVP;=`<%lBw!ZHcW!cxaP!b`Or(trs'ksv(tw!^(t!^!_)e!_;'S(t;'S;=`*P<%lO(t!aIYliSaPlW!b`!dpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr-_rs&}sv-_vw/^wx(tx}-_}!OKQ!O!P-_!P!Q$q!Q!^-_!^!_*V!_!a&X!a#S-_#S#T1k#T#s-_#s$f$q$f;'S-_;'S;=`3X<%l?Ah-_?Ah?BY$q?BY?Mn-_?MnO$q!aK_kiSaPlW!b`!dpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr-_rs&}sv-_vw/^wx(tx!P-_!P!Q$q!Q!^-_!^!_*V!_!`&X!`!aMS!a#S-_#S#T1k#T#s-_#s$f$q$f;'S-_;'S;=`3X<%l?Ah-_?Ah?BY$q?BY?Mn-_?MnO$q!TM_XaP!b`!dp!fQOr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&X!aNZ!ZiSgQaPlW!b`!dpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr-_rs&}sv-_vw/^wx(tx}-_}!OMz!O!PMz!P!Q$q!Q![Mz![!]Mz!]!^-_!^!_*V!_!a&X!a!c-_!c!}Mz!}#R-_#R#SMz#S#T1k#T#oMz#o#s-_#s$f$q$f$}-_$}%OMz%O%W-_%W%oMz%o%p-_%p&aMz&a&b-_&b1pMz1p4UMz4U4dMz4d4e-_4e$ISMz$IS$I`-_$I`$IbMz$Ib$Je-_$Je$JgMz$Jg$Kh-_$Kh%#tMz%#t&/x-_&/x&EtMz&Et&FV-_&FV;'SMz;'S;:j!#|;:j;=`3X<%l?&r-_?&r?AhMz?Ah?BY$q?BY?MnMz?MnO$q!a!$PP;=`<%lMz!R!$ZY!b`!dpOq*Vqr!$yrs(Vsv*Vwx)ex!a*V!a!b!4t!b;'S*V;'S;=`*s<%lO*V!R!%Q]!b`!dpOr*Vrs(Vsv*Vwx)ex}*V}!O!%y!O!f*V!f!g!']!g#W*V#W#X!0`#X;'S*V;'S;=`*s<%lO*V!R!&QX!b`!dpOr*Vrs(Vsv*Vwx)ex}*V}!O!&m!O;'S*V;'S;=`*s<%lO*V!R!&vV!b`!dp!ePOr*Vrs(Vsv*Vwx)ex;'S*V;'S;=`*s<%lO*V!R!'dX!b`!dpOr*Vrs(Vsv*Vwx)ex!q*V!q!r!(P!r;'S*V;'S;=`*s<%lO*V!R!(WX!b`!dpOr*Vrs(Vsv*Vwx)ex!e*V!e!f!(s!f;'S*V;'S;=`*s<%lO*V!R!(zX!b`!dpOr*Vrs(Vsv*Vwx)ex!v*V!v!w!)g!w;'S*V;'S;=`*s<%lO*V!R!)nX!b`!dpOr*Vrs(Vsv*Vwx)ex!{*V!{!|!*Z!|;'S*V;'S;=`*s<%lO*V!R!*bX!b`!dpOr*Vrs(Vsv*Vwx)ex!r*V!r!s!*}!s;'S*V;'S;=`*s<%lO*V!R!+UX!b`!dpOr*Vrs(Vsv*Vwx)ex!g*V!g!h!+q!h;'S*V;'S;=`*s<%lO*V!R!+xY!b`!dpOr!+qrs!,hsv!+qvw!-Swx!.[x!`!+q!`!a!/j!a;'S!+q;'S;=`!0Y<%lO!+qq!,mV!dpOv!,hvx!-Sx!`!,h!`!a!-q!a;'S!,h;'S;=`!.U<%lO!,hP!-VTO!`!-S!`!a!-f!a;'S!-S;'S;=`!-k<%lO!-SP!-kO|PP!-nP;=`<%l!-Sq!-xS!dp|POv(Vx;'S(V;'S;=`(h<%lO(Vq!.XP;=`<%l!,ha!.aX!b`Or!.[rs!-Ssv!.[vw!-Sw!`!.[!`!a!.|!a;'S!.[;'S;=`!/d<%lO!.[a!/TT!b`|POr)esv)ew;'S)e;'S;=`)y<%lO)ea!/gP;=`<%l!.[!R!/sV!b`!dp|POr*Vrs(Vsv*Vwx)ex;'S*V;'S;=`*s<%lO*V!R!0]P;=`<%l!+q!R!0gX!b`!dpOr*Vrs(Vsv*Vwx)ex#c*V#c#d!1S#d;'S*V;'S;=`*s<%lO*V!R!1ZX!b`!dpOr*Vrs(Vsv*Vwx)ex#V*V#V#W!1v#W;'S*V;'S;=`*s<%lO*V!R!1}X!b`!dpOr*Vrs(Vsv*Vwx)ex#h*V#h#i!2j#i;'S*V;'S;=`*s<%lO*V!R!2qX!b`!dpOr*Vrs(Vsv*Vwx)ex#m*V#m#n!3^#n;'S*V;'S;=`*s<%lO*V!R!3eX!b`!dpOr*Vrs(Vsv*Vwx)ex#d*V#d#e!4Q#e;'S*V;'S;=`*s<%lO*V!R!4XX!b`!dpOr*Vrs(Vsv*Vwx)ex#X*V#X#Y!+q#Y;'S*V;'S;=`*s<%lO*V!R!4{Y!b`!dpOr!4trs!5ksv!4tvw!6Vwx!8]x!a!4t!a!b!:]!b;'S!4t;'S;=`!;r<%lO!4tq!5pV!dpOv!5kvx!6Vx!a!5k!a!b!7W!b;'S!5k;'S;=`!8V<%lO!5kP!6YTO!a!6V!a!b!6i!b;'S!6V;'S;=`!7Q<%lO!6VP!6lTO!`!6V!`!a!6{!a;'S!6V;'S;=`!7Q<%lO!6VP!7QOyPP!7TP;=`<%l!6Vq!7]V!dpOv!5kvx!6Vx!`!5k!`!a!7r!a;'S!5k;'S;=`!8V<%lO!5kq!7yS!dpyPOv(Vx;'S(V;'S;=`(h<%lO(Vq!8YP;=`<%l!5ka!8bX!b`Or!8]rs!6Vsv!8]vw!6Vw!a!8]!a!b!8}!b;'S!8];'S;=`!:V<%lO!8]a!9SX!b`Or!8]rs!6Vsv!8]vw!6Vw!`!8]!`!a!9o!a;'S!8];'S;=`!:V<%lO!8]a!9vT!b`yPOr)esv)ew;'S)e;'S;=`)y<%lO)ea!:YP;=`<%l!8]!R!:dY!b`!dpOr!4trs!5ksv!4tvw!6Vwx!8]x!`!4t!`!a!;S!a;'S!4t;'S;=`!;r<%lO!4t!R!;]V!b`!dpyPOr*Vrs(Vsv*Vwx)ex;'S*V;'S;=`*s<%lO*V!R!;uP;=`<%l!4t!V!<TXjSaP!b`!dpOr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&X",tokenizers:[n9,a9,o9,s9,t9,i9,0,1,2,3,4,5],topRules:{Document:[0,16]},dialects:{noMatch:0,selfClosing:515},tokenPrec:517});function LE(r,e){let t=Object.create(null);for(let i of r.getChildren(ME)){let s=i.getChild(Nq),n=i.getChild($g)||i.getChild(IE);s&&(t[e.read(s.from,s.to)]=n?n.type.id==$g?e.read(n.from+1,n.to-1):e.read(n.from,n.to):"")}return t}function q1(r,e){let t=r.getChild(Bq);return t?e.read(t.from,t.to):" "}function jp(r,e,t){let i;for(let s of t)if(!s.attrs||s.attrs(i||(i=LE(r.node.parent.firstChild,e))))return{parser:s.parser};return null}function QE(r=[],e=[]){let t=[],i=[],s=[],n=[];for(let o of r)(o.tag=="script"?t:o.tag=="style"?i:o.tag=="textarea"?s:n).push(o);let a=e.length?Object.create(null):null;for(let o of e)(a[o.name]||(a[o.name]=[])).push(o);return LC((o,l)=>{let u=o.type.id;if(u==Fq)return jp(o,l,t);if(u==Uq)return jp(o,l,i);if(u==qq)return jp(o,l,s);if(u==DE&&n.length){let c=o.node,h=c.firstChild,f=h&&q1(h,l),m;if(f){for(let S of n)if(S.tag==f&&(!S.attrs||S.attrs(m||(m=LE(h,l))))){let y=c.lastChild,E=y.type.id==Xq?y.from:c.to;if(E>h.to)return{parser:S.parser,overlay:[{from:h.to,to:E}]}}}}if(a&&u==ME){let c=o.node,h;if(h=c.firstChild){let f=a[l.read(h.from,h.to)];if(f)for(let m of f){if(m.tagName&&m.tagName!=q1(c.parent,l))continue;let S=c.lastChild;if(S.type.id==$g){let y=S.from+1,E=S.lastChild,C=S.to-(E&&E.isError?0:1);if(C>y)return{parser:m.parser,overlay:[{from:y,to:C}]}}else if(S.type.id==IE)return{parser:m.parser,overlay:[{from:S.from,to:S.to}]}}}}return null})}const c9=122,V1=1,h9=123,d9=124,$E=2,f9=125,p9=3,m9=4,BE=[9,10,11,12,13,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288],g9=58,O9=40,NE=95,y9=91,yh=45,b9=46,v9=35,S9=37,T9=38,_9=92,x9=10,w9=42;function du(r){return r>=65&&r<=90||r>=97&&r<=122||r>=161}function RO(r){return r>=48&&r<=57}function X1(r){return RO(r)||r>=97&&r<=102||r>=65&&r<=70}const FE=(r,e,t)=>(i,s)=>{for(let n=!1,a=0,o=0;;o++){let{next:l}=i;if(du(l)||l==yh||l==NE||n&&RO(l))!n&&(l!=yh||o>0)&&(n=!0),a===o&&l==yh&&a++,i.advance();else if(l==_9&&i.peek(1)!=x9){if(i.advance(),X1(i.next)){do i.advance();while(X1(i.next));i.next==32&&i.advance()}else i.next>-1&&i.advance();n=!0}else{n&&i.acceptToken(a==2&&s.canShift($E)?e:l==O9?t:r);break}}},C9=new Hi(FE(h9,$E,d9)),k9=new Hi(FE(f9,p9,m9)),E9=new Hi(r=>{if(BE.includes(r.peek(-1))){let{next:e}=r;(du(e)||e==NE||e==v9||e==b9||e==w9||e==y9||e==g9&&du(r.peek(1))||e==yh||e==T9)&&r.acceptToken(c9)}}),A9=new Hi(r=>{if(!BE.includes(r.peek(-1))){let{next:e}=r;if(e==S9&&(r.advance(),r.acceptToken(V1)),du(e)){do r.advance();while(du(r.next)||RO(r.next));r.acceptToken(V1)}}}),P9=Eo({"AtKeyword import charset namespace keyframes media supports":U.definitionKeyword,"from to selector":U.keyword,NamespaceName:U.namespace,KeyframeName:U.labelName,KeyframeRangeName:U.operatorKeyword,TagName:U.tagName,ClassName:U.className,PseudoClassName:U.constant(U.className),IdName:U.labelName,"FeatureName PropertyName":U.propertyName,AttributeName:U.attributeName,NumberLiteral:U.number,KeywordQuery:U.keyword,UnaryQueryOp:U.operatorKeyword,"CallTag ValueName":U.atom,VariableName:U.variableName,Callee:U.operatorKeyword,Unit:U.unit,"UniversalSelector NestingSelector":U.definitionOperator,"MatchOp CompareOp":U.compareOperator,"ChildOp SiblingOp, LogicOp":U.logicOperator,BinOp:U.arithmeticOperator,Important:U.modifier,Comment:U.blockComment,ColorLiteral:U.color,"ParenthesizedContent StringLiteral":U.string,":":U.punctuation,"PseudoOp #":U.derefOperator,"; ,":U.separator,"( )":U.paren,"[ ]":U.squareBracket,"{ }":U.brace}),D9={__proto__:null,lang:38,"nth-child":38,"nth-last-child":38,"nth-of-type":38,"nth-last-of-type":38,dir:38,"host-context":38,if:84,url:124,"url-prefix":124,domain:124,regexp:124},M9={__proto__:null,or:98,and:98,not:106,only:106,layer:170},I9={__proto__:null,selector:112,layer:166},R9={__proto__:null,"@import":162,"@media":174,"@charset":178,"@namespace":182,"@keyframes":188,"@supports":200,"@scope":204},L9={__proto__:null,to:207},Q9=mo.deserialize({version:14,states:"EbQYQdOOO#qQdOOP#xO`OOOOQP'#Cf'#CfOOQP'#Ce'#CeO#}QdO'#ChO$nQaO'#CcO$xQdO'#CkO%TQdO'#DpO%YQdO'#DrO%_QdO'#DuO%_QdO'#DxOOQP'#FV'#FVO&eQhO'#EhOOQS'#FU'#FUOOQS'#Ek'#EkQYQdOOO&lQdO'#EOO&PQhO'#EUO&lQdO'#EWO'aQdO'#EYO'lQdO'#E]O'tQhO'#EcO(VQdO'#EeO(bQaO'#CfO)VQ`O'#D{O)[Q`O'#F`O)gQdO'#F`QOQ`OOP)qO&jO'#CaPOOO)C@t)C@tOOQP'#Cj'#CjOOQP,59S,59SO#}QdO,59SO)|QdO,59VO%TQdO,5:[O%YQdO,5:^O%_QdO,5:aO%_QdO,5:cO%_QdO,5:dO%_QdO'#ErO*XQ`O,58}O*aQdO'#DzOOQS,58},58}OOQP'#Cn'#CnOOQO'#Dn'#DnOOQP,59V,59VO*hQ`O,59VO*mQ`O,59VOOQP'#Dq'#DqOOQP,5:[,5:[OOQO'#Ds'#DsO*rQpO,5:^O+]QaO,5:aO+sQaO,5:dOOQW'#DZ'#DZO,ZQhO'#DdO,xQhO'#FaO'tQhO'#DbO-WQ`O'#DhOOQW'#F['#F[O-]Q`O,5;SO-eQ`O'#DeOOQS-E8i-E8iOOQ['#Cs'#CsO-jQdO'#CtO.QQdO'#CzO.hQdO'#C}O/OQ!pO'#DPO1RQ!jO,5:jOOQO'#DU'#DUO*mQ`O'#DTO1cQ!nO'#FXO3`Q`O'#DVO3eQ`O'#DkOOQ['#FX'#FXO-`Q`O,5:pO3jQ!bO,5:rOOQS'#E['#E[O3rQ`O,5:tO3wQdO,5:tOOQO'#E_'#E_O4PQ`O,5:wO4UQhO,5:}O%_QdO'#DgOOQS,5;P,5;PO-eQ`O,5;PO4^QdO,5;PO4fQdO,5:gO4vQdO'#EtO5TQ`O,5;zO5TQ`O,5;zPOOO'#Ej'#EjP5`O&jO,58{POOO,58{,58{OOQP1G.n1G.nOOQP1G.q1G.qO*hQ`O1G.qO*mQ`O1G.qOOQP1G/v1G/vO5kQpO1G/xO5sQaO1G/{O6ZQaO1G/}O6qQaO1G0OO7XQaO,5;^OOQO-E8p-E8pOOQS1G.i1G.iO7cQ`O,5:fO7hQdO'#DoO7oQdO'#CrOOQP1G/x1G/xO&lQdO1G/xO7vQ!jO'#DZO8UQ!bO,59vO8^QhO,5:OOOQO'#F]'#F]O8XQ!bO,59zO'tQhO,59xO8fQhO'#EvO8sQ`O,5;{O9OQhO,59|O9uQhO'#DiOOQW,5:S,5:SOOQS1G0n1G0nOOQW,5:P,5:PO9|Q!fO'#FYOOQS'#FY'#FYOOQS'#Em'#EmO;^QdO,59`OOQ[,59`,59`O;tQdO,59fOOQ[,59f,59fO<[QdO,59iOOQ[,59i,59iOOQ[,59k,59kO&lQdO,59mO<rQhO'#EQOOQW'#EQ'#EQO=WQ`O1G0UO1[QhO1G0UOOQ[,59o,59oO'tQhO'#DXOOQ[,59q,59qO=]Q#tO,5:VOOQS1G0[1G0[OOQS1G0^1G0^OOQS1G0`1G0`O=hQ`O1G0`O=mQdO'#E`OOQS1G0c1G0cOOQS1G0i1G0iO=xQaO,5:RO-`Q`O1G0kOOQS1G0k1G0kO-eQ`O1G0kO>PQ!fO1G0ROOQO1G0R1G0ROOQO,5;`,5;`O>gQdO,5;`OOQO-E8r-E8rO>tQ`O1G1fPOOO-E8h-E8hPOOO1G.g1G.gOOQP7+$]7+$]OOQP7+%d7+%dO&lQdO7+%dOOQS1G0Q1G0QO?PQaO'#F_O?ZQ`O,5:ZO?`Q!fO'#ElO@^QdO'#FWO@hQ`O,59^O@mQ!bO7+%dO&lQdO1G/bO@uQhO1G/fOOQW1G/j1G/jOOQW1G/d1G/dOAWQhO,5;bOOQO-E8t-E8tOAfQhO'#DZOAtQhO'#F^OBPQ`O'#F^OBUQ`O,5:TOOQS-E8k-E8kOOQ[1G.z1G.zOOQ[1G/Q1G/QOOQ[1G/T1G/TOOQ[1G/X1G/XOBZQdO,5:lOOQS7+%p7+%pOB`Q`O7+%pOBeQhO'#DYOBmQ`O,59sO'tQhO,59sOOQ[1G/q1G/qOBuQ`O1G/qOOQS7+%z7+%zOBzQbO'#DPOOQO'#Eb'#EbOCYQ`O'#EaOOQO'#Ea'#EaOCeQ`O'#EwOCmQdO,5:zOOQS,5:z,5:zOOQ[1G/m1G/mOOQS7+&V7+&VO-`Q`O7+&VOCxQ!fO'#EsO&lQdO'#EsOEPQdO7+%mOOQO7+%m7+%mOOQO1G0z1G0zOEdQ!bO<<IOOElQdO'#EqOEvQ`O,5;yOOQP1G/u1G/uOOQS-E8j-E8jOFOQdO'#EpOFYQ`O,5;rOOQ]1G.x1G.xOOQP<<IO<<IOOFbQdO7+$|OOQO'#D]'#D]OFiQ!bO7+%QOFqQhO'#EoOF{Q`O,5;xO&lQdO,5;xOOQW1G/o1G/oOOQO'#ES'#ESOGTQ`O1G0WOOQS<<I[<<I[O&lQdO,59tOGnQhO1G/_OOQ[1G/_1G/_OGuQ`O1G/_OOQW-E8l-E8lOOQ[7+%]7+%]OOQO,5:{,5:{O=pQdO'#ExOCeQ`O,5;cOOQS,5;c,5;cOOQS-E8u-E8uOOQS1G0f1G0fOOQS<<Iq<<IqOG}Q!fO,5;_OOQS-E8q-E8qOOQO<<IX<<IXOOQPAN>jAN>jOIUQaO,5;]OOQO-E8o-E8oOI`QdO,5;[OOQO-E8n-E8nOOQW<<Hh<<HhOOQW<<Hl<<HlOIjQhO<<HlOI{QhO,5;ZOJWQ`O,5;ZOOQO-E8m-E8mOJ]QdO1G1dOBZQdO'#EuOJgQ`O7+%rOOQW7+%r7+%rOJoQ!bO1G/`OOQ[7+$y7+$yOJzQhO7+$yPKRQ`O'#EnOOQO,5;d,5;dOOQO-E8v-E8vOOQS1G0}1G0}OKWQ`OAN>WO&lQdO1G0uOK]Q`O7+'OOOQO,5;a,5;aOOQO-E8s-E8sOOQW<<I^<<I^OOQ[<<He<<HePOQW,5;Y,5;YOOQWG23rG23rOKeQdO7+&a",stateData:"Kx~O#sOS#tQQ~OW[OZ[O]TO`VOaVOi]OjWOmXO!jYO!mZO!saO!ybO!{cO!}dO#QeO#WfO#YgO#oRO~OQiOW[OZ[O]TO`VOaVOi]OjWOmXO!jYO!mZO!saO!ybO!{cO!}dO#QeO#WfO#YgO#ohO~O#m$SP~P!dO#tmO~O#ooO~O]qO`rOarOjsOmtO!juO!mwO#nvO~OpzO!^xO~P$SOc!QO#o|O#p}O~O#o!RO~O#o!TO~OW[OZ[O]TO`VOaVOjWOmXO!jYO!mZO#oRO~OS!]Oe!YO!V![O!Y!`O#q!XOp$TP~Ok$TP~P&POQ!jOe!cOm!dOp!eOr!mOt!mOz!kO!`!lO#o!bO#p!hO#}!fO~Ot!qO!`!lO#o!pO~Ot!sO#o!sO~OS!]Oe!YO!V![O!Y!`O#q!XO~Oe!vOpzO#Z!xO~O]YX`YX`!pXaYXjYXmYXpYX!^YX!jYX!mYX#nYX~O`!zO~Ok!{O#m$SXo$SX~O#m$SXo$SX~P!dO#u#OO#v#OO#w#QO~Oc#UO#o|O#p}O~OpzO!^xO~Oo$SP~P!dOe#`O~Oe#aO~Ol#bO!h#cO~O]qO`rOarOjsOmtO~Op!ia!^!ia!j!ia!m!ia#n!iad!ia~P*zOp!la!^!la!j!la!m!la#n!lad!la~P*zOR#gOS!]Oe!YOr#gOt#gO!V![O!Y!`O#q#dO#}!fO~O!R#iO!^#jOk$TXp$TX~Oe#mO~Ok#oOpzO~Oe!vO~O]#rO`#rOd#uOi#rOj#rOk#rO~P&lO]#rO`#rOi#rOj#rOk#rOl#wO~P&lO]#rO`#rOi#rOj#rOk#rOo#yO~P&lOP#zOSsXesXksXvsX!VsX!YsX!usX!wsX#qsX!TsXQsX]sX`sXdsXisXjsXmsXpsXrsXtsXzsX!`sX#osX#psX#}sXlsXosX!^sX!qsX#msX~Ov#{O!u#|O!w#}Ok$TP~P'tOe#aOS#{Xk#{Xv#{X!V#{X!Y#{X!u#{X!w#{X#q#{XQ#{X]#{X`#{Xd#{Xi#{Xj#{Xm#{Xp#{Xr#{Xt#{Xz#{X!`#{X#o#{X#p#{X#}#{Xl#{Xo#{X!^#{X!q#{X#m#{X~Oe$RO~Oe$TO~Ok$VOv#{O~Ok$WO~Ot$XO!`!lO~Op$YO~OpzO!R#iO~OpzO#Z$`O~O!q$bOk!oa#m!oao!oa~P&lOk#hX#m#hXo#hX~P!dOk!{O#m$Sao$Sa~O#u#OO#v#OO#w$hO~Ol$jO!h$kO~Op!ii!^!ii!j!ii!m!ii#n!iid!ii~P*zOp!ki!^!ki!j!ki!m!ki#n!kid!ki~P*zOp!li!^!li!j!li!m!li#n!lid!li~P*zOp#fa!^#fa~P$SOo$lO~Od$RP~P%_Od#zP~P&lO`!PXd}X!R}X!T!PX~O`$sO!T$tO~Od$uO!R#iO~Ok#jXp#jX!^#jX~P'tO!^#jOk$Tap$Ta~O!R#iOk!Uap!Ua!^!Uad!Ua`!Ua~OS!]Oe!YO!V![O!Y!`O#q$yO~Od$QP~P9dOv#{OQ#|X]#|X`#|Xd#|Xe#|Xi#|Xj#|Xk#|Xm#|Xp#|Xr#|Xt#|Xz#|X!`#|X#o#|X#p#|X#}#|Xl#|Xo#|X~O]#rO`#rOd%OOi#rOj#rOk#rO~P&lO]#rO`#rOi#rOj#rOk#rOl%PO~P&lO]#rO`#rOi#rOj#rOk#rOo%QO~P&lOe%SOS!tXk!tX!V!tX!Y!tX#q!tX~Ok%TO~Od%YOt%ZO!a%ZO~Ok%[O~Oo%cO#o%^O#}%]O~Od%dO~P$SOv#{O!^%hO!q%jOk!oi#m!oio!oi~P&lOk#ha#m#hao#ha~P!dOk!{O#m$Sio$Si~O!^%mOd$RX~P$SOd%oO~Ov#{OQ#`Xd#`Xe#`Xm#`Xp#`Xr#`Xt#`Xz#`X!^#`X!`#`X#o#`X#p#`X#}#`X~O!^%qOd#zX~P&lOd%sO~Ol%tOv#{O~OR#gOr#gOt#gO#q%vO#}!fO~O!R#iOk#jap#ja!^#ja~O`!PXd}X!R}X!^}X~O!R#iO!^%xOd$QX~O`%zO~Od%{O~O#o%|O~Ok&OO~O`&PO!R#iO~Od&ROk&QO~Od&UO~OP#zOpsX!^sXdsX~O#}%]Op#TX!^#TX~OpzO!^&WO~Oo&[O#o%^O#}%]O~Ov#{OQ#gXe#gXk#gXm#gXp#gXr#gXt#gXz#gX!^#gX!`#gX!q#gX#m#gX#o#gX#p#gX#}#gXo#gX~O!^%hO!q&`Ok!oq#m!oqo!oq~P&lOl&aOv#{O~Od#eX!^#eX~P%_O!^%mOd$Ra~Od#dX!^#dX~P&lO!^%qOd#za~Od&fO~P&lOd&gO!T&hO~Od#cX!^#cX~P9dO!^%xOd$Qa~O]&mOd&oO~OS#bae#ba!V#ba!Y#ba#q#ba~Od&qO~PG]Od&qOk&rO~Ov#{OQ#gae#gak#gam#gap#gar#gat#gaz#ga!^#ga!`#ga!q#ga#m#ga#o#ga#p#ga#}#gao#ga~Od#ea!^#ea~P$SOd#da!^#da~P&lOR#gOr#gOt#gO#q%vO#}%]O~O!R#iOd#ca!^#ca~O`&xO~O!^%xOd$Qi~P&lO]&mOd&|O~Ov#{Od|ik|i~Od&}O~PG]Ok'OO~Od'PO~O!^%xOd$Qq~Od#cq!^#cq~P&lO#s!a#t#}]#}v!m~",goto:"2h$UPPPPP$VP$YP$c$uP$cP%X$cPP%_PPP%e%o%oPPPPP%oPP%oP&]P%oP%o'W%oP't'w'}'}(^'}P'}P'}P'}'}P(m'}(yP(|PP)p)v$c)|$c*SP$cP$c$cP*Y*{+YP$YP+aP+dP$YP$YP$YP+j$YP+m+p+s+z$YP$YPP$YP,P,V,f,|-[-b-l-r-x.O.U.`.f.l.rPPPPPPPPPPP.x/R/w/z0|P1U1u2O2R2U2[RnQ_^OP`kz!{$dq[OPYZ`kuvwxz!v!{#`$d%mqSOPYZ`kuvwxz!v!{#`$d%mQpTR#RqQ!OVR#SrQ#S!QS$Q!i!jR$i#U!V!mac!c!d!e!z#a#c#t#v#x#{$a$k$p$s%h%i%q%u%z&P&d&l&x'Q!U!mac!c!d!e!z#a#c#t#v#x#{$a$k$p$s%h%i%q%u%z&P&d&l&x'QU#g!Y$t&hU%`$Y%b&WR&V%_!V!iac!c!d!e!z#a#c#t#v#x#{$a$k$p$s%h%i%q%u%z&P&d&l&x'QR$S!kQ%W$RR&S%Xk!^]bf!Y![!g#i#j#m$P$R%X%xQ#e!YQ${#mQ%w$tQ&j%xR&w&hQ!ygQ#p!`Q$^!xR%f$`R#n!]!U!mac!c!d!e!z#a#c#t#v#x#{$a$k$p$s%h%i%q%u%z&P&d&l&x'QQ!qdR$X!rQ!PVR#TrQ#S!PR$i#TQ!SWR#VsQ!UXR#WtQ{UQ!wgQ#^yQ#o!_Q$U!nQ$[!uQ$_!yQ%e$^Q&Y%aQ&]%fR&v&XSjPzQ!}kQ$c!{R%k$dZiPkz!{$dR$P!gQ%}%SR&z&mR!rdR!teR$Z!tS%a$Y%bR&t&WV%_$Y%b&WQ#PmR$g#PQ`OSkPzU!a`k$dR$d!{Q$p#aY%p$p%u&d&l'QQ%u$sQ&d%qQ&l%zR'Q&xQ#t!cQ#v!dQ#x!eV$}#t#v#xQ%X$RR&T%XQ%y$zS&k%y&yR&y&lQ%r$pR&e%rQ%n$mR&c%nQyUR#]yQ%i$aR&_%iQ!|jS$e!|$fR$f!}Q&n%}R&{&nQ#k!ZR$x#kQ%b$YR&Z%bQ&X%aR&u&X__OP`kz!{$d^UOP`kz!{$dQ!VYQ!WZQ#XuQ#YvQ#ZwQ#[xQ$]!vQ$m#`R&b%mR$q#aQ!gaQ!oc[#q!c!d!e#t#v#xQ$a!zd$o#a$p$s%q%u%z&d&l&x'QQ$r#cQ%R#{S%g$a%iQ%l$kQ&^%hR&p&P]#s!c!d!e#t#v#xW!Z]b!g$PQ!ufQ#f!YQ#l![Q$v#iQ$w#jQ$z#mS%V$R%XR&i%xQ#h!YQ%w$tR&w&hR$|#mR$n#`QlPR#_zQ!_]Q!nbQ$O!gR%U$P",nodeNames:"⚠ Unit VariableName VariableName QueryCallee Comment StyleSheet RuleSet UniversalSelector TagSelector TagName NestingSelector ClassSelector . ClassName PseudoClassSelector : :: PseudoClassName PseudoClassName ) ( ArgList ValueName ParenthesizedValue AtKeyword # ; ] [ BracketedValue } { BracedValue ColorLiteral NumberLiteral StringLiteral BinaryExpression BinOp CallExpression Callee IfExpression if ArgList IfBranch KeywordQuery FeatureQuery FeatureName BinaryQuery LogicOp ComparisonQuery CompareOp UnaryQuery UnaryQueryOp ParenthesizedQuery SelectorQuery selector ParenthesizedSelector CallQuery ArgList , CallLiteral CallTag ParenthesizedContent PseudoClassName ArgList IdSelector IdName AttributeSelector AttributeName MatchOp ChildSelector ChildOp DescendantSelector SiblingSelector SiblingOp Block Declaration PropertyName Important ImportStatement import Layer layer LayerName layer MediaStatement media CharsetStatement charset NamespaceStatement namespace NamespaceName KeyframesStatement keyframes KeyframeName KeyframeList KeyframeSelector KeyframeRangeName SupportsStatement supports ScopeStatement scope to AtRule Styles",maxTerm:143,nodeProps:[["isolate",-2,5,36,""],["openedBy",20,"(",28,"[",31,"{"],["closedBy",21,")",29,"]",32,"}"]],propSources:[P9],skippedNodes:[0,5,106],repeatNodeCount:15,tokenData:"JQ~R!YOX$qX^%i^p$qpq%iqr({rs-ust/itu6Wuv$qvw7Qwx7cxy9Qyz9cz{9h{|:R|}>t}!O?V!O!P?t!P!Q@]!Q![AU![!]BP!]!^B{!^!_C^!_!`DY!`!aDm!a!b$q!b!cEn!c!}$q!}#OG{#O#P$q#P#QH^#Q#R6W#R#o$q#o#pHo#p#q6W#q#rIQ#r#sIc#s#y$q#y#z%i#z$f$q$f$g%i$g#BY$q#BY#BZ%i#BZ$IS$q$IS$I_%i$I_$I|$q$I|$JO%i$JO$JT$q$JT$JU%i$JU$KV$q$KV$KW%i$KW&FU$q&FU&FV%i&FV;'S$q;'S;=`Iz<%lO$q`$tSOy%Qz;'S%Q;'S;=`%c<%lO%Q`%VS!a`Oy%Qz;'S%Q;'S;=`%c<%lO%Q`%fP;=`<%l%Q~%nh#s~OX%QX^'Y^p%Qpq'Yqy%Qz#y%Q#y#z'Y#z$f%Q$f$g'Y$g#BY%Q#BY#BZ'Y#BZ$IS%Q$IS$I_'Y$I_$I|%Q$I|$JO'Y$JO$JT%Q$JT$JU'Y$JU$KV%Q$KV$KW'Y$KW&FU%Q&FU&FV'Y&FV;'S%Q;'S;=`%c<%lO%Q~'ah#s~!a`OX%QX^'Y^p%Qpq'Yqy%Qz#y%Q#y#z'Y#z$f%Q$f$g'Y$g#BY%Q#BY#BZ'Y#BZ$IS%Q$IS$I_'Y$I_$I|%Q$I|$JO'Y$JO$JT%Q$JT$JU'Y$JU$KV%Q$KV$KW'Y$KW&FU%Q&FU&FV'Y&FV;'S%Q;'S;=`%c<%lO%Qj)OUOy%Qz#]%Q#]#^)b#^;'S%Q;'S;=`%c<%lO%Qj)gU!a`Oy%Qz#a%Q#a#b)y#b;'S%Q;'S;=`%c<%lO%Qj*OU!a`Oy%Qz#d%Q#d#e*b#e;'S%Q;'S;=`%c<%lO%Qj*gU!a`Oy%Qz#c%Q#c#d*y#d;'S%Q;'S;=`%c<%lO%Qj+OU!a`Oy%Qz#f%Q#f#g+b#g;'S%Q;'S;=`%c<%lO%Qj+gU!a`Oy%Qz#h%Q#h#i+y#i;'S%Q;'S;=`%c<%lO%Qj,OU!a`Oy%Qz#T%Q#T#U,b#U;'S%Q;'S;=`%c<%lO%Qj,gU!a`Oy%Qz#b%Q#b#c,y#c;'S%Q;'S;=`%c<%lO%Qj-OU!a`Oy%Qz#h%Q#h#i-b#i;'S%Q;'S;=`%c<%lO%Qj-iS!qY!a`Oy%Qz;'S%Q;'S;=`%c<%lO%Q~-xWOY-uZr-urs.bs#O-u#O#P.g#P;'S-u;'S;=`/c<%lO-u~.gOt~~.jRO;'S-u;'S;=`.s;=`O-u~.vXOY-uZr-urs.bs#O-u#O#P.g#P;'S-u;'S;=`/c;=`<%l-u<%lO-u~/fP;=`<%l-uj/nYjYOy%Qz!Q%Q!Q![0^![!c%Q!c!i0^!i#T%Q#T#Z0^#Z;'S%Q;'S;=`%c<%lO%Qj0cY!a`Oy%Qz!Q%Q!Q![1R![!c%Q!c!i1R!i#T%Q#T#Z1R#Z;'S%Q;'S;=`%c<%lO%Qj1WY!a`Oy%Qz!Q%Q!Q![1v![!c%Q!c!i1v!i#T%Q#T#Z1v#Z;'S%Q;'S;=`%c<%lO%Qj1}YrY!a`Oy%Qz!Q%Q!Q![2m![!c%Q!c!i2m!i#T%Q#T#Z2m#Z;'S%Q;'S;=`%c<%lO%Qj2tYrY!a`Oy%Qz!Q%Q!Q![3d![!c%Q!c!i3d!i#T%Q#T#Z3d#Z;'S%Q;'S;=`%c<%lO%Qj3iY!a`Oy%Qz!Q%Q!Q![4X![!c%Q!c!i4X!i#T%Q#T#Z4X#Z;'S%Q;'S;=`%c<%lO%Qj4`YrY!a`Oy%Qz!Q%Q!Q![5O![!c%Q!c!i5O!i#T%Q#T#Z5O#Z;'S%Q;'S;=`%c<%lO%Qj5TY!a`Oy%Qz!Q%Q!Q![5s![!c%Q!c!i5s!i#T%Q#T#Z5s#Z;'S%Q;'S;=`%c<%lO%Qj5zSrY!a`Oy%Qz;'S%Q;'S;=`%c<%lO%Qd6ZUOy%Qz!_%Q!_!`6m!`;'S%Q;'S;=`%c<%lO%Qd6tS!hS!a`Oy%Qz;'S%Q;'S;=`%c<%lO%Qb7VSZQOy%Qz;'S%Q;'S;=`%c<%lO%Q~7fWOY7cZw7cwx.bx#O7c#O#P8O#P;'S7c;'S;=`8z<%lO7c~8RRO;'S7c;'S;=`8[;=`O7c~8_XOY7cZw7cwx.bx#O7c#O#P8O#P;'S7c;'S;=`8z;=`<%l7c<%lO7c~8}P;=`<%l7cj9VSeYOy%Qz;'S%Q;'S;=`%c<%lO%Q~9hOd~n9oUWQvWOy%Qz!_%Q!_!`6m!`;'S%Q;'S;=`%c<%lO%Qj:YWvW!mQOy%Qz!O%Q!O!P:r!P!Q%Q!Q![=w![;'S%Q;'S;=`%c<%lO%Qj:wU!a`Oy%Qz!Q%Q!Q![;Z![;'S%Q;'S;=`%c<%lO%Qj;bY!a`#}YOy%Qz!Q%Q!Q![;Z![!g%Q!g!h<Q!h#X%Q#X#Y<Q#Y;'S%Q;'S;=`%c<%lO%Qj<VY!a`Oy%Qz{%Q{|<u|}%Q}!O<u!O!Q%Q!Q![=^![;'S%Q;'S;=`%c<%lO%Qj<zU!a`Oy%Qz!Q%Q!Q![=^![;'S%Q;'S;=`%c<%lO%Qj=eU!a`#}YOy%Qz!Q%Q!Q![=^![;'S%Q;'S;=`%c<%lO%Qj>O[!a`#}YOy%Qz!O%Q!O!P;Z!P!Q%Q!Q![=w![!g%Q!g!h<Q!h#X%Q#X#Y<Q#Y;'S%Q;'S;=`%c<%lO%Qj>yS!^YOy%Qz;'S%Q;'S;=`%c<%lO%Qj?[WvWOy%Qz!O%Q!O!P:r!P!Q%Q!Q![=w![;'S%Q;'S;=`%c<%lO%Qj?yU]YOy%Qz!Q%Q!Q![;Z![;'S%Q;'S;=`%c<%lO%Q~@bTvWOy%Qz{@q{;'S%Q;'S;=`%c<%lO%Q~@xS!a`#t~Oy%Qz;'S%Q;'S;=`%c<%lO%QjAZ[#}YOy%Qz!O%Q!O!P;Z!P!Q%Q!Q![=w![!g%Q!g!h<Q!h#X%Q#X#Y<Q#Y;'S%Q;'S;=`%c<%lO%QjBUU`YOy%Qz![%Q![!]Bh!];'S%Q;'S;=`%c<%lO%QbBoSaQ!a`Oy%Qz;'S%Q;'S;=`%c<%lO%QjCQSkYOy%Qz;'S%Q;'S;=`%c<%lO%QhCcU!TWOy%Qz!_%Q!_!`Cu!`;'S%Q;'S;=`%c<%lO%QhC|S!TW!a`Oy%Qz;'S%Q;'S;=`%c<%lO%QlDaS!TW!hSOy%Qz;'S%Q;'S;=`%c<%lO%QjDtV!jQ!TWOy%Qz!_%Q!_!`Cu!`!aEZ!a;'S%Q;'S;=`%c<%lO%QbEbS!jQ!a`Oy%Qz;'S%Q;'S;=`%c<%lO%QjEqYOy%Qz}%Q}!OFa!O!c%Q!c!}GO!}#T%Q#T#oGO#o;'S%Q;'S;=`%c<%lO%QjFfW!a`Oy%Qz!c%Q!c!}GO!}#T%Q#T#oGO#o;'S%Q;'S;=`%c<%lO%QjGV[iY!a`Oy%Qz}%Q}!OGO!O!Q%Q!Q![GO![!c%Q!c!}GO!}#T%Q#T#oGO#o;'S%Q;'S;=`%c<%lO%QjHQSmYOy%Qz;'S%Q;'S;=`%c<%lO%QnHcSl^Oy%Qz;'S%Q;'S;=`%c<%lO%QjHtSpYOy%Qz;'S%Q;'S;=`%c<%lO%QjIVSoYOy%Qz;'S%Q;'S;=`%c<%lO%QfIhU!mQOy%Qz!_%Q!_!`6m!`;'S%Q;'S;=`%c<%lO%Q`I}P;=`<%l$q",tokenizers:[E9,A9,C9,k9,1,2,3,4,new bd("m~RRYZ[z{a~~g~aO#v~~dP!P!Qg~lO#w~~",28,129)],topRules:{StyleSheet:[0,6],Styles:[1,105]},specialized:[{term:124,get:r=>D9[r]||-1},{term:125,get:r=>M9[r]||-1},{term:4,get:r=>I9[r]||-1},{term:25,get:r=>R9[r]||-1},{term:123,get:r=>L9[r]||-1}],tokenPrec:1963});let zp=null;function Zp(){if(!zp&&typeof document=="object"&&document.body){let{style:r}=document.body,e=[],t=new Set;for(let i in r)i!="cssText"&&i!="cssFloat"&&typeof r[i]=="string"&&(/[A-Z]/.test(i)&&(i=i.replace(/[A-Z]/g,s=>"-"+s.toLowerCase())),t.has(i)||(e.push(i),t.add(i)));zp=e.sort().map(i=>({type:"property",label:i,apply:i+": "}))}return zp||[]}const j1=["active","after","any-link","autofill","backdrop","before","checked","cue","default","defined","disabled","empty","enabled","file-selector-button","first","first-child","first-letter","first-line","first-of-type","focus","focus-visible","focus-within","fullscreen","has","host","host-context","hover","in-range","indeterminate","invalid","is","lang","last-child","last-of-type","left","link","marker","modal","not","nth-child","nth-last-child","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","part","placeholder","placeholder-shown","read-only","read-write","required","right","root","scope","selection","slotted","target","target-text","valid","visited","where"].map(r=>({type:"class",label:r})),z1=["above","absolute","activeborder","additive","activecaption","after-white-space","ahead","alias","all","all-scroll","alphabetic","alternate","always","antialiased","appworkspace","asterisks","attr","auto","auto-flow","avoid","avoid-column","avoid-page","avoid-region","axis-pan","background","backwards","baseline","below","bidi-override","blink","block","block-axis","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","bullets","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","calc","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-decimal","clear","clip","close-quote","col-resize","collapse","color","color-burn","color-dodge","column","column-reverse","compact","condensed","contain","content","contents","content-box","context-menu","continuous","copy","counter","counters","cover","crop","cross","crosshair","currentcolor","cursive","cyclic","darken","dashed","decimal","decimal-leading-zero","default","default-button","dense","destination-atop","destination-in","destination-out","destination-over","difference","disc","discard","disclosure-closed","disclosure-open","document","dot-dash","dot-dot-dash","dotted","double","down","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic-abegede-gez","ethiopic-halehame-aa-er","ethiopic-halehame-gez","ew-resize","exclusion","expanded","extends","extra-condensed","extra-expanded","fantasy","fast","fill","fill-box","fixed","flat","flex","flex-end","flex-start","footnotes","forwards","from","geometricPrecision","graytext","grid","groove","hand","hard-light","help","hidden","hide","higher","highlight","highlighttext","horizontal","hsl","hsla","hue","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-flex","inline-grid","inline-table","inset","inside","intrinsic","invert","italic","justify","keep-all","landscape","large","larger","left","level","lighter","lighten","line-through","linear","linear-gradient","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-hexadecimal","lower-latin","lower-norwegian","lowercase","ltr","luminosity","manipulation","match","matrix","matrix3d","medium","menu","menutext","message-box","middle","min-intrinsic","mix","monospace","move","multiple","multiple_mask_images","multiply","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","numbers","numeric","nw-resize","nwse-resize","oblique","opacity","open-quote","optimizeLegibility","optimizeSpeed","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","perspective","pinch-zoom","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radial-gradient","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeating-linear-gradient","repeating-radial-gradient","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","rotate","rotate3d","rotateX","rotateY","rotateZ","round","row","row-resize","row-reverse","rtl","run-in","running","s-resize","sans-serif","saturation","scale","scale3d","scaleX","scaleY","scaleZ","screen","scroll","scrollbar","scroll-position","se-resize","self-start","self-end","semi-condensed","semi-expanded","separate","serif","show","single","skew","skewX","skewY","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","soft-light","solid","source-atop","source-in","source-out","source-over","space","space-around","space-between","space-evenly","spell-out","square","start","static","status-bar","stretch","stroke","stroke-box","sub","subpixel-antialiased","svg_masks","super","sw-resize","symbolic","symbols","system-ui","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","text","text-bottom","text-top","textarea","textfield","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","to","top","transform","translate","translate3d","translateX","translateY","translateZ","transparent","ultra-condensed","ultra-expanded","underline","unidirectional-pan","unset","up","upper-latin","uppercase","url","var","vertical","vertical-text","view-box","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","words","wrap","wrap-reverse","x-large","x-small","xor","xx-large","xx-small"].map(r=>({type:"keyword",label:r})).concat(["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"].map(r=>({type:"constant",label:r}))),$9=["a","abbr","address","article","aside","b","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","dd","del","details","dfn","dialog","div","dl","dt","em","figcaption","figure","footer","form","header","hgroup","h1","h2","h3","h4","h5","h6","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","main","meter","nav","ol","output","p","pre","ruby","section","select","small","source","span","strong","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","tr","u","ul"].map(r=>({type:"type",label:r})),B9=["@charset","@color-profile","@container","@counter-style","@font-face","@font-feature-values","@font-palette-values","@import","@keyframes","@layer","@media","@namespace","@page","@position-try","@property","@scope","@starting-style","@supports","@view-transition"].map(r=>({type:"keyword",label:r})),Os=/^(\w[\w-]*|-\w[\w-]*|)$/,N9=/^-(-[\w-]*)?$/;function F9(r,e){var t;if((r.name=="("||r.type.isError)&&(r=r.parent||r),r.name!="ArgList")return!1;let i=(t=r.parent)===null||t===void 0?void 0:t.firstChild;return(i==null?void 0:i.name)!="Callee"?!1:e.sliceString(i.from,i.to)=="var"}const Z1=new RC,U9=["Declaration"];function q9(r){for(let e=r;;){if(e.type.isTop)return e;if(!(e=e.parent))return r}}function UE(r,e,t){if(e.to-e.from>4096){let i=Z1.get(e);if(i)return i;let s=[],n=new Set,a=e.cursor(pt.IncludeAnonymous);if(a.firstChild())do for(let o of UE(r,a.node,t))n.has(o.label)||(n.add(o.label),s.push(o));while(a.nextSibling());return Z1.set(e,s),s}else{let i=[],s=new Set;return e.cursor().iterate(n=>{var a;if(t(n)&&n.matchContext(U9)&&((a=n.node.nextSibling)===null||a===void 0?void 0:a.name)==":"){let o=r.sliceString(n.from,n.to);s.has(o)||(s.add(o),i.push({label:o,type:"variable"}))}}),i}}const V9=r=>e=>{let{state:t,pos:i}=e,s=ht(t).resolveInner(i,-1),n=s.type.isError&&s.from==s.to-1&&t.doc.sliceString(s.from,s.to)=="-";if(s.name=="PropertyName"||(n||s.name=="TagName")&&/^(Block|Styles)$/.test(s.resolve(s.to).name))return{from:s.from,options:Zp(),validFor:Os};if(s.name=="ValueName")return{from:s.from,options:z1,validFor:Os};if(s.name=="PseudoClassName")return{from:s.from,options:j1,validFor:Os};if(r(s)||(e.explicit||n)&&F9(s,t.doc))return{from:r(s)||n?s.from:i,options:UE(t.doc,q9(s),r),validFor:N9};if(s.name=="TagName"){for(let{parent:l}=s;l;l=l.parent)if(l.name=="Block")return{from:s.from,options:Zp(),validFor:Os};return{from:s.from,options:$9,validFor:Os}}if(s.name=="AtKeyword")return{from:s.from,options:B9,validFor:Os};if(!e.explicit)return null;let a=s.resolve(i),o=a.childBefore(i);return o&&o.name==":"&&a.name=="PseudoClassSelector"?{from:i,options:j1,validFor:Os}:o&&o.name==":"&&a.name=="Declaration"||a.name=="ArgList"?{from:i,options:z1,validFor:Os}:a.name=="Block"||a.name=="Styles"?{from:i,options:Zp(),validFor:Os}:null},X9=V9(r=>r.name=="VariableName"),Sd=uo.define({name:"css",parser:Q9.configure({props:[Xu.add({Declaration:gh()}),Ao.add({"Block KeyframeList":qC})]}),languageData:{commentTokens:{block:{open:"/*",close:"*/"}},indentOnInput:/^\s*\}$/,wordChars:"-"}});function j9(){return new iu(Sd,Sd.data.of({autocomplete:X9}))}const z9=316,Z9=317,W1=1,W9=2,H9=3,Y9=4,G9=318,K9=320,J9=321,eV=5,tV=6,iV=0,Ng=[9,10,11,12,13,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288],qE=125,rV=59,Fg=47,sV=42,nV=43,aV=45,oV=60,lV=44,uV=63,cV=46,hV=91,dV=new CE({start:!1,shift(r,e){return e==eV||e==tV||e==K9?r:e==J9},strict:!1}),fV=new Hi((r,e)=>{let{next:t}=r;(t==qE||t==-1||e.context)&&r.acceptToken(G9)},{contextual:!0,fallback:!0}),pV=new Hi((r,e)=>{let{next:t}=r,i;Ng.indexOf(t)>-1||t==Fg&&((i=r.peek(1))==Fg||i==sV)||t!=qE&&t!=rV&&t!=-1&&!e.context&&r.acceptToken(z9)},{contextual:!0}),mV=new Hi((r,e)=>{r.next==hV&&!e.context&&r.acceptToken(Z9)},{contextual:!0}),gV=new Hi((r,e)=>{let{next:t}=r;if(t==nV||t==aV){if(r.advance(),t==r.next){r.advance();let i=!e.context&&e.canShift(W1);r.acceptToken(i?W1:W9)}}else t==uV&&r.peek(1)==cV&&(r.advance(),r.advance(),(r.next<48||r.next>57)&&r.acceptToken(H9))},{contextual:!0});function Wp(r,e){return r>=65&&r<=90||r>=97&&r<=122||r==95||r>=192||!e&&r>=48&&r<=57}const OV=new Hi((r,e)=>{if(r.next!=oV||!e.dialectEnabled(iV)||(r.advance(),r.next==Fg))return;let t=0;for(;Ng.indexOf(r.next)>-1;)r.advance(),t++;if(Wp(r.next,!0)){for(r.advance(),t++;Wp(r.next,!1);)r.advance(),t++;for(;Ng.indexOf(r.next)>-1;)r.advance(),t++;if(r.next==lV)return;for(let i=0;;i++){if(i==7){if(!Wp(r.next,!0))return;break}if(r.next!="extends".charCodeAt(i))break;r.advance(),t++}}r.acceptToken(Y9,-t)}),yV=Eo({"get set async static":U.modifier,"for while do if else switch try catch finally return throw break continue default case defer":U.controlKeyword,"in of await yield void typeof delete instanceof as satisfies":U.operatorKeyword,"let var const using function class extends":U.definitionKeyword,"import export from":U.moduleKeyword,"with debugger new":U.keyword,TemplateString:U.special(U.string),super:U.atom,BooleanLiteral:U.bool,this:U.self,null:U.null,Star:U.modifier,VariableName:U.variableName,"CallExpression/VariableName TaggedTemplateExpression/VariableName":U.function(U.variableName),VariableDefinition:U.definition(U.variableName),Label:U.labelName,PropertyName:U.propertyName,PrivatePropertyName:U.special(U.propertyName),"CallExpression/MemberExpression/PropertyName":U.function(U.propertyName),"FunctionDeclaration/VariableDefinition":U.function(U.definition(U.variableName)),"ClassDeclaration/VariableDefinition":U.definition(U.className),"NewExpression/VariableName":U.className,PropertyDefinition:U.definition(U.propertyName),PrivatePropertyDefinition:U.definition(U.special(U.propertyName)),UpdateOp:U.updateOperator,"LineComment Hashbang":U.lineComment,BlockComment:U.blockComment,Number:U.number,String:U.string,Escape:U.escape,ArithOp:U.arithmeticOperator,LogicOp:U.logicOperator,BitOp:U.bitwiseOperator,CompareOp:U.compareOperator,RegExp:U.regexp,Equals:U.definitionOperator,Arrow:U.function(U.punctuation),": Spread":U.punctuation,"( )":U.paren,"[ ]":U.squareBracket,"{ }":U.brace,"InterpolationStart InterpolationEnd":U.special(U.brace),".":U.derefOperator,", ;":U.separator,"@":U.meta,TypeName:U.typeName,TypeDefinition:U.definition(U.typeName),"type enum interface implements namespace module declare":U.definitionKeyword,"abstract global Privacy readonly override":U.modifier,"is keyof unique infer asserts":U.operatorKeyword,JSXAttributeValue:U.attributeValue,JSXText:U.content,"JSXStartTag JSXStartCloseTag JSXSelfCloseEndTag JSXEndTag":U.angleBracket,"JSXIdentifier JSXNameSpacedName":U.tagName,"JSXAttribute/JSXIdentifier JSXAttribute/JSXNameSpacedName":U.attributeName,"JSXBuiltin/JSXIdentifier":U.standard(U.tagName)}),bV={__proto__:null,export:20,as:25,from:33,default:36,async:41,function:42,in:52,out:55,const:56,extends:60,this:64,true:72,false:72,null:84,void:88,typeof:92,super:108,new:142,delete:154,yield:163,await:167,class:172,public:235,private:235,protected:235,readonly:237,instanceof:256,satisfies:259,import:292,keyof:349,unique:353,infer:359,asserts:395,is:397,abstract:417,implements:419,type:421,let:424,var:426,using:429,interface:435,enum:439,namespace:445,module:447,declare:451,global:455,defer:471,for:476,of:485,while:488,with:492,do:496,if:500,else:502,switch:506,case:512,try:518,catch:522,finally:526,return:530,throw:534,break:538,continue:542,debugger:546},vV={__proto__:null,async:129,get:131,set:133,declare:195,public:197,private:197,protected:197,static:199,abstract:201,override:203,readonly:209,accessor:211,new:401},SV={__proto__:null,"<":193},TV=mo.deserialize({version:14,states:"$F|Q%TQlOOO%[QlOOO'_QpOOP(lO`OOO*zQ!0MxO'#CiO+RO#tO'#CjO+aO&jO'#CjO+oO#@ItO'#DaO.QQlO'#DgO.bQlO'#DrO%[QlO'#DzO0fQlO'#ESOOQ!0Lf'#E['#E[O1PQ`O'#EXOOQO'#Ep'#EpOOQO'#Il'#IlO1XQ`O'#GsO1dQ`O'#EoO1iQ`O'#EoO3hQ!0MxO'#JrO6[Q!0MxO'#JsO6uQ`O'#F]O6zQ,UO'#FtOOQ!0Lf'#Ff'#FfO7VO7dO'#FfO9XQMhO'#F|O9`Q`O'#F{OOQ!0Lf'#Js'#JsOOQ!0Lb'#Jr'#JrO9eQ`O'#GwOOQ['#K_'#K_O9pQ`O'#IYO9uQ!0LrO'#IZOOQ['#J`'#J`OOQ['#I_'#I_Q`QlOOQ`QlOOO9}Q!L^O'#DvO:UQlO'#EOO:]QlO'#EQO9kQ`O'#GsO:dQMhO'#CoO:rQ`O'#EnO:}Q`O'#EyO;hQMhO'#FeO;xQ`O'#GsOOQO'#K`'#K`O;}Q`O'#K`O<]Q`O'#G{O<]Q`O'#G|O<]Q`O'#HOO9kQ`O'#HRO=SQ`O'#HUO>kQ`O'#CeO>{Q`O'#HcO?TQ`O'#HiO?TQ`O'#HkO`QlO'#HmO?TQ`O'#HoO?TQ`O'#HrO?YQ`O'#HxO?_Q!0LsO'#IOO%[QlO'#IQO?jQ!0LsO'#ISO?uQ!0LsO'#IUO9uQ!0LrO'#IWO@QQ!0MxO'#CiOASQpO'#DlQOQ`OOO%[QlO'#EQOAjQ`O'#ETO:dQMhO'#EnOAuQ`O'#EnOBQQ!bO'#FeOOQ['#Cg'#CgOOQ!0Lb'#Dq'#DqOOQ!0Lb'#Jv'#JvO%[QlO'#JvOOQO'#Jy'#JyOOQO'#Ih'#IhOCQQpO'#EgOOQ!0Lb'#Ef'#EfOOQ!0Lb'#J}'#J}OC|Q!0MSO'#EgODWQpO'#EWOOQO'#Jx'#JxODlQpO'#JyOEyQpO'#EWODWQpO'#EgPFWO&2DjO'#CbPOOO)CD})CD}OOOO'#I`'#I`OFcO#tO,59UOOQ!0Lh,59U,59UOOOO'#Ia'#IaOFqO&jO,59UOGPQ!L^O'#DcOOOO'#Ic'#IcOGWO#@ItO,59{OOQ!0Lf,59{,59{OGfQlO'#IdOGyQ`O'#JtOIxQ!fO'#JtO+}QlO'#JtOJPQ`O,5:ROJgQ`O'#EpOJtQ`O'#KTOKPQ`O'#KSOKPQ`O'#KSOKXQ`O,5;^OK^Q`O'#KROOQ!0Ln,5:^,5:^OKeQlO,5:^OMcQ!0MxO,5:fONSQ`O,5:nONmQ!0LrO'#KQONtQ`O'#KPO9eQ`O'#KPO! YQ`O'#KPO! bQ`O,5;]O! gQ`O'#KPO!#lQ!fO'#JsOOQ!0Lh'#Ci'#CiO%[QlO'#ESO!$[Q!fO,5:sOOQS'#Jz'#JzOOQO-E<j-E<jO9kQ`O,5=_O!$rQ`O,5=_O!$wQlO,5;ZO!&zQMhO'#EkO!(eQ`O,5;ZO!(jQlO'#DyO!(tQpO,5;dO!(|QpO,5;dO%[QlO,5;dOOQ['#FT'#FTOOQ['#FV'#FVO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eOOQ['#FZ'#FZO!)[QlO,5;tOOQ!0Lf,5;y,5;yOOQ!0Lf,5;z,5;zOOQ!0Lf,5;|,5;|O%[QlO'#IpO!+_Q!0LrO,5<iO%[QlO,5;eO!&zQMhO,5;eO!+|QMhO,5;eO!-nQMhO'#E^O%[QlO,5;wOOQ!0Lf,5;{,5;{O!-uQ,UO'#FjO!.rQ,UO'#KXO!.^Q,UO'#KXO!.yQ,UO'#KXOOQO'#KX'#KXO!/_Q,UO,5<SOOOW,5<`,5<`O!/pQlO'#FvOOOW'#Io'#IoO7VO7dO,5<QO!/wQ,UO'#FxOOQ!0Lf,5<Q,5<QO!0hQ$IUO'#CyOOQ!0Lh'#C}'#C}O!0{O#@ItO'#DRO!1iQMjO,5<eO!1pQ`O,5<hO!3YQ(CWO'#GXO!3jQ`O'#GYO!3oQ`O'#GYO!5_Q(CWO'#G^O!6dQpO'#GbOOQO'#Gn'#GnO!,TQMhO'#GmOOQO'#Gp'#GpO!,TQMhO'#GoO!7VQ$IUO'#JlOOQ!0Lh'#Jl'#JlO!7aQ`O'#JkO!7oQ`O'#JjO!7wQ`O'#CuOOQ!0Lh'#C{'#C{O!8YQ`O'#C}OOQ!0Lh'#DV'#DVOOQ!0Lh'#DX'#DXO!8_Q`O,5<eO1SQ`O'#DZO!,TQMhO'#GPO!,TQMhO'#GRO!8gQ`O'#GTO!8lQ`O'#GUO!3oQ`O'#G[O!,TQMhO'#GaO<]Q`O'#JkO!8qQ`O'#EqO!9`Q`O,5<gOOQ!0Lb'#Cr'#CrO!9hQ`O'#ErO!:bQpO'#EsOOQ!0Lb'#KR'#KRO!:iQ!0LrO'#KaO9uQ!0LrO,5=cO`QlO,5>tOOQ['#Jh'#JhOOQ[,5>u,5>uOOQ[-E<]-E<]O!<hQ!0MxO,5:bO!:]QpO,5:`O!?RQ!0MxO,5:jO%[QlO,5:jO!AiQ!0MxO,5:lOOQO,5@z,5@zO!BYQMhO,5=_O!BhQ!0LrO'#JiO9`Q`O'#JiO!ByQ!0LrO,59ZO!CUQpO,59ZO!C^QMhO,59ZO:dQMhO,59ZO!CiQ`O,5;ZO!CqQ`O'#HbO!DVQ`O'#KdO%[QlO,5;}O!:]QpO,5<PO!D_Q`O,5=zO!DdQ`O,5=zO!DiQ`O,5=zO!DwQ`O,5=zO9uQ!0LrO,5=zO<]Q`O,5=jOOQO'#Cy'#CyO!EOQpO,5=gO!EWQMhO,5=hO!EcQ`O,5=jO!EhQ!bO,5=mO!EpQ`O'#K`O?YQ`O'#HWO9kQ`O'#HYO!EuQ`O'#HYO:dQMhO'#H[O!EzQ`O'#H[OOQ[,5=p,5=pO!FPQ`O'#H]O!FbQ`O'#CoO!FgQ`O,59PO!FqQ`O,59PO!HvQlO,59POOQ[,59P,59PO!IWQ!0LrO,59PO%[QlO,59PO!KcQlO'#HeOOQ['#Hf'#HfOOQ['#Hg'#HgO`QlO,5=}O!KyQ`O,5=}O`QlO,5>TO`QlO,5>VO!LOQ`O,5>XO`QlO,5>ZO!LTQ`O,5>^O!LYQlO,5>dOOQ[,5>j,5>jO%[QlO,5>jO9uQ!0LrO,5>lOOQ[,5>n,5>nO#!dQ`O,5>nOOQ[,5>p,5>pO#!dQ`O,5>pOOQ[,5>r,5>rO##QQpO'#D_O%[QlO'#JvO##sQpO'#JvO##}QpO'#DmO#$`QpO'#DmO#&qQlO'#DmO#&xQ`O'#JuO#'QQ`O,5:WO#'VQ`O'#EtO#'eQ`O'#KUO#'mQ`O,5;_O#'rQpO'#DmO#(PQpO'#EVOOQ!0Lf,5:o,5:oO%[QlO,5:oO#(WQ`O,5:oO?YQ`O,5;YO!CUQpO,5;YO!C^QMhO,5;YO:dQMhO,5;YO#(`Q`O,5@bO#(eQ07dO,5:sOOQO-E<f-E<fO#)kQ!0MSO,5;RODWQpO,5:rO#)uQpO,5:rODWQpO,5;RO!ByQ!0LrO,5:rOOQ!0Lb'#Ej'#EjOOQO,5;R,5;RO%[QlO,5;RO#*SQ!0LrO,5;RO#*_Q!0LrO,5;RO!CUQpO,5:rOOQO,5;X,5;XO#*mQ!0LrO,5;RPOOO'#I^'#I^P#+RO&2DjO,58|POOO,58|,58|OOOO-E<^-E<^OOQ!0Lh1G.p1G.pOOOO-E<_-E<_OOOO,59},59}O#+^Q!bO,59}OOOO-E<a-E<aOOQ!0Lf1G/g1G/gO#+cQ!fO,5?OO+}QlO,5?OOOQO,5?U,5?UO#+mQlO'#IdOOQO-E<b-E<bO#+zQ`O,5@`O#,SQ!fO,5@`O#,ZQ`O,5@nOOQ!0Lf1G/m1G/mO%[QlO,5@oO#,cQ`O'#IjOOQO-E<h-E<hO#,ZQ`O,5@nOOQ!0Lb1G0x1G0xOOQ!0Ln1G/x1G/xOOQ!0Ln1G0Y1G0YO%[QlO,5@lO#,wQ!0LrO,5@lO#-YQ!0LrO,5@lO#-aQ`O,5@kO9eQ`O,5@kO#-iQ`O,5@kO#-wQ`O'#ImO#-aQ`O,5@kOOQ!0Lb1G0w1G0wO!(tQpO,5:uO!)PQpO,5:uOOQS,5:w,5:wO#.iQdO,5:wO#.qQMhO1G2yO9kQ`O1G2yOOQ!0Lf1G0u1G0uO#/PQ!0MxO1G0uO#0UQ!0MvO,5;VOOQ!0Lh'#GW'#GWO#0rQ!0MzO'#JlO!$wQlO1G0uO#2}Q!fO'#JwO%[QlO'#JwO#3XQ`O,5:eOOQ!0Lh'#D_'#D_OOQ!0Lf1G1O1G1OO%[QlO1G1OOOQ!0Lf1G1f1G1fO#3^Q`O1G1OO#5rQ!0MxO1G1PO#5yQ!0MxO1G1PO#8aQ!0MxO1G1PO#8hQ!0MxO1G1PO#;OQ!0MxO1G1PO#=fQ!0MxO1G1PO#=mQ!0MxO1G1PO#=tQ!0MxO1G1PO#@[Q!0MxO1G1PO#@cQ!0MxO1G1PO#BpQ?MtO'#CiO#DkQ?MtO1G1`O#DrQ?MtO'#JsO#EVQ!0MxO,5?[OOQ!0Lb-E<n-E<nO#GdQ!0MxO1G1PO#HaQ!0MzO1G1POOQ!0Lf1G1P1G1PO#IdQMjO'#J|O#InQ`O,5:xO#IsQ!0MxO1G1cO#JgQ,UO,5<WO#JoQ,UO,5<XO#JwQ,UO'#FoO#K`Q`O'#FnOOQO'#KY'#KYOOQO'#In'#InO#KeQ,UO1G1nOOQ!0Lf1G1n1G1nOOOW1G1y1G1yO#KvQ?MtO'#JrO#LQQ`O,5<bO!)[QlO,5<bOOOW-E<m-E<mOOQ!0Lf1G1l1G1lO#LVQpO'#KXOOQ!0Lf,5<d,5<dO#L_QpO,5<dO#LdQMhO'#DTOOOO'#Ib'#IbO#LkO#@ItO,59mOOQ!0Lh,59m,59mO%[QlO1G2PO!8lQ`O'#IrO#LvQ`O,5<zOOQ!0Lh,5<w,5<wO!,TQMhO'#IuO#MdQMjO,5=XO!,TQMhO'#IwO#NVQMjO,5=ZO!&zQMhO,5=]OOQO1G2S1G2SO#NaQ!dO'#CrO#NtQ(CWO'#ErO$ |QpO'#GbO$!dQ!dO,5<sO$!kQ`O'#K[O9eQ`O'#K[O$!yQ`O,5<uO$#aQ!dO'#C{O!,TQMhO,5<tO$#kQ`O'#GZO$$PQ`O,5<tO$$UQ!dO'#GWO$$cQ!dO'#K]O$$mQ`O'#K]O!&zQMhO'#K]O$$rQ`O,5<xO$$wQlO'#JvO$%RQpO'#GcO#$`QpO'#GcO$%dQ`O'#GgO!3oQ`O'#GkO$%iQ!0LrO'#ItO$%tQpO,5<|OOQ!0Lp,5<|,5<|O$%{QpO'#GcO$&YQpO'#GdO$&kQpO'#GdO$&pQMjO,5=XO$'QQMjO,5=ZOOQ!0Lh,5=^,5=^O!,TQMhO,5@VO!,TQMhO,5@VO$'bQ`O'#IyO$'vQ`O,5@UO$(OQ`O,59aOOQ!0Lh,59i,59iO$(TQ`O,5@VO$)TQ$IYO,59uOOQ!0Lh'#Jp'#JpO$)vQMjO,5<kO$*iQMjO,5<mO@zQ`O,5<oOOQ!0Lh,5<p,5<pO$*sQ`O,5<vO$*xQMjO,5<{O$+YQ`O'#KPO!$wQlO1G2RO$+_Q`O1G2RO9eQ`O'#KSO9eQ`O'#EtO%[QlO'#EtO9eQ`O'#I{O$+dQ!0LrO,5@{OOQ[1G2}1G2}OOQ[1G4`1G4`OOQ!0Lf1G/|1G/|OOQ!0Lf1G/z1G/zO$-fQ!0MxO1G0UOOQ[1G2y1G2yO!&zQMhO1G2yO%[QlO1G2yO#.tQ`O1G2yO$/jQMhO'#EkOOQ!0Lb,5@T,5@TO$/wQ!0LrO,5@TOOQ[1G.u1G.uO!ByQ!0LrO1G.uO!CUQpO1G.uO!C^QMhO1G.uO$0YQ`O1G0uO$0_Q`O'#CiO$0jQ`O'#KeO$0rQ`O,5=|O$0wQ`O'#KeO$0|Q`O'#KeO$1[Q`O'#JRO$1jQ`O,5AOO$1rQ!fO1G1iOOQ!0Lf1G1k1G1kO9kQ`O1G3fO@zQ`O1G3fO$1yQ`O1G3fO$2OQ`O1G3fO!DiQ`O1G3fO9uQ!0LrO1G3fOOQ[1G3f1G3fO!EcQ`O1G3UO!&zQMhO1G3RO$2TQ`O1G3ROOQ[1G3S1G3SO!&zQMhO1G3SO$2YQ`O1G3SO$2bQpO'#HQOOQ[1G3U1G3UO!6_QpO'#I}O!EhQ!bO1G3XOOQ[1G3X1G3XOOQ[,5=r,5=rO$2jQMhO,5=tO9kQ`O,5=tO$%dQ`O,5=vO9`Q`O,5=vO!CUQpO,5=vO!C^QMhO,5=vO:dQMhO,5=vO$2xQ`O'#KcO$3TQ`O,5=wOOQ[1G.k1G.kO$3YQ!0LrO1G.kO@zQ`O1G.kO$3eQ`O1G.kO9uQ!0LrO1G.kO$5mQ!fO,5AQO$5zQ`O,5AQO9eQ`O,5AQO$6VQlO,5>PO$6^Q`O,5>POOQ[1G3i1G3iO`QlO1G3iOOQ[1G3o1G3oOOQ[1G3q1G3qO?TQ`O1G3sO$6cQlO1G3uO$:gQlO'#HtOOQ[1G3x1G3xO$:tQ`O'#HzO?YQ`O'#H|OOQ[1G4O1G4OO$:|QlO1G4OO9uQ!0LrO1G4UOOQ[1G4W1G4WOOQ!0Lb'#G_'#G_O9uQ!0LrO1G4YO9uQ!0LrO1G4[O$?TQ`O,5@bO!)[QlO,5;`O9eQ`O,5;`O?YQ`O,5:XO!)[QlO,5:XO!CUQpO,5:XO$?YQ?MtO,5:XOOQO,5;`,5;`O$?dQpO'#IeO$?zQ`O,5@aOOQ!0Lf1G/r1G/rO$@SQpO'#IkO$@^Q`O,5@pOOQ!0Lb1G0y1G0yO#$`QpO,5:XOOQO'#Ig'#IgO$@fQpO,5:qOOQ!0Ln,5:q,5:qO#(ZQ`O1G0ZOOQ!0Lf1G0Z1G0ZO%[QlO1G0ZOOQ!0Lf1G0t1G0tO?YQ`O1G0tO!CUQpO1G0tO!C^QMhO1G0tOOQ!0Lb1G5|1G5|O!ByQ!0LrO1G0^OOQO1G0m1G0mO%[QlO1G0mO$@mQ!0LrO1G0mO$@xQ!0LrO1G0mO!CUQpO1G0^ODWQpO1G0^O$AWQ!0LrO1G0mOOQO1G0^1G0^O$AlQ!0MxO1G0mPOOO-E<[-E<[POOO1G.h1G.hOOOO1G/i1G/iO$AvQ!bO,5<iO$BOQ!fO1G4jOOQO1G4p1G4pO%[QlO,5?OO$BYQ`O1G5zO$BbQ`O1G6YO$BjQ!fO1G6ZO9eQ`O,5?UO$BtQ!0MxO1G6WO%[QlO1G6WO$CUQ!0LrO1G6WO$CgQ`O1G6VO$CgQ`O1G6VO9eQ`O1G6VO$CoQ`O,5?XO9eQ`O,5?XOOQO,5?X,5?XO$DTQ`O,5?XO$+YQ`O,5?XOOQO-E<k-E<kOOQS1G0a1G0aOOQS1G0c1G0cO#.lQ`O1G0cOOQ[7+(e7+(eO!&zQMhO7+(eO%[QlO7+(eO$DcQ`O7+(eO$DnQMhO7+(eO$D|Q!0MzO,5=XO$GXQ!0MzO,5=ZO$IdQ!0MzO,5=XO$KuQ!0MzO,5=ZO$NWQ!0MzO,59uO%!]Q!0MzO,5<kO%$hQ!0MzO,5<mO%&sQ!0MzO,5<{OOQ!0Lf7+&a7+&aO%)UQ!0MxO7+&aO%)xQlO'#IfO%*VQ`O,5@cO%*_Q!fO,5@cOOQ!0Lf1G0P1G0PO%*iQ`O7+&jOOQ!0Lf7+&j7+&jO%*nQ?MtO,5:fO%[QlO7+&zO%*xQ?MtO,5:bO%+VQ?MtO,5:jO%+aQ?MtO,5:lO%+kQMhO'#IiO%+uQ`O,5@hOOQ!0Lh1G0d1G0dOOQO1G1r1G1rOOQO1G1s1G1sO%+}Q!jO,5<ZO!)[QlO,5<YOOQO-E<l-E<lOOQ!0Lf7+'Y7+'YOOOW7+'e7+'eOOOW1G1|1G1|O%,YQ`O1G1|OOQ!0Lf1G2O1G2OOOOO,59o,59oO%,_Q!dO,59oOOOO-E<`-E<`OOQ!0Lh1G/X1G/XO%,fQ!0MxO7+'kOOQ!0Lh,5?^,5?^O%-YQMhO1G2fP%-aQ`O'#IrPOQ!0Lh-E<p-E<pO%-}QMjO,5?aOOQ!0Lh-E<s-E<sO%.pQMjO,5?cOOQ!0Lh-E<u-E<uO%.zQ!dO1G2wO%/RQ!dO'#CrO%/iQMhO'#KSO$$wQlO'#JvOOQ!0Lh1G2_1G2_O%/sQ`O'#IqO%0[Q`O,5@vO%0[Q`O,5@vO%0dQ`O,5@vO%0oQ`O,5@vOOQO1G2a1G2aO%0}QMjO1G2`O$+YQ`O'#K[O!,TQMhO1G2`O%1_Q(CWO'#IsO%1lQ`O,5@wO!&zQMhO,5@wO%1tQ!dO,5@wOOQ!0Lh1G2d1G2dO%4UQ!fO'#CiO%4`Q`O,5=POOQ!0Lb,5<},5<}O%4hQpO,5<}OOQ!0Lb,5=O,5=OOCwQ`O,5<}O%4sQpO,5<}OOQ!0Lb,5=R,5=RO$+YQ`O,5=VOOQO,5?`,5?`OOQO-E<r-E<rOOQ!0Lp1G2h1G2hO#$`QpO,5<}O$$wQlO,5=PO%5RQ`O,5=OO%5^QpO,5=OO!,TQMhO'#IuO%6WQMjO1G2sO!,TQMhO'#IwO%6yQMjO1G2uO%7TQMjO1G5qO%7_QMjO1G5qOOQO,5?e,5?eOOQO-E<w-E<wOOQO1G.{1G.{O!,TQMhO1G5qO!,TQMhO1G5qO!:]QpO,59wO%[QlO,59wOOQ!0Lh,5<j,5<jO%7lQ`O1G2ZO!,TQMhO1G2bO%7qQ!0MxO7+'mOOQ!0Lf7+'m7+'mO!$wQlO7+'mO%8eQ`O,5;`OOQ!0Lb,5?g,5?gOOQ!0Lb-E<y-E<yO%8jQ!dO'#K^O#(ZQ`O7+(eO4UQ!fO7+(eO$DfQ`O7+(eO%8tQ!0MvO'#CiO%9XQ!0MvO,5=SO%9lQ`O,5=SO%9tQ`O,5=SOOQ!0Lb1G5o1G5oOOQ[7+$a7+$aO!ByQ!0LrO7+$aO!CUQpO7+$aO!$wQlO7+&aO%9yQ`O'#JQO%:bQ`O,5APOOQO1G3h1G3hO9kQ`O,5APO%:bQ`O,5APO%:jQ`O,5APOOQO,5?m,5?mOOQO-E=P-E=POOQ!0Lf7+'T7+'TO%:oQ`O7+)QO9uQ!0LrO7+)QO9kQ`O7+)QO@zQ`O7+)QO%:tQ`O7+)QOOQ[7+)Q7+)QOOQ[7+(p7+(pO%:yQ!0MvO7+(mO!&zQMhO7+(mO!E^Q`O7+(nOOQ[7+(n7+(nO!&zQMhO7+(nO%;TQ`O'#KbO%;`Q`O,5=lOOQO,5?i,5?iOOQO-E<{-E<{OOQ[7+(s7+(sO%<rQpO'#HZOOQ[1G3`1G3`O!&zQMhO1G3`O%[QlO1G3`O%<yQ`O1G3`O%=UQMhO1G3`O9uQ!0LrO1G3bO$%dQ`O1G3bO9`Q`O1G3bO!CUQpO1G3bO!C^QMhO1G3bO%=dQ`O'#JPO%=xQ`O,5@}O%>QQpO,5@}OOQ!0Lb1G3c1G3cOOQ[7+$V7+$VO@zQ`O7+$VO9uQ!0LrO7+$VO%>]Q`O7+$VO%[QlO1G6lO%[QlO1G6mO%>bQ!0LrO1G6lO%>lQlO1G3kO%>sQ`O1G3kO%>xQlO1G3kOOQ[7+)T7+)TO9uQ!0LrO7+)_O`QlO7+)aOOQ['#Kh'#KhOOQ['#JS'#JSO%?PQlO,5>`OOQ[,5>`,5>`O%[QlO'#HuO%?^Q`O'#HwOOQ[,5>f,5>fO9eQ`O,5>fOOQ[,5>h,5>hOOQ[7+)j7+)jOOQ[7+)p7+)pOOQ[7+)t7+)tOOQ[7+)v7+)vO%?cQpO1G5|O%?}Q?MtO1G0zO%@XQ`O1G0zOOQO1G/s1G/sO%@dQ?MtO1G/sO?YQ`O1G/sO!)[QlO'#DmOOQO,5?P,5?POOQO-E<c-E<cOOQO,5?V,5?VOOQO-E<i-E<iO!CUQpO1G/sOOQO-E<e-E<eOOQ!0Ln1G0]1G0]OOQ!0Lf7+%u7+%uO#(ZQ`O7+%uOOQ!0Lf7+&`7+&`O?YQ`O7+&`O!CUQpO7+&`OOQO7+%x7+%xO$AlQ!0MxO7+&XOOQO7+&X7+&XO%[QlO7+&XO%@nQ!0LrO7+&XO!ByQ!0LrO7+%xO!CUQpO7+%xO%@yQ!0LrO7+&XO%AXQ!0MxO7++rO%[QlO7++rO%AiQ`O7++qO%AiQ`O7++qOOQO1G4s1G4sO9eQ`O1G4sO%AqQ`O1G4sOOQS7+%}7+%}O#(ZQ`O<<LPO4UQ!fO<<LPO%BPQ`O<<LPOOQ[<<LP<<LPO!&zQMhO<<LPO%[QlO<<LPO%BXQ`O<<LPO%BdQ!0MzO,5?aO%DoQ!0MzO,5?cO%FzQ!0MzO1G2`O%I]Q!0MzO1G2sO%KhQ!0MzO1G2uO%MsQ!fO,5?QO%[QlO,5?QOOQO-E<d-E<dO%M}Q`O1G5}OOQ!0Lf<<JU<<JUO%NVQ?MtO1G0uO&!^Q?MtO1G1PO&!eQ?MtO1G1PO&$fQ?MtO1G1PO&$mQ?MtO1G1PO&&nQ?MtO1G1PO&(oQ?MtO1G1PO&(vQ?MtO1G1PO&(}Q?MtO1G1PO&+OQ?MtO1G1PO&+VQ?MtO1G1PO&+^Q!0MxO<<JfO&-UQ?MtO1G1PO&.RQ?MvO1G1PO&/UQ?MvO'#JlO&1[Q?MtO1G1cO&1iQ?MtO1G0UO&1sQMjO,5?TOOQO-E<g-E<gO!)[QlO'#FqOOQO'#KZ'#KZOOQO1G1u1G1uO&1}Q`O1G1tO&2SQ?MtO,5?[OOOW7+'h7+'hOOOO1G/Z1G/ZO&2^Q!dO1G4xOOQ!0Lh7+(Q7+(QP!&zQMhO,5?^O!,TQMhO7+(cO&2eQ`O,5?]O9eQ`O,5?]O$+YQ`O,5?]OOQO-E<o-E<oO&2sQ`O1G6bO&2sQ`O1G6bO&2{Q`O1G6bO&3WQMjO7+'zO&3hQ!dO,5?_O&3rQ`O,5?_O!&zQMhO,5?_OOQO-E<q-E<qO&3wQ!dO1G6cO&4RQ`O1G6cO&4ZQ`O1G2kO!&zQMhO1G2kOOQ!0Lb1G2i1G2iOOQ!0Lb1G2j1G2jO%4hQpO1G2iO!CUQpO1G2iOCwQ`O1G2iOOQ!0Lb1G2q1G2qO&4`QpO1G2iO&4nQ`O1G2kO$+YQ`O1G2jOCwQ`O1G2jO$$wQlO1G2kO&4vQ`O1G2jO&5jQMjO,5?aOOQ!0Lh-E<t-E<tO&6]QMjO,5?cOOQ!0Lh-E<v-E<vO!,TQMhO7++]O&6gQMjO7++]O&6qQMjO7++]OOQ!0Lh1G/c1G/cO&7OQ`O1G/cOOQ!0Lh7+'u7+'uO&7TQMjO7+'|O&7eQ!0MxO<<KXOOQ!0Lf<<KX<<KXO&8XQ`O1G0zO!&zQMhO'#IzO&8^Q`O,5@xO&:`Q!fO<<LPO!&zQMhO1G2nO&:gQ!0LrO1G2nOOQ[<<G{<<G{O!ByQ!0LrO<<G{O&:xQ!0MxO<<I{OOQ!0Lf<<I{<<I{OOQO,5?l,5?lO&;lQ`O,5?lO&;qQ`O,5?lOOQO-E=O-E=OO&<PQ`O1G6kO&<PQ`O1G6kO9kQ`O1G6kO@zQ`O<<LlOOQ[<<Ll<<LlO&<XQ`O<<LlO9uQ!0LrO<<LlO9kQ`O<<LlOOQ[<<LX<<LXO%:yQ!0MvO<<LXOOQ[<<LY<<LYO!E^Q`O<<LYO&<^QpO'#I|O&<iQ`O,5@|O!)[QlO,5@|OOQ[1G3W1G3WOOQO'#JO'#JOO9uQ!0LrO'#JOO&<qQpO,5=uOOQ[,5=u,5=uO&<xQpO'#EgO&=PQpO'#GeO&=UQ`O7+(zO&=ZQ`O7+(zOOQ[7+(z7+(zO!&zQMhO7+(zO%[QlO7+(zO&=cQ`O7+(zOOQ[7+(|7+(|O9uQ!0LrO7+(|O$%dQ`O7+(|O9`Q`O7+(|O!CUQpO7+(|O&=nQ`O,5?kOOQO-E<}-E<}OOQO'#H^'#H^O&=yQ`O1G6iO9uQ!0LrO<<GqOOQ[<<Gq<<GqO@zQ`O<<GqO&>RQ`O7+,WO&>WQ`O7+,XO%[QlO7+,WO%[QlO7+,XOOQ[7+)V7+)VO&>]Q`O7+)VO&>bQlO7+)VO&>iQ`O7+)VOOQ[<<Ly<<LyOOQ[<<L{<<L{OOQ[-E=Q-E=QOOQ[1G3z1G3zO&>nQ`O,5>aOOQ[,5>c,5>cO&>sQ`O1G4QO9eQ`O7+&fO!)[QlO7+&fOOQO7+%_7+%_O&>xQ?MtO1G6ZO?YQ`O7+%_OOQ!0Lf<<Ia<<IaOOQ!0Lf<<Iz<<IzO?YQ`O<<IzOOQO<<Is<<IsO$AlQ!0MxO<<IsO%[QlO<<IsOOQO<<Id<<IdO!ByQ!0LrO<<IdO&?SQ!0LrO<<IsO&?_Q!0MxO<= ^O&?oQ`O<= ]OOQO7+*_7+*_O9eQ`O7+*_OOQ[ANAkANAkO&?wQ!fOANAkO!&zQMhOANAkO#(ZQ`OANAkO4UQ!fOANAkO&@OQ`OANAkO%[QlOANAkO&@WQ!0MzO7+'zO&BiQ!0MzO,5?aO&DtQ!0MzO,5?cO&GPQ!0MzO7+'|O&IbQ!fO1G4lO&IlQ?MtO7+&aO&KpQ?MvO,5=XO&MwQ?MvO,5=ZO&NXQ?MvO,5=XO&NiQ?MvO,5=ZO&NyQ?MvO,59uO'#PQ?MvO,5<kO'%SQ?MvO,5<mO''hQ?MvO,5<{O')^Q?MtO7+'kO')kQ?MtO7+'mO')xQ`O,5<]OOQO7+'`7+'`OOQ!0Lh7+*d7+*dO')}QMjO<<K}OOQO1G4w1G4wO'*UQ`O1G4wO'*aQ`O1G4wO'*oQ`O7++|O'*oQ`O7++|O!&zQMhO1G4yO'*wQ!dO1G4yO'+RQ`O7++}O'+ZQ`O7+(VO'+fQ!dO7+(VOOQ!0Lb7+(T7+(TOOQ!0Lb7+(U7+(UO!CUQpO7+(TOCwQ`O7+(TO'+pQ`O7+(VO!&zQMhO7+(VO$+YQ`O7+(UO'+uQ`O7+(VOCwQ`O7+(UO'+}QMjO<<NwO!,TQMhO<<NwOOQ!0Lh7+$}7+$}O',XQ!dO,5?fOOQO-E<x-E<xO',cQ!0MvO7+(YO!&zQMhO7+(YOOQ[AN=gAN=gO9kQ`O1G5WOOQO1G5W1G5WO',sQ`O1G5WO',xQ`O7+,VO',xQ`O7+,VO9uQ!0LrOANBWO@zQ`OANBWOOQ[ANBWANBWO'-QQ`OANBWOOQ[ANAsANAsOOQ[ANAtANAtO'-VQ`O,5?hOOQO-E<z-E<zO'-bQ?MtO1G6hOOQO,5?j,5?jOOQO-E<|-E<|OOQ[1G3a1G3aO'-lQ`O,5=POOQ[<<Lf<<LfO!&zQMhO<<LfO&=UQ`O<<LfO'-qQ`O<<LfO%[QlO<<LfOOQ[<<Lh<<LhO9uQ!0LrO<<LhO$%dQ`O<<LhO9`Q`O<<LhO'-yQpO1G5VO'.UQ`O7+,TOOQ[AN=]AN=]O9uQ!0LrOAN=]OOQ[<= r<= rOOQ[<= s<= sO'.^Q`O<= rO'.cQ`O<= sOOQ[<<Lq<<LqO'.hQ`O<<LqO'.mQlO<<LqOOQ[1G3{1G3{O?YQ`O7+)lO'.tQ`O<<JQO'/PQ?MtO<<JQOOQO<<Hy<<HyOOQ!0LfAN?fAN?fOOQOAN?_AN?_O$AlQ!0MxOAN?_OOQOAN?OAN?OO%[QlOAN?_OOQO<<My<<MyOOQ[G27VG27VO!&zQMhOG27VO#(ZQ`OG27VO'/ZQ!fOG27VO4UQ!fOG27VO'/bQ`OG27VO'/jQ?MtO<<JfO'/wQ?MvO1G2`O'1mQ?MvO,5?aO'3pQ?MvO,5?cO'5sQ?MvO1G2sO'7vQ?MvO1G2uO'9yQ?MtO<<KXO':WQ?MtO<<I{OOQO1G1w1G1wO!,TQMhOANAiOOQO7+*c7+*cO':eQ`O7+*cO':pQ`O<= hO':xQ!dO7+*eOOQ!0Lb<<Kq<<KqO$+YQ`O<<KqOCwQ`O<<KqO';SQ`O<<KqO!&zQMhO<<KqOOQ!0Lb<<Ko<<KoO!CUQpO<<KoO';_Q!dO<<KqOOQ!0Lb<<Kp<<KpO';iQ`O<<KqO!&zQMhO<<KqO$+YQ`O<<KpO';nQMjOANDcO';xQ!0MvO<<KtOOQO7+*r7+*rO9kQ`O7+*rO'<YQ`O<= qOOQ[G27rG27rO9uQ!0LrOG27rO@zQ`OG27rO!)[QlO1G5SO'<bQ`O7+,SO'<jQ`O1G2kO&=UQ`OANBQOOQ[ANBQANBQO!&zQMhOANBQO'<oQ`OANBQOOQ[ANBSANBSO9uQ!0LrOANBSO$%dQ`OANBSOOQO'#H_'#H_OOQO7+*q7+*qOOQ[G22wG22wOOQ[ANE^ANE^OOQ[ANE_ANE_OOQ[ANB]ANB]O'<wQ`OANB]OOQ[<<MW<<MWO!)[QlOAN?lOOQOG24yG24yO$AlQ!0MxOG24yO#(ZQ`OLD,qOOQ[LD,qLD,qO!&zQMhOLD,qO'<|Q!fOLD,qO'=TQ?MvO7+'zO'>yQ?MvO,5?aO'@|Q?MvO,5?cO'CPQ?MvO7+'|O'DuQMjOG27TOOQO<<M}<<M}OOQ!0LbANA]ANA]O$+YQ`OANA]OCwQ`OANA]O'EVQ!dOANA]OOQ!0LbANAZANAZO'E^Q`OANA]O!&zQMhOANA]O'EiQ!dOANA]OOQ!0LbANA[ANA[OOQO<<N^<<N^OOQ[LD-^LD-^O9uQ!0LrOLD-^O'EsQ?MtO7+*nOOQO'#Gf'#GfOOQ[G27lG27lO&=UQ`OG27lO!&zQMhOG27lOOQ[G27nG27nO9uQ!0LrOG27nOOQ[G27wG27wO'E}Q?MtOG25WOOQOLD*eLD*eOOQ[!$(!]!$(!]O#(ZQ`O!$(!]O!&zQMhO!$(!]O'FXQ!0MzOG27TOOQ!0LbG26wG26wO$+YQ`OG26wO'HjQ`OG26wOCwQ`OG26wO'HuQ!dOG26wO!&zQMhOG26wOOQ[!$(!x!$(!xOOQ[LD-WLD-WO&=UQ`OLD-WOOQ[LD-YLD-YOOQ[!)9Ew!)9EwO#(ZQ`O!)9EwOOQ!0LbLD,cLD,cO$+YQ`OLD,cOCwQ`OLD,cO'H|Q`OLD,cO'IXQ!dOLD,cOOQ[!$(!r!$(!rOOQ[!.K;c!.K;cO'I`Q?MvOG27TOOQ!0Lb!$( }!$( }O$+YQ`O!$( }OCwQ`O!$( }O'KUQ`O!$( }OOQ!0Lb!)9Ei!)9EiO$+YQ`O!)9EiOCwQ`O!)9EiOOQ!0Lb!.K;T!.K;TO$+YQ`O!.K;TOOQ!0Lb!4/0o!4/0oO!)[QlO'#DzO1PQ`O'#EXO'KaQ!fO'#JrO'KhQ!L^O'#DvO'KoQlO'#EOO'KvQ!fO'#CiO'N^Q!fO'#CiO!)[QlO'#EQO'NnQlO,5;ZO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO'#IpO(!qQ`O,5<iO!)[QlO,5;eO(!yQMhO,5;eO($dQMhO,5;eO!)[QlO,5;wO!&zQMhO'#GmO(!yQMhO'#GmO!&zQMhO'#GoO(!yQMhO'#GoO1SQ`O'#DZO1SQ`O'#DZO!&zQMhO'#GPO(!yQMhO'#GPO!&zQMhO'#GRO(!yQMhO'#GRO!&zQMhO'#GaO(!yQMhO'#GaO!)[QlO,5:jO($kQpO'#D_O($uQpO'#JvO!)[QlO,5@oO'NnQlO1G0uO(%PQ?MtO'#CiO!)[QlO1G2PO!&zQMhO'#IuO(!yQMhO'#IuO!&zQMhO'#IwO(!yQMhO'#IwO(%ZQ!dO'#CrO!&zQMhO,5<tO(!yQMhO,5<tO'NnQlO1G2RO!)[QlO7+&zO!&zQMhO1G2`O(!yQMhO1G2`O!&zQMhO'#IuO(!yQMhO'#IuO!&zQMhO'#IwO(!yQMhO'#IwO!&zQMhO1G2bO(!yQMhO1G2bO'NnQlO7+'mO'NnQlO7+&aO!&zQMhOANAiO(!yQMhOANAiO(%nQ`O'#EoO(%sQ`O'#EoO(%{Q`O'#F]O(&QQ`O'#EyO(&VQ`O'#KTO(&bQ`O'#KRO(&mQ`O,5;ZO(&rQMjO,5<eO(&yQ`O'#GYO('OQ`O'#GYO('TQ`O,5<eO(']Q`O,5<gO('eQ`O,5;ZO('mQ?MtO1G1`O('tQ`O,5<tO('yQ`O,5<tO((OQ`O,5<vO((TQ`O,5<vO((YQ`O1G2RO((_Q`O1G0uO((dQMjO<<K}O((kQMjO<<K}O((rQMhO'#F|O9`Q`O'#F{OAuQ`O'#EnO!)[QlO,5;tO!3oQ`O'#GYO!3oQ`O'#GYO!3oQ`O'#G[O!3oQ`O'#G[O!,TQMhO7+(cO!,TQMhO7+(cO%.zQ!dO1G2wO%.zQ!dO1G2wO!&zQMhO,5=]O!&zQMhO,5=]",stateData:"()x~O'|OS'}OSTOS(ORQ~OPYOQYOSfOY!VOaqOdzOeyOl!POpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_XO!iuO!lZO!oYO!pYO!qYO!svO!uwO!xxO!|]O$W|O$niO%h}O%j!QO%l!OO%m!OO%n!OO%q!RO%s!SO%v!TO%w!TO%y!UO&W!WO&^!XO&`!YO&b!ZO&d![O&g!]O&m!^O&s!_O&u!`O&w!aO&y!bO&{!cO(TSO(VTO(YUO(aVO(o[O~OWtO~P`OPYOQYOSfOd!jOe!iOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_!eO!iuO!lZO!oYO!pYO!qYO!svO!u!gO!x!hO$W!kO$niO(T!dO(VTO(YUO(aVO(o[O~Oa!wOs!nO!S!oO!b!yO!c!vO!d!vO!|<VO#T!pO#U!pO#V!xO#W!pO#X!pO#[!zO#]!zO(U!lO(VTO(YUO(e!mO(o!sO~O(O!{O~OP]XR]X[]Xa]Xj]Xr]X!Q]X!S]X!]]X!l]X!p]X#R]X#S]X#`]X#kfX#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#v]X#x]X#z]X#{]X$Q]X'z]X(a]X(r]X(y]X(z]X~O!g%RX~P(qO_!}O(V#PO(W!}O(X#PO~O_#QO(X#PO(Y#PO(Z#QO~Ox#SO!U#TO(b#TO(c#VO~OPYOQYOSfOd!jOe!iOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_!eO!iuO!lZO!oYO!pYO!qYO!svO!u!gO!x!hO$W!kO$niO(T<ZO(VTO(YUO(aVO(o[O~O![#ZO!]#WO!Y(hP!Y(vP~P+}O!^#cO~P`OPYOQYOSfOd!jOe!iOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_!eO!iuO!lZO!oYO!pYO!qYO!svO!u!gO!x!hO$W!kO$niO(VTO(YUO(aVO(o[O~Op#mO![#iO!|]O#i#lO#j#iO(T<[O!k(sP~P.iO!l#oO(T#nO~O!x#sO!|]O%h#tO~O#k#uO~O!g#vO#k#uO~OP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!]$_O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO#x$UO#z$WO#{$XO(aVO(r$YO(y#|O(z#}O~Oa(fX'z(fX'w(fX!k(fX!Y(fX!_(fX%i(fX!g(fX~P1qO#S$dO#`$eO$Q$eOP(gXR(gX[(gXj(gXr(gX!Q(gX!S(gX!](gX!l(gX!p(gX#R(gX#n(gX#o(gX#p(gX#q(gX#r(gX#s(gX#t(gX#u(gX#v(gX#x(gX#z(gX#{(gX(a(gX(r(gX(y(gX(z(gX!_(gX%i(gX~Oa(gX'z(gX'w(gX!Y(gX!k(gXv(gX!g(gX~P4UO#`$eO~O$]$hO$_$gO$f$mO~OSfO!_$nO$i$oO$k$qO~Oh%VOj%dOk%dOp%WOr%XOs$tOt$tOz%YO|%ZO!O%]O!S${O!_$|O!i%bO!l$xO#j%cO$W%`O$t%^O$v%_O$y%aO(T$sO(VTO(YUO(a$uO(y$}O(z%POg(^P~Ol%[O~P7eO!l%eO~O!S%hO!_%iO(T%gO~O!g%mO~Oa%nO'z%nO~O!Q%rO~P%[O(U!lO~P%[O%n%vO~P%[Oh%VO!l%eO(T%gO(U!lO~Oe%}O!l%eO(T%gO~Oj$RO~O!_&PO(T%gO(U!lO(VTO(YUO`)WP~O!Q&SO!l&RO%j&VO&T&WO~P;SO!x#sO~O%s&YO!S)SX!_)SX(T)SX~O(T&ZO~Ol!PO!u&`O%j!QO%l!OO%m!OO%n!OO%q!RO%s!SO%v!TO%w!TO~Od&eOe&dO!x&bO%h&cO%{&aO~P<bOd&hOeyOl!PO!_&gO!u&`O!xxO!|]O%h}O%l!OO%m!OO%n!OO%q!RO%s!SO%v!TO%w!TO%y!UO~Ob&kO#`&nO%j&iO(U!lO~P=gO!l&oO!u&sO~O!l#oO~O!_XO~Oa%nO'x&{O'z%nO~Oa%nO'x'OO'z%nO~Oa%nO'x'QO'z%nO~O'w]X!Y]Xv]X!k]X&[]X!_]X%i]X!g]X~P(qO!b'_O!c'WO!d'WO(U!lO(VTO(YUO~Os'UO!S'TO!['XO(e'SO!^(iP!^(xP~P@nOn'bO!_'`O(T%gO~Oe'gO!l%eO(T%gO~O!Q&SO!l&RO~Os!nO!S!oO!|<VO#T!pO#U!pO#W!pO#X!pO(U!lO(VTO(YUO(e!mO(o!sO~O!b'mO!c'lO!d'lO#V!pO#['nO#]'nO~PBYOa%nOh%VO!g#vO!l%eO'z%nO(r'pO~O!p'tO#`'rO~PChOs!nO!S!oO(VTO(YUO(e!mO(o!sO~O!_XOs(mX!S(mX!b(mX!c(mX!d(mX!|(mX#T(mX#U(mX#V(mX#W(mX#X(mX#[(mX#](mX(U(mX(V(mX(Y(mX(e(mX(o(mX~O!c'lO!d'lO(U!lO~PDWO(P'xO(Q'xO(R'zO~O_!}O(V'|O(W!}O(X'|O~O_#QO(X'|O(Y'|O(Z#QO~Ov(OO~P%[Ox#SO!U#TO(b#TO(c(RO~O![(TO!Y'WX!Y'^X!]'WX!]'^X~P+}O!](VO!Y(hX~OP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!](VO!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO#x$UO#z$WO#{$XO(aVO(r$YO(y#|O(z#}O~O!Y(hX~PHRO!Y([O~O!Y(uX!](uX!g(uX!k(uX(r(uX~O#`(uX#k#dX!^(uX~PJUO#`(]O!Y(wX!](wX~O!](^O!Y(vX~O!Y(aO~O#`$eO~PJUO!^(bO~P`OR#zO!Q#yO!S#{O!l#xO(aVOP!na[!naj!nar!na!]!na!p!na#R!na#n!na#o!na#p!na#q!na#r!na#s!na#t!na#u!na#v!na#x!na#z!na#{!na(r!na(y!na(z!na~Oa!na'z!na'w!na!Y!na!k!nav!na!_!na%i!na!g!na~PKlO!k(cO~O!g#vO#`(dO(r'pO!](tXa(tX'z(tX~O!k(tX~PNXO!S%hO!_%iO!|]O#i(iO#j(hO(T%gO~O!](jO!k(sX~O!k(lO~O!S%hO!_%iO#j(hO(T%gO~OP(gXR(gX[(gXj(gXr(gX!Q(gX!S(gX!](gX!l(gX!p(gX#R(gX#n(gX#o(gX#p(gX#q(gX#r(gX#s(gX#t(gX#u(gX#v(gX#x(gX#z(gX#{(gX(a(gX(r(gX(y(gX(z(gX~O!g#vO!k(gX~P! uOR(nO!Q(mO!l#xO#S$dO!|!{a!S!{a~O!x!{a%h!{a!_!{a#i!{a#j!{a(T!{a~P!#vO!x(rO~OPYOQYOSfOd!jOe!iOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_XO!iuO!lZO!oYO!pYO!qYO!svO!u!gO!x!hO$W!kO$niO(T!dO(VTO(YUO(aVO(o[O~Oh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O<sO!S${O!_$|O!i>VO!l$xO#j<yO$W%`O$t<uO$v<wO$y%aO(T(vO(VTO(YUO(a$uO(y$}O(z%PO~O#k(xO~O![(zO!k(kP~P%[O(e(|O(o[O~O!S)OO!l#xO(e(|O(o[O~OP<UOQ<UOSfOd>ROe!iOpkOr<UOskOtkOzkO|<UO!O<UO!SWO!WkO!XkO!_!eO!i<XO!lZO!o<UO!p<UO!q<UO!s<YO!u<]O!x!hO$W!kO$n>PO(T)]O(VTO(YUO(aVO(o[O~O!]$_Oa$qa'z$qa'w$qa!k$qa!Y$qa!_$qa%i$qa!g$qa~Ol)dO~P!&zOh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O%]O!S${O!_$|O!i%bO!l$xO#j%cO$W%`O$t%^O$v%_O$y%aO(T(vO(VTO(YUO(a$uO(y$}O(z%PO~Og(pP~P!,TO!Q)iO!g)hO!_$^X$Z$^X$]$^X$_$^X$f$^X~O!g)hO!_({X$Z({X$]({X$_({X$f({X~O!Q)iO~P!.^O!Q)iO!_({X$Z({X$]({X$_({X$f({X~O!_)kO$Z)oO$])jO$_)jO$f)pO~O![)sO~P!)[O$]$hO$_$gO$f)wO~On$zX!Q$zX#S$zX'y$zX(y$zX(z$zX~OgmXg$zXnmX!]mX#`mX~P!0SOx)yO(b)zO(c)|O~On*VO!Q*OO'y*PO(y$}O(z%PO~Og)}O~P!1WOg*WO~Oh%VOr%XOs$tOt$tOz%YO|%ZO!O<sO!S*YO!_*ZO!i>VO!l$xO#j<yO$W%`O$t<uO$v<wO$y%aO(VTO(YUO(a$uO(y$}O(z%PO~Op*`O![*^O(T*XO!k)OP~P!1uO#k*aO~O!l*bO~Oh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O<sO!S${O!_$|O!i>VO!l$xO#j<yO$W%`O$t<uO$v<wO$y%aO(T*dO(VTO(YUO(a$uO(y$}O(z%PO~O![*gO!Y)PP~P!3tOr*sOs!nO!S*iO!b*qO!c*kO!d*kO!l*bO#[*rO%`*mO(U!lO(VTO(YUO(e!mO~O!^*pO~P!5iO#S$dOn(`X!Q(`X'y(`X(y(`X(z(`X!](`X#`(`X~Og(`X$O(`X~P!6kOn*xO#`*wOg(_X!](_X~O!]*yOg(^X~Oj%dOk%dOl%dO(T&ZOg(^P~Os*|O~Og)}O(T&ZO~O!l+SO~O(T(vO~Op+WO!S%hO![#iO!_%iO!|]O#i#lO#j#iO(T%gO!k(sP~O!g#vO#k+XO~O!S%hO![+ZO!](^O!_%iO(T%gO!Y(vP~Os'[O!S+]O![+[O(VTO(YUO(e(|O~O!^(xP~P!9|O!]+^Oa)TX'z)TX~OP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO#x$UO#z$WO#{$XO(aVO(r$YO(y#|O(z#}O~Oa!ja!]!ja'z!ja'w!ja!Y!ja!k!jav!ja!_!ja%i!ja!g!ja~P!:tOR#zO!Q#yO!S#{O!l#xO(aVOP!ra[!raj!rar!ra!]!ra!p!ra#R!ra#n!ra#o!ra#p!ra#q!ra#r!ra#s!ra#t!ra#u!ra#v!ra#x!ra#z!ra#{!ra(r!ra(y!ra(z!ra~Oa!ra'z!ra'w!ra!Y!ra!k!rav!ra!_!ra%i!ra!g!ra~P!=[OR#zO!Q#yO!S#{O!l#xO(aVOP!ta[!taj!tar!ta!]!ta!p!ta#R!ta#n!ta#o!ta#p!ta#q!ta#r!ta#s!ta#t!ta#u!ta#v!ta#x!ta#z!ta#{!ta(r!ta(y!ta(z!ta~Oa!ta'z!ta'w!ta!Y!ta!k!tav!ta!_!ta%i!ta!g!ta~P!?rOh%VOn+gO!_'`O%i+fO~O!g+iOa(]X!_(]X'z(]X!](]X~Oa%nO!_XO'z%nO~Oh%VO!l%eO~Oh%VO!l%eO(T%gO~O!g#vO#k(xO~Ob+tO%j+uO(T+qO(VTO(YUO!^)XP~O!]+vO`)WX~O[+zO~O`+{O~O!_&PO(T%gO(U!lO`)WP~O%j,OO~P;SOh%VO#`,SO~Oh%VOn,VO!_$|O~O!_,XO~O!Q,ZO!_XO~O%n%vO~O!x,`O~Oe,eO~Ob,fO(T#nO(VTO(YUO!^)VP~Oe%}O~O%j!QO(T&ZO~P=gO[,kO`,jO~OPYOQYOSfOdzOeyOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!iuO!lZO!oYO!pYO!qYO!svO!xxO!|]O$niO%h}O(VTO(YUO(aVO(o[O~O!_!eO!u!gO$W!kO(T!dO~P!FyO`,jOa%nO'z%nO~OPYOQYOSfOd!jOe!iOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_!eO!iuO!lZO!oYO!pYO!qYO!svO!x!hO$W!kO$niO(T!dO(VTO(YUO(aVO(o[O~Oa,pOl!OO!uwO%l!OO%m!OO%n!OO~P!IcO!l&oO~O&^,vO~O!_,xO~O&o,zO&q,{OP&laQ&laS&laY&laa&lad&lae&lal&lap&lar&las&lat&laz&la|&la!O&la!S&la!W&la!X&la!_&la!i&la!l&la!o&la!p&la!q&la!s&la!u&la!x&la!|&la$W&la$n&la%h&la%j&la%l&la%m&la%n&la%q&la%s&la%v&la%w&la%y&la&W&la&^&la&`&la&b&la&d&la&g&la&m&la&s&la&u&la&w&la&y&la&{&la'w&la(T&la(V&la(Y&la(a&la(o&la!^&la&e&lab&la&j&la~O(T-QO~Oh!eX!]!RX!^!RX!g!RX!g!eX!l!eX#`!RX~O!]!eX!^!eX~P#!iO!g-VO#`-UOh(jX!]#hX!^#hX!g(jX!l(jX~O!](jX!^(jX~P##[Oh%VO!g-XO!l%eO!]!aX!^!aX~Os!nO!S!oO(VTO(YUO(e!mO~OP<UOQ<UOSfOd>ROe!iOpkOr<UOskOtkOzkO|<UO!O<UO!SWO!WkO!XkO!_!eO!i<XO!lZO!o<UO!p<UO!q<UO!s<YO!u<]O!x!hO$W!kO$n>PO(VTO(YUO(aVO(o[O~O(T=QO~P#$qO!]-]O!^(iX~O!^-_O~O!g-VO#`-UO!]#hX!^#hX~O!]-`O!^(xX~O!^-bO~O!c-cO!d-cO(U!lO~P#$`O!^-fO~P'_On-iO!_'`O~O!Y-nO~Os!{a!b!{a!c!{a!d!{a#T!{a#U!{a#V!{a#W!{a#X!{a#[!{a#]!{a(U!{a(V!{a(Y!{a(e!{a(o!{a~P!#vO!p-sO#`-qO~PChO!c-uO!d-uO(U!lO~PDWOa%nO#`-qO'z%nO~Oa%nO!g#vO#`-qO'z%nO~Oa%nO!g#vO!p-sO#`-qO'z%nO(r'pO~O(P'xO(Q'xO(R-zO~Ov-{O~O!Y'Wa!]'Wa~P!:tO![.PO!Y'WX!]'WX~P%[O!](VO!Y(ha~O!Y(ha~PHRO!](^O!Y(va~O!S%hO![.TO!_%iO(T%gO!Y'^X!]'^X~O#`.VO!](ta!k(taa(ta'z(ta~O!g#vO~P#,wO!](jO!k(sa~O!S%hO!_%iO#j.ZO(T%gO~Op.`O!S%hO![.]O!_%iO!|]O#i._O#j.]O(T%gO!]'aX!k'aX~OR.dO!l#xO~Oh%VOn.gO!_'`O%i.fO~Oa#ci!]#ci'z#ci'w#ci!Y#ci!k#civ#ci!_#ci%i#ci!g#ci~P!:tOn>]O!Q*OO'y*PO(y$}O(z%PO~O#k#_aa#_a#`#_a'z#_a!]#_a!k#_a!_#_a!Y#_a~P#/sO#k(`XP(`XR(`X[(`Xa(`Xj(`Xr(`X!S(`X!l(`X!p(`X#R(`X#n(`X#o(`X#p(`X#q(`X#r(`X#s(`X#t(`X#u(`X#v(`X#x(`X#z(`X#{(`X'z(`X(a(`X(r(`X!k(`X!Y(`X'w(`Xv(`X!_(`X%i(`X!g(`X~P!6kO!].tO!k(kX~P!:tO!k.wO~O!Y.yO~OP$[OR#zO!Q#yO!S#{O!l#xO!p$[O(aVO[#mia#mij#mir#mi!]#mi#R#mi#o#mi#p#mi#q#mi#r#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi'z#mi(r#mi(y#mi(z#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#n#mi~P#3cO#n$OO~P#3cOP$[OR#zOr$aO!Q#yO!S#{O!l#xO!p$[O#n$OO#o$PO#p$PO#q$PO(aVO[#mia#mij#mi!]#mi#R#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi'z#mi(r#mi(y#mi(z#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#r#mi~P#6QO#r$QO~P#6QOP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO(aVOa#mi!]#mi#x#mi#z#mi#{#mi'z#mi(r#mi(y#mi(z#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#v#mi~P#8oOP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO(aVO(z#}Oa#mi!]#mi#z#mi#{#mi'z#mi(r#mi(y#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#x$UO~P#;VO#x#mi~P#;VO#v$SO~P#8oOP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO#x$UO(aVO(y#|O(z#}Oa#mi!]#mi#{#mi'z#mi(r#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#z#mi~P#={O#z$WO~P#={OP]XR]X[]Xj]Xr]X!Q]X!S]X!l]X!p]X#R]X#S]X#`]X#kfX#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#v]X#x]X#z]X#{]X$Q]X(a]X(r]X(y]X(z]X!]]X!^]X~O$O]X~P#@jOP$[OR#zO[<mOj<bOr<kO!Q#yO!S#{O!l#xO!p$[O#R<bO#n<_O#o<`O#p<`O#q<`O#r<aO#s<bO#t<bO#u<lO#v<cO#x<eO#z<gO#{<hO(aVO(r$YO(y#|O(z#}O~O$O.{O~P#BwO#S$dO#`<nO$Q<nO$O(gX!^(gX~P! uOa'da!]'da'z'da'w'da!k'da!Y'dav'da!_'da%i'da!g'da~P!:tO[#mia#mij#mir#mi!]#mi#R#mi#r#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi'z#mi(r#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~OP$[OR#zO!Q#yO!S#{O!l#xO!p$[O#n$OO#o$PO#p$PO#q$PO(aVO(y#mi(z#mi~P#EyOn>]O!Q*OO'y*PO(y$}O(z%POP#miR#mi!S#mi!l#mi!p#mi#n#mi#o#mi#p#mi#q#mi(a#mi~P#EyO!]/POg(pX~P!1WOg/RO~Oa$Pi!]$Pi'z$Pi'w$Pi!Y$Pi!k$Piv$Pi!_$Pi%i$Pi!g$Pi~P!:tO$]/SO$_/SO~O$]/TO$_/TO~O!g)hO#`/UO!_$cX$Z$cX$]$cX$_$cX$f$cX~O![/VO~O!_)kO$Z/XO$])jO$_)jO$f/YO~O!]<iO!^(fX~P#BwO!^/ZO~O!g)hO$f({X~O$f/]O~Ov/^O~P!&zOx)yO(b)zO(c/aO~O!S/dO~O(y$}On%aa!Q%aa'y%aa(z%aa!]%aa#`%aa~Og%aa$O%aa~P#L{O(z%POn%ca!Q%ca'y%ca(y%ca!]%ca#`%ca~Og%ca$O%ca~P#MnO!]fX!gfX!kfX!k$zX(rfX~P!0SOp%WO![/mO!](^O(T/lO!Y(vP!Y)PP~P!1uOr*sO!b*qO!c*kO!d*kO!l*bO#[*rO%`*mO(U!lO(VTO(YUO~Os<}O!S/nO![+[O!^*pO(e<|O!^(xP~P$ [O!k/oO~P#/sO!]/pO!g#vO(r'pO!k)OX~O!k/uO~OnoX!QoX'yoX(yoX(zoX~O!g#vO!koX~P$#OOp/wO!S%hO![*^O!_%iO(T%gO!k)OP~O#k/xO~O!Y$zX!]$zX!g%RX~P!0SO!]/yO!Y)PX~P#/sO!g/{O~O!Y/}O~OpkO(T0OO~P.iOh%VOr0TO!g#vO!l%eO(r'pO~O!g+iO~Oa%nO!]0XO'z%nO~O!^0ZO~P!5iO!c0[O!d0[O(U!lO~P#$`Os!nO!S0]O(VTO(YUO(e!mO~O#[0_O~Og%aa!]%aa#`%aa$O%aa~P!1WOg%ca!]%ca#`%ca$O%ca~P!1WOj%dOk%dOl%dO(T&ZOg'mX!]'mX~O!]*yOg(^a~Og0hO~On0jO#`0iOg(_a!](_a~OR0kO!Q0kO!S0lO#S$dOn}a'y}a(y}a(z}a!]}a#`}a~Og}a$O}a~P$(cO!Q*OO'y*POn$sa(y$sa(z$sa!]$sa#`$sa~Og$sa$O$sa~P$)_O!Q*OO'y*POn$ua(y$ua(z$ua!]$ua#`$ua~Og$ua$O$ua~P$*QO#k0oO~Og%Ta!]%Ta#`%Ta$O%Ta~P!1WO!g#vO~O#k0rO~O!]+^Oa)Ta'z)Ta~OR#zO!Q#yO!S#{O!l#xO(aVOP!ri[!rij!rir!ri!]!ri!p!ri#R!ri#n!ri#o!ri#p!ri#q!ri#r!ri#s!ri#t!ri#u!ri#v!ri#x!ri#z!ri#{!ri(r!ri(y!ri(z!ri~Oa!ri'z!ri'w!ri!Y!ri!k!riv!ri!_!ri%i!ri!g!ri~P$+oOh%VOr%XOs$tOt$tOz%YO|%ZO!O<sO!S${O!_$|O!i>VO!l$xO#j<yO$W%`O$t<uO$v<wO$y%aO(VTO(YUO(a$uO(y$}O(z%PO~Op0{O%]0|O(T0zO~P$.VO!g+iOa(]a!_(]a'z(]a!](]a~O#k1SO~O[]X!]fX!^fX~O!]1TO!^)XX~O!^1VO~O[1WO~Ob1YO(T+qO(VTO(YUO~O!_&PO(T%gO`'uX!]'uX~O!]+vO`)Wa~O!k1]O~P!:tO[1`O~O`1aO~O#`1fO~On1iO!_$|O~O(e(|O!^)UP~Oh%VOn1rO!_1oO%i1qO~O[1|O!]1zO!^)VX~O!^1}O~O`2POa%nO'z%nO~O(T#nO(VTO(YUO~O#S$dO#`$eO$Q$eOP(gXR(gX[(gXr(gX!Q(gX!S(gX!](gX!l(gX!p(gX#R(gX#n(gX#o(gX#p(gX#q(gX#r(gX#s(gX#t(gX#u(gX#v(gX#x(gX#z(gX#{(gX(a(gX(r(gX(y(gX(z(gX~Oj2SO&[2TOa(gX~P$3pOj2SO#`$eO&[2TO~Oa2VO~P%[Oa2XO~O&e2[OP&ciQ&ciS&ciY&cia&cid&cie&cil&cip&cir&cis&cit&ciz&ci|&ci!O&ci!S&ci!W&ci!X&ci!_&ci!i&ci!l&ci!o&ci!p&ci!q&ci!s&ci!u&ci!x&ci!|&ci$W&ci$n&ci%h&ci%j&ci%l&ci%m&ci%n&ci%q&ci%s&ci%v&ci%w&ci%y&ci&W&ci&^&ci&`&ci&b&ci&d&ci&g&ci&m&ci&s&ci&u&ci&w&ci&y&ci&{&ci'w&ci(T&ci(V&ci(Y&ci(a&ci(o&ci!^&cib&ci&j&ci~Ob2bO!^2`O&j2aO~P`O!_XO!l2dO~O&q,{OP&liQ&liS&liY&lia&lid&lie&lil&lip&lir&lis&lit&liz&li|&li!O&li!S&li!W&li!X&li!_&li!i&li!l&li!o&li!p&li!q&li!s&li!u&li!x&li!|&li$W&li$n&li%h&li%j&li%l&li%m&li%n&li%q&li%s&li%v&li%w&li%y&li&W&li&^&li&`&li&b&li&d&li&g&li&m&li&s&li&u&li&w&li&y&li&{&li'w&li(T&li(V&li(Y&li(a&li(o&li!^&li&e&lib&li&j&li~O!Y2jO~O!]!aa!^!aa~P#BwOs!nO!S!oO![2pO(e!mO!]'XX!^'XX~P@nO!]-]O!^(ia~O!]'_X!^'_X~P!9|O!]-`O!^(xa~O!^2wO~P'_Oa%nO#`3QO'z%nO~Oa%nO!g#vO#`3QO'z%nO~Oa%nO!g#vO!p3UO#`3QO'z%nO(r'pO~Oa%nO'z%nO~P!:tO!]$_Ov$qa~O!Y'Wi!]'Wi~P!:tO!](VO!Y(hi~O!](^O!Y(vi~O!Y(wi!](wi~P!:tO!](ti!k(tia(ti'z(ti~P!:tO#`3WO!](ti!k(tia(ti'z(ti~O!](jO!k(si~O!S%hO!_%iO!|]O#i3]O#j3[O(T%gO~O!S%hO!_%iO#j3[O(T%gO~On3dO!_'`O%i3cO~Oh%VOn3dO!_'`O%i3cO~O#k%aaP%aaR%aa[%aaa%aaj%aar%aa!S%aa!l%aa!p%aa#R%aa#n%aa#o%aa#p%aa#q%aa#r%aa#s%aa#t%aa#u%aa#v%aa#x%aa#z%aa#{%aa'z%aa(a%aa(r%aa!k%aa!Y%aa'w%aav%aa!_%aa%i%aa!g%aa~P#L{O#k%caP%caR%ca[%caa%caj%car%ca!S%ca!l%ca!p%ca#R%ca#n%ca#o%ca#p%ca#q%ca#r%ca#s%ca#t%ca#u%ca#v%ca#x%ca#z%ca#{%ca'z%ca(a%ca(r%ca!k%ca!Y%ca'w%cav%ca!_%ca%i%ca!g%ca~P#MnO#k%aaP%aaR%aa[%aaa%aaj%aar%aa!S%aa!]%aa!l%aa!p%aa#R%aa#n%aa#o%aa#p%aa#q%aa#r%aa#s%aa#t%aa#u%aa#v%aa#x%aa#z%aa#{%aa'z%aa(a%aa(r%aa!k%aa!Y%aa'w%aa#`%aav%aa!_%aa%i%aa!g%aa~P#/sO#k%caP%caR%ca[%caa%caj%car%ca!S%ca!]%ca!l%ca!p%ca#R%ca#n%ca#o%ca#p%ca#q%ca#r%ca#s%ca#t%ca#u%ca#v%ca#x%ca#z%ca#{%ca'z%ca(a%ca(r%ca!k%ca!Y%ca'w%ca#`%cav%ca!_%ca%i%ca!g%ca~P#/sO#k}aP}a[}aa}aj}ar}a!l}a!p}a#R}a#n}a#o}a#p}a#q}a#r}a#s}a#t}a#u}a#v}a#x}a#z}a#{}a'z}a(a}a(r}a!k}a!Y}a'w}av}a!_}a%i}a!g}a~P$(cO#k$saP$saR$sa[$saa$saj$sar$sa!S$sa!l$sa!p$sa#R$sa#n$sa#o$sa#p$sa#q$sa#r$sa#s$sa#t$sa#u$sa#v$sa#x$sa#z$sa#{$sa'z$sa(a$sa(r$sa!k$sa!Y$sa'w$sav$sa!_$sa%i$sa!g$sa~P$)_O#k$uaP$uaR$ua[$uaa$uaj$uar$ua!S$ua!l$ua!p$ua#R$ua#n$ua#o$ua#p$ua#q$ua#r$ua#s$ua#t$ua#u$ua#v$ua#x$ua#z$ua#{$ua'z$ua(a$ua(r$ua!k$ua!Y$ua'w$uav$ua!_$ua%i$ua!g$ua~P$*QO#k%TaP%TaR%Ta[%Taa%Taj%Tar%Ta!S%Ta!]%Ta!l%Ta!p%Ta#R%Ta#n%Ta#o%Ta#p%Ta#q%Ta#r%Ta#s%Ta#t%Ta#u%Ta#v%Ta#x%Ta#z%Ta#{%Ta'z%Ta(a%Ta(r%Ta!k%Ta!Y%Ta'w%Ta#`%Tav%Ta!_%Ta%i%Ta!g%Ta~P#/sOa#cq!]#cq'z#cq'w#cq!Y#cq!k#cqv#cq!_#cq%i#cq!g#cq~P!:tO![3lO!]'YX!k'YX~P%[O!].tO!k(ka~O!].tO!k(ka~P!:tO!Y3oO~O$O!na!^!na~PKlO$O!ja!]!ja!^!ja~P#BwO$O!ra!^!ra~P!=[O$O!ta!^!ta~P!?rOg']X!]']X~P!,TO!]/POg(pa~OSfO!_4TO$d4UO~O!^4YO~Ov4ZO~P#/sOa$mq!]$mq'z$mq'w$mq!Y$mq!k$mqv$mq!_$mq%i$mq!g$mq~P!:tO!Y4]O~P!&zO!S4^O~O!Q*OO'y*PO(z%POn'ia(y'ia!]'ia#`'ia~Og'ia$O'ia~P%-fO!Q*OO'y*POn'ka(y'ka(z'ka!]'ka#`'ka~Og'ka$O'ka~P%.XO(r$YO~P#/sO!YfX!Y$zX!]fX!]$zX!g%RX#`fX~P!0SOp%WO(T=WO~P!1uOp4bO!S%hO![4aO!_%iO(T%gO!]'eX!k'eX~O!]/pO!k)Oa~O!]/pO!g#vO!k)Oa~O!]/pO!g#vO(r'pO!k)Oa~Og$|i!]$|i#`$|i$O$|i~P!1WO![4jO!Y'gX!]'gX~P!3tO!]/yO!Y)Pa~O!]/yO!Y)Pa~P#/sOP]XR]X[]Xj]Xr]X!Q]X!S]X!Y]X!]]X!l]X!p]X#R]X#S]X#`]X#kfX#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#v]X#x]X#z]X#{]X$Q]X(a]X(r]X(y]X(z]X~Oj%YX!g%YX~P%2OOj4oO!g#vO~Oh%VO!g#vO!l%eO~Oh%VOr4tO!l%eO(r'pO~Or4yO!g#vO(r'pO~Os!nO!S4zO(VTO(YUO(e!mO~O(y$}On%ai!Q%ai'y%ai(z%ai!]%ai#`%ai~Og%ai$O%ai~P%5oO(z%POn%ci!Q%ci'y%ci(y%ci!]%ci#`%ci~Og%ci$O%ci~P%6bOg(_i!](_i~P!1WO#`5QOg(_i!](_i~P!1WO!k5VO~Oa$oq!]$oq'z$oq'w$oq!Y$oq!k$oqv$oq!_$oq%i$oq!g$oq~P!:tO!Y5ZO~O!]5[O!_)QX~P#/sOa$zX!_$zX%^]X'z$zX!]$zX~P!0SO%^5_OaoX!_oX'zoX!]oX~P$#OOp5`O(T#nO~O%^5_O~Ob5fO%j5gO(T+qO(VTO(YUO!]'tX!^'tX~O!]1TO!^)Xa~O[5kO~O`5lO~O[5pO~Oa%nO'z%nO~P#/sO!]5uO#`5wO!^)UX~O!^5xO~Or6OOs!nO!S*iO!b!yO!c!vO!d!vO!|<VO#T!pO#U!pO#V!pO#W!pO#X!pO#[5}O#]!zO(U!lO(VTO(YUO(e!mO(o!sO~O!^5|O~P%;eOn6TO!_1oO%i6SO~Oh%VOn6TO!_1oO%i6SO~Ob6[O(T#nO(VTO(YUO!]'sX!^'sX~O!]1zO!^)Va~O(VTO(YUO(e6^O~O`6bO~Oj6eO&[6fO~PNXO!k6gO~P%[Oa6iO~Oa6iO~P%[Ob2bO!^6nO&j2aO~P`O!g6pO~O!g6rOh(ji!](ji!^(ji!g(ji!l(jir(ji(r(ji~O!]#hi!^#hi~P#BwO#`6sO!]#hi!^#hi~O!]!ai!^!ai~P#BwOa%nO#`6|O'z%nO~Oa%nO!g#vO#`6|O'z%nO~O!](tq!k(tqa(tq'z(tq~P!:tO!](jO!k(sq~O!S%hO!_%iO#j7TO(T%gO~O!_'`O%i7WO~On7[O!_'`O%i7WO~O#k'iaP'iaR'ia['iaa'iaj'iar'ia!S'ia!l'ia!p'ia#R'ia#n'ia#o'ia#p'ia#q'ia#r'ia#s'ia#t'ia#u'ia#v'ia#x'ia#z'ia#{'ia'z'ia(a'ia(r'ia!k'ia!Y'ia'w'iav'ia!_'ia%i'ia!g'ia~P%-fO#k'kaP'kaR'ka['kaa'kaj'kar'ka!S'ka!l'ka!p'ka#R'ka#n'ka#o'ka#p'ka#q'ka#r'ka#s'ka#t'ka#u'ka#v'ka#x'ka#z'ka#{'ka'z'ka(a'ka(r'ka!k'ka!Y'ka'w'kav'ka!_'ka%i'ka!g'ka~P%.XO#k$|iP$|iR$|i[$|ia$|ij$|ir$|i!S$|i!]$|i!l$|i!p$|i#R$|i#n$|i#o$|i#p$|i#q$|i#r$|i#s$|i#t$|i#u$|i#v$|i#x$|i#z$|i#{$|i'z$|i(a$|i(r$|i!k$|i!Y$|i'w$|i#`$|iv$|i!_$|i%i$|i!g$|i~P#/sO#k%aiP%aiR%ai[%aia%aij%air%ai!S%ai!l%ai!p%ai#R%ai#n%ai#o%ai#p%ai#q%ai#r%ai#s%ai#t%ai#u%ai#v%ai#x%ai#z%ai#{%ai'z%ai(a%ai(r%ai!k%ai!Y%ai'w%aiv%ai!_%ai%i%ai!g%ai~P%5oO#k%ciP%ciR%ci[%cia%cij%cir%ci!S%ci!l%ci!p%ci#R%ci#n%ci#o%ci#p%ci#q%ci#r%ci#s%ci#t%ci#u%ci#v%ci#x%ci#z%ci#{%ci'z%ci(a%ci(r%ci!k%ci!Y%ci'w%civ%ci!_%ci%i%ci!g%ci~P%6bO!]'Ya!k'Ya~P!:tO!].tO!k(ki~O$O#ci!]#ci!^#ci~P#BwOP$[OR#zO!Q#yO!S#{O!l#xO!p$[O(aVO[#mij#mir#mi#R#mi#o#mi#p#mi#q#mi#r#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi$O#mi(r#mi(y#mi(z#mi!]#mi!^#mi~O#n#mi~P%NdO#n<_O~P%NdOP$[OR#zOr<kO!Q#yO!S#{O!l#xO!p$[O#n<_O#o<`O#p<`O#q<`O(aVO[#mij#mi#R#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi$O#mi(r#mi(y#mi(z#mi!]#mi!^#mi~O#r#mi~P&!lO#r<aO~P&!lOP$[OR#zO[<mOj<bOr<kO!Q#yO!S#{O!l#xO!p$[O#R<bO#n<_O#o<`O#p<`O#q<`O#r<aO#s<bO#t<bO#u<lO(aVO#x#mi#z#mi#{#mi$O#mi(r#mi(y#mi(z#mi!]#mi!^#mi~O#v#mi~P&$tOP$[OR#zO[<mOj<bOr<kO!Q#yO!S#{O!l#xO!p$[O#R<bO#n<_O#o<`O#p<`O#q<`O#r<aO#s<bO#t<bO#u<lO#v<cO(aVO(z#}O#z#mi#{#mi$O#mi(r#mi(y#mi!]#mi!^#mi~O#x<eO~P&&uO#x#mi~P&&uO#v<cO~P&$tOP$[OR#zO[<mOj<bOr<kO!Q#yO!S#{O!l#xO!p$[O#R<bO#n<_O#o<`O#p<`O#q<`O#r<aO#s<bO#t<bO#u<lO#v<cO#x<eO(aVO(y#|O(z#}O#{#mi$O#mi(r#mi!]#mi!^#mi~O#z#mi~P&)UO#z<gO~P&)UOa#|y!]#|y'z#|y'w#|y!Y#|y!k#|yv#|y!_#|y%i#|y!g#|y~P!:tO[#mij#mir#mi#R#mi#r#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi$O#mi(r#mi!]#mi!^#mi~OP$[OR#zO!Q#yO!S#{O!l#xO!p$[O#n<_O#o<`O#p<`O#q<`O(aVO(y#mi(z#mi~P&,QOn>^O!Q*OO'y*PO(y$}O(z%POP#miR#mi!S#mi!l#mi!p#mi#n#mi#o#mi#p#mi#q#mi(a#mi~P&,QO#S$dOP(`XR(`X[(`Xj(`Xn(`Xr(`X!Q(`X!S(`X!l(`X!p(`X#R(`X#n(`X#o(`X#p(`X#q(`X#r(`X#s(`X#t(`X#u(`X#v(`X#x(`X#z(`X#{(`X$O(`X'y(`X(a(`X(r(`X(y(`X(z(`X!](`X!^(`X~O$O$Pi!]$Pi!^$Pi~P#BwO$O!ri!^!ri~P$+oOg']a!]']a~P!1WO!^7nO~O!]'da!^'da~P#BwO!Y7oO~P#/sO!g#vO(r'pO!]'ea!k'ea~O!]/pO!k)Oi~O!]/pO!g#vO!k)Oi~Og$|q!]$|q#`$|q$O$|q~P!1WO!Y'ga!]'ga~P#/sO!g7vO~O!]/yO!Y)Pi~P#/sO!]/yO!Y)Pi~O!Y7yO~Oh%VOr8OO!l%eO(r'pO~Oj8QO!g#vO~Or8TO!g#vO(r'pO~O!Q*OO'y*PO(z%POn'ja(y'ja!]'ja#`'ja~Og'ja$O'ja~P&5RO!Q*OO'y*POn'la(y'la(z'la!]'la#`'la~Og'la$O'la~P&5tOg(_q!](_q~P!1WO#`8VOg(_q!](_q~P!1WO!Y8WO~Og%Oq!]%Oq#`%Oq$O%Oq~P!1WOa$oy!]$oy'z$oy'w$oy!Y$oy!k$oyv$oy!_$oy%i$oy!g$oy~P!:tO!g6rO~O!]5[O!_)Qa~O!_'`OP$TaR$Ta[$Taj$Tar$Ta!Q$Ta!S$Ta!]$Ta!l$Ta!p$Ta#R$Ta#n$Ta#o$Ta#p$Ta#q$Ta#r$Ta#s$Ta#t$Ta#u$Ta#v$Ta#x$Ta#z$Ta#{$Ta(a$Ta(r$Ta(y$Ta(z$Ta~O%i7WO~P&8fO%^8[Oa%[i!_%[i'z%[i!]%[i~Oa#cy!]#cy'z#cy'w#cy!Y#cy!k#cyv#cy!_#cy%i#cy!g#cy~P!:tO[8^O~Ob8`O(T+qO(VTO(YUO~O!]1TO!^)Xi~O`8dO~O(e(|O!]'pX!^'pX~O!]5uO!^)Ua~O!^8nO~P%;eO(o!sO~P$&YO#[8oO~O!_1oO~O!_1oO%i8qO~On8tO!_1oO%i8qO~O[8yO!]'sa!^'sa~O!]1zO!^)Vi~O!k8}O~O!k9OO~O!k9RO~O!k9RO~P%[Oa9TO~O!g9UO~O!k9VO~O!](wi!^(wi~P#BwOa%nO#`9_O'z%nO~O!](ty!k(tya(ty'z(ty~P!:tO!](jO!k(sy~O%i9bO~P&8fO!_'`O%i9bO~O#k$|qP$|qR$|q[$|qa$|qj$|qr$|q!S$|q!]$|q!l$|q!p$|q#R$|q#n$|q#o$|q#p$|q#q$|q#r$|q#s$|q#t$|q#u$|q#v$|q#x$|q#z$|q#{$|q'z$|q(a$|q(r$|q!k$|q!Y$|q'w$|q#`$|qv$|q!_$|q%i$|q!g$|q~P#/sO#k'jaP'jaR'ja['jaa'jaj'jar'ja!S'ja!l'ja!p'ja#R'ja#n'ja#o'ja#p'ja#q'ja#r'ja#s'ja#t'ja#u'ja#v'ja#x'ja#z'ja#{'ja'z'ja(a'ja(r'ja!k'ja!Y'ja'w'jav'ja!_'ja%i'ja!g'ja~P&5RO#k'laP'laR'la['laa'laj'lar'la!S'la!l'la!p'la#R'la#n'la#o'la#p'la#q'la#r'la#s'la#t'la#u'la#v'la#x'la#z'la#{'la'z'la(a'la(r'la!k'la!Y'la'w'lav'la!_'la%i'la!g'la~P&5tO#k%OqP%OqR%Oq[%Oqa%Oqj%Oqr%Oq!S%Oq!]%Oq!l%Oq!p%Oq#R%Oq#n%Oq#o%Oq#p%Oq#q%Oq#r%Oq#s%Oq#t%Oq#u%Oq#v%Oq#x%Oq#z%Oq#{%Oq'z%Oq(a%Oq(r%Oq!k%Oq!Y%Oq'w%Oq#`%Oqv%Oq!_%Oq%i%Oq!g%Oq~P#/sO!]'Yi!k'Yi~P!:tO$O#cq!]#cq!^#cq~P#BwO(y$}OP%aaR%aa[%aaj%aar%aa!S%aa!l%aa!p%aa#R%aa#n%aa#o%aa#p%aa#q%aa#r%aa#s%aa#t%aa#u%aa#v%aa#x%aa#z%aa#{%aa$O%aa(a%aa(r%aa!]%aa!^%aa~On%aa!Q%aa'y%aa(z%aa~P&IyO(z%POP%caR%ca[%caj%car%ca!S%ca!l%ca!p%ca#R%ca#n%ca#o%ca#p%ca#q%ca#r%ca#s%ca#t%ca#u%ca#v%ca#x%ca#z%ca#{%ca$O%ca(a%ca(r%ca!]%ca!^%ca~On%ca!Q%ca'y%ca(y%ca~P&LQOn>^O!Q*OO'y*PO(z%PO~P&IyOn>^O!Q*OO'y*PO(y$}O~P&LQOR0kO!Q0kO!S0lO#S$dOP}a[}aj}an}ar}a!l}a!p}a#R}a#n}a#o}a#p}a#q}a#r}a#s}a#t}a#u}a#v}a#x}a#z}a#{}a$O}a'y}a(a}a(r}a(y}a(z}a!]}a!^}a~O!Q*OO'y*POP$saR$sa[$saj$san$sar$sa!S$sa!l$sa!p$sa#R$sa#n$sa#o$sa#p$sa#q$sa#r$sa#s$sa#t$sa#u$sa#v$sa#x$sa#z$sa#{$sa$O$sa(a$sa(r$sa(y$sa(z$sa!]$sa!^$sa~O!Q*OO'y*POP$uaR$ua[$uaj$uan$uar$ua!S$ua!l$ua!p$ua#R$ua#n$ua#o$ua#p$ua#q$ua#r$ua#s$ua#t$ua#u$ua#v$ua#x$ua#z$ua#{$ua$O$ua(a$ua(r$ua(y$ua(z$ua!]$ua!^$ua~On>^O!Q*OO'y*PO(y$}O(z%PO~OP%TaR%Ta[%Taj%Tar%Ta!S%Ta!l%Ta!p%Ta#R%Ta#n%Ta#o%Ta#p%Ta#q%Ta#r%Ta#s%Ta#t%Ta#u%Ta#v%Ta#x%Ta#z%Ta#{%Ta$O%Ta(a%Ta(r%Ta!]%Ta!^%Ta~P''VO$O$mq!]$mq!^$mq~P#BwO$O$oq!]$oq!^$oq~P#BwO!^9oO~O$O9pO~P!1WO!g#vO!]'ei!k'ei~O!g#vO(r'pO!]'ei!k'ei~O!]/pO!k)Oq~O!Y'gi!]'gi~P#/sO!]/yO!Y)Pq~Or9wO!g#vO(r'pO~O[9yO!Y9xO~P#/sO!Y9xO~Oj:PO!g#vO~Og(_y!](_y~P!1WO!]'na!_'na~P#/sOa%[q!_%[q'z%[q!]%[q~P#/sO[:UO~O!]1TO!^)Xq~O`:YO~O#`:ZO!]'pa!^'pa~O!]5uO!^)Ui~P#BwO!S:]O~O!_1oO%i:`O~O(VTO(YUO(e:eO~O!]1zO!^)Vq~O!k:hO~O!k:iO~O!k:jO~O!k:jO~P%[O#`:mO!]#hy!^#hy~O!]#hy!^#hy~P#BwO%i:rO~P&8fO!_'`O%i:rO~O$O#|y!]#|y!^#|y~P#BwOP$|iR$|i[$|ij$|ir$|i!S$|i!l$|i!p$|i#R$|i#n$|i#o$|i#p$|i#q$|i#r$|i#s$|i#t$|i#u$|i#v$|i#x$|i#z$|i#{$|i$O$|i(a$|i(r$|i!]$|i!^$|i~P''VO!Q*OO'y*PO(z%POP'iaR'ia['iaj'ian'iar'ia!S'ia!l'ia!p'ia#R'ia#n'ia#o'ia#p'ia#q'ia#r'ia#s'ia#t'ia#u'ia#v'ia#x'ia#z'ia#{'ia$O'ia(a'ia(r'ia(y'ia!]'ia!^'ia~O!Q*OO'y*POP'kaR'ka['kaj'kan'kar'ka!S'ka!l'ka!p'ka#R'ka#n'ka#o'ka#p'ka#q'ka#r'ka#s'ka#t'ka#u'ka#v'ka#x'ka#z'ka#{'ka$O'ka(a'ka(r'ka(y'ka(z'ka!]'ka!^'ka~O(y$}OP%aiR%ai[%aij%ain%air%ai!Q%ai!S%ai!l%ai!p%ai#R%ai#n%ai#o%ai#p%ai#q%ai#r%ai#s%ai#t%ai#u%ai#v%ai#x%ai#z%ai#{%ai$O%ai'y%ai(a%ai(r%ai(z%ai!]%ai!^%ai~O(z%POP%ciR%ci[%cij%cin%cir%ci!Q%ci!S%ci!l%ci!p%ci#R%ci#n%ci#o%ci#p%ci#q%ci#r%ci#s%ci#t%ci#u%ci#v%ci#x%ci#z%ci#{%ci$O%ci'y%ci(a%ci(r%ci(y%ci!]%ci!^%ci~O$O$oy!]$oy!^$oy~P#BwO$O#cy!]#cy!^#cy~P#BwO!g#vO!]'eq!k'eq~O!]/pO!k)Oy~O!Y'gq!]'gq~P#/sOr:|O!g#vO(r'pO~O[;QO!Y;PO~P#/sO!Y;PO~Og(_!R!](_!R~P!1WOa%[y!_%[y'z%[y!]%[y~P#/sO!]1TO!^)Xy~O!]5uO!^)Uq~O(T;XO~O!_1oO%i;[O~O!k;_O~O%i;dO~P&8fOP$|qR$|q[$|qj$|qr$|q!S$|q!l$|q!p$|q#R$|q#n$|q#o$|q#p$|q#q$|q#r$|q#s$|q#t$|q#u$|q#v$|q#x$|q#z$|q#{$|q$O$|q(a$|q(r$|q!]$|q!^$|q~P''VO!Q*OO'y*PO(z%POP'jaR'ja['jaj'jan'jar'ja!S'ja!l'ja!p'ja#R'ja#n'ja#o'ja#p'ja#q'ja#r'ja#s'ja#t'ja#u'ja#v'ja#x'ja#z'ja#{'ja$O'ja(a'ja(r'ja(y'ja!]'ja!^'ja~O!Q*OO'y*POP'laR'la['laj'lan'lar'la!S'la!l'la!p'la#R'la#n'la#o'la#p'la#q'la#r'la#s'la#t'la#u'la#v'la#x'la#z'la#{'la$O'la(a'la(r'la(y'la(z'la!]'la!^'la~OP%OqR%Oq[%Oqj%Oqr%Oq!S%Oq!l%Oq!p%Oq#R%Oq#n%Oq#o%Oq#p%Oq#q%Oq#r%Oq#s%Oq#t%Oq#u%Oq#v%Oq#x%Oq#z%Oq#{%Oq$O%Oq(a%Oq(r%Oq!]%Oq!^%Oq~P''VOg%e!Z!]%e!Z#`%e!Z$O%e!Z~P!1WO!Y;hO~P#/sOr;iO!g#vO(r'pO~O[;kO!Y;hO~P#/sO!]'pq!^'pq~P#BwO!]#h!Z!^#h!Z~P#BwO#k%e!ZP%e!ZR%e!Z[%e!Za%e!Zj%e!Zr%e!Z!S%e!Z!]%e!Z!l%e!Z!p%e!Z#R%e!Z#n%e!Z#o%e!Z#p%e!Z#q%e!Z#r%e!Z#s%e!Z#t%e!Z#u%e!Z#v%e!Z#x%e!Z#z%e!Z#{%e!Z'z%e!Z(a%e!Z(r%e!Z!k%e!Z!Y%e!Z'w%e!Z#`%e!Zv%e!Z!_%e!Z%i%e!Z!g%e!Z~P#/sOr;tO!g#vO(r'pO~O!Y;uO~P#/sOr;|O!g#vO(r'pO~O!Y;}O~P#/sOP%e!ZR%e!Z[%e!Zj%e!Zr%e!Z!S%e!Z!l%e!Z!p%e!Z#R%e!Z#n%e!Z#o%e!Z#p%e!Z#q%e!Z#r%e!Z#s%e!Z#t%e!Z#u%e!Z#v%e!Z#x%e!Z#z%e!Z#{%e!Z$O%e!Z(a%e!Z(r%e!Z!]%e!Z!^%e!Z~P''VOr<QO!g#vO(r'pO~Ov(fX~P1qO!Q%rO~P!)[O(U!lO~P!)[O!YfX!]fX#`fX~P%2OOP]XR]X[]Xj]Xr]X!Q]X!S]X!]]X!]fX!l]X!p]X#R]X#S]X#`]X#`fX#kfX#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#v]X#x]X#z]X#{]X$Q]X(a]X(r]X(y]X(z]X~O!gfX!k]X!kfX(rfX~P'LTOP<UOQ<UOSfOd>ROe!iOpkOr<UOskOtkOzkO|<UO!O<UO!SWO!WkO!XkO!_XO!i<XO!lZO!o<UO!p<UO!q<UO!s<YO!u<]O!x!hO$W!kO$n>PO(T)]O(VTO(YUO(aVO(o[O~O!]<iO!^$qa~Oh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O<tO!S${O!_$|O!i>WO!l$xO#j<zO$W%`O$t<vO$v<xO$y%aO(T(vO(VTO(YUO(a$uO(y$}O(z%PO~Ol)dO~P(!yOr!eX(r!eX~P#!iOr(jX(r(jX~P##[O!^]X!^fX~P'LTO!YfX!Y$zX!]fX!]$zX#`fX~P!0SO#k<^O~O!g#vO#k<^O~O#`<nO~Oj<bO~O#`=OO!](wX!^(wX~O#`<nO!](uX!^(uX~O#k=PO~Og=RO~P!1WO#k=XO~O#k=YO~Og=RO(T&ZO~O!g#vO#k=ZO~O!g#vO#k=PO~O$O=[O~P#BwO#k=]O~O#k=^O~O#k=cO~O#k=dO~O#k=eO~O#k=fO~O$O=gO~P!1WO$O=hO~P!1WOl=sO~P7eOk#S#T#U#W#X#[#i#j#u$n$t$v$y%]%^%h%i%j%q%s%v%w%y%{~(OT#o!X'|(U#ps#n#qr!Q'}$]'}(T$_(e~",goto:"$9Y)]PPPPPP)^PP)aP)rP+W/]PPPP6mPP7TPP=QPPP@tPA^PA^PPPA^PCfPA^PA^PA^PCjPCoPD^PIWPPPI[PPPPI[L_PPPLeMVPI[PI[PP! eI[PPPI[PI[P!#lI[P!'S!(X!(bP!)U!)Y!)U!,gPPPPPPP!-W!(XPP!-h!/YP!2iI[I[!2n!5z!:h!:h!>gPPP!>oI[PPPPPPPPP!BOP!C]PPI[!DnPI[PI[I[I[I[I[PI[!FQP!I[P!LbP!Lf!Lp!Lt!LtP!IXP!Lx!LxP#!OP#!SI[PI[#!Y#%_CjA^PA^PA^A^P#&lA^A^#)OA^#+vA^#.SA^A^#.r#1W#1W#1]#1f#1W#1qPP#1WPA^#2ZA^#6YA^A^6mPPP#:_PPP#:x#:xP#:xP#;`#:xPP#;fP#;]P#;]#;y#;]#<e#<k#<n)aP#<q)aP#<z#<z#<zP)aP)aP)aP)aPP)aP#=Q#=TP#=T)aP#=XP#=[P)aP)aP)aP)aP)aP)a)aPP#=b#=h#=s#=y#>P#>V#>]#>k#>q#>{#?R#?]#?c#?s#?y#@k#@}#AT#AZ#Ai#BO#Cs#DR#DY#Et#FS#Gt#HS#HY#H`#Hf#Hp#Hv#H|#IW#Ij#IpPPPPPPPPPPP#IvPPPPPPP#Jk#Mx$ b$ i$ qPPP$']P$'f$*_$0x$0{$1O$1}$2Q$2X$2aP$2g$2jP$3W$3[$4S$5b$5g$5}PP$6S$6Y$6^$6a$6e$6i$7e$7|$8e$8i$8l$8o$8y$8|$9Q$9UR!|RoqOXst!Z#d%m&r&t&u&w,s,x2[2_Y!vQ'`-e1o5{Q%tvQ%|yQ&T|Q&j!VS'W!e-]Q'f!iS'l!r!yU*k$|*Z*oQ+o%}S+|&V&WQ,d&dQ-c'_Q-m'gQ-u'mQ0[*qQ1b,OQ1y,eR<{<Y%SdOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+],p,s,x-i-q.P.V.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3l4z6T6e6f6i6|8t9T9_S#q]<V!r)_$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SU+P%]<s<tQ+t&PQ,f&gQ,m&oQ0x+gQ0}+iQ1Y+uQ2R,kQ3`.gQ5`0|Q5f1TQ6[1zQ7Y3dQ8`5gR9e7['QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>S!S!nQ!r!v!y!z$|'W'_'`'l'm'n*k*o*q*r-]-c-e-u0[0_1o5{5}%[$ti#v$b$c$d$x${%O%Q%^%_%c)y*R*T*V*Y*a*g*w*x+f+i,S,V.f/P/d/m/x/y/{0`0b0i0j0o1f1i1q3c4^4_4j4o5Q5[5_6S7W7v8Q8V8[8q9b9p9y:P:`:r;Q;[;d;k<l<m<o<p<q<r<u<v<w<x<y<z=S=T=U=V=X=Y=]=^=_=`=a=b=c=d=g=h>P>X>Y>]>^Q&X|Q'U!eS'[%i-`Q+t&PQ,P&WQ,f&gQ0n+SQ1Y+uQ1_+{Q2Q,jQ2R,kQ5f1TQ5o1aQ6[1zQ6_1|Q6`2PQ8`5gQ8c5lQ8|6bQ:X8dQ:f8yQ;V:YR<}*ZrnOXst!V!Z#d%m&i&r&t&u&w,s,x2[2_R,h&k&z^OPXYstuvwz!Z!`!g!j!o#S#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'b'r(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>R>S[#]WZ#W#Z'X(T!b%jm#h#i#l$x%e%h(^(h(i(j*Y*^*b+Z+[+^,o-V.T.Z.[.]._/m/p2d3[3]4a6r7TQ%wxQ%{yW&Q|&V&W,OQ&_!TQ'c!hQ'e!iQ(q#sS+n%|%}Q+r&PQ,_&bQ,c&dS-l'f'gQ.i(rQ1R+oQ1X+uQ1Z+vQ1^+zQ1t,`S1x,d,eQ2|-mQ5e1TQ5i1WQ5n1`Q6Z1yQ8_5gQ8b5kQ8f5pQ:T8^R;T:U!U$zi$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>Y!^%yy!i!u%{%|%}'V'e'f'g'k'u*j+n+o-Y-l-m-t0R0U1R2u2|3T4r4s4v7}9{Q+h%wQ,T&[Q,W&]Q,b&dQ.h(qQ1s,_U1w,c,d,eQ3e.iQ6U1tS6Y1x1yQ8x6Z#f>T#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^o>U<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=hW%Ti%V*y>PS&[!Q&iQ&]!RQ&^!SU*}%[%d=sR,R&Y%]%Si#v$b$c$d$x${%O%Q%^%_%c)y*R*T*V*Y*a*g*w*x+f+i,S,V.f/P/d/m/x/y/{0`0b0i0j0o1f1i1q3c4^4_4j4o5Q5[5_6S7W7v8Q8V8[8q9b9p9y:P:`:r;Q;[;d;k<l<m<o<p<q<r<u<v<w<x<y<z=S=T=U=V=X=Y=]=^=_=`=a=b=c=d=g=h>P>X>Y>]>^T)z$u){V+P%]<s<tW'[!e%i*Z-`S(}#y#zQ+c%rQ+y&SS.b(m(nQ1j,XQ5T0kR8i5u'QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>S$i$^c#Y#e%q%s%u(S(Y(t(y)R)S)T)U)V)W)X)Y)Z)[)^)`)b)g)q+d+x-Z-x-}.S.U.s.v.z.|.}/O/b0p2k2n3O3V3k3p3q3r3s3t3u3v3w3x3y3z3{3|4P4Q4X5X5c6u6{7Q7a7b7k7l8k9X9]9g9m9n:o;W;`<W=vT#TV#U'RkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SQ'Y!eR2q-]!W!nQ!e!r!v!y!z$|'W'_'`'l'm'n*Z*k*o*q*r-]-c-e-u0[0_1o5{5}R1l,ZnqOXst!Z#d%m&r&t&u&w,s,x2[2_Q&y!^Q'v!xS(s#u<^Q+l%zQ,]&_Q,^&aQ-j'dQ-w'oS.r(x=PS0q+X=ZQ1P+mQ1n,[Q2c,zQ2e,{Q2m-WQ2z-kQ2}-oS5Y0r=eQ5a1QS5d1S=fQ6t2oQ6x2{Q6}3SQ8]5bQ9Y6vQ9Z6yQ9^7OR:l9V$d$]c#Y#e%s%u(S(Y(t(y)R)S)T)U)V)W)X)Y)Z)[)^)`)b)g)q+d+x-Z-x-}.S.U.s.v.z.}/O/b0p2k2n3O3V3k3p3q3r3s3t3u3v3w3x3y3z3{3|4P4Q4X5X5c6u6{7Q7a7b7k7l8k9X9]9g9m9n:o;W;`<W=vS(o#p'iQ)P#zS+b%q.|S.c(n(pR3^.d'QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SS#q]<VQ&t!XQ&u!YQ&w![Q&x!]R2Z,vQ'a!hQ+e%wQ-h'cS.e(q+hQ2x-gW3b.h.i0w0yQ6w2yW7U3_3a3e5^U9a7V7X7ZU:q9c9d9fS;b:p:sQ;p;cR;x;qU!wQ'`-eT5y1o5{!Q_OXZ`st!V!Z#d#h%e%m&i&k&r&t&u&w(j,s,x.[2[2_]!pQ!r'`-e1o5{T#q]<V%^{OPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&o&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+]+g,p,s,x-i-q.P.V.g.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3d3l4z6T6e6f6i6|7[8t9T9_S(}#y#zS.b(m(n!s=l$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SU$fd)_,mS(p#p'iU*v%R(w4OU0m+O.n7gQ5^0xQ7V3`Q9d7YR:s9em!tQ!r!v!y!z'`'l'm'n-e-u1o5{5}Q't!uS(f#g2US-s'k'wQ/s*]Q0R*jQ3U-vQ4f/tQ4r0TQ4s0UQ4x0^Q7r4`S7}4t4vS8R4y4{Q9r7sQ9v7yQ9{8OQ:Q8TS:{9w9xS;g:|;PS;s;h;iS;{;t;uS<P;|;}R<S<QQ#wbQ's!uS(e#g2US(g#m+WQ+Y%fQ+j%xQ+p&OU-r'k't'wQ.W(fU/r*]*`/wQ0S*jQ0V*lQ1O+kQ1u,aS3R-s-vQ3Z.`S4e/s/tQ4n0PS4q0R0^Q4u0WQ6W1vQ7P3US7q4`4bQ7u4fU7|4r4x4{Q8P4wQ8v6XS9q7r7sQ9u7yQ9}8RQ:O8SQ:c8wQ:y9rS:z9v9xQ;S:QQ;^:dS;f:{;PS;r;g;hS;z;s;uS<O;{;}Q<R<PQ<T<SQ=o=jQ={=tR=|=uV!wQ'`-e%^aOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&o&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+]+g,p,s,x-i-q.P.V.g.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3d3l4z6T6e6f6i6|7[8t9T9_S#wz!j!r=i$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SR=o>R%^bOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&o&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+]+g,p,s,x-i-q.P.V.g.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3d3l4z6T6e6f6i6|7[8t9T9_Q%fj!^%xy!i!u%{%|%}'V'e'f'g'k'u*j+n+o-Y-l-m-t0R0U1R2u2|3T4r4s4v7}9{S&Oz!jQ+k%yQ,a&dW1v,b,c,d,eU6X1w1x1yS8w6Y6ZQ:d8x!r=j$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SQ=t>QR=u>R%QeOPXYstuvw!Z!`!g!o#S#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&r&t&u&w&{'T'b'r(V(](d(x(z)O)}*i+X+]+g,p,s,x-i-q.P.V.g.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3d3l4z6T6e6f6i6|7[8t9T9_Y#bWZ#W#Z(T!b%jm#h#i#l$x%e%h(^(h(i(j*Y*^*b+Z+[+^,o-V.T.Z.[.]._/m/p2d3[3]4a6r7TQ,n&o!p=k$Z$n)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SR=n'XU']!e%i*ZR2s-`%SdOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+],p,s,x-i-q.P.V.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3l4z6T6e6f6i6|8t9T9_!r)_$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SQ,m&oQ0x+gQ3`.gQ7Y3dR9e7[!b$Tc#Y%q(S(Y(t(y)Z)[)`)g+x-x-}.S.U.s.v/b0p3O3V3k3{5X5c6{7Q7a9]:o<W!P<d)^)q-Z.|2k2n3p3y3z4P4X6u7b7k7l8k9X9g9m9n;W;`=v!f$Vc#Y%q(S(Y(t(y)W)X)Z)[)`)g+x-x-}.S.U.s.v/b0p3O3V3k3{5X5c6{7Q7a9]:o<W!T<f)^)q-Z.|2k2n3p3v3w3y3z4P4X6u7b7k7l8k9X9g9m9n;W;`=v!^$Zc#Y%q(S(Y(t(y)`)g+x-x-}.S.U.s.v/b0p3O3V3k3{5X5c6{7Q7a9]:o<WQ4_/kz>S)^)q-Z.|2k2n3p4P4X6u7b7k7l8k9X9g9m9n;W;`=vQ>X>ZR>Y>['QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SS$oh$pR4U/U'XgOPWXYZhstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n$p%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/U/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>ST$kf$qQ$ifS)j$l)nR)v$qT$jf$qT)l$l)n'XhOPWXYZhstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n$p%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/U/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>ST$oh$pQ$rhR)u$p%^jOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&o&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+]+g,p,s,x-i-q.P.V.g.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3d3l4z6T6e6f6i6|7[8t9T9_!s>Q$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>S#glOPXZst!Z!`!o#S#d#o#{$n%m&k&n&o&r&t&u&w&{'T'b)O)s*i+]+g,p,s,x-i.g/V/n0]0l1r2S2T2V2X2[2_2a3d4T4z6T6e6f6i7[8t9T!U%Ri$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>Y#f(w#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^Q+T%aQ/c*Oo4O<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=h!U$yi$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>YQ*c$zU*l$|*Z*oQ+U%bQ0W*m#f=q#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^n=r<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=hQ=w>TQ=x>UQ=y>VR=z>W!U%Ri$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>Y#f(w#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^o4O<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=hnoOXst!Z#d%m&r&t&u&w,s,x2[2_S*f${*YQ-R'OQ-S'QR4i/y%[%Si#v$b$c$d$x${%O%Q%^%_%c)y*R*T*V*Y*a*g*w*x+f+i,S,V.f/P/d/m/x/y/{0`0b0i0j0o1f1i1q3c4^4_4j4o5Q5[5_6S7W7v8Q8V8[8q9b9p9y:P:`:r;Q;[;d;k<l<m<o<p<q<r<u<v<w<x<y<z=S=T=U=V=X=Y=]=^=_=`=a=b=c=d=g=h>P>X>Y>]>^Q,U&]Q1h,WQ5s1gR8h5tV*n$|*Z*oU*n$|*Z*oT5z1o5{S0P*i/nQ4w0]T8S4z:]Q+j%xQ0V*lQ1O+kQ1u,aQ6W1vQ8v6XQ:c8wR;^:d!U%Oi$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>Yx*R$v)e*S*u+V/v0d0e4R4g5R5S5W7p8U:R:x=p=}>OS0`*t0a#f<o#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^n<p<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=h!d=S(u)c*[*e.j.m.q/_/k/|0v1e3h4[4h4l5r7]7`7w7z8X8Z9t9|:S:};R;e;j;v>Z>[`=T3}7c7f7j9h:t:w;yS=_.l3iT=`7e9k!U%Qi$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>Y|*T$v)e*U*t+V/g/v0d0e4R4g4|5R5S5W7p8U:R:x=p=}>OS0b*u0c#f<q#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^n<r<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=h!h=U(u)c*[*e.k.l.q/_/k/|0v1e3f3h4[4h4l5r7]7^7`7w7z8X8Z9t9|:S:};R;e;j;v>Z>[d=V3}7d7e7j9h9i:t:u:w;yS=a.m3jT=b7f9lrnOXst!V!Z#d%m&i&r&t&u&w,s,x2[2_Q&f!UR,p&ornOXst!V!Z#d%m&i&r&t&u&w,s,x2[2_R&f!UQ,Y&^R1d,RsnOXst!V!Z#d%m&i&r&t&u&w,s,x2[2_Q1p,_S6R1s1tU8p6P6Q6US:_8r8sS;Y:^:aQ;m;ZR;w;nQ&m!VR,i&iR6_1|R:f8yW&Q|&V&W,OR1Z+vQ&r!WR,s&sR,y&xT2],x2_R,}&yQ,|&yR2f,}Q'y!{R-y'ySsOtQ#dXT%ps#dQ#OTR'{#OQ#RUR'}#RQ){$uR/`){Q#UVR(Q#UQ#XWU(W#X(X.QQ(X#YR.Q(YQ-^'YR2r-^Q.u(yS3m.u3nR3n.vQ-e'`R2v-eY!rQ'`-e1o5{R'j!rQ/Q)eR4S/QU#_W%h*YU(_#_(`.RQ(`#`R.R(ZQ-a']R2t-at`OXst!V!Z#d%m&i&k&r&t&u&w,s,x2[2_S#hZ%eU#r`#h.[R.[(jQ(k#jQ.X(gW.a(k.X3X7RQ3X.YR7R3YQ)n$lR/W)nQ$phR)t$pQ$`cU)a$`-|<jQ-|<WR<j)qQ/q*]W4c/q4d7t9sU4d/r/s/tS7t4e4fR9s7u$e*Q$v(u)c)e*[*e*t*u+Q+R+V.l.m.o.p.q/_/g/i/k/v/|0d0e0v1e3f3g3h3}4R4[4g4h4l4|5O5R5S5W5r7]7^7_7`7e7f7h7i7j7p7w7z8U8X8Z9h9i9j9t9|:R:S:t:u:v:w:x:};R;e;j;v;y=p=}>O>Z>[Q/z*eU4k/z4m7xQ4m/|R7x4lS*o$|*ZR0Y*ox*S$v)e*t*u+V/v0d0e4R4g5R5S5W7p8U:R:x=p=}>O!d.j(u)c*[*e.l.m.q/_/k/|0v1e3h4[4h4l5r7]7`7w7z8X8Z9t9|:S:};R;e;j;v>Z>[U/h*S.j7ca7c3}7e7f7j9h:t:w;yQ0a*tQ3i.lU4}0a3i9kR9k7e|*U$v)e*t*u+V/g/v0d0e4R4g4|5R5S5W7p8U:R:x=p=}>O!h.k(u)c*[*e.l.m.q/_/k/|0v1e3f3h4[4h4l5r7]7^7`7w7z8X8Z9t9|:S:};R;e;j;v>Z>[U/j*U.k7de7d3}7e7f7j9h9i:t:u:w;yQ0c*uQ3j.mU5P0c3j9lR9l7fQ*z%UR0g*zQ5]0vR8Y5]Q+_%kR0u+_Q5v1jS8j5v:[R:[8kQ,[&_R1m,[Q5{1oR8m5{Q1{,fS6]1{8zR8z6_Q1U+rW5h1U5j8a:VQ5j1XQ8a5iR:V8bQ+w&QR1[+wQ2_,xR6m2_YrOXst#dQ&v!ZQ+a%mQ,r&rQ,t&tQ,u&uQ,w&wQ2Y,sS2],x2_R6l2[Q%opQ&z!_Q&}!aQ'P!bQ'R!cQ'q!uQ+`%lQ+l%zQ,Q&XQ,h&mQ-P&|W-p'k's't'wQ-w'oQ0X*nQ1P+mQ1c,PS2O,i,lQ2g-OQ2h-RQ2i-SQ2}-oW3P-r-s-v-xQ5a1QQ5m1_Q5q1eQ6V1uQ6a2QQ6k2ZU6z3O3R3UQ6}3SQ8]5bQ8e5oQ8g5rQ8l5zQ8u6WQ8{6`S9[6{7PQ9^7OQ:W8cQ:b8vQ:g8|Q:n9]Q;U:XQ;]:cQ;a:oQ;l;VR;o;^Q%zyQ'd!iQ'o!uU+m%{%|%}Q-W'VU-k'e'f'gS-o'k'uQ0Q*jS1Q+n+oQ2o-YS2{-l-mQ3S-tS4p0R0UQ5b1RQ6v2uQ6y2|Q7O3TU7{4r4s4vQ9z7}R;O9{S$wi>PR*{%VU%Ui%V>PR0f*yQ$viS(u#v+iS)c$b$cQ)e$dQ*[$xS*e${*YQ*t%OQ*u%QQ+Q%^Q+R%_Q+V%cQ.l<oQ.m<qQ.o<uQ.p<wQ.q<yQ/_)yQ/g*RQ/i*TQ/k*VQ/v*aS/|*g/mQ0d*wQ0e*xl0v+f,V.f1i1q3c6S7W8q9b:`:r;[;dQ1e,SQ3f=SQ3g=UQ3h=XS3}<l<mQ4R/PS4[/d4^Q4g/xQ4h/yQ4l/{Q4|0`Q5O0bQ5R0iQ5S0jQ5W0oQ5r1fQ7]=]Q7^=_Q7_=aQ7`=cQ7e<pQ7f<rQ7h<vQ7i<xQ7j<zQ7p4_Q7w4jQ7z4oQ8U5QQ8X5[Q8Z5_Q9h=YQ9i=TQ9j=VQ9t7vQ9|8QQ:R8VQ:S8[Q:t=^Q:u=`Q:v=bQ:w=dQ:x9pQ:}9yQ;R:PQ;e=gQ;j;QQ;v;kQ;y=hQ=p>PQ=}>XQ>O>YQ>Z>]R>[>^Q+O%]Q.n<sR7g<tnpOXst!Z#d%m&r&t&u&w,s,x2[2_Q!fPS#fZ#oQ&|!`W'h!o*i0]4zQ(P#SQ)Q#{Q)r$nS,l&k&nQ,q&oQ-O&{S-T'T/nQ-g'bQ.x)OQ/[)sQ0s+]Q0y+gQ2W,pQ2y-iQ3a.gQ4W/VQ5U0lQ6Q1rQ6c2SQ6d2TQ6h2VQ6j2XQ6o2aQ7Z3dQ7m4TQ8s6TQ9P6eQ9Q6fQ9S6iQ9f7[Q:a8tR:k9T#[cOPXZst!Z!`!o#d#o#{%m&k&n&o&r&t&u&w&{'T'b)O*i+]+g,p,s,x-i.g/n0]0l1r2S2T2V2X2[2_2a3d4z6T6e6f6i7[8t9TQ#YWQ#eYQ%quQ%svS%uw!gS(S#W(VQ(Y#ZQ(t#uQ(y#xQ)R$OQ)S$PQ)T$QQ)U$RQ)V$SQ)W$TQ)X$UQ)Y$VQ)Z$WQ)[$XQ)^$ZQ)`$_Q)b$aQ)g$eW)q$n)s/V4TQ+d%tQ+x&RS-Z'X2pQ-x'rS-}(T.PQ.S(]Q.U(dQ.s(xQ.v(zQ.z<UQ.|<XQ.}<YQ/O<]Q/b)}Q0p+XQ2k-UQ2n-XQ3O-qQ3V.VQ3k.tQ3p<^Q3q<_Q3r<`Q3s<aQ3t<bQ3u<cQ3v<dQ3w<eQ3x<fQ3y<gQ3z<hQ3{.{Q3|<kQ4P<nQ4Q<{Q4X<iQ5X0rQ5c1SQ6u=OQ6{3QQ7Q3WQ7a3lQ7b=PQ7k=RQ7l=ZQ8k5wQ9X6sQ9]6|Q9g=[Q9m=eQ9n=fQ:o9_Q;W:ZQ;`:mQ<W#SR=v>SR#[WR'Z!el!tQ!r!v!y!z'`'l'm'n-e-u1o5{5}S'V!e-]U*j$|*Z*oS-Y'W'_S0U*k*qQ0^*rQ2u-cQ4v0[R4{0_R({#xQ!fQT-d'`-e]!qQ!r'`-e1o5{Q#p]R'i<VR)f$dY!uQ'`-e1o5{Q'k!rS'u!v!yS'w!z5}S-t'l'mQ-v'nR3T-uT#kZ%eS#jZ%eS%km,oU(g#h#i#lS.Y(h(iQ.^(jQ0t+^Q3Y.ZU3Z.[.]._S7S3[3]R9`7Td#^W#W#Z%h(T(^*Y+Z.T/mr#gZm#h#i#l%e(h(i(j+^.Z.[.]._3[3]7TS*]$x*bQ/t*^Q2U,oQ2l-VQ4`/pQ6q2dQ7s4aQ9W6rT=m'X+[V#aW%h*YU#`W%h*YS(U#W(^U(Z#Z+Z/mS-['X+[T.O(T.TV'^!e%i*ZQ$lfR)x$qT)m$l)nR4V/UT*_$x*bT*h${*YQ0w+fQ1g,VQ3_.fQ5t1iQ6P1qQ7X3cQ8r6SQ9c7WQ:^8qQ:p9bQ;Z:`Q;c:rQ;n;[R;q;dnqOXst!Z#d%m&r&t&u&w,s,x2[2_Q&l!VR,h&itmOXst!U!V!Z#d%m&i&r&t&u&w,s,x2[2_R,o&oT%lm,oR1k,XR,g&gQ&U|S+}&V&WR1^,OR+s&PT&p!W&sT&q!W&sT2^,x2_",nodeNames:"⚠ ArithOp ArithOp ?. JSXStartTag LineComment BlockComment Script Hashbang ExportDeclaration export Star as VariableName String Escape from ; default FunctionDeclaration async function VariableDefinition > < TypeParamList in out const TypeDefinition extends ThisType this LiteralType ArithOp Number BooleanLiteral TemplateType InterpolationEnd Interpolation InterpolationStart NullType null VoidType void TypeofType typeof MemberExpression . PropertyName [ TemplateString Escape Interpolation super RegExp ] ArrayExpression Spread , } { ObjectExpression Property async get set PropertyDefinition Block : NewTarget new NewExpression ) ( ArgList UnaryExpression delete LogicOp BitOp YieldExpression yield AwaitExpression await ParenthesizedExpression ClassExpression class ClassBody MethodDeclaration Decorator @ MemberExpression PrivatePropertyName CallExpression TypeArgList CompareOp < declare Privacy static abstract override PrivatePropertyDefinition PropertyDeclaration readonly accessor Optional TypeAnnotation Equals StaticBlock FunctionExpression ArrowFunction ParamList ParamList ArrayPattern ObjectPattern PatternProperty Privacy readonly Arrow MemberExpression BinaryExpression ArithOp ArithOp ArithOp ArithOp BitOp CompareOp instanceof satisfies CompareOp BitOp BitOp BitOp LogicOp LogicOp ConditionalExpression LogicOp LogicOp AssignmentExpression UpdateOp PostfixExpression CallExpression InstantiationExpression TaggedTemplateExpression DynamicImport import ImportMeta JSXElement JSXSelfCloseEndTag JSXSelfClosingTag JSXIdentifier JSXBuiltin JSXIdentifier JSXNamespacedName JSXMemberExpression JSXSpreadAttribute JSXAttribute JSXAttributeValue JSXEscape JSXEndTag JSXOpenTag JSXFragmentTag JSXText JSXEscape JSXStartCloseTag JSXCloseTag PrefixCast < ArrowFunction TypeParamList SequenceExpression InstantiationExpression KeyofType keyof UniqueType unique ImportType InferredType infer TypeName ParenthesizedType FunctionSignature ParamList NewSignature IndexedType TupleType Label ArrayType ReadonlyType ObjectType MethodType PropertyType IndexSignature PropertyDefinition CallSignature TypePredicate asserts is NewSignature new UnionType LogicOp IntersectionType LogicOp ConditionalType ParameterizedType ClassDeclaration abstract implements type VariableDeclaration let var using TypeAliasDeclaration InterfaceDeclaration interface EnumDeclaration enum EnumBody NamespaceDeclaration namespace module AmbientDeclaration declare GlobalDeclaration global ClassDeclaration ClassBody AmbientFunctionDeclaration ExportGroup VariableName VariableName ImportDeclaration defer ImportGroup ForStatement for ForSpec ForInSpec ForOfSpec of WhileStatement while WithStatement with DoStatement do IfStatement if else SwitchStatement switch SwitchBody CaseLabel case DefaultLabel TryStatement try CatchClause catch FinallyClause finally ReturnStatement return ThrowStatement throw BreakStatement break ContinueStatement continue DebuggerStatement debugger LabeledStatement ExpressionStatement SingleExpression SingleClassItem",maxTerm:380,context:dV,nodeProps:[["isolate",-8,5,6,14,37,39,51,53,55,""],["group",-26,9,17,19,68,207,211,215,216,218,221,224,234,237,243,245,247,249,252,258,264,266,268,270,272,274,275,"Statement",-34,13,14,32,35,36,42,51,54,55,57,62,70,72,76,80,82,84,85,110,111,120,121,136,139,141,142,143,144,145,147,148,167,169,171,"Expression",-23,31,33,37,41,43,45,173,175,177,178,180,181,182,184,185,186,188,189,190,201,203,205,206,"Type",-3,88,103,109,"ClassItem"],["openedBy",23,"<",38,"InterpolationStart",56,"[",60,"{",73,"(",160,"JSXStartCloseTag"],["closedBy",-2,24,168,">",40,"InterpolationEnd",50,"]",61,"}",74,")",165,"JSXEndTag"]],propSources:[yV],skippedNodes:[0,5,6,278],repeatNodeCount:37,tokenData:"$Fq07[R!bOX%ZXY+gYZ-yZ[+g[]%Z]^.c^p%Zpq+gqr/mrs3cst:_tuEruvJSvwLkwx! Yxy!'iyz!(sz{!)}{|!,q|}!.O}!O!,q!O!P!/Y!P!Q!9j!Q!R#:O!R![#<_![!]#I_!]!^#Jk!^!_#Ku!_!`$![!`!a$$v!a!b$*T!b!c$,r!c!}Er!}#O$-|#O#P$/W#P#Q$4o#Q#R$5y#R#SEr#S#T$7W#T#o$8b#o#p$<r#p#q$=h#q#r$>x#r#s$@U#s$f%Z$f$g+g$g#BYEr#BY#BZ$A`#BZ$ISEr$IS$I_$A`$I_$I|Er$I|$I}$Dk$I}$JO$Dk$JO$JTEr$JT$JU$A`$JU$KVEr$KV$KW$A`$KW&FUEr&FU&FV$A`&FV;'SEr;'S;=`I|<%l?HTEr?HT?HU$A`?HUOEr(n%d_$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z&j&hT$i&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c&j&zP;=`<%l&c'|'U]$i&j(Z!bOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}!b(SU(Z!bOY'}Zw'}x#O'}#P;'S'};'S;=`(f<%lO'}!b(iP;=`<%l'}'|(oP;=`<%l&}'[(y]$i&j(WpOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(rp)wU(WpOY)rZr)rs#O)r#P;'S)r;'S;=`*Z<%lO)rp*^P;=`<%l)r'[*dP;=`<%l(r#S*nX(Wp(Z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g#S+^P;=`<%l*g(n+dP;=`<%l%Z07[+rq$i&j(Wp(Z!b'|0/lOX%ZXY+gYZ&cZ[+g[p%Zpq+gqr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p$f%Z$f$g+g$g#BY%Z#BY#BZ+g#BZ$IS%Z$IS$I_+g$I_$JT%Z$JT$JU+g$JU$KV%Z$KV$KW+g$KW&FU%Z&FU&FV+g&FV;'S%Z;'S;=`+a<%l?HT%Z?HT?HU+g?HUO%Z07[.ST(X#S$i&j'}0/lO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c07[.n_$i&j(Wp(Z!b'}0/lOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z)3p/x`$i&j!p),Q(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`0z!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW1V`#v(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`2X!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW2d_#v(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'At3l_(V':f$i&j(Z!bOY4kYZ5qZr4krs7nsw4kwx5qx!^4k!^!_8p!_#O4k#O#P5q#P#o4k#o#p8p#p;'S4k;'S;=`:X<%lO4k(^4r_$i&j(Z!bOY4kYZ5qZr4krs7nsw4kwx5qx!^4k!^!_8p!_#O4k#O#P5q#P#o4k#o#p8p#p;'S4k;'S;=`:X<%lO4k&z5vX$i&jOr5qrs6cs!^5q!^!_6y!_#o5q#o#p6y#p;'S5q;'S;=`7h<%lO5q&z6jT$d`$i&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c`6|TOr6yrs7]s;'S6y;'S;=`7b<%lO6y`7bO$d``7eP;=`<%l6y&z7kP;=`<%l5q(^7w]$d`$i&j(Z!bOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}!r8uZ(Z!bOY8pYZ6yZr8prs9hsw8pwx6yx#O8p#O#P6y#P;'S8p;'S;=`:R<%lO8p!r9oU$d`(Z!bOY'}Zw'}x#O'}#P;'S'};'S;=`(f<%lO'}!r:UP;=`<%l8p(^:[P;=`<%l4k%9[:hh$i&j(Wp(Z!bOY%ZYZ&cZq%Zqr<Srs&}st%ZtuCruw%Zwx(rx!^%Z!^!_*g!_!c%Z!c!}Cr!}#O%Z#O#P&c#P#R%Z#R#SCr#S#T%Z#T#oCr#o#p*g#p$g%Z$g;'SCr;'S;=`El<%lOCr(r<__WS$i&j(Wp(Z!bOY<SYZ&cZr<Srs=^sw<Swx@nx!^<S!^!_Bm!_#O<S#O#P>`#P#o<S#o#pBm#p;'S<S;'S;=`Cl<%lO<S(Q=g]WS$i&j(Z!bOY=^YZ&cZw=^wx>`x!^=^!^!_?q!_#O=^#O#P>`#P#o=^#o#p?q#p;'S=^;'S;=`@h<%lO=^&n>gXWS$i&jOY>`YZ&cZ!^>`!^!_?S!_#o>`#o#p?S#p;'S>`;'S;=`?k<%lO>`S?XSWSOY?SZ;'S?S;'S;=`?e<%lO?SS?hP;=`<%l?S&n?nP;=`<%l>`!f?xWWS(Z!bOY?qZw?qwx?Sx#O?q#O#P?S#P;'S?q;'S;=`@b<%lO?q!f@eP;=`<%l?q(Q@kP;=`<%l=^'`@w]WS$i&j(WpOY@nYZ&cZr@nrs>`s!^@n!^!_Ap!_#O@n#O#P>`#P#o@n#o#pAp#p;'S@n;'S;=`Bg<%lO@ntAwWWS(WpOYApZrAprs?Ss#OAp#O#P?S#P;'SAp;'S;=`Ba<%lOAptBdP;=`<%lAp'`BjP;=`<%l@n#WBvYWS(Wp(Z!bOYBmZrBmrs?qswBmwxApx#OBm#O#P?S#P;'SBm;'S;=`Cf<%lOBm#WCiP;=`<%lBm(rCoP;=`<%l<S%9[C}i$i&j(o%1l(Wp(Z!bOY%ZYZ&cZr%Zrs&}st%ZtuCruw%Zwx(rx!Q%Z!Q![Cr![!^%Z!^!_*g!_!c%Z!c!}Cr!}#O%Z#O#P&c#P#R%Z#R#SCr#S#T%Z#T#oCr#o#p*g#p$g%Z$g;'SCr;'S;=`El<%lOCr%9[EoP;=`<%lCr07[FRk$i&j(Wp(Z!b$]#t(T,2j(e$I[OY%ZYZ&cZr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$g%Z$g;'SEr;'S;=`I|<%lOEr+dHRk$i&j(Wp(Z!b$]#tOY%ZYZ&cZr%Zrs&}st%ZtuGvuw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Gv![!^%Z!^!_*g!_!c%Z!c!}Gv!}#O%Z#O#P&c#P#R%Z#R#SGv#S#T%Z#T#oGv#o#p*g#p$g%Z$g;'SGv;'S;=`Iv<%lOGv+dIyP;=`<%lGv07[JPP;=`<%lEr(KWJ_`$i&j(Wp(Z!b#p(ChOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KWKl_$i&j$Q(Ch(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z,#xLva(z+JY$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sv%ZvwM{wx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KWNW`$i&j#z(Ch(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'At! c_(Y';W$i&j(WpOY!!bYZ!#hZr!!brs!#hsw!!bwx!$xx!^!!b!^!_!%z!_#O!!b#O#P!#h#P#o!!b#o#p!%z#p;'S!!b;'S;=`!'c<%lO!!b'l!!i_$i&j(WpOY!!bYZ!#hZr!!brs!#hsw!!bwx!$xx!^!!b!^!_!%z!_#O!!b#O#P!#h#P#o!!b#o#p!%z#p;'S!!b;'S;=`!'c<%lO!!b&z!#mX$i&jOw!#hwx6cx!^!#h!^!_!$Y!_#o!#h#o#p!$Y#p;'S!#h;'S;=`!$r<%lO!#h`!$]TOw!$Ywx7]x;'S!$Y;'S;=`!$l<%lO!$Y`!$oP;=`<%l!$Y&z!$uP;=`<%l!#h'l!%R]$d`$i&j(WpOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(r!Q!&PZ(WpOY!%zYZ!$YZr!%zrs!$Ysw!%zwx!&rx#O!%z#O#P!$Y#P;'S!%z;'S;=`!']<%lO!%z!Q!&yU$d`(WpOY)rZr)rs#O)r#P;'S)r;'S;=`*Z<%lO)r!Q!'`P;=`<%l!%z'l!'fP;=`<%l!!b/5|!'t_!l/.^$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#&U!)O_!k!Lf$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z-!n!*[b$i&j(Wp(Z!b(U%&f#q(ChOY%ZYZ&cZr%Zrs&}sw%Zwx(rxz%Zz{!+d{!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW!+o`$i&j(Wp(Z!b#n(ChOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z+;x!,|`$i&j(Wp(Z!br+4YOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z,$U!.Z_!]+Jf$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[!/ec$i&j(Wp(Z!b!Q.2^OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!0p!P!Q%Z!Q![!3Y![!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#%|!0ya$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!2O!P!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#%|!2Z_![!L^$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!3eg$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!3Y![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S!3Y#S#X%Z#X#Y!4|#Y#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!5Vg$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx{%Z{|!6n|}%Z}!O!6n!O!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!6wc$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!8_c$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[!9uf$i&j(Wp(Z!b#o(ChOY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcxz!;Zz{#-}{!P!;Z!P!Q#/d!Q!^!;Z!^!_#(i!_!`#7S!`!a#8i!a!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z?O!;fb$i&j(Wp(Z!b!X7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z>^!<w`$i&j(Z!b!X7`OY!<nYZ&cZw!<nwx!=yx!P!<n!P!Q!Eq!Q!^!<n!^!_!Gr!_!}!<n!}#O!KS#O#P!Dy#P#o!<n#o#p!Gr#p;'S!<n;'S;=`!L]<%lO!<n<z!>Q^$i&j!X7`OY!=yYZ&cZ!P!=y!P!Q!>|!Q!^!=y!^!_!@c!_!}!=y!}#O!CW#O#P!Dy#P#o!=y#o#p!@c#p;'S!=y;'S;=`!Ek<%lO!=y<z!?Td$i&j!X7`O!^&c!_#W&c#W#X!>|#X#Z&c#Z#[!>|#[#]&c#]#^!>|#^#a&c#a#b!>|#b#g&c#g#h!>|#h#i&c#i#j!>|#j#k!>|#k#m&c#m#n!>|#n#o&c#p;'S&c;'S;=`&w<%lO&c7`!@hX!X7`OY!@cZ!P!@c!P!Q!AT!Q!}!@c!}#O!Ar#O#P!Bq#P;'S!@c;'S;=`!CQ<%lO!@c7`!AYW!X7`#W#X!AT#Z#[!AT#]#^!AT#a#b!AT#g#h!AT#i#j!AT#j#k!AT#m#n!AT7`!AuVOY!ArZ#O!Ar#O#P!B[#P#Q!@c#Q;'S!Ar;'S;=`!Bk<%lO!Ar7`!B_SOY!ArZ;'S!Ar;'S;=`!Bk<%lO!Ar7`!BnP;=`<%l!Ar7`!BtSOY!@cZ;'S!@c;'S;=`!CQ<%lO!@c7`!CTP;=`<%l!@c<z!C][$i&jOY!CWYZ&cZ!^!CW!^!_!Ar!_#O!CW#O#P!DR#P#Q!=y#Q#o!CW#o#p!Ar#p;'S!CW;'S;=`!Ds<%lO!CW<z!DWX$i&jOY!CWYZ&cZ!^!CW!^!_!Ar!_#o!CW#o#p!Ar#p;'S!CW;'S;=`!Ds<%lO!CW<z!DvP;=`<%l!CW<z!EOX$i&jOY!=yYZ&cZ!^!=y!^!_!@c!_#o!=y#o#p!@c#p;'S!=y;'S;=`!Ek<%lO!=y<z!EnP;=`<%l!=y>^!Ezl$i&j(Z!b!X7`OY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#W&}#W#X!Eq#X#Z&}#Z#[!Eq#[#]&}#]#^!Eq#^#a&}#a#b!Eq#b#g&}#g#h!Eq#h#i&}#i#j!Eq#j#k!Eq#k#m&}#m#n!Eq#n#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}8r!GyZ(Z!b!X7`OY!GrZw!Grwx!@cx!P!Gr!P!Q!Hl!Q!}!Gr!}#O!JU#O#P!Bq#P;'S!Gr;'S;=`!J|<%lO!Gr8r!Hse(Z!b!X7`OY'}Zw'}x#O'}#P#W'}#W#X!Hl#X#Z'}#Z#[!Hl#[#]'}#]#^!Hl#^#a'}#a#b!Hl#b#g'}#g#h!Hl#h#i'}#i#j!Hl#j#k!Hl#k#m'}#m#n!Hl#n;'S'};'S;=`(f<%lO'}8r!JZX(Z!bOY!JUZw!JUwx!Arx#O!JU#O#P!B[#P#Q!Gr#Q;'S!JU;'S;=`!Jv<%lO!JU8r!JyP;=`<%l!JU8r!KPP;=`<%l!Gr>^!KZ^$i&j(Z!bOY!KSYZ&cZw!KSwx!CWx!^!KS!^!_!JU!_#O!KS#O#P!DR#P#Q!<n#Q#o!KS#o#p!JU#p;'S!KS;'S;=`!LV<%lO!KS>^!LYP;=`<%l!KS>^!L`P;=`<%l!<n=l!Ll`$i&j(Wp!X7`OY!LcYZ&cZr!Lcrs!=ys!P!Lc!P!Q!Mn!Q!^!Lc!^!_# o!_!}!Lc!}#O#%P#O#P!Dy#P#o!Lc#o#p# o#p;'S!Lc;'S;=`#&Y<%lO!Lc=l!Mwl$i&j(Wp!X7`OY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#W(r#W#X!Mn#X#Z(r#Z#[!Mn#[#](r#]#^!Mn#^#a(r#a#b!Mn#b#g(r#g#h!Mn#h#i(r#i#j!Mn#j#k!Mn#k#m(r#m#n!Mn#n#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(r8Q# vZ(Wp!X7`OY# oZr# ors!@cs!P# o!P!Q#!i!Q!}# o!}#O#$R#O#P!Bq#P;'S# o;'S;=`#$y<%lO# o8Q#!pe(Wp!X7`OY)rZr)rs#O)r#P#W)r#W#X#!i#X#Z)r#Z#[#!i#[#])r#]#^#!i#^#a)r#a#b#!i#b#g)r#g#h#!i#h#i)r#i#j#!i#j#k#!i#k#m)r#m#n#!i#n;'S)r;'S;=`*Z<%lO)r8Q#$WX(WpOY#$RZr#$Rrs!Ars#O#$R#O#P!B[#P#Q# o#Q;'S#$R;'S;=`#$s<%lO#$R8Q#$vP;=`<%l#$R8Q#$|P;=`<%l# o=l#%W^$i&j(WpOY#%PYZ&cZr#%Prs!CWs!^#%P!^!_#$R!_#O#%P#O#P!DR#P#Q!Lc#Q#o#%P#o#p#$R#p;'S#%P;'S;=`#&S<%lO#%P=l#&VP;=`<%l#%P=l#&]P;=`<%l!Lc?O#&kn$i&j(Wp(Z!b!X7`OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#W%Z#W#X#&`#X#Z%Z#Z#[#&`#[#]%Z#]#^#&`#^#a%Z#a#b#&`#b#g%Z#g#h#&`#h#i%Z#i#j#&`#j#k#&`#k#m%Z#m#n#&`#n#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z9d#(r](Wp(Z!b!X7`OY#(iZr#(irs!Grsw#(iwx# ox!P#(i!P!Q#)k!Q!}#(i!}#O#+`#O#P!Bq#P;'S#(i;'S;=`#,`<%lO#(i9d#)th(Wp(Z!b!X7`OY*gZr*grs'}sw*gwx)rx#O*g#P#W*g#W#X#)k#X#Z*g#Z#[#)k#[#]*g#]#^#)k#^#a*g#a#b#)k#b#g*g#g#h#)k#h#i*g#i#j#)k#j#k#)k#k#m*g#m#n#)k#n;'S*g;'S;=`+Z<%lO*g9d#+gZ(Wp(Z!bOY#+`Zr#+`rs!JUsw#+`wx#$Rx#O#+`#O#P!B[#P#Q#(i#Q;'S#+`;'S;=`#,Y<%lO#+`9d#,]P;=`<%l#+`9d#,cP;=`<%l#(i?O#,o`$i&j(Wp(Z!bOY#,fYZ&cZr#,frs!KSsw#,fwx#%Px!^#,f!^!_#+`!_#O#,f#O#P!DR#P#Q!;Z#Q#o#,f#o#p#+`#p;'S#,f;'S;=`#-q<%lO#,f?O#-tP;=`<%l#,f?O#-zP;=`<%l!;Z07[#.[b$i&j(Wp(Z!b(O0/l!X7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z07[#/o_$i&j(Wp(Z!bT0/lOY#/dYZ&cZr#/drs#0nsw#/dwx#4Ox!^#/d!^!_#5}!_#O#/d#O#P#1p#P#o#/d#o#p#5}#p;'S#/d;'S;=`#6|<%lO#/d06j#0w]$i&j(Z!bT0/lOY#0nYZ&cZw#0nwx#1px!^#0n!^!_#3R!_#O#0n#O#P#1p#P#o#0n#o#p#3R#p;'S#0n;'S;=`#3x<%lO#0n05W#1wX$i&jT0/lOY#1pYZ&cZ!^#1p!^!_#2d!_#o#1p#o#p#2d#p;'S#1p;'S;=`#2{<%lO#1p0/l#2iST0/lOY#2dZ;'S#2d;'S;=`#2u<%lO#2d0/l#2xP;=`<%l#2d05W#3OP;=`<%l#1p01O#3YW(Z!bT0/lOY#3RZw#3Rwx#2dx#O#3R#O#P#2d#P;'S#3R;'S;=`#3r<%lO#3R01O#3uP;=`<%l#3R06j#3{P;=`<%l#0n05x#4X]$i&j(WpT0/lOY#4OYZ&cZr#4Ors#1ps!^#4O!^!_#5Q!_#O#4O#O#P#1p#P#o#4O#o#p#5Q#p;'S#4O;'S;=`#5w<%lO#4O00^#5XW(WpT0/lOY#5QZr#5Qrs#2ds#O#5Q#O#P#2d#P;'S#5Q;'S;=`#5q<%lO#5Q00^#5tP;=`<%l#5Q05x#5zP;=`<%l#4O01p#6WY(Wp(Z!bT0/lOY#5}Zr#5}rs#3Rsw#5}wx#5Qx#O#5}#O#P#2d#P;'S#5};'S;=`#6v<%lO#5}01p#6yP;=`<%l#5}07[#7PP;=`<%l#/d)3h#7ab$i&j$Q(Ch(Wp(Z!b!X7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;ZAt#8vb$Z#t$i&j(Wp(Z!b!X7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z'Ad#:Zp$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!3Y!P!Q%Z!Q![#<_![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S#<_#S#U%Z#U#V#?i#V#X%Z#X#Y!4|#Y#b%Z#b#c#>_#c#d#Bq#d#l%Z#l#m#Es#m#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#<jk$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!3Y!P!Q%Z!Q![#<_![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S#<_#S#X%Z#X#Y!4|#Y#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#>j_$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#?rd$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!R#AQ!R!S#AQ!S!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#AQ#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#A]f$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!R#AQ!R!S#AQ!S!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#AQ#S#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#Bzc$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!Y#DV!Y!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#DV#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#Dbe$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!Y#DV!Y!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#DV#S#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#E|g$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![#Ge![!^%Z!^!_*g!_!c%Z!c!i#Ge!i#O%Z#O#P&c#P#R%Z#R#S#Ge#S#T%Z#T#Z#Ge#Z#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#Gpi$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![#Ge![!^%Z!^!_*g!_!c%Z!c!i#Ge!i#O%Z#O#P&c#P#R%Z#R#S#Ge#S#T%Z#T#Z#Ge#Z#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z*)x#Il_!g$b$i&j$O)Lv(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z)[#Jv_al$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z04f#LS^h#)`#R-<U(Wp(Z!b$n7`OY*gZr*grs'}sw*gwx)rx!P*g!P!Q#MO!Q!^*g!^!_#Mt!_!`$ f!`#O*g#P;'S*g;'S;=`+Z<%lO*g(n#MXX$k&j(Wp(Z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g(El#M}Z#r(Ch(Wp(Z!bOY*gZr*grs'}sw*gwx)rx!_*g!_!`#Np!`#O*g#P;'S*g;'S;=`+Z<%lO*g(El#NyX$Q(Ch(Wp(Z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g(El$ oX#s(Ch(Wp(Z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g*)x$!ga#`*!Y$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`0z!`!a$#l!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(K[$#w_#k(Cl$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z*)x$%Vag!*r#s(Ch$f#|$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`$&[!`!a$'f!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$&g_#s(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$'qa#r(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`!a$(v!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$)R`#r(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(Kd$*`a(r(Ct$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!a%Z!a!b$+e!b#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$+p`$i&j#{(Ch(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#`$,}_!|$Ip$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z04f$.X_!S0,v$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(n$/]Z$i&jO!^$0O!^!_$0f!_#i$0O#i#j$0k#j#l$0O#l#m$2^#m#o$0O#o#p$0f#p;'S$0O;'S;=`$4i<%lO$0O(n$0VT_#S$i&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c#S$0kO_#S(n$0p[$i&jO!Q&c!Q![$1f![!^&c!_!c&c!c!i$1f!i#T&c#T#Z$1f#Z#o&c#o#p$3|#p;'S&c;'S;=`&w<%lO&c(n$1kZ$i&jO!Q&c!Q![$2^![!^&c!_!c&c!c!i$2^!i#T&c#T#Z$2^#Z#o&c#p;'S&c;'S;=`&w<%lO&c(n$2cZ$i&jO!Q&c!Q![$3U![!^&c!_!c&c!c!i$3U!i#T&c#T#Z$3U#Z#o&c#p;'S&c;'S;=`&w<%lO&c(n$3ZZ$i&jO!Q&c!Q![$0O![!^&c!_!c&c!c!i$0O!i#T&c#T#Z$0O#Z#o&c#p;'S&c;'S;=`&w<%lO&c#S$4PR!Q![$4Y!c!i$4Y#T#Z$4Y#S$4]S!Q![$4Y!c!i$4Y#T#Z$4Y#q#r$0f(n$4lP;=`<%l$0O#1[$4z_!Y#)l$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$6U`#x(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z+;p$7c_$i&j(Wp(Z!b(a+4QOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[$8qk$i&j(Wp(Z!b(T,2j$_#t(e$I[OY%ZYZ&cZr%Zrs&}st%Ztu$8buw%Zwx(rx}%Z}!O$:f!O!Q%Z!Q![$8b![!^%Z!^!_*g!_!c%Z!c!}$8b!}#O%Z#O#P&c#P#R%Z#R#S$8b#S#T%Z#T#o$8b#o#p*g#p$g%Z$g;'S$8b;'S;=`$<l<%lO$8b+d$:qk$i&j(Wp(Z!b$_#tOY%ZYZ&cZr%Zrs&}st%Ztu$:fuw%Zwx(rx}%Z}!O$:f!O!Q%Z!Q![$:f![!^%Z!^!_*g!_!c%Z!c!}$:f!}#O%Z#O#P&c#P#R%Z#R#S$:f#S#T%Z#T#o$:f#o#p*g#p$g%Z$g;'S$:f;'S;=`$<f<%lO$:f+d$<iP;=`<%l$:f07[$<oP;=`<%l$8b#Jf$<{X!_#Hb(Wp(Z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g,#x$=sa(y+JY$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p#q$+e#q;'S%Z;'S;=`+a<%lO%Z)>v$?V_!^(CdvBr$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z?O$@a_!q7`$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[$Aq|$i&j(Wp(Z!b'|0/l$]#t(T,2j(e$I[OX%ZXY+gYZ&cZ[+g[p%Zpq+gqr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$f%Z$f$g+g$g#BYEr#BY#BZ$A`#BZ$ISEr$IS$I_$A`$I_$JTEr$JT$JU$A`$JU$KVEr$KV$KW$A`$KW&FUEr&FU&FV$A`&FV;'SEr;'S;=`I|<%l?HTEr?HT?HU$A`?HUOEr07[$D|k$i&j(Wp(Z!b'}0/l$]#t(T,2j(e$I[OY%ZYZ&cZr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$g%Z$g;'SEr;'S;=`I|<%lOEr",tokenizers:[pV,mV,gV,OV,2,3,4,5,6,7,8,9,10,11,12,13,14,fV,new bd("$S~RRtu[#O#Pg#S#T#|~_P#o#pb~gOx~~jVO#i!P#i#j!U#j#l!P#l#m!q#m;'S!P;'S;=`#v<%lO!P~!UO!U~~!XS!Q![!e!c!i!e#T#Z!e#o#p#Z~!hR!Q![!q!c!i!q#T#Z!q~!tR!Q![!}!c!i!}#T#Z!}~#QR!Q![!P!c!i!P#T#Z!P~#^R!Q![#g!c!i#g#T#Z#g~#jS!Q![#g!c!i#g#T#Z#g#q#r!P~#yP;=`<%l!P~$RO(c~~",141,340),new bd("j~RQYZXz{^~^O(Q~~aP!P!Qd~iO(R~~",25,323)],topRules:{Script:[0,7],SingleExpression:[1,276],SingleClassItem:[2,277]},dialects:{jsx:0,ts:15175},dynamicPrecedences:{80:1,82:1,94:1,169:1,199:1},specialized:[{term:327,get:r=>bV[r]||-1},{term:343,get:r=>vV[r]||-1},{term:95,get:r=>SV[r]||-1}],tokenPrec:15201}),VE=[Ci("function ${name}(${params}) {\n	${}\n}",{label:"function",detail:"definition",type:"keyword"}),Ci("for (let ${index} = 0; ${index} < ${bound}; ${index}++) {\n	${}\n}",{label:"for",detail:"loop",type:"keyword"}),Ci("for (let ${name} of ${collection}) {\n	${}\n}",{label:"for",detail:"of loop",type:"keyword"}),Ci("do {\n	${}\n} while (${})",{label:"do",detail:"loop",type:"keyword"}),Ci("while (${}) {\n	${}\n}",{label:"while",detail:"loop",type:"keyword"}),Ci(`try {
	\${}
} catch (\${error}) {
	\${}
}`,{label:"try",detail:"/ catch block",type:"keyword"}),Ci("if (${}) {\n	${}\n}",{label:"if",detail:"block",type:"keyword"}),Ci(`if (\${}) {
	\${}
} else {
	\${}
}`,{label:"if",detail:"/ else block",type:"keyword"}),Ci(`class \${name} {
	constructor(\${params}) {
		\${}
	}
}`,{label:"class",detail:"definition",type:"keyword"}),Ci('import {${names}} from "${module}"\n${}',{label:"import",detail:"named",type:"keyword"}),Ci('import ${name} from "${module}"\n${}',{label:"import",detail:"default",type:"keyword"})],_V=VE.concat([Ci("interface ${name} {\n	${}\n}",{label:"interface",detail:"definition",type:"keyword"}),Ci("type ${name} = ${type}",{label:"type",detail:"definition",type:"keyword"}),Ci("enum ${name} {\n	${}\n}",{label:"enum",detail:"definition",type:"keyword"})]),H1=new RC,XE=new Set(["Script","Block","FunctionExpression","FunctionDeclaration","ArrowFunction","MethodDeclaration","ForStatement"]);function ol(r){return(e,t)=>{let i=e.node.getChild("VariableDefinition");return i&&t(i,r),!0}}const xV=["FunctionDeclaration"],wV={FunctionDeclaration:ol("function"),ClassDeclaration:ol("class"),ClassExpression:()=>!0,EnumDeclaration:ol("constant"),TypeAliasDeclaration:ol("type"),NamespaceDeclaration:ol("namespace"),VariableDefinition(r,e){r.matchContext(xV)||e(r,"variable")},TypeDefinition(r,e){e(r,"type")},__proto__:null};function jE(r,e){let t=H1.get(e);if(t)return t;let i=[],s=!0;function n(a,o){let l=r.sliceString(a.from,a.to);i.push({label:l,type:o})}return e.cursor(pt.IncludeAnonymous).iterate(a=>{if(s)s=!1;else if(a.name){let o=wV[a.name];if(o&&o(a,n)||XE.has(a.name))return!1}else if(a.to-a.from>8192){for(let o of jE(r,a.node))i.push(o);return!1}}),H1.set(e,i),i}const Y1=/^[\w$\xa1-\uffff][\w$\d\xa1-\uffff]*$/,zE=["TemplateString","String","RegExp","LineComment","BlockComment","VariableDefinition","TypeDefinition","Label","PropertyDefinition","PropertyName","PrivatePropertyDefinition","PrivatePropertyName","JSXText","JSXAttributeValue","JSXOpenTag","JSXCloseTag","JSXSelfClosingTag",".","?."];function CV(r){let e=ht(r.state).resolveInner(r.pos,-1);if(zE.indexOf(e.name)>-1)return null;let t=e.name=="VariableName"||e.to-e.from<20&&Y1.test(r.state.sliceDoc(e.from,e.to));if(!t&&!r.explicit)return null;let i=[];for(let s=e;s;s=s.parent)XE.has(s.name)&&(i=i.concat(jE(r.state.doc,s)));return{options:i,from:t?e.from:r.pos,validFor:Y1}}const es=uo.define({name:"javascript",parser:TV.configure({props:[Xu.add({IfStatement:gh({except:/^\s*({|else\b)/}),TryStatement:gh({except:/^\s*({|catch\b|finally\b)/}),LabeledStatement:mF,SwitchBody:r=>{let e=r.textAfter,t=/^\s*\}/.test(e),i=/^\s*(case|default)\b/.test(e);return r.baseIndent+(t?0:i?1:2)*r.unit},Block:pF({closing:"}"}),ArrowFunction:r=>r.baseIndent+r.unit,"TemplateString BlockComment":()=>null,"Statement Property":gh({except:/^\s*{/}),JSXElement(r){let e=/^\s*<\//.test(r.textAfter);return r.lineIndent(r.node.from)+(e?0:r.unit)},JSXEscape(r){let e=/\s*\}/.test(r.textAfter);return r.lineIndent(r.node.from)+(e?0:r.unit)},"JSXOpenTag JSXSelfClosingTag"(r){return r.column(r.node.from)+r.unit}}),Ao.add({"Block ClassBody SwitchBody EnumBody ObjectExpression ArrayExpression ObjectType":qC,BlockComment(r){return{from:r.from+2,to:r.to-2}}})]}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"`"]},commentTokens:{line:"//",block:{open:"/*",close:"*/"}},indentOnInput:/^\s*(?:case |default:|\{|\}|<\/)$/,wordChars:"$"}}),ZE={test:r=>/^JSX/.test(r.name),facet:lO({commentTokens:{block:{open:"{/*",close:"*/}"}}})},WE=es.configure({dialect:"ts"},"typescript"),HE=es.configure({dialect:"jsx",props:[uO.add(r=>r.isTop?[ZE]:void 0)]}),YE=es.configure({dialect:"jsx ts",props:[uO.add(r=>r.isTop?[ZE]:void 0)]},"typescript");let GE=r=>({label:r,type:"keyword"});const KE="break case const continue default delete export extends false finally in instanceof let new return static super switch this throw true typeof var yield".split(" ").map(GE),kV=KE.concat(["declare","implements","private","protected","public"].map(GE));function EV(r={}){let e=r.jsx?r.typescript?YE:HE:r.typescript?WE:es,t=r.typescript?_V.concat(kV):VE.concat(KE);return new iu(e,[es.data.of({autocomplete:L7(zE,qk(t))}),es.data.of({autocomplete:CV}),r.jsx?DV:[]])}function AV(r){for(;;){if(r.name=="JSXOpenTag"||r.name=="JSXSelfClosingTag"||r.name=="JSXFragmentTag")return r;if(r.name=="JSXEscape"||!r.parent)return null;r=r.parent}}function G1(r,e,t=r.length){for(let i=e==null?void 0:e.firstChild;i;i=i.nextSibling)if(i.name=="JSXIdentifier"||i.name=="JSXBuiltin"||i.name=="JSXNamespacedName"||i.name=="JSXMemberExpression")return r.sliceString(i.from,Math.min(i.to,t));return""}const PV=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),DV=me.inputHandler.of((r,e,t,i,s)=>{if((PV?r.composing:r.compositionStarted)||r.state.readOnly||e!=t||i!=">"&&i!="/"||!es.isActiveAt(r.state,e,-1))return!1;let n=s(),{state:a}=n,o=a.changeByRange(l=>{var u;let{head:c}=l,h=ht(a).resolveInner(c-1,-1),f;if(h.name=="JSXStartTag"&&(h=h.parent),!(a.doc.sliceString(c-1,c)!=i||h.name=="JSXAttributeValue"&&h.to>c)){if(i==">"&&h.name=="JSXFragmentTag")return{range:l,changes:{from:c,insert:"</>"}};if(i=="/"&&h.name=="JSXStartCloseTag"){let m=h.parent,S=m.parent;if(S&&m.from==c-2&&((f=G1(a.doc,S.firstChild,c))||((u=S.firstChild)===null||u===void 0?void 0:u.name)=="JSXFragmentTag")){let y=`${f}>`;return{range:ie.cursor(c+y.length,-1),changes:{from:c,insert:y}}}}else if(i==">"){let m=AV(h);if(m&&m.name=="JSXOpenTag"&&!/^\/?>|^<\//.test(a.doc.sliceString(c,c+2))&&(f=G1(a.doc,m,c)))return{range:l,changes:{from:c,insert:`</${f}>`}}}}return{range:l}});return o.changes.empty?!1:(r.dispatch([n,a.update(o,{userEvent:"input.complete",scrollIntoView:!0})]),!0)}),ll=["_blank","_self","_top","_parent"],Hp=["ascii","utf-8","utf-16","latin1","latin1"],Yp=["get","post","put","delete"],Gp=["application/x-www-form-urlencoded","multipart/form-data","text/plain"],qi=["true","false"],xe={},MV={a:{attrs:{href:null,ping:null,type:null,media:null,target:ll,hreflang:null}},abbr:xe,address:xe,area:{attrs:{alt:null,coords:null,href:null,target:null,ping:null,media:null,hreflang:null,type:null,shape:["default","rect","circle","poly"]}},article:xe,aside:xe,audio:{attrs:{src:null,mediagroup:null,crossorigin:["anonymous","use-credentials"],preload:["none","metadata","auto"],autoplay:["autoplay"],loop:["loop"],controls:["controls"]}},b:xe,base:{attrs:{href:null,target:ll}},bdi:xe,bdo:xe,blockquote:{attrs:{cite:null}},body:xe,br:xe,button:{attrs:{form:null,formaction:null,name:null,value:null,autofocus:["autofocus"],disabled:["autofocus"],formenctype:Gp,formmethod:Yp,formnovalidate:["novalidate"],formtarget:ll,type:["submit","reset","button"]}},canvas:{attrs:{width:null,height:null}},caption:xe,center:xe,cite:xe,code:xe,col:{attrs:{span:null}},colgroup:{attrs:{span:null}},command:{attrs:{type:["command","checkbox","radio"],label:null,icon:null,radiogroup:null,command:null,title:null,disabled:["disabled"],checked:["checked"]}},data:{attrs:{value:null}},datagrid:{attrs:{disabled:["disabled"],multiple:["multiple"]}},datalist:{attrs:{data:null}},dd:xe,del:{attrs:{cite:null,datetime:null}},details:{attrs:{open:["open"]}},dfn:xe,div:xe,dl:xe,dt:xe,em:xe,embed:{attrs:{src:null,type:null,width:null,height:null}},eventsource:{attrs:{src:null}},fieldset:{attrs:{disabled:["disabled"],form:null,name:null}},figcaption:xe,figure:xe,footer:xe,form:{attrs:{action:null,name:null,"accept-charset":Hp,autocomplete:["on","off"],enctype:Gp,method:Yp,novalidate:["novalidate"],target:ll}},h1:xe,h2:xe,h3:xe,h4:xe,h5:xe,h6:xe,head:{children:["title","base","link","style","meta","script","noscript","command"]},header:xe,hgroup:xe,hr:xe,html:{attrs:{manifest:null}},i:xe,iframe:{attrs:{src:null,srcdoc:null,name:null,width:null,height:null,sandbox:["allow-top-navigation","allow-same-origin","allow-forms","allow-scripts"],seamless:["seamless"]}},img:{attrs:{alt:null,src:null,ismap:null,usemap:null,width:null,height:null,crossorigin:["anonymous","use-credentials"]}},input:{attrs:{alt:null,dirname:null,form:null,formaction:null,height:null,list:null,max:null,maxlength:null,min:null,name:null,pattern:null,placeholder:null,size:null,src:null,step:null,value:null,width:null,accept:["audio/*","video/*","image/*"],autocomplete:["on","off"],autofocus:["autofocus"],checked:["checked"],disabled:["disabled"],formenctype:Gp,formmethod:Yp,formnovalidate:["novalidate"],formtarget:ll,multiple:["multiple"],readonly:["readonly"],required:["required"],type:["hidden","text","search","tel","url","email","password","datetime","date","month","week","time","datetime-local","number","range","color","checkbox","radio","file","submit","image","reset","button"]}},ins:{attrs:{cite:null,datetime:null}},kbd:xe,keygen:{attrs:{challenge:null,form:null,name:null,autofocus:["autofocus"],disabled:["disabled"],keytype:["RSA"]}},label:{attrs:{for:null,form:null}},legend:xe,li:{attrs:{value:null}},link:{attrs:{href:null,type:null,hreflang:null,media:null,sizes:["all","16x16","16x16 32x32","16x16 32x32 64x64"]}},map:{attrs:{name:null}},mark:xe,menu:{attrs:{label:null,type:["list","context","toolbar"]}},meta:{attrs:{content:null,charset:Hp,name:["viewport","application-name","author","description","generator","keywords"],"http-equiv":["content-language","content-type","default-style","refresh"]}},meter:{attrs:{value:null,min:null,low:null,high:null,max:null,optimum:null}},nav:xe,noscript:xe,object:{attrs:{data:null,type:null,name:null,usemap:null,form:null,width:null,height:null,typemustmatch:["typemustmatch"]}},ol:{attrs:{reversed:["reversed"],start:null,type:["1","a","A","i","I"]},children:["li","script","template","ul","ol"]},optgroup:{attrs:{disabled:["disabled"],label:null}},option:{attrs:{disabled:["disabled"],label:null,selected:["selected"],value:null}},output:{attrs:{for:null,form:null,name:null}},p:xe,param:{attrs:{name:null,value:null}},pre:xe,progress:{attrs:{value:null,max:null}},q:{attrs:{cite:null}},rp:xe,rt:xe,ruby:xe,samp:xe,script:{attrs:{type:["text/javascript"],src:null,async:["async"],defer:["defer"],charset:Hp}},section:xe,select:{attrs:{form:null,name:null,size:null,autofocus:["autofocus"],disabled:["disabled"],multiple:["multiple"]}},slot:{attrs:{name:null}},small:xe,source:{attrs:{src:null,type:null,media:null}},span:xe,strong:xe,style:{attrs:{type:["text/css"],media:null,scoped:null}},sub:xe,summary:xe,sup:xe,table:xe,tbody:xe,td:{attrs:{colspan:null,rowspan:null,headers:null}},template:xe,textarea:{attrs:{dirname:null,form:null,maxlength:null,name:null,placeholder:null,rows:null,cols:null,autofocus:["autofocus"],disabled:["disabled"],readonly:["readonly"],required:["required"],wrap:["soft","hard"]}},tfoot:xe,th:{attrs:{colspan:null,rowspan:null,headers:null,scope:["row","col","rowgroup","colgroup"]}},thead:xe,time:{attrs:{datetime:null}},title:xe,tr:xe,track:{attrs:{src:null,label:null,default:null,kind:["subtitles","captions","descriptions","chapters","metadata"],srclang:null}},ul:{children:["li","script","template","ul","ol"]},var:xe,video:{attrs:{src:null,poster:null,width:null,height:null,crossorigin:["anonymous","use-credentials"],preload:["auto","metadata","none"],autoplay:["autoplay"],mediagroup:["movie"],muted:["muted"],controls:["controls"]}},wbr:xe},JE={accesskey:null,class:null,contenteditable:qi,contextmenu:null,dir:["ltr","rtl","auto"],draggable:["true","false","auto"],dropzone:["copy","move","link","string:","file:"],hidden:["hidden"],id:null,inert:["inert"],itemid:null,itemprop:null,itemref:null,itemscope:["itemscope"],itemtype:null,lang:["ar","bn","de","en-GB","en-US","es","fr","hi","id","ja","pa","pt","ru","tr","zh"],spellcheck:qi,autocorrect:qi,autocapitalize:qi,style:null,tabindex:null,title:null,translate:["yes","no"],rel:["stylesheet","alternate","author","bookmark","help","license","next","nofollow","noreferrer","prefetch","prev","search","tag"],role:"alert application article banner button cell checkbox complementary contentinfo dialog document feed figure form grid gridcell heading img list listbox listitem main navigation region row rowgroup search switch tab table tabpanel textbox timer".split(" "),"aria-activedescendant":null,"aria-atomic":qi,"aria-autocomplete":["inline","list","both","none"],"aria-busy":qi,"aria-checked":["true","false","mixed","undefined"],"aria-controls":null,"aria-describedby":null,"aria-disabled":qi,"aria-dropeffect":null,"aria-expanded":["true","false","undefined"],"aria-flowto":null,"aria-grabbed":["true","false","undefined"],"aria-haspopup":qi,"aria-hidden":qi,"aria-invalid":["true","false","grammar","spelling"],"aria-label":null,"aria-labelledby":null,"aria-level":null,"aria-live":["off","polite","assertive"],"aria-multiline":qi,"aria-multiselectable":qi,"aria-owns":null,"aria-posinset":null,"aria-pressed":["true","false","mixed","undefined"],"aria-readonly":qi,"aria-relevant":null,"aria-required":qi,"aria-selected":["true","false","undefined"],"aria-setsize":null,"aria-sort":["ascending","descending","none","other"],"aria-valuemax":null,"aria-valuemin":null,"aria-valuenow":null,"aria-valuetext":null},eA="beforeunload copy cut dragstart dragover dragleave dragenter dragend drag paste focus blur change click load mousedown mouseenter mouseleave mouseup keydown keyup resize scroll unload".split(" ").map(r=>"on"+r);for(let r of eA)JE[r]=null;class fu{constructor(e,t){this.tags={...MV,...e},this.globalAttrs={...JE,...t},this.allTags=Object.keys(this.tags),this.globalAttrNames=Object.keys(this.globalAttrs)}}fu.default=new fu;function go(r,e,t=r.length){if(!e)return"";let i=e.firstChild,s=i&&i.getChild("TagName");return s?r.sliceString(s.from,Math.min(s.to,t)):""}function Oo(r,e=!1){for(;r;r=r.parent)if(r.name=="Element")if(e)e=!1;else return r;return null}function tA(r,e,t){let i=t.tags[go(r,Oo(e))];return(i==null?void 0:i.children)||t.allTags}function LO(r,e){let t=[];for(let i=Oo(e);i&&!i.type.isTop;i=Oo(i.parent)){let s=go(r,i);if(s&&i.lastChild.name=="CloseTag")break;s&&t.indexOf(s)<0&&(e.name=="EndTag"||e.from>=i.firstChild.to)&&t.push(s)}return t}const iA=/^[:\-\.\w\u00b7-\uffff]*$/;function K1(r,e,t,i,s){let n=/\s*>/.test(r.sliceDoc(s,s+5))?"":">",a=Oo(t,t.name=="StartTag"||t.name=="TagName");return{from:i,to:s,options:tA(r.doc,a,e).map(o=>({label:o,type:"type"})).concat(LO(r.doc,t).map((o,l)=>({label:"/"+o,apply:"/"+o+n,type:"type",boost:99-l}))),validFor:/^\/?[:\-\.\w\u00b7-\uffff]*$/}}function J1(r,e,t,i){let s=/\s*>/.test(r.sliceDoc(i,i+5))?"":">";return{from:t,to:i,options:LO(r.doc,e).map((n,a)=>({label:n,apply:n+s,type:"type",boost:99-a})),validFor:iA}}function IV(r,e,t,i){let s=[],n=0;for(let a of tA(r.doc,t,e))s.push({label:"<"+a,type:"type"});for(let a of LO(r.doc,t))s.push({label:"</"+a+">",type:"type",boost:99-n++});return{from:i,to:i,options:s,validFor:/^<\/?[:\-\.\w\u00b7-\uffff]*$/}}function RV(r,e,t,i,s){let n=Oo(t),a=n?e.tags[go(r.doc,n)]:null,o=a&&a.attrs?Object.keys(a.attrs):[],l=a&&a.globalAttrs===!1?o:o.length?o.concat(e.globalAttrNames):e.globalAttrNames;return{from:i,to:s,options:l.map(u=>({label:u,type:"property"})),validFor:iA}}function LV(r,e,t,i,s){var n;let a=(n=t.parent)===null||n===void 0?void 0:n.getChild("AttributeName"),o=[],l;if(a){let u=r.sliceDoc(a.from,a.to),c=e.globalAttrs[u];if(!c){let h=Oo(t),f=h?e.tags[go(r.doc,h)]:null;c=(f==null?void 0:f.attrs)&&f.attrs[u]}if(c){let h=r.sliceDoc(i,s).toLowerCase(),f='"',m='"';/^['"]/.test(h)?(l=h[0]=='"'?/^[^"]*$/:/^[^']*$/,f="",m=r.sliceDoc(s,s+1)==h[0]?"":h[0],h=h.slice(1),i++):l=/^[^\s<>='"]*$/;for(let S of c)o.push({label:S,apply:f+S+m,type:"constant"})}}return{from:i,to:s,options:o,validFor:l}}function rA(r,e){let{state:t,pos:i}=e,s=ht(t).resolveInner(i,-1),n=s.resolve(i);for(let a=i,o;n==s&&(o=s.childBefore(a));){let l=o.lastChild;if(!l||!l.type.isError||l.from<l.to)break;n=s=o,a=l.from}return s.name=="TagName"?s.parent&&/CloseTag$/.test(s.parent.name)?J1(t,s,s.from,i):K1(t,r,s,s.from,i):s.name=="StartTag"||s.name=="IncompleteTag"?K1(t,r,s,i,i):s.name=="StartCloseTag"||s.name=="IncompleteCloseTag"?J1(t,s,i,i):s.name=="OpenTag"||s.name=="SelfClosingTag"||s.name=="AttributeName"?RV(t,r,s,s.name=="AttributeName"?s.from:i,i):s.name=="Is"||s.name=="AttributeValue"||s.name=="UnquotedAttributeValue"?LV(t,r,s,s.name=="Is"?i:s.from,i):e.explicit&&(n.name=="Element"||n.name=="Text"||n.name=="Document")?IV(t,r,s,i):null}function QV(r){return rA(fu.default,r)}function $V(r){let{extraTags:e,extraGlobalAttributes:t}=r,i=t||e?new fu(e,t):fu.default;return s=>rA(i,s)}const BV=es.parser.configure({top:"SingleExpression"}),sA=[{tag:"script",attrs:r=>r.type=="text/typescript"||r.lang=="ts",parser:WE.parser},{tag:"script",attrs:r=>r.type=="text/babel"||r.type=="text/jsx",parser:HE.parser},{tag:"script",attrs:r=>r.type=="text/typescript-jsx",parser:YE.parser},{tag:"script",attrs(r){return/^(importmap|speculationrules|application\/(.+\+)?json)$/i.test(r.type)},parser:BV},{tag:"script",attrs(r){return!r.type||/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^module$|^$/i.test(r.type)},parser:es.parser},{tag:"style",attrs(r){return(!r.lang||r.lang=="css")&&(!r.type||/^(text\/)?(x-)?(stylesheet|css)$/i.test(r.type))},parser:Sd.parser}],nA=[{name:"style",parser:Sd.parser.configure({top:"Styles"})}].concat(eA.map(r=>({name:r,parser:es.parser}))),aA=uo.define({name:"html",parser:u9.configure({props:[Xu.add({Element(r){let e=/^(\s*)(<\/)?/.exec(r.textAfter);return r.node.to<=r.pos+e[0].length?r.continue():r.lineIndent(r.node.from)+(e[2]?0:r.unit)},"OpenTag CloseTag SelfClosingTag"(r){return r.column(r.node.from)+r.unit},Document(r){if(r.pos+/\s*/.exec(r.textAfter)[0].length<r.node.to)return r.continue();let e=null,t;for(let i=r.node;;){let s=i.lastChild;if(!s||s.name!="Element"||s.to!=i.to)break;e=i=s}return e&&!((t=e.lastChild)&&(t.name=="CloseTag"||t.name=="SelfClosingTag"))?r.lineIndent(e.from)+r.unit:null}}),Ao.add({Element(r){let e=r.firstChild,t=r.lastChild;return!e||e.name!="OpenTag"?null:{from:e.to,to:t.name=="CloseTag"?t.from:r.to}}}),tk.add({"OpenTag CloseTag":r=>r.getChild("TagName")})]}),languageData:{commentTokens:{block:{open:"<!--",close:"-->"}},indentOnInput:/^\s*<\/\w+\W$/,wordChars:"-_"}}),bh=aA.configure({wrap:QE(sA,nA)});function NV(r={}){let e="",t;r.matchClosingTags===!1&&(e="noMatch"),r.selfClosingTags===!0&&(e=(e?e+" ":"")+"selfClosing"),(r.nestedLanguages&&r.nestedLanguages.length||r.nestedAttributes&&r.nestedAttributes.length)&&(t=QE((r.nestedLanguages||[]).concat(sA),(r.nestedAttributes||[]).concat(nA)));let i=t?aA.configure({wrap:t,dialect:e}):e?bh.configure({dialect:e}):bh;return new iu(i,[bh.data.of({autocomplete:$V(r)}),r.autoCloseTags!==!1?FV:[],EV().support,j9().support])}const eT=new Set("area base br col command embed frame hr img input keygen link meta param source track wbr menuitem".split(" ")),FV=me.inputHandler.of((r,e,t,i,s)=>{if(r.composing||r.state.readOnly||e!=t||i!=">"&&i!="/"||!bh.isActiveAt(r.state,e,-1))return!1;let n=s(),{state:a}=n,o=a.changeByRange(l=>{var u,c,h;let f=a.doc.sliceString(l.from-1,l.to)==i,{head:m}=l,S=ht(a).resolveInner(m,-1),y;if(f&&i==">"&&S.name=="EndTag"){let E=S.parent;if(((c=(u=E.parent)===null||u===void 0?void 0:u.lastChild)===null||c===void 0?void 0:c.name)!="CloseTag"&&(y=go(a.doc,E.parent,m))&&!eT.has(y)){let C=m+(a.doc.sliceString(m,m+1)===">"?1:0),_=`</${y}>`;return{range:l,changes:{from:m,to:C,insert:_}}}}else if(f&&i=="/"&&S.name=="IncompleteCloseTag"){let E=S.parent;if(S.from==m-2&&((h=E.lastChild)===null||h===void 0?void 0:h.name)!="CloseTag"&&(y=go(a.doc,E,m))&&!eT.has(y)){let C=m+(a.doc.sliceString(m,m+1)===">"?1:0),_=`${y}>`;return{range:ie.cursor(m+_.length,-1),changes:{from:m,to:C,insert:_}}}}return{range:l}});return o.changes.empty?!1:(r.dispatch([n,a.update(o,{userEvent:"input.complete",scrollIntoView:!0})]),!0)}),oA=lO({commentTokens:{block:{open:"<!--",close:"-->"}}}),lA=new Qe,uA=rq.configure({props:[Ao.add(r=>!r.is("Block")||r.is("Document")||Ug(r)!=null||UV(r)?void 0:(e,t)=>({from:t.doc.lineAt(e.from).to,to:e.to})),lA.add(Ug),Xu.add({Document:()=>null}),Rn.add({Document:oA})]});function Ug(r){let e=/^(?:ATX|Setext)Heading(\d)$/.exec(r.name);return e?+e[1]:void 0}function UV(r){return r.name=="OrderedList"||r.name=="BulletList"}function qV(r,e){let t=r;for(;;){let i=t.nextSibling,s;if(!i||(s=Ug(i.type))!=null&&s<=e)break;t=i}return t.to}const VV=UC.of((r,e,t)=>{for(let i=ht(r).resolveInner(t,-1);i&&!(i.from<e);i=i.parent){let s=i.type.prop(lA);if(s==null)continue;let n=qV(i,s);if(n>t)return{from:t,to:n}}return null});function QO(r){return new sr(oA,r,[],"markdown")}const XV=QO(uA),jV=uA.configure([pq,gq,mq,Oq,{props:[Ao.add({Table:(r,e)=>({from:e.doc.lineAt(r.from).to,to:r.to})})]}]),Td=QO(jV);function zV(r,e){return t=>{if(t&&r){let i=null;if(t=/\S*/.exec(t)[0],typeof r=="function"?i=r(t):i=sd.matchLanguageName(r,t,!0),i instanceof sd)return i.support?i.support.language.parser:tu.getSkippingParser(i.load());if(i)return i.parser}return e?e.parser:null}}class Kp{constructor(e,t,i,s,n,a,o){this.node=e,this.from=t,this.to=i,this.spaceBefore=s,this.spaceAfter=n,this.type=a,this.item=o}blank(e,t=!0){let i=this.spaceBefore+(this.node.name=="Blockquote"?">":"");if(e!=null){for(;i.length<e;)i+=" ";return i}else{for(let s=this.to-this.from-i.length-this.spaceAfter.length;s>0;s--)i+=" ";return i+(t?this.spaceAfter:"")}}marker(e,t){let i=this.node.name=="OrderedList"?String(+hA(this.item,e)[2]+t):"";return this.spaceBefore+i+this.type+this.spaceAfter}}function cA(r,e){let t=[],i=[];for(let s=r;s;s=s.parent){if(s.name=="FencedCode")return i;(s.name=="ListItem"||s.name=="Blockquote")&&t.push(s)}for(let s=t.length-1;s>=0;s--){let n=t[s],a,o=e.lineAt(n.from),l=n.from-o.from;if(n.name=="Blockquote"&&(a=/^ *>( ?)/.exec(o.text.slice(l))))i.push(new Kp(n,l,l+a[0].length,"",a[1],">",null));else if(n.name=="ListItem"&&n.parent.name=="OrderedList"&&(a=/^( *)\d+([.)])( *)/.exec(o.text.slice(l)))){let u=a[3],c=a[0].length;u.length>=4&&(u=u.slice(0,u.length-4),c-=4),i.push(new Kp(n.parent,l,l+c,a[1],u,a[2],n))}else if(n.name=="ListItem"&&n.parent.name=="BulletList"&&(a=/^( *)([-+*])( {1,4}\[[ xX]\])?( +)/.exec(o.text.slice(l)))){let u=a[4],c=a[0].length;u.length>4&&(u=u.slice(0,u.length-4),c-=4);let h=a[2];a[3]&&(h+=a[3].replace(/[xX]/," ")),i.push(new Kp(n.parent,l,l+c,a[1],u,h,n))}}return i}function hA(r,e){return/^(\s*)(\d+)(?=[.)])/.exec(e.sliceString(r.from,r.from+10))}function Jp(r,e,t,i=0){for(let s=-1,n=r;;){if(n.name=="ListItem"){let o=hA(n,e),l=+o[2];if(s>=0){if(l!=s+1)return;t.push({from:n.from+o[1].length,to:n.from+o[0].length,insert:String(s+2+i)})}s=l}let a=n.nextSibling;if(!a)break;n=a}}function $O(r,e){let t=/^[ \t]*/.exec(r)[0].length;if(!t||e.facet(Vu)!="	")return r;let i=wr(r,4,t),s="";for(let n=i;n>0;)n>=4?(s+="	",n-=4):(s+=" ",n--);return s+r.slice(t)}const ZV=({state:r,dispatch:e})=>{let t=ht(r),{doc:i}=r,s=null,n=r.changeByRange(a=>{if(!a.empty||!Td.isActiveAt(r,a.from,-1)&&!Td.isActiveAt(r,a.from,1))return s={range:a};let o=a.from,l=i.lineAt(o),u=cA(t.resolveInner(o,-1),i);for(;u.length&&u[u.length-1].from>o-l.from;)u.pop();if(!u.length)return s={range:a};let c=u[u.length-1];if(c.to-c.spaceAfter.length>o-l.from)return s={range:a};let h=o>=c.to-c.spaceAfter.length&&!/\S/.test(l.text.slice(c.to));if(c.item&&h){let E=c.node.firstChild,C=c.node.getChild("ListItem","ListItem");if(E.to>=o||C&&C.to<o||l.from>0&&!/[^\s>]/.test(i.lineAt(l.from-1).text)){let _=u.length>1?u[u.length-2]:null,b,T="";_&&_.item?(b=l.from+_.from,T=_.marker(i,1)):b=l.from+(_?_.to:0);let w=[{from:b,to:o,insert:T}];return c.node.name=="OrderedList"&&Jp(c.item,i,w,-2),_&&_.node.name=="OrderedList"&&Jp(_.item,i,w),{range:ie.cursor(b+T.length),changes:w}}else{let _=iT(u,r,l);return{range:ie.cursor(o+_.length+1),changes:{from:l.from,insert:_+r.lineBreak}}}}if(c.node.name=="Blockquote"&&h&&l.from){let E=i.lineAt(l.from-1),C=/>\s*$/.exec(E.text);if(C&&C.index==c.from){let _=r.changes([{from:E.from+C.index,to:E.to},{from:l.from+c.from,to:l.to}]);return{range:a.map(_),changes:_}}}let f=[];c.node.name=="OrderedList"&&Jp(c.item,i,f);let m=c.item&&c.item.from<l.from,S="";if(!m||/^[\s\d.)\-+*>]*/.exec(l.text)[0].length>=c.to)for(let E=0,C=u.length-1;E<=C;E++)S+=E==C&&!m?u[E].marker(i,1):u[E].blank(E<C?wr(l.text,4,u[E+1].from)-S.length:null);let y=o;for(;y>l.from&&/\s/.test(l.text.charAt(y-l.from-1));)y--;return S=$O(S,r),WV(c.node,r.doc)&&(S=iT(u,r,l)+r.lineBreak+S),f.push({from:y,to:o,insert:r.lineBreak+S}),{range:ie.cursor(y+S.length+1),changes:f}});return s?!1:(e(r.update(n,{scrollIntoView:!0,userEvent:"input"})),!0)};function tT(r){return r.name=="QuoteMark"||r.name=="ListMark"}function WV(r,e){if(r.name!="OrderedList"&&r.name!="BulletList")return!1;let t=r.firstChild,i=r.getChild("ListItem","ListItem");if(!i)return!1;let s=e.lineAt(t.to),n=e.lineAt(i.from),a=/^[\s>]*$/.test(s.text);return s.number+(a?0:1)<n.number}function iT(r,e,t){let i="";for(let s=0,n=r.length-2;s<=n;s++)i+=r[s].blank(s<n?wr(t.text,4,r[s+1].from)-i.length:null,s<n);return $O(i,e)}function HV(r,e){let t=r.resolveInner(e,-1),i=e;tT(t)&&(i=t.from,t=t.parent);for(let s;s=t.childBefore(i);)if(tT(s))i=s.from;else if(s.name=="OrderedList"||s.name=="BulletList")t=s.lastChild,i=t.to;else break;return t}const YV=({state:r,dispatch:e})=>{let t=ht(r),i=null,s=r.changeByRange(n=>{let a=n.from,{doc:o}=r;if(n.empty&&Td.isActiveAt(r,n.from)){let l=o.lineAt(a),u=cA(HV(t,a),o);if(u.length){let c=u[u.length-1],h=c.to-c.spaceAfter.length+(c.spaceAfter?1:0);if(a-l.from>h&&!/\S/.test(l.text.slice(h,a-l.from)))return{range:ie.cursor(l.from+h),changes:{from:l.from+h,to:a}};if(a-l.from==h&&(!c.item||l.from<=c.item.from||!/\S/.test(l.text.slice(0,c.to)))){let f=l.from+c.from;if(c.item&&c.node.from<c.item.from&&/\S/.test(l.text.slice(c.from,c.to))){let m=c.blank(wr(l.text,4,c.to)-wr(l.text,4,c.from));return f==l.from&&(m=$O(m,r)),{range:ie.cursor(f+m.length),changes:{from:f,to:l.from+c.to,insert:m}}}if(f<a)return{range:ie.cursor(f),changes:{from:f,to:a}}}}}return i={range:n}});return i?!1:(e(r.update(s,{scrollIntoView:!0,userEvent:"delete"})),!0)},GV=[{key:"Enter",run:ZV},{key:"Backspace",run:YV}],dA=NV({matchClosingTags:!1});function KV(r={}){let{codeLanguages:e,defaultCodeLanguage:t,addKeymap:i=!0,base:{parser:s}=XV,completeHTMLTags:n=!0,pasteURLAsLink:a=!0,htmlTagLanguage:o=dA}=r;if(!(s instanceof cf))throw new RangeError("Base parser provided to `markdown` should be a Markdown parser");let l=r.extensions?[r.extensions]:[],u=[o.support,VV],c;a&&u.push(iX),t instanceof iu?(u.push(t.support),c=t.language):t&&(c=t);let h=e||c?zV(e,c):void 0;l.push(nq({codeParser:h,htmlParser:o.language.parser})),i&&u.push(Ms.high(Fu.of(GV)));let f=QO(s.configure(l));return n&&u.push(f.data.of({autocomplete:JV})),new iu(f,u)}function JV(r){let{state:e,pos:t}=r,i=/<[:\-\.\w\u00b7-\uffff]*$/.exec(e.sliceDoc(t-25,t));if(!i)return null;let s=ht(e).resolveInner(t,-1);for(;s&&!s.type.isTop;){if(s.name=="CodeBlock"||s.name=="FencedCode"||s.name=="ProcessingInstructionBlock"||s.name=="CommentBlock"||s.name=="Link"||s.name=="Image")return null;s=s.parent}return{from:t-i[0].length,to:t,options:eX(),validFor:/^<[:\-\.\w\u00b7-\uffff]*$/}}let em=null;function eX(){if(em)return em;let r=QV(new bO(He.create({extensions:dA}),0,!0));return em=r?r.options:[]}const tX=/code|horizontalrule|html|link|comment|processing|escape|entity|image|mark|url/i,iX=me.domEventHandlers({paste:(r,e)=>{var t;let{main:i}=e.state.selection;if(i.empty)return!1;let s=(t=r.clipboardData)===null||t===void 0?void 0:t.getData("text/plain");if(!s||!/^(https?:\/\/|mailto:|xmpp:|www\.)/.test(s)||(/^www\./.test(s)&&(s="https://"+s),!Td.isActiveAt(e.state,i.from,1)))return!1;let n=ht(e.state),a=!1;return n.iterate({from:i.from,to:i.to,enter:o=>{(o.from>i.from||tX.test(o.name))&&(a=!0)},leave:o=>{o.to<i.to&&(a=!0)}}),a?!1:(e.dispatch({changes:[{from:i.from,insert:"["},{from:i.to,insert:`](${s})`}],userEvent:"input.paste",scrollIntoView:!0}),!0)}});class fA extends ea{connect(){if(this.cm)return;const e=()=>this.initializeCodeMirror(),t=i=>{if(!i)return!1;const s=getComputedStyle(i);return!(s.display==="none"||s.visibility==="hidden"||!i.offsetParent&&s.position!=="fixed")};document.head&&this.element.isConnected&&t(this.element)?e():requestAnimationFrame(()=>{document.head&&this.element.isConnected&&t(this.element)&&e()})}async initializeCodeMirror(){const e=this.textareaTarget||this.element.querySelector("textarea");if(!e)return;const t=me.theme({"&":{color:"#000",backgroundColor:"#fff"},".cm-content":{caretColor:"#000"},".cm-cursor, .cm-dropCursor":{borderLeft:"1px solid #000"},"&.cm-focused .cm-selectionBackground, .cm-selectionBackground, ::selection":{backgroundColor:"#d9d9d9"},".cm-gutters":{backgroundColor:"#f7f7f7",color:"#999",borderRight:"1px solid #ddd"}},{dark:!1}),i=me.theme({"&":{maxHeight:"60vh"},".cm-scroller":{overflowY:"auto"}}),s=[U.heading,U.heading1,U.heading2,U.heading3,U.heading4,U.heading5,U.heading6].filter(Boolean);U.headingMark&&s.push(U.headingMark);const n=zu.define([{tag:s,color:"#00f"},{tag:U.keyword,color:"#708"},{tag:U.atom,color:"#219"},{tag:U.number,color:"#164"},{tag:U.definition(U.variableName),color:"#00f"},{tag:U.variableName,color:"#000"},{tag:U.propertyName,color:"#00c"},{tag:U.typeName,color:"#085"},{tag:U.className,color:"#05a"},{tag:U.string,color:"#a11"},{tag:U.special(U.string),color:"#f50"},{tag:U.comment,color:"#a50"},{tag:U.meta,color:"#555"},{tag:U.link,color:"#00c",textDecoration:"underline"},{tag:U.tagName,color:"#170"},{tag:U.attributeName,color:"#00c"},{tag:U.bracket,color:"#997"},{tag:U.contentSeparator,color:"#888"},{tag:U.quote,color:"#090"},{tag:U.strong,fontWeight:"bold"},{tag:U.emphasis,fontStyle:"italic"},{tag:U.strikethrough,textDecoration:"line-through"},{tag:U.invalid,color:"#f00"}]),a=me.updateListener.of(c=>{c.docChanged&&(e.value=c.state.doc.toString())}),o=[XU,KV(),t,i,GC(n),a],l=document.createElement("div");l.className="cm-container",e.parentElement.insertBefore(l,e),this.cm=new me({doc:e.value||"",parent:l,extensions:o}),e.hidden=!0,e.setAttribute("aria-hidden","true"),e.value=this.cm.state.doc.toString();const u=e.closest("form");u&&!this._syncedOnSubmit&&(this._syncedOnSubmit=!0,u.addEventListener("submit",()=>{e.value=this.cm.state.doc.toString()})),this.editor=this.cm,this.boundInsertHandler||(this.boundInsertHandler=this.handleInsertText.bind(this),this.element.addEventListener("code-editor:insert-text",this.boundInsertHandler)),this.dispatch("ready",{detail:{view:this.cm}}),this.dispatch("initialized",{detail:{view:this.cm}}),this.element.dataset.codemirrorReady="true",this.element.classList.add("codemirror-initialized"),window.codeEditorInstances||(window.codeEditorInstances=new WeakMap),window.codeEditorInstances.set(this.element,this.cm),queueMicrotask(()=>requestAnimationFrame(()=>{}))}isVisible(e){if(!e)return!1;const t=getComputedStyle(e);return!(t.display==="none"||t.visibility==="hidden"||!e.offsetParent&&t.position!=="fixed")}insertText(e){if(console.log("=== CodeEditor insertText called ==="),console.log("Text to insert:",e),console.log("Editor available:",!!this.editor),this.editor&&this.editor.state){const t=this.editor.state.selection.main.head;console.log("Current cursor position:",t);const i=this.editor.state.update({changes:{from:t,insert:e}});this.editor.dispatch(i),this.editor.focus(),console.log("Text insertion completed successfully")}else console.warn("CodeMirror 6 editor not available for text insertion")}handleInsertText(e){console.log("=== CodeEditor received insert-text event ===");const t=e.detail.text;t&&(console.log("Inserting text via event:",t),this.insertText(t),this.dispatch("text-inserted",{detail:{text:t}}))}disconnect(){var e;try{(e=this.cm)==null||e.destroy()}finally{this.cm=null}this.editor=null,this.resizeHandler&&window.removeEventListener("resize",this.resizeHandler),this.orientationHandler&&window.removeEventListener("orientationchange",this.orientationHandler),this.boundInsertHandler&&(this.element.removeEventListener("code-editor:insert-text",this.boundInsertHandler),this.boundInsertHandler=null),window.codeEditorInstances&&window.codeEditorInstances.delete(this.element),this.element&&this.element.dataset&&delete this.element.dataset.codemirrorReady}}ue(fA,"targets",["textarea"]);class pA extends ea{connect(){console.log("VideoPlayer controller connected"),console.log("hasVideoTarget:",this.hasVideoTarget),console.log("videoTargets length:",this.videoTargets?this.videoTargets.length:"undefined"),console.log("All targets:",this.element.querySelectorAll('[data-video-player-target="video"]')),document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{console.log("DOMContentLoaded - calling initializePlayer"),this.initializePlayer()}):(console.log("Document already ready - calling initializePlayer"),this.initializePlayer())}disconnect(){this.player&&(this.player.dispose(),this.player=null)}initializePlayer(){console.log("initializePlayer called"),console.log("hasVideoTarget:",this.hasVideoTarget),console.log("videoTargets:",this.videoTargets);const e=this.element.querySelector('[data-video-player-target="video"]');if(console.log("Video element found:",e),!e){console.error("Video target element not found in controller element:",this.element);return}if(this.hasVideoTarget){console.log("Using hasVideoTarget path");const t=this.videoTarget;console.log("Video target:",t),console.log("Video target ID:",t.id),this.setupPlayer(t)}else console.log("Using direct query selector path"),console.log("Direct video element:",e),console.log("Direct video element ID:",e.id),this.setupPlayer(e)}setupPlayer(e){if(typeof H>"u"){console.error("Video.js library is not available");return}if(e.classList.contains("vjs-tech")){console.log("Video.js player already initialized for this element");return}this.player&&(console.log("Disposing existing player"),this.player.dispose(),this.player=null),e.classList.contains("video-js")||e.classList.add("video-js","vjs-default-skin");const t={fluid:!0,responsive:!0,controls:!0,playbackRates:[.5,1,1.25,1.5,2,4],language:"ja"};try{console.log("Attempting to initialize Video.js player with element:",e.id),this.player=H(e,t,()=>{console.log("Video.js player is ready")}),console.log("Player created successfully:",this.player)}catch(i){console.error("Failed to initialize Video.js player:",i)}}}ue(pA,"targets",["video"]);var yl={exports:{}},rX=yl.exports,rT;function sX(){return rT||(rT=1,(function(r,e){(function(t,i){i(e)})(rX,(function(t){var i=typeof window<"u"&&window.flatpickr!==void 0?window.flatpickr:{l10ns:{}},s={weekdays:{shorthand:["日","月","火","水","木","金","土"],longhand:["日曜日","月曜日","火曜日","水曜日","木曜日","金曜日","土曜日"]},months:{shorthand:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],longhand:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"]},time_24hr:!0,rangeSeparator:" から ",monthAriaLabel:"月",amPM:["午前","午後"],yearAriaLabel:"年",hourAriaLabel:"時間",minuteAriaLabel:"分"};i.l10ns.ja=s;var n=i.l10ns;t.Japanese=s,t.default=n,Object.defineProperty(t,"__esModule",{value:!0})}))})(yl,yl.exports)),yl.exports}var nX=sX();class qg extends ea{connect(){console.log("Flatpickr controller connected"),this.initializeFlatpickr()}initializeFlatpickr(){const e={mode:this.modeValue||"single",dateFormat:this.dateFormatValue||"Y/m/d",allowInput:!1,clickOpens:!0,locale:this.localeValue==="ja"?nX.Japanese:"default"};this.modeValue==="range"&&(e.mode="range",e.dateFormat="Y/m/d",e.separator=" 〜 "),this.flatpickr=Rt(this.inputTarget,e),console.log("Flatpickr initialized with options:",e)}disconnect(){this.flatpickr&&this.flatpickr.destroy()}}ue(qg,"targets",["input"]),ue(qg,"values",{mode:String,dateFormat:String,locale:String});window.videojs=H;window.flatpickr=Rt;window.startPasskeyAuthentication=nD;window.startPasskeyRegistration=aD;console.log("Passkey functions loaded globally:",{auth:!!window.startPasskeyAuthentication,reg:!!window.startPasskeyRegistration});window.ActiveStorage||(window.ActiveStorage=CR,s0(),console.log("ActiveStorage initialized"));async function mA(){return window.videojs?(console.log("Video.js already available:",!!window.videojs),window.videojs):(console.warn("Video.js not found on window object"),null)}window.loadVideoJS=mA;console.log("Pre-loading Video.js...");mA().then(()=>{console.log("Video.js pre-loaded successfully, window.videojs available:",!!window.videojs)}).catch(r=>{console.warn("Video.js pre-loading failed:",r)});const hf=rM.start();window.Stimulus=hf;hf.register("code-editor",fA);hf.register("video-player",pA);hf.register("flatpickr",qg);console.log("Application loaded with esbuild (CodeMirror dynamic)");window.checkActiveStorageStatus=function(){var e,t;const r={available:typeof window.ActiveStorage<"u",directUpload:typeof((e=window.ActiveStorage)==null?void 0:e.DirectUpload)=="function",started:((t=window.ActiveStorage)==null?void 0:t.started)||!1};return console.log("ActiveStorage Status:",r),r};document.addEventListener("turbo:before-fetch-request",r=>{const e=document.querySelector('meta[name="csrf-token"]').getAttribute("content");e&&(r.detail.fetchOptions.headers["X-CSRF-Token"]=e)});console.log("ActiveStorage initialized and ready");console.log("[Vite entry] application.js loaded at",new Date);location.pathname.startsWith("/posts/new")&&uD(()=>import("./new-Df5F4foJ.js").then(r=>r._),__vite__mapDeps([0,1]));
//# sourceMappingURL=application-BK0rgt2Z.js.map
