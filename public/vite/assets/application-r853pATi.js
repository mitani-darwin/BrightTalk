const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/new-Df5F4foJ.js","assets/passkey-r8IpbBKX.js"])))=>i.map(i=>d[i]);
var ln=Object.defineProperty;var gi=h=>{throw TypeError(h)};var cn=(h,r,o)=>r in h?ln(h,r,{enumerable:!0,configurable:!0,writable:!0,value:o}):h[r]=o;var Ce=(h,r,o)=>cn(h,typeof r!="symbol"?r+"":r,o),ri=(h,r,o)=>r.has(h)||gi("Cannot "+o);var De=(h,r,o)=>(ri(h,r,"read from private field"),o?o.call(h):r.get(h)),qe=(h,r,o)=>r.has(h)?gi("Cannot add the same private member more than once"):r instanceof WeakSet?r.add(h):r.set(h,o),Ye=(h,r,o,u)=>(ri(h,r,"write to private field"),u?u.call(h,o):r.set(h,o),o),Ie=(h,r,o)=>(ri(h,r,"access private method"),o);import{s as startPasskeyAuthentication,a as startPasskeyRegistration}from"./passkey-r8IpbBKX.js";const scriptRel="modulepreload",assetsURL=function(h){return"/vite/"+h},seen={},__vitePreload=function(r,o,u){let g=Promise.resolve();if(o&&o.length>0){let A=function(_){return Promise.all(_.map(ee=>Promise.resolve(ee).then(te=>({status:"fulfilled",value:te}),te=>({status:"rejected",reason:te}))))};document.getElementsByTagName("link");const R=document.querySelector("meta[property=csp-nonce]"),q=(R==null?void 0:R.nonce)||(R==null?void 0:R.getAttribute("nonce"));g=A(o.map(_=>{if(_=assetsURL(_),_ in seen)return;seen[_]=!0;const ee=_.endsWith(".css"),te=ee?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${_}"]${te}`))return;const ne=document.createElement("link");if(ne.rel=ee?"stylesheet":scriptRel,ee||(ne.as="script"),ne.crossOrigin="",ne.href=_,q&&ne.setAttribute("nonce",q),document.head.appendChild(ne),ee)return new Promise((re,oe)=>{ne.addEventListener("load",re),ne.addEventListener("error",()=>oe(new Error(`Unable to preload CSS for ${_}`)))})}))}function k(A){const R=new Event("vite:preloadError",{cancelable:!0});if(R.payload=A,window.dispatchEvent(R),!R.defaultPrevented)throw A}return g.then(A=>{for(const R of A||[])R.status==="rejected"&&k(R.reason);return r().catch(k)})};class EventListener{constructor(r,o,u){this.eventTarget=r,this.eventName=o,this.eventOptions=u,this.unorderedBindings=new Set}connect(){this.eventTarget.addEventListener(this.eventName,this,this.eventOptions)}disconnect(){this.eventTarget.removeEventListener(this.eventName,this,this.eventOptions)}bindingConnected(r){this.unorderedBindings.add(r)}bindingDisconnected(r){this.unorderedBindings.delete(r)}handleEvent(r){const o=extendEvent(r);for(const u of this.bindings){if(o.immediatePropagationStopped)break;u.handleEvent(o)}}hasBindings(){return this.unorderedBindings.size>0}get bindings(){return Array.from(this.unorderedBindings).sort((r,o)=>{const u=r.index,g=o.index;return u<g?-1:u>g?1:0})}}function extendEvent(h){if("immediatePropagationStopped"in h)return h;{const{stopImmediatePropagation:r}=h;return Object.assign(h,{immediatePropagationStopped:!1,stopImmediatePropagation(){this.immediatePropagationStopped=!0,r.call(this)}})}}class Dispatcher{constructor(r){this.application=r,this.eventListenerMaps=new Map,this.started=!1}start(){this.started||(this.started=!0,this.eventListeners.forEach(r=>r.connect()))}stop(){this.started&&(this.started=!1,this.eventListeners.forEach(r=>r.disconnect()))}get eventListeners(){return Array.from(this.eventListenerMaps.values()).reduce((r,o)=>r.concat(Array.from(o.values())),[])}bindingConnected(r){this.fetchEventListenerForBinding(r).bindingConnected(r)}bindingDisconnected(r,o=!1){this.fetchEventListenerForBinding(r).bindingDisconnected(r),o&&this.clearEventListenersForBinding(r)}handleError(r,o,u={}){this.application.handleError(r,`Error ${o}`,u)}clearEventListenersForBinding(r){const o=this.fetchEventListenerForBinding(r);o.hasBindings()||(o.disconnect(),this.removeMappedEventListenerFor(r))}removeMappedEventListenerFor(r){const{eventTarget:o,eventName:u,eventOptions:g}=r,k=this.fetchEventListenerMapForEventTarget(o),A=this.cacheKey(u,g);k.delete(A),k.size==0&&this.eventListenerMaps.delete(o)}fetchEventListenerForBinding(r){const{eventTarget:o,eventName:u,eventOptions:g}=r;return this.fetchEventListener(o,u,g)}fetchEventListener(r,o,u){const g=this.fetchEventListenerMapForEventTarget(r),k=this.cacheKey(o,u);let A=g.get(k);return A||(A=this.createEventListener(r,o,u),g.set(k,A)),A}createEventListener(r,o,u){const g=new EventListener(r,o,u);return this.started&&g.connect(),g}fetchEventListenerMapForEventTarget(r){let o=this.eventListenerMaps.get(r);return o||(o=new Map,this.eventListenerMaps.set(r,o)),o}cacheKey(r,o){const u=[r];return Object.keys(o).sort().forEach(g=>{u.push(`${o[g]?"":"!"}${g}`)}),u.join(":")}}const defaultActionDescriptorFilters={stop({event:h,value:r}){return r&&h.stopPropagation(),!0},prevent({event:h,value:r}){return r&&h.preventDefault(),!0},self({event:h,value:r,element:o}){return r?o===h.target:!0}},descriptorPattern=/^(?:(?:([^.]+?)\+)?(.+?)(?:\.(.+?))?(?:@(window|document))?->)?(.+?)(?:#([^:]+?))(?::(.+))?$/;function parseActionDescriptorString(h){const o=h.trim().match(descriptorPattern)||[];let u=o[2],g=o[3];return g&&!["keydown","keyup","keypress"].includes(u)&&(u+=`.${g}`,g=""),{eventTarget:parseEventTarget(o[4]),eventName:u,eventOptions:o[7]?parseEventOptions(o[7]):{},identifier:o[5],methodName:o[6],keyFilter:o[1]||g}}function parseEventTarget(h){if(h=="window")return window;if(h=="document")return document}function parseEventOptions(h){return h.split(":").reduce((r,o)=>Object.assign(r,{[o.replace(/^!/,"")]:!/^!/.test(o)}),{})}function stringifyEventTarget(h){if(h==window)return"window";if(h==document)return"document"}function camelize(h){return h.replace(/(?:[_-])([a-z0-9])/g,(r,o)=>o.toUpperCase())}function namespaceCamelize(h){return camelize(h.replace(/--/g,"-").replace(/__/g,"_"))}function capitalize(h){return h.charAt(0).toUpperCase()+h.slice(1)}function dasherize(h){return h.replace(/([A-Z])/g,(r,o)=>`-${o.toLowerCase()}`)}function tokenize(h){return h.match(/[^\s]+/g)||[]}function isSomething(h){return h!=null}function hasProperty(h,r){return Object.prototype.hasOwnProperty.call(h,r)}const allModifiers=["meta","ctrl","alt","shift"];class Action{constructor(r,o,u,g){this.element=r,this.index=o,this.eventTarget=u.eventTarget||r,this.eventName=u.eventName||getDefaultEventNameForElement(r)||error("missing event name"),this.eventOptions=u.eventOptions||{},this.identifier=u.identifier||error("missing identifier"),this.methodName=u.methodName||error("missing method name"),this.keyFilter=u.keyFilter||"",this.schema=g}static forToken(r,o){return new this(r.element,r.index,parseActionDescriptorString(r.content),o)}toString(){const r=this.keyFilter?`.${this.keyFilter}`:"",o=this.eventTargetName?`@${this.eventTargetName}`:"";return`${this.eventName}${r}${o}->${this.identifier}#${this.methodName}`}shouldIgnoreKeyboardEvent(r){if(!this.keyFilter)return!1;const o=this.keyFilter.split("+");if(this.keyFilterDissatisfied(r,o))return!0;const u=o.filter(g=>!allModifiers.includes(g))[0];return u?(hasProperty(this.keyMappings,u)||error(`contains unknown key filter: ${this.keyFilter}`),this.keyMappings[u].toLowerCase()!==r.key.toLowerCase()):!1}shouldIgnoreMouseEvent(r){if(!this.keyFilter)return!1;const o=[this.keyFilter];return!!this.keyFilterDissatisfied(r,o)}get params(){const r={},o=new RegExp(`^data-${this.identifier}-(.+)-param$`,"i");for(const{name:u,value:g}of Array.from(this.element.attributes)){const k=u.match(o),A=k&&k[1];A&&(r[camelize(A)]=typecast(g))}return r}get eventTargetName(){return stringifyEventTarget(this.eventTarget)}get keyMappings(){return this.schema.keyMappings}keyFilterDissatisfied(r,o){const[u,g,k,A]=allModifiers.map(R=>o.includes(R));return r.metaKey!==u||r.ctrlKey!==g||r.altKey!==k||r.shiftKey!==A}}const defaultEventNames={a:()=>"click",button:()=>"click",form:()=>"submit",details:()=>"toggle",input:h=>h.getAttribute("type")=="submit"?"click":"input",select:()=>"change",textarea:()=>"input"};function getDefaultEventNameForElement(h){const r=h.tagName.toLowerCase();if(r in defaultEventNames)return defaultEventNames[r](h)}function error(h){throw new Error(h)}function typecast(h){try{return JSON.parse(h)}catch{return h}}class Binding{constructor(r,o){this.context=r,this.action=o}get index(){return this.action.index}get eventTarget(){return this.action.eventTarget}get eventOptions(){return this.action.eventOptions}get identifier(){return this.context.identifier}handleEvent(r){const o=this.prepareActionEvent(r);this.willBeInvokedByEvent(r)&&this.applyEventModifiers(o)&&this.invokeWithEvent(o)}get eventName(){return this.action.eventName}get method(){const r=this.controller[this.methodName];if(typeof r=="function")return r;throw new Error(`Action "${this.action}" references undefined method "${this.methodName}"`)}applyEventModifiers(r){const{element:o}=this.action,{actionDescriptorFilters:u}=this.context.application,{controller:g}=this.context;let k=!0;for(const[A,R]of Object.entries(this.eventOptions))if(A in u){const q=u[A];k=k&&q({name:A,value:R,event:r,element:o,controller:g})}else continue;return k}prepareActionEvent(r){return Object.assign(r,{params:this.action.params})}invokeWithEvent(r){const{target:o,currentTarget:u}=r;try{this.method.call(this.controller,r),this.context.logDebugActivity(this.methodName,{event:r,target:o,currentTarget:u,action:this.methodName})}catch(g){const{identifier:k,controller:A,element:R,index:q}=this,_={identifier:k,controller:A,element:R,index:q,event:r};this.context.handleError(g,`invoking action "${this.action}"`,_)}}willBeInvokedByEvent(r){const o=r.target;return r instanceof KeyboardEvent&&this.action.shouldIgnoreKeyboardEvent(r)||r instanceof MouseEvent&&this.action.shouldIgnoreMouseEvent(r)?!1:this.element===o?!0:o instanceof Element&&this.element.contains(o)?this.scope.containsElement(o):this.scope.containsElement(this.action.element)}get controller(){return this.context.controller}get methodName(){return this.action.methodName}get element(){return this.scope.element}get scope(){return this.context.scope}}class ElementObserver{constructor(r,o){this.mutationObserverInit={attributes:!0,childList:!0,subtree:!0},this.element=r,this.started=!1,this.delegate=o,this.elements=new Set,this.mutationObserver=new MutationObserver(u=>this.processMutations(u))}start(){this.started||(this.started=!0,this.mutationObserver.observe(this.element,this.mutationObserverInit),this.refresh())}pause(r){this.started&&(this.mutationObserver.disconnect(),this.started=!1),r(),this.started||(this.mutationObserver.observe(this.element,this.mutationObserverInit),this.started=!0)}stop(){this.started&&(this.mutationObserver.takeRecords(),this.mutationObserver.disconnect(),this.started=!1)}refresh(){if(this.started){const r=new Set(this.matchElementsInTree());for(const o of Array.from(this.elements))r.has(o)||this.removeElement(o);for(const o of Array.from(r))this.addElement(o)}}processMutations(r){if(this.started)for(const o of r)this.processMutation(o)}processMutation(r){r.type=="attributes"?this.processAttributeChange(r.target,r.attributeName):r.type=="childList"&&(this.processRemovedNodes(r.removedNodes),this.processAddedNodes(r.addedNodes))}processAttributeChange(r,o){this.elements.has(r)?this.delegate.elementAttributeChanged&&this.matchElement(r)?this.delegate.elementAttributeChanged(r,o):this.removeElement(r):this.matchElement(r)&&this.addElement(r)}processRemovedNodes(r){for(const o of Array.from(r)){const u=this.elementFromNode(o);u&&this.processTree(u,this.removeElement)}}processAddedNodes(r){for(const o of Array.from(r)){const u=this.elementFromNode(o);u&&this.elementIsActive(u)&&this.processTree(u,this.addElement)}}matchElement(r){return this.delegate.matchElement(r)}matchElementsInTree(r=this.element){return this.delegate.matchElementsInTree(r)}processTree(r,o){for(const u of this.matchElementsInTree(r))o.call(this,u)}elementFromNode(r){if(r.nodeType==Node.ELEMENT_NODE)return r}elementIsActive(r){return r.isConnected!=this.element.isConnected?!1:this.element.contains(r)}addElement(r){this.elements.has(r)||this.elementIsActive(r)&&(this.elements.add(r),this.delegate.elementMatched&&this.delegate.elementMatched(r))}removeElement(r){this.elements.has(r)&&(this.elements.delete(r),this.delegate.elementUnmatched&&this.delegate.elementUnmatched(r))}}class AttributeObserver{constructor(r,o,u){this.attributeName=o,this.delegate=u,this.elementObserver=new ElementObserver(r,this)}get element(){return this.elementObserver.element}get selector(){return`[${this.attributeName}]`}start(){this.elementObserver.start()}pause(r){this.elementObserver.pause(r)}stop(){this.elementObserver.stop()}refresh(){this.elementObserver.refresh()}get started(){return this.elementObserver.started}matchElement(r){return r.hasAttribute(this.attributeName)}matchElementsInTree(r){const o=this.matchElement(r)?[r]:[],u=Array.from(r.querySelectorAll(this.selector));return o.concat(u)}elementMatched(r){this.delegate.elementMatchedAttribute&&this.delegate.elementMatchedAttribute(r,this.attributeName)}elementUnmatched(r){this.delegate.elementUnmatchedAttribute&&this.delegate.elementUnmatchedAttribute(r,this.attributeName)}elementAttributeChanged(r,o){this.delegate.elementAttributeValueChanged&&this.attributeName==o&&this.delegate.elementAttributeValueChanged(r,o)}}function add$1(h,r,o){fetch(h,r).add(o)}function del(h,r,o){fetch(h,r).delete(o),prune(h,r)}function fetch(h,r){let o=h.get(r);return o||(o=new Set,h.set(r,o)),o}function prune(h,r){const o=h.get(r);o!=null&&o.size==0&&h.delete(r)}class Multimap{constructor(){this.valuesByKey=new Map}get keys(){return Array.from(this.valuesByKey.keys())}get values(){return Array.from(this.valuesByKey.values()).reduce((o,u)=>o.concat(Array.from(u)),[])}get size(){return Array.from(this.valuesByKey.values()).reduce((o,u)=>o+u.size,0)}add(r,o){add$1(this.valuesByKey,r,o)}delete(r,o){del(this.valuesByKey,r,o)}has(r,o){const u=this.valuesByKey.get(r);return u!=null&&u.has(o)}hasKey(r){return this.valuesByKey.has(r)}hasValue(r){return Array.from(this.valuesByKey.values()).some(u=>u.has(r))}getValuesForKey(r){const o=this.valuesByKey.get(r);return o?Array.from(o):[]}getKeysForValue(r){return Array.from(this.valuesByKey).filter(([o,u])=>u.has(r)).map(([o,u])=>o)}}class SelectorObserver{constructor(r,o,u,g){this._selector=o,this.details=g,this.elementObserver=new ElementObserver(r,this),this.delegate=u,this.matchesByElement=new Multimap}get started(){return this.elementObserver.started}get selector(){return this._selector}set selector(r){this._selector=r,this.refresh()}start(){this.elementObserver.start()}pause(r){this.elementObserver.pause(r)}stop(){this.elementObserver.stop()}refresh(){this.elementObserver.refresh()}get element(){return this.elementObserver.element}matchElement(r){const{selector:o}=this;if(o){const u=r.matches(o);return this.delegate.selectorMatchElement?u&&this.delegate.selectorMatchElement(r,this.details):u}else return!1}matchElementsInTree(r){const{selector:o}=this;if(o){const u=this.matchElement(r)?[r]:[],g=Array.from(r.querySelectorAll(o)).filter(k=>this.matchElement(k));return u.concat(g)}else return[]}elementMatched(r){const{selector:o}=this;o&&this.selectorMatched(r,o)}elementUnmatched(r){const o=this.matchesByElement.getKeysForValue(r);for(const u of o)this.selectorUnmatched(r,u)}elementAttributeChanged(r,o){const{selector:u}=this;if(u){const g=this.matchElement(r),k=this.matchesByElement.has(u,r);g&&!k?this.selectorMatched(r,u):!g&&k&&this.selectorUnmatched(r,u)}}selectorMatched(r,o){this.delegate.selectorMatched(r,o,this.details),this.matchesByElement.add(o,r)}selectorUnmatched(r,o){this.delegate.selectorUnmatched(r,o,this.details),this.matchesByElement.delete(o,r)}}class StringMapObserver{constructor(r,o){this.element=r,this.delegate=o,this.started=!1,this.stringMap=new Map,this.mutationObserver=new MutationObserver(u=>this.processMutations(u))}start(){this.started||(this.started=!0,this.mutationObserver.observe(this.element,{attributes:!0,attributeOldValue:!0}),this.refresh())}stop(){this.started&&(this.mutationObserver.takeRecords(),this.mutationObserver.disconnect(),this.started=!1)}refresh(){if(this.started)for(const r of this.knownAttributeNames)this.refreshAttribute(r,null)}processMutations(r){if(this.started)for(const o of r)this.processMutation(o)}processMutation(r){const o=r.attributeName;o&&this.refreshAttribute(o,r.oldValue)}refreshAttribute(r,o){const u=this.delegate.getStringMapKeyForAttribute(r);if(u!=null){this.stringMap.has(r)||this.stringMapKeyAdded(u,r);const g=this.element.getAttribute(r);if(this.stringMap.get(r)!=g&&this.stringMapValueChanged(g,u,o),g==null){const k=this.stringMap.get(r);this.stringMap.delete(r),k&&this.stringMapKeyRemoved(u,r,k)}else this.stringMap.set(r,g)}}stringMapKeyAdded(r,o){this.delegate.stringMapKeyAdded&&this.delegate.stringMapKeyAdded(r,o)}stringMapValueChanged(r,o,u){this.delegate.stringMapValueChanged&&this.delegate.stringMapValueChanged(r,o,u)}stringMapKeyRemoved(r,o,u){this.delegate.stringMapKeyRemoved&&this.delegate.stringMapKeyRemoved(r,o,u)}get knownAttributeNames(){return Array.from(new Set(this.currentAttributeNames.concat(this.recordedAttributeNames)))}get currentAttributeNames(){return Array.from(this.element.attributes).map(r=>r.name)}get recordedAttributeNames(){return Array.from(this.stringMap.keys())}}class TokenListObserver{constructor(r,o,u){this.attributeObserver=new AttributeObserver(r,o,this),this.delegate=u,this.tokensByElement=new Multimap}get started(){return this.attributeObserver.started}start(){this.attributeObserver.start()}pause(r){this.attributeObserver.pause(r)}stop(){this.attributeObserver.stop()}refresh(){this.attributeObserver.refresh()}get element(){return this.attributeObserver.element}get attributeName(){return this.attributeObserver.attributeName}elementMatchedAttribute(r){this.tokensMatched(this.readTokensForElement(r))}elementAttributeValueChanged(r){const[o,u]=this.refreshTokensForElement(r);this.tokensUnmatched(o),this.tokensMatched(u)}elementUnmatchedAttribute(r){this.tokensUnmatched(this.tokensByElement.getValuesForKey(r))}tokensMatched(r){r.forEach(o=>this.tokenMatched(o))}tokensUnmatched(r){r.forEach(o=>this.tokenUnmatched(o))}tokenMatched(r){this.delegate.tokenMatched(r),this.tokensByElement.add(r.element,r)}tokenUnmatched(r){this.delegate.tokenUnmatched(r),this.tokensByElement.delete(r.element,r)}refreshTokensForElement(r){const o=this.tokensByElement.getValuesForKey(r),u=this.readTokensForElement(r),g=zip(o,u).findIndex(([k,A])=>!tokensAreEqual(k,A));return g==-1?[[],[]]:[o.slice(g),u.slice(g)]}readTokensForElement(r){const o=this.attributeName,u=r.getAttribute(o)||"";return parseTokenString(u,r,o)}}function parseTokenString(h,r,o){return h.trim().split(/\s+/).filter(u=>u.length).map((u,g)=>({element:r,attributeName:o,content:u,index:g}))}function zip(h,r){const o=Math.max(h.length,r.length);return Array.from({length:o},(u,g)=>[h[g],r[g]])}function tokensAreEqual(h,r){return h&&r&&h.index==r.index&&h.content==r.content}class ValueListObserver{constructor(r,o,u){this.tokenListObserver=new TokenListObserver(r,o,this),this.delegate=u,this.parseResultsByToken=new WeakMap,this.valuesByTokenByElement=new WeakMap}get started(){return this.tokenListObserver.started}start(){this.tokenListObserver.start()}stop(){this.tokenListObserver.stop()}refresh(){this.tokenListObserver.refresh()}get element(){return this.tokenListObserver.element}get attributeName(){return this.tokenListObserver.attributeName}tokenMatched(r){const{element:o}=r,{value:u}=this.fetchParseResultForToken(r);u&&(this.fetchValuesByTokenForElement(o).set(r,u),this.delegate.elementMatchedValue(o,u))}tokenUnmatched(r){const{element:o}=r,{value:u}=this.fetchParseResultForToken(r);u&&(this.fetchValuesByTokenForElement(o).delete(r),this.delegate.elementUnmatchedValue(o,u))}fetchParseResultForToken(r){let o=this.parseResultsByToken.get(r);return o||(o=this.parseToken(r),this.parseResultsByToken.set(r,o)),o}fetchValuesByTokenForElement(r){let o=this.valuesByTokenByElement.get(r);return o||(o=new Map,this.valuesByTokenByElement.set(r,o)),o}parseToken(r){try{return{value:this.delegate.parseValueForToken(r)}}catch(o){return{error:o}}}}class BindingObserver{constructor(r,o){this.context=r,this.delegate=o,this.bindingsByAction=new Map}start(){this.valueListObserver||(this.valueListObserver=new ValueListObserver(this.element,this.actionAttribute,this),this.valueListObserver.start())}stop(){this.valueListObserver&&(this.valueListObserver.stop(),delete this.valueListObserver,this.disconnectAllActions())}get element(){return this.context.element}get identifier(){return this.context.identifier}get actionAttribute(){return this.schema.actionAttribute}get schema(){return this.context.schema}get bindings(){return Array.from(this.bindingsByAction.values())}connectAction(r){const o=new Binding(this.context,r);this.bindingsByAction.set(r,o),this.delegate.bindingConnected(o)}disconnectAction(r){const o=this.bindingsByAction.get(r);o&&(this.bindingsByAction.delete(r),this.delegate.bindingDisconnected(o))}disconnectAllActions(){this.bindings.forEach(r=>this.delegate.bindingDisconnected(r,!0)),this.bindingsByAction.clear()}parseValueForToken(r){const o=Action.forToken(r,this.schema);if(o.identifier==this.identifier)return o}elementMatchedValue(r,o){this.connectAction(o)}elementUnmatchedValue(r,o){this.disconnectAction(o)}}class ValueObserver{constructor(r,o){this.context=r,this.receiver=o,this.stringMapObserver=new StringMapObserver(this.element,this),this.valueDescriptorMap=this.controller.valueDescriptorMap}start(){this.stringMapObserver.start(),this.invokeChangedCallbacksForDefaultValues()}stop(){this.stringMapObserver.stop()}get element(){return this.context.element}get controller(){return this.context.controller}getStringMapKeyForAttribute(r){if(r in this.valueDescriptorMap)return this.valueDescriptorMap[r].name}stringMapKeyAdded(r,o){const u=this.valueDescriptorMap[o];this.hasValue(r)||this.invokeChangedCallback(r,u.writer(this.receiver[r]),u.writer(u.defaultValue))}stringMapValueChanged(r,o,u){const g=this.valueDescriptorNameMap[o];r!==null&&(u===null&&(u=g.writer(g.defaultValue)),this.invokeChangedCallback(o,r,u))}stringMapKeyRemoved(r,o,u){const g=this.valueDescriptorNameMap[r];this.hasValue(r)?this.invokeChangedCallback(r,g.writer(this.receiver[r]),u):this.invokeChangedCallback(r,g.writer(g.defaultValue),u)}invokeChangedCallbacksForDefaultValues(){for(const{key:r,name:o,defaultValue:u,writer:g}of this.valueDescriptors)u!=null&&!this.controller.data.has(r)&&this.invokeChangedCallback(o,g(u),void 0)}invokeChangedCallback(r,o,u){const g=`${r}Changed`,k=this.receiver[g];if(typeof k=="function"){const A=this.valueDescriptorNameMap[r];try{const R=A.reader(o);let q=u;u&&(q=A.reader(u)),k.call(this.receiver,R,q)}catch(R){throw R instanceof TypeError&&(R.message=`Stimulus Value "${this.context.identifier}.${A.name}" - ${R.message}`),R}}}get valueDescriptors(){const{valueDescriptorMap:r}=this;return Object.keys(r).map(o=>r[o])}get valueDescriptorNameMap(){const r={};return Object.keys(this.valueDescriptorMap).forEach(o=>{const u=this.valueDescriptorMap[o];r[u.name]=u}),r}hasValue(r){const o=this.valueDescriptorNameMap[r],u=`has${capitalize(o.name)}`;return this.receiver[u]}}class TargetObserver{constructor(r,o){this.context=r,this.delegate=o,this.targetsByName=new Multimap}start(){this.tokenListObserver||(this.tokenListObserver=new TokenListObserver(this.element,this.attributeName,this),this.tokenListObserver.start())}stop(){this.tokenListObserver&&(this.disconnectAllTargets(),this.tokenListObserver.stop(),delete this.tokenListObserver)}tokenMatched({element:r,content:o}){this.scope.containsElement(r)&&this.connectTarget(r,o)}tokenUnmatched({element:r,content:o}){this.disconnectTarget(r,o)}connectTarget(r,o){var u;this.targetsByName.has(o,r)||(this.targetsByName.add(o,r),(u=this.tokenListObserver)===null||u===void 0||u.pause(()=>this.delegate.targetConnected(r,o)))}disconnectTarget(r,o){var u;this.targetsByName.has(o,r)&&(this.targetsByName.delete(o,r),(u=this.tokenListObserver)===null||u===void 0||u.pause(()=>this.delegate.targetDisconnected(r,o)))}disconnectAllTargets(){for(const r of this.targetsByName.keys)for(const o of this.targetsByName.getValuesForKey(r))this.disconnectTarget(o,r)}get attributeName(){return`data-${this.context.identifier}-target`}get element(){return this.context.element}get scope(){return this.context.scope}}function readInheritableStaticArrayValues(h,r){const o=getAncestorsForConstructor(h);return Array.from(o.reduce((u,g)=>(getOwnStaticArrayValues(g,r).forEach(k=>u.add(k)),u),new Set))}function readInheritableStaticObjectPairs(h,r){return getAncestorsForConstructor(h).reduce((u,g)=>(u.push(...getOwnStaticObjectPairs(g,r)),u),[])}function getAncestorsForConstructor(h){const r=[];for(;h;)r.push(h),h=Object.getPrototypeOf(h);return r.reverse()}function getOwnStaticArrayValues(h,r){const o=h[r];return Array.isArray(o)?o:[]}function getOwnStaticObjectPairs(h,r){const o=h[r];return o?Object.keys(o).map(u=>[u,o[u]]):[]}class OutletObserver{constructor(r,o){this.started=!1,this.context=r,this.delegate=o,this.outletsByName=new Multimap,this.outletElementsByName=new Multimap,this.selectorObserverMap=new Map,this.attributeObserverMap=new Map}start(){this.started||(this.outletDefinitions.forEach(r=>{this.setupSelectorObserverForOutlet(r),this.setupAttributeObserverForOutlet(r)}),this.started=!0,this.dependentContexts.forEach(r=>r.refresh()))}refresh(){this.selectorObserverMap.forEach(r=>r.refresh()),this.attributeObserverMap.forEach(r=>r.refresh())}stop(){this.started&&(this.started=!1,this.disconnectAllOutlets(),this.stopSelectorObservers(),this.stopAttributeObservers())}stopSelectorObservers(){this.selectorObserverMap.size>0&&(this.selectorObserverMap.forEach(r=>r.stop()),this.selectorObserverMap.clear())}stopAttributeObservers(){this.attributeObserverMap.size>0&&(this.attributeObserverMap.forEach(r=>r.stop()),this.attributeObserverMap.clear())}selectorMatched(r,o,{outletName:u}){const g=this.getOutlet(r,u);g&&this.connectOutlet(g,r,u)}selectorUnmatched(r,o,{outletName:u}){const g=this.getOutletFromMap(r,u);g&&this.disconnectOutlet(g,r,u)}selectorMatchElement(r,{outletName:o}){const u=this.selector(o),g=this.hasOutlet(r,o),k=r.matches(`[${this.schema.controllerAttribute}~=${o}]`);return u?g&&k&&r.matches(u):!1}elementMatchedAttribute(r,o){const u=this.getOutletNameFromOutletAttributeName(o);u&&this.updateSelectorObserverForOutlet(u)}elementAttributeValueChanged(r,o){const u=this.getOutletNameFromOutletAttributeName(o);u&&this.updateSelectorObserverForOutlet(u)}elementUnmatchedAttribute(r,o){const u=this.getOutletNameFromOutletAttributeName(o);u&&this.updateSelectorObserverForOutlet(u)}connectOutlet(r,o,u){var g;this.outletElementsByName.has(u,o)||(this.outletsByName.add(u,r),this.outletElementsByName.add(u,o),(g=this.selectorObserverMap.get(u))===null||g===void 0||g.pause(()=>this.delegate.outletConnected(r,o,u)))}disconnectOutlet(r,o,u){var g;this.outletElementsByName.has(u,o)&&(this.outletsByName.delete(u,r),this.outletElementsByName.delete(u,o),(g=this.selectorObserverMap.get(u))===null||g===void 0||g.pause(()=>this.delegate.outletDisconnected(r,o,u)))}disconnectAllOutlets(){for(const r of this.outletElementsByName.keys)for(const o of this.outletElementsByName.getValuesForKey(r))for(const u of this.outletsByName.getValuesForKey(r))this.disconnectOutlet(u,o,r)}updateSelectorObserverForOutlet(r){const o=this.selectorObserverMap.get(r);o&&(o.selector=this.selector(r))}setupSelectorObserverForOutlet(r){const o=this.selector(r),u=new SelectorObserver(document.body,o,this,{outletName:r});this.selectorObserverMap.set(r,u),u.start()}setupAttributeObserverForOutlet(r){const o=this.attributeNameForOutletName(r),u=new AttributeObserver(this.scope.element,o,this);this.attributeObserverMap.set(r,u),u.start()}selector(r){return this.scope.outlets.getSelectorForOutletName(r)}attributeNameForOutletName(r){return this.scope.schema.outletAttributeForScope(this.identifier,r)}getOutletNameFromOutletAttributeName(r){return this.outletDefinitions.find(o=>this.attributeNameForOutletName(o)===r)}get outletDependencies(){const r=new Multimap;return this.router.modules.forEach(o=>{const u=o.definition.controllerConstructor;readInheritableStaticArrayValues(u,"outlets").forEach(k=>r.add(k,o.identifier))}),r}get outletDefinitions(){return this.outletDependencies.getKeysForValue(this.identifier)}get dependentControllerIdentifiers(){return this.outletDependencies.getValuesForKey(this.identifier)}get dependentContexts(){const r=this.dependentControllerIdentifiers;return this.router.contexts.filter(o=>r.includes(o.identifier))}hasOutlet(r,o){return!!this.getOutlet(r,o)||!!this.getOutletFromMap(r,o)}getOutlet(r,o){return this.application.getControllerForElementAndIdentifier(r,o)}getOutletFromMap(r,o){return this.outletsByName.getValuesForKey(o).find(u=>u.element===r)}get scope(){return this.context.scope}get schema(){return this.context.schema}get identifier(){return this.context.identifier}get application(){return this.context.application}get router(){return this.application.router}}let Context$1=class{constructor(r,o){this.logDebugActivity=(u,g={})=>{const{identifier:k,controller:A,element:R}=this;g=Object.assign({identifier:k,controller:A,element:R},g),this.application.logDebugActivity(this.identifier,u,g)},this.module=r,this.scope=o,this.controller=new r.controllerConstructor(this),this.bindingObserver=new BindingObserver(this,this.dispatcher),this.valueObserver=new ValueObserver(this,this.controller),this.targetObserver=new TargetObserver(this,this),this.outletObserver=new OutletObserver(this,this);try{this.controller.initialize(),this.logDebugActivity("initialize")}catch(u){this.handleError(u,"initializing controller")}}connect(){this.bindingObserver.start(),this.valueObserver.start(),this.targetObserver.start(),this.outletObserver.start();try{this.controller.connect(),this.logDebugActivity("connect")}catch(r){this.handleError(r,"connecting controller")}}refresh(){this.outletObserver.refresh()}disconnect(){try{this.controller.disconnect(),this.logDebugActivity("disconnect")}catch(r){this.handleError(r,"disconnecting controller")}this.outletObserver.stop(),this.targetObserver.stop(),this.valueObserver.stop(),this.bindingObserver.stop()}get application(){return this.module.application}get identifier(){return this.module.identifier}get schema(){return this.application.schema}get dispatcher(){return this.application.dispatcher}get element(){return this.scope.element}get parentElement(){return this.element.parentElement}handleError(r,o,u={}){const{identifier:g,controller:k,element:A}=this;u=Object.assign({identifier:g,controller:k,element:A},u),this.application.handleError(r,`Error ${o}`,u)}targetConnected(r,o){this.invokeControllerMethod(`${o}TargetConnected`,r)}targetDisconnected(r,o){this.invokeControllerMethod(`${o}TargetDisconnected`,r)}outletConnected(r,o,u){this.invokeControllerMethod(`${namespaceCamelize(u)}OutletConnected`,r,o)}outletDisconnected(r,o,u){this.invokeControllerMethod(`${namespaceCamelize(u)}OutletDisconnected`,r,o)}invokeControllerMethod(r,...o){const u=this.controller;typeof u[r]=="function"&&u[r](...o)}};function bless(h){return shadow(h,getBlessedProperties(h))}function shadow(h,r){const o=extend(h),u=getShadowProperties(h.prototype,r);return Object.defineProperties(o.prototype,u),o}function getBlessedProperties(h){return readInheritableStaticArrayValues(h,"blessings").reduce((o,u)=>{const g=u(h);for(const k in g){const A=o[k]||{};o[k]=Object.assign(A,g[k])}return o},{})}function getShadowProperties(h,r){return getOwnKeys(r).reduce((o,u)=>{const g=getShadowedDescriptor(h,r,u);return g&&Object.assign(o,{[u]:g}),o},{})}function getShadowedDescriptor(h,r,o){const u=Object.getOwnPropertyDescriptor(h,o);if(!(u&&"value"in u)){const k=Object.getOwnPropertyDescriptor(r,o).value;return u&&(k.get=u.get||k.get,k.set=u.set||k.set),k}}const getOwnKeys=typeof Object.getOwnPropertySymbols=="function"?h=>[...Object.getOwnPropertyNames(h),...Object.getOwnPropertySymbols(h)]:Object.getOwnPropertyNames,extend=(()=>{function h(o){function u(){return Reflect.construct(o,arguments,new.target)}return u.prototype=Object.create(o.prototype,{constructor:{value:u}}),Reflect.setPrototypeOf(u,o),u}function r(){const u=h(function(){this.a.call(this)});return u.prototype.a=function(){},new u}try{return r(),h}catch{return u=>class extends u{}}})();function blessDefinition(h){return{identifier:h.identifier,controllerConstructor:bless(h.controllerConstructor)}}class Module{constructor(r,o){this.application=r,this.definition=blessDefinition(o),this.contextsByScope=new WeakMap,this.connectedContexts=new Set}get identifier(){return this.definition.identifier}get controllerConstructor(){return this.definition.controllerConstructor}get contexts(){return Array.from(this.connectedContexts)}connectContextForScope(r){const o=this.fetchContextForScope(r);this.connectedContexts.add(o),o.connect()}disconnectContextForScope(r){const o=this.contextsByScope.get(r);o&&(this.connectedContexts.delete(o),o.disconnect())}fetchContextForScope(r){let o=this.contextsByScope.get(r);return o||(o=new Context$1(this,r),this.contextsByScope.set(r,o)),o}}class ClassMap{constructor(r){this.scope=r}has(r){return this.data.has(this.getDataKey(r))}get(r){return this.getAll(r)[0]}getAll(r){const o=this.data.get(this.getDataKey(r))||"";return tokenize(o)}getAttributeName(r){return this.data.getAttributeNameForKey(this.getDataKey(r))}getDataKey(r){return`${r}-class`}get data(){return this.scope.data}}class DataMap{constructor(r){this.scope=r}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get(r){const o=this.getAttributeNameForKey(r);return this.element.getAttribute(o)}set(r,o){const u=this.getAttributeNameForKey(r);return this.element.setAttribute(u,o),this.get(r)}has(r){const o=this.getAttributeNameForKey(r);return this.element.hasAttribute(o)}delete(r){if(this.has(r)){const o=this.getAttributeNameForKey(r);return this.element.removeAttribute(o),!0}else return!1}getAttributeNameForKey(r){return`data-${this.identifier}-${dasherize(r)}`}}class Guide{constructor(r){this.warnedKeysByObject=new WeakMap,this.logger=r}warn(r,o,u){let g=this.warnedKeysByObject.get(r);g||(g=new Set,this.warnedKeysByObject.set(r,g)),g.has(o)||(g.add(o),this.logger.warn(u,r))}}function attributeValueContainsToken(h,r){return`[${h}~="${r}"]`}class TargetSet{constructor(r){this.scope=r}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get schema(){return this.scope.schema}has(r){return this.find(r)!=null}find(...r){return r.reduce((o,u)=>o||this.findTarget(u)||this.findLegacyTarget(u),void 0)}findAll(...r){return r.reduce((o,u)=>[...o,...this.findAllTargets(u),...this.findAllLegacyTargets(u)],[])}findTarget(r){const o=this.getSelectorForTargetName(r);return this.scope.findElement(o)}findAllTargets(r){const o=this.getSelectorForTargetName(r);return this.scope.findAllElements(o)}getSelectorForTargetName(r){const o=this.schema.targetAttributeForScope(this.identifier);return attributeValueContainsToken(o,r)}findLegacyTarget(r){const o=this.getLegacySelectorForTargetName(r);return this.deprecate(this.scope.findElement(o),r)}findAllLegacyTargets(r){const o=this.getLegacySelectorForTargetName(r);return this.scope.findAllElements(o).map(u=>this.deprecate(u,r))}getLegacySelectorForTargetName(r){const o=`${this.identifier}.${r}`;return attributeValueContainsToken(this.schema.targetAttribute,o)}deprecate(r,o){if(r){const{identifier:u}=this,g=this.schema.targetAttribute,k=this.schema.targetAttributeForScope(u);this.guide.warn(r,`target:${o}`,`Please replace ${g}="${u}.${o}" with ${k}="${o}". The ${g} attribute is deprecated and will be removed in a future version of Stimulus.`)}return r}get guide(){return this.scope.guide}}class OutletSet{constructor(r,o){this.scope=r,this.controllerElement=o}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get schema(){return this.scope.schema}has(r){return this.find(r)!=null}find(...r){return r.reduce((o,u)=>o||this.findOutlet(u),void 0)}findAll(...r){return r.reduce((o,u)=>[...o,...this.findAllOutlets(u)],[])}getSelectorForOutletName(r){const o=this.schema.outletAttributeForScope(this.identifier,r);return this.controllerElement.getAttribute(o)}findOutlet(r){const o=this.getSelectorForOutletName(r);if(o)return this.findElement(o,r)}findAllOutlets(r){const o=this.getSelectorForOutletName(r);return o?this.findAllElements(o,r):[]}findElement(r,o){return this.scope.queryElements(r).filter(g=>this.matchesElement(g,r,o))[0]}findAllElements(r,o){return this.scope.queryElements(r).filter(g=>this.matchesElement(g,r,o))}matchesElement(r,o,u){const g=r.getAttribute(this.scope.schema.controllerAttribute)||"";return r.matches(o)&&g.split(" ").includes(u)}}class Scope{constructor(r,o,u,g){this.targets=new TargetSet(this),this.classes=new ClassMap(this),this.data=new DataMap(this),this.containsElement=k=>k.closest(this.controllerSelector)===this.element,this.schema=r,this.element=o,this.identifier=u,this.guide=new Guide(g),this.outlets=new OutletSet(this.documentScope,o)}findElement(r){return this.element.matches(r)?this.element:this.queryElements(r).find(this.containsElement)}findAllElements(r){return[...this.element.matches(r)?[this.element]:[],...this.queryElements(r).filter(this.containsElement)]}queryElements(r){return Array.from(this.element.querySelectorAll(r))}get controllerSelector(){return attributeValueContainsToken(this.schema.controllerAttribute,this.identifier)}get isDocumentScope(){return this.element===document.documentElement}get documentScope(){return this.isDocumentScope?this:new Scope(this.schema,document.documentElement,this.identifier,this.guide.logger)}}class ScopeObserver{constructor(r,o,u){this.element=r,this.schema=o,this.delegate=u,this.valueListObserver=new ValueListObserver(this.element,this.controllerAttribute,this),this.scopesByIdentifierByElement=new WeakMap,this.scopeReferenceCounts=new WeakMap}start(){this.valueListObserver.start()}stop(){this.valueListObserver.stop()}get controllerAttribute(){return this.schema.controllerAttribute}parseValueForToken(r){const{element:o,content:u}=r;return this.parseValueForElementAndIdentifier(o,u)}parseValueForElementAndIdentifier(r,o){const u=this.fetchScopesByIdentifierForElement(r);let g=u.get(o);return g||(g=this.delegate.createScopeForElementAndIdentifier(r,o),u.set(o,g)),g}elementMatchedValue(r,o){const u=(this.scopeReferenceCounts.get(o)||0)+1;this.scopeReferenceCounts.set(o,u),u==1&&this.delegate.scopeConnected(o)}elementUnmatchedValue(r,o){const u=this.scopeReferenceCounts.get(o);u&&(this.scopeReferenceCounts.set(o,u-1),u==1&&this.delegate.scopeDisconnected(o))}fetchScopesByIdentifierForElement(r){let o=this.scopesByIdentifierByElement.get(r);return o||(o=new Map,this.scopesByIdentifierByElement.set(r,o)),o}}class Router{constructor(r){this.application=r,this.scopeObserver=new ScopeObserver(this.element,this.schema,this),this.scopesByIdentifier=new Multimap,this.modulesByIdentifier=new Map}get element(){return this.application.element}get schema(){return this.application.schema}get logger(){return this.application.logger}get controllerAttribute(){return this.schema.controllerAttribute}get modules(){return Array.from(this.modulesByIdentifier.values())}get contexts(){return this.modules.reduce((r,o)=>r.concat(o.contexts),[])}start(){this.scopeObserver.start()}stop(){this.scopeObserver.stop()}loadDefinition(r){this.unloadIdentifier(r.identifier);const o=new Module(this.application,r);this.connectModule(o);const u=r.controllerConstructor.afterLoad;u&&u.call(r.controllerConstructor,r.identifier,this.application)}unloadIdentifier(r){const o=this.modulesByIdentifier.get(r);o&&this.disconnectModule(o)}getContextForElementAndIdentifier(r,o){const u=this.modulesByIdentifier.get(o);if(u)return u.contexts.find(g=>g.element==r)}proposeToConnectScopeForElementAndIdentifier(r,o){const u=this.scopeObserver.parseValueForElementAndIdentifier(r,o);u?this.scopeObserver.elementMatchedValue(u.element,u):console.error(`Couldn't find or create scope for identifier: "${o}" and element:`,r)}handleError(r,o,u){this.application.handleError(r,o,u)}createScopeForElementAndIdentifier(r,o){return new Scope(this.schema,r,o,this.logger)}scopeConnected(r){this.scopesByIdentifier.add(r.identifier,r);const o=this.modulesByIdentifier.get(r.identifier);o&&o.connectContextForScope(r)}scopeDisconnected(r){this.scopesByIdentifier.delete(r.identifier,r);const o=this.modulesByIdentifier.get(r.identifier);o&&o.disconnectContextForScope(r)}connectModule(r){this.modulesByIdentifier.set(r.identifier,r),this.scopesByIdentifier.getValuesForKey(r.identifier).forEach(u=>r.connectContextForScope(u))}disconnectModule(r){this.modulesByIdentifier.delete(r.identifier),this.scopesByIdentifier.getValuesForKey(r.identifier).forEach(u=>r.disconnectContextForScope(u))}}const defaultSchema={controllerAttribute:"data-controller",actionAttribute:"data-action",targetAttribute:"data-target",targetAttributeForScope:h=>`data-${h}-target`,outletAttributeForScope:(h,r)=>`data-${h}-${r}-outlet`,keyMappings:Object.assign(Object.assign({enter:"Enter",tab:"Tab",esc:"Escape",space:" ",up:"ArrowUp",down:"ArrowDown",left:"ArrowLeft",right:"ArrowRight",home:"Home",end:"End",page_up:"PageUp",page_down:"PageDown"},objectFromEntries("abcdefghijklmnopqrstuvwxyz".split("").map(h=>[h,h]))),objectFromEntries("0123456789".split("").map(h=>[h,h])))};function objectFromEntries(h){return h.reduce((r,[o,u])=>Object.assign(Object.assign({},r),{[o]:u}),{})}class Application{constructor(r=document.documentElement,o=defaultSchema){this.logger=console,this.debug=!1,this.logDebugActivity=(u,g,k={})=>{this.debug&&this.logFormattedMessage(u,g,k)},this.element=r,this.schema=o,this.dispatcher=new Dispatcher(this),this.router=new Router(this),this.actionDescriptorFilters=Object.assign({},defaultActionDescriptorFilters)}static start(r,o){const u=new this(r,o);return u.start(),u}async start(){await domReady(),this.logDebugActivity("application","starting"),this.dispatcher.start(),this.router.start(),this.logDebugActivity("application","start")}stop(){this.logDebugActivity("application","stopping"),this.dispatcher.stop(),this.router.stop(),this.logDebugActivity("application","stop")}register(r,o){this.load({identifier:r,controllerConstructor:o})}registerActionOption(r,o){this.actionDescriptorFilters[r]=o}load(r,...o){(Array.isArray(r)?r:[r,...o]).forEach(g=>{g.controllerConstructor.shouldLoad&&this.router.loadDefinition(g)})}unload(r,...o){(Array.isArray(r)?r:[r,...o]).forEach(g=>this.router.unloadIdentifier(g))}get controllers(){return this.router.contexts.map(r=>r.controller)}getControllerForElementAndIdentifier(r,o){const u=this.router.getContextForElementAndIdentifier(r,o);return u?u.controller:null}handleError(r,o,u){var g;this.logger.error(`%s

%o

%o`,o,r,u),(g=window.onerror)===null||g===void 0||g.call(window,o,"",0,0,r)}logFormattedMessage(r,o,u={}){u=Object.assign({application:this},u),this.logger.groupCollapsed(`${r} #${o}`),this.logger.log("details:",Object.assign({},u)),this.logger.groupEnd()}}function domReady(){return new Promise(h=>{document.readyState=="loading"?document.addEventListener("DOMContentLoaded",()=>h()):h()})}function ClassPropertiesBlessing(h){return readInheritableStaticArrayValues(h,"classes").reduce((o,u)=>Object.assign(o,propertiesForClassDefinition(u)),{})}function propertiesForClassDefinition(h){return{[`${h}Class`]:{get(){const{classes:r}=this;if(r.has(h))return r.get(h);{const o=r.getAttributeName(h);throw new Error(`Missing attribute "${o}"`)}}},[`${h}Classes`]:{get(){return this.classes.getAll(h)}},[`has${capitalize(h)}Class`]:{get(){return this.classes.has(h)}}}}function OutletPropertiesBlessing(h){return readInheritableStaticArrayValues(h,"outlets").reduce((o,u)=>Object.assign(o,propertiesForOutletDefinition(u)),{})}function getOutletController(h,r,o){return h.application.getControllerForElementAndIdentifier(r,o)}function getControllerAndEnsureConnectedScope(h,r,o){let u=getOutletController(h,r,o);if(u||(h.application.router.proposeToConnectScopeForElementAndIdentifier(r,o),u=getOutletController(h,r,o),u))return u}function propertiesForOutletDefinition(h){const r=namespaceCamelize(h);return{[`${r}Outlet`]:{get(){const o=this.outlets.find(h),u=this.outlets.getSelectorForOutletName(h);if(o){const g=getControllerAndEnsureConnectedScope(this,o,h);if(g)return g;throw new Error(`The provided outlet element is missing an outlet controller "${h}" instance for host controller "${this.identifier}"`)}throw new Error(`Missing outlet element "${h}" for host controller "${this.identifier}". Stimulus couldn't find a matching outlet element using selector "${u}".`)}},[`${r}Outlets`]:{get(){const o=this.outlets.findAll(h);return o.length>0?o.map(u=>{const g=getControllerAndEnsureConnectedScope(this,u,h);if(g)return g;console.warn(`The provided outlet element is missing an outlet controller "${h}" instance for host controller "${this.identifier}"`,u)}).filter(u=>u):[]}},[`${r}OutletElement`]:{get(){const o=this.outlets.find(h),u=this.outlets.getSelectorForOutletName(h);if(o)return o;throw new Error(`Missing outlet element "${h}" for host controller "${this.identifier}". Stimulus couldn't find a matching outlet element using selector "${u}".`)}},[`${r}OutletElements`]:{get(){return this.outlets.findAll(h)}},[`has${capitalize(r)}Outlet`]:{get(){return this.outlets.has(h)}}}}function TargetPropertiesBlessing(h){return readInheritableStaticArrayValues(h,"targets").reduce((o,u)=>Object.assign(o,propertiesForTargetDefinition(u)),{})}function propertiesForTargetDefinition(h){return{[`${h}Target`]:{get(){const r=this.targets.find(h);if(r)return r;throw new Error(`Missing target element "${h}" for "${this.identifier}" controller`)}},[`${h}Targets`]:{get(){return this.targets.findAll(h)}},[`has${capitalize(h)}Target`]:{get(){return this.targets.has(h)}}}}function ValuePropertiesBlessing(h){const r=readInheritableStaticObjectPairs(h,"values"),o={valueDescriptorMap:{get(){return r.reduce((u,g)=>{const k=parseValueDefinitionPair(g,this.identifier),A=this.data.getAttributeNameForKey(k.key);return Object.assign(u,{[A]:k})},{})}}};return r.reduce((u,g)=>Object.assign(u,propertiesForValueDefinitionPair(g)),o)}function propertiesForValueDefinitionPair(h,r){const o=parseValueDefinitionPair(h,r),{key:u,name:g,reader:k,writer:A}=o;return{[g]:{get(){const R=this.data.get(u);return R!==null?k(R):o.defaultValue},set(R){R===void 0?this.data.delete(u):this.data.set(u,A(R))}},[`has${capitalize(g)}`]:{get(){return this.data.has(u)||o.hasCustomDefaultValue}}}}function parseValueDefinitionPair([h,r],o){return valueDescriptorForTokenAndTypeDefinition({controller:o,token:h,typeDefinition:r})}function parseValueTypeConstant(h){switch(h){case Array:return"array";case Boolean:return"boolean";case Number:return"number";case Object:return"object";case String:return"string"}}function parseValueTypeDefault(h){switch(typeof h){case"boolean":return"boolean";case"number":return"number";case"string":return"string"}if(Array.isArray(h))return"array";if(Object.prototype.toString.call(h)==="[object Object]")return"object"}function parseValueTypeObject(h){const{controller:r,token:o,typeObject:u}=h,g=isSomething(u.type),k=isSomething(u.default),A=g&&k,R=g&&!k,q=!g&&k,_=parseValueTypeConstant(u.type),ee=parseValueTypeDefault(h.typeObject.default);if(R)return _;if(q)return ee;if(_!==ee){const te=r?`${r}.${o}`:o;throw new Error(`The specified default value for the Stimulus Value "${te}" must match the defined type "${_}". The provided default value of "${u.default}" is of type "${ee}".`)}if(A)return _}function parseValueTypeDefinition(h){const{controller:r,token:o,typeDefinition:u}=h,k=parseValueTypeObject({controller:r,token:o,typeObject:u}),A=parseValueTypeDefault(u),R=parseValueTypeConstant(u),q=k||A||R;if(q)return q;const _=r?`${r}.${u}`:o;throw new Error(`Unknown value type "${_}" for "${o}" value`)}function defaultValueForDefinition(h){const r=parseValueTypeConstant(h);if(r)return defaultValuesByType[r];const o=hasProperty(h,"default"),u=hasProperty(h,"type"),g=h;if(o)return g.default;if(u){const{type:k}=g,A=parseValueTypeConstant(k);if(A)return defaultValuesByType[A]}return h}function valueDescriptorForTokenAndTypeDefinition(h){const{token:r,typeDefinition:o}=h,u=`${dasherize(r)}-value`,g=parseValueTypeDefinition(h);return{type:g,key:u,name:camelize(u),get defaultValue(){return defaultValueForDefinition(o)},get hasCustomDefaultValue(){return parseValueTypeDefault(o)!==void 0},reader:readers[g],writer:writers[g]||writers.default}}const defaultValuesByType={get array(){return[]},boolean:!1,number:0,get object(){return{}},string:""},readers={array(h){const r=JSON.parse(h);if(!Array.isArray(r))throw new TypeError(`expected value of type "array" but instead got value "${h}" of type "${parseValueTypeDefault(r)}"`);return r},boolean(h){return!(h=="0"||String(h).toLowerCase()=="false")},number(h){return Number(h.replace(/_/g,""))},object(h){const r=JSON.parse(h);if(r===null||typeof r!="object"||Array.isArray(r))throw new TypeError(`expected value of type "object" but instead got value "${h}" of type "${parseValueTypeDefault(r)}"`);return r},string(h){return h}},writers={default:writeString,array:writeJSON,object:writeJSON};function writeJSON(h){return JSON.stringify(h)}function writeString(h){return`${h}`}class Controller{constructor(r){this.context=r}static get shouldLoad(){return!0}static afterLoad(r,o){}get application(){return this.context.application}get scope(){return this.context.scope}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get targets(){return this.scope.targets}get outlets(){return this.scope.outlets}get classes(){return this.scope.classes}get data(){return this.scope.data}initialize(){}connect(){}disconnect(){}dispatch(r,{target:o=this.element,detail:u={},prefix:g=this.identifier,bubbles:k=!0,cancelable:A=!0}={}){const R=g?`${g}:${r}`:r,q=new CustomEvent(R,{detail:u,bubbles:k,cancelable:A});return o.dispatchEvent(q),q}}Controller.blessings=[ClassPropertiesBlessing,TargetPropertiesBlessing,ValuePropertiesBlessing,OutletPropertiesBlessing];Controller.targets=[];Controller.outlets=[];Controller.values={};/*!
Turbo 8.0.17
Copyright  2025 37signals LLC
 */(function(h){if(typeof h.requestSubmit=="function")return;h.requestSubmit=function(u){u?(r(u,this),u.click()):(u=document.createElement("input"),u.type="submit",u.hidden=!0,this.appendChild(u),u.click(),this.removeChild(u))};function r(u,g){u instanceof HTMLElement||o(TypeError,"parameter 1 is not of type 'HTMLElement'"),u.type=="submit"||o(TypeError,"The specified element is not a submit button"),u.form==g||o(DOMException,"The specified element is not owned by this form element","NotFoundError")}function o(u,g,k){throw new u("Failed to execute 'requestSubmit' on 'HTMLFormElement': "+g+".",k)}})(HTMLFormElement.prototype);const submittersByForm=new WeakMap;function findSubmitterFromClickTarget(h){const r=h instanceof Element?h:h instanceof Node?h.parentElement:null,o=r?r.closest("input, button"):null;return(o==null?void 0:o.type)=="submit"?o:null}function clickCaptured(h){const r=findSubmitterFromClickTarget(h.target);r&&r.form&&submittersByForm.set(r.form,r)}(function(){if("submitter"in Event.prototype)return;let h=window.Event.prototype;if("SubmitEvent"in window){const r=window.SubmitEvent.prototype;if(/Apple Computer/.test(navigator.vendor)&&!("submitter"in r))h=r;else return}addEventListener("click",clickCaptured,!0),Object.defineProperty(h,"submitter",{get(){if(this.type=="submit"&&this.target instanceof HTMLFormElement)return submittersByForm.get(this.target)}})})();const FrameLoadingStyle={eager:"eager",lazy:"lazy"},Ut=class Ut extends HTMLElement{constructor(){super();Ce(this,"loaded",Promise.resolve());this.delegate=new Ut.delegateConstructor(this)}static get observedAttributes(){return["disabled","loading","src"]}connectedCallback(){this.delegate.connect()}disconnectedCallback(){this.delegate.disconnect()}reload(){return this.delegate.sourceURLReloaded()}attributeChangedCallback(o){o=="loading"?this.delegate.loadingStyleChanged():o=="src"?this.delegate.sourceURLChanged():o=="disabled"&&this.delegate.disabledChanged()}get src(){return this.getAttribute("src")}set src(o){o?this.setAttribute("src",o):this.removeAttribute("src")}get refresh(){return this.getAttribute("refresh")}set refresh(o){o?this.setAttribute("refresh",o):this.removeAttribute("refresh")}get shouldReloadWithMorph(){return this.src&&this.refresh==="morph"}get loading(){return frameLoadingStyleFromString(this.getAttribute("loading")||"")}set loading(o){o?this.setAttribute("loading",o):this.removeAttribute("loading")}get disabled(){return this.hasAttribute("disabled")}set disabled(o){o?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get autoscroll(){return this.hasAttribute("autoscroll")}set autoscroll(o){o?this.setAttribute("autoscroll",""):this.removeAttribute("autoscroll")}get complete(){return!this.delegate.isLoading}get isActive(){return this.ownerDocument===document&&!this.isPreview}get isPreview(){var o,u;return(u=(o=this.ownerDocument)==null?void 0:o.documentElement)==null?void 0:u.hasAttribute("data-turbo-preview")}};Ce(Ut,"delegateConstructor");let FrameElement=Ut;function frameLoadingStyleFromString(h){switch(h.toLowerCase()){case"lazy":return FrameLoadingStyle.lazy;default:return FrameLoadingStyle.eager}}const drive={enabled:!0,progressBarDelay:500,unvisitableExtensions:new Set([".7z",".aac",".apk",".avi",".bmp",".bz2",".css",".csv",".deb",".dmg",".doc",".docx",".exe",".gif",".gz",".heic",".heif",".ico",".iso",".jpeg",".jpg",".js",".json",".m4a",".mkv",".mov",".mp3",".mp4",".mpeg",".mpg",".msi",".ogg",".ogv",".pdf",".pkg",".png",".ppt",".pptx",".rar",".rtf",".svg",".tar",".tif",".tiff",".txt",".wav",".webm",".webp",".wma",".wmv",".xls",".xlsx",".xml",".zip"])};function activateScriptElement(h){if(h.getAttribute("data-turbo-eval")=="false")return h;{const r=document.createElement("script"),o=getCspNonce();return o&&(r.nonce=o),r.textContent=h.textContent,r.async=!1,copyElementAttributes(r,h),r}}function copyElementAttributes(h,r){for(const{name:o,value:u}of r.attributes)h.setAttribute(o,u)}function createDocumentFragment(h){const r=document.createElement("template");return r.innerHTML=h,r.content}function dispatch(h,{target:r,cancelable:o,detail:u}={}){const g=new CustomEvent(h,{cancelable:o,bubbles:!0,composed:!0,detail:u});return r&&r.isConnected?r.dispatchEvent(g):document.documentElement.dispatchEvent(g),g}function cancelEvent(h){h.preventDefault(),h.stopImmediatePropagation()}function nextRepaint(){return document.visibilityState==="hidden"?nextEventLoopTick():nextAnimationFrame()}function nextAnimationFrame(){return new Promise(h=>requestAnimationFrame(()=>h()))}function nextEventLoopTick(){return new Promise(h=>setTimeout(()=>h(),0))}function nextMicrotask(){return Promise.resolve()}function parseHTMLDocument(h=""){return new DOMParser().parseFromString(h,"text/html")}function unindent(h,...r){const o=interpolate(h,r).replace(/^\n/,"").split(`
`),u=o[0].match(/^\s+/),g=u?u[0].length:0;return o.map(k=>k.slice(g)).join(`
`)}function interpolate(h,r){return h.reduce((o,u,g)=>{const k=r[g]==null?"":r[g];return o+u+k},"")}function uuid(){return Array.from({length:36}).map((h,r)=>r==8||r==13||r==18||r==23?"-":r==14?"4":r==19?(Math.floor(Math.random()*4)+8).toString(16):Math.floor(Math.random()*15).toString(16)).join("")}function getAttribute(h,...r){for(const o of r.map(u=>u==null?void 0:u.getAttribute(h)))if(typeof o=="string")return o;return null}function hasAttribute(h,...r){return r.some(o=>o&&o.hasAttribute(h))}function markAsBusy(...h){for(const r of h)r.localName=="turbo-frame"&&r.setAttribute("busy",""),r.setAttribute("aria-busy","true")}function clearBusyState(...h){for(const r of h)r.localName=="turbo-frame"&&r.removeAttribute("busy"),r.removeAttribute("aria-busy")}function waitForLoad(h,r=2e3){return new Promise(o=>{const u=()=>{h.removeEventListener("error",u),h.removeEventListener("load",u),o()};h.addEventListener("load",u,{once:!0}),h.addEventListener("error",u,{once:!0}),setTimeout(o,r)})}function getHistoryMethodForAction(h){switch(h){case"replace":return history.replaceState;case"advance":case"restore":return history.pushState}}function isAction(h){return h=="advance"||h=="replace"||h=="restore"}function getVisitAction(...h){const r=getAttribute("data-turbo-action",...h);return isAction(r)?r:null}function getMetaElement(h){return document.querySelector(`meta[name="${h}"]`)}function getMetaContent(h){const r=getMetaElement(h);return r&&r.content}function getCspNonce(){const h=getMetaElement("csp-nonce");if(h){const{nonce:r,content:o}=h;return r==""?o:r}}function setMetaContent(h,r){let o=getMetaElement(h);return o||(o=document.createElement("meta"),o.setAttribute("name",h),document.head.appendChild(o)),o.setAttribute("content",r),o}function findClosestRecursively(h,r){var o;if(h instanceof Element)return h.closest(r)||findClosestRecursively(h.assignedSlot||((o=h.getRootNode())==null?void 0:o.host),r)}function elementIsFocusable(h){return!!h&&h.closest("[inert], :disabled, [hidden], details:not([open]), dialog:not([open])")==null&&typeof h.focus=="function"}function queryAutofocusableElement(h){return Array.from(h.querySelectorAll("[autofocus]")).find(elementIsFocusable)}async function around(h,r){const o=r();h(),await nextAnimationFrame();const u=r();return[o,u]}function doesNotTargetIFrame(h){if(h==="_blank")return!1;if(h){for(const r of document.getElementsByName(h))if(r instanceof HTMLIFrameElement)return!1;return!0}else return!0}function findLinkFromClickTarget(h){const r=findClosestRecursively(h,"a[href], a[xlink\\:href]");return!r||r.hasAttribute("download")||r.hasAttribute("target")&&r.target!=="_self"?null:r}function getLocationForLink(h){return expandURL(h.getAttribute("href")||"")}function debounce$1(h,r){let o=null;return(...u)=>{const g=()=>h.apply(this,u);clearTimeout(o),o=setTimeout(g,r)}}const submitter={"aria-disabled":{beforeSubmit:h=>{h.setAttribute("aria-disabled","true"),h.addEventListener("click",cancelEvent)},afterSubmit:h=>{h.removeAttribute("aria-disabled"),h.removeEventListener("click",cancelEvent)}},disabled:{beforeSubmit:h=>h.disabled=!0,afterSubmit:h=>h.disabled=!1}};var $t;class Config{constructor(r){qe(this,$t,null);Object.assign(this,r)}get submitter(){return De(this,$t)}set submitter(r){Ye(this,$t,submitter[r]||r)}}$t=new WeakMap;const forms=new Config({mode:"on",submitter:"disabled"}),config$1={drive,forms};function expandURL(h){return new URL(h.toString(),document.baseURI)}function getAnchor(h){let r;if(h.hash)return h.hash.slice(1);if(r=h.href.match(/#(.*)$/))return r[1]}function getAction$1(h,r){const o=(r==null?void 0:r.getAttribute("formaction"))||h.getAttribute("action")||h.action;return expandURL(o)}function getExtension(h){return(getLastPathComponent(h).match(/\.[^.]*$/)||[])[0]||""}function isPrefixedBy(h,r){const o=addTrailingSlash(r.origin+r.pathname);return addTrailingSlash(h.href)===o||h.href.startsWith(o)}function locationIsVisitable(h,r){return isPrefixedBy(h,r)&&!config$1.drive.unvisitableExtensions.has(getExtension(h))}function getRequestURL(h){const r=getAnchor(h);return r!=null?h.href.slice(0,-(r.length+1)):h.href}function toCacheKey(h){return getRequestURL(h)}function urlsAreEqual(h,r){return expandURL(h).href==expandURL(r).href}function getPathComponents(h){return h.pathname.split("/").slice(1)}function getLastPathComponent(h){return getPathComponents(h).slice(-1)[0]}function addTrailingSlash(h){return h.endsWith("/")?h:h+"/"}class FetchResponse{constructor(r){this.response=r}get succeeded(){return this.response.ok}get failed(){return!this.succeeded}get clientError(){return this.statusCode>=400&&this.statusCode<=499}get serverError(){return this.statusCode>=500&&this.statusCode<=599}get redirected(){return this.response.redirected}get location(){return expandURL(this.response.url)}get isHTML(){return this.contentType&&this.contentType.match(/^(?:text\/([^\s;,]+\b)?html|application\/xhtml\+xml)\b/)}get statusCode(){return this.response.status}get contentType(){return this.header("Content-Type")}get responseText(){return this.response.clone().text()}get responseHTML(){return this.isHTML?this.response.clone().text():Promise.resolve(void 0)}header(r){return this.response.headers.get(r)}}class LimitedSet extends Set{constructor(r){super(),this.maxSize=r}add(r){if(this.size>=this.maxSize){const u=this.values().next().value;this.delete(u)}super.add(r)}}const recentRequests=new LimitedSet(20);function fetchWithTurboHeaders(h,r={}){const o=new Headers(r.headers||{}),u=uuid();return recentRequests.add(u),o.append("X-Turbo-Request-Id",u),window.fetch(h,{...r,headers:o})}function fetchMethodFromString(h){switch(h.toLowerCase()){case"get":return FetchMethod.get;case"post":return FetchMethod.post;case"put":return FetchMethod.put;case"patch":return FetchMethod.patch;case"delete":return FetchMethod.delete}}const FetchMethod={get:"get",post:"post",put:"put",patch:"patch",delete:"delete"};function fetchEnctypeFromString(h){switch(h.toLowerCase()){case FetchEnctype.multipart:return FetchEnctype.multipart;case FetchEnctype.plain:return FetchEnctype.plain;default:return FetchEnctype.urlEncoded}}const FetchEnctype={urlEncoded:"application/x-www-form-urlencoded",multipart:"multipart/form-data",plain:"text/plain"};var Et,xt,Oi,yi;class FetchRequest{constructor(r,o,u,g=new URLSearchParams,k=null,A=FetchEnctype.urlEncoded){qe(this,xt);Ce(this,"abortController",new AbortController);qe(this,Et,r=>{});var _;const[R,q]=buildResourceAndBody(expandURL(u),o,g,A);this.delegate=r,this.url=R,this.target=k,this.fetchOptions={credentials:"same-origin",redirect:"follow",method:o.toUpperCase(),headers:{...this.defaultHeaders},body:q,signal:this.abortSignal,referrer:(_=this.delegate.referrer)==null?void 0:_.href},this.enctype=A}get method(){return this.fetchOptions.method}set method(r){const o=this.isSafe?this.url.searchParams:this.fetchOptions.body||new FormData,u=fetchMethodFromString(r)||FetchMethod.get;this.url.search="";const[g,k]=buildResourceAndBody(this.url,u,o,this.enctype);this.url=g,this.fetchOptions.body=k,this.fetchOptions.method=u.toUpperCase()}get headers(){return this.fetchOptions.headers}set headers(r){this.fetchOptions.headers=r}get body(){return this.isSafe?this.url.searchParams:this.fetchOptions.body}set body(r){this.fetchOptions.body=r}get location(){return this.url}get params(){return this.url.searchParams}get entries(){return this.body?Array.from(this.body.entries()):[]}cancel(){this.abortController.abort()}async perform(){const{fetchOptions:r}=this;this.delegate.prepareRequest(this);const o=await Ie(this,xt,Oi).call(this,r);try{this.delegate.requestStarted(this),o.detail.fetchRequest?this.response=o.detail.fetchRequest.response:this.response=fetchWithTurboHeaders(this.url.href,r);const u=await this.response;return await this.receive(u)}catch(u){if(u.name!=="AbortError")throw Ie(this,xt,yi).call(this,u)&&this.delegate.requestErrored(this,u),u}finally{this.delegate.requestFinished(this)}}async receive(r){const o=new FetchResponse(r);return dispatch("turbo:before-fetch-response",{cancelable:!0,detail:{fetchResponse:o},target:this.target}).defaultPrevented?this.delegate.requestPreventedHandlingResponse(this,o):o.succeeded?this.delegate.requestSucceededWithResponse(this,o):this.delegate.requestFailedWithResponse(this,o),o}get defaultHeaders(){return{Accept:"text/html, application/xhtml+xml"}}get isSafe(){return isSafe(this.method)}get abortSignal(){return this.abortController.signal}acceptResponseType(r){this.headers.Accept=[r,this.headers.Accept].join(", ")}}Et=new WeakMap,xt=new WeakSet,Oi=async function(r){const o=new Promise(g=>Ye(this,Et,g)),u=dispatch("turbo:before-fetch-request",{cancelable:!0,detail:{fetchOptions:r,url:this.url,resume:De(this,Et)},target:this.target});return this.url=u.detail.url,u.defaultPrevented&&await o,u},yi=function(r){return!dispatch("turbo:fetch-request-error",{target:this.target,cancelable:!0,detail:{request:this,error:r}}).defaultPrevented};function isSafe(h){return fetchMethodFromString(h)==FetchMethod.get}function buildResourceAndBody(h,r,o,u){const g=Array.from(o).length>0?new URLSearchParams(entriesExcludingFiles(o)):h.searchParams;return isSafe(r)?[mergeIntoURLSearchParams(h,g),null]:u==FetchEnctype.urlEncoded?[h,g]:[h,o]}function entriesExcludingFiles(h){const r=[];for(const[o,u]of h)u instanceof File||r.push([o,u]);return r}function mergeIntoURLSearchParams(h,r){const o=new URLSearchParams(entriesExcludingFiles(r));return h.search=o.toString(),h}class AppearanceObserver{constructor(r,o){Ce(this,"started",!1);Ce(this,"intersect",r=>{const o=r.slice(-1)[0];o!=null&&o.isIntersecting&&this.delegate.elementAppearedInViewport(this.element)});this.delegate=r,this.element=o,this.intersectionObserver=new IntersectionObserver(this.intersect)}start(){this.started||(this.started=!0,this.intersectionObserver.observe(this.element))}stop(){this.started&&(this.started=!1,this.intersectionObserver.unobserve(this.element))}}class StreamMessage{static wrap(r){return typeof r=="string"?new this(createDocumentFragment(r)):r}constructor(r){this.fragment=importStreamElements(r)}}Ce(StreamMessage,"contentType","text/vnd.turbo-stream.html");function importStreamElements(h){for(const r of h.querySelectorAll("turbo-stream")){const o=document.importNode(r,!0);for(const u of o.templateElement.content.querySelectorAll("script"))u.replaceWith(activateScriptElement(u));r.replaceWith(o)}return h}const PREFETCH_DELAY=100;var pt,at;class PrefetchCache{constructor(){qe(this,pt,null);qe(this,at,null)}get(r){if(De(this,at)&&De(this,at).url===r&&De(this,at).expire>Date.now())return De(this,at).request}setLater(r,o,u){this.clear(),Ye(this,pt,setTimeout(()=>{o.perform(),this.set(r,o,u),Ye(this,pt,null)},PREFETCH_DELAY))}set(r,o,u){Ye(this,at,{url:r,request:o,expire:new Date(new Date().getTime()+u)})}clear(){De(this,pt)&&clearTimeout(De(this,pt)),Ye(this,at,null)}}pt=new WeakMap,at=new WeakMap;const cacheTtl=10*1e3,prefetchCache=new PrefetchCache,FormSubmissionState={initialized:"initialized",requesting:"requesting",waiting:"waiting",receiving:"receiving",stopping:"stopping",stopped:"stopped"};class FormSubmission{constructor(r,o,u,g=!1){Ce(this,"state",FormSubmissionState.initialized);const k=getMethod(o,u),A=getAction(getFormAction(o,u),k),R=buildFormData(o,u),q=getEnctype(o,u);this.delegate=r,this.formElement=o,this.submitter=u,this.fetchRequest=new FetchRequest(this,k,A,R,o,q),this.mustRedirect=g}static confirmMethod(r){return Promise.resolve(confirm(r))}get method(){return this.fetchRequest.method}set method(r){this.fetchRequest.method=r}get action(){return this.fetchRequest.url.toString()}set action(r){this.fetchRequest.url=expandURL(r)}get body(){return this.fetchRequest.body}get enctype(){return this.fetchRequest.enctype}get isSafe(){return this.fetchRequest.isSafe}get location(){return this.fetchRequest.url}async start(){const{initialized:r,requesting:o}=FormSubmissionState,u=getAttribute("data-turbo-confirm",this.submitter,this.formElement);if(!(typeof u=="string"&&!await(typeof config$1.forms.confirm=="function"?config$1.forms.confirm:FormSubmission.confirmMethod)(u,this.formElement,this.submitter))&&this.state==r)return this.state=o,this.fetchRequest.perform()}stop(){const{stopping:r,stopped:o}=FormSubmissionState;if(this.state!=r&&this.state!=o)return this.state=r,this.fetchRequest.cancel(),!0}prepareRequest(r){if(!r.isSafe){const o=getCookieValue(getMetaContent("csrf-param"))||getMetaContent("csrf-token");o&&(r.headers["X-CSRF-Token"]=o)}this.requestAcceptsTurboStreamResponse(r)&&r.acceptResponseType(StreamMessage.contentType)}requestStarted(r){this.state=FormSubmissionState.waiting,this.submitter&&config$1.forms.submitter.beforeSubmit(this.submitter),this.setSubmitsWith(),markAsBusy(this.formElement),dispatch("turbo:submit-start",{target:this.formElement,detail:{formSubmission:this}}),this.delegate.formSubmissionStarted(this)}requestPreventedHandlingResponse(r,o){prefetchCache.clear(),this.result={success:o.succeeded,fetchResponse:o}}requestSucceededWithResponse(r,o){if(o.clientError||o.serverError){this.delegate.formSubmissionFailedWithResponse(this,o);return}if(prefetchCache.clear(),this.requestMustRedirect(r)&&responseSucceededWithoutRedirect(o)){const u=new Error("Form responses must redirect to another location");this.delegate.formSubmissionErrored(this,u)}else this.state=FormSubmissionState.receiving,this.result={success:!0,fetchResponse:o},this.delegate.formSubmissionSucceededWithResponse(this,o)}requestFailedWithResponse(r,o){this.result={success:!1,fetchResponse:o},this.delegate.formSubmissionFailedWithResponse(this,o)}requestErrored(r,o){this.result={success:!1,error:o},this.delegate.formSubmissionErrored(this,o)}requestFinished(r){this.state=FormSubmissionState.stopped,this.submitter&&config$1.forms.submitter.afterSubmit(this.submitter),this.resetSubmitterText(),clearBusyState(this.formElement),dispatch("turbo:submit-end",{target:this.formElement,detail:{formSubmission:this,...this.result}}),this.delegate.formSubmissionFinished(this)}setSubmitsWith(){if(!(!this.submitter||!this.submitsWith)){if(this.submitter.matches("button"))this.originalSubmitText=this.submitter.innerHTML,this.submitter.innerHTML=this.submitsWith;else if(this.submitter.matches("input")){const r=this.submitter;this.originalSubmitText=r.value,r.value=this.submitsWith}}}resetSubmitterText(){if(!(!this.submitter||!this.originalSubmitText)){if(this.submitter.matches("button"))this.submitter.innerHTML=this.originalSubmitText;else if(this.submitter.matches("input")){const r=this.submitter;r.value=this.originalSubmitText}}}requestMustRedirect(r){return!r.isSafe&&this.mustRedirect}requestAcceptsTurboStreamResponse(r){return!r.isSafe||hasAttribute("data-turbo-stream",this.submitter,this.formElement)}get submitsWith(){var r;return(r=this.submitter)==null?void 0:r.getAttribute("data-turbo-submits-with")}}function buildFormData(h,r){const o=new FormData(h),u=r==null?void 0:r.getAttribute("name"),g=r==null?void 0:r.getAttribute("value");return u&&o.append(u,g||""),o}function getCookieValue(h){if(h!=null){const o=(document.cookie?document.cookie.split("; "):[]).find(u=>u.startsWith(h));if(o){const u=o.split("=").slice(1).join("=");return u?decodeURIComponent(u):void 0}}}function responseSucceededWithoutRedirect(h){return h.statusCode==200&&!h.redirected}function getFormAction(h,r){const o=typeof h.action=="string"?h.action:null;return r!=null&&r.hasAttribute("formaction")?r.getAttribute("formaction")||"":h.getAttribute("action")||o||""}function getAction(h,r){const o=expandURL(h);return isSafe(r)&&(o.search=""),o}function getMethod(h,r){const o=(r==null?void 0:r.getAttribute("formmethod"))||h.getAttribute("method")||"";return fetchMethodFromString(o.toLowerCase())||FetchMethod.get}function getEnctype(h,r){return fetchEnctypeFromString((r==null?void 0:r.getAttribute("formenctype"))||h.enctype)}class Snapshot{constructor(r){this.element=r}get activeElement(){return this.element.ownerDocument.activeElement}get children(){return[...this.element.children]}hasAnchor(r){return this.getElementForAnchor(r)!=null}getElementForAnchor(r){return r?this.element.querySelector(`[id='${r}'], a[name='${r}']`):null}get isConnected(){return this.element.isConnected}get firstAutofocusableElement(){return queryAutofocusableElement(this.element)}get permanentElements(){return queryPermanentElementsAll(this.element)}getPermanentElementById(r){return getPermanentElementById(this.element,r)}getPermanentElementMapForSnapshot(r){const o={};for(const u of this.permanentElements){const{id:g}=u,k=r.getPermanentElementById(g);k&&(o[g]=[u,k])}return o}}function getPermanentElementById(h,r){return h.querySelector(`#${r}[data-turbo-permanent]`)}function queryPermanentElementsAll(h){return h.querySelectorAll("[id][data-turbo-permanent]")}class FormSubmitObserver{constructor(r,o){Ce(this,"started",!1);Ce(this,"submitCaptured",()=>{this.eventTarget.removeEventListener("submit",this.submitBubbled,!1),this.eventTarget.addEventListener("submit",this.submitBubbled,!1)});Ce(this,"submitBubbled",r=>{if(!r.defaultPrevented){const o=r.target instanceof HTMLFormElement?r.target:void 0,u=r.submitter||void 0;o&&submissionDoesNotDismissDialog(o,u)&&submissionDoesNotTargetIFrame(o,u)&&this.delegate.willSubmitForm(o,u)&&(r.preventDefault(),r.stopImmediatePropagation(),this.delegate.formSubmitted(o,u))}});this.delegate=r,this.eventTarget=o}start(){this.started||(this.eventTarget.addEventListener("submit",this.submitCaptured,!0),this.started=!0)}stop(){this.started&&(this.eventTarget.removeEventListener("submit",this.submitCaptured,!0),this.started=!1)}}function submissionDoesNotDismissDialog(h,r){return((r==null?void 0:r.getAttribute("formmethod"))||h.getAttribute("method"))!="dialog"}function submissionDoesNotTargetIFrame(h,r){const o=(r==null?void 0:r.getAttribute("formtarget"))||h.getAttribute("target");return doesNotTargetIFrame(o)}var At,Mt;class View{constructor(r,o){qe(this,At,r=>{});qe(this,Mt,r=>{});this.delegate=r,this.element=o}scrollToAnchor(r){const o=this.snapshot.getElementForAnchor(r);o?(this.focusElement(o),this.scrollToElement(o)):this.scrollToPosition({x:0,y:0})}scrollToAnchorFromLocation(r){this.scrollToAnchor(getAnchor(r))}scrollToElement(r){r.scrollIntoView()}focusElement(r){r instanceof HTMLElement&&(r.hasAttribute("tabindex")?r.focus():(r.setAttribute("tabindex","-1"),r.focus(),r.removeAttribute("tabindex")))}scrollToPosition({x:r,y:o}){this.scrollRoot.scrollTo(r,o)}scrollToTop(){this.scrollToPosition({x:0,y:0})}get scrollRoot(){return window}async render(r){const{isPreview:o,shouldRender:u,willRender:g,newSnapshot:k}=r,A=g;if(u)try{this.renderPromise=new Promise(ee=>Ye(this,At,ee)),this.renderer=r,await this.prepareToRenderSnapshot(r);const R=new Promise(ee=>Ye(this,Mt,ee)),q={resume:De(this,Mt),render:this.renderer.renderElement,renderMethod:this.renderer.renderMethod};this.delegate.allowsImmediateRender(k,q)||await R,await this.renderSnapshot(r),this.delegate.viewRenderedSnapshot(k,o,this.renderer.renderMethod),this.delegate.preloadOnLoadLinksForView(this.element),this.finishRenderingSnapshot(r)}finally{delete this.renderer,De(this,At).call(this,void 0),delete this.renderPromise}else A&&this.invalidate(r.reloadReason)}invalidate(r){this.delegate.viewInvalidated(r)}async prepareToRenderSnapshot(r){this.markAsPreview(r.isPreview),await r.prepareToRender()}markAsPreview(r){r?this.element.setAttribute("data-turbo-preview",""):this.element.removeAttribute("data-turbo-preview")}markVisitDirection(r){this.element.setAttribute("data-turbo-visit-direction",r)}unmarkVisitDirection(){this.element.removeAttribute("data-turbo-visit-direction")}async renderSnapshot(r){await r.render()}finishRenderingSnapshot(r){r.finishRendering()}}At=new WeakMap,Mt=new WeakMap;class FrameView extends View{missing(){this.element.innerHTML='<strong class="turbo-frame-error">Content missing</strong>'}get snapshot(){return new Snapshot(this.element)}}class LinkInterceptor{constructor(r,o){Ce(this,"clickBubbled",r=>{this.clickEventIsSignificant(r)?this.clickEvent=r:delete this.clickEvent});Ce(this,"linkClicked",r=>{this.clickEvent&&this.clickEventIsSignificant(r)&&this.delegate.shouldInterceptLinkClick(r.target,r.detail.url,r.detail.originalEvent)&&(this.clickEvent.preventDefault(),r.preventDefault(),this.delegate.linkClickIntercepted(r.target,r.detail.url,r.detail.originalEvent)),delete this.clickEvent});Ce(this,"willVisit",r=>{delete this.clickEvent});this.delegate=r,this.element=o}start(){this.element.addEventListener("click",this.clickBubbled),document.addEventListener("turbo:click",this.linkClicked),document.addEventListener("turbo:before-visit",this.willVisit)}stop(){this.element.removeEventListener("click",this.clickBubbled),document.removeEventListener("turbo:click",this.linkClicked),document.removeEventListener("turbo:before-visit",this.willVisit)}clickEventIsSignificant(r){var g;const o=r.composed?(g=r.target)==null?void 0:g.parentElement:r.target,u=findLinkFromClickTarget(o)||o;return u instanceof Element&&u.closest("turbo-frame, html")==this.element}}class LinkClickObserver{constructor(r,o){Ce(this,"started",!1);Ce(this,"clickCaptured",()=>{this.eventTarget.removeEventListener("click",this.clickBubbled,!1),this.eventTarget.addEventListener("click",this.clickBubbled,!1)});Ce(this,"clickBubbled",r=>{if(r instanceof MouseEvent&&this.clickEventIsSignificant(r)){const o=r.composedPath&&r.composedPath()[0]||r.target,u=findLinkFromClickTarget(o);if(u&&doesNotTargetIFrame(u.target)){const g=getLocationForLink(u);this.delegate.willFollowLinkToLocation(u,g,r)&&(r.preventDefault(),this.delegate.followedLinkToLocation(u,g))}}});this.delegate=r,this.eventTarget=o}start(){this.started||(this.eventTarget.addEventListener("click",this.clickCaptured,!0),this.started=!0)}stop(){this.started&&(this.eventTarget.removeEventListener("click",this.clickCaptured,!0),this.started=!1)}clickEventIsSignificant(r){return!(r.target&&r.target.isContentEditable||r.defaultPrevented||r.which>1||r.altKey||r.ctrlKey||r.metaKey||r.shiftKey)}}class FormLinkClickObserver{constructor(r,o){this.delegate=r,this.linkInterceptor=new LinkClickObserver(this,o)}start(){this.linkInterceptor.start()}stop(){this.linkInterceptor.stop()}canPrefetchRequestToLocation(r,o){return!1}prefetchAndCacheRequestToLocation(r,o){}willFollowLinkToLocation(r,o,u){return this.delegate.willSubmitFormLinkToLocation(r,o,u)&&(r.hasAttribute("data-turbo-method")||r.hasAttribute("data-turbo-stream"))}followedLinkToLocation(r,o){const u=document.createElement("form"),g="hidden";for(const[te,ne]of o.searchParams)u.append(Object.assign(document.createElement("input"),{type:g,name:te,value:ne}));const k=Object.assign(o,{search:""});u.setAttribute("data-turbo","true"),u.setAttribute("action",k.href),u.setAttribute("hidden","");const A=r.getAttribute("data-turbo-method");A&&u.setAttribute("method",A);const R=r.getAttribute("data-turbo-frame");R&&u.setAttribute("data-turbo-frame",R);const q=getVisitAction(r);q&&u.setAttribute("data-turbo-action",q);const _=r.getAttribute("data-turbo-confirm");_&&u.setAttribute("data-turbo-confirm",_),r.hasAttribute("data-turbo-stream")&&u.setAttribute("data-turbo-stream",""),this.delegate.submittedFormLinkToLocation(r,o,u),document.body.appendChild(u),u.addEventListener("turbo:submit-end",()=>u.remove(),{once:!0}),requestAnimationFrame(()=>u.requestSubmit())}}class Bardo{static async preservingPermanentElements(r,o,u){const g=new this(r,o);g.enter(),await u(),g.leave()}constructor(r,o){this.delegate=r,this.permanentElementMap=o}enter(){for(const r in this.permanentElementMap){const[o,u]=this.permanentElementMap[r];this.delegate.enteringBardo(o,u),this.replaceNewPermanentElementWithPlaceholder(u)}}leave(){for(const r in this.permanentElementMap){const[o]=this.permanentElementMap[r];this.replaceCurrentPermanentElementWithClone(o),this.replacePlaceholderWithPermanentElement(o),this.delegate.leavingBardo(o)}}replaceNewPermanentElementWithPlaceholder(r){const o=createPlaceholderForPermanentElement(r);r.replaceWith(o)}replaceCurrentPermanentElementWithClone(r){const o=r.cloneNode(!0);r.replaceWith(o)}replacePlaceholderWithPermanentElement(r){const o=this.getPlaceholderById(r.id);o==null||o.replaceWith(r)}getPlaceholderById(r){return this.placeholders.find(o=>o.content==r)}get placeholders(){return[...document.querySelectorAll("meta[name=turbo-permanent-placeholder][content]")]}}function createPlaceholderForPermanentElement(h){const r=document.createElement("meta");return r.setAttribute("name","turbo-permanent-placeholder"),r.setAttribute("content",h.id),r}var ct;class Renderer{constructor(r,o,u,g=!0){qe(this,ct,null);this.currentSnapshot=r,this.newSnapshot=o,this.isPreview=u,this.willRender=g,this.renderElement=this.constructor.renderElement,this.promise=new Promise((k,A)=>this.resolvingFunctions={resolve:k,reject:A})}static renderElement(r,o){}get shouldRender(){return!0}get shouldAutofocus(){return!0}get reloadReason(){}prepareToRender(){}render(){}finishRendering(){this.resolvingFunctions&&(this.resolvingFunctions.resolve(),delete this.resolvingFunctions)}async preservingPermanentElements(r){await Bardo.preservingPermanentElements(this,this.permanentElementMap,r)}focusFirstAutofocusableElement(){if(this.shouldAutofocus){const r=this.connectedSnapshot.firstAutofocusableElement;r&&r.focus()}}enteringBardo(r){De(this,ct)||r.contains(this.currentSnapshot.activeElement)&&Ye(this,ct,this.currentSnapshot.activeElement)}leavingBardo(r){r.contains(De(this,ct))&&De(this,ct)instanceof HTMLElement&&(De(this,ct).focus(),Ye(this,ct,null))}get connectedSnapshot(){return this.newSnapshot.isConnected?this.newSnapshot:this.currentSnapshot}get currentElement(){return this.currentSnapshot.element}get newElement(){return this.newSnapshot.element}get permanentElementMap(){return this.currentSnapshot.getPermanentElementMapForSnapshot(this.newSnapshot)}get renderMethod(){return"replace"}}ct=new WeakMap;class FrameRenderer extends Renderer{static renderElement(r,o){var A;const u=document.createRange();u.selectNodeContents(r),u.deleteContents();const g=o,k=(A=g.ownerDocument)==null?void 0:A.createRange();k&&(k.selectNodeContents(g),r.appendChild(k.extractContents()))}constructor(r,o,u,g,k,A=!0){super(o,u,g,k,A),this.delegate=r}get shouldRender(){return!0}async render(){await nextRepaint(),this.preservingPermanentElements(()=>{this.loadFrameElement()}),this.scrollFrameIntoView(),await nextRepaint(),this.focusFirstAutofocusableElement(),await nextRepaint(),this.activateScriptElements()}loadFrameElement(){this.delegate.willRenderFrame(this.currentElement,this.newElement),this.renderElement(this.currentElement,this.newElement)}scrollFrameIntoView(){if(this.currentElement.autoscroll||this.newElement.autoscroll){const r=this.currentElement.firstElementChild,o=readScrollLogicalPosition(this.currentElement.getAttribute("data-autoscroll-block"),"end"),u=readScrollBehavior(this.currentElement.getAttribute("data-autoscroll-behavior"),"auto");if(r)return r.scrollIntoView({block:o,behavior:u}),!0}return!1}activateScriptElements(){for(const r of this.newScriptElements){const o=activateScriptElement(r);r.replaceWith(o)}}get newScriptElements(){return this.currentElement.querySelectorAll("script")}}function readScrollLogicalPosition(h,r){return h=="end"||h=="start"||h=="center"||h=="nearest"?h:r}function readScrollBehavior(h,r){return h=="auto"||h=="smooth"?h:r}var Idiomorph=(function(){const h=()=>{},r={morphStyle:"outerHTML",callbacks:{beforeNodeAdded:h,afterNodeAdded:h,beforeNodeMorphed:h,afterNodeMorphed:h,beforeNodeRemoved:h,afterNodeRemoved:h,beforeAttributeUpdated:h},head:{style:"merge",shouldPreserve:ne=>ne.getAttribute("im-preserve")==="true",shouldReAppend:ne=>ne.getAttribute("im-re-append")==="true",shouldRemove:h,afterHeadMorphed:h},restoreFocus:!0};function o(ne,re,oe={}){ne=ee(ne);const le=te(re),pe=_(ne,le,oe),de=g(pe,()=>R(pe,ne,le,he=>he.morphStyle==="innerHTML"?(k(he,ne,le),Array.from(ne.childNodes)):u(he,ne,le)));return pe.pantry.remove(),de}function u(ne,re,oe){const le=te(re);let pe=Array.from(le.childNodes);const de=pe.indexOf(re),he=pe.length-(de+1);return k(ne,le,oe,re,re.nextSibling),pe=Array.from(le.childNodes),pe.slice(de,pe.length-he)}function g(ne,re){var ae;if(!ne.config.restoreFocus)return re();let oe=document.activeElement;if(!(oe instanceof HTMLInputElement||oe instanceof HTMLTextAreaElement))return re();const{id:le,selectionStart:pe,selectionEnd:de}=oe,he=re();return le&&le!==((ae=document.activeElement)==null?void 0:ae.id)&&(oe=ne.target.querySelector(`#${le}`),oe==null||oe.focus()),oe&&!oe.selectionEnd&&de&&oe.setSelectionRange(pe,de),he}const k=(function(){function ne(se,ce,fe,ue=null,Oe=null){ce instanceof HTMLTemplateElement&&fe instanceof HTMLTemplateElement&&(ce=ce.content,fe=fe.content),ue||(ue=ce.firstChild);for(const be of fe.childNodes){if(ue&&ue!=Oe){const Se=oe(se,be,ue,Oe);if(Se){Se!==ue&&pe(se,ue,Se),A(Se,be,se),ue=Se.nextSibling;continue}}if(be instanceof Element&&se.persistentIds.has(be.id)){const Se=de(ce,be.id,ue,se);A(Se,be,se),ue=Se.nextSibling;continue}const xe=re(ce,be,ue,se);xe&&(ue=xe.nextSibling)}for(;ue&&ue!=Oe;){const be=ue;ue=ue.nextSibling,le(se,be)}}function re(se,ce,fe,ue){if(ue.callbacks.beforeNodeAdded(ce)===!1)return null;if(ue.idMap.has(ce)){const Oe=document.createElement(ce.tagName);return se.insertBefore(Oe,fe),A(Oe,ce,ue),ue.callbacks.afterNodeAdded(Oe),Oe}else{const Oe=document.importNode(ce,!0);return se.insertBefore(Oe,fe),ue.callbacks.afterNodeAdded(Oe),Oe}}const oe=(function(){function se(ue,Oe,be,xe){let Se=null,ke=Oe.nextSibling,we=0,Te=be;for(;Te&&Te!=xe;){if(fe(Te,Oe)){if(ce(ue,Te,Oe))return Te;Se===null&&(ue.idMap.has(Te)||(Se=Te))}if(Se===null&&ke&&fe(Te,ke)&&(we++,ke=ke.nextSibling,we>=2&&(Se=void 0)),Te.contains(document.activeElement))break;Te=Te.nextSibling}return Se||null}function ce(ue,Oe,be){let xe=ue.idMap.get(Oe),Se=ue.idMap.get(be);if(!Se||!xe)return!1;for(const ke of xe)if(Se.has(ke))return!0;return!1}function fe(ue,Oe){const be=ue,xe=Oe;return be.nodeType===xe.nodeType&&be.tagName===xe.tagName&&(!be.id||be.id===xe.id)}return se})();function le(se,ce){var fe;if(se.idMap.has(ce))ae(se.pantry,ce,null);else{if(se.callbacks.beforeNodeRemoved(ce)===!1)return;(fe=ce.parentNode)==null||fe.removeChild(ce),se.callbacks.afterNodeRemoved(ce)}}function pe(se,ce,fe){let ue=ce;for(;ue&&ue!==fe;){let Oe=ue;ue=ue.nextSibling,le(se,Oe)}return ue}function de(se,ce,fe,ue){const Oe=ue.target.querySelector(`#${ce}`)||ue.pantry.querySelector(`#${ce}`);return he(Oe,ue),ae(se,Oe,fe),Oe}function he(se,ce){const fe=se.id;for(;se=se.parentNode;){let ue=ce.idMap.get(se);ue&&(ue.delete(fe),ue.size||ce.idMap.delete(se))}}function ae(se,ce,fe){if(se.moveBefore)try{se.moveBefore(ce,fe)}catch{se.insertBefore(ce,fe)}else se.insertBefore(ce,fe)}return ne})(),A=(function(){function ne(he,ae,se){return se.ignoreActive&&he===document.activeElement?null:(se.callbacks.beforeNodeMorphed(he,ae)===!1||(he instanceof HTMLHeadElement&&se.head.ignore||(he instanceof HTMLHeadElement&&se.head.style!=="morph"?q(he,ae,se):(re(he,ae,se),de(he,se)||k(se,he,ae))),se.callbacks.afterNodeMorphed(he,ae)),he)}function re(he,ae,se){let ce=ae.nodeType;if(ce===1){const fe=he,ue=ae,Oe=fe.attributes,be=ue.attributes;for(const xe of be)pe(xe.name,fe,"update",se)||fe.getAttribute(xe.name)!==xe.value&&fe.setAttribute(xe.name,xe.value);for(let xe=Oe.length-1;0<=xe;xe--){const Se=Oe[xe];if(Se&&!ue.hasAttribute(Se.name)){if(pe(Se.name,fe,"remove",se))continue;fe.removeAttribute(Se.name)}}de(fe,se)||oe(fe,ue,se)}(ce===8||ce===3)&&he.nodeValue!==ae.nodeValue&&(he.nodeValue=ae.nodeValue)}function oe(he,ae,se){if(he instanceof HTMLInputElement&&ae instanceof HTMLInputElement&&ae.type!=="file"){let ce=ae.value,fe=he.value;le(he,ae,"checked",se),le(he,ae,"disabled",se),ae.hasAttribute("value")?fe!==ce&&(pe("value",he,"update",se)||(he.setAttribute("value",ce),he.value=ce)):pe("value",he,"remove",se)||(he.value="",he.removeAttribute("value"))}else if(he instanceof HTMLOptionElement&&ae instanceof HTMLOptionElement)le(he,ae,"selected",se);else if(he instanceof HTMLTextAreaElement&&ae instanceof HTMLTextAreaElement){let ce=ae.value,fe=he.value;if(pe("value",he,"update",se))return;ce!==fe&&(he.value=ce),he.firstChild&&he.firstChild.nodeValue!==ce&&(he.firstChild.nodeValue=ce)}}function le(he,ae,se,ce){const fe=ae[se],ue=he[se];if(fe!==ue){const Oe=pe(se,he,"update",ce);Oe||(he[se]=ae[se]),fe?Oe||he.setAttribute(se,""):pe(se,he,"remove",ce)||he.removeAttribute(se)}}function pe(he,ae,se,ce){return he==="value"&&ce.ignoreActiveValue&&ae===document.activeElement?!0:ce.callbacks.beforeAttributeUpdated(he,ae,se)===!1}function de(he,ae){return!!ae.ignoreActiveValue&&he===document.activeElement&&he!==document.body}return ne})();function R(ne,re,oe,le){if(ne.head.block){const pe=re.querySelector("head"),de=oe.querySelector("head");if(pe&&de){const he=q(pe,de,ne);return Promise.all(he).then(()=>{const ae=Object.assign(ne,{head:{block:!1,ignore:!0}});return le(ae)})}}return le(ne)}function q(ne,re,oe){let le=[],pe=[],de=[],he=[],ae=new Map;for(const ce of re.children)ae.set(ce.outerHTML,ce);for(const ce of ne.children){let fe=ae.has(ce.outerHTML),ue=oe.head.shouldReAppend(ce),Oe=oe.head.shouldPreserve(ce);fe||Oe?ue?pe.push(ce):(ae.delete(ce.outerHTML),de.push(ce)):oe.head.style==="append"?ue&&(pe.push(ce),he.push(ce)):oe.head.shouldRemove(ce)!==!1&&pe.push(ce)}he.push(...ae.values());let se=[];for(const ce of he){let fe=document.createRange().createContextualFragment(ce.outerHTML).firstChild;if(oe.callbacks.beforeNodeAdded(fe)!==!1){if("href"in fe&&fe.href||"src"in fe&&fe.src){let ue,Oe=new Promise(function(be){ue=be});fe.addEventListener("load",function(){ue()}),se.push(Oe)}ne.appendChild(fe),oe.callbacks.afterNodeAdded(fe),le.push(fe)}}for(const ce of pe)oe.callbacks.beforeNodeRemoved(ce)!==!1&&(ne.removeChild(ce),oe.callbacks.afterNodeRemoved(ce));return oe.head.afterHeadMorphed(ne,{added:le,kept:de,removed:pe}),se}const _=(function(){function ne(ae,se,ce){const{persistentIds:fe,idMap:ue}=de(ae,se),Oe=re(ce),be=Oe.morphStyle||"outerHTML";if(!["innerHTML","outerHTML"].includes(be))throw`Do not understand how to morph style ${be}`;return{target:ae,newContent:se,config:Oe,morphStyle:be,ignoreActive:Oe.ignoreActive,ignoreActiveValue:Oe.ignoreActiveValue,restoreFocus:Oe.restoreFocus,idMap:ue,persistentIds:fe,pantry:oe(),callbacks:Oe.callbacks,head:Oe.head}}function re(ae){let se=Object.assign({},r);return Object.assign(se,ae),se.callbacks=Object.assign({},r.callbacks,ae.callbacks),se.head=Object.assign({},r.head,ae.head),se}function oe(){const ae=document.createElement("div");return ae.hidden=!0,document.body.insertAdjacentElement("afterend",ae),ae}function le(ae){let se=Array.from(ae.querySelectorAll("[id]"));return ae.id&&se.push(ae),se}function pe(ae,se,ce,fe){for(const ue of fe)if(se.has(ue.id)){let Oe=ue;for(;Oe;){let be=ae.get(Oe);if(be==null&&(be=new Set,ae.set(Oe,be)),be.add(ue.id),Oe===ce)break;Oe=Oe.parentElement}}}function de(ae,se){const ce=le(ae),fe=le(se),ue=he(ce,fe);let Oe=new Map;pe(Oe,ue,ae,ce);const be=se.__idiomorphRoot||se;return pe(Oe,ue,be,fe),{persistentIds:ue,idMap:Oe}}function he(ae,se){let ce=new Set,fe=new Map;for(const{id:Oe,tagName:be}of ae)fe.has(Oe)?ce.add(Oe):fe.set(Oe,be);let ue=new Set;for(const{id:Oe,tagName:be}of se)ue.has(Oe)?ce.add(Oe):fe.get(Oe)===be&&ue.add(Oe);for(const Oe of ce)ue.delete(Oe);return ue}return ne})(),{normalizeElement:ee,normalizeParent:te}=(function(){const ne=new WeakSet;function re(de){return de instanceof Document?de.documentElement:de}function oe(de){if(de==null)return document.createElement("div");if(typeof de=="string")return oe(pe(de));if(ne.has(de))return de;if(de instanceof Node){if(de.parentNode)return le(de);{const he=document.createElement("div");return he.append(de),he}}else{const he=document.createElement("div");for(const ae of[...de])he.append(ae);return he}}function le(de){return{childNodes:[de],querySelectorAll:he=>{const ae=de.querySelectorAll(he);return de.matches(he)?[de,...ae]:ae},insertBefore:(he,ae)=>de.parentNode.insertBefore(he,ae),moveBefore:(he,ae)=>de.parentNode.moveBefore(he,ae),get __idiomorphRoot(){return de}}}function pe(de){let he=new DOMParser,ae=de.replace(/<svg(\s[^>]*>|>)([\s\S]*?)<\/svg>/gim,"");if(ae.match(/<\/html>/)||ae.match(/<\/head>/)||ae.match(/<\/body>/)){let se=he.parseFromString(de,"text/html");if(ae.match(/<\/html>/))return ne.add(se),se;{let ce=se.firstChild;return ce&&ne.add(ce),ce}}else{let ce=he.parseFromString("<body><template>"+de+"</template></body>","text/html").body.querySelector("template").content;return ne.add(ce),ce}}return{normalizeElement:re,normalizeParent:oe}})();return{morph:o,defaults:r}})();function morphElements(h,r,{callbacks:o,...u}={}){Idiomorph.morph(h,r,{...u,callbacks:new DefaultIdiomorphCallbacks(o)})}function morphChildren(h,r,o={}){morphElements(h,r.childNodes,{...o,morphStyle:"innerHTML"})}function shouldRefreshFrameWithMorphing(h,r){return h instanceof FrameElement&&r instanceof Element&&r.nodeName==="TURBO-FRAME"&&h.shouldReloadWithMorph&&h.id===r.id&&(!r.getAttribute("src")||urlsAreEqual(h.src,r.getAttribute("src")))&&!h.closest("[data-turbo-permanent]")}function closestFrameReloadableWithMorphing(h){return h.parentElement.closest("turbo-frame[src][refresh=morph]")}var Rt;class DefaultIdiomorphCallbacks{constructor({beforeNodeMorphed:r}={}){qe(this,Rt);Ce(this,"beforeNodeAdded",r=>!(r.id&&r.hasAttribute("data-turbo-permanent")&&document.getElementById(r.id)));Ce(this,"beforeNodeMorphed",(r,o)=>{if(r instanceof Element)return!r.hasAttribute("data-turbo-permanent")&&De(this,Rt).call(this,r,o)?!dispatch("turbo:before-morph-element",{cancelable:!0,target:r,detail:{currentElement:r,newElement:o}}).defaultPrevented:!1});Ce(this,"beforeAttributeUpdated",(r,o,u)=>!dispatch("turbo:before-morph-attribute",{cancelable:!0,target:o,detail:{attributeName:r,mutationType:u}}).defaultPrevented);Ce(this,"beforeNodeRemoved",r=>this.beforeNodeMorphed(r));Ce(this,"afterNodeMorphed",(r,o)=>{r instanceof Element&&dispatch("turbo:morph-element",{target:r,detail:{currentElement:r,newElement:o}})});Ye(this,Rt,r||(()=>!0))}}Rt=new WeakMap;class MorphingFrameRenderer extends FrameRenderer{static renderElement(r,o){dispatch("turbo:before-frame-morph",{target:r,detail:{currentElement:r,newElement:o}}),morphChildren(r,o,{callbacks:{beforeNodeMorphed:(u,g)=>shouldRefreshFrameWithMorphing(u,g)&&closestFrameReloadableWithMorphing(u)===r?(u.reload(),!1):!0}})}async preservingPermanentElements(r){return await r()}}const ot=class ot{constructor(){Ce(this,"hiding",!1);Ce(this,"value",0);Ce(this,"visible",!1);Ce(this,"trickle",()=>{this.setValue(this.value+Math.random()/100)});this.stylesheetElement=this.createStylesheetElement(),this.progressElement=this.createProgressElement(),this.installStylesheetElement(),this.setValue(0)}static get defaultCSS(){return unindent`
      .turbo-progress-bar {
        position: fixed;
        display: block;
        top: 0;
        left: 0;
        height: 3px;
        background: #0076ff;
        z-index: 2147483647;
        transition:
          width ${ot.animationDuration}ms ease-out,
          opacity ${ot.animationDuration/2}ms ${ot.animationDuration/2}ms ease-in;
        transform: translate3d(0, 0, 0);
      }
    `}show(){this.visible||(this.visible=!0,this.installProgressElement(),this.startTrickling())}hide(){this.visible&&!this.hiding&&(this.hiding=!0,this.fadeProgressElement(()=>{this.uninstallProgressElement(),this.stopTrickling(),this.visible=!1,this.hiding=!1}))}setValue(r){this.value=r,this.refresh()}installStylesheetElement(){document.head.insertBefore(this.stylesheetElement,document.head.firstChild)}installProgressElement(){this.progressElement.style.width="0",this.progressElement.style.opacity="1",document.documentElement.insertBefore(this.progressElement,document.body),this.refresh()}fadeProgressElement(r){this.progressElement.style.opacity="0",setTimeout(r,ot.animationDuration*1.5)}uninstallProgressElement(){this.progressElement.parentNode&&document.documentElement.removeChild(this.progressElement)}startTrickling(){this.trickleInterval||(this.trickleInterval=window.setInterval(this.trickle,ot.animationDuration))}stopTrickling(){window.clearInterval(this.trickleInterval),delete this.trickleInterval}refresh(){requestAnimationFrame(()=>{this.progressElement.style.width=`${10+this.value*90}%`})}createStylesheetElement(){const r=document.createElement("style");r.type="text/css",r.textContent=ot.defaultCSS;const o=getCspNonce();return o&&(r.nonce=o),r}createProgressElement(){const r=document.createElement("div");return r.className="turbo-progress-bar",r}};Ce(ot,"animationDuration",300);let ProgressBar=ot;class HeadSnapshot extends Snapshot{constructor(){super(...arguments);Ce(this,"detailsByOuterHTML",this.children.filter(o=>!elementIsNoscript(o)).map(o=>elementWithoutNonce(o)).reduce((o,u)=>{const{outerHTML:g}=u,k=g in o?o[g]:{type:elementType(u),tracked:elementIsTracked(u),elements:[]};return{...o,[g]:{...k,elements:[...k.elements,u]}}},{}))}get trackedElementSignature(){return Object.keys(this.detailsByOuterHTML).filter(o=>this.detailsByOuterHTML[o].tracked).join("")}getScriptElementsNotInSnapshot(o){return this.getElementsMatchingTypeNotInSnapshot("script",o)}getStylesheetElementsNotInSnapshot(o){return this.getElementsMatchingTypeNotInSnapshot("stylesheet",o)}getElementsMatchingTypeNotInSnapshot(o,u){return Object.keys(this.detailsByOuterHTML).filter(g=>!(g in u.detailsByOuterHTML)).map(g=>this.detailsByOuterHTML[g]).filter(({type:g})=>g==o).map(({elements:[g]})=>g)}get provisionalElements(){return Object.keys(this.detailsByOuterHTML).reduce((o,u)=>{const{type:g,tracked:k,elements:A}=this.detailsByOuterHTML[u];return g==null&&!k?[...o,...A]:A.length>1?[...o,...A.slice(1)]:o},[])}getMetaValue(o){const u=this.findMetaElementByName(o);return u?u.getAttribute("content"):null}findMetaElementByName(o){return Object.keys(this.detailsByOuterHTML).reduce((u,g)=>{const{elements:[k]}=this.detailsByOuterHTML[g];return elementIsMetaElementWithName(k,o)?k:u},void 0|void 0)}}function elementType(h){if(elementIsScript(h))return"script";if(elementIsStylesheet(h))return"stylesheet"}function elementIsTracked(h){return h.getAttribute("data-turbo-track")=="reload"}function elementIsScript(h){return h.localName=="script"}function elementIsNoscript(h){return h.localName=="noscript"}function elementIsStylesheet(h){const r=h.localName;return r=="style"||r=="link"&&h.getAttribute("rel")=="stylesheet"}function elementIsMetaElementWithName(h,r){return h.localName=="meta"&&h.getAttribute("name")==r}function elementWithoutNonce(h){return h.hasAttribute("nonce")&&h.setAttribute("nonce",""),h}class PageSnapshot extends Snapshot{static fromHTMLString(r=""){return this.fromDocument(parseHTMLDocument(r))}static fromElement(r){return this.fromDocument(r.ownerDocument)}static fromDocument({documentElement:r,body:o,head:u}){return new this(r,o,new HeadSnapshot(u))}constructor(r,o,u){super(o),this.documentElement=r,this.headSnapshot=u}clone(){const r=this.element.cloneNode(!0),o=this.element.querySelectorAll("select"),u=r.querySelectorAll("select");for(const[g,k]of o.entries()){const A=u[g];for(const R of A.selectedOptions)R.selected=!1;for(const R of k.selectedOptions)A.options[R.index].selected=!0}for(const g of r.querySelectorAll('input[type="password"]'))g.value="";return new PageSnapshot(this.documentElement,r,this.headSnapshot)}get lang(){return this.documentElement.getAttribute("lang")}get headElement(){return this.headSnapshot.element}get rootLocation(){const r=this.getSetting("root")??"/";return expandURL(r)}get cacheControlValue(){return this.getSetting("cache-control")}get isPreviewable(){return this.cacheControlValue!="no-preview"}get isCacheable(){return this.cacheControlValue!="no-cache"}get isVisitable(){return this.getSetting("visit-control")!="reload"}get prefersViewTransitions(){return(this.getSetting("view-transition")==="true"||this.headSnapshot.getMetaValue("view-transition")==="same-origin")&&!window.matchMedia("(prefers-reduced-motion: reduce)").matches}get shouldMorphPage(){return this.getSetting("refresh-method")==="morph"}get shouldPreserveScrollPosition(){return this.getSetting("refresh-scroll")==="preserve"}getSetting(r){return this.headSnapshot.getMetaValue(`turbo-${r}`)}}var Lt,ht;class ViewTransitioner{constructor(){qe(this,Lt,!1);qe(this,ht,Promise.resolve())}renderChange(r,o){return r&&this.viewTransitionsAvailable&&!De(this,Lt)?(Ye(this,Lt,!0),Ye(this,ht,De(this,ht).then(async()=>{await document.startViewTransition(o).finished}))):Ye(this,ht,De(this,ht).then(o)),De(this,ht)}get viewTransitionsAvailable(){return document.startViewTransition}}Lt=new WeakMap,ht=new WeakMap;const defaultOptions={action:"advance",historyChanged:!1,visitCachedSnapshot:()=>{},willRender:!0,updateHistory:!0,shouldCacheSnapshot:!0,acceptsStreamResponse:!1},TimingMetric={visitStart:"visitStart",requestStart:"requestStart",requestEnd:"requestEnd",visitEnd:"visitEnd"},VisitState={initialized:"initialized",started:"started",canceled:"canceled",failed:"failed",completed:"completed"},SystemStatusCode={networkFailure:0,timeoutFailure:-1,contentTypeMismatch:-2},Direction$1={advance:"forward",restore:"back",replace:"none"};class Visit{constructor(r,o,u,g={}){Ce(this,"identifier",uuid());Ce(this,"timingMetrics",{});Ce(this,"followedRedirect",!1);Ce(this,"historyChanged",!1);Ce(this,"scrolled",!1);Ce(this,"shouldCacheSnapshot",!0);Ce(this,"acceptsStreamResponse",!1);Ce(this,"snapshotCached",!1);Ce(this,"state",VisitState.initialized);Ce(this,"viewTransitioner",new ViewTransitioner);this.delegate=r,this.location=o,this.restorationIdentifier=u||uuid();const{action:k,historyChanged:A,referrer:R,snapshot:q,snapshotHTML:_,response:ee,visitCachedSnapshot:te,willRender:ne,updateHistory:re,shouldCacheSnapshot:oe,acceptsStreamResponse:le,direction:pe}={...defaultOptions,...g};this.action=k,this.historyChanged=A,this.referrer=R,this.snapshot=q,this.snapshotHTML=_,this.response=ee,this.isSamePage=this.delegate.locationWithActionIsSamePage(this.location,this.action),this.isPageRefresh=this.view.isPageRefresh(this),this.visitCachedSnapshot=te,this.willRender=ne,this.updateHistory=re,this.scrolled=!ne,this.shouldCacheSnapshot=oe,this.acceptsStreamResponse=le,this.direction=pe||Direction$1[k]}get adapter(){return this.delegate.adapter}get view(){return this.delegate.view}get history(){return this.delegate.history}get restorationData(){return this.history.getRestorationDataForIdentifier(this.restorationIdentifier)}get silent(){return this.isSamePage}start(){this.state==VisitState.initialized&&(this.recordTimingMetric(TimingMetric.visitStart),this.state=VisitState.started,this.adapter.visitStarted(this),this.delegate.visitStarted(this))}cancel(){this.state==VisitState.started&&(this.request&&this.request.cancel(),this.cancelRender(),this.state=VisitState.canceled)}complete(){this.state==VisitState.started&&(this.recordTimingMetric(TimingMetric.visitEnd),this.adapter.visitCompleted(this),this.state=VisitState.completed,this.followRedirect(),this.followedRedirect||this.delegate.visitCompleted(this))}fail(){this.state==VisitState.started&&(this.state=VisitState.failed,this.adapter.visitFailed(this),this.delegate.visitCompleted(this))}changeHistory(){var r;if(!this.historyChanged&&this.updateHistory){const o=this.location.href===((r=this.referrer)==null?void 0:r.href)?"replace":this.action,u=getHistoryMethodForAction(o);this.history.update(u,this.location,this.restorationIdentifier),this.historyChanged=!0}}issueRequest(){this.hasPreloadedResponse()?this.simulateRequest():this.shouldIssueRequest()&&!this.request&&(this.request=new FetchRequest(this,FetchMethod.get,this.location),this.request.perform())}simulateRequest(){this.response&&(this.startRequest(),this.recordResponse(),this.finishRequest())}startRequest(){this.recordTimingMetric(TimingMetric.requestStart),this.adapter.visitRequestStarted(this)}recordResponse(r=this.response){if(this.response=r,r){const{statusCode:o}=r;isSuccessful(o)?this.adapter.visitRequestCompleted(this):this.adapter.visitRequestFailedWithStatusCode(this,o)}}finishRequest(){this.recordTimingMetric(TimingMetric.requestEnd),this.adapter.visitRequestFinished(this)}loadResponse(){if(this.response){const{statusCode:r,responseHTML:o}=this.response;this.render(async()=>{if(this.shouldCacheSnapshot&&this.cacheSnapshot(),this.view.renderPromise&&await this.view.renderPromise,isSuccessful(r)&&o!=null){const u=PageSnapshot.fromHTMLString(o);await this.renderPageSnapshot(u,!1),this.adapter.visitRendered(this),this.complete()}else await this.view.renderError(PageSnapshot.fromHTMLString(o),this),this.adapter.visitRendered(this),this.fail()})}}getCachedSnapshot(){const r=this.view.getCachedSnapshotForLocation(this.location)||this.getPreloadedSnapshot();if(r&&(!getAnchor(this.location)||r.hasAnchor(getAnchor(this.location)))&&(this.action=="restore"||r.isPreviewable))return r}getPreloadedSnapshot(){if(this.snapshotHTML)return PageSnapshot.fromHTMLString(this.snapshotHTML)}hasCachedSnapshot(){return this.getCachedSnapshot()!=null}loadCachedSnapshot(){const r=this.getCachedSnapshot();if(r){const o=this.shouldIssueRequest();this.render(async()=>{this.cacheSnapshot(),this.isSamePage||this.isPageRefresh?this.adapter.visitRendered(this):(this.view.renderPromise&&await this.view.renderPromise,await this.renderPageSnapshot(r,o),this.adapter.visitRendered(this),o||this.complete())})}}followRedirect(){var r;this.redirectedToLocation&&!this.followedRedirect&&((r=this.response)!=null&&r.redirected)&&(this.adapter.visitProposedToLocation(this.redirectedToLocation,{action:"replace",response:this.response,shouldCacheSnapshot:!1,willRender:!1}),this.followedRedirect=!0)}goToSamePageAnchor(){this.isSamePage&&this.render(async()=>{this.cacheSnapshot(),this.performScroll(),this.changeHistory(),this.adapter.visitRendered(this)})}prepareRequest(r){this.acceptsStreamResponse&&r.acceptResponseType(StreamMessage.contentType)}requestStarted(){this.startRequest()}requestPreventedHandlingResponse(r,o){}async requestSucceededWithResponse(r,o){const u=await o.responseHTML,{redirected:g,statusCode:k}=o;u==null?this.recordResponse({statusCode:SystemStatusCode.contentTypeMismatch,redirected:g}):(this.redirectedToLocation=o.redirected?o.location:void 0,this.recordResponse({statusCode:k,responseHTML:u,redirected:g}))}async requestFailedWithResponse(r,o){const u=await o.responseHTML,{redirected:g,statusCode:k}=o;u==null?this.recordResponse({statusCode:SystemStatusCode.contentTypeMismatch,redirected:g}):this.recordResponse({statusCode:k,responseHTML:u,redirected:g})}requestErrored(r,o){this.recordResponse({statusCode:SystemStatusCode.networkFailure,redirected:!1})}requestFinished(){this.finishRequest()}performScroll(){!this.scrolled&&!this.view.forceReloaded&&!this.view.shouldPreserveScrollPosition(this)&&(this.action=="restore"?this.scrollToRestoredPosition()||this.scrollToAnchor()||this.view.scrollToTop():this.scrollToAnchor()||this.view.scrollToTop(),this.isSamePage&&this.delegate.visitScrolledToSamePageLocation(this.view.lastRenderedLocation,this.location),this.scrolled=!0)}scrollToRestoredPosition(){const{scrollPosition:r}=this.restorationData;if(r)return this.view.scrollToPosition(r),!0}scrollToAnchor(){const r=getAnchor(this.location);if(r!=null)return this.view.scrollToAnchor(r),!0}recordTimingMetric(r){this.timingMetrics[r]=new Date().getTime()}getTimingMetrics(){return{...this.timingMetrics}}hasPreloadedResponse(){return typeof this.response=="object"}shouldIssueRequest(){return this.isSamePage?!1:this.action=="restore"?!this.hasCachedSnapshot():this.willRender}cacheSnapshot(){this.snapshotCached||(this.view.cacheSnapshot(this.snapshot).then(r=>r&&this.visitCachedSnapshot(r)),this.snapshotCached=!0)}async render(r){this.cancelRender(),await new Promise(o=>{this.frame=document.visibilityState==="hidden"?setTimeout(()=>o(),0):requestAnimationFrame(()=>o())}),await r(),delete this.frame}async renderPageSnapshot(r,o){await this.viewTransitioner.renderChange(this.view.shouldTransitionTo(r),async()=>{await this.view.renderPage(r,o,this.willRender,this),this.performScroll()})}cancelRender(){this.frame&&(cancelAnimationFrame(this.frame),delete this.frame)}}function isSuccessful(h){return h>=200&&h<300}class BrowserAdapter{constructor(r){Ce(this,"progressBar",new ProgressBar);Ce(this,"showProgressBar",()=>{this.progressBar.show()});this.session=r}visitProposedToLocation(r,o){locationIsVisitable(r,this.navigator.rootLocation)?this.navigator.startVisit(r,(o==null?void 0:o.restorationIdentifier)||uuid(),o):window.location.href=r.toString()}visitStarted(r){this.location=r.location,this.redirectedToLocation=null,r.loadCachedSnapshot(),r.issueRequest(),r.goToSamePageAnchor()}visitRequestStarted(r){this.progressBar.setValue(0),r.hasCachedSnapshot()||r.action!="restore"?this.showVisitProgressBarAfterDelay():this.showProgressBar()}visitRequestCompleted(r){r.loadResponse(),r.response.redirected&&(this.redirectedToLocation=r.redirectedToLocation)}visitRequestFailedWithStatusCode(r,o){switch(o){case SystemStatusCode.networkFailure:case SystemStatusCode.timeoutFailure:case SystemStatusCode.contentTypeMismatch:return this.reload({reason:"request_failed",context:{statusCode:o}});default:return r.loadResponse()}}visitRequestFinished(r){}visitCompleted(r){this.progressBar.setValue(1),this.hideVisitProgressBar()}pageInvalidated(r){this.reload(r)}visitFailed(r){this.progressBar.setValue(1),this.hideVisitProgressBar()}visitRendered(r){}linkPrefetchingIsEnabledForLocation(r){return!0}formSubmissionStarted(r){this.progressBar.setValue(0),this.showFormProgressBarAfterDelay()}formSubmissionFinished(r){this.progressBar.setValue(1),this.hideFormProgressBar()}showVisitProgressBarAfterDelay(){this.visitProgressBarTimeout=window.setTimeout(this.showProgressBar,this.session.progressBarDelay)}hideVisitProgressBar(){this.progressBar.hide(),this.visitProgressBarTimeout!=null&&(window.clearTimeout(this.visitProgressBarTimeout),delete this.visitProgressBarTimeout)}showFormProgressBarAfterDelay(){this.formProgressBarTimeout==null&&(this.formProgressBarTimeout=window.setTimeout(this.showProgressBar,this.session.progressBarDelay))}hideFormProgressBar(){this.progressBar.hide(),this.formProgressBarTimeout!=null&&(window.clearTimeout(this.formProgressBarTimeout),delete this.formProgressBarTimeout)}reload(r){var o;dispatch("turbo:reload",{detail:r}),window.location.href=((o=this.redirectedToLocation||this.location)==null?void 0:o.toString())||window.location.href}get navigator(){return this.session.navigator}}class CacheObserver{constructor(){Ce(this,"selector","[data-turbo-temporary]");Ce(this,"deprecatedSelector","[data-turbo-cache=false]");Ce(this,"started",!1);Ce(this,"removeTemporaryElements",r=>{for(const o of this.temporaryElements)o.remove()})}start(){this.started||(this.started=!0,addEventListener("turbo:before-cache",this.removeTemporaryElements,!1))}stop(){this.started&&(this.started=!1,removeEventListener("turbo:before-cache",this.removeTemporaryElements,!1))}get temporaryElements(){return[...document.querySelectorAll(this.selector),...this.temporaryElementsWithDeprecation]}get temporaryElementsWithDeprecation(){const r=document.querySelectorAll(this.deprecatedSelector);return r.length&&console.warn(`The ${this.deprecatedSelector} selector is deprecated and will be removed in a future version. Use ${this.selector} instead.`),[...r]}}var et,bi,zt,Yt;class FrameRedirector{constructor(r,o){qe(this,et);this.session=r,this.element=o,this.linkInterceptor=new LinkInterceptor(this,o),this.formSubmitObserver=new FormSubmitObserver(this,o)}start(){this.linkInterceptor.start(),this.formSubmitObserver.start()}stop(){this.linkInterceptor.stop(),this.formSubmitObserver.stop()}shouldInterceptLinkClick(r,o,u){return Ie(this,et,zt).call(this,r)}linkClickIntercepted(r,o,u){const g=Ie(this,et,Yt).call(this,r);g&&g.delegate.linkClickIntercepted(r,o,u)}willSubmitForm(r,o){return r.closest("turbo-frame")==null&&Ie(this,et,bi).call(this,r,o)&&Ie(this,et,zt).call(this,r,o)}formSubmitted(r,o){const u=Ie(this,et,Yt).call(this,r,o);u&&u.delegate.formSubmitted(r,o)}}et=new WeakSet,bi=function(r,o){const u=getAction$1(r,o),g=this.element.ownerDocument.querySelector('meta[name="turbo-root"]'),k=expandURL((g==null?void 0:g.content)??"/");return Ie(this,et,zt).call(this,r,o)&&locationIsVisitable(u,k)},zt=function(r,o){if(r instanceof HTMLFormElement?this.session.submissionIsNavigatable(r,o):this.session.elementIsNavigatable(r)){const g=Ie(this,et,Yt).call(this,r,o);return g?g!=r.closest("turbo-frame"):!1}else return!1},Yt=function(r,o){const u=(o==null?void 0:o.getAttribute("data-turbo-frame"))||r.getAttribute("data-turbo-frame");if(u&&u!="_top"){const g=this.element.querySelector(`#${u}:not([disabled])`);if(g instanceof FrameElement)return g}};class History{constructor(r){Ce(this,"location");Ce(this,"restorationIdentifier",uuid());Ce(this,"restorationData",{});Ce(this,"started",!1);Ce(this,"pageLoaded",!1);Ce(this,"currentIndex",0);Ce(this,"onPopState",r=>{if(this.shouldHandlePopState()){const{turbo:o}=r.state||{};if(o){this.location=new URL(window.location.href);const{restorationIdentifier:u,restorationIndex:g}=o;this.restorationIdentifier=u;const k=g>this.currentIndex?"forward":"back";this.delegate.historyPoppedToLocationWithRestorationIdentifierAndDirection(this.location,u,k),this.currentIndex=g}}});Ce(this,"onPageLoad",async r=>{await nextMicrotask(),this.pageLoaded=!0});this.delegate=r}start(){var r,o;this.started||(addEventListener("popstate",this.onPopState,!1),addEventListener("load",this.onPageLoad,!1),this.currentIndex=((o=(r=history.state)==null?void 0:r.turbo)==null?void 0:o.restorationIndex)||0,this.started=!0,this.replace(new URL(window.location.href)))}stop(){this.started&&(removeEventListener("popstate",this.onPopState,!1),removeEventListener("load",this.onPageLoad,!1),this.started=!1)}push(r,o){this.update(history.pushState,r,o)}replace(r,o){this.update(history.replaceState,r,o)}update(r,o,u=uuid()){r===history.pushState&&++this.currentIndex;const g={turbo:{restorationIdentifier:u,restorationIndex:this.currentIndex}};r.call(history,g,"",o.href),this.location=o,this.restorationIdentifier=u}getRestorationDataForIdentifier(r){return this.restorationData[r]||{}}updateRestorationData(r){const{restorationIdentifier:o}=this,u=this.restorationData[o];this.restorationData[o]={...u,...r}}assumeControlOfScrollRestoration(){this.previousScrollRestoration||(this.previousScrollRestoration=history.scrollRestoration??"auto",history.scrollRestoration="manual")}relinquishControlOfScrollRestoration(){this.previousScrollRestoration&&(history.scrollRestoration=this.previousScrollRestoration,delete this.previousScrollRestoration)}shouldHandlePopState(){return this.pageIsLoaded()}pageIsLoaded(){return this.pageLoaded||document.readyState=="complete"}}var bt,Dt,Bt,It,Gt,Vt,Tt,Si,vi;class LinkPrefetchObserver{constructor(r,o){qe(this,Tt);Ce(this,"started",!1);qe(this,bt,null);qe(this,Dt,()=>{this.eventTarget.addEventListener("mouseenter",De(this,Bt),{capture:!0,passive:!0}),this.eventTarget.addEventListener("mouseleave",De(this,It),{capture:!0,passive:!0}),this.eventTarget.addEventListener("turbo:before-fetch-request",De(this,Vt),!0),this.started=!0});qe(this,Bt,r=>{if(getMetaContent("turbo-prefetch")==="false")return;const o=r.target;if(o.matches&&o.matches("a[href]:not([target^=_]):not([download])")&&Ie(this,Tt,vi).call(this,o)){const g=o,k=getLocationForLink(g);if(this.delegate.canPrefetchRequestToLocation(g,k)){Ye(this,bt,g);const A=new FetchRequest(this,FetchMethod.get,k,new URLSearchParams,o);A.fetchOptions.priority="low",prefetchCache.setLater(k.toString(),A,De(this,Tt,Si))}}});qe(this,It,r=>{r.target===De(this,bt)&&De(this,Gt).call(this)});qe(this,Gt,()=>{prefetchCache.clear(),Ye(this,bt,null)});qe(this,Vt,r=>{if(r.target.tagName!=="FORM"&&r.detail.fetchOptions.method==="GET"){const o=prefetchCache.get(r.detail.url.toString());o&&(r.detail.fetchRequest=o),prefetchCache.clear()}});this.delegate=r,this.eventTarget=o}start(){this.started||(this.eventTarget.readyState==="loading"?this.eventTarget.addEventListener("DOMContentLoaded",De(this,Dt),{once:!0}):De(this,Dt).call(this))}stop(){this.started&&(this.eventTarget.removeEventListener("mouseenter",De(this,Bt),{capture:!0,passive:!0}),this.eventTarget.removeEventListener("mouseleave",De(this,It),{capture:!0,passive:!0}),this.eventTarget.removeEventListener("turbo:before-fetch-request",De(this,Vt),!0),this.started=!1)}prepareRequest(r){const o=r.target;r.headers["X-Sec-Purpose"]="prefetch";const u=o.closest("turbo-frame"),g=o.getAttribute("data-turbo-frame")||(u==null?void 0:u.getAttribute("target"))||(u==null?void 0:u.id);g&&g!=="_top"&&(r.headers["Turbo-Frame"]=g)}requestSucceededWithResponse(){}requestStarted(r){}requestErrored(r){}requestFinished(r){}requestPreventedHandlingResponse(r,o){}requestFailedWithResponse(r,o){}}bt=new WeakMap,Dt=new WeakMap,Bt=new WeakMap,It=new WeakMap,Gt=new WeakMap,Vt=new WeakMap,Tt=new WeakSet,Si=function(){return Number(getMetaContent("turbo-prefetch-cache-time"))||cacheTtl},vi=function(r){return!(!r.getAttribute("href")||unfetchableLink(r)||linkToTheSamePage(r)||linkOptsOut(r)||nonSafeLink(r)||eventPrevented(r))};const unfetchableLink=h=>h.origin!==document.location.origin||!["http:","https:"].includes(h.protocol)||h.hasAttribute("target"),linkToTheSamePage=h=>h.pathname+h.search===document.location.pathname+document.location.search||h.href.startsWith("#"),linkOptsOut=h=>{if(h.getAttribute("data-turbo-prefetch")==="false"||h.getAttribute("data-turbo")==="false")return!0;const r=findClosestRecursively(h,"[data-turbo-prefetch]");return!!(r&&r.getAttribute("data-turbo-prefetch")==="false")},nonSafeLink=h=>{const r=h.getAttribute("data-turbo-method");return!!(r&&r.toLowerCase()!=="get"||isUJS(h)||h.hasAttribute("data-turbo-confirm")||h.hasAttribute("data-turbo-stream"))},isUJS=h=>h.hasAttribute("data-remote")||h.hasAttribute("data-behavior")||h.hasAttribute("data-confirm")||h.hasAttribute("data-method"),eventPrevented=h=>dispatch("turbo:before-prefetch",{target:h,cancelable:!0}).defaultPrevented;var Ct,wi,ki;class Navigator{constructor(r){qe(this,Ct);this.delegate=r}proposeVisit(r,o={}){this.delegate.allowsVisitingLocationWithAction(r,o.action)&&this.delegate.visitProposedToLocation(r,o)}startVisit(r,o,u={}){this.stop(),this.currentVisit=new Visit(this,expandURL(r),o,{referrer:this.location,...u}),this.currentVisit.start()}submitForm(r,o){this.stop(),this.formSubmission=new FormSubmission(this,r,o,!0),this.formSubmission.start()}stop(){this.formSubmission&&(this.formSubmission.stop(),delete this.formSubmission),this.currentVisit&&(this.currentVisit.cancel(),delete this.currentVisit)}get adapter(){return this.delegate.adapter}get view(){return this.delegate.view}get rootLocation(){return this.view.snapshot.rootLocation}get history(){return this.delegate.history}formSubmissionStarted(r){typeof this.adapter.formSubmissionStarted=="function"&&this.adapter.formSubmissionStarted(r)}async formSubmissionSucceededWithResponse(r,o){if(r==this.formSubmission){const u=await o.responseHTML;if(u){const g=r.isSafe;g||this.view.clearSnapshotCache();const{statusCode:k,redirected:A}=o,q={action:Ie(this,Ct,wi).call(this,r,o),shouldCacheSnapshot:g,response:{statusCode:k,responseHTML:u,redirected:A}};this.proposeVisit(o.location,q)}}}async formSubmissionFailedWithResponse(r,o){const u=await o.responseHTML;if(u){const g=PageSnapshot.fromHTMLString(u);o.serverError?await this.view.renderError(g,this.currentVisit):await this.view.renderPage(g,!1,!0,this.currentVisit),g.shouldPreserveScrollPosition||this.view.scrollToTop(),this.view.clearSnapshotCache()}}formSubmissionErrored(r,o){console.error(o)}formSubmissionFinished(r){typeof this.adapter.formSubmissionFinished=="function"&&this.adapter.formSubmissionFinished(r)}linkPrefetchingIsEnabledForLocation(r){return typeof this.adapter.linkPrefetchingIsEnabledForLocation=="function"?this.adapter.linkPrefetchingIsEnabledForLocation(r):!0}visitStarted(r){this.delegate.visitStarted(r)}visitCompleted(r){this.delegate.visitCompleted(r),delete this.currentVisit}locationWithActionIsSamePage(r,o){const u=getAnchor(r),g=getAnchor(this.view.lastRenderedLocation),k=o==="restore"&&typeof u>"u";return o!=="replace"&&getRequestURL(r)===getRequestURL(this.view.lastRenderedLocation)&&(k||u!=null&&u!==g)}visitScrolledToSamePageLocation(r,o){this.delegate.visitScrolledToSamePageLocation(r,o)}get location(){return this.history.location}get restorationIdentifier(){return this.history.restorationIdentifier}}Ct=new WeakSet,wi=function(r,o){const{submitter:u,formElement:g}=r;return getVisitAction(u,g)||Ie(this,Ct,ki).call(this,o)},ki=function(r){var u;return r.redirected&&r.location.href===((u=this.location)==null?void 0:u.href)?"replace":"advance"};const PageStage={initial:0,loading:1,interactive:2,complete:3};class PageObserver{constructor(r){Ce(this,"stage",PageStage.initial);Ce(this,"started",!1);Ce(this,"interpretReadyState",()=>{const{readyState:r}=this;r=="interactive"?this.pageIsInteractive():r=="complete"&&this.pageIsComplete()});Ce(this,"pageWillUnload",()=>{this.delegate.pageWillUnload()});this.delegate=r}start(){this.started||(this.stage==PageStage.initial&&(this.stage=PageStage.loading),document.addEventListener("readystatechange",this.interpretReadyState,!1),addEventListener("pagehide",this.pageWillUnload,!1),this.started=!0)}stop(){this.started&&(document.removeEventListener("readystatechange",this.interpretReadyState,!1),removeEventListener("pagehide",this.pageWillUnload,!1),this.started=!1)}pageIsInteractive(){this.stage==PageStage.loading&&(this.stage=PageStage.interactive,this.delegate.pageBecameInteractive())}pageIsComplete(){this.pageIsInteractive(),this.stage==PageStage.interactive&&(this.stage=PageStage.complete,this.delegate.pageLoaded())}get readyState(){return document.readyState}}class ScrollObserver{constructor(r){Ce(this,"started",!1);Ce(this,"onScroll",()=>{this.updatePosition({x:window.pageXOffset,y:window.pageYOffset})});this.delegate=r}start(){this.started||(addEventListener("scroll",this.onScroll,!1),this.onScroll(),this.started=!0)}stop(){this.started&&(removeEventListener("scroll",this.onScroll,!1),this.started=!1)}updatePosition(r){this.delegate.scrollPositionChanged(r)}}class StreamMessageRenderer{render({fragment:r}){Bardo.preservingPermanentElements(this,getPermanentElementMapForFragment(r),()=>{withAutofocusFromFragment(r,()=>{withPreservedFocus(()=>{document.documentElement.appendChild(r)})})})}enteringBardo(r,o){o.replaceWith(r.cloneNode(!0))}leavingBardo(){}}function getPermanentElementMapForFragment(h){const r=queryPermanentElementsAll(document.documentElement),o={};for(const u of r){const{id:g}=u;for(const k of h.querySelectorAll("turbo-stream")){const A=getPermanentElementById(k.templateElement.content,g);A&&(o[g]=[u,A])}}return o}async function withAutofocusFromFragment(h,r){const o=`turbo-stream-autofocus-${uuid()}`,u=h.querySelectorAll("turbo-stream"),g=firstAutofocusableElementInStreams(u);let k=null;if(g&&(g.id?k=g.id:k=o,g.id=k),r(),await nextRepaint(),(document.activeElement==null||document.activeElement==document.body)&&k){const R=document.getElementById(k);elementIsFocusable(R)&&R.focus(),R&&R.id==o&&R.removeAttribute("id")}}async function withPreservedFocus(h){const[r,o]=await around(h,()=>document.activeElement),u=r&&r.id;if(u){const g=document.getElementById(u);elementIsFocusable(g)&&g!=o&&g.focus()}}function firstAutofocusableElementInStreams(h){for(const r of h){const o=queryAutofocusableElement(r.templateElement.content);if(o)return o}return null}var ut;class StreamObserver{constructor(r){Ce(this,"sources",new Set);qe(this,ut,!1);Ce(this,"inspectFetchResponse",r=>{const o=fetchResponseFromEvent(r);o&&fetchResponseIsStream(o)&&(r.preventDefault(),this.receiveMessageResponse(o))});Ce(this,"receiveMessageEvent",r=>{De(this,ut)&&typeof r.data=="string"&&this.receiveMessageHTML(r.data)});this.delegate=r}start(){De(this,ut)||(Ye(this,ut,!0),addEventListener("turbo:before-fetch-response",this.inspectFetchResponse,!1))}stop(){De(this,ut)&&(Ye(this,ut,!1),removeEventListener("turbo:before-fetch-response",this.inspectFetchResponse,!1))}connectStreamSource(r){this.streamSourceIsConnected(r)||(this.sources.add(r),r.addEventListener("message",this.receiveMessageEvent,!1))}disconnectStreamSource(r){this.streamSourceIsConnected(r)&&(this.sources.delete(r),r.removeEventListener("message",this.receiveMessageEvent,!1))}streamSourceIsConnected(r){return this.sources.has(r)}async receiveMessageResponse(r){const o=await r.responseHTML;o&&this.receiveMessageHTML(o)}receiveMessageHTML(r){this.delegate.receivedMessageFromStream(StreamMessage.wrap(r))}}ut=new WeakMap;function fetchResponseFromEvent(h){var o;const r=(o=h.detail)==null?void 0:o.fetchResponse;if(r instanceof FetchResponse)return r}function fetchResponseIsStream(h){return(h.contentType??"").startsWith(StreamMessage.contentType)}class ErrorRenderer extends Renderer{static renderElement(r,o){const{documentElement:u,body:g}=document;u.replaceChild(o,g)}async render(){this.replaceHeadAndBody(),this.activateScriptElements()}replaceHeadAndBody(){const{documentElement:r,head:o}=document;r.replaceChild(this.newHead,o),this.renderElement(this.currentElement,this.newElement)}activateScriptElements(){for(const r of this.scriptElements){const o=r.parentNode;if(o){const u=activateScriptElement(r);o.replaceChild(u,r)}}}get newHead(){return this.newSnapshot.headSnapshot.element}get scriptElements(){return document.documentElement.querySelectorAll("script")}}var Kt,xi;class PageRenderer extends Renderer{constructor(){super(...arguments);qe(this,Kt)}static renderElement(o,u){document.body&&u instanceof HTMLBodyElement?document.body.replaceWith(u):document.documentElement.appendChild(u)}get shouldRender(){return this.newSnapshot.isVisitable&&this.trackedElementsAreIdentical}get reloadReason(){if(!this.newSnapshot.isVisitable)return{reason:"turbo_visit_control_is_reload"};if(!this.trackedElementsAreIdentical)return{reason:"tracked_element_mismatch"}}async prepareToRender(){Ie(this,Kt,xi).call(this),await this.mergeHead()}async render(){this.willRender&&await this.replaceBody()}finishRendering(){super.finishRendering(),this.isPreview||this.focusFirstAutofocusableElement()}get currentHeadSnapshot(){return this.currentSnapshot.headSnapshot}get newHeadSnapshot(){return this.newSnapshot.headSnapshot}get newElement(){return this.newSnapshot.element}async mergeHead(){const o=this.mergeProvisionalElements(),u=this.copyNewHeadStylesheetElements();this.copyNewHeadScriptElements(),await o,await u,this.willRender&&this.removeUnusedDynamicStylesheetElements()}async replaceBody(){await this.preservingPermanentElements(async()=>{this.activateNewBody(),await this.assignNewBody()})}get trackedElementsAreIdentical(){return this.currentHeadSnapshot.trackedElementSignature==this.newHeadSnapshot.trackedElementSignature}async copyNewHeadStylesheetElements(){const o=[];for(const u of this.newHeadStylesheetElements)o.push(waitForLoad(u)),document.head.appendChild(u);await Promise.all(o)}copyNewHeadScriptElements(){for(const o of this.newHeadScriptElements)document.head.appendChild(activateScriptElement(o))}removeUnusedDynamicStylesheetElements(){for(const o of this.unusedDynamicStylesheetElements)document.head.removeChild(o)}async mergeProvisionalElements(){const o=[...this.newHeadProvisionalElements];for(const u of this.currentHeadProvisionalElements)this.isCurrentElementInElementList(u,o)||document.head.removeChild(u);for(const u of o)document.head.appendChild(u)}isCurrentElementInElementList(o,u){for(const[g,k]of u.entries()){if(o.tagName=="TITLE"){if(k.tagName!="TITLE")continue;if(o.innerHTML==k.innerHTML)return u.splice(g,1),!0}if(k.isEqualNode(o))return u.splice(g,1),!0}return!1}removeCurrentHeadProvisionalElements(){for(const o of this.currentHeadProvisionalElements)document.head.removeChild(o)}copyNewHeadProvisionalElements(){for(const o of this.newHeadProvisionalElements)document.head.appendChild(o)}activateNewBody(){document.adoptNode(this.newElement),this.activateNewBodyScriptElements()}activateNewBodyScriptElements(){for(const o of this.newBodyScriptElements){const u=activateScriptElement(o);o.replaceWith(u)}}async assignNewBody(){await this.renderElement(this.currentElement,this.newElement)}get unusedDynamicStylesheetElements(){return this.oldHeadStylesheetElements.filter(o=>o.getAttribute("data-turbo-track")==="dynamic")}get oldHeadStylesheetElements(){return this.currentHeadSnapshot.getStylesheetElementsNotInSnapshot(this.newHeadSnapshot)}get newHeadStylesheetElements(){return this.newHeadSnapshot.getStylesheetElementsNotInSnapshot(this.currentHeadSnapshot)}get newHeadScriptElements(){return this.newHeadSnapshot.getScriptElementsNotInSnapshot(this.currentHeadSnapshot)}get currentHeadProvisionalElements(){return this.currentHeadSnapshot.provisionalElements}get newHeadProvisionalElements(){return this.newHeadSnapshot.provisionalElements}get newBodyScriptElements(){return this.newElement.querySelectorAll("script")}}Kt=new WeakSet,xi=function(){const{documentElement:o}=this.currentSnapshot,{lang:u}=this.newSnapshot;u?o.setAttribute("lang",u):o.removeAttribute("lang")};class MorphingPageRenderer extends PageRenderer{static renderElement(r,o){morphElements(r,o,{callbacks:{beforeNodeMorphed:(u,g)=>shouldRefreshFrameWithMorphing(u,g)&&!closestFrameReloadableWithMorphing(u)?(u.reload(),!1):!0}}),dispatch("turbo:morph",{detail:{currentElement:r,newElement:o}})}async preservingPermanentElements(r){return await r()}get renderMethod(){return"morph"}get shouldAutofocus(){return!1}}class SnapshotCache{constructor(r){Ce(this,"keys",[]);Ce(this,"snapshots",{});this.size=r}has(r){return toCacheKey(r)in this.snapshots}get(r){if(this.has(r)){const o=this.read(r);return this.touch(r),o}}put(r,o){return this.write(r,o),this.touch(r),o}clear(){this.snapshots={}}read(r){return this.snapshots[toCacheKey(r)]}write(r,o){this.snapshots[toCacheKey(r)]=o}touch(r){const o=toCacheKey(r),u=this.keys.indexOf(o);u>-1&&this.keys.splice(u,1),this.keys.unshift(o),this.trim()}trim(){for(const r of this.keys.splice(this.size))delete this.snapshots[r]}}class PageView extends View{constructor(){super(...arguments);Ce(this,"snapshotCache",new SnapshotCache(10));Ce(this,"lastRenderedLocation",new URL(location.href));Ce(this,"forceReloaded",!1)}shouldTransitionTo(o){return this.snapshot.prefersViewTransitions&&o.prefersViewTransitions}renderPage(o,u=!1,g=!0,k){const R=this.isPageRefresh(k)&&this.snapshot.shouldMorphPage?MorphingPageRenderer:PageRenderer,q=new R(this.snapshot,o,u,g);return q.shouldRender?k==null||k.changeHistory():this.forceReloaded=!0,this.render(q)}renderError(o,u){u==null||u.changeHistory();const g=new ErrorRenderer(this.snapshot,o,!1);return this.render(g)}clearSnapshotCache(){this.snapshotCache.clear()}async cacheSnapshot(o=this.snapshot){if(o.isCacheable){this.delegate.viewWillCacheSnapshot();const{lastRenderedLocation:u}=this;await nextEventLoopTick();const g=o.clone();return this.snapshotCache.put(u,g),g}}getCachedSnapshotForLocation(o){return this.snapshotCache.get(o)}isPageRefresh(o){return!o||this.lastRenderedLocation.pathname===o.location.pathname&&o.action==="replace"}shouldPreserveScrollPosition(o){return this.isPageRefresh(o)&&this.snapshot.shouldPreserveScrollPosition}get snapshot(){return PageSnapshot.fromElement(this.element)}}var Ft;class Preloader{constructor(r,o){Ce(this,"selector","a[data-turbo-preload]");qe(this,Ft,()=>{this.preloadOnLoadLinksForView(document.body)});this.delegate=r,this.snapshotCache=o}start(){document.readyState==="loading"?document.addEventListener("DOMContentLoaded",De(this,Ft)):this.preloadOnLoadLinksForView(document.body)}stop(){document.removeEventListener("DOMContentLoaded",De(this,Ft))}preloadOnLoadLinksForView(r){for(const o of r.querySelectorAll(this.selector))this.delegate.shouldPreloadLink(o)&&this.preloadURL(o)}async preloadURL(r){const o=new URL(r.href);if(this.snapshotCache.has(o))return;await new FetchRequest(this,FetchMethod.get,o,new URLSearchParams,r).perform()}prepareRequest(r){r.headers["X-Sec-Purpose"]="prefetch"}async requestSucceededWithResponse(r,o){try{const u=await o.responseHTML,g=PageSnapshot.fromHTMLString(u);this.snapshotCache.put(r.url,g)}catch{}}requestStarted(r){}requestErrored(r){}requestFinished(r){}requestPreventedHandlingResponse(r,o){}requestFailedWithResponse(r,o){}}Ft=new WeakMap;var St,Wt;class Cache{constructor(r){qe(this,St);this.session=r}clear(){this.session.clearCache()}resetCacheControl(){Ie(this,St,Wt).call(this,"")}exemptPageFromCache(){Ie(this,St,Wt).call(this,"no-cache")}exemptPageFromPreview(){Ie(this,St,Wt).call(this,"no-preview")}}St=new WeakSet,Wt=function(r){setMetaContent("turbo-cache-control",r)};var Nt;class Session{constructor(r){Ce(this,"navigator",new Navigator(this));Ce(this,"history",new History(this));Ce(this,"view",new PageView(this,document.documentElement));Ce(this,"adapter",new BrowserAdapter(this));Ce(this,"pageObserver",new PageObserver(this));Ce(this,"cacheObserver",new CacheObserver);Ce(this,"linkPrefetchObserver",new LinkPrefetchObserver(this,document));Ce(this,"linkClickObserver",new LinkClickObserver(this,window));Ce(this,"formSubmitObserver",new FormSubmitObserver(this,document));Ce(this,"scrollObserver",new ScrollObserver(this));Ce(this,"streamObserver",new StreamObserver(this));Ce(this,"formLinkClickObserver",new FormLinkClickObserver(this,document.documentElement));Ce(this,"frameRedirector",new FrameRedirector(this,document.documentElement));Ce(this,"streamMessageRenderer",new StreamMessageRenderer);Ce(this,"cache",new Cache(this));Ce(this,"enabled",!0);Ce(this,"started",!1);qe(this,Nt,150);this.recentRequests=r,this.preloader=new Preloader(this,this.view.snapshotCache),this.debouncedRefresh=this.refresh,this.pageRefreshDebouncePeriod=this.pageRefreshDebouncePeriod}start(){this.started||(this.pageObserver.start(),this.cacheObserver.start(),this.linkPrefetchObserver.start(),this.formLinkClickObserver.start(),this.linkClickObserver.start(),this.formSubmitObserver.start(),this.scrollObserver.start(),this.streamObserver.start(),this.frameRedirector.start(),this.history.start(),this.preloader.start(),this.started=!0,this.enabled=!0)}disable(){this.enabled=!1}stop(){this.started&&(this.pageObserver.stop(),this.cacheObserver.stop(),this.linkPrefetchObserver.stop(),this.formLinkClickObserver.stop(),this.linkClickObserver.stop(),this.formSubmitObserver.stop(),this.scrollObserver.stop(),this.streamObserver.stop(),this.frameRedirector.stop(),this.history.stop(),this.preloader.stop(),this.started=!1)}registerAdapter(r){this.adapter=r}visit(r,o={}){const u=o.frame?document.getElementById(o.frame):null;if(u instanceof FrameElement){const g=o.action||getVisitAction(u);u.delegate.proposeVisitIfNavigatedWithAction(u,g),u.src=r.toString()}else this.navigator.proposeVisit(expandURL(r),o)}refresh(r,o){const u=o&&this.recentRequests.has(o),g=r===document.baseURI;!u&&!this.navigator.currentVisit&&g&&this.visit(r,{action:"replace",shouldCacheSnapshot:!1})}connectStreamSource(r){this.streamObserver.connectStreamSource(r)}disconnectStreamSource(r){this.streamObserver.disconnectStreamSource(r)}renderStreamMessage(r){this.streamMessageRenderer.render(StreamMessage.wrap(r))}clearCache(){this.view.clearSnapshotCache()}setProgressBarDelay(r){console.warn("Please replace `session.setProgressBarDelay(delay)` with `session.progressBarDelay = delay`. The function is deprecated and will be removed in a future version of Turbo.`"),this.progressBarDelay=r}set progressBarDelay(r){config$1.drive.progressBarDelay=r}get progressBarDelay(){return config$1.drive.progressBarDelay}set drive(r){config$1.drive.enabled=r}get drive(){return config$1.drive.enabled}set formMode(r){config$1.forms.mode=r}get formMode(){return config$1.forms.mode}get location(){return this.history.location}get restorationIdentifier(){return this.history.restorationIdentifier}get pageRefreshDebouncePeriod(){return De(this,Nt)}set pageRefreshDebouncePeriod(r){this.refresh=debounce$1(this.debouncedRefresh.bind(this),r),Ye(this,Nt,r)}shouldPreloadLink(r){const o=r.hasAttribute("data-turbo-method"),u=r.hasAttribute("data-turbo-stream"),g=r.getAttribute("data-turbo-frame"),k=g=="_top"?null:document.getElementById(g)||findClosestRecursively(r,"turbo-frame:not([disabled])");if(o||u||k instanceof FrameElement)return!1;{const A=new URL(r.href);return this.elementIsNavigatable(r)&&locationIsVisitable(A,this.snapshot.rootLocation)}}historyPoppedToLocationWithRestorationIdentifierAndDirection(r,o,u){this.enabled?this.navigator.startVisit(r,o,{action:"restore",historyChanged:!0,direction:u}):this.adapter.pageInvalidated({reason:"turbo_disabled"})}scrollPositionChanged(r){this.history.updateRestorationData({scrollPosition:r})}willSubmitFormLinkToLocation(r,o){return this.elementIsNavigatable(r)&&locationIsVisitable(o,this.snapshot.rootLocation)}submittedFormLinkToLocation(){}canPrefetchRequestToLocation(r,o){return this.elementIsNavigatable(r)&&locationIsVisitable(o,this.snapshot.rootLocation)&&this.navigator.linkPrefetchingIsEnabledForLocation(o)}willFollowLinkToLocation(r,o,u){return this.elementIsNavigatable(r)&&locationIsVisitable(o,this.snapshot.rootLocation)&&this.applicationAllowsFollowingLinkToLocation(r,o,u)}followedLinkToLocation(r,o){const u=this.getActionForLink(r),g=r.hasAttribute("data-turbo-stream");this.visit(o.href,{action:u,acceptsStreamResponse:g})}allowsVisitingLocationWithAction(r,o){return this.locationWithActionIsSamePage(r,o)||this.applicationAllowsVisitingLocation(r)}visitProposedToLocation(r,o){extendURLWithDeprecatedProperties(r),this.adapter.visitProposedToLocation(r,o)}visitStarted(r){r.acceptsStreamResponse||(markAsBusy(document.documentElement),this.view.markVisitDirection(r.direction)),extendURLWithDeprecatedProperties(r.location),r.silent||this.notifyApplicationAfterVisitingLocation(r.location,r.action)}visitCompleted(r){this.view.unmarkVisitDirection(),clearBusyState(document.documentElement),this.notifyApplicationAfterPageLoad(r.getTimingMetrics())}locationWithActionIsSamePage(r,o){return this.navigator.locationWithActionIsSamePage(r,o)}visitScrolledToSamePageLocation(r,o){this.notifyApplicationAfterVisitingSamePageLocation(r,o)}willSubmitForm(r,o){const u=getAction$1(r,o);return this.submissionIsNavigatable(r,o)&&locationIsVisitable(expandURL(u),this.snapshot.rootLocation)}formSubmitted(r,o){this.navigator.submitForm(r,o)}pageBecameInteractive(){this.view.lastRenderedLocation=this.location,this.notifyApplicationAfterPageLoad()}pageLoaded(){this.history.assumeControlOfScrollRestoration()}pageWillUnload(){this.history.relinquishControlOfScrollRestoration()}receivedMessageFromStream(r){this.renderStreamMessage(r)}viewWillCacheSnapshot(){var r;(r=this.navigator.currentVisit)!=null&&r.silent||this.notifyApplicationBeforeCachingSnapshot()}allowsImmediateRender({element:r},o){const u=this.notifyApplicationBeforeRender(r,o),{defaultPrevented:g,detail:{render:k}}=u;return this.view.renderer&&k&&(this.view.renderer.renderElement=k),!g}viewRenderedSnapshot(r,o,u){this.view.lastRenderedLocation=this.history.location,this.notifyApplicationAfterRender(u)}preloadOnLoadLinksForView(r){this.preloader.preloadOnLoadLinksForView(r)}viewInvalidated(r){this.adapter.pageInvalidated(r)}frameLoaded(r){this.notifyApplicationAfterFrameLoad(r)}frameRendered(r,o){this.notifyApplicationAfterFrameRender(r,o)}applicationAllowsFollowingLinkToLocation(r,o,u){return!this.notifyApplicationAfterClickingLinkToLocation(r,o,u).defaultPrevented}applicationAllowsVisitingLocation(r){return!this.notifyApplicationBeforeVisitingLocation(r).defaultPrevented}notifyApplicationAfterClickingLinkToLocation(r,o,u){return dispatch("turbo:click",{target:r,detail:{url:o.href,originalEvent:u},cancelable:!0})}notifyApplicationBeforeVisitingLocation(r){return dispatch("turbo:before-visit",{detail:{url:r.href},cancelable:!0})}notifyApplicationAfterVisitingLocation(r,o){return dispatch("turbo:visit",{detail:{url:r.href,action:o}})}notifyApplicationBeforeCachingSnapshot(){return dispatch("turbo:before-cache")}notifyApplicationBeforeRender(r,o){return dispatch("turbo:before-render",{detail:{newBody:r,...o},cancelable:!0})}notifyApplicationAfterRender(r){return dispatch("turbo:render",{detail:{renderMethod:r}})}notifyApplicationAfterPageLoad(r={}){return dispatch("turbo:load",{detail:{url:this.location.href,timing:r}})}notifyApplicationAfterVisitingSamePageLocation(r,o){dispatchEvent(new HashChangeEvent("hashchange",{oldURL:r.toString(),newURL:o.toString()}))}notifyApplicationAfterFrameLoad(r){return dispatch("turbo:frame-load",{target:r})}notifyApplicationAfterFrameRender(r,o){return dispatch("turbo:frame-render",{detail:{fetchResponse:r},target:o,cancelable:!0})}submissionIsNavigatable(r,o){if(config$1.forms.mode=="off")return!1;{const u=o?this.elementIsNavigatable(o):!0;return config$1.forms.mode=="optin"?u&&r.closest('[data-turbo="true"]')!=null:u&&this.elementIsNavigatable(r)}}elementIsNavigatable(r){const o=findClosestRecursively(r,"[data-turbo]"),u=findClosestRecursively(r,"turbo-frame");return config$1.drive.enabled||u?o?o.getAttribute("data-turbo")!="false":!0:o?o.getAttribute("data-turbo")=="true":!1}getActionForLink(r){return getVisitAction(r)||"advance"}get snapshot(){return this.view.snapshot}}Nt=new WeakMap;function extendURLWithDeprecatedProperties(h){Object.defineProperties(h,deprecatedLocationPropertyDescriptors)}const deprecatedLocationPropertyDescriptors={absoluteURL:{get(){return this.toString()}}},session=new Session(recentRequests),{cache:cache$1,navigator:navigator$1}=session;function start$1(){session.start()}function registerAdapter(h){session.registerAdapter(h)}function visit(h,r){session.visit(h,r)}function connectStreamSource(h){session.connectStreamSource(h)}function disconnectStreamSource(h){session.disconnectStreamSource(h)}function renderStreamMessage(h){session.renderStreamMessage(h)}function clearCache(){console.warn("Please replace `Turbo.clearCache()` with `Turbo.cache.clear()`. The top-level function is deprecated and will be removed in a future version of Turbo.`"),session.clearCache()}function setProgressBarDelay(h){console.warn("Please replace `Turbo.setProgressBarDelay(delay)` with `Turbo.config.drive.progressBarDelay = delay`. The top-level function is deprecated and will be removed in a future version of Turbo.`"),config$1.drive.progressBarDelay=h}function setConfirmMethod(h){console.warn("Please replace `Turbo.setConfirmMethod(confirmMethod)` with `Turbo.config.forms.confirm = confirmMethod`. The top-level function is deprecated and will be removed in a future version of Turbo.`"),config$1.forms.confirm=h}function setFormMode(h){console.warn("Please replace `Turbo.setFormMode(mode)` with `Turbo.config.forms.mode = mode`. The top-level function is deprecated and will be removed in a future version of Turbo.`"),config$1.forms.mode=h}function morphBodyElements(h,r){MorphingPageRenderer.renderElement(h,r)}function morphTurboFrameElements(h,r){MorphingFrameRenderer.renderElement(h,r)}var Turbo=Object.freeze({__proto__:null,navigator:navigator$1,session,cache:cache$1,PageRenderer,PageSnapshot,FrameRenderer,fetch:fetchWithTurboHeaders,config:config$1,start:start$1,registerAdapter,visit,connectStreamSource,disconnectStreamSource,renderStreamMessage,clearCache,setProgressBarDelay,setConfirmMethod,setFormMode,morphBodyElements,morphTurboFrameElements,morphChildren,morphElements});class TurboFrameMissingError extends Error{}var vt,rt,dt,jt,wt,kt,Fe,Ot,Ti,Ci,Pi,Qi,$i,Ei,Ai,si,yt,Mi,Ht,Ri,Li,Di;class FrameController{constructor(r){qe(this,Fe);Ce(this,"fetchResponseLoaded",r=>Promise.resolve());qe(this,vt,null);qe(this,rt,()=>{});qe(this,dt,!1);qe(this,jt,!1);qe(this,wt,new Set);qe(this,kt,!1);Ce(this,"action",null);Ce(this,"visitCachedSnapshot",({element:r})=>{const o=r.querySelector("#"+this.element.id);o&&this.previousFrameElement&&o.replaceChildren(...this.previousFrameElement.children),delete this.previousFrameElement});this.element=r,this.view=new FrameView(this,this.element),this.appearanceObserver=new AppearanceObserver(this,this.element),this.formLinkClickObserver=new FormLinkClickObserver(this,this.element),this.linkInterceptor=new LinkInterceptor(this,this.element),this.restorationIdentifier=uuid(),this.formSubmitObserver=new FormSubmitObserver(this,this.element)}connect(){De(this,dt)||(Ye(this,dt,!0),this.loadingStyle==FrameLoadingStyle.lazy?this.appearanceObserver.start():Ie(this,Fe,Ot).call(this),this.formLinkClickObserver.start(),this.linkInterceptor.start(),this.formSubmitObserver.start())}disconnect(){De(this,dt)&&(Ye(this,dt,!1),this.appearanceObserver.stop(),this.formLinkClickObserver.stop(),this.linkInterceptor.stop(),this.formSubmitObserver.stop())}disabledChanged(){this.loadingStyle==FrameLoadingStyle.eager&&Ie(this,Fe,Ot).call(this)}sourceURLChanged(){Ie(this,Fe,Ri).call(this,"src")||(this.element.isConnected&&(this.complete=!1),(this.loadingStyle==FrameLoadingStyle.eager||De(this,jt))&&Ie(this,Fe,Ot).call(this))}sourceURLReloaded(){const{refresh:r,src:o}=this.element;return Ye(this,kt,o&&r==="morph"),this.element.removeAttribute("complete"),this.element.src=null,this.element.src=o,this.element.loaded}loadingStyleChanged(){this.loadingStyle==FrameLoadingStyle.lazy?this.appearanceObserver.start():(this.appearanceObserver.stop(),Ie(this,Fe,Ot).call(this))}async loadResponse(r){(r.redirected||r.succeeded&&r.isHTML)&&(this.sourceURL=r.response.url);try{const o=await r.responseHTML;if(o){const u=parseHTMLDocument(o);PageSnapshot.fromDocument(u).isVisitable?await Ie(this,Fe,Ti).call(this,r,u):await Ie(this,Fe,Qi).call(this,r)}}finally{Ye(this,kt,!1),this.fetchResponseLoaded=()=>Promise.resolve()}}elementAppearedInViewport(r){this.proposeVisitIfNavigatedWithAction(r,getVisitAction(r)),Ie(this,Fe,Ot).call(this)}willSubmitFormLinkToLocation(r){return Ie(this,Fe,Ht).call(this,r)}submittedFormLinkToLocation(r,o,u){const g=Ie(this,Fe,yt).call(this,r);g&&u.setAttribute("data-turbo-frame",g.id)}shouldInterceptLinkClick(r,o,u){return Ie(this,Fe,Ht).call(this,r)}linkClickIntercepted(r,o){Ie(this,Fe,Pi).call(this,r,o)}willSubmitForm(r,o){return r.closest("turbo-frame")==this.element&&Ie(this,Fe,Ht).call(this,r,o)}formSubmitted(r,o){this.formSubmission&&this.formSubmission.stop(),this.formSubmission=new FormSubmission(this,r,o);const{fetchRequest:u}=this.formSubmission;this.prepareRequest(u),this.formSubmission.start()}prepareRequest(r){var o;r.headers["Turbo-Frame"]=this.id,(o=this.currentNavigationElement)!=null&&o.hasAttribute("data-turbo-stream")&&r.acceptResponseType(StreamMessage.contentType)}requestStarted(r){markAsBusy(this.element)}requestPreventedHandlingResponse(r,o){De(this,rt).call(this)}async requestSucceededWithResponse(r,o){await this.loadResponse(o),De(this,rt).call(this)}async requestFailedWithResponse(r,o){await this.loadResponse(o),De(this,rt).call(this)}requestErrored(r,o){console.error(o),De(this,rt).call(this)}requestFinished(r){clearBusyState(this.element)}formSubmissionStarted({formElement:r}){markAsBusy(r,Ie(this,Fe,yt).call(this,r))}formSubmissionSucceededWithResponse(r,o){const u=Ie(this,Fe,yt).call(this,r.formElement,r.submitter);u.delegate.proposeVisitIfNavigatedWithAction(u,getVisitAction(r.submitter,r.formElement,u)),u.delegate.loadResponse(o),r.isSafe||session.clearCache()}formSubmissionFailedWithResponse(r,o){this.element.delegate.loadResponse(o),session.clearCache()}formSubmissionErrored(r,o){console.error(o)}formSubmissionFinished({formElement:r}){clearBusyState(r,Ie(this,Fe,yt).call(this,r))}allowsImmediateRender({element:r},o){const u=dispatch("turbo:before-frame-render",{target:this.element,detail:{newFrame:r,...o},cancelable:!0}),{defaultPrevented:g,detail:{render:k}}=u;return this.view.renderer&&k&&(this.view.renderer.renderElement=k),!g}viewRenderedSnapshot(r,o,u){}preloadOnLoadLinksForView(r){session.preloadOnLoadLinksForView(r)}viewInvalidated(){}willRenderFrame(r,o){this.previousFrameElement=r.cloneNode(!0)}proposeVisitIfNavigatedWithAction(r,o=null){if(this.action=o,this.action){const u=PageSnapshot.fromElement(r).clone(),{visitCachedSnapshot:g}=r.delegate;r.delegate.fetchResponseLoaded=async k=>{if(r.src){const{statusCode:A,redirected:R}=k,q=await k.responseHTML,ee={response:{statusCode:A,redirected:R,responseHTML:q},visitCachedSnapshot:g,willRender:!1,updateHistory:!1,restorationIdentifier:this.restorationIdentifier,snapshot:u};this.action&&(ee.action=this.action),session.visit(r.src,ee)}}}}changeHistory(){if(this.action){const r=getHistoryMethodForAction(this.action);session.history.update(r,expandURL(this.element.src||""),this.restorationIdentifier)}}async extractForeignFrameElement(r){let o;const u=CSS.escape(this.id);try{if(o=activateElement(r.querySelector(`turbo-frame#${u}`),this.sourceURL),o)return o;if(o=activateElement(r.querySelector(`turbo-frame[src][recurse~=${u}]`),this.sourceURL),o)return await o.loaded,await this.extractForeignFrameElement(o)}catch(g){return console.error(g),new FrameElement}return null}get id(){return this.element.id}get enabled(){return!this.element.disabled}get sourceURL(){if(this.element.src)return this.element.src}set sourceURL(r){Ie(this,Fe,Li).call(this,"src",()=>{this.element.src=r??null})}get loadingStyle(){return this.element.loading}get isLoading(){return this.formSubmission!==void 0||De(this,rt).call(this)!==void 0}get complete(){return this.element.hasAttribute("complete")}set complete(r){r?this.element.setAttribute("complete",""):this.element.removeAttribute("complete")}get isActive(){return this.element.isActive&&De(this,dt)}get rootLocation(){const r=this.element.ownerDocument.querySelector('meta[name="turbo-root"]'),o=(r==null?void 0:r.content)??"/";return expandURL(o)}}vt=new WeakMap,rt=new WeakMap,dt=new WeakMap,jt=new WeakMap,wt=new WeakMap,kt=new WeakMap,Fe=new WeakSet,Ot=async function(){this.enabled&&this.isActive&&!this.complete&&this.sourceURL&&(this.element.loaded=Ie(this,Fe,Ci).call(this,expandURL(this.sourceURL)),this.appearanceObserver.stop(),await this.element.loaded,Ye(this,jt,!0))},Ti=async function(r,o){const u=await this.extractForeignFrameElement(o.body),g=De(this,kt)?MorphingFrameRenderer:FrameRenderer;if(u){const k=new Snapshot(u),A=new g(this,this.view.snapshot,k,!1,!1);this.view.renderPromise&&await this.view.renderPromise,this.changeHistory(),await this.view.render(A),this.complete=!0,session.frameRendered(r,this.element),session.frameLoaded(this.element),await this.fetchResponseLoaded(r)}else Ie(this,Fe,$i).call(this,r)&&Ie(this,Fe,Ei).call(this,r)},Ci=async function(r){var u;const o=new FetchRequest(this,FetchMethod.get,r,new URLSearchParams,this.element);return(u=De(this,vt))==null||u.cancel(),Ye(this,vt,o),new Promise(g=>{Ye(this,rt,()=>{Ye(this,rt,()=>{}),Ye(this,vt,null),g()}),o.perform()})},Pi=function(r,o,u){const g=Ie(this,Fe,yt).call(this,r,u);g.delegate.proposeVisitIfNavigatedWithAction(g,getVisitAction(u,r,g)),Ie(this,Fe,Di).call(this,r,()=>{g.src=o})},Qi=async function(r){console.warn(`The response (${r.statusCode}) from <turbo-frame id="${this.element.id}"> is performing a full page visit due to turbo-visit-control.`),await Ie(this,Fe,si).call(this,r.response)},$i=function(r){this.element.setAttribute("complete","");const o=r.response,u=async(k,A)=>{k instanceof Response?Ie(this,Fe,si).call(this,k):session.visit(k,A)};return!dispatch("turbo:frame-missing",{target:this.element,detail:{response:o,visit:u},cancelable:!0}).defaultPrevented},Ei=function(r){this.view.missing(),Ie(this,Fe,Ai).call(this,r)},Ai=function(r){const o=`The response (${r.statusCode}) did not contain the expected <turbo-frame id="${this.element.id}"> and will be ignored. To perform a full page visit instead, set turbo-visit-control to reload.`;throw new TurboFrameMissingError(o)},si=async function(r){const o=new FetchResponse(r),u=await o.responseHTML,{location:g,redirected:k,statusCode:A}=o;return session.visit(g,{response:{redirected:k,statusCode:A,responseHTML:u}})},yt=function(r,o){const u=getAttribute("data-turbo-frame",o,r)||this.element.getAttribute("target");return getFrameElementById(u)??this.element},Mi=function(r,o){const u=getAction$1(r,o);return locationIsVisitable(expandURL(u),this.rootLocation)},Ht=function(r,o){const u=getAttribute("data-turbo-frame",o,r)||this.element.getAttribute("target");if(r instanceof HTMLFormElement&&!Ie(this,Fe,Mi).call(this,r,o)||!this.enabled||u=="_top")return!1;if(u){const g=getFrameElementById(u);if(g)return!g.disabled}return!(!session.elementIsNavigatable(r)||o&&!session.elementIsNavigatable(o))},Ri=function(r){return De(this,wt).has(r)},Li=function(r,o){De(this,wt).add(r),o(),De(this,wt).delete(r)},Di=function(r,o){this.currentNavigationElement=r,o(),delete this.currentNavigationElement};function getFrameElementById(h){if(h!=null){const r=document.getElementById(h);if(r instanceof FrameElement)return r}}function activateElement(h,r){if(h){const o=h.getAttribute("src");if(o!=null&&r!=null&&urlsAreEqual(o,r))throw new Error(`Matching <turbo-frame id="${h.id}"> element has a source URL which references itself`);if(h.ownerDocument!==document&&(h=document.importNode(h,!0)),h instanceof FrameElement)return h.connectedCallback(),h.disconnectedCallback(),h}}const StreamActions={after(){this.targetElements.forEach(h=>{var r;return(r=h.parentElement)==null?void 0:r.insertBefore(this.templateContent,h.nextSibling)})},append(){this.removeDuplicateTargetChildren(),this.targetElements.forEach(h=>h.append(this.templateContent))},before(){this.targetElements.forEach(h=>{var r;return(r=h.parentElement)==null?void 0:r.insertBefore(this.templateContent,h)})},prepend(){this.removeDuplicateTargetChildren(),this.targetElements.forEach(h=>h.prepend(this.templateContent))},remove(){this.targetElements.forEach(h=>h.remove())},replace(){const h=this.getAttribute("method");this.targetElements.forEach(r=>{h==="morph"?morphElements(r,this.templateContent):r.replaceWith(this.templateContent)})},update(){const h=this.getAttribute("method");this.targetElements.forEach(r=>{h==="morph"?morphChildren(r,this.templateContent):(r.innerHTML="",r.append(this.templateContent))})},refresh(){session.refresh(this.baseURI,this.requestId)}};var mt,Qt;const oi=class oi extends HTMLElement{constructor(){super(...arguments);qe(this,mt)}static async renderElement(o){await o.performAction()}async connectedCallback(){try{await this.render()}catch(o){console.error(o)}finally{this.disconnect()}}async render(){return this.renderPromise??(this.renderPromise=(async()=>{const o=this.beforeRenderEvent;this.dispatchEvent(o)&&(await nextRepaint(),await o.detail.render(this))})())}disconnect(){try{this.remove()}catch{}}removeDuplicateTargetChildren(){this.duplicateChildren.forEach(o=>o.remove())}get duplicateChildren(){var g;const o=this.targetElements.flatMap(k=>[...k.children]).filter(k=>!!k.getAttribute("id")),u=[...((g=this.templateContent)==null?void 0:g.children)||[]].filter(k=>!!k.getAttribute("id")).map(k=>k.getAttribute("id"));return o.filter(k=>u.includes(k.getAttribute("id")))}get performAction(){if(this.action){const o=StreamActions[this.action];if(o)return o;Ie(this,mt,Qt).call(this,"unknown action")}Ie(this,mt,Qt).call(this,"action attribute is missing")}get targetElements(){if(this.target)return this.targetElementsById;if(this.targets)return this.targetElementsByQuery;Ie(this,mt,Qt).call(this,"target or targets attribute is missing")}get templateContent(){return this.templateElement.content.cloneNode(!0)}get templateElement(){if(this.firstElementChild===null){const o=this.ownerDocument.createElement("template");return this.appendChild(o),o}else if(this.firstElementChild instanceof HTMLTemplateElement)return this.firstElementChild;Ie(this,mt,Qt).call(this,"first child element must be a <template> element")}get action(){return this.getAttribute("action")}get target(){return this.getAttribute("target")}get targets(){return this.getAttribute("targets")}get requestId(){return this.getAttribute("request-id")}get description(){return(this.outerHTML.match(/<[^>]+>/)??[])[0]??"<turbo-stream>"}get beforeRenderEvent(){return new CustomEvent("turbo:before-stream-render",{bubbles:!0,cancelable:!0,detail:{newStream:this,render:oi.renderElement}})}get targetElementsById(){var u;const o=(u=this.ownerDocument)==null?void 0:u.getElementById(this.target);return o!==null?[o]:[]}get targetElementsByQuery(){var u;const o=(u=this.ownerDocument)==null?void 0:u.querySelectorAll(this.targets);return o.length!==0?Array.prototype.slice.call(o):[]}};mt=new WeakSet,Qt=function(o){throw new Error(`${this.description}: ${o}`)};let StreamElement=oi;class StreamSourceElement extends HTMLElement{constructor(){super(...arguments);Ce(this,"streamSource",null)}connectedCallback(){this.streamSource=this.src.match(/^ws{1,2}:/)?new WebSocket(this.src):new EventSource(this.src),connectStreamSource(this.streamSource)}disconnectedCallback(){this.streamSource&&(this.streamSource.close(),disconnectStreamSource(this.streamSource))}get src(){return this.getAttribute("src")||""}}FrameElement.delegateConstructor=FrameController;customElements.get("turbo-frame")===void 0&&customElements.define("turbo-frame",FrameElement);customElements.get("turbo-stream")===void 0&&customElements.define("turbo-stream",StreamElement);customElements.get("turbo-stream-source")===void 0&&customElements.define("turbo-stream-source",StreamSourceElement);(()=>{let h=document.currentScript;if(h&&!h.hasAttribute("data-turbo-suppress-warning"))for(h=h.parentElement;h;){if(h==document.body)return console.warn(unindent`
        You are loading Turbo from a <script> element inside the <body> element. This is probably not what you meant to do!

        Load your applications JavaScript bundle inside the <head> element instead. <script> elements in <body> are evaluated with each page change.

        For more information, see: https://turbo.hotwired.dev/handbook/building#working-with-script-elements

        
        Suppress this warning by adding a "data-turbo-suppress-warning" attribute to: %s
      `,h.outerHTML);h=h.parentElement}})();window.Turbo={...Turbo,StreamActions};start$1();var sparkMd5={exports:{}};(function(h,r){(function(o){h.exports=o()})((function(o){var u=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function g(de,he){var ae=de[0],se=de[1],ce=de[2],fe=de[3];ae+=(se&ce|~se&fe)+he[0]-680876936|0,ae=(ae<<7|ae>>>25)+se|0,fe+=(ae&se|~ae&ce)+he[1]-389564586|0,fe=(fe<<12|fe>>>20)+ae|0,ce+=(fe&ae|~fe&se)+he[2]+606105819|0,ce=(ce<<17|ce>>>15)+fe|0,se+=(ce&fe|~ce&ae)+he[3]-1044525330|0,se=(se<<22|se>>>10)+ce|0,ae+=(se&ce|~se&fe)+he[4]-176418897|0,ae=(ae<<7|ae>>>25)+se|0,fe+=(ae&se|~ae&ce)+he[5]+1200080426|0,fe=(fe<<12|fe>>>20)+ae|0,ce+=(fe&ae|~fe&se)+he[6]-1473231341|0,ce=(ce<<17|ce>>>15)+fe|0,se+=(ce&fe|~ce&ae)+he[7]-45705983|0,se=(se<<22|se>>>10)+ce|0,ae+=(se&ce|~se&fe)+he[8]+1770035416|0,ae=(ae<<7|ae>>>25)+se|0,fe+=(ae&se|~ae&ce)+he[9]-1958414417|0,fe=(fe<<12|fe>>>20)+ae|0,ce+=(fe&ae|~fe&se)+he[10]-42063|0,ce=(ce<<17|ce>>>15)+fe|0,se+=(ce&fe|~ce&ae)+he[11]-1990404162|0,se=(se<<22|se>>>10)+ce|0,ae+=(se&ce|~se&fe)+he[12]+1804603682|0,ae=(ae<<7|ae>>>25)+se|0,fe+=(ae&se|~ae&ce)+he[13]-40341101|0,fe=(fe<<12|fe>>>20)+ae|0,ce+=(fe&ae|~fe&se)+he[14]-1502002290|0,ce=(ce<<17|ce>>>15)+fe|0,se+=(ce&fe|~ce&ae)+he[15]+1236535329|0,se=(se<<22|se>>>10)+ce|0,ae+=(se&fe|ce&~fe)+he[1]-165796510|0,ae=(ae<<5|ae>>>27)+se|0,fe+=(ae&ce|se&~ce)+he[6]-1069501632|0,fe=(fe<<9|fe>>>23)+ae|0,ce+=(fe&se|ae&~se)+he[11]+643717713|0,ce=(ce<<14|ce>>>18)+fe|0,se+=(ce&ae|fe&~ae)+he[0]-373897302|0,se=(se<<20|se>>>12)+ce|0,ae+=(se&fe|ce&~fe)+he[5]-701558691|0,ae=(ae<<5|ae>>>27)+se|0,fe+=(ae&ce|se&~ce)+he[10]+38016083|0,fe=(fe<<9|fe>>>23)+ae|0,ce+=(fe&se|ae&~se)+he[15]-660478335|0,ce=(ce<<14|ce>>>18)+fe|0,se+=(ce&ae|fe&~ae)+he[4]-405537848|0,se=(se<<20|se>>>12)+ce|0,ae+=(se&fe|ce&~fe)+he[9]+568446438|0,ae=(ae<<5|ae>>>27)+se|0,fe+=(ae&ce|se&~ce)+he[14]-1019803690|0,fe=(fe<<9|fe>>>23)+ae|0,ce+=(fe&se|ae&~se)+he[3]-187363961|0,ce=(ce<<14|ce>>>18)+fe|0,se+=(ce&ae|fe&~ae)+he[8]+1163531501|0,se=(se<<20|se>>>12)+ce|0,ae+=(se&fe|ce&~fe)+he[13]-1444681467|0,ae=(ae<<5|ae>>>27)+se|0,fe+=(ae&ce|se&~ce)+he[2]-51403784|0,fe=(fe<<9|fe>>>23)+ae|0,ce+=(fe&se|ae&~se)+he[7]+1735328473|0,ce=(ce<<14|ce>>>18)+fe|0,se+=(ce&ae|fe&~ae)+he[12]-1926607734|0,se=(se<<20|se>>>12)+ce|0,ae+=(se^ce^fe)+he[5]-378558|0,ae=(ae<<4|ae>>>28)+se|0,fe+=(ae^se^ce)+he[8]-2022574463|0,fe=(fe<<11|fe>>>21)+ae|0,ce+=(fe^ae^se)+he[11]+1839030562|0,ce=(ce<<16|ce>>>16)+fe|0,se+=(ce^fe^ae)+he[14]-35309556|0,se=(se<<23|se>>>9)+ce|0,ae+=(se^ce^fe)+he[1]-1530992060|0,ae=(ae<<4|ae>>>28)+se|0,fe+=(ae^se^ce)+he[4]+1272893353|0,fe=(fe<<11|fe>>>21)+ae|0,ce+=(fe^ae^se)+he[7]-155497632|0,ce=(ce<<16|ce>>>16)+fe|0,se+=(ce^fe^ae)+he[10]-1094730640|0,se=(se<<23|se>>>9)+ce|0,ae+=(se^ce^fe)+he[13]+681279174|0,ae=(ae<<4|ae>>>28)+se|0,fe+=(ae^se^ce)+he[0]-358537222|0,fe=(fe<<11|fe>>>21)+ae|0,ce+=(fe^ae^se)+he[3]-722521979|0,ce=(ce<<16|ce>>>16)+fe|0,se+=(ce^fe^ae)+he[6]+76029189|0,se=(se<<23|se>>>9)+ce|0,ae+=(se^ce^fe)+he[9]-640364487|0,ae=(ae<<4|ae>>>28)+se|0,fe+=(ae^se^ce)+he[12]-421815835|0,fe=(fe<<11|fe>>>21)+ae|0,ce+=(fe^ae^se)+he[15]+530742520|0,ce=(ce<<16|ce>>>16)+fe|0,se+=(ce^fe^ae)+he[2]-995338651|0,se=(se<<23|se>>>9)+ce|0,ae+=(ce^(se|~fe))+he[0]-198630844|0,ae=(ae<<6|ae>>>26)+se|0,fe+=(se^(ae|~ce))+he[7]+1126891415|0,fe=(fe<<10|fe>>>22)+ae|0,ce+=(ae^(fe|~se))+he[14]-1416354905|0,ce=(ce<<15|ce>>>17)+fe|0,se+=(fe^(ce|~ae))+he[5]-57434055|0,se=(se<<21|se>>>11)+ce|0,ae+=(ce^(se|~fe))+he[12]+1700485571|0,ae=(ae<<6|ae>>>26)+se|0,fe+=(se^(ae|~ce))+he[3]-1894986606|0,fe=(fe<<10|fe>>>22)+ae|0,ce+=(ae^(fe|~se))+he[10]-1051523|0,ce=(ce<<15|ce>>>17)+fe|0,se+=(fe^(ce|~ae))+he[1]-2054922799|0,se=(se<<21|se>>>11)+ce|0,ae+=(ce^(se|~fe))+he[8]+1873313359|0,ae=(ae<<6|ae>>>26)+se|0,fe+=(se^(ae|~ce))+he[15]-30611744|0,fe=(fe<<10|fe>>>22)+ae|0,ce+=(ae^(fe|~se))+he[6]-1560198380|0,ce=(ce<<15|ce>>>17)+fe|0,se+=(fe^(ce|~ae))+he[13]+1309151649|0,se=(se<<21|se>>>11)+ce|0,ae+=(ce^(se|~fe))+he[4]-145523070|0,ae=(ae<<6|ae>>>26)+se|0,fe+=(se^(ae|~ce))+he[11]-1120210379|0,fe=(fe<<10|fe>>>22)+ae|0,ce+=(ae^(fe|~se))+he[2]+718787259|0,ce=(ce<<15|ce>>>17)+fe|0,se+=(fe^(ce|~ae))+he[9]-343485551|0,se=(se<<21|se>>>11)+ce|0,de[0]=ae+de[0]|0,de[1]=se+de[1]|0,de[2]=ce+de[2]|0,de[3]=fe+de[3]|0}function k(de){var he=[],ae;for(ae=0;ae<64;ae+=4)he[ae>>2]=de.charCodeAt(ae)+(de.charCodeAt(ae+1)<<8)+(de.charCodeAt(ae+2)<<16)+(de.charCodeAt(ae+3)<<24);return he}function A(de){var he=[],ae;for(ae=0;ae<64;ae+=4)he[ae>>2]=de[ae]+(de[ae+1]<<8)+(de[ae+2]<<16)+(de[ae+3]<<24);return he}function R(de){var he=de.length,ae=[1732584193,-271733879,-1732584194,271733878],se,ce,fe,ue,Oe,be;for(se=64;se<=he;se+=64)g(ae,k(de.substring(se-64,se)));for(de=de.substring(se-64),ce=de.length,fe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],se=0;se<ce;se+=1)fe[se>>2]|=de.charCodeAt(se)<<(se%4<<3);if(fe[se>>2]|=128<<(se%4<<3),se>55)for(g(ae,fe),se=0;se<16;se+=1)fe[se]=0;return ue=he*8,ue=ue.toString(16).match(/(.*?)(.{0,8})$/),Oe=parseInt(ue[2],16),be=parseInt(ue[1],16)||0,fe[14]=Oe,fe[15]=be,g(ae,fe),ae}function q(de){var he=de.length,ae=[1732584193,-271733879,-1732584194,271733878],se,ce,fe,ue,Oe,be;for(se=64;se<=he;se+=64)g(ae,A(de.subarray(se-64,se)));for(de=se-64<he?de.subarray(se-64):new Uint8Array(0),ce=de.length,fe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],se=0;se<ce;se+=1)fe[se>>2]|=de[se]<<(se%4<<3);if(fe[se>>2]|=128<<(se%4<<3),se>55)for(g(ae,fe),se=0;se<16;se+=1)fe[se]=0;return ue=he*8,ue=ue.toString(16).match(/(.*?)(.{0,8})$/),Oe=parseInt(ue[2],16),be=parseInt(ue[1],16)||0,fe[14]=Oe,fe[15]=be,g(ae,fe),ae}function _(de){var he="",ae;for(ae=0;ae<4;ae+=1)he+=u[de>>ae*8+4&15]+u[de>>ae*8&15];return he}function ee(de){var he;for(he=0;he<de.length;he+=1)de[he]=_(de[he]);return de.join("")}ee(R("hello")),typeof ArrayBuffer<"u"&&!ArrayBuffer.prototype.slice&&(function(){function de(he,ae){return he=he|0||0,he<0?Math.max(he+ae,0):Math.min(he,ae)}ArrayBuffer.prototype.slice=function(he,ae){var se=this.byteLength,ce=de(he,se),fe=se,ue,Oe,be,xe;return ae!==o&&(fe=de(ae,se)),ce>fe?new ArrayBuffer(0):(ue=fe-ce,Oe=new ArrayBuffer(ue),be=new Uint8Array(Oe),xe=new Uint8Array(this,ce,ue),be.set(xe),Oe)}})();function te(de){return/[\u0080-\uFFFF]/.test(de)&&(de=unescape(encodeURIComponent(de))),de}function ne(de,he){var ae=de.length,se=new ArrayBuffer(ae),ce=new Uint8Array(se),fe;for(fe=0;fe<ae;fe+=1)ce[fe]=de.charCodeAt(fe);return he?ce:se}function re(de){return String.fromCharCode.apply(null,new Uint8Array(de))}function oe(de,he,ae){var se=new Uint8Array(de.byteLength+he.byteLength);return se.set(new Uint8Array(de)),se.set(new Uint8Array(he),de.byteLength),se}function le(de){var he=[],ae=de.length,se;for(se=0;se<ae-1;se+=2)he.push(parseInt(de.substr(se,2),16));return String.fromCharCode.apply(String,he)}function pe(){this.reset()}return pe.prototype.append=function(de){return this.appendBinary(te(de)),this},pe.prototype.appendBinary=function(de){this._buff+=de,this._length+=de.length;var he=this._buff.length,ae;for(ae=64;ae<=he;ae+=64)g(this._hash,k(this._buff.substring(ae-64,ae)));return this._buff=this._buff.substring(ae-64),this},pe.prototype.end=function(de){var he=this._buff,ae=he.length,se,ce=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],fe;for(se=0;se<ae;se+=1)ce[se>>2]|=he.charCodeAt(se)<<(se%4<<3);return this._finish(ce,ae),fe=ee(this._hash),de&&(fe=le(fe)),this.reset(),fe},pe.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},pe.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},pe.prototype.setState=function(de){return this._buff=de.buff,this._length=de.length,this._hash=de.hash,this},pe.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},pe.prototype._finish=function(de,he){var ae=he,se,ce,fe;if(de[ae>>2]|=128<<(ae%4<<3),ae>55)for(g(this._hash,de),ae=0;ae<16;ae+=1)de[ae]=0;se=this._length*8,se=se.toString(16).match(/(.*?)(.{0,8})$/),ce=parseInt(se[2],16),fe=parseInt(se[1],16)||0,de[14]=ce,de[15]=fe,g(this._hash,de)},pe.hash=function(de,he){return pe.hashBinary(te(de),he)},pe.hashBinary=function(de,he){var ae=R(de),se=ee(ae);return he?le(se):se},pe.ArrayBuffer=function(){this.reset()},pe.ArrayBuffer.prototype.append=function(de){var he=oe(this._buff.buffer,de),ae=he.length,se;for(this._length+=de.byteLength,se=64;se<=ae;se+=64)g(this._hash,A(he.subarray(se-64,se)));return this._buff=se-64<ae?new Uint8Array(he.buffer.slice(se-64)):new Uint8Array(0),this},pe.ArrayBuffer.prototype.end=function(de){var he=this._buff,ae=he.length,se=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],ce,fe;for(ce=0;ce<ae;ce+=1)se[ce>>2]|=he[ce]<<(ce%4<<3);return this._finish(se,ae),fe=ee(this._hash),de&&(fe=le(fe)),this.reset(),fe},pe.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},pe.ArrayBuffer.prototype.getState=function(){var de=pe.prototype.getState.call(this);return de.buff=re(de.buff),de},pe.ArrayBuffer.prototype.setState=function(de){return de.buff=ne(de.buff,!0),pe.prototype.setState.call(this,de)},pe.ArrayBuffer.prototype.destroy=pe.prototype.destroy,pe.ArrayBuffer.prototype._finish=pe.prototype._finish,pe.ArrayBuffer.hash=function(de,he){var ae=q(new Uint8Array(de)),se=ee(ae);return he?le(se):se},pe}))})(sparkMd5);var SparkMD5=sparkMd5.exports;const fileSlice=File.prototype.slice||File.prototype.mozSlice||File.prototype.webkitSlice;class FileChecksum{static create(r,o){new FileChecksum(r).create(o)}constructor(r){this.file=r,this.chunkSize=2097152,this.chunkCount=Math.ceil(this.file.size/this.chunkSize),this.chunkIndex=0}create(r){this.callback=r,this.md5Buffer=new SparkMD5.ArrayBuffer,this.fileReader=new FileReader,this.fileReader.addEventListener("load",(o=>this.fileReaderDidLoad(o))),this.fileReader.addEventListener("error",(o=>this.fileReaderDidError(o))),this.readNextChunk()}fileReaderDidLoad(r){if(this.md5Buffer.append(r.target.result),!this.readNextChunk()){const o=this.md5Buffer.end(!0),u=btoa(o);this.callback(null,u)}}fileReaderDidError(r){this.callback(`Error reading ${this.file.name}`)}readNextChunk(){if(this.chunkIndex<this.chunkCount||this.chunkIndex==0&&this.chunkCount==0){const r=this.chunkIndex*this.chunkSize,o=Math.min(r+this.chunkSize,this.file.size),u=fileSlice.call(this.file,r,o);return this.fileReader.readAsArrayBuffer(u),this.chunkIndex++,!0}else return!1}}function getMetaValue(h){const r=findElement(document.head,`meta[name="${h}"]`);if(r)return r.getAttribute("content")}function findElements(h,r){typeof h=="string"&&(r=h,h=document);const o=h.querySelectorAll(r);return toArray(o)}function findElement(h,r){return typeof h=="string"&&(r=h,h=document),h.querySelector(r)}function dispatchEvent$1(h,r,o={}){const{disabled:u}=h,{bubbles:g,cancelable:k,detail:A}=o,R=document.createEvent("Event");R.initEvent(r,g||!0,k||!0),R.detail=A||{};try{h.disabled=!1,h.dispatchEvent(R)}finally{h.disabled=u}return R}function toArray(h){return Array.isArray(h)?h:Array.from?Array.from(h):[].slice.call(h)}class BlobRecord{constructor(r,o,u,g={}){this.file=r,this.attributes={filename:r.name,content_type:r.type||"application/octet-stream",byte_size:r.size,checksum:o},this.xhr=new XMLHttpRequest,this.xhr.open("POST",u,!0),this.xhr.responseType="json",this.xhr.setRequestHeader("Content-Type","application/json"),this.xhr.setRequestHeader("Accept","application/json"),this.xhr.setRequestHeader("X-Requested-With","XMLHttpRequest"),Object.keys(g).forEach((A=>{this.xhr.setRequestHeader(A,g[A])}));const k=getMetaValue("csrf-token");k!=null&&this.xhr.setRequestHeader("X-CSRF-Token",k),this.xhr.addEventListener("load",(A=>this.requestDidLoad(A))),this.xhr.addEventListener("error",(A=>this.requestDidError(A)))}get status(){return this.xhr.status}get response(){const{responseType:r,response:o}=this.xhr;return r=="json"?o:JSON.parse(o)}create(r){this.callback=r,this.xhr.send(JSON.stringify({blob:this.attributes}))}requestDidLoad(r){if(this.status>=200&&this.status<300){const{response:o}=this,{direct_upload:u}=o;delete o.direct_upload,this.attributes=o,this.directUploadData=u,this.callback(null,this.toJSON())}else this.requestDidError(r)}requestDidError(r){this.callback(`Error creating Blob for "${this.file.name}". Status: ${this.status}`)}toJSON(){const r={};for(const o in this.attributes)r[o]=this.attributes[o];return r}}class BlobUpload{constructor(r){this.blob=r,this.file=r.file;const{url:o,headers:u}=r.directUploadData;this.xhr=new XMLHttpRequest,this.xhr.open("PUT",o,!0),this.xhr.responseType="text";for(const g in u)this.xhr.setRequestHeader(g,u[g]);this.xhr.addEventListener("load",(g=>this.requestDidLoad(g))),this.xhr.addEventListener("error",(g=>this.requestDidError(g)))}create(r){this.callback=r,this.xhr.send(this.file.slice())}requestDidLoad(r){const{status:o,response:u}=this.xhr;o>=200&&o<300?this.callback(null,u):this.requestDidError(r)}requestDidError(r){this.callback(`Error storing "${this.file.name}". Status: ${this.xhr.status}`)}}let id$1=0;class DirectUpload{constructor(r,o,u,g={}){this.id=++id$1,this.file=r,this.url=o,this.delegate=u,this.customHeaders=g}create(r){FileChecksum.create(this.file,((o,u)=>{if(o){r(o);return}const g=new BlobRecord(this.file,u,this.url,this.customHeaders);notify(this.delegate,"directUploadWillCreateBlobWithXHR",g.xhr),g.create((k=>{if(k)r(k);else{const A=new BlobUpload(g);notify(this.delegate,"directUploadWillStoreFileWithXHR",A.xhr),A.create((R=>{R?r(R):r(null,g.toJSON())}))}}))}))}}function notify(h,r,...o){if(h&&typeof h[r]=="function")return h[r](...o)}class DirectUploadController{constructor(r,o){this.input=r,this.file=o,this.directUpload=new DirectUpload(this.file,this.url,this),this.dispatch("initialize")}start(r){const o=document.createElement("input");o.type="hidden",o.name=this.input.name,this.input.insertAdjacentElement("beforebegin",o),this.dispatch("start"),this.directUpload.create(((u,g)=>{u?(o.parentNode.removeChild(o),this.dispatchError(u)):o.value=g.signed_id,this.dispatch("end"),r(u)}))}uploadRequestDidProgress(r){const o=r.loaded/r.total*100;o&&this.dispatch("progress",{progress:o})}get url(){return this.input.getAttribute("data-direct-upload-url")}dispatch(r,o={}){return o.file=this.file,o.id=this.directUpload.id,dispatchEvent$1(this.input,`direct-upload:${r}`,{detail:o})}dispatchError(r){this.dispatch("error",{error:r}).defaultPrevented||alert(r)}directUploadWillCreateBlobWithXHR(r){this.dispatch("before-blob-request",{xhr:r})}directUploadWillStoreFileWithXHR(r){this.dispatch("before-storage-request",{xhr:r}),r.upload.addEventListener("progress",(o=>this.uploadRequestDidProgress(o)))}}const inputSelector="input[type=file][data-direct-upload-url]:not([disabled])";class DirectUploadsController{constructor(r){this.form=r,this.inputs=findElements(r,inputSelector).filter((o=>o.files.length))}start(r){const o=this.createDirectUploadControllers(),u=()=>{const g=o.shift();g?g.start((k=>{k?(r(k),this.dispatch("end")):u()})):(r(),this.dispatch("end"))};this.dispatch("start"),u()}createDirectUploadControllers(){const r=[];return this.inputs.forEach((o=>{toArray(o.files).forEach((u=>{const g=new DirectUploadController(o,u);r.push(g)}))})),r}dispatch(r,o={}){return dispatchEvent$1(this.form,`direct-uploads:${r}`,{detail:o})}}const processingAttribute="data-direct-uploads-processing",submitButtonsByForm=new WeakMap;let started=!1;function start(){started||(started=!0,document.addEventListener("click",didClick,!0),document.addEventListener("submit",didSubmitForm,!0),document.addEventListener("ajax:before",didSubmitRemoteElement))}function didClick(h){const r=h.target.closest("button, input");r&&r.type==="submit"&&r.form&&submitButtonsByForm.set(r.form,r)}function didSubmitForm(h){handleFormSubmissionEvent(h)}function didSubmitRemoteElement(h){h.target.tagName=="FORM"&&handleFormSubmissionEvent(h)}function handleFormSubmissionEvent(h){const r=h.target;if(r.hasAttribute(processingAttribute)){h.preventDefault();return}const o=new DirectUploadsController(r),{inputs:u}=o;u.length&&(h.preventDefault(),r.setAttribute(processingAttribute,""),u.forEach(disable),o.start((g=>{r.removeAttribute(processingAttribute),g?u.forEach(enable):submitForm(r)})))}function submitForm(h){let r=submitButtonsByForm.get(h)||findElement(h,"input[type=submit], button[type=submit]");if(r){const{disabled:o}=r;r.disabled=!1,r.focus(),r.click(),r.disabled=o}else r=document.createElement("input"),r.type="submit",r.style.display="none",h.appendChild(r),r.click(),h.removeChild(r);submitButtonsByForm.delete(h)}function disable(h){h.disabled=!0}function enable(h){h.disabled=!1}function autostart(){window.ActiveStorage&&start()}setTimeout(autostart,1);const ActiveStorage=Object.freeze(Object.defineProperty({__proto__:null,DirectUpload,DirectUploadController,DirectUploadsController,dispatchEvent:dispatchEvent$1,start},Symbol.toStringTag,{value:"Module"}));function getDefaultExportFromCjs(h){return h&&h.__esModule&&Object.prototype.hasOwnProperty.call(h,"default")?h.default:h}var video$1={exports:{}};/*! Video.js v4.12.15 Copyright 2014 Brightcove, Inc. https://github.com/videojs/video.js/blob/master/LICENSE */var video=video$1.exports,hasRequiredVideo;function requireVideo(){return hasRequiredVideo||(hasRequiredVideo=1,(function(module,exports){(function(){var b=void 0,f=!0,j=null,l=!1;function m(){return function(){}}function n(h){return function(){return this[h]}}function p(h){return function(){return h}}var s;document.createElement("video"),document.createElement("audio"),document.createElement("track");function t(h,r,o){if(typeof h=="string"){if(h.indexOf("#")===0&&(h=h.slice(1)),t.Ca[h])return r&&t.log.warn('Player "'+h+'" is already initialised. Options will not be applied.'),o&&t.Ca[h].I(o),t.Ca[h];h=t.m(h)}if(!h||!h.nodeName)throw new TypeError("The element or ID supplied is not valid. (videojs)");return h.player||new t.Player(h,r,o)}var videojs=window.videojs=t;t.fc="4.12",t.sd=document.location.protocol=="https:"?"https://":"http://",t.VERSION="4.12.15",t.options={techOrder:["html5","flash"],html5:{},flash:{},width:300,height:150,defaultVolume:0,playbackRates:[],inactivityTimeout:2e3,children:{mediaLoader:{},posterImage:{},loadingSpinner:{},textTrackDisplay:{},bigPlayButton:{},controlBar:{},errorDisplay:{},textTrackSettings:{}},language:document.getElementsByTagName("html")[0].getAttribute("lang")||navigator.languages&&navigator.languages[0]||navigator.Ef||navigator.language||"en",languages:{},notSupportedMessage:"No compatible source was found for this video."},t.fc!=="GENERATED_CDN_VSN"&&(videojs.options.flash.swf=t.sd+"vjs.zencdn.net/"+t.fc+"/video-js.swf"),t.Gd=function(h,r){return t.options.languages[h]=t.options.languages[h]!==b?t.Z.Aa(t.options.languages[h],r):r,t.options.languages},t.Ca={},module.exports=videojs,t.Ga=t.CoreObject=m(),t.Ga.extend=function(h){var r,o;h=h||{},r=h.init||h.l||this.prototype.init||this.prototype.l||m(),o=function(){r.apply(this,arguments)},o.prototype=t.i.create(this.prototype),o.prototype.constructor=o,o.extend=t.Ga.extend,o.create=t.Ga.create;for(var u in h)h.hasOwnProperty(u)&&(o.prototype[u]=h[u]);return o},t.Ga.create=function(){var h=t.i.create(this.prototype);return this.apply(h,arguments),h},t.b=function(h,r,o){if(t.i.isArray(r))return v(t.b,h,r,o);var u=t.getData(h);u.G||(u.G={}),u.G[r]||(u.G[r]=[]),o.s||(o.s=t.s++),u.G[r].push(o),u.ba||(u.disabled=l,u.ba=function(g){if(!u.disabled){g=t.Nb(g);var k=u.G[g.type];if(k)for(var k=k.slice(0),A=0,R=k.length;A<R&&!g.Nc();A++)k[A].call(h,g)}}),u.G[r].length==1&&(h.addEventListener?h.addEventListener(r,u.ba,l):h.attachEvent&&h.attachEvent("on"+r,u.ba))},t.n=function(h,r,o){if(t.Ic(h)){var u=t.getData(h);if(u.G){if(t.i.isArray(r))return v(t.n,h,r,o);if(r){var g=u.G[r];if(g){if(o){if(o.s)for(u=0;u<g.length;u++)g[u].s===o.s&&g.splice(u--,1)}else u.G[r]=[];t.xc(h,r)}}else for(g in u.G)r=g,u.G[r]=[],t.xc(h,r)}}},t.xc=function(h,r){var o=t.getData(h);o.G[r].length===0&&(delete o.G[r],h.removeEventListener?h.removeEventListener(r,o.ba,l):h.detachEvent&&h.detachEvent("on"+r,o.ba)),t.hb(o.G)&&(delete o.G,delete o.ba,delete o.disabled),t.hb(o)&&t.Zc(h)},t.Nb=function(h){function r(){return f}function o(){return l}if(!h||!h.Sb){var u=h||window.event;h={};for(var g in u)g!=="layerX"&&g!=="layerY"&&g!=="keyLocation"&&(g=="returnValue"&&u.preventDefault||(h[g]=u[g]));if(h.target||(h.target=h.srcElement||document),h.relatedTarget=h.fromElement===h.target?h.toElement:h.fromElement,h.preventDefault=function(){u.preventDefault&&u.preventDefault(),h.returnValue=l,h.ee=r,h.defaultPrevented=f},h.ee=o,h.defaultPrevented=l,h.stopPropagation=function(){u.stopPropagation&&u.stopPropagation(),h.cancelBubble=f,h.Sb=r},h.Sb=o,h.stopImmediatePropagation=function(){u.stopImmediatePropagation&&u.stopImmediatePropagation(),h.Nc=r,h.stopPropagation()},h.Nc=o,h.clientX!=j){g=document.documentElement;var k=document.body;h.pageX=h.clientX+(g&&g.scrollLeft||k&&k.scrollLeft||0)-(g&&g.clientLeft||k&&k.clientLeft||0),h.pageY=h.clientY+(g&&g.scrollTop||k&&k.scrollTop||0)-(g&&g.clientTop||k&&k.clientTop||0)}h.which=h.charCode||h.keyCode,h.button!=j&&(h.button=h.button&1?0:h.button&4?1:h.button&2?2:0)}return h},t.o=function(h,r){var o=t.Ic(h)?t.getData(h):{},u=h.parentNode||h.ownerDocument;return typeof r=="string"&&(r={type:r,target:h}),r=t.Nb(r),o.ba&&o.ba.call(h,r),u&&!r.Sb()&&r.bubbles!==l?t.o(u,r):!u&&!r.defaultPrevented&&(o=t.getData(r.target),r.target[r.type])&&(o.disabled=f,typeof r.target[r.type]=="function"&&r.target[r.type](),o.disabled=l),!r.defaultPrevented},t.N=function(h,r,o){function u(){t.n(h,r,u),o.apply(this,arguments)}if(t.i.isArray(r))return v(t.N,h,r,o);u.s=o.s=o.s||t.s++,t.b(h,r,u)};function v(h,r,o,u){t.tc.forEach(o,function(g){h(r,g,u)})}var w=Object.prototype.hasOwnProperty;t.e=function(h,r){var o;return r=r||{},o=document.createElement(h||"div"),t.i.ca(r,function(u,g){u.indexOf("aria-")!==-1||u=="role"?o.setAttribute(u,g):o[u]=g}),o},t.va=function(h){return h.charAt(0).toUpperCase()+h.slice(1)},t.i={},t.i.create=Object.create||function(h){function r(){}return r.prototype=h,new r},t.i.ca=function(h,r,o){for(var u in h)w.call(h,u)&&r.call(o||this,u,h[u])},t.i.D=function(h,r){if(!r)return h;for(var o in r)w.call(r,o)&&(h[o]=r[o]);return h},t.i.Od=function(h,r){var o,u,g;h=t.i.copy(h);for(o in r)w.call(r,o)&&(u=h[o],g=r[o],h[o]=t.i.ib(u)&&t.i.ib(g)?t.i.Od(u,g):r[o]);return h},t.i.copy=function(h){return t.i.D({},h)},t.i.ib=function(h){return!!h&&typeof h=="object"&&h.toString()==="[object Object]"&&h.constructor===Object},t.i.isArray=Array.isArray||function(h){return Object.prototype.toString.call(h)==="[object Array]"},t.ge=function(h){return h!==h},t.bind=function(h,r,o){function u(){return r.apply(h,arguments)}return r.s||(r.s=t.s++),u.s=o?o+"_"+r.s:r.s,u},t.ua={},t.s=1,t.expando="vdata"+new Date().getTime(),t.getData=function(h){var r=h[t.expando];return r||(r=h[t.expando]=t.s++),t.ua[r]||(t.ua[r]={}),t.ua[r]},t.Ic=function(h){return h=h[t.expando],!(!h||t.hb(t.ua[h]))},t.Zc=function(h){var r=h[t.expando];if(r){delete t.ua[r];try{delete h[t.expando]}catch{h.removeAttribute?h.removeAttribute(t.expando):h[t.expando]=j}}},t.hb=function(h){for(var r in h)if(h[r]!==j)return l;return f},t.Pa=function(h,r){return(" "+h.className+" ").indexOf(" "+r+" ")!==-1},t.p=function(h,r){t.Pa(h,r)||(h.className=h.className===""?r:h.className+" "+r)},t.r=function(h,r){var o,u;if(t.Pa(h,r)){for(o=h.className.split(" "),u=o.length-1;0<=u;u--)o[u]===r&&o.splice(u,1);h.className=o.join(" ")}},t.A=t.e("video");var x=document.createElement("track");x.Tb="captions",x.ed="en",x.label="English",t.A.appendChild(x),t.P=navigator.userAgent,t.zd=/iPhone/i.test(t.P),t.yd=/iPad/i.test(t.P),t.Ad=/iPod/i.test(t.P),t.xd=t.zd||t.yd||t.Ad;var aa=t,y,z=t.P.match(/OS (\d+)_/i);y=z&&z[1]?z[1]:b,aa.ff=y,t.wd=/Android/i.test(t.P);var ba=t,B,C=t.P.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i),D,E;C?(D=C[1]&&parseFloat(C[1]),E=C[2]&&parseFloat(C[2]),B=D&&E?parseFloat(C[1]+"."+C[2]):D||j):B=j,ba.ec=B,t.Bd=t.wd&&/webkit/i.test(t.P)&&2.3>t.ec,t.gc=/Firefox/i.test(t.P),t.gf=/Chrome/i.test(t.P),t.pa=/MSIE\s8\.0/.test(t.P),t.Db=!!("ontouchstart"in window||window.ud&&document instanceof window.ud),t.td="backgroundSize"in t.A.style,t.ad=function(h,r){t.i.ca(r,function(o,u){u===j||typeof u>"u"||u===l?h.removeAttribute(o):h.setAttribute(o,u===f?"":u)})},t.Oa=function(h){var r,o,u,g;if(r={},h&&h.attributes&&0<h.attributes.length){o=h.attributes;for(var k=o.length-1;0<=k;k--)u=o[k].name,g=o[k].value,(typeof h[u]=="boolean"||",autoplay,controls,loop,muted,default,".indexOf(","+u+",")!==-1)&&(g=g!==j?f:l),r[u]=g}return r},t.rf=function(h,r){var o="";return document.defaultView&&document.defaultView.getComputedStyle?o=document.defaultView.getComputedStyle(h,"").getPropertyValue(r):h.currentStyle&&(o=h["client"+r.substr(0,1).toUpperCase()+r.substr(1)]+"px"),o},t.Rb=function(h,r){r.firstChild?r.insertBefore(h,r.firstChild):r.appendChild(h)},t.bb={},t.m=function(h){return h.indexOf("#")===0&&(h=h.slice(1)),document.getElementById(h)},t.Na=function(h,r){r=r||h;var o=Math.floor(h%60),u=Math.floor(h/60%60),g=Math.floor(h/3600),k=Math.floor(r/60%60),A=Math.floor(r/3600);return(isNaN(h)||h===1/0)&&(g=u=o="-"),g=0<g||0<A?g+":":"",g+(((g||10<=k)&&10>u?"0"+u:u)+":")+(10>o?"0"+o:o)},t.Id=function(){document.body.focus(),document.onselectstart=p(l)},t.Xe=function(){document.onselectstart=p(f)},t.trim=function(h){return(h+"").replace(/^\s+|\s+$/g,"")},t.round=function(h,r){return r||(r=0),Math.round(h*Math.pow(10,r))/Math.pow(10,r)},t.xa=function(h,r){return h===b&&r===b?{length:0,start:function(){throw Error("This TimeRanges object is empty")},end:function(){throw Error("This TimeRanges object is empty")}}:{length:1,start:function(){return h},end:function(){return r}}},t.Ie=function(h){try{var r=window.localStorage||l;r&&(r.volume=h)}catch(o){o.code==22||o.code==1014?t.log("LocalStorage Full (VideoJS)",o):o.code==18?t.log("LocalStorage not allowed (VideoJS)",o):t.log("LocalStorage Error (VideoJS)",o)}},t.Xd=function(h){return h.match(/^https?:\/\//)||(h=t.e("div",{innerHTML:'<a href="'+h+'">x</a>'}).firstChild.href),h},t.Ae=function(h){var r,o,u,g;g="protocol hostname port pathname search hash host".split(" "),o=t.e("a",{href:h}),(u=o.host===""&&o.protocol!=="file:")&&(r=t.e("div"),r.innerHTML='<a href="'+h+'"></a>',o=r.firstChild,r.setAttribute("style","display:none; position:absolute;"),document.body.appendChild(r)),h={};for(var k=0;k<g.length;k++)h[g[k]]=o[g[k]];return h.protocol==="http:"&&(h.host=h.host.replace(/:80$/,"")),h.protocol==="https:"&&(h.host=h.host.replace(/:443$/,"")),u&&document.body.removeChild(r),h};function F(h,r){var o,u;o=Array.prototype.slice.call(r),u=m(),u=window.console||{log:u,warn:u,error:u},h?o.unshift(h.toUpperCase()+":"):h="log",t.log.history.push(o),o.unshift("VIDEOJS:"),u[h].apply?u[h].apply(u,o):u[h](o.join(" "))}t.log=function(){F(j,arguments)},t.log.history=[],t.log.error=function(){F("error",arguments)},t.log.warn=function(){F("warn",arguments)},t.Vd=function(h){var r,o;return h.getBoundingClientRect&&h.parentNode&&(r=h.getBoundingClientRect()),r?(h=document.documentElement,o=document.body,{left:t.round(r.left+(window.pageXOffset||o.scrollLeft)-(h.clientLeft||o.clientLeft||0)),top:t.round(r.top+(window.pageYOffset||o.scrollTop)-(h.clientTop||o.clientTop||0))}):{left:0,top:0}},t.tc={},t.tc.forEach=function(h,r,o){if(t.i.isArray(h)&&r instanceof Function)for(var u=0,g=h.length;u<g;++u)r.call(o||t,h[u],u,h);return h},t.bf=function(h,r){var o,u,g,k,A,R,q;typeof h=="string"&&(h={uri:h}),videojs.Z.Aa({method:"GET",timeout:45e3},h),r=r||m(),R=function(){window.clearTimeout(A),r(j,u,u.response||u.responseText)},q=function(_){window.clearTimeout(A),(!_||typeof _=="string")&&(_=Error(_)),r(_,u)},o=window.XMLHttpRequest,typeof o>"u"&&(o=function(){try{return new window.ActiveXObject("Msxml2.XMLHTTP.6.0")}catch{}try{return new window.ActiveXObject("Msxml2.XMLHTTP.3.0")}catch{}try{return new window.ActiveXObject("Msxml2.XMLHTTP")}catch{}throw Error("This browser does not support XMLHttpRequest.")}),u=new o,u.uri=h.uri,o=t.Ae(h.uri),g=window.location,o.protocol+o.host!==g.protocol+g.host&&window.XDomainRequest&&!("withCredentials"in u)?(u=new window.XDomainRequest,u.onload=R,u.onerror=q,u.onprogress=m(),u.ontimeout=m()):(k=o.protocol=="file:"||g.protocol=="file:",u.onreadystatechange=function(){if(u.readyState===4){if(u.Ue)return q("timeout");u.status===200||k&&u.status===0?R():q()}},h.timeout&&(A=window.setTimeout(function(){u.readyState!==4&&(u.Ue=f,u.abort())},h.timeout)));try{u.open(h.method||"GET",h.uri,f)}catch(_){q(_);return}h.withCredentials&&(u.withCredentials=f),h.responseType&&(u.responseType=h.responseType);try{u.send()}catch(_){q(_)}},t.Z={},t.Z.Aa=function(h,r){var o,u,g;h=t.i.copy(h);for(o in r)r.hasOwnProperty(o)&&(u=h[o],g=r[o],h[o]=t.i.ib(u)&&t.i.ib(g)?t.Z.Aa(u,g):r[o]);return h},t.z=m(),s=t.z.prototype,s.ab={},s.b=function(h,r){var o=this.addEventListener;this.addEventListener=Function.prototype,t.b(this,h,r),this.addEventListener=o},s.addEventListener=t.z.prototype.b,s.n=function(h,r){t.n(this,h,r)},s.removeEventListener=t.z.prototype.n,s.N=function(h,r){t.N(this,h,r)},s.o=function(h){var r=h.type||h;typeof h=="string"&&(h={type:r}),h=t.Nb(h),this.ab[r]&&this["on"+r]&&this["on"+r](h),t.o(this,h)},s.dispatchEvent=t.z.prototype.o,t.a=t.Ga.extend({l:function(h,r,o){if(this.d=h,this.q=t.i.copy(this.q),r=this.options(r),this.Qa=r.id||r.el&&r.el.id,this.Qa||(this.Qa=(h.id&&h.id()||"no_player")+"_component_"+t.s++),this.pe=r.name||j,this.c=r.el||this.e(),this.R=[],this.cb={},this.eb={},this.Kc(),this.I(o),r.$c!==l){var u,g;this.k().reportUserActivity&&(u=t.bind(this.k(),this.k().reportUserActivity),this.b("touchstart",function(){u(),this.clearInterval(g),g=this.setInterval(u,250)}),h=function(){u(),this.clearInterval(g)},this.b("touchmove",u),this.b("touchend",h),this.b("touchcancel",h))}}}),s=t.a.prototype,s.dispose=function(){if(this.o({type:"dispose",bubbles:l}),this.R)for(var h=this.R.length-1;0<=h;h--)this.R[h].dispose&&this.R[h].dispose();this.eb=this.cb=this.R=j,this.n(),this.c.parentNode&&this.c.parentNode.removeChild(this.c),t.Zc(this.c),this.c=j},s.d=f,s.k=n("d"),s.options=function(h){return h===b?this.q:this.q=t.Z.Aa(this.q,h)},s.e=function(h,r){return t.e(h,r)},s.v=function(h){var r=this.d.language(),o=this.d.languages();return o&&o[r]&&o[r][h]?o[r][h]:h},s.m=n("c"),s.wa=function(){return this.B||this.c},s.id=n("Qa"),s.name=n("pe"),s.children=n("R"),s.Yd=function(h){return this.cb[h]},s.da=function(h){return this.eb[h]},s.aa=function(h,r){var o,u;return typeof h=="string"?(u=h,r=r||{},o=r.componentClass||t.va(u),r.name=u,o=new window.videojs[o](this.d||this,r)):o=h,this.R.push(o),typeof o.id=="function"&&(this.cb[o.id()]=o),(u=u||o.name&&o.name())&&(this.eb[u]=o),typeof o.el=="function"&&o.el()&&this.wa().appendChild(o.el()),o},s.removeChild=function(h){if(typeof h=="string"&&(h=this.da(h)),h&&this.R){for(var r=l,o=this.R.length-1;0<=o;o--)if(this.R[o]===h){r=f,this.R.splice(o,1);break}r&&(this.cb[h.id()]=j,this.eb[h.name()]=j,(r=h.m())&&r.parentNode===this.wa()&&this.wa().removeChild(h.m()))}},s.Kc=function(){var h,r,o,u,g,k;if(h=this,r=h.options(),o=r.children)if(k=function(R,q){r[R]!==b&&(q=r[R]),q!==l&&(h[R]=h.aa(R,q))},t.i.isArray(o))for(var A=0;A<o.length;A++)u=o[A],typeof u=="string"?(g=u,u={}):g=u.name,k(g,u);else t.i.ca(o,k)},s.T=p(""),s.b=function(h,r,o){var u,g,k;return typeof h=="string"||t.i.isArray(h)?t.b(this.c,h,t.bind(this,r)):(u=t.bind(this,o),k=this,g=function(){k.n(h,r,u)},g.s=u.s,this.b("dispose",g),o=function(){k.n("dispose",g)},o.s=u.s,h.nodeName?(t.b(h,r,u),t.b(h,"dispose",o)):typeof h.b=="function"&&(h.b(r,u),h.b("dispose",o))),this},s.n=function(h,r,o){return!h||typeof h=="string"||t.i.isArray(h)?t.n(this.c,h,r):(o=t.bind(this,o),this.n("dispose",o),h.nodeName?(t.n(h,r,o),t.n(h,"dispose",o)):(h.n(r,o),h.n("dispose",o))),this},s.N=function(h,r,o){var u,g,k;return typeof h=="string"||t.i.isArray(h)?t.N(this.c,h,t.bind(this,r)):(u=t.bind(this,o),g=this,k=function(){g.n(h,r,k),u.apply(this,arguments)},k.s=u.s,this.b(h,r,k)),this},s.o=function(h){return t.o(this.c,h),this},s.I=function(h){return h&&(this.ya?h.call(this):(this.mb===b&&(this.mb=[]),this.mb.push(h))),this},s.Va=function(){this.ya=f;var h=this.mb;if(this.mb=[],h&&0<h.length){for(var r=0,o=h.length;r<o;r++)h[r].call(this);this.o("ready")}},s.Pa=function(h){return t.Pa(this.c,h)},s.p=function(h){return t.p(this.c,h),this},s.r=function(h){return t.r(this.c,h),this},s.show=function(){return this.r("vjs-hidden"),this},s.W=function(){return this.p("vjs-hidden"),this};function G(h){h.r("vjs-lock-showing")}s.width=function(h,r){return ca(this,"width",h,r)},s.height=function(h,r){return ca(this,"height",h,r)},s.Qd=function(h,r){return this.width(h,f).height(r)};function ca(h,r,o,u){return o!==b?((o===j||t.ge(o))&&(o=0),h.c.style[r]=(""+o).indexOf("%")!==-1||(""+o).indexOf("px")!==-1?o:o==="auto"?"":o+"px",u||h.o("resize"),h):h.c?(o=h.c.style[r],u=o.indexOf("px"),parseInt(u!==-1?o.slice(0,u):h.c["offset"+t.va(r)],10)):0}function da(h){var r,o,u,g,k,A,R,q;r=0,o=j,h.b("touchstart",function(_){_.touches.length===1&&(o=t.i.copy(_.touches[0]),r=new Date().getTime(),g=f)}),h.b("touchmove",function(_){1<_.touches.length?g=l:o&&(A=_.touches[0].pageX-o.pageX,R=_.touches[0].pageY-o.pageY,q=Math.sqrt(A*A+R*R),10<q&&(g=l))}),k=function(){g=l},h.b("touchleave",k),h.b("touchcancel",k),h.b("touchend",function(_){o=j,g===f&&(u=new Date().getTime()-r,200>u&&(_.preventDefault(),this.o("tap")))})}s.setTimeout=function(h,r){function o(){this.clearTimeout(u)}h=t.bind(this,h);var u=setTimeout(h,r);return o.s="vjs-timeout-"+u,this.b("dispose",o),u},s.clearTimeout=function(h){function r(){}return clearTimeout(h),r.s="vjs-timeout-"+h,this.n("dispose",r),h},s.setInterval=function(h,r){function o(){this.clearInterval(u)}h=t.bind(this,h);var u=setInterval(h,r);return o.s="vjs-interval-"+u,this.b("dispose",o),u},s.clearInterval=function(h){function r(){}return clearInterval(h),r.s="vjs-interval-"+h,this.n("dispose",r),h},t.w=t.a.extend({l:function(h,r){t.a.call(this,h,r),da(this),this.b("tap",this.u),this.b("click",this.u),this.b("focus",this.kb),this.b("blur",this.jb)}}),s=t.w.prototype,s.e=function(h,r){var o;return r=t.i.D({className:this.T(),role:"button","aria-live":"polite",tabIndex:0},r),o=t.a.prototype.e.call(this,h,r),r.innerHTML||(this.B=t.e("div",{className:"vjs-control-content"}),this.Ib=t.e("span",{className:"vjs-control-text",innerHTML:this.v(this.ta)||"Need Text"}),this.B.appendChild(this.Ib),o.appendChild(this.B)),o},s.T=function(){return"vjs-control "+t.a.prototype.T.call(this)},s.u=m(),s.kb=function(){t.b(document,"keydown",t.bind(this,this.ka))},s.ka=function(h){(h.which==32||h.which==13)&&(h.preventDefault(),this.u())},s.jb=function(){t.n(document,"keydown",t.bind(this,this.ka))},t.S=t.a.extend({l:function(h,r){t.a.call(this,h,r),this.Hd=this.da(this.q.barName),this.handle=this.da(this.q.handleName),this.b("mousedown",this.lb),this.b("touchstart",this.lb),this.b("focus",this.kb),this.b("blur",this.jb),this.b("click",this.u),this.b(h,"controlsvisible",this.update),this.b(h,this.Uc,this.update)}}),s=t.S.prototype,s.e=function(h,r){return r=r||{},r.className+=" vjs-slider",r=t.i.D({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},r),t.a.prototype.e.call(this,h,r)},s.lb=function(h){h.preventDefault(),t.Id(),this.p("vjs-sliding"),this.b(document,"mousemove",this.la),this.b(document,"mouseup",this.Ba),this.b(document,"touchmove",this.la),this.b(document,"touchend",this.Ba),this.la(h)},s.la=m(),s.Ba=function(){t.Xe(),this.r("vjs-sliding"),this.n(document,"mousemove",this.la),this.n(document,"mouseup",this.Ba),this.n(document,"touchmove",this.la),this.n(document,"touchend",this.Ba),this.update()},s.update=function(){if(this.c){var h,r=this.Qb(),o=this.handle,u=this.Hd;if((typeof r!="number"||r!==r||0>r||r===1/0)&&(r=0),h=r,o){h=this.c.offsetWidth;var g=o.m().offsetWidth;h=g?g/h:0,r*=1-h,h=r+h/2,o.m().style.left=t.round(100*r,2)+"%"}u&&(u.m().style.width=t.round(100*h,2)+"%")}};function ea(h,r){var o,u,g,k;return o=h.c,u=t.Vd(o),k=g=o.offsetWidth,o=h.handle,h.options().vertical?(k=u.top,u=r.changedTouches?r.changedTouches[0].pageY:r.pageY,o&&(o=o.m().offsetHeight,k+=o/2,g-=o),Math.max(0,Math.min(1,(k-u+g)/g))):(g=u.left,u=r.changedTouches?r.changedTouches[0].pageX:r.pageX,o&&(o=o.m().offsetWidth,g+=o/2,k-=o),Math.max(0,Math.min(1,(u-g)/k)))}s.kb=function(){this.b(document,"keydown",this.ka)},s.ka=function(h){h.which==37||h.which==40?(h.preventDefault(),this.fd()):(h.which==38||h.which==39)&&(h.preventDefault(),this.gd())},s.jb=function(){this.n(document,"keydown",this.ka)},s.u=function(h){h.stopImmediatePropagation(),h.preventDefault()},t.ga=t.a.extend(),t.ga.prototype.defaultValue=0,t.ga.prototype.e=function(h,r){return r=r||{},r.className+=" vjs-slider-handle",r=t.i.D({innerHTML:'<span class="vjs-control-text">'+this.defaultValue+"</span>"},r),t.a.prototype.e.call(this,"div",r)},t.qa=t.a.extend();function fa(h,r){h.aa(r),r.b("click",t.bind(h,function(){G(this)}))}t.qa.prototype.e=function(){var h=this.options().zc||"ul";return this.B=t.e(h,{className:"vjs-menu-content"}),h=t.a.prototype.e.call(this,"div",{append:this.B,className:"vjs-menu"}),h.appendChild(this.B),t.b(h,"click",function(r){r.preventDefault(),r.stopImmediatePropagation()}),h},t.M=t.w.extend({l:function(h,r){t.w.call(this,h,r),this.selected(r.selected)}}),t.M.prototype.e=function(h,r){return t.w.prototype.e.call(this,"li",t.i.D({className:"vjs-menu-item",innerHTML:this.v(this.q.label)},r))},t.M.prototype.u=function(){this.selected(f)},t.M.prototype.selected=function(h){h?(this.p("vjs-selected"),this.c.setAttribute("aria-selected",f)):(this.r("vjs-selected"),this.c.setAttribute("aria-selected",l))},t.O=t.w.extend({l:function(h,r){t.w.call(this,h,r),this.update(),this.b("keydown",this.ka),this.c.setAttribute("aria-haspopup",f),this.c.setAttribute("role","button")}}),s=t.O.prototype,s.update=function(){var h=this.La();this.za&&this.removeChild(this.za),this.za=h,this.aa(h),this.H&&this.H.length===0?this.W():this.H&&1<this.H.length&&this.show()},s.Ja=l,s.La=function(){var h=new t.qa(this.d);if(this.options().title&&h.wa().appendChild(t.e("li",{className:"vjs-menu-title",innerHTML:t.va(this.options().title),Se:-1})),this.H=this.createItems())for(var r=0;r<this.H.length;r++)fa(h,this.H[r]);return h},s.Ka=m(),s.T=function(){return this.className+" vjs-menu-button "+t.w.prototype.T.call(this)},s.kb=m(),s.jb=m(),s.u=function(){this.N("mouseout",t.bind(this,function(){G(this.za),this.c.blur()})),this.Ja?H(this):ga(this)},s.ka=function(h){h.which==32||h.which==13?(this.Ja?H(this):ga(this),h.preventDefault()):h.which==27&&(this.Ja&&H(this),h.preventDefault())};function ga(h){h.Ja=f,h.za.p("vjs-lock-showing"),h.c.setAttribute("aria-pressed",f),h.H&&0<h.H.length&&h.H[0].m().focus()}function H(h){h.Ja=l,G(h.za),h.c.setAttribute("aria-pressed",l)}t.J=function(h){typeof h=="number"?this.code=h:typeof h=="string"?this.message=h:typeof h=="object"&&t.i.D(this,h),this.message||(this.message=t.J.Pd[this.code]||"")},t.J.prototype.code=0,t.J.prototype.message="",t.J.prototype.status=j,t.J.gb="MEDIA_ERR_CUSTOM MEDIA_ERR_ABORTED MEDIA_ERR_NETWORK MEDIA_ERR_DECODE MEDIA_ERR_SRC_NOT_SUPPORTED MEDIA_ERR_ENCRYPTED".split(" "),t.J.Pd={1:"You aborted the video playback",2:"A network error caused the video download to fail part-way.",3:"The video playback was aborted due to a corruption problem or because the video used features your browser did not support.",4:"The video could not be loaded, either because the server or network failed or because the format is not supported.",5:"The video is encrypted and we do not have the keys to decrypt it."};for(var I=0;I<t.J.gb.length;I++)t.J[t.J.gb[I]]=I,t.J.prototype[t.J.gb[I]]=I;var J,ha,K,L;for(J=["requestFullscreen exitFullscreen fullscreenElement fullscreenEnabled fullscreenchange fullscreenerror".split(" "),"webkitRequestFullscreen webkitExitFullscreen webkitFullscreenElement webkitFullscreenEnabled webkitfullscreenchange webkitfullscreenerror".split(" "),"webkitRequestFullScreen webkitCancelFullScreen webkitCurrentFullScreenElement webkitCancelFullScreen webkitfullscreenchange webkitfullscreenerror".split(" "),"mozRequestFullScreen mozCancelFullScreen mozFullScreenElement mozFullScreenEnabled mozfullscreenchange mozfullscreenerror".split(" "),"msRequestFullscreen msExitFullscreen msFullscreenElement msFullscreenEnabled MSFullscreenChange MSFullscreenError".split(" ")],ha=J[0],L=0;L<J.length;L++)if(J[L][1]in document){K=J[L];break}if(K)for(t.bb.Pb={},L=0;L<K.length;L++)t.bb.Pb[ha[L]]=K[L];t.Player=t.a.extend({l:function(h,r,o){this.L=h,h.id=h.id||"vjs_video_"+t.s++,this.Te=h&&t.Oa(h),r=t.i.D(ia(h),r),this.Pc=r.language||t.options.language,this.je=r.languages||t.options.languages,this.K={},this.Vc=r.poster||"",this.Jb=!!r.controls,h.controls=l,r.$c=l,ja(this,this.L.nodeName.toLowerCase()==="audio"),t.a.call(this,this,r,o),this.controls()?this.p("vjs-controls-enabled"):this.p("vjs-controls-disabled"),ja(this)&&this.p("vjs-audio"),t.Ca[this.Qa]=this,r.plugins&&t.i.ca(r.plugins,function(q,_){this[q](_)},this);var u,g,k,A,R;u=t.bind(this,this.reportUserActivity),this.b("mousedown",function(){u(),this.clearInterval(g),g=this.setInterval(u,250)}),this.b("mousemove",function(q){(q.screenX!=A||q.screenY!=R)&&(A=q.screenX,R=q.screenY,u())}),this.b("mouseup",function(){u(),this.clearInterval(g)}),this.b("keydown",u),this.b("keyup",u),this.setInterval(function(){if(this.Fa){this.Fa=l,this.userActive(f),this.clearTimeout(k);var q=this.options().inactivityTimeout;0<q&&(k=this.setTimeout(function(){this.Fa||this.userActive(l)},q))}},250)}}),s=t.Player.prototype,s.language=function(h){return h===b?this.Pc:(this.Pc=h,this)},s.languages=n("je"),s.q=t.options,s.dispose=function(){this.o("dispose"),this.n("dispose"),t.Ca[this.Qa]=j,this.L&&this.L.player&&(this.L.player=j),this.c&&this.c.player&&(this.c.player=j),this.h&&this.h.dispose(),t.a.prototype.dispose.call(this)};function ia(h){var r,o,u={sources:[],tracks:[]};if(r=t.Oa(h),o=r["data-setup"],o!==j&&t.i.D(r,t.JSON.parse(o||"{}")),t.i.D(u,r),h.hasChildNodes()){var g,k;for(h=h.childNodes,g=0,k=h.length;g<k;g++)r=h[g],o=r.nodeName.toLowerCase(),o==="source"?u.sources.push(t.Oa(r)):o==="track"&&u.tracks.push(t.Oa(r))}return u}s.e=function(){var h=this.c=t.a.prototype.e.call(this,"div"),r=this.L,o;return r.removeAttribute("width"),r.removeAttribute("height"),o=t.Oa(r),t.i.ca(o,function(u){u=="class"?h.className=o[u]:h.setAttribute(u,o[u])}),r.id+="_html5_api",r.className="vjs-tech",r.player=h.player=this,this.p("vjs-paused"),this.width(this.q.width,f),this.height(this.q.height,f),r.ce=r.networkState,r.parentNode&&r.parentNode.insertBefore(h,r),t.Rb(r,h),this.c=h,this.b("loadstart",this.te),this.b("waiting",this.ze),this.b(["canplay","canplaythrough","playing","ended"],this.ye),this.b("seeking",this.we),this.b("seeked",this.ve),this.b("ended",this.qe),this.b("play",this.Xb),this.b("firstplay",this.re),this.b("pause",this.Wb),this.b("progress",this.ue),this.b("durationchange",this.Sc),this.b("fullscreenchange",this.se),h};function ka(h,r,o){h.h&&(h.ya=l,h.h.dispose(),h.h=l),r!=="Html5"&&h.L&&(t.f.Kb(h.L),h.L=j),h.Ta=r,h.ya=l;var u=t.i.D({source:o,parentEl:h.c},h.q[r.toLowerCase()]);o&&(h.Cc=o.type,o.src==h.K.src&&0<h.K.currentTime&&(u.startTime=h.K.currentTime),h.K.src=o.src),h.h=new window.videojs[r](h,u),h.h.I(function(){this.d.Va()})}s.te=function(){this.r("vjs-ended"),this.error(j),this.paused()?la(this,l):this.o("firstplay")},s.Jc=l;function la(h,r){r!==b&&h.Jc!==r&&((h.Jc=r)?(h.p("vjs-has-started"),h.o("firstplay")):h.r("vjs-has-started"))}s.Xb=function(){this.r("vjs-ended"),this.r("vjs-paused"),this.p("vjs-playing"),la(this,f)},s.ze=function(){this.p("vjs-waiting")},s.ye=function(){this.r("vjs-waiting")},s.we=function(){this.p("vjs-seeking")},s.ve=function(){this.r("vjs-seeking")},s.re=function(){this.q.starttime&&this.currentTime(this.q.starttime),this.p("vjs-has-started")},s.Wb=function(){this.r("vjs-playing"),this.p("vjs-paused")},s.ue=function(){this.bufferedPercent()==1&&this.o("loadedalldata")},s.qe=function(){this.p("vjs-ended"),this.q.loop?(this.currentTime(0),this.play()):this.paused()||this.pause()},s.Sc=function(){var h=M(this,"duration");h&&(0>h&&(h=1/0),this.duration(h),h===1/0?this.p("vjs-live"):this.r("vjs-live"))},s.se=function(){this.isFullscreen()?this.p("vjs-fullscreen"):this.r("vjs-fullscreen")};function N(h,r,o){if(h.h&&!h.h.ya)h.h.I(function(){this[r](o)});else try{h.h[r](o)}catch(u){throw t.log(u),u}}function M(h,r){if(h.h&&h.h.ya)try{return h.h[r]()}catch(o){throw h.h[r]===b?t.log("Video.js: "+r+" method not defined for "+h.Ta+" playback technology.",o):o.name=="TypeError"?(t.log("Video.js: "+r+" unavailable on "+h.Ta+" playback technology element.",o),h.h.ya=l):t.log(o),o}}s.play=function(){return N(this,"play"),this},s.pause=function(){return N(this,"pause"),this},s.paused=function(){return M(this,"paused")===l?l:f},s.currentTime=function(h){return h!==b?(N(this,"setCurrentTime",h),this):this.K.currentTime=M(this,"currentTime")||0},s.duration=function(h){return h!==b?(this.K.duration=parseFloat(h),this):(this.K.duration===b&&this.Sc(),this.K.duration||0)},s.remainingTime=function(){return this.duration()-this.currentTime()},s.buffered=function(){var h=M(this,"buffered");return(!h||!h.length)&&(h=t.xa(0,0)),h},s.bufferedPercent=function(){var h=this.duration(),r=this.buffered(),o=0,u,g;if(!h)return 0;for(var k=0;k<r.length;k++)u=r.start(k),g=r.end(k),g>h&&(g=h),o+=g-u;return o/h},s.volume=function(h){return h!==b?(h=Math.max(0,Math.min(1,parseFloat(h))),this.K.volume=h,N(this,"setVolume",h),t.Ie(h),this):(h=parseFloat(M(this,"volume")),isNaN(h)?1:h)},s.muted=function(h){return h!==b?(N(this,"setMuted",h),this):M(this,"muted")||l},s.Sa=function(){return M(this,"supportsFullScreen")||l},s.Mc=l,s.isFullscreen=function(h){return h!==b?(this.Mc=!!h,this):this.Mc},s.isFullScreen=function(h){return t.log.warn('player.isFullScreen() has been deprecated, use player.isFullscreen() with a lowercase "s")'),this.isFullscreen(h)},s.requestFullscreen=function(){var h=t.bb.Pb;return this.isFullscreen(f),h?(t.b(document,h.fullscreenchange,t.bind(this,function(r){this.isFullscreen(document[h.fullscreenElement]),this.isFullscreen()===l&&t.n(document,h.fullscreenchange,arguments.callee),this.o("fullscreenchange")})),this.c[h.requestFullscreen]()):this.h.Sa()?N(this,"enterFullScreen"):(this.Fc(),this.o("fullscreenchange")),this},s.requestFullScreen=function(){return t.log.warn('player.requestFullScreen() has been deprecated, use player.requestFullscreen() with a lowercase "s")'),this.requestFullscreen()},s.exitFullscreen=function(){var h=t.bb.Pb;return this.isFullscreen(l),h?document[h.exitFullscreen]():this.h.Sa()?N(this,"exitFullScreen"):(this.Lb(),this.o("fullscreenchange")),this},s.cancelFullScreen=function(){return t.log.warn("player.cancelFullScreen() has been deprecated, use player.exitFullscreen()"),this.exitFullscreen()},s.Fc=function(){this.fe=f,this.Rd=document.documentElement.style.overflow,t.b(document,"keydown",t.bind(this,this.Gc)),document.documentElement.style.overflow="hidden",t.p(document.body,"vjs-full-window"),this.o("enterFullWindow")},s.Gc=function(h){h.keyCode===27&&(this.isFullscreen()===f?this.exitFullscreen():this.Lb())},s.Lb=function(){this.fe=l,t.n(document,"keydown",this.Gc),document.documentElement.style.overflow=this.Rd,t.r(document.body,"vjs-full-window"),this.o("exitFullWindow")},s.selectSource=function(h){for(var r=0,o=this.q.techOrder;r<o.length;r++){var u=t.va(o[r]),g=window.videojs[u];if(g){if(g.isSupported())for(var k=0,A=h;k<A.length;k++){var R=A[k];if(g.canPlaySource(R))return{source:R,h:u}}}else t.log.error('The "'+u+'" tech is undefined. Skipped browser support check for that tech.')}return l},s.src=function(h){return h===b?M(this,"src"):(t.i.isArray(h)?ma(this,h):typeof h=="string"?this.src({src:h}):h instanceof Object&&(h.type&&!window.videojs[this.Ta].canPlaySource(h)?ma(this,[h]):(this.K.src=h.src,this.Cc=h.type||"",this.I(function(){window.videojs[this.Ta].prototype.hasOwnProperty("setSource")?N(this,"setSource",h):N(this,"src",h.src),this.q.preload=="auto"&&this.load(),this.q.autoplay&&this.play()}))),this)};function ma(h,r){var o=h.selectSource(r);o?o.h===h.Ta?h.src(o.source):ka(h,o.h,o.source):(h.setTimeout(function(){this.error({code:4,message:this.v(this.options().notSupportedMessage)})},0),h.Va())}s.load=function(){return N(this,"load"),this},s.currentSrc=function(){return M(this,"currentSrc")||this.K.src||""},s.Nd=function(){return this.Cc||""},s.Ra=function(h){return h!==b?(N(this,"setPreload",h),this.q.preload=h,this):M(this,"preload")},s.autoplay=function(h){return h!==b?(N(this,"setAutoplay",h),this.q.autoplay=h,this):M(this,"autoplay")},s.loop=function(h){return h!==b?(N(this,"setLoop",h),this.q.loop=h,this):M(this,"loop")},s.poster=function(h){return h===b?this.Vc:(h||(h=""),this.Vc=h,N(this,"setPoster",h),this.o("posterchange"),this)},s.controls=function(h){return h!==b?(h=!!h,this.Jb!==h&&((this.Jb=h)?(this.r("vjs-controls-disabled"),this.p("vjs-controls-enabled"),this.o("controlsenabled")):(this.r("vjs-controls-enabled"),this.p("vjs-controls-disabled"),this.o("controlsdisabled"))),this):this.Jb},t.Player.prototype.bc,s=t.Player.prototype,s.usingNativeControls=function(h){return h!==b?(h=!!h,this.bc!==h&&((this.bc=h)?(this.p("vjs-using-native-controls"),this.o("usingnativecontrols")):(this.r("vjs-using-native-controls"),this.o("usingcustomcontrols"))),this):this.bc},s.ja=j,s.error=function(h){return h===b?this.ja:h===j?(this.ja=h,this.r("vjs-error"),this):(this.ja=h instanceof t.J?h:new t.J(h),this.o("error"),this.p("vjs-error"),t.log.error("(CODE:"+this.ja.code+" "+t.J.gb[this.ja.code]+")",this.ja.message,this.ja),this)},s.ended=function(){return M(this,"ended")},s.seeking=function(){return M(this,"seeking")},s.seekable=function(){return M(this,"seekable")},s.Fa=f,s.reportUserActivity=function(){this.Fa=f},s.ac=f,s.userActive=function(h){return h!==b?(h=!!h,h!==this.ac&&((this.ac=h)?(this.Fa=f,this.r("vjs-user-inactive"),this.p("vjs-user-active"),this.o("useractive")):(this.Fa=l,this.h&&this.h.N("mousemove",function(r){r.stopPropagation(),r.preventDefault()}),this.r("vjs-user-active"),this.p("vjs-user-inactive"),this.o("userinactive"))),this):this.ac},s.playbackRate=function(h){return h!==b?(N(this,"setPlaybackRate",h),this):this.h&&this.h.featuresPlaybackRate?M(this,"playbackRate"):1},s.Lc=l;function ja(h,r){return r!==b?(h.Lc=!!r,h):h.Lc}s.networkState=function(){return M(this,"networkState")},s.readyState=function(){return M(this,"readyState")},s.textTracks=function(){return this.h&&this.h.textTracks()},s.X=function(){return this.h&&this.h.remoteTextTracks()},s.addTextTrack=function(h,r,o){return this.h&&this.h.addTextTrack(h,r,o)},s.ha=function(h){return this.h&&this.h.addRemoteTextTrack(h)},s.Da=function(h){this.h&&this.h.removeRemoteTextTrack(h)},t.tb=t.a.extend(),t.tb.prototype.q={sf:"play",children:{playToggle:{},currentTimeDisplay:{},timeDivider:{},durationDisplay:{},remainingTimeDisplay:{},liveDisplay:{},progressControl:{},fullscreenToggle:{},volumeControl:{},muteToggle:{},playbackRateMenuButton:{},subtitlesButton:{},captionsButton:{},chaptersButton:{}}},t.tb.prototype.e=function(){return t.e("div",{className:"vjs-control-bar"})},t.hc=t.a.extend({l:function(h,r){t.a.call(this,h,r)}}),t.hc.prototype.e=function(){var h=t.a.prototype.e.call(this,"div",{className:"vjs-live-controls vjs-control"});return this.B=t.e("div",{className:"vjs-live-display",innerHTML:'<span class="vjs-control-text">'+this.v("Stream Type")+"</span>"+this.v("LIVE"),"aria-live":"off"}),h.appendChild(this.B),h},t.kc=t.w.extend({l:function(h,r){t.w.call(this,h,r),this.b(h,"play",this.Xb),this.b(h,"pause",this.Wb)}}),s=t.kc.prototype,s.ta="Play",s.T=function(){return"vjs-play-control "+t.w.prototype.T.call(this)},s.u=function(){this.d.paused()?this.d.play():this.d.pause()},s.Xb=function(){this.r("vjs-paused"),this.p("vjs-playing"),this.c.children[0].children[0].innerHTML=this.v("Pause")},s.Wb=function(){this.r("vjs-playing"),this.p("vjs-paused"),this.c.children[0].children[0].innerHTML=this.v("Play")},t.ub=t.a.extend({l:function(h,r){t.a.call(this,h,r),this.b(h,"timeupdate",this.fa)}}),t.ub.prototype.e=function(){var h=t.a.prototype.e.call(this,"div",{className:"vjs-current-time vjs-time-controls vjs-control"});return this.B=t.e("div",{className:"vjs-current-time-display",innerHTML:'<span class="vjs-control-text">Current Time </span>0:00',"aria-live":"off"}),h.appendChild(this.B),h},t.ub.prototype.fa=function(){var h=this.d.nb?this.d.K.currentTime:this.d.currentTime();this.B.innerHTML='<span class="vjs-control-text">'+this.v("Current Time")+"</span> "+t.Na(h,this.d.duration())},t.vb=t.a.extend({l:function(h,r){t.a.call(this,h,r),this.b(h,"timeupdate",this.fa),this.b(h,"loadedmetadata",this.fa)}}),t.vb.prototype.e=function(){var h=t.a.prototype.e.call(this,"div",{className:"vjs-duration vjs-time-controls vjs-control"});return this.B=t.e("div",{className:"vjs-duration-display",innerHTML:'<span class="vjs-control-text">'+this.v("Duration Time")+"</span> 0:00","aria-live":"off"}),h.appendChild(this.B),h},t.vb.prototype.fa=function(){var h=this.d.duration();h&&(this.B.innerHTML='<span class="vjs-control-text">'+this.v("Duration Time")+"</span> "+t.Na(h))},t.qc=t.a.extend({l:function(h,r){t.a.call(this,h,r)}}),t.qc.prototype.e=function(){return t.a.prototype.e.call(this,"div",{className:"vjs-time-divider",innerHTML:"<div><span>/</span></div>"})},t.Cb=t.a.extend({l:function(h,r){t.a.call(this,h,r),this.b(h,"timeupdate",this.fa)}}),t.Cb.prototype.e=function(){var h=t.a.prototype.e.call(this,"div",{className:"vjs-remaining-time vjs-time-controls vjs-control"});return this.B=t.e("div",{className:"vjs-remaining-time-display",innerHTML:'<span class="vjs-control-text">'+this.v("Remaining Time")+"</span> -0:00","aria-live":"off"}),h.appendChild(this.B),h},t.Cb.prototype.fa=function(){this.d.duration()&&(this.B.innerHTML='<span class="vjs-control-text">'+this.v("Remaining Time")+"</span> -"+t.Na(this.d.remainingTime()))},t.Ya=t.w.extend({l:function(h,r){t.w.call(this,h,r)}}),t.Ya.prototype.ta="Fullscreen",t.Ya.prototype.T=function(){return"vjs-fullscreen-control "+t.w.prototype.T.call(this)},t.Ya.prototype.u=function(){this.d.isFullscreen()?(this.d.exitFullscreen(),this.Ib.innerHTML=this.v("Fullscreen")):(this.d.requestFullscreen(),this.Ib.innerHTML=this.v("Non-Fullscreen"))},t.Bb=t.a.extend({l:function(h,r){t.a.call(this,h,r)}}),t.Bb.prototype.q={children:{seekBar:{}}},t.Bb.prototype.e=function(){return t.a.prototype.e.call(this,"div",{className:"vjs-progress-control vjs-control"})},t.nc=t.S.extend({l:function(h,r){t.S.call(this,h,r),this.b(h,"timeupdate",this.Ea),h.I(t.bind(this,this.Ea))}}),s=t.nc.prototype,s.q={children:{loadProgressBar:{},playProgressBar:{},seekHandle:{}},barName:"playProgressBar",handleName:"seekHandle"},s.Uc="timeupdate",s.e=function(){return t.S.prototype.e.call(this,"div",{className:"vjs-progress-holder","aria-label":"video progress bar"})},s.Ea=function(){var h=this.d.nb?this.d.K.currentTime:this.d.currentTime();this.c.setAttribute("aria-valuenow",t.round(100*this.Qb(),2)),this.c.setAttribute("aria-valuetext",t.Na(h,this.d.duration()))},s.Qb=function(){return this.d.currentTime()/this.d.duration()},s.lb=function(h){t.S.prototype.lb.call(this,h),this.d.nb=f,this.d.p("vjs-scrubbing"),this.$e=!this.d.paused(),this.d.pause()},s.la=function(h){h=ea(this,h)*this.d.duration(),h==this.d.duration()&&(h-=.1),this.d.currentTime(h)},s.Ba=function(h){t.S.prototype.Ba.call(this,h),this.d.nb=l,this.d.r("vjs-scrubbing"),this.$e&&this.d.play()},s.gd=function(){this.d.currentTime(this.d.currentTime()+5)},s.fd=function(){this.d.currentTime(this.d.currentTime()-5)},t.yb=t.a.extend({l:function(h,r){t.a.call(this,h,r),this.b(h,"progress",this.update)}}),t.yb.prototype.e=function(){return t.a.prototype.e.call(this,"div",{className:"vjs-load-progress",innerHTML:'<span class="vjs-control-text"><span>'+this.v("Loaded")+"</span>: 0%</span>"})},t.yb.prototype.update=function(){var h,r,o,u,g=this.d.buffered();h=this.d.duration();var k,A=this.d;for(k=A.buffered(),A=A.duration(),k=k.end(k.length-1),k>A&&(k=A),A=this.c.children,this.c.style.width=100*(k/h||0)+"%",h=0;h<g.length;h++)r=g.start(h),o=g.end(h),(u=A[h])||(u=this.c.appendChild(t.e())),u.style.left=100*(r/k||0)+"%",u.style.width=100*((o-r)/k||0)+"%";for(h=A.length;h>g.length;h--)this.c.removeChild(A[h-1])},t.jc=t.a.extend({l:function(h,r){t.a.call(this,h,r)}}),t.jc.prototype.e=function(){return t.a.prototype.e.call(this,"div",{className:"vjs-play-progress",innerHTML:'<span class="vjs-control-text"><span>'+this.v("Progress")+"</span>: 0%</span>"})},t.Za=t.ga.extend({l:function(h,r){t.ga.call(this,h,r),this.b(h,"timeupdate",this.fa)}}),t.Za.prototype.defaultValue="00:00",t.Za.prototype.e=function(){return t.ga.prototype.e.call(this,"div",{className:"vjs-seek-handle","aria-live":"off"})},t.Za.prototype.fa=function(){var h=this.d.nb?this.d.K.currentTime:this.d.currentTime();this.c.innerHTML='<span class="vjs-control-text">'+t.Na(h,this.d.duration())+"</span>"},t.Fb=t.a.extend({l:function(h,r){t.a.call(this,h,r),h.h&&h.h.featuresVolumeControl===l&&this.p("vjs-hidden"),this.b(h,"loadstart",function(){h.h.featuresVolumeControl===l?this.p("vjs-hidden"):this.r("vjs-hidden")})}}),t.Fb.prototype.q={children:{volumeBar:{}}},t.Fb.prototype.e=function(){return t.a.prototype.e.call(this,"div",{className:"vjs-volume-control vjs-control"})},t.Eb=t.S.extend({l:function(h,r){t.S.call(this,h,r),this.b(h,"volumechange",this.Ea),h.I(t.bind(this,this.Ea))}}),s=t.Eb.prototype,s.Ea=function(){this.c.setAttribute("aria-valuenow",t.round(100*this.d.volume(),2)),this.c.setAttribute("aria-valuetext",t.round(100*this.d.volume(),2)+"%")},s.q={children:{volumeLevel:{},volumeHandle:{}},barName:"volumeLevel",handleName:"volumeHandle"},s.Uc="volumechange",s.e=function(){return t.S.prototype.e.call(this,"div",{className:"vjs-volume-bar","aria-label":"volume level"})},s.la=function(h){this.d.muted()&&this.d.muted(l),this.d.volume(ea(this,h))},s.Qb=function(){return this.d.muted()?0:this.d.volume()},s.gd=function(){this.d.volume(this.d.volume()+.1)},s.fd=function(){this.d.volume(this.d.volume()-.1)},t.rc=t.a.extend({l:function(h,r){t.a.call(this,h,r)}}),t.rc.prototype.e=function(){return t.a.prototype.e.call(this,"div",{className:"vjs-volume-level",innerHTML:'<span class="vjs-control-text"></span>'})},t.Gb=t.ga.extend(),t.Gb.prototype.defaultValue="00:00",t.Gb.prototype.e=function(){return t.ga.prototype.e.call(this,"div",{className:"vjs-volume-handle"})},t.ra=t.w.extend({l:function(h,r){t.w.call(this,h,r),this.b(h,"volumechange",this.update),h.h&&h.h.featuresVolumeControl===l&&this.p("vjs-hidden"),this.b(h,"loadstart",function(){h.h.featuresVolumeControl===l?this.p("vjs-hidden"):this.r("vjs-hidden")})}}),t.ra.prototype.e=function(){return t.w.prototype.e.call(this,"div",{className:"vjs-mute-control vjs-control",innerHTML:'<div><span class="vjs-control-text">'+this.v("Mute")+"</span></div>"})},t.ra.prototype.u=function(){this.d.muted(this.d.muted()?l:f)},t.ra.prototype.update=function(){var h=this.d.volume(),r=3;for(h===0||this.d.muted()?r=0:.33>h?r=1:.67>h&&(r=2),this.d.muted()?this.c.children[0].children[0].innerHTML!=this.v("Unmute")&&(this.c.children[0].children[0].innerHTML=this.v("Unmute")):this.c.children[0].children[0].innerHTML!=this.v("Mute")&&(this.c.children[0].children[0].innerHTML=this.v("Mute")),h=0;4>h;h++)t.r(this.c,"vjs-vol-"+h);t.p(this.c,"vjs-vol-"+r)},t.Ha=t.O.extend({l:function(h,r){t.O.call(this,h,r),this.b(h,"volumechange",this.af),h.h&&h.h.featuresVolumeControl===l&&this.p("vjs-hidden"),this.b(h,"loadstart",function(){h.h.featuresVolumeControl===l?this.p("vjs-hidden"):this.r("vjs-hidden")}),this.p("vjs-menu-button")}}),t.Ha.prototype.La=function(){var h=new t.qa(this.d,{zc:"div"}),r=new t.Eb(this.d,this.q.volumeBar);return r.b("focus",function(){h.p("vjs-lock-showing")}),r.b("blur",function(){G(h)}),h.aa(r),h},t.Ha.prototype.u=function(){t.ra.prototype.u.call(this),t.O.prototype.u.call(this)},t.Ha.prototype.e=function(){return t.w.prototype.e.call(this,"div",{className:"vjs-volume-menu-button vjs-menu-button vjs-control",innerHTML:'<div><span class="vjs-control-text">'+this.v("Mute")+"</span></div>"})},t.Ha.prototype.af=t.ra.prototype.update,t.lc=t.O.extend({l:function(h,r){t.O.call(this,h,r),this.pd(),this.od(),this.b(h,"loadstart",this.pd),this.b(h,"ratechange",this.od)}}),s=t.lc.prototype,s.ta="Playback Rate",s.className="vjs-playback-rate",s.e=function(){var h=t.O.prototype.e.call(this);return this.Oc=t.e("div",{className:"vjs-playback-rate-value",innerHTML:1}),h.appendChild(this.Oc),h},s.La=function(){var h=new t.qa(this.k()),r=this.k().options().playbackRates;if(r)for(var o=r.length-1;0<=o;o--)h.aa(new t.Ab(this.k(),{rate:r[o]+"x"}));return h},s.Ea=function(){this.m().setAttribute("aria-valuenow",this.k().playbackRate())},s.u=function(){for(var h=this.k().playbackRate(),r=this.k().options().playbackRates,o=r[0],u=0;u<r.length;u++)if(r[u]>h){o=r[u];break}this.k().playbackRate(o)};function na(h){return h.k().h&&h.k().h.featuresPlaybackRate&&h.k().options().playbackRates&&0<h.k().options().playbackRates.length}s.pd=function(){na(this)?this.r("vjs-hidden"):this.p("vjs-hidden")},s.od=function(){na(this)&&(this.Oc.innerHTML=this.k().playbackRate()+"x")},t.Ab=t.M.extend({zc:"button",l:function(h,r){var o=this.label=r.rate,u=this.Wc=parseFloat(o,10);r.label=o,r.selected=u===1,t.M.call(this,h,r),this.b(h,"ratechange",this.update)}}),t.Ab.prototype.u=function(){t.M.prototype.u.call(this),this.k().playbackRate(this.Wc)},t.Ab.prototype.update=function(){this.selected(this.k().playbackRate()==this.Wc)},t.mc=t.w.extend({l:function(h,r){t.w.call(this,h,r),this.update(),h.b("posterchange",t.bind(this,this.update))}}),s=t.mc.prototype,s.dispose=function(){this.k().n("posterchange",this.update),t.w.prototype.dispose.call(this)},s.e=function(){var h=t.e("div",{className:"vjs-poster",tabIndex:-1});return t.td||(this.Mb=t.e("img"),h.appendChild(this.Mb)),h},s.update=function(){var h=this.k().poster();this.na(h),h?this.show():this.W()},s.na=function(h){var r;this.Mb?this.Mb.src=h:(r="",h&&(r='url("'+h+'")'),this.c.style.backgroundImage=r)},s.u=function(){this.d.play()},t.ic=t.a.extend({l:function(h,r){t.a.call(this,h,r)}}),t.ic.prototype.e=function(){return t.a.prototype.e.call(this,"div",{className:"vjs-loading-spinner"})},t.rb=t.w.extend(),t.rb.prototype.e=function(){return t.w.prototype.e.call(this,"div",{className:"vjs-big-play-button",innerHTML:'<span aria-hidden="true"></span>',"aria-label":"play video"})},t.rb.prototype.u=function(){this.d.play()},t.wb=t.a.extend({l:function(h,r){t.a.call(this,h,r),this.update(),this.b(h,"error",this.update)}}),t.wb.prototype.e=function(){var h=t.a.prototype.e.call(this,"div",{className:"vjs-error-display"});return this.B=t.e("div"),h.appendChild(this.B),h},t.wb.prototype.update=function(){this.k().error()&&(this.B.innerHTML=this.v(this.k().error().message))};var O;t.j=t.a.extend({l:function(h,r,o){r=r||{},r.$c=l,t.a.call(this,h,r,o),this.featuresProgressEvents||this.ne(),this.featuresTimeupdateEvents||this.oe(),this.be(),this.featuresNativeTextTracks||this.Sd(),this.de()}}),s=t.j.prototype,s.be=function(){var h,r;h=this.k(),r=function(){h.controls()&&!h.usingNativeControls()&&this.Fd()},this.I(r),this.b(h,"controlsenabled",r),this.b(h,"controlsdisabled",this.De),this.I(function(){this.networkState&&0<this.networkState()&&this.k().o("loadstart")})},s.Fd=function(){var h;this.b("mousedown",this.u),this.b("touchstart",function(){h=this.d.userActive()}),this.b("touchmove",function(){h&&this.k().reportUserActivity()}),this.b("touchend",function(r){r.preventDefault()}),da(this),this.b("tap",this.xe)},s.De=function(){this.n("tap"),this.n("touchstart"),this.n("touchmove"),this.n("touchleave"),this.n("touchcancel"),this.n("touchend"),this.n("click"),this.n("mousedown")},s.u=function(h){h.button===0&&this.k().controls()&&(this.k().paused()?this.k().play():this.k().pause())},s.xe=function(){this.k().userActive(!this.k().userActive())},s.ne=function(){this.Qc=f,this.We()},s.me=function(){this.Qc=l,this.hd()},s.We=function(){this.Ce=this.setInterval(function(){var h=this.k().bufferedPercent();this.Jd!=h&&this.k().o("progress"),this.Jd=h,h===1&&this.hd()},500)},s.hd=function(){this.clearInterval(this.Ce)},s.oe=function(){var h=this.d;this.Vb=f,this.b(h,"play",this.md),this.b(h,"pause",this.qb),this.N("timeupdate",function(){this.featuresTimeupdateEvents=f,this.Rc()})},s.Rc=function(){var h=this.d;this.Vb=l,this.qb(),this.n(h,"play",this.md),this.n(h,"pause",this.qb)},s.md=function(){this.Bc&&this.qb(),this.Bc=this.setInterval(function(){this.k().o("timeupdate")},250)},s.qb=function(){this.clearInterval(this.Bc),this.k().o("timeupdate")},s.dispose=function(){this.Qc&&this.me(),this.Vb&&this.Rc(),t.a.prototype.dispose.call(this)},s.Zb=function(){this.Vb&&this.k().o("timeupdate")},s.de=function(){function h(){var u=r.da("textTrackDisplay");u&&u.C()}var r=this.d,o;(o=this.textTracks())&&(o.addEventListener("removetrack",h),o.addEventListener("addtrack",h),this.b("dispose",t.bind(this,function(){o.removeEventListener("removetrack",h),o.removeEventListener("addtrack",h)})))},s.Sd=function(){var h=this.d,r,o,u;window.WebVTT||(u=document.createElement("script"),u.src=h.options()["vtt.js"]||"../node_modules/vtt.js/dist/vtt.js",h.m().appendChild(u),window.WebVTT=f),(o=this.textTracks())&&(r=function(){var g,k,A;for(A=h.da("textTrackDisplay"),A.C(),g=0;g<this.length;g++)k=this[g],k.removeEventListener("cuechange",t.bind(A,A.C)),k.mode==="showing"&&k.addEventListener("cuechange",t.bind(A,A.C))},o.addEventListener("change",r),this.b("dispose",t.bind(this,function(){o.removeEventListener("change",r)})))},s.textTracks=function(){return this.d.ld=this.d.ld||new t.F,this.d.ld},s.X=function(){return this.d.Xc=this.d.Xc||new t.F,this.d.Xc},O=function(h,r,o,u,g){var k=h.textTracks();return g=g||{},g.kind=r,o&&(g.label=o),u&&(g.language=u),g.player=h.d,h=new t.t(g),P(k,h),h},t.j.prototype.addTextTrack=function(h,r,o){if(!h)throw Error("TextTrack kind is required but was not provided");return O(this,h,r,o)},t.j.prototype.ha=function(h){return h=O(this,h.kind,h.label,h.language,h),P(this.X(),h),{Y:h}},t.j.prototype.Da=function(h){Q(this.textTracks(),h),Q(this.X(),h)},t.j.prototype.bd=m(),t.j.prototype.featuresVolumeControl=f,t.j.prototype.featuresFullscreenResize=l,t.j.prototype.featuresPlaybackRate=l,t.j.prototype.featuresProgressEvents=l,t.j.prototype.featuresTimeupdateEvents=l,t.j.prototype.featuresNativeTextTracks=l,t.j.dc=function(h){h.registerSourceHandler=function(r,o){var u=h.cd;u||(u=h.cd=[]),o===b&&(o=u.length),u.splice(o,0,r)},h.ob=function(r){for(var o=h.cd||[],u,g=0;g<o.length;g++)if(u=o[g].canHandleSource(r))return o[g];return j},h.wc=function(r){var o=h.ob(r);return o?o.canHandleSource(r):""},h.prototype.ma=function(r){var o=h.ob(r);return o||(h.nativeSourceHandler?o=h.nativeSourceHandler:t.log.error("No source hander found for the current source.")),this.ia(),this.n("dispose",this.ia),this.fb=r,this.$b=o.handleSource(r,this),this.b("dispose",this.ia),this},h.prototype.ia=function(){this.$b&&this.$b.dispose&&this.$b.dispose()}},t.media={},t.f=t.j.extend({l:function(h,r,o){var u,g,k;for((r.nativeCaptions===l||r.nativeTextTracks===l)&&(this.featuresNativeTextTracks=l),t.j.call(this,h,r,o),o=t.f.xb.length-1;0<=o;o--)this.b(t.f.xb[o],this.Td);if((r=r.source)&&(this.c.currentSrc!==r.src||h.L&&h.L.ce===3)&&this.ma(r),this.c.hasChildNodes()){for(o=this.c.childNodes,u=o.length,r=[];u--;)g=o[u],k=g.nodeName.toLowerCase(),k==="track"&&(this.featuresNativeTextTracks?P(this.X(),g.track):r.push(g));for(o=0;o<r.length;o++)this.c.removeChild(r[o])}if(t.Db&&h.options().nativeControlsForTouch===f){var A,R,q,_;A=this,R=this.k(),r=R.controls(),A.c.controls=!!r,q=function(){A.c.controls=f},_=function(){A.c.controls=l},R.b("controlsenabled",q),R.b("controlsdisabled",_),r=function(){R.n("controlsenabled",q),R.n("controlsdisabled",_)},A.b("dispose",r),R.b("usingcustomcontrols",r),R.usingNativeControls(f)}h.I(function(){this.src()&&this.L&&this.q.autoplay&&this.paused()&&(delete this.L.poster,this.play())}),this.Va()}}),s=t.f.prototype,s.dispose=function(){t.f.Kb(this.c),t.j.prototype.dispose.call(this)},s.e=function(){var h=this.d,r,o,u,g=h.L;if(!g||this.movingMediaElementInDOM===l){if(g?(u=g.cloneNode(l),t.f.Kb(g),g=u,h.L=j):(g=t.e("video"),u=videojs.Z.Aa({},h.Te),(!t.Db||h.options().nativeControlsForTouch!==f)&&delete u.controls,t.ad(g,t.i.D(u,{id:h.id()+"_html5_api",class:"vjs-tech"}))),g.player=h,h.q.nd)for(u=0;u<h.q.nd.length;u++)r=h.q.nd[u],o=document.createElement("track"),o.Tb=r.Tb,o.label=r.label,o.ed=r.ed,o.src=r.src,"default"in r&&o.setAttribute("default","default"),g.appendChild(o);t.Rb(g,h.m())}for(r=["autoplay","preload","loop","muted"],u=r.length-1;0<=u;u--){o=r[u];var k={};typeof h.q[o]<"u"&&(k[o]=h.q[o]),t.ad(g,k)}return g},s.Td=function(h){h.type=="error"&&this.error()?this.k().error(this.error().code):(h.bubbles=l,this.k().o(h))},s.play=function(){this.c.play()},s.pause=function(){this.c.pause()},s.paused=function(){return this.c.paused},s.currentTime=function(){return this.c.currentTime},s.Zb=function(h){try{this.c.currentTime=h}catch(r){t.log(r,"Video is not ready. (Video.js)")}},s.duration=function(){return this.c.duration||0},s.buffered=function(){return this.c.buffered},s.volume=function(){return this.c.volume},s.Oe=function(h){this.c.volume=h},s.muted=function(){return this.c.muted},s.Ke=function(h){this.c.muted=h},s.width=function(){return this.c.offsetWidth},s.height=function(){return this.c.offsetHeight},s.Sa=function(){return typeof this.c.webkitEnterFullScreen=="function"&&(/Android/.test(t.P)||!/Chrome|Mac OS X 10.5/.test(t.P))?f:l},s.Ec=function(){var h=this.c;"webkitDisplayingFullscreen"in h&&this.N("webkitbeginfullscreen",function(){this.d.isFullscreen(f),this.N("webkitendfullscreen",function(){this.d.isFullscreen(l),this.d.o("fullscreenchange")}),this.d.o("fullscreenchange")}),h.paused&&h.networkState<=h.ef?(this.c.play(),this.setTimeout(function(){h.pause(),h.webkitEnterFullScreen()},0)):h.webkitEnterFullScreen()},s.Ud=function(){this.c.webkitExitFullScreen()};function oa(h,r){var o=/^blob\:/i;return r&&h&&o.test(h)?r:h}s.src=function(h){var r=this.c.src;if(h===b)return oa(r,this.dd);this.na(h)},s.na=function(h){this.c.src=h},s.load=function(){this.c.load()},s.currentSrc=function(){var h=this.c.currentSrc;return this.fb?oa(h,this.fb.src):h},s.poster=function(){return this.c.poster},s.bd=function(h){this.c.poster=h},s.Ra=function(){return this.c.Ra},s.Me=function(h){this.c.Ra=h},s.autoplay=function(){return this.c.autoplay},s.He=function(h){this.c.autoplay=h},s.controls=function(){return this.c.controls},s.loop=function(){return this.c.loop},s.Je=function(h){this.c.loop=h},s.error=function(){return this.c.error},s.seeking=function(){return this.c.seeking},s.seekable=function(){return this.c.seekable},s.ended=function(){return this.c.ended},s.playbackRate=function(){return this.c.playbackRate},s.Le=function(h){this.c.playbackRate=h},s.networkState=function(){return this.c.networkState},s.readyState=function(){return this.c.readyState},s.textTracks=function(){return this.featuresNativeTextTracks?this.c.textTracks:t.j.prototype.textTracks.call(this)},s.addTextTrack=function(h,r,o){return this.featuresNativeTextTracks?this.c.addTextTrack(h,r,o):t.j.prototype.addTextTrack.call(this,h,r,o)},s.ha=function(h){if(!this.featuresNativeTextTracks)return t.j.prototype.ha.call(this,h);var r=document.createElement("track");return h=h||{},h.kind&&(r.kind=h.kind),h.label&&(r.label=h.label),(h.language||h.srclang)&&(r.srclang=h.language||h.srclang),h.default&&(r.default=h.default),h.id&&(r.id=h.id),h.src&&(r.src=h.src),this.m().appendChild(r),P(this.X(),r.Y),r},s.Da=function(h){if(!this.featuresNativeTextTracks)return t.j.prototype.Da.call(this,h);var r,o;for(Q(this.X(),h),r=this.m().querySelectorAll("track"),o=0;o<r.length;o++)if(r[o]===h||r[o].track===h){r[o].parentNode.removeChild(r[o]);break}},t.f.isSupported=function(){try{t.A.volume=.5}catch{return l}return!!t.A.canPlayType},t.j.dc(t.f);var pa=t.f.prototype.ma,qa=t.f.prototype.ia;t.f.prototype.ma=function(h){var r=pa.call(this,h);return this.dd=h.src,r},t.f.prototype.ia=function(){return this.dd=b,qa.call(this)},t.f.nativeSourceHandler={},t.f.nativeSourceHandler.canHandleSource=function(h){function r(o){try{return t.A.canPlayType(o)}catch{return""}}return h.type?r(h.type):h.src?(h=(h=h.src.match(/\.([^.\/\?]+)(\?[^\/]+)?$/i))&&h[1],r("video/"+h)):""},t.f.nativeSourceHandler.handleSource=function(h,r){r.na(h.src)},t.f.nativeSourceHandler.dispose=m(),t.f.registerSourceHandler(t.f.nativeSourceHandler),t.f.Ld=function(){var h=t.A.volume;return t.A.volume=h/2+.1,h!==t.A.volume},t.f.Kd=function(){var h=t.A.playbackRate;return t.A.playbackRate=h/2+.1,h!==t.A.playbackRate},t.f.Re=function(){var h;return(h=!!t.A.textTracks)&&0<t.A.textTracks.length&&(h=typeof t.A.textTracks[0].mode!="number"),h&&t.gc&&(h=l),h},t.f.prototype.featuresVolumeControl=t.f.Ld(),t.f.prototype.featuresPlaybackRate=t.f.Kd(),t.f.prototype.movingMediaElementInDOM=!t.xd,t.f.prototype.featuresFullscreenResize=f,t.f.prototype.featuresProgressEvents=f,t.f.prototype.featuresNativeTextTracks=t.f.Re();var S,ra=/^application\/(?:x-|vnd\.apple\.)mpegurl/i,sa=/^video\/mp4/i;t.f.Tc=function(){4<=t.ec&&(S||(S=t.A.constructor.prototype.canPlayType),t.A.constructor.prototype.canPlayType=function(h){return h&&ra.test(h)?"maybe":S.call(this,h)}),t.Bd&&(S||(S=t.A.constructor.prototype.canPlayType),t.A.constructor.prototype.canPlayType=function(h){return h&&sa.test(h)?"maybe":S.call(this,h)})},t.f.Ye=function(){var h=t.A.constructor.prototype.canPlayType;return t.A.constructor.prototype.canPlayType=S,S=j,h},t.f.Tc(),t.f.xb="loadstart suspend abort error emptied stalled loadedmetadata loadeddata canplay canplaythrough playing waiting seeking seeked ended durationchange timeupdate progress play pause ratechange volumechange".split(" "),t.f.Kb=function(h){if(h){for(h.player=j,h.parentNode&&h.parentNode.removeChild(h);h.hasChildNodes();)h.removeChild(h.firstChild);if(h.removeAttribute("src"),typeof h.load=="function")try{h.load()}catch{}}},t.g=t.j.extend({l:function(h,r,o){t.j.call(this,h,r,o);var u=r.source;o=h.id()+"_flash_api";var g=h.q,g=t.i.D({readyFunction:"videojs.Flash.onReady",eventProxyFunction:"videojs.Flash.onEvent",errorEventProxyFunction:"videojs.Flash.onError",autoplay:g.autoplay,preload:g.Ra,loop:g.loop,muted:g.muted},r.flashVars),k=t.i.D({wmode:"opaque",bgcolor:"#000000"},r.params);o=t.i.D({id:o,name:o,class:"vjs-tech"},r.attributes),u&&this.I(function(){this.ma(u)}),t.Rb(this.c,r.parentEl),r.startTime&&this.I(function(){this.load(),this.play(),this.currentTime(r.startTime)}),t.gc&&this.I(function(){this.b("mousemove",function(){this.k().o({type:"mousemove",bubbles:l})})}),h.b("stageclick",h.reportUserActivity),this.c=t.g.Dc(r.swf,this.c,g,k,o)}}),s=t.g.prototype,s.dispose=function(){t.j.prototype.dispose.call(this)},s.play=function(){this.ended()&&this.setCurrentTime(0),this.c.vjs_play()},s.pause=function(){this.c.vjs_pause()},s.src=function(h){return h===b?this.currentSrc():this.na(h)},s.na=function(h){if(h=t.Xd(h),this.c.vjs_src(h),this.d.autoplay()){var r=this;this.setTimeout(function(){r.play()},0)}},t.g.prototype.setCurrentTime=function(h){this.ke=h,this.c.vjs_setProperty("currentTime",h),t.j.prototype.Zb.call(this)},t.g.prototype.currentTime=function(){return this.seeking()?this.ke||0:this.c.vjs_getProperty("currentTime")},t.g.prototype.currentSrc=function(){return this.fb?this.fb.src:this.c.vjs_getProperty("currentSrc")},t.g.prototype.load=function(){this.c.vjs_load()},t.g.prototype.poster=function(){this.c.vjs_getProperty("poster")},t.g.prototype.setPoster=m(),s=t.g.prototype,s.seekable=function(){return this.duration()===0?t.xa():t.xa(0,this.duration())},s.buffered=function(){return this.c.vjs_getProperty?t.xa(0,this.c.vjs_getProperty("buffered")):t.xa()},s.duration=function(){return this.c.vjs_getProperty?this.c.vjs_getProperty("duration"):0},s.Sa=p(l),s.Ec=p(l);function ta(){var h=T[U],r=h.charAt(0).toUpperCase()+h.slice(1);ua["set"+r]=function(o){return this.c.vjs_setProperty(h,o)}}function va(h){ua[h]=function(){return this.c.vjs_getProperty(h)}}var ua=t.g.prototype,T="rtmpConnection rtmpStream preload defaultPlaybackRate playbackRate autoplay loop mediaGroup controller controls volume muted defaultMuted".split(" "),wa="error networkState readyState seeking initialTime startOffsetTime paused played ended videoTracks audioTracks videoWidth videoHeight".split(" "),U;for(U=0;U<T.length;U++)va(T[U]),ta();for(U=0;U<wa.length;U++)va(wa[U]);t.g.isSupported=function(){return 10<=t.g.version()[0]},t.j.dc(t.g),t.g.nativeSourceHandler={},t.g.nativeSourceHandler.canHandleSource=function(h){return h.type&&h.type.replace(/;.*/,"").toLowerCase()in t.g.Wd?"maybe":""},t.g.nativeSourceHandler.handleSource=function(h,r){r.na(h.src)},t.g.nativeSourceHandler.dispose=m(),t.g.registerSourceHandler(t.g.nativeSourceHandler),t.g.Wd={"video/flv":"FLV","video/x-flv":"FLV","video/mp4":"MP4","video/m4v":"MP4"},t.g.onReady=function(h){var r;(r=(h=t.m(h))&&h.parentNode&&h.parentNode.player)&&(h.player=r,t.g.checkReady(r.h))},t.g.checkReady=function(h){h.m()&&(h.m().vjs_getProperty?h.Va():this.setTimeout(function(){t.g.checkReady(h)},50))},t.g.onEvent=function(h,r){t.m(h).player.o(r)},t.g.onError=function(h,r){var o=t.m(h).player,u="FLASH: "+r;r=="srcnotfound"?o.error({code:4,message:u}):o.error(u)},t.g.version=function(){var h="0,0,0";try{h=new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version").replace(/\D+/g,",").match(/^,?(.+),?$/)[1]}catch{try{navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin&&(h=(navigator.plugins["Shockwave Flash 2.0"]||navigator.plugins["Shockwave Flash"]).description.replace(/\D+/g,",").match(/^,?(.+),?$/)[1])}catch{}}return h.split(",")},t.g.Dc=function(h,r,o,u,g){h=t.g.$d(h,o,u,g),h=t.e("div",{innerHTML:h}).childNodes[0],o=r.parentNode,r.parentNode.replaceChild(h,r),h[t.expando]=r[t.expando];var k=o.childNodes[0];return setTimeout(function(){k.style.display="block"},1e3),h},t.g.$d=function(h,r,o,u){var g="",k="",A="";return r&&t.i.ca(r,function(R,q){g+=R+"="+q+"&amp;"}),o=t.i.D({movie:h,flashvars:g,allowScriptAccess:"always",allowNetworking:"all"},o),t.i.ca(o,function(R,q){k+='<param name="'+R+'" value="'+q+'" />'}),u=t.i.D({data:h,width:"100%",height:"100%"},u),t.i.ca(u,function(R,q){A+=R+'="'+q+'" '}),'<object type="application/x-shockwave-flash" '+A+">"+k+"</object>"},t.g.Qe={"rtmp/mp4":"MP4","rtmp/flv":"FLV"},t.g.Df=function(h,r){return h+"&"+r},t.g.Pe=function(h){var r={yc:"",jd:""};if(!h)return r;var o=h.indexOf("&"),u;return o!==-1?u=o+1:(o=u=h.lastIndexOf("/")+1,o===0&&(o=u=h.length)),r.yc=h.substring(0,o),r.jd=h.substring(u,h.length),r},t.g.ie=function(h){return h in t.g.Qe},t.g.Dd=/^rtmp[set]?:\/\//i,t.g.he=function(h){return t.g.Dd.test(h)},t.g.Yb={},t.g.Yb.canHandleSource=function(h){return t.g.ie(h.type)||t.g.he(h.src)?"maybe":""},t.g.Yb.handleSource=function(h,r){var o=t.g.Pe(h.src);r.setRtmpConnection(o.yc),r.setRtmpStream(o.jd)},t.g.registerSourceHandler(t.g.Yb),t.Cd=t.a.extend({l:function(h,r,o){if(t.a.call(this,h,r,o),!h.q.sources||h.q.sources.length===0)for(r=0,o=h.q.techOrder;r<o.length;r++){var u=t.va(o[r]),g=window.videojs[u];if(g&&g.isSupported()){ka(h,u);break}}else h.src(h.q.sources)}}),t.oc={disabled:"disabled",hidden:"hidden",showing:"showing"},t.Ed={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},t.t=function(h){var r,o,u,g,k,A,R,q,_,ee,te;if(h=h||{},!h.player)throw Error("A player was not provided.");if(r=this,t.pa)for(te in r=document.createElement("custom"),t.t.prototype)r[te]=t.t.prototype[te];if(r.d=h.player,u=t.oc[h.mode]||"disabled",g=t.Ed[h.kind]||"subtitles",k=h.label||"",A=h.language||h.srclang||"",o=h.id||"vjs_text_track_"+t.s++,(g==="metadata"||g==="chapters")&&(u="hidden"),r.V=[],r.Ia=[],R=new t.U(r.V),q=new t.U(r.Ia),ee=l,_=t.bind(r,function(){this.activeCues,ee&&(this.trigger("cuechange"),ee=l)}),u!=="disabled"&&r.d.b("timeupdate",_),Object.defineProperty(r,"kind",{get:function(){return g},set:Function.prototype}),Object.defineProperty(r,"label",{get:function(){return k},set:Function.prototype}),Object.defineProperty(r,"language",{get:function(){return A},set:Function.prototype}),Object.defineProperty(r,"id",{get:function(){return o},set:Function.prototype}),Object.defineProperty(r,"mode",{get:function(){return u},set:function(ne){t.oc[ne]&&(u=ne,u==="showing"&&this.d.b("timeupdate",_),this.o("modechange"))}}),Object.defineProperty(r,"cues",{get:function(){return this.Ub?R:j},set:Function.prototype}),Object.defineProperty(r,"activeCues",{get:function(){var ne,re,oe,le,pe;if(!this.Ub)return j;if(this.cues.length===0)return q;for(le=this.d.currentTime(),ne=0,re=this.cues.length,oe=[];ne<re;ne++)pe=this.cues[ne],(pe.startTime<=le&&pe.endTime>=le||pe.startTime===pe.endTime&&pe.startTime<=le&&pe.startTime+.5>=le)&&oe.push(pe);if(ee=l,oe.length!==this.Ia.length)ee=f;else for(ne=0;ne<oe.length;ne++)xa.call(this.Ia,oe[ne])===-1&&(ee=f);return this.Ia=oe,q.pb(this.Ia),q},set:Function.prototype}),h.src?ya(h.src,r):r.Ub=f,t.pa)return r},t.t.prototype=t.i.create(t.z.prototype),t.t.prototype.constructor=t.t,t.t.prototype.ab={cuechange:"cuechange"},t.t.prototype.sc=function(h){var r=this.d.textTracks(),o=0;if(r)for(;o<r.length;o++)r[o]!==this&&r[o].Yc(h);this.V.push(h),this.cues.pb(this.V)},t.t.prototype.Yc=function(h){for(var r=0,o=this.V.length,u,g=l;r<o;r++)u=this.V[r],u===h&&(this.V.splice(r,1),g=f);g&&this.Ac.pb(this.V)};var ya,V,xa;ya=function(h,r){t.bf(h,t.bind(this,function(o,u,g){if(o)return t.log.error(o);r.Ub=f,V(g,r)}))},V=function(h,r){if(typeof window.WebVTT!="function")window.setTimeout(function(){V(h,r)},25);else{var o=new window.WebVTT.Parser(window,window.vttjs,window.WebVTT.StringDecoder());o.oncue=function(u){r.sc(u)},o.onparsingerror=function(u){t.log.error(u)},o.parse(h),o.flush()}},xa=function(h,r){var o;if(this==j)throw new TypeError('"this" is null or not defined');var u=Object(this),g=u.length>>>0;if(g===0||(o=+r||0,Math.abs(o)===1/0&&(o=0),o>=g))return-1;for(o=Math.max(0<=o?o:g-Math.abs(o),0);o<g;){if(o in u&&u[o]===h)return o;o++}return-1},t.F=function(h){var r=this,o,u=0;if(t.pa)for(o in r=document.createElement("custom"),t.F.prototype)r[o]=t.F.prototype[o];for(h=h||[],r.Ua=[],Object.defineProperty(r,"length",{get:function(){return this.Ua.length}});u<h.length;u++)P(r,h[u]);if(t.pa)return r},t.F.prototype=t.i.create(t.z.prototype),t.F.prototype.constructor=t.F,t.F.prototype.ab={change:"change",addtrack:"addtrack",removetrack:"removetrack"};for(var za in t.F.prototype.ab)t.F.prototype["on"+za]=j;function P(h,r){var o=h.Ua.length;""+o in h||Object.defineProperty(h,o,{get:function(){return this.Ua[o]}}),r.addEventListener("modechange",t.bind(h,function(){this.o("change")})),h.Ua.push(r),h.o({type:"addtrack",Y:r})}function Q(h,r){for(var o=0,u=h.length,g;o<u;o++)if(g=h[o],g===r){h.Ua.splice(o,1);break}h.o({type:"removetrack",Y:r})}t.F.prototype.ae=function(h){for(var r=0,o=this.length,u=j,g;r<o;r++)if(g=this[r],g.id===h){u=g;break}return u},t.U=function(h){var r=this,o;if(t.pa)for(o in r=document.createElement("custom"),t.U.prototype)r[o]=t.U.prototype[o];if(t.U.prototype.pb.call(r,h),Object.defineProperty(r,"length",{get:n("le")}),t.pa)return r},t.U.prototype.pb=function(h){var r=this.length||0,o=0,u=h.length;if(this.V=h,this.le=h.length,h=function(g){""+g in this||Object.defineProperty(this,""+g,{get:function(){return this.V[g]}})},r<u)for(o=r;o<u;o++)h.call(this,o)},t.U.prototype.Zd=function(h){for(var r=0,o=this.length,u=j,g;r<o;r++)if(g=this[r],g.id===h){u=g;break}return u},t.sa=t.a.extend({l:function(h,r,o){t.a.call(this,h,r,o),h.b("loadstart",t.bind(this,this.Ve)),h.I(t.bind(this,function(){if(h.h&&h.h.featuresNativeTextTracks)this.W();else{var u,g,k;for(h.b("fullscreenchange",t.bind(this,this.C)),g=h.q.tracks||[],u=0;u<g.length;u++)k=g[u],this.d.ha(k)}}))}}),t.sa.prototype.Ve=function(){this.d.h&&this.d.h.featuresNativeTextTracks?this.W():this.show()},t.sa.prototype.e=function(){return t.a.prototype.e.call(this,"div",{className:"vjs-text-track-display"})},t.sa.prototype.Md=function(){typeof window.WebVTT=="function"&&window.WebVTT.processCues(window,[],this.c)};function W(h,r){return"rgba("+parseInt(h[1]+h[1],16)+","+parseInt(h[2]+h[2],16)+","+parseInt(h[3]+h[3],16)+","+r+")"}var Aa={tf:"monospace",zf:"sans-serif",Bf:"serif",uf:'"Andale Mono", "Lucida Console", monospace',vf:'"Courier New", monospace',xf:"sans-serif",yf:"serif",kf:'"Comic Sans MS", Impact, fantasy',Af:'"Monotype Corsiva", cursive',Cf:'"Andale Mono", "Lucida Console", monospace, sans-serif'};t.sa.prototype.C=function(){var h=this.d.textTracks(),r=0,o;if(this.Md(),h)for(;r<h.length;r++)o=h[r],o.mode==="showing"&&this.Ze(o)},t.sa.prototype.Ze=function(h){if(typeof window.WebVTT=="function"&&h.activeCues){for(var r=0,o=this.d.textTrackSettings.Hc(),u,g=[];r<h.activeCues.length;r++)g.push(h.activeCues[r]);for(window.WebVTT.processCues(window,h.activeCues,this.c),r=g.length;r--;){if(h=g[r].lf,o.color&&(h.firstChild.style.color=o.color),o.kd)try{h.firstChild.style.color=W(o.color||"#fff",o.kd)}catch{}if(o.backgroundColor&&(h.firstChild.style.backgroundColor=o.backgroundColor),o.vc)try{h.firstChild.style.backgroundColor=W(o.backgroundColor||"#000",o.vc)}catch{}if(o.cc)if(o.rd)try{h.style.backgroundColor=W(o.cc,o.rd)}catch{}else h.style.backgroundColor=o.cc;o.Ma&&(o.Ma==="dropshadow"?h.firstChild.style.textShadow="2px 2px 3px #222, 2px 2px 4px #222, 2px 2px 5px #222":o.Ma==="raised"?h.firstChild.style.textShadow="1px 1px #222, 2px 2px #222, 3px 3px #222":o.Ma==="depressed"?h.firstChild.style.textShadow="1px 1px #ccc, 0 1px #ccc, -1px -1px #222, 0 -1px #222":o.Ma==="uniform"&&(h.firstChild.style.textShadow="0 0 4px #222, 0 0 4px #222, 0 0 4px #222, 0 0 4px #222")),o.Ob&&o.Ob!==1&&(u=window.wf(h.style.fontSize),h.style.fontSize=u*o.Ob+"px",h.style.height="auto",h.style.top="auto",h.style.bottom="2px"),o.fontFamily&&o.fontFamily!=="default"&&(o.fontFamily==="small-caps"?h.firstChild.style.fontVariant="small-caps":h.firstChild.style.fontFamily=Aa[o.fontFamily])}}},t.$=t.M.extend({l:function(h,r){var o=this.Y=r.track,u=h.textTracks(),g,k;u&&(g=t.bind(this,function(){var A=this.Y.mode==="showing",R,q,_;if(this instanceof t.zb){for(A=f,q=0,_=u.length;q<_;q++)if(R=u[q],R.kind===this.Y.kind&&R.mode==="showing"){A=l;break}}this.selected(A)}),u.addEventListener("change",g),h.b("dispose",function(){u.removeEventListener("change",g)})),r.label=o.label||o.language||"Unknown",r.selected=o.default||o.mode==="showing",t.M.call(this,h,r),u&&u.onchange===b&&this.b(["tap","click"],function(){if(typeof window.vd!="object")try{k=new window.vd("change")}catch{}k||(k=document.createEvent("Event"),k.initEvent("change",f,f)),u.dispatchEvent(k)})}}),t.$.prototype.u=function(){var h=this.Y.kind,r=this.d.textTracks(),o,u=0;if(t.M.prototype.u.call(this),r)for(;u<r.length;u++)o=r[u],o.kind===h&&(o.mode=o===this.Y?"showing":"disabled")},t.zb=t.$.extend({l:function(h,r){r.track={kind:r.kind,player:h,label:r.kind+" off",default:l,mode:"disabled"},t.$.call(this,h,r),this.selected(f)}}),t.sb=t.$.extend({l:function(h,r){r.track={kind:r.kind,player:h,label:r.kind+" settings",default:l,mode:"disabled"},t.$.call(this,h,r),this.p("vjs-texttrack-settings")}}),t.sb.prototype.u=function(){this.k().da("textTrackSettings").show()},t.Q=t.O.extend({l:function(h,r){var o,u;t.O.call(this,h,r),o=this.d.textTracks(),1>=this.H.length&&this.W(),o&&(u=t.bind(this,this.update),o.addEventListener("removetrack",u),o.addEventListener("addtrack",u),this.d.b("dispose",function(){o.removeEventListener("removetrack",u),o.removeEventListener("addtrack",u)}))}}),t.Q.prototype.Ka=function(){var h=[],r,o;if(this instanceof t.oa&&(!this.k().h||!this.k().h.featuresNativeTextTracks)&&h.push(new t.sb(this.d,{kind:this.ea})),h.push(new t.zb(this.d,{kind:this.ea})),o=this.d.textTracks(),!o)return h;for(var u=0;u<o.length;u++)r=o[u],r.kind===this.ea&&h.push(new t.$(this.d,{track:r}));return h},t.oa=t.Q.extend({l:function(h,r,o){t.Q.call(this,h,r,o),this.c.setAttribute("aria-label","Captions Menu")}}),t.oa.prototype.ea="captions",t.oa.prototype.ta="Captions",t.oa.prototype.className="vjs-captions-button",t.oa.prototype.update=function(){var h=2;t.Q.prototype.update.call(this),this.k().h&&this.k().h.featuresNativeTextTracks&&(h=1),this.H&&this.H.length>h?this.show():this.W()},t.$a=t.Q.extend({l:function(h,r,o){t.Q.call(this,h,r,o),this.c.setAttribute("aria-label","Subtitles Menu")}}),t.$a.prototype.ea="subtitles",t.$a.prototype.ta="Subtitles",t.$a.prototype.className="vjs-subtitles-button",t.Wa=t.Q.extend({l:function(h,r,o){t.Q.call(this,h,r,o),this.c.setAttribute("aria-label","Chapters Menu")}}),s=t.Wa.prototype,s.ea="chapters",s.ta="Chapters",s.className="vjs-chapters-button",s.Ka=function(){var h=[],r,o;if(o=this.d.textTracks(),!o)return h;for(var u=0;u<o.length;u++)r=o[u],r.kind===this.ea&&h.push(new t.$(this.d,{track:r}));return h},s.La=function(){for(var h=this.d.textTracks()||[],r=0,o=h.length,u,g,k=this.H=[];r<o;r++)if(u=h[r],u.kind==this.ea)if(u.Ac){g=u;break}else u.mode="hidden",window.setTimeout(t.bind(this,function(){this.La()}),100);if(h=this.za,h===b&&(h=new t.qa(this.d),h.wa().appendChild(t.e("li",{className:"vjs-menu-title",innerHTML:t.va(this.ea),Se:-1}))),g){u=g.cues;for(var A,r=0,o=u.length;r<o;r++)A=u[r],A=new t.Xa(this.d,{track:g,cue:A}),k.push(A),h.aa(A);this.aa(h)}return 0<this.H.length&&this.show(),h},t.Xa=t.M.extend({l:function(h,r){var o=this.Y=r.track,u=this.cue=r.cue,g=h.currentTime();r.label=u.text,r.selected=u.startTime<=g&&g<u.endTime,t.M.call(this,h,r),o.addEventListener("cuechange",t.bind(this,this.update))}}),t.Xa.prototype.u=function(){t.M.prototype.u.call(this),this.d.currentTime(this.cue.startTime),this.update(this.cue.startTime)},t.Xa.prototype.update=function(){var h=this.cue,r=this.d.currentTime();this.selected(h.startTime<=r&&r<h.endTime)};function X(h){var r;return h.Ge?r=h.Ge[0]:h.options&&(r=h.options[h.options.selectedIndex]),r.value}function Y(h,r){var o,u;if(r){for(o=0;o<h.options.length&&(u=h.options[o],u.value!==r);o++);h.selectedIndex=o}}if(t.pc=t.a.extend({l:function(h,r){t.a.call(this,h,r),this.W(),t.b(this.m().querySelector(".vjs-done-button"),"click",t.bind(this,function(){this.Fe(),this.W()})),t.b(this.m().querySelector(".vjs-default-button"),"click",t.bind(this,function(){this.m().querySelector(".vjs-fg-color > select").selectedIndex=0,this.m().querySelector(".vjs-bg-color > select").selectedIndex=0,this.m().querySelector(".window-color > select").selectedIndex=0,this.m().querySelector(".vjs-text-opacity > select").selectedIndex=0,this.m().querySelector(".vjs-bg-opacity > select").selectedIndex=0,this.m().querySelector(".vjs-window-opacity > select").selectedIndex=0,this.m().querySelector(".vjs-edge-style select").selectedIndex=0,this.m().querySelector(".vjs-font-family select").selectedIndex=0,this.m().querySelector(".vjs-font-percent select").selectedIndex=2,this.C()})),t.b(this.m().querySelector(".vjs-fg-color > select"),"change",t.bind(this,this.C)),t.b(this.m().querySelector(".vjs-bg-color > select"),"change",t.bind(this,this.C)),t.b(this.m().querySelector(".window-color > select"),"change",t.bind(this,this.C)),t.b(this.m().querySelector(".vjs-text-opacity > select"),"change",t.bind(this,this.C)),t.b(this.m().querySelector(".vjs-bg-opacity > select"),"change",t.bind(this,this.C)),t.b(this.m().querySelector(".vjs-window-opacity > select"),"change",t.bind(this,this.C)),t.b(this.m().querySelector(".vjs-font-percent select"),"change",t.bind(this,this.C)),t.b(this.m().querySelector(".vjs-edge-style select"),"change",t.bind(this,this.C)),t.b(this.m().querySelector(".vjs-font-family select"),"change",t.bind(this,this.C)),h.options().persistTextTrackSettings&&this.Ee()}}),s=t.pc.prototype,s.e=function(){return t.a.prototype.e.call(this,"div",{className:"vjs-caption-settings vjs-modal-overlay",innerHTML:'<div class="vjs-tracksettings"><div class="vjs-tracksettings-colors"><div class="vjs-fg-color vjs-tracksetting"><label class="vjs-label">Foreground</label><select><option value="">---</option><option value="#FFF">White</option><option value="#000">Black</option><option value="#F00">Red</option><option value="#0F0">Green</option><option value="#00F">Blue</option><option value="#FF0">Yellow</option><option value="#F0F">Magenta</option><option value="#0FF">Cyan</option></select><span class="vjs-text-opacity vjs-opacity"><select><option value="">---</option><option value="1">Opaque</option><option value="0.5">Semi-Opaque</option></select></span></div><div class="vjs-bg-color vjs-tracksetting"><label class="vjs-label">Background</label><select><option value="">---</option><option value="#FFF">White</option><option value="#000">Black</option><option value="#F00">Red</option><option value="#0F0">Green</option><option value="#00F">Blue</option><option value="#FF0">Yellow</option><option value="#F0F">Magenta</option><option value="#0FF">Cyan</option></select><span class="vjs-bg-opacity vjs-opacity"><select><option value="">---</option><option value="1">Opaque</option><option value="0.5">Semi-Transparent</option><option value="0">Transparent</option></select></span></div><div class="window-color vjs-tracksetting"><label class="vjs-label">Window</label><select><option value="">---</option><option value="#FFF">White</option><option value="#000">Black</option><option value="#F00">Red</option><option value="#0F0">Green</option><option value="#00F">Blue</option><option value="#FF0">Yellow</option><option value="#F0F">Magenta</option><option value="#0FF">Cyan</option></select><span class="vjs-window-opacity vjs-opacity"><select><option value="">---</option><option value="1">Opaque</option><option value="0.5">Semi-Transparent</option><option value="0">Transparent</option></select></span></div></div><div class="vjs-tracksettings-font"><div class="vjs-font-percent vjs-tracksetting"><label class="vjs-label">Font Size</label><select><option value="0.50">50%</option><option value="0.75">75%</option><option value="1.00" selected>100%</option><option value="1.25">125%</option><option value="1.50">150%</option><option value="1.75">175%</option><option value="2.00">200%</option><option value="3.00">300%</option><option value="4.00">400%</option></select></div><div class="vjs-edge-style vjs-tracksetting"><label class="vjs-label">Text Edge Style</label><select><option value="none">None</option><option value="raised">Raised</option><option value="depressed">Depressed</option><option value="uniform">Uniform</option><option value="dropshadow">Dropshadow</option></select></div><div class="vjs-font-family vjs-tracksetting"><label class="vjs-label">Font Family</label><select><option value="">Default</option><option value="monospaceSerif">Monospace Serif</option><option value="proportionalSerif">Proportional Serif</option><option value="monospaceSansSerif">Monospace Sans-Serif</option><option value="proportionalSansSerif">Proportional Sans-Serif</option><option value="casual">Casual</option><option value="script">Script</option><option value="small-caps">Small Caps</option></select></div></div></div><div class="vjs-tracksettings-controls"><button class="vjs-default-button">Defaults</button><button class="vjs-done-button">Done</button></div>'})},s.Hc=function(){var h,r,o,u,g,k,A,R,q,_;h=this.m(),g=X(h.querySelector(".vjs-edge-style select")),k=X(h.querySelector(".vjs-font-family select")),A=X(h.querySelector(".vjs-fg-color > select")),o=X(h.querySelector(".vjs-text-opacity > select")),R=X(h.querySelector(".vjs-bg-color > select")),r=X(h.querySelector(".vjs-bg-opacity > select")),q=X(h.querySelector(".window-color > select")),u=X(h.querySelector(".vjs-window-opacity > select")),h=window.parseFloat(X(h.querySelector(".vjs-font-percent > select"))),r={backgroundOpacity:r,textOpacity:o,windowOpacity:u,edgeStyle:g,fontFamily:k,color:A,backgroundColor:R,windowColor:q,fontPercent:h};for(_ in r)(r[_]===""||r[_]==="none"||_==="fontPercent"&&r[_]===1)&&delete r[_];return r},s.Ne=function(h){var r=this.m();Y(r.querySelector(".vjs-edge-style select"),h.Ma),Y(r.querySelector(".vjs-font-family select"),h.fontFamily),Y(r.querySelector(".vjs-fg-color > select"),h.color),Y(r.querySelector(".vjs-text-opacity > select"),h.kd),Y(r.querySelector(".vjs-bg-color > select"),h.backgroundColor),Y(r.querySelector(".vjs-bg-opacity > select"),h.vc),Y(r.querySelector(".window-color > select"),h.cc),Y(r.querySelector(".vjs-window-opacity > select"),h.rd),(h=h.Ob)&&(h=h.toFixed(2)),Y(r.querySelector(".vjs-font-percent > select"),h)},s.Ee=function(){var h;try{h=JSON.parse(window.localStorage.getItem("vjs-text-track-settings"))}catch{}h&&this.Ne(h)},s.Fe=function(){var h;if(this.d.options().persistTextTrackSettings){h=this.Hc();try{t.hb(h)?window.localStorage.removeItem("vjs-text-track-settings"):window.localStorage.setItem("vjs-text-track-settings",JSON.stringify(h))}catch{}}},s.C=function(){var h=this.d.da("textTrackDisplay");h&&h.C()},typeof window.JSON<"u"&&typeof window.JSON.parse=="function")t.JSON=window.JSON;else{t.JSON={};var Z=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;t.JSON.parse=function(a,c){function d(h,r){var o,u,g=h[r];if(g&&typeof g=="object")for(o in g)Object.prototype.hasOwnProperty.call(g,o)&&(u=d(g,o),u!==b?g[o]=u:delete g[o]);return c.call(h,r,g)}var e;if(a=String(a),Z.lastIndex=0,Z.test(a)&&(a=a.replace(Z,function(h){return"\\u"+("0000"+h.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return e=eval("("+a+")"),typeof c=="function"?d({"":e},""):e;throw new SyntaxError("JSON.parse(): invalid or malformed JSON data")}}t.uc=function(){var h,r,o,u;h=document.getElementsByTagName("video"),r=document.getElementsByTagName("audio");var g=[];if(h&&0<h.length)for(o=0,u=h.length;o<u;o++)g.push(h[o]);if(r&&0<r.length)for(o=0,u=r.length;o<u;o++)g.push(r[o]);if(g&&0<g.length)for(o=0,u=g.length;o<u;o++)if((r=g[o])&&r.getAttribute)r.player===b&&(h=r.getAttribute("data-setup"),h!==j&&videojs(r));else{t.Hb();break}else t.qd||t.Hb()},t.Hb=function(){setTimeout(t.uc,1)},document.readyState==="complete"?t.qd=f:t.N(window,"load",function(){t.qd=f}),t.Hb(),t.Be=function(h,r){t.Player.prototype[h]=r};var Ba=typeof window<"u"?window:typeof globalThis<"u"?globalThis:this;function $(h,r){var o=h.split("."),u=Ba;!(o[0]in u)&&u.execScript&&u.execScript("var "+o[0]);for(var g;o.length&&(g=o.shift());)!o.length&&r!==b?u[g]=r:u=u[g]?u[g]:u[g]={}}$("videojs",t),$("_V_",t),$("videojs.options",t.options),$("videojs.players",t.Ca),$("videojs.TOUCH_ENABLED",t.Db),$("videojs.cache",t.ua),$("videojs.Component",t.a),t.a.prototype.player=t.a.prototype.k,t.a.prototype.options=t.a.prototype.options,t.a.prototype.init=t.a.prototype.l,t.a.prototype.dispose=t.a.prototype.dispose,t.a.prototype.createEl=t.a.prototype.e,t.a.prototype.contentEl=t.a.prototype.wa,t.a.prototype.el=t.a.prototype.m,t.a.prototype.addChild=t.a.prototype.aa,t.a.prototype.getChild=t.a.prototype.da,t.a.prototype.getChildById=t.a.prototype.Yd,t.a.prototype.children=t.a.prototype.children,t.a.prototype.initChildren=t.a.prototype.Kc,t.a.prototype.removeChild=t.a.prototype.removeChild,t.a.prototype.on=t.a.prototype.b,t.a.prototype.off=t.a.prototype.n,t.a.prototype.one=t.a.prototype.N,t.a.prototype.trigger=t.a.prototype.o,t.a.prototype.triggerReady=t.a.prototype.Va,t.a.prototype.show=t.a.prototype.show,t.a.prototype.hide=t.a.prototype.W,t.a.prototype.width=t.a.prototype.width,t.a.prototype.height=t.a.prototype.height,t.a.prototype.dimensions=t.a.prototype.Qd,t.a.prototype.ready=t.a.prototype.I,t.a.prototype.addClass=t.a.prototype.p,t.a.prototype.removeClass=t.a.prototype.r,t.a.prototype.hasClass=t.a.prototype.Pa,t.a.prototype.buildCSSClass=t.a.prototype.T,t.a.prototype.localize=t.a.prototype.v,t.a.prototype.setInterval=t.a.prototype.setInterval,t.a.prototype.setTimeout=t.a.prototype.setTimeout,$("videojs.EventEmitter",t.z),t.z.prototype.on=t.z.prototype.b,t.z.prototype.addEventListener=t.z.prototype.addEventListener,t.z.prototype.off=t.z.prototype.n,t.z.prototype.removeEventListener=t.z.prototype.removeEventListener,t.z.prototype.one=t.z.prototype.N,t.z.prototype.trigger=t.z.prototype.o,t.z.prototype.dispatchEvent=t.z.prototype.dispatchEvent,t.Player.prototype.ended=t.Player.prototype.ended,t.Player.prototype.enterFullWindow=t.Player.prototype.Fc,t.Player.prototype.exitFullWindow=t.Player.prototype.Lb,t.Player.prototype.preload=t.Player.prototype.Ra,t.Player.prototype.remainingTime=t.Player.prototype.remainingTime,t.Player.prototype.supportsFullScreen=t.Player.prototype.Sa,t.Player.prototype.currentType=t.Player.prototype.Nd,t.Player.prototype.requestFullScreen=t.Player.prototype.requestFullScreen,t.Player.prototype.requestFullscreen=t.Player.prototype.requestFullscreen,t.Player.prototype.cancelFullScreen=t.Player.prototype.cancelFullScreen,t.Player.prototype.exitFullscreen=t.Player.prototype.exitFullscreen,t.Player.prototype.isFullScreen=t.Player.prototype.isFullScreen,t.Player.prototype.isFullscreen=t.Player.prototype.isFullscreen,t.Player.prototype.textTracks=t.Player.prototype.textTracks,t.Player.prototype.remoteTextTracks=t.Player.prototype.X,t.Player.prototype.addTextTrack=t.Player.prototype.addTextTrack,t.Player.prototype.addRemoteTextTrack=t.Player.prototype.ha,t.Player.prototype.removeRemoteTextTrack=t.Player.prototype.Da,t.Player.prototype.seekable=t.Player.prototype.seekable,$("videojs.MediaLoader",t.Cd),$("videojs.TextTrackDisplay",t.sa),$("videojs.ControlBar",t.tb),$("videojs.Button",t.w),$("videojs.PlayToggle",t.kc),$("videojs.FullscreenToggle",t.Ya),$("videojs.BigPlayButton",t.rb),$("videojs.LoadingSpinner",t.ic),$("videojs.CurrentTimeDisplay",t.ub),$("videojs.DurationDisplay",t.vb),$("videojs.TimeDivider",t.qc),$("videojs.RemainingTimeDisplay",t.Cb),$("videojs.LiveDisplay",t.hc),$("videojs.ErrorDisplay",t.wb),$("videojs.Slider",t.S),$("videojs.ProgressControl",t.Bb),$("videojs.SeekBar",t.nc),$("videojs.LoadProgressBar",t.yb),$("videojs.PlayProgressBar",t.jc),$("videojs.SeekHandle",t.Za),$("videojs.VolumeControl",t.Fb),$("videojs.VolumeBar",t.Eb),$("videojs.VolumeLevel",t.rc),$("videojs.VolumeMenuButton",t.Ha),$("videojs.VolumeHandle",t.Gb),$("videojs.MuteToggle",t.ra),$("videojs.PosterImage",t.mc),$("videojs.Menu",t.qa),$("videojs.MenuItem",t.M),$("videojs.MenuButton",t.O),$("videojs.PlaybackRateMenuButton",t.lc),$("videojs.ChaptersTrackMenuItem",t.Xa),$("videojs.TextTrackButton",t.Q),$("videojs.TextTrackMenuItem",t.$),$("videojs.OffTextTrackMenuItem",t.zb),$("videojs.CaptionSettingsMenuItem",t.sb),t.O.prototype.createItems=t.O.prototype.Ka,t.Q.prototype.createItems=t.Q.prototype.Ka,t.Wa.prototype.createItems=t.Wa.prototype.Ka,$("videojs.SubtitlesButton",t.$a),$("videojs.CaptionsButton",t.oa),$("videojs.ChaptersButton",t.Wa),$("videojs.MediaTechController",t.j),t.j.withSourceHandlers=t.j.dc,t.j.prototype.featuresVolumeControl=t.j.prototype.qf,t.j.prototype.featuresFullscreenResize=t.j.prototype.mf,t.j.prototype.featuresPlaybackRate=t.j.prototype.nf,t.j.prototype.featuresProgressEvents=t.j.prototype.of,t.j.prototype.featuresTimeupdateEvents=t.j.prototype.pf,t.j.prototype.setPoster=t.j.prototype.bd,t.j.prototype.textTracks=t.j.prototype.textTracks,t.j.prototype.remoteTextTracks=t.j.prototype.X,t.j.prototype.addTextTrack=t.j.prototype.addTextTrack,t.j.prototype.addRemoteTextTrack=t.j.prototype.ha,t.j.prototype.removeRemoteTextTrack=t.j.prototype.Da,$("videojs.Html5",t.f),t.f.Events=t.f.xb,t.f.isSupported=t.f.isSupported,t.f.canPlaySource=t.f.wc,t.f.patchCanPlayType=t.f.Tc,t.f.unpatchCanPlayType=t.f.Ye,t.f.prototype.setCurrentTime=t.f.prototype.Zb,t.f.prototype.setVolume=t.f.prototype.Oe,t.f.prototype.setMuted=t.f.prototype.Ke,t.f.prototype.setPreload=t.f.prototype.Me,t.f.prototype.setAutoplay=t.f.prototype.He,t.f.prototype.setLoop=t.f.prototype.Je,t.f.prototype.enterFullScreen=t.f.prototype.Ec,t.f.prototype.exitFullScreen=t.f.prototype.Ud,t.f.prototype.playbackRate=t.f.prototype.playbackRate,t.f.prototype.setPlaybackRate=t.f.prototype.Le,t.f.selectSourceHandler=t.f.ob,t.f.prototype.setSource=t.f.prototype.ma,t.f.prototype.disposeSourceHandler=t.f.prototype.ia,t.f.prototype.textTracks=t.f.prototype.textTracks,t.f.prototype.remoteTextTracks=t.f.prototype.X,t.f.prototype.addTextTrack=t.f.prototype.addTextTrack,t.f.prototype.addRemoteTextTrack=t.f.prototype.ha,t.f.prototype.removeRemoteTextTrack=t.f.prototype.Da,$("videojs.Flash",t.g),t.g.isSupported=t.g.isSupported,t.g.canPlaySource=t.g.wc,t.g.onReady=t.g.onReady,t.g.embed=t.g.Dc,t.g.version=t.g.version,t.g.prototype.setSource=t.g.prototype.ma,t.g.selectSourceHandler=t.g.ob,t.g.prototype.setSource=t.g.prototype.ma,t.g.prototype.disposeSourceHandler=t.g.prototype.ia,$("videojs.TextTrack",t.t),$("videojs.TextTrackList",t.F),$("videojs.TextTrackCueList",t.U),$("videojs.TextTrackSettings",t.pc),t.t.prototype.id=t.t.prototype.id,t.t.prototype.label=t.t.prototype.label,t.t.prototype.kind=t.t.prototype.Tb,t.t.prototype.mode=t.t.prototype.mode,t.t.prototype.cues=t.t.prototype.Ac,t.t.prototype.activeCues=t.t.prototype.jf,t.t.prototype.addCue=t.t.prototype.sc,t.t.prototype.removeCue=t.t.prototype.Yc,t.F.prototype.getTrackById=t.F.prototype.ae,t.U.prototype.getCueById=t.F.prototype.Zd,$("videojs.CaptionsTrack",t.cf),$("videojs.SubtitlesTrack",t.hf),$("videojs.ChaptersTrack",t.df),$("videojs.autoSetup",t.uc),$("videojs.plugin",t.Be),$("videojs.createTimeRange",t.xa),$("videojs.util",t.Z),t.Z.mergeOptions=t.Z.Aa,t.addLanguage=t.Gd})(),(function(h){var r=h.vttjs={},o=r.VTTCue,u=r.VTTRegion,g=h.VTTCue,k=h.VTTRegion;r.shim=function(){r.VTTCue=o,r.VTTRegion=u},r.restore=function(){r.VTTCue=g,r.VTTRegion=k}})(video),(function(h,r){function o(_){if(typeof _!="string")return!1;var ee=R[_.toLowerCase()];return ee?_.toLowerCase():!1}function u(_){if(typeof _!="string")return!1;var ee=q[_.toLowerCase()];return ee?_.toLowerCase():!1}function g(_){for(var ee=1;ee<arguments.length;ee++){var te=arguments[ee];for(var ne in te)_[ne]=te[ne]}return _}function k(_,ee,te){var ne=this,re=/MSIE\s8\.0/.test(navigator.userAgent),oe={};re?ne=document.createElement("custom"):oe.enumerable=!0,ne.hasBeenReset=!1;var le="",pe=!1,de=_,he=ee,ae=te,se=null,ce="",fe=!0,ue="auto",Oe="start",be=50,xe="middle",Se=50,ke="middle";return Object.defineProperty(ne,"id",g({},oe,{get:function(){return le},set:function(we){le=""+we}})),Object.defineProperty(ne,"pauseOnExit",g({},oe,{get:function(){return pe},set:function(we){pe=!!we}})),Object.defineProperty(ne,"startTime",g({},oe,{get:function(){return de},set:function(we){if(typeof we!="number")throw new TypeError("Start time must be set to a number.");de=we,this.hasBeenReset=!0}})),Object.defineProperty(ne,"endTime",g({},oe,{get:function(){return he},set:function(we){if(typeof we!="number")throw new TypeError("End time must be set to a number.");he=we,this.hasBeenReset=!0}})),Object.defineProperty(ne,"text",g({},oe,{get:function(){return ae},set:function(we){ae=""+we,this.hasBeenReset=!0}})),Object.defineProperty(ne,"region",g({},oe,{get:function(){return se},set:function(we){se=we,this.hasBeenReset=!0}})),Object.defineProperty(ne,"vertical",g({},oe,{get:function(){return ce},set:function(we){var Te=o(we);if(Te===!1)throw new SyntaxError("An invalid or illegal string was specified.");ce=Te,this.hasBeenReset=!0}})),Object.defineProperty(ne,"snapToLines",g({},oe,{get:function(){return fe},set:function(we){fe=!!we,this.hasBeenReset=!0}})),Object.defineProperty(ne,"line",g({},oe,{get:function(){return ue},set:function(we){if(typeof we!="number"&&we!==A)throw new SyntaxError("An invalid number or illegal string was specified.");ue=we,this.hasBeenReset=!0}})),Object.defineProperty(ne,"lineAlign",g({},oe,{get:function(){return Oe},set:function(we){var Te=u(we);if(!Te)throw new SyntaxError("An invalid or illegal string was specified.");Oe=Te,this.hasBeenReset=!0}})),Object.defineProperty(ne,"position",g({},oe,{get:function(){return be},set:function(we){if(0>we||we>100)throw new Error("Position must be between 0 and 100.");be=we,this.hasBeenReset=!0}})),Object.defineProperty(ne,"positionAlign",g({},oe,{get:function(){return xe},set:function(we){var Te=u(we);if(!Te)throw new SyntaxError("An invalid or illegal string was specified.");xe=Te,this.hasBeenReset=!0}})),Object.defineProperty(ne,"size",g({},oe,{get:function(){return Se},set:function(we){if(0>we||we>100)throw new Error("Size must be between 0 and 100.");Se=we,this.hasBeenReset=!0}})),Object.defineProperty(ne,"align",g({},oe,{get:function(){return ke},set:function(we){var Te=u(we);if(!Te)throw new SyntaxError("An invalid or illegal string was specified.");ke=Te,this.hasBeenReset=!0}})),ne.displayState=void 0,re?ne:void 0}var A="auto",R={"":!0,lr:!0,rl:!0},q={start:!0,middle:!0,end:!0,left:!0,right:!0};k.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)},h.VTTCue=h.VTTCue||k,r.VTTCue=k})(video,video.vttjs||{}),(function(h,r){function o(A){if(typeof A!="string")return!1;var R=k[A.toLowerCase()];return R?A.toLowerCase():!1}function u(A){return typeof A=="number"&&A>=0&&100>=A}function g(){var A=100,R=3,q=0,_=100,ee=0,te=100,ne="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return A},set:function(re){if(!u(re))throw new Error("Width must be between 0 and 100.");A=re}},lines:{enumerable:!0,get:function(){return R},set:function(re){if(typeof re!="number")throw new TypeError("Lines must be set to a number.");R=re}},regionAnchorY:{enumerable:!0,get:function(){return _},set:function(re){if(!u(re))throw new Error("RegionAnchorX must be between 0 and 100.");_=re}},regionAnchorX:{enumerable:!0,get:function(){return q},set:function(re){if(!u(re))throw new Error("RegionAnchorY must be between 0 and 100.");q=re}},viewportAnchorY:{enumerable:!0,get:function(){return te},set:function(re){if(!u(re))throw new Error("ViewportAnchorY must be between 0 and 100.");te=re}},viewportAnchorX:{enumerable:!0,get:function(){return ee},set:function(re){if(!u(re))throw new Error("ViewportAnchorX must be between 0 and 100.");ee=re}},scroll:{enumerable:!0,get:function(){return ne},set:function(re){var oe=o(re);if(oe===!1)throw new SyntaxError("An invalid or illegal string was specified.");ne=oe}}})}var k={"":!0,up:!0};h.VTTRegion=h.VTTRegion||g,r.VTTRegion=g})(video,video.vttjs||{}),(function(h){function r(ue,Oe){this.name="ParsingError",this.code=ue.code,this.message=Oe||ue.message}function o(ue){function Oe(xe,Se,ke,we){return 3600*(0|xe)+60*(0|Se)+(0|ke)+(0|we)/1e3}var be=ue.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return be?be[3]?Oe(be[1],be[2],be[3].replace(":",""),be[4]):be[1]>59?Oe(be[1],be[2],0,be[4]):Oe(0,be[1],be[2],be[4]):null}function u(){this.values=oe(null)}function g(ue,Oe,be,xe){var Se=xe?ue.split(xe):[ue];for(var ke in Se)if(typeof Se[ke]=="string"){var we=Se[ke].split(be);if(we.length===2){var Te=we[0],Ee=we[1];Oe(Te,Ee)}}}function k(ue,Oe,be){function xe(){var Te=o(ue);if(Te===null)throw new r(r.Errors.BadTimeStamp,"Malformed timestamp: "+we);return ue=ue.replace(/^[^\sa-zA-Z-]+/,""),Te}function Se(Te,Ee){var $e=new u;g(Te,function(Pe,Me){switch(Pe){case"region":for(var Ve=be.length-1;Ve>=0;Ve--)if(be[Ve].id===Me){$e.set(Pe,be[Ve].region);break}break;case"vertical":$e.alt(Pe,Me,["rl","lr"]);break;case"line":var je=Me.split(","),Ze=je[0];$e.integer(Pe,Ze),$e.percent(Pe,Ze)&&$e.set("snapToLines",!1),$e.alt(Pe,Ze,["auto"]),je.length===2&&$e.alt("lineAlign",je[1],["start","middle","end"]);break;case"position":je=Me.split(","),$e.percent(Pe,je[0]),je.length===2&&$e.alt("positionAlign",je[1],["start","middle","end"]);break;case"size":$e.percent(Pe,Me);break;case"align":$e.alt(Pe,Me,["start","middle","end","left","right"])}},/:/,/\s/),Ee.region=$e.get("region",null),Ee.vertical=$e.get("vertical",""),Ee.line=$e.get("line","auto"),Ee.lineAlign=$e.get("lineAlign","start"),Ee.snapToLines=$e.get("snapToLines",!0),Ee.size=$e.get("size",100),Ee.align=$e.get("align","middle"),Ee.position=$e.get("position",{start:0,left:0,middle:50,end:100,right:100},Ee.align),Ee.positionAlign=$e.get("positionAlign",{start:"start",left:"start",middle:"middle",end:"end",right:"end"},Ee.align)}function ke(){ue=ue.replace(/^\s+/,"")}var we=ue;if(ke(),Oe.startTime=xe(),ke(),ue.substr(0,3)!=="-->")throw new r(r.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '-->'): "+we);ue=ue.substr(3),ke(),Oe.endTime=xe(),ke(),Se(ue,Oe)}function A(ue,Oe){function be(){function Ze(ze){return Oe=Oe.substr(ze.length),ze}if(!Oe)return null;var _e=Oe.match(/^([^<]*)(<[^>]+>?)?/);return Ze(_e[1]?_e[1]:_e[2])}function xe(Ze){return le[Ze]}function Se(Ze){for(;je=Ze.match(/&(amp|lt|gt|lrm|rlm|nbsp);/);)Ze=Ze.replace(je[0],xe);return Ze}function ke(Ze,_e){return!he[_e.localName]||he[_e.localName]===Ze.localName}function we(Ze,_e){var ze=pe[Ze];if(!ze)return null;var Ge=ue.document.createElement(ze);Ge.localName=ze;var Ue=de[Ze];return Ue&&_e&&(Ge[Ue]=_e.trim()),Ge}for(var Te,Ee=ue.document.createElement("div"),$e=Ee,Pe=[];(Te=be())!==null;)if(Te[0]!=="<")$e.appendChild(ue.document.createTextNode(Se(Te)));else{if(Te[1]==="/"){Pe.length&&Pe[Pe.length-1]===Te.substr(2).replace(">","")&&(Pe.pop(),$e=$e.parentNode);continue}var Me,Ve=o(Te.substr(1,Te.length-2));if(Ve){Me=ue.document.createProcessingInstruction("timestamp",Ve),$e.appendChild(Me);continue}var je=Te.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!je||(Me=we(je[1],je[3]),!Me)||!ke($e,Me))continue;je[2]&&(Me.className=je[2].substr(1).replace("."," ")),Pe.push(je[1]),$e.appendChild(Me),$e=Me}return Ee}function R(ue){function Oe(Ee,$e){for(var Pe=$e.childNodes.length-1;Pe>=0;Pe--)Ee.push($e.childNodes[Pe])}function be(Ee){if(!Ee||!Ee.length)return null;var $e=Ee.pop(),Pe=$e.textContent||$e.innerText;if(Pe){var Me=Pe.match(/^.*(\n|\r)/);return Me?(Ee.length=0,Me[0]):Pe}return $e.tagName==="ruby"?be(Ee):$e.childNodes?(Oe(Ee,$e),be(Ee)):void 0}var xe,Se=[],ke="";if(!ue||!ue.childNodes)return"ltr";for(Oe(Se,ue);ke=be(Se);)for(var we=0;we<ke.length;we++){xe=ke.charCodeAt(we);for(var Te=0;Te<ae.length;Te++)if(ae[Te]===xe)return"rtl"}return"ltr"}function q(ue){if(typeof ue.line=="number"&&(ue.snapToLines||ue.line>=0&&ue.line<=100))return ue.line;if(!ue.track||!ue.track.textTrackList||!ue.track.textTrackList.mediaElement)return-1;for(var Oe=ue.track,be=Oe.textTrackList,xe=0,Se=0;Se<be.length&&be[Se]!==Oe;Se++)be[Se].mode==="showing"&&xe++;return-1*++xe}function _(){}function ee(ue,Oe,be){var xe=/MSIE\s8\.0/.test(navigator.userAgent),Se="rgba(255, 255, 255, 1)",ke="rgba(0, 0, 0, 0.8)";xe&&(Se="rgb(255, 255, 255)",ke="rgb(0, 0, 0)"),_.call(this),this.cue=Oe,this.cueDiv=A(ue,Oe.text);var we={color:Se,backgroundColor:ke,position:"relative",left:0,right:0,top:0,bottom:0,display:"inline"};xe||(we.writingMode=Oe.vertical===""?"horizontal-tb":Oe.vertical==="lr"?"vertical-lr":"vertical-rl",we.unicodeBidi="plaintext"),this.applyStyles(we,this.cueDiv),this.div=ue.document.createElement("div"),we={textAlign:Oe.align==="middle"?"center":Oe.align,font:be.font,whiteSpace:"pre-line",position:"absolute"},xe||(we.direction=R(this.cueDiv),we.writingMode=Oe.vertical===""?"horizontal-tb":Oe.vertical==="lr"?"vertical-lr":"vertical-rl".stylesunicodeBidi="plaintext"),this.applyStyles(we),this.div.appendChild(this.cueDiv);var Te=0;switch(Oe.positionAlign){case"start":Te=Oe.position;break;case"middle":Te=Oe.position-Oe.size/2;break;case"end":Te=Oe.position-Oe.size}this.applyStyles(Oe.vertical===""?{left:this.formatStyle(Te,"%"),width:this.formatStyle(Oe.size,"%")}:{top:this.formatStyle(Te,"%"),height:this.formatStyle(Oe.size,"%")}),this.move=function(Ee){this.applyStyles({top:this.formatStyle(Ee.top,"px"),bottom:this.formatStyle(Ee.bottom,"px"),left:this.formatStyle(Ee.left,"px"),right:this.formatStyle(Ee.right,"px"),height:this.formatStyle(Ee.height,"px"),width:this.formatStyle(Ee.width,"px")})}}function te(ue){var Oe,be,xe,Se,ke=/MSIE\s8\.0/.test(navigator.userAgent);if(ue.div){be=ue.div.offsetHeight,xe=ue.div.offsetWidth,Se=ue.div.offsetTop;var we=(we=ue.div.childNodes)&&(we=we[0])&&we.getClientRects&&we.getClientRects();ue=ue.div.getBoundingClientRect(),Oe=we?Math.max(we[0]&&we[0].height||0,ue.height/we.length):0}this.left=ue.left,this.right=ue.right,this.top=ue.top||Se,this.height=ue.height||be,this.bottom=ue.bottom||Se+(ue.height||be),this.width=ue.width||xe,this.lineHeight=Oe!==void 0?Oe:ue.lineHeight,ke&&!this.lineHeight&&(this.lineHeight=13)}function ne(ue,Oe,be,xe){function Se(ze,Ge){for(var Ue,tt=new te(ze),it=1,Je=0;Je<Ge.length;Je++){for(;ze.overlapsOppositeAxis(be,Ge[Je])||ze.within(be)&&ze.overlapsAny(xe);)ze.move(Ge[Je]);if(ze.within(be))return ze;var ft=ze.intersectPercentage(be);it>ft&&(Ue=new te(ze),it=ft),ze=new te(tt)}return Ue||tt}var ke=new te(Oe),we=Oe.cue,Te=q(we),Ee=[];if(we.snapToLines){var $e;switch(we.vertical){case"":Ee=["+y","-y"],$e="height";break;case"rl":Ee=["+x","-x"],$e="width";break;case"lr":Ee=["-x","+x"],$e="width"}var Pe=ke.lineHeight,Me=Pe*Math.round(Te),Ve=be[$e]+Pe,je=Ee[0];Math.abs(Me)>Ve&&(Me=0>Me?-1:1,Me*=Math.ceil(Ve/Pe)*Pe),0>Te&&(Me+=we.vertical===""?be.height:be.width,Ee=Ee.reverse()),ke.move(je,Me)}else{var Ze=ke.lineHeight/be.height*100;switch(we.lineAlign){case"middle":Te-=Ze/2;break;case"end":Te-=Ze}switch(we.vertical){case"":Oe.applyStyles({top:Oe.formatStyle(Te,"%")});break;case"rl":Oe.applyStyles({left:Oe.formatStyle(Te,"%")});break;case"lr":Oe.applyStyles({right:Oe.formatStyle(Te,"%")})}Ee=["+y","-x","+x","-y"],ke=new te(Oe)}var _e=Se(ke,Ee);Oe.move(_e.toCSSCompatValues(be))}function re(){}var oe=Object.create||(function(){function ue(){}return function(Oe){if(arguments.length!==1)throw new Error("Object.create shim only accepts one parameter.");return ue.prototype=Oe,new ue}})();r.prototype=oe(Error.prototype),r.prototype.constructor=r,r.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},u.prototype={set:function(ue,Oe){this.get(ue)||Oe===""||(this.values[ue]=Oe)},get:function(ue,Oe,be){return be?this.has(ue)?this.values[ue]:Oe[be]:this.has(ue)?this.values[ue]:Oe},has:function(ue){return ue in this.values},alt:function(ue,Oe,be){for(var xe=0;xe<be.length;++xe)if(Oe===be[xe]){this.set(ue,Oe);break}},integer:function(ue,Oe){/^-?\d+$/.test(Oe)&&this.set(ue,parseInt(Oe,10))},percent:function(ue,Oe){return Oe.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(Oe=parseFloat(Oe),Oe>=0&&100>=Oe)?(this.set(ue,Oe),!0):!1}};var le={"&amp;":"&","&lt;":"<","&gt;":">","&lrm;":"","&rlm;":"","&nbsp;":""},pe={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},de={v:"title",lang:"lang"},he={rt:"ruby"},ae=[1470,1472,1475,1478,1488,1489,1490,1491,1492,1493,1494,1495,1496,1497,1498,1499,1500,1501,1502,1503,1504,1505,1506,1507,1508,1509,1510,1511,1512,1513,1514,1520,1521,1522,1523,1524,1544,1547,1549,1563,1566,1567,1568,1569,1570,1571,1572,1573,1574,1575,1576,1577,1578,1579,1580,1581,1582,1583,1584,1585,1586,1587,1588,1589,1590,1591,1592,1593,1594,1595,1596,1597,1598,1599,1600,1601,1602,1603,1604,1605,1606,1607,1608,1609,1610,1645,1646,1647,1649,1650,1651,1652,1653,1654,1655,1656,1657,1658,1659,1660,1661,1662,1663,1664,1665,1666,1667,1668,1669,1670,1671,1672,1673,1674,1675,1676,1677,1678,1679,1680,1681,1682,1683,1684,1685,1686,1687,1688,1689,1690,1691,1692,1693,1694,1695,1696,1697,1698,1699,1700,1701,1702,1703,1704,1705,1706,1707,1708,1709,1710,1711,1712,1713,1714,1715,1716,1717,1718,1719,1720,1721,1722,1723,1724,1725,1726,1727,1728,1729,1730,1731,1732,1733,1734,1735,1736,1737,1738,1739,1740,1741,1742,1743,1744,1745,1746,1747,1748,1749,1765,1766,1774,1775,1786,1787,1788,1789,1790,1791,1792,1793,1794,1795,1796,1797,1798,1799,1800,1801,1802,1803,1804,1805,1807,1808,1810,1811,1812,1813,1814,1815,1816,1817,1818,1819,1820,1821,1822,1823,1824,1825,1826,1827,1828,1829,1830,1831,1832,1833,1834,1835,1836,1837,1838,1839,1869,1870,1871,1872,1873,1874,1875,1876,1877,1878,1879,1880,1881,1882,1883,1884,1885,1886,1887,1888,1889,1890,1891,1892,1893,1894,1895,1896,1897,1898,1899,1900,1901,1902,1903,1904,1905,1906,1907,1908,1909,1910,1911,1912,1913,1914,1915,1916,1917,1918,1919,1920,1921,1922,1923,1924,1925,1926,1927,1928,1929,1930,1931,1932,1933,1934,1935,1936,1937,1938,1939,1940,1941,1942,1943,1944,1945,1946,1947,1948,1949,1950,1951,1952,1953,1954,1955,1956,1957,1969,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2e3,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023,2024,2025,2026,2036,2037,2042,2048,2049,2050,2051,2052,2053,2054,2055,2056,2057,2058,2059,2060,2061,2062,2063,2064,2065,2066,2067,2068,2069,2074,2084,2088,2096,2097,2098,2099,2100,2101,2102,2103,2104,2105,2106,2107,2108,2109,2110,2112,2113,2114,2115,2116,2117,2118,2119,2120,2121,2122,2123,2124,2125,2126,2127,2128,2129,2130,2131,2132,2133,2134,2135,2136,2142,2208,2210,2211,2212,2213,2214,2215,2216,2217,2218,2219,2220,8207,64285,64287,64288,64289,64290,64291,64292,64293,64294,64295,64296,64298,64299,64300,64301,64302,64303,64304,64305,64306,64307,64308,64309,64310,64312,64313,64314,64315,64316,64318,64320,64321,64323,64324,64326,64327,64328,64329,64330,64331,64332,64333,64334,64335,64336,64337,64338,64339,64340,64341,64342,64343,64344,64345,64346,64347,64348,64349,64350,64351,64352,64353,64354,64355,64356,64357,64358,64359,64360,64361,64362,64363,64364,64365,64366,64367,64368,64369,64370,64371,64372,64373,64374,64375,64376,64377,64378,64379,64380,64381,64382,64383,64384,64385,64386,64387,64388,64389,64390,64391,64392,64393,64394,64395,64396,64397,64398,64399,64400,64401,64402,64403,64404,64405,64406,64407,64408,64409,64410,64411,64412,64413,64414,64415,64416,64417,64418,64419,64420,64421,64422,64423,64424,64425,64426,64427,64428,64429,64430,64431,64432,64433,64434,64435,64436,64437,64438,64439,64440,64441,64442,64443,64444,64445,64446,64447,64448,64449,64467,64468,64469,64470,64471,64472,64473,64474,64475,64476,64477,64478,64479,64480,64481,64482,64483,64484,64485,64486,64487,64488,64489,64490,64491,64492,64493,64494,64495,64496,64497,64498,64499,64500,64501,64502,64503,64504,64505,64506,64507,64508,64509,64510,64511,64512,64513,64514,64515,64516,64517,64518,64519,64520,64521,64522,64523,64524,64525,64526,64527,64528,64529,64530,64531,64532,64533,64534,64535,64536,64537,64538,64539,64540,64541,64542,64543,64544,64545,64546,64547,64548,64549,64550,64551,64552,64553,64554,64555,64556,64557,64558,64559,64560,64561,64562,64563,64564,64565,64566,64567,64568,64569,64570,64571,64572,64573,64574,64575,64576,64577,64578,64579,64580,64581,64582,64583,64584,64585,64586,64587,64588,64589,64590,64591,64592,64593,64594,64595,64596,64597,64598,64599,64600,64601,64602,64603,64604,64605,64606,64607,64608,64609,64610,64611,64612,64613,64614,64615,64616,64617,64618,64619,64620,64621,64622,64623,64624,64625,64626,64627,64628,64629,64630,64631,64632,64633,64634,64635,64636,64637,64638,64639,64640,64641,64642,64643,64644,64645,64646,64647,64648,64649,64650,64651,64652,64653,64654,64655,64656,64657,64658,64659,64660,64661,64662,64663,64664,64665,64666,64667,64668,64669,64670,64671,64672,64673,64674,64675,64676,64677,64678,64679,64680,64681,64682,64683,64684,64685,64686,64687,64688,64689,64690,64691,64692,64693,64694,64695,64696,64697,64698,64699,64700,64701,64702,64703,64704,64705,64706,64707,64708,64709,64710,64711,64712,64713,64714,64715,64716,64717,64718,64719,64720,64721,64722,64723,64724,64725,64726,64727,64728,64729,64730,64731,64732,64733,64734,64735,64736,64737,64738,64739,64740,64741,64742,64743,64744,64745,64746,64747,64748,64749,64750,64751,64752,64753,64754,64755,64756,64757,64758,64759,64760,64761,64762,64763,64764,64765,64766,64767,64768,64769,64770,64771,64772,64773,64774,64775,64776,64777,64778,64779,64780,64781,64782,64783,64784,64785,64786,64787,64788,64789,64790,64791,64792,64793,64794,64795,64796,64797,64798,64799,64800,64801,64802,64803,64804,64805,64806,64807,64808,64809,64810,64811,64812,64813,64814,64815,64816,64817,64818,64819,64820,64821,64822,64823,64824,64825,64826,64827,64828,64829,64848,64849,64850,64851,64852,64853,64854,64855,64856,64857,64858,64859,64860,64861,64862,64863,64864,64865,64866,64867,64868,64869,64870,64871,64872,64873,64874,64875,64876,64877,64878,64879,64880,64881,64882,64883,64884,64885,64886,64887,64888,64889,64890,64891,64892,64893,64894,64895,64896,64897,64898,64899,64900,64901,64902,64903,64904,64905,64906,64907,64908,64909,64910,64911,64914,64915,64916,64917,64918,64919,64920,64921,64922,64923,64924,64925,64926,64927,64928,64929,64930,64931,64932,64933,64934,64935,64936,64937,64938,64939,64940,64941,64942,64943,64944,64945,64946,64947,64948,64949,64950,64951,64952,64953,64954,64955,64956,64957,64958,64959,64960,64961,64962,64963,64964,64965,64966,64967,65008,65009,65010,65011,65012,65013,65014,65015,65016,65017,65018,65019,65020,65136,65137,65138,65139,65140,65142,65143,65144,65145,65146,65147,65148,65149,65150,65151,65152,65153,65154,65155,65156,65157,65158,65159,65160,65161,65162,65163,65164,65165,65166,65167,65168,65169,65170,65171,65172,65173,65174,65175,65176,65177,65178,65179,65180,65181,65182,65183,65184,65185,65186,65187,65188,65189,65190,65191,65192,65193,65194,65195,65196,65197,65198,65199,65200,65201,65202,65203,65204,65205,65206,65207,65208,65209,65210,65211,65212,65213,65214,65215,65216,65217,65218,65219,65220,65221,65222,65223,65224,65225,65226,65227,65228,65229,65230,65231,65232,65233,65234,65235,65236,65237,65238,65239,65240,65241,65242,65243,65244,65245,65246,65247,65248,65249,65250,65251,65252,65253,65254,65255,65256,65257,65258,65259,65260,65261,65262,65263,65264,65265,65266,65267,65268,65269,65270,65271,65272,65273,65274,65275,65276,67584,67585,67586,67587,67588,67589,67592,67594,67595,67596,67597,67598,67599,67600,67601,67602,67603,67604,67605,67606,67607,67608,67609,67610,67611,67612,67613,67614,67615,67616,67617,67618,67619,67620,67621,67622,67623,67624,67625,67626,67627,67628,67629,67630,67631,67632,67633,67634,67635,67636,67637,67639,67640,67644,67647,67648,67649,67650,67651,67652,67653,67654,67655,67656,67657,67658,67659,67660,67661,67662,67663,67664,67665,67666,67667,67668,67669,67671,67672,67673,67674,67675,67676,67677,67678,67679,67840,67841,67842,67843,67844,67845,67846,67847,67848,67849,67850,67851,67852,67853,67854,67855,67856,67857,67858,67859,67860,67861,67862,67863,67864,67865,67866,67867,67872,67873,67874,67875,67876,67877,67878,67879,67880,67881,67882,67883,67884,67885,67886,67887,67888,67889,67890,67891,67892,67893,67894,67895,67896,67897,67903,67968,67969,67970,67971,67972,67973,67974,67975,67976,67977,67978,67979,67980,67981,67982,67983,67984,67985,67986,67987,67988,67989,67990,67991,67992,67993,67994,67995,67996,67997,67998,67999,68e3,68001,68002,68003,68004,68005,68006,68007,68008,68009,68010,68011,68012,68013,68014,68015,68016,68017,68018,68019,68020,68021,68022,68023,68030,68031,68096,68112,68113,68114,68115,68117,68118,68119,68121,68122,68123,68124,68125,68126,68127,68128,68129,68130,68131,68132,68133,68134,68135,68136,68137,68138,68139,68140,68141,68142,68143,68144,68145,68146,68147,68160,68161,68162,68163,68164,68165,68166,68167,68176,68177,68178,68179,68180,68181,68182,68183,68184,68192,68193,68194,68195,68196,68197,68198,68199,68200,68201,68202,68203,68204,68205,68206,68207,68208,68209,68210,68211,68212,68213,68214,68215,68216,68217,68218,68219,68220,68221,68222,68223,68352,68353,68354,68355,68356,68357,68358,68359,68360,68361,68362,68363,68364,68365,68366,68367,68368,68369,68370,68371,68372,68373,68374,68375,68376,68377,68378,68379,68380,68381,68382,68383,68384,68385,68386,68387,68388,68389,68390,68391,68392,68393,68394,68395,68396,68397,68398,68399,68400,68401,68402,68403,68404,68405,68416,68417,68418,68419,68420,68421,68422,68423,68424,68425,68426,68427,68428,68429,68430,68431,68432,68433,68434,68435,68436,68437,68440,68441,68442,68443,68444,68445,68446,68447,68448,68449,68450,68451,68452,68453,68454,68455,68456,68457,68458,68459,68460,68461,68462,68463,68464,68465,68466,68472,68473,68474,68475,68476,68477,68478,68479,68608,68609,68610,68611,68612,68613,68614,68615,68616,68617,68618,68619,68620,68621,68622,68623,68624,68625,68626,68627,68628,68629,68630,68631,68632,68633,68634,68635,68636,68637,68638,68639,68640,68641,68642,68643,68644,68645,68646,68647,68648,68649,68650,68651,68652,68653,68654,68655,68656,68657,68658,68659,68660,68661,68662,68663,68664,68665,68666,68667,68668,68669,68670,68671,68672,68673,68674,68675,68676,68677,68678,68679,68680,126464,126465,126466,126467,126469,126470,126471,126472,126473,126474,126475,126476,126477,126478,126479,126480,126481,126482,126483,126484,126485,126486,126487,126488,126489,126490,126491,126492,126493,126494,126495,126497,126498,126500,126503,126505,126506,126507,126508,126509,126510,126511,126512,126513,126514,126516,126517,126518,126519,126521,126523,126530,126535,126537,126539,126541,126542,126543,126545,126546,126548,126551,126553,126555,126557,126559,126561,126562,126564,126567,126568,126569,126570,126572,126573,126574,126575,126576,126577,126578,126580,126581,126582,126583,126585,126586,126587,126588,126590,126592,126593,126594,126595,126596,126597,126598,126599,126600,126601,126603,126604,126605,126606,126607,126608,126609,126610,126611,126612,126613,126614,126615,126616,126617,126618,126619,126625,126626,126627,126629,126630,126631,126632,126633,126635,126636,126637,126638,126639,126640,126641,126642,126643,126644,126645,126646,126647,126648,126649,126650,126651,1114109];_.prototype.applyStyles=function(ue,Oe){Oe=Oe||this.div;for(var be in ue)ue.hasOwnProperty(be)&&(Oe.style[be]=ue[be])},_.prototype.formatStyle=function(ue,Oe){return ue===0?0:ue+Oe},ee.prototype=oe(_.prototype),ee.prototype.constructor=ee,te.prototype.move=function(ue,Oe){switch(Oe=Oe!==void 0?Oe:this.lineHeight,ue){case"+x":this.left+=Oe,this.right+=Oe;break;case"-x":this.left-=Oe,this.right-=Oe;break;case"+y":this.top+=Oe,this.bottom+=Oe;break;case"-y":this.top-=Oe,this.bottom-=Oe}},te.prototype.overlaps=function(ue){return this.left<ue.right&&this.right>ue.left&&this.top<ue.bottom&&this.bottom>ue.top},te.prototype.overlapsAny=function(ue){for(var Oe=0;Oe<ue.length;Oe++)if(this.overlaps(ue[Oe]))return!0;return!1},te.prototype.within=function(ue){return this.top>=ue.top&&this.bottom<=ue.bottom&&this.left>=ue.left&&this.right<=ue.right},te.prototype.overlapsOppositeAxis=function(ue,Oe){switch(Oe){case"+x":return this.left<ue.left;case"-x":return this.right>ue.right;case"+y":return this.top<ue.top;case"-y":return this.bottom>ue.bottom}},te.prototype.intersectPercentage=function(ue){var Oe=Math.max(0,Math.min(this.right,ue.right)-Math.max(this.left,ue.left)),be=Math.max(0,Math.min(this.bottom,ue.bottom)-Math.max(this.top,ue.top)),xe=Oe*be;return xe/(this.height*this.width)},te.prototype.toCSSCompatValues=function(ue){return{top:this.top-ue.top,bottom:ue.bottom-this.bottom,left:this.left-ue.left,right:ue.right-this.right,height:this.height,width:this.width}},te.getSimpleBoxPosition=function(ue){var Oe=ue.div?ue.div.offsetHeight:ue.tagName?ue.offsetHeight:0,be=ue.div?ue.div.offsetWidth:ue.tagName?ue.offsetWidth:0,xe=ue.div?ue.div.offsetTop:ue.tagName?ue.offsetTop:0;ue=ue.div?ue.div.getBoundingClientRect():ue.tagName?ue.getBoundingClientRect():ue;var Se={left:ue.left,right:ue.right,top:ue.top||xe,height:ue.height||Oe,bottom:ue.bottom||xe+(ue.height||Oe),width:ue.width||be};return Se},re.StringDecoder=function(){return{decode:function(ue){if(!ue)return"";if(typeof ue!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(ue))}}},re.convertCueToDOMTree=function(ue,Oe){return ue&&Oe?A(ue,Oe):null};var se=.05,ce="sans-serif",fe="1.5%";re.processCues=function(ue,Oe,be){function xe(Pe){for(var Me=0;Me<Pe.length;Me++)if(Pe[Me].hasBeenReset||!Pe[Me].displayState)return!0;return!1}if(!ue||!Oe||!be)return null;for(;be.firstChild;)be.removeChild(be.firstChild);var Se=ue.document.createElement("div");if(Se.style.position="absolute",Se.style.left="0",Se.style.right="0",Se.style.top="0",Se.style.bottom="0",Se.style.margin=fe,be.appendChild(Se),xe(Oe)){var ke=[],we=te.getSimpleBoxPosition(Se),Te=Math.round(we.height*se*100)/100,Ee={font:Te+"px "+ce};(function(){for(var Pe,Me,Ve=0;Ve<Oe.length;Ve++)Me=Oe[Ve],Pe=new ee(ue,Me,Ee),Se.appendChild(Pe.div),ne(ue,Pe,we,ke),Me.displayState=Pe.div,ke.push(te.getSimpleBoxPosition(Pe))})()}else for(var $e=0;$e<Oe.length;$e++)Se.appendChild(Oe[$e].displayState)},re.Parser=function(ue,Oe,be){be||(be=Oe,Oe={}),Oe||(Oe={}),this.window=ue,this.vttjs=Oe,this.state="INITIAL",this.buffer="",this.decoder=be||new TextDecoder("utf8"),this.regionList=[]},re.Parser.prototype={reportOrThrowError:function(ue){if(!(ue instanceof r))throw ue;this.onparsingerror&&this.onparsingerror(ue)},parse:function(ue){function Oe(){for(var $e=Se.buffer,Pe=0;Pe<$e.length&&$e[Pe]!=="\r"&&$e[Pe]!==`
`;)++Pe;var Me=$e.substr(0,Pe);return $e[Pe]==="\r"&&++Pe,$e[Pe]===`
`&&++Pe,Se.buffer=$e.substr(Pe),Me}function be($e){var Pe=new u;if(g($e,function(Ve,je){switch(Ve){case"id":Pe.set(Ve,je);break;case"width":Pe.percent(Ve,je);break;case"lines":Pe.integer(Ve,je);break;case"regionanchor":case"viewportanchor":var Ze=je.split(",");if(Ze.length!==2)break;var _e=new u;if(_e.percent("x",Ze[0]),_e.percent("y",Ze[1]),!_e.has("x")||!_e.has("y"))break;Pe.set(Ve+"X",_e.get("x")),Pe.set(Ve+"Y",_e.get("y"));break;case"scroll":Pe.alt(Ve,je,["up"])}},/=/,/\s/),Pe.has("id")){var Me=new(Se.vttjs.VTTRegion||Se.window.VTTRegion);Me.width=Pe.get("width",100),Me.lines=Pe.get("lines",3),Me.regionAnchorX=Pe.get("regionanchorX",0),Me.regionAnchorY=Pe.get("regionanchorY",100),Me.viewportAnchorX=Pe.get("viewportanchorX",0),Me.viewportAnchorY=Pe.get("viewportanchorY",100),Me.scroll=Pe.get("scroll",""),Se.onregion&&Se.onregion(Me),Se.regionList.push({id:Pe.get("id"),region:Me})}}function xe($e){g($e,function(Pe,Me){switch(Pe){case"Region":be(Me)}},/:/)}var Se=this;ue&&(Se.buffer+=Se.decoder.decode(ue,{stream:!0}));try{var ke;if(Se.state==="INITIAL"){if(!/\r\n|\n/.test(Se.buffer))return this;ke=Oe();var we=ke.match(/^WEBVTT([ \t].*)?$/);if(!we||!we[0])throw new r(r.Errors.BadSignature);Se.state="HEADER"}for(var Te=!1;Se.buffer;){if(!/\r\n|\n/.test(Se.buffer))return this;switch(Te?Te=!1:ke=Oe(),Se.state){case"HEADER":/:/.test(ke)?xe(ke):ke||(Se.state="ID");continue;case"NOTE":ke||(Se.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(ke)){Se.state="NOTE";break}if(!ke)continue;if(Se.cue=new(Se.vttjs.VTTCue||Se.window.VTTCue)(0,0,""),Se.state="CUE",ke.indexOf("-->")===-1){Se.cue.id=ke;continue}case"CUE":try{k(ke,Se.cue,Se.regionList)}catch($e){Se.reportOrThrowError($e),Se.cue=null,Se.state="BADCUE";continue}Se.state="CUETEXT";continue;case"CUETEXT":var Ee=ke.indexOf("-->")!==-1;if(!ke||Ee&&(Te=!0)){Se.oncue&&Se.oncue(Se.cue),Se.cue=null,Se.state="ID";continue}Se.cue.text&&(Se.cue.text+=`
`),Se.cue.text+=ke;continue;case"BADCUE":ke||(Se.state="ID");continue}}}catch($e){Se.reportOrThrowError($e),Se.state==="CUETEXT"&&Se.cue&&Se.oncue&&Se.oncue(Se.cue),Se.cue=null,Se.state=Se.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this},flush:function(){var ue=this;try{if(ue.buffer+=ue.decoder.decode(),(ue.cue||ue.state==="HEADER")&&(ue.buffer+=`

`,ue.parse()),ue.state==="INITIAL")throw new r(r.Errors.BadSignature)}catch(Oe){ue.reportOrThrowError(Oe)}return ue.onflush&&ue.onflush(),this}},h.WebVTT=re})(video,video.vttjs||{})})(video$1)),video$1.exports}var videoExports=requireVideo();const videojs=getDefaultExportFromCjs(videoExports);var HOOKS=["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition"],defaults$2={_disable:[],allowInput:!1,allowInvalidPreload:!1,altFormat:"F j, Y",altInput:!1,altInputClass:"form-control input",animate:typeof window=="object"&&window.navigator.userAgent.indexOf("MSIE")===-1,ariaDateFormat:"F j, Y",autoFillDefaultTime:!0,clickOpens:!0,closeOnSelect:!0,conjunction:", ",dateFormat:"Y-m-d",defaultHour:12,defaultMinute:0,defaultSeconds:0,disable:[],disableMobile:!1,enableSeconds:!1,enableTime:!1,errorHandler:function(h){return typeof console<"u"&&console.warn(h)},getWeek:function(h){var r=new Date(h.getTime());r.setHours(0,0,0,0),r.setDate(r.getDate()+3-(r.getDay()+6)%7);var o=new Date(r.getFullYear(),0,4);return 1+Math.round(((r.getTime()-o.getTime())/864e5-3+(o.getDay()+6)%7)/7)},hourIncrement:1,ignoredFocusElements:[],inline:!1,locale:"default",minuteIncrement:5,mode:"single",monthSelectorType:"dropdown",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",noCalendar:!1,now:new Date,onChange:[],onClose:[],onDayCreate:[],onDestroy:[],onKeyDown:[],onMonthChange:[],onOpen:[],onParseConfig:[],onReady:[],onValueUpdate:[],onYearChange:[],onPreCalendarPosition:[],plugins:[],position:"auto",positionElement:void 0,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",shorthandCurrentMonth:!1,showMonths:1,static:!1,time_24hr:!1,weekNumbers:!1,wrap:!1},english={weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:function(h){var r=h%100;if(r>3&&r<21)return"th";switch(r%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle",amPM:["AM","PM"],yearAriaLabel:"Year",monthAriaLabel:"Month",hourAriaLabel:"Hour",minuteAriaLabel:"Minute",time_24hr:!1},pad=function(h,r){return r===void 0&&(r=2),("000"+h).slice(r*-1)},int=function(h){return h===!0?1:0};function debounce(h,r){var o;return function(){var u=this,g=arguments;clearTimeout(o),o=setTimeout(function(){return h.apply(u,g)},r)}}var arrayify=function(h){return h instanceof Array?h:[h]};function toggleClass(h,r,o){if(o===!0)return h.classList.add(r);h.classList.remove(r)}function createElement(h,r,o){var u=window.document.createElement(h);return r=r||"",o=o||"",u.className=r,o!==void 0&&(u.textContent=o),u}function clearNode(h){for(;h.firstChild;)h.removeChild(h.firstChild)}function findParent(h,r){if(r(h))return h;if(h.parentNode)return findParent(h.parentNode,r)}function createNumberInput(h,r){var o=createElement("div","numInputWrapper"),u=createElement("input","numInput "+h),g=createElement("span","arrowUp"),k=createElement("span","arrowDown");if(navigator.userAgent.indexOf("MSIE 9.0")===-1?u.type="number":(u.type="text",u.pattern="\\d*"),r!==void 0)for(var A in r)u.setAttribute(A,r[A]);return o.appendChild(u),o.appendChild(g),o.appendChild(k),o}function getEventTarget(h){try{if(typeof h.composedPath=="function"){var r=h.composedPath();return r[0]}return h.target}catch{return h.target}}var doNothing=function(){},monthToStr=function(h,r,o){return o.months[r?"shorthand":"longhand"][h]},revFormat={D:doNothing,F:function(h,r,o){h.setMonth(o.months.longhand.indexOf(r))},G:function(h,r){h.setHours((h.getHours()>=12?12:0)+parseFloat(r))},H:function(h,r){h.setHours(parseFloat(r))},J:function(h,r){h.setDate(parseFloat(r))},K:function(h,r,o){h.setHours(h.getHours()%12+12*int(new RegExp(o.amPM[1],"i").test(r)))},M:function(h,r,o){h.setMonth(o.months.shorthand.indexOf(r))},S:function(h,r){h.setSeconds(parseFloat(r))},U:function(h,r){return new Date(parseFloat(r)*1e3)},W:function(h,r,o){var u=parseInt(r),g=new Date(h.getFullYear(),0,2+(u-1)*7,0,0,0,0);return g.setDate(g.getDate()-g.getDay()+o.firstDayOfWeek),g},Y:function(h,r){h.setFullYear(parseFloat(r))},Z:function(h,r){return new Date(r)},d:function(h,r){h.setDate(parseFloat(r))},h:function(h,r){h.setHours((h.getHours()>=12?12:0)+parseFloat(r))},i:function(h,r){h.setMinutes(parseFloat(r))},j:function(h,r){h.setDate(parseFloat(r))},l:doNothing,m:function(h,r){h.setMonth(parseFloat(r)-1)},n:function(h,r){h.setMonth(parseFloat(r)-1)},s:function(h,r){h.setSeconds(parseFloat(r))},u:function(h,r){return new Date(parseFloat(r))},w:doNothing,y:function(h,r){h.setFullYear(2e3+parseFloat(r))}},tokenRegex={D:"",F:"",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"",M:"",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",u:"(.+)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},formats={Z:function(h){return h.toISOString()},D:function(h,r,o){return r.weekdays.shorthand[formats.w(h,r,o)]},F:function(h,r,o){return monthToStr(formats.n(h,r,o)-1,!1,r)},G:function(h,r,o){return pad(formats.h(h,r,o))},H:function(h){return pad(h.getHours())},J:function(h,r){return r.ordinal!==void 0?h.getDate()+r.ordinal(h.getDate()):h.getDate()},K:function(h,r){return r.amPM[int(h.getHours()>11)]},M:function(h,r){return monthToStr(h.getMonth(),!0,r)},S:function(h){return pad(h.getSeconds())},U:function(h){return h.getTime()/1e3},W:function(h,r,o){return o.getWeek(h)},Y:function(h){return pad(h.getFullYear(),4)},d:function(h){return pad(h.getDate())},h:function(h){return h.getHours()%12?h.getHours()%12:12},i:function(h){return pad(h.getMinutes())},j:function(h){return h.getDate()},l:function(h,r){return r.weekdays.longhand[h.getDay()]},m:function(h){return pad(h.getMonth()+1)},n:function(h){return h.getMonth()+1},s:function(h){return h.getSeconds()},u:function(h){return h.getTime()},w:function(h){return h.getDay()},y:function(h){return String(h.getFullYear()).substring(2)}},createDateFormatter=function(h){var r=h.config,o=r===void 0?defaults$2:r,u=h.l10n,g=u===void 0?english:u,k=h.isMobile,A=k===void 0?!1:k;return function(R,q,_){var ee=_||g;return o.formatDate!==void 0&&!A?o.formatDate(R,q,ee):q.split("").map(function(te,ne,re){return formats[te]&&re[ne-1]!=="\\"?formats[te](R,ee,o):te!=="\\"?te:""}).join("")}},createDateParser=function(h){var r=h.config,o=r===void 0?defaults$2:r,u=h.l10n,g=u===void 0?english:u;return function(k,A,R,q){if(!(k!==0&&!k)){var _=q||g,ee,te=k;if(k instanceof Date)ee=new Date(k.getTime());else if(typeof k!="string"&&k.toFixed!==void 0)ee=new Date(k);else if(typeof k=="string"){var ne=A||(o||defaults$2).dateFormat,re=String(k).trim();if(re==="today")ee=new Date,R=!0;else if(o&&o.parseDate)ee=o.parseDate(k,ne);else if(/Z$/.test(re)||/GMT$/.test(re))ee=new Date(k);else{for(var oe=void 0,le=[],pe=0,de=0,he="";pe<ne.length;pe++){var ae=ne[pe],se=ae==="\\",ce=ne[pe-1]==="\\"||se;if(tokenRegex[ae]&&!ce){he+=tokenRegex[ae];var fe=new RegExp(he).exec(k);fe&&(oe=!0)&&le[ae!=="Y"?"push":"unshift"]({fn:revFormat[ae],val:fe[++de]})}else se||(he+=".")}ee=!o||!o.noCalendar?new Date(new Date().getFullYear(),0,1,0,0,0,0):new Date(new Date().setHours(0,0,0,0)),le.forEach(function(ue){var Oe=ue.fn,be=ue.val;return ee=Oe(ee,be,_)||ee}),ee=oe?ee:void 0}}if(!(ee instanceof Date&&!isNaN(ee.getTime()))){o.errorHandler(new Error("Invalid date provided: "+te));return}return R===!0&&ee.setHours(0,0,0,0),ee}}};function compareDates(h,r,o){return o===void 0&&(o=!0),o!==!1?new Date(h.getTime()).setHours(0,0,0,0)-new Date(r.getTime()).setHours(0,0,0,0):h.getTime()-r.getTime()}var isBetween=function(h,r,o){return h>Math.min(r,o)&&h<Math.max(r,o)},calculateSecondsSinceMidnight=function(h,r,o){return h*3600+r*60+o},parseSeconds=function(h){var r=Math.floor(h/3600),o=(h-r*3600)/60;return[r,o,h-r*3600-o*60]},duration={DAY:864e5};function getDefaultHours(h){var r=h.defaultHour,o=h.defaultMinute,u=h.defaultSeconds;if(h.minDate!==void 0){var g=h.minDate.getHours(),k=h.minDate.getMinutes(),A=h.minDate.getSeconds();r<g&&(r=g),r===g&&o<k&&(o=k),r===g&&o===k&&u<A&&(u=h.minDate.getSeconds())}if(h.maxDate!==void 0){var R=h.maxDate.getHours(),q=h.maxDate.getMinutes();r=Math.min(r,R),r===R&&(o=Math.min(q,o)),r===R&&o===q&&(u=h.maxDate.getSeconds())}return{hours:r,minutes:o,seconds:u}}typeof Object.assign!="function"&&(Object.assign=function(h){for(var r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];if(!h)throw TypeError("Cannot convert undefined or null to object");for(var u=function(R){R&&Object.keys(R).forEach(function(q){return h[q]=R[q]})},g=0,k=r;g<k.length;g++){var A=k[g];u(A)}return h});var __assign=function(){return __assign=Object.assign||function(h){for(var r,o=1,u=arguments.length;o<u;o++){r=arguments[o];for(var g in r)Object.prototype.hasOwnProperty.call(r,g)&&(h[g]=r[g])}return h},__assign.apply(this,arguments)},__spreadArrays=function(){for(var h=0,r=0,o=arguments.length;r<o;r++)h+=arguments[r].length;for(var u=Array(h),g=0,r=0;r<o;r++)for(var k=arguments[r],A=0,R=k.length;A<R;A++,g++)u[g]=k[A];return u},DEBOUNCED_CHANGE_MS=300;function FlatpickrInstance(h,r){var o={config:__assign(__assign({},defaults$2),flatpickr.defaultConfig),l10n:english};o.parseDate=createDateParser({config:o.config,l10n:o.l10n}),o._handlers=[],o.pluginElements=[],o.loadedPlugins=[],o._bind=le,o._setHoursFromDate=ne,o._positionCalendar=Xt,o.changeMonth=Ze,o.changeYear=it,o.clear=_e,o.close=ze,o.onMouseOver=Zt,o._createElement=createElement,o.createDay=fe,o.destroy=Ge,o.isEnabled=Je,o.jumpToDate=he,o.updateValue=st,o.open=Fi,o.redraw=ui,o.set=Xi,o.setDate=qi,o.toggle=Wi;function u(){o.utils={getDaysInMonth:function(me,ge){return me===void 0&&(me=o.currentMonth),ge===void 0&&(ge=o.currentYear),me===1&&(ge%4===0&&ge%100!==0||ge%400===0)?29:o.l10n.daysInMonth[me]}}}function g(){o.element=o.input=h,o.isOpen=!1,Ni(),hi(),zi(),_i(),u(),o.isMobile||ce(),de(),(o.selectedDates.length||o.config.noCalendar)&&(o.config.enableTime&&ne(o.config.noCalendar?o.latestSelectedDateObj:void 0),st(!1)),R();var me=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);!o.isMobile&&me&&Xt(),He("onReady")}function k(){var me;return((me=o.calendarContainer)===null||me===void 0?void 0:me.getRootNode()).activeElement||document.activeElement}function A(me){return me.bind(o)}function R(){var me=o.config;me.weekNumbers===!1&&me.showMonths===1||me.noCalendar!==!0&&window.requestAnimationFrame(function(){if(o.calendarContainer!==void 0&&(o.calendarContainer.style.visibility="hidden",o.calendarContainer.style.display="block"),o.daysContainer!==void 0){var ge=(o.days.offsetWidth+1)*me.showMonths;o.daysContainer.style.width=ge+"px",o.calendarContainer.style.width=ge+(o.weekWrapper!==void 0?o.weekWrapper.offsetWidth:0)+"px",o.calendarContainer.style.removeProperty("visibility"),o.calendarContainer.style.removeProperty("display")}})}function q(me){if(o.selectedDates.length===0){var ge=o.config.minDate===void 0||compareDates(new Date,o.config.minDate)>=0?new Date:new Date(o.config.minDate.getTime()),ye=getDefaultHours(o.config);ge.setHours(ye.hours,ye.minutes,ye.seconds,ge.getMilliseconds()),o.selectedDates=[ge],o.latestSelectedDateObj=ge}me!==void 0&&me.type!=="blur"&&Gi(me);var ve=o._input.value;te(),st(),o._input.value!==ve&&o._debouncedChange()}function _(me,ge){return me%12+12*int(ge===o.l10n.amPM[1])}function ee(me){switch(me%24){case 0:case 12:return 12;default:return me%12}}function te(){if(!(o.hourElement===void 0||o.minuteElement===void 0)){var me=(parseInt(o.hourElement.value.slice(-2),10)||0)%24,ge=(parseInt(o.minuteElement.value,10)||0)%60,ye=o.secondElement!==void 0?(parseInt(o.secondElement.value,10)||0)%60:0;o.amPM!==void 0&&(me=_(me,o.amPM.textContent));var ve=o.config.minTime!==void 0||o.config.minDate&&o.minDateHasTime&&o.latestSelectedDateObj&&compareDates(o.latestSelectedDateObj,o.config.minDate,!0)===0,Qe=o.config.maxTime!==void 0||o.config.maxDate&&o.maxDateHasTime&&o.latestSelectedDateObj&&compareDates(o.latestSelectedDateObj,o.config.maxDate,!0)===0;if(o.config.maxTime!==void 0&&o.config.minTime!==void 0&&o.config.minTime>o.config.maxTime){var Ae=calculateSecondsSinceMidnight(o.config.minTime.getHours(),o.config.minTime.getMinutes(),o.config.minTime.getSeconds()),Ne=calculateSecondsSinceMidnight(o.config.maxTime.getHours(),o.config.maxTime.getMinutes(),o.config.maxTime.getSeconds()),Le=calculateSecondsSinceMidnight(me,ge,ye);if(Le>Ne&&Le<Ae){var Xe=parseSeconds(Ae);me=Xe[0],ge=Xe[1],ye=Xe[2]}}else{if(Qe){var Re=o.config.maxTime!==void 0?o.config.maxTime:o.config.maxDate;me=Math.min(me,Re.getHours()),me===Re.getHours()&&(ge=Math.min(ge,Re.getMinutes())),ge===Re.getMinutes()&&(ye=Math.min(ye,Re.getSeconds()))}if(ve){var Be=o.config.minTime!==void 0?o.config.minTime:o.config.minDate;me=Math.max(me,Be.getHours()),me===Be.getHours()&&ge<Be.getMinutes()&&(ge=Be.getMinutes()),ge===Be.getMinutes()&&(ye=Math.max(ye,Be.getSeconds()))}}re(me,ge,ye)}}function ne(me){var ge=me||o.latestSelectedDateObj;ge&&ge instanceof Date&&re(ge.getHours(),ge.getMinutes(),ge.getSeconds())}function re(me,ge,ye){o.latestSelectedDateObj!==void 0&&o.latestSelectedDateObj.setHours(me%24,ge,ye||0,0),!(!o.hourElement||!o.minuteElement||o.isMobile)&&(o.hourElement.value=pad(o.config.time_24hr?me:(12+me)%12+12*int(me%12===0)),o.minuteElement.value=pad(ge),o.amPM!==void 0&&(o.amPM.textContent=o.l10n.amPM[int(me>=12)]),o.secondElement!==void 0&&(o.secondElement.value=pad(ye)))}function oe(me){var ge=getEventTarget(me),ye=parseInt(ge.value)+(me.delta||0);(ye/1e3>1||me.key==="Enter"&&!/[^\d]/.test(ye.toString()))&&it(ye)}function le(me,ge,ye,ve){if(ge instanceof Array)return ge.forEach(function(Qe){return le(me,Qe,ye,ve)});if(me instanceof Array)return me.forEach(function(Qe){return le(Qe,ge,ye,ve)});me.addEventListener(ge,ye,ve),o._handlers.push({remove:function(){return me.removeEventListener(ge,ye,ve)}})}function pe(){He("onChange")}function de(){if(o.config.wrap&&["open","close","toggle","clear"].forEach(function(ye){Array.prototype.forEach.call(o.element.querySelectorAll("[data-"+ye+"]"),function(ve){return le(ve,"click",o[ye])})}),o.isMobile){Yi();return}var me=debounce(Vi,50);if(o._debouncedChange=debounce(pe,DEBOUNCED_CHANGE_MS),o.daysContainer&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&le(o.daysContainer,"mouseover",function(ye){o.config.mode==="range"&&Zt(getEventTarget(ye))}),le(o._input,"keydown",ai),o.calendarContainer!==void 0&&le(o.calendarContainer,"keydown",ai),!o.config.inline&&!o.config.static&&le(window,"resize",me),window.ontouchstart!==void 0?le(window.document,"touchstart",tt):le(window.document,"mousedown",tt),le(window.document,"focus",tt,{capture:!0}),o.config.clickOpens===!0&&(le(o._input,"focus",o.open),le(o._input,"click",o.open)),o.daysContainer!==void 0&&(le(o.monthNav,"click",Ui),le(o.monthNav,["keyup","increment"],oe),le(o.daysContainer,"click",di)),o.timeContainer!==void 0&&o.minuteElement!==void 0&&o.hourElement!==void 0){var ge=function(ye){return getEventTarget(ye).select()};le(o.timeContainer,["increment"],q),le(o.timeContainer,"blur",q,{capture:!0}),le(o.timeContainer,"click",ae),le([o.hourElement,o.minuteElement],["focus","click"],ge),o.secondElement!==void 0&&le(o.secondElement,"focus",function(){return o.secondElement&&o.secondElement.select()}),o.amPM!==void 0&&le(o.amPM,"click",function(ye){q(ye)})}o.config.allowInput&&le(o._input,"blur",Ii)}function he(me,ge){var ye=me!==void 0?o.parseDate(me):o.latestSelectedDateObj||(o.config.minDate&&o.config.minDate>o.now?o.config.minDate:o.config.maxDate&&o.config.maxDate<o.now?o.config.maxDate:o.now),ve=o.currentYear,Qe=o.currentMonth;try{ye!==void 0&&(o.currentYear=ye.getFullYear(),o.currentMonth=ye.getMonth())}catch(Ae){Ae.message="Invalid date supplied: "+ye,o.config.errorHandler(Ae)}ge&&o.currentYear!==ve&&(He("onYearChange"),we()),ge&&(o.currentYear!==ve||o.currentMonth!==Qe)&&He("onMonthChange"),o.redraw()}function ae(me){var ge=getEventTarget(me);~ge.className.indexOf("arrow")&&se(me,ge.classList.contains("arrowUp")?1:-1)}function se(me,ge,ye){var ve=me&&getEventTarget(me),Qe=ye||ve&&ve.parentNode&&ve.parentNode.firstChild,Ae=ei("increment");Ae.delta=ge,Qe&&Qe.dispatchEvent(Ae)}function ce(){var me=window.document.createDocumentFragment();if(o.calendarContainer=createElement("div","flatpickr-calendar"),o.calendarContainer.tabIndex=-1,!o.config.noCalendar){if(me.appendChild($e()),o.innerContainer=createElement("div","flatpickr-innerContainer"),o.config.weekNumbers){var ge=je(),ye=ge.weekWrapper,ve=ge.weekNumbers;o.innerContainer.appendChild(ye),o.weekNumbers=ve,o.weekWrapper=ye}o.rContainer=createElement("div","flatpickr-rContainer"),o.rContainer.appendChild(Me()),o.daysContainer||(o.daysContainer=createElement("div","flatpickr-days"),o.daysContainer.tabIndex=-1),ke(),o.rContainer.appendChild(o.daysContainer),o.innerContainer.appendChild(o.rContainer),me.appendChild(o.innerContainer)}o.config.enableTime&&me.appendChild(Pe()),toggleClass(o.calendarContainer,"rangeMode",o.config.mode==="range"),toggleClass(o.calendarContainer,"animate",o.config.animate===!0),toggleClass(o.calendarContainer,"multiMonth",o.config.showMonths>1),o.calendarContainer.appendChild(me);var Qe=o.config.appendTo!==void 0&&o.config.appendTo.nodeType!==void 0;if((o.config.inline||o.config.static)&&(o.calendarContainer.classList.add(o.config.inline?"inline":"static"),o.config.inline&&(!Qe&&o.element.parentNode?o.element.parentNode.insertBefore(o.calendarContainer,o._input.nextSibling):o.config.appendTo!==void 0&&o.config.appendTo.appendChild(o.calendarContainer)),o.config.static)){var Ae=createElement("div","flatpickr-wrapper");o.element.parentNode&&o.element.parentNode.insertBefore(Ae,o.element),Ae.appendChild(o.element),o.altInput&&Ae.appendChild(o.altInput),Ae.appendChild(o.calendarContainer)}!o.config.static&&!o.config.inline&&(o.config.appendTo!==void 0?o.config.appendTo:window.document.body).appendChild(o.calendarContainer)}function fe(me,ge,ye,ve){var Qe=Je(ge,!0),Ae=createElement("span",me,ge.getDate().toString());return Ae.dateObj=ge,Ae.$i=ve,Ae.setAttribute("aria-label",o.formatDate(ge,o.config.ariaDateFormat)),me.indexOf("hidden")===-1&&compareDates(ge,o.now)===0&&(o.todayDateElem=Ae,Ae.classList.add("today"),Ae.setAttribute("aria-current","date")),Qe?(Ae.tabIndex=-1,ti(ge)&&(Ae.classList.add("selected"),o.selectedDateElem=Ae,o.config.mode==="range"&&(toggleClass(Ae,"startRange",o.selectedDates[0]&&compareDates(ge,o.selectedDates[0],!0)===0),toggleClass(Ae,"endRange",o.selectedDates[1]&&compareDates(ge,o.selectedDates[1],!0)===0),me==="nextMonthDay"&&Ae.classList.add("inRange")))):Ae.classList.add("flatpickr-disabled"),o.config.mode==="range"&&Hi(ge)&&!ti(ge)&&Ae.classList.add("inRange"),o.weekNumbers&&o.config.showMonths===1&&me!=="prevMonthDay"&&ve%7===6&&o.weekNumbers.insertAdjacentHTML("beforeend","<span class='flatpickr-day'>"+o.config.getWeek(ge)+"</span>"),He("onDayCreate",Ae),Ae}function ue(me){me.focus(),o.config.mode==="range"&&Zt(me)}function Oe(me){for(var ge=me>0?0:o.config.showMonths-1,ye=me>0?o.config.showMonths:-1,ve=ge;ve!=ye;ve+=me)for(var Qe=o.daysContainer.children[ve],Ae=me>0?0:Qe.children.length-1,Ne=me>0?Qe.children.length:-1,Le=Ae;Le!=Ne;Le+=me){var Xe=Qe.children[Le];if(Xe.className.indexOf("hidden")===-1&&Je(Xe.dateObj))return Xe}}function be(me,ge){for(var ye=me.className.indexOf("Month")===-1?me.dateObj.getMonth():o.currentMonth,ve=ge>0?o.config.showMonths:-1,Qe=ge>0?1:-1,Ae=ye-o.currentMonth;Ae!=ve;Ae+=Qe)for(var Ne=o.daysContainer.children[Ae],Le=ye-o.currentMonth===Ae?me.$i+ge:ge<0?Ne.children.length-1:0,Xe=Ne.children.length,Re=Le;Re>=0&&Re<Xe&&Re!=(ge>0?Xe:-1);Re+=Qe){var Be=Ne.children[Re];if(Be.className.indexOf("hidden")===-1&&Je(Be.dateObj)&&Math.abs(me.$i-Re)>=Math.abs(ge))return ue(Be)}o.changeMonth(Qe),xe(Oe(Qe),0)}function xe(me,ge){var ye=k(),ve=ft(ye||document.body),Qe=me!==void 0?me:ve?ye:o.selectedDateElem!==void 0&&ft(o.selectedDateElem)?o.selectedDateElem:o.todayDateElem!==void 0&&ft(o.todayDateElem)?o.todayDateElem:Oe(ge>0?1:-1);Qe===void 0?o._input.focus():ve?be(Qe,ge):ue(Qe)}function Se(me,ge){for(var ye=(new Date(me,ge,1).getDay()-o.l10n.firstDayOfWeek+7)%7,ve=o.utils.getDaysInMonth((ge-1+12)%12,me),Qe=o.utils.getDaysInMonth(ge,me),Ae=window.document.createDocumentFragment(),Ne=o.config.showMonths>1,Le=Ne?"prevMonthDay hidden":"prevMonthDay",Xe=Ne?"nextMonthDay hidden":"nextMonthDay",Re=ve+1-ye,Be=0;Re<=ve;Re++,Be++)Ae.appendChild(fe("flatpickr-day "+Le,new Date(me,ge-1,Re),Re,Be));for(Re=1;Re<=Qe;Re++,Be++)Ae.appendChild(fe("flatpickr-day",new Date(me,ge,Re),Re,Be));for(var We=Qe+1;We<=42-ye&&(o.config.showMonths===1||Be%7!==0);We++,Be++)Ae.appendChild(fe("flatpickr-day "+Xe,new Date(me,ge+1,We%Qe),We,Be));var nt=createElement("div","dayContainer");return nt.appendChild(Ae),nt}function ke(){if(o.daysContainer!==void 0){clearNode(o.daysContainer),o.weekNumbers&&clearNode(o.weekNumbers);for(var me=document.createDocumentFragment(),ge=0;ge<o.config.showMonths;ge++){var ye=new Date(o.currentYear,o.currentMonth,1);ye.setMonth(o.currentMonth+ge),me.appendChild(Se(ye.getFullYear(),ye.getMonth()))}o.daysContainer.appendChild(me),o.days=o.daysContainer.firstChild,o.config.mode==="range"&&o.selectedDates.length===1&&Zt()}}function we(){if(!(o.config.showMonths>1||o.config.monthSelectorType!=="dropdown")){var me=function(ve){return o.config.minDate!==void 0&&o.currentYear===o.config.minDate.getFullYear()&&ve<o.config.minDate.getMonth()?!1:!(o.config.maxDate!==void 0&&o.currentYear===o.config.maxDate.getFullYear()&&ve>o.config.maxDate.getMonth())};o.monthsDropdownContainer.tabIndex=-1,o.monthsDropdownContainer.innerHTML="";for(var ge=0;ge<12;ge++)if(me(ge)){var ye=createElement("option","flatpickr-monthDropdown-month");ye.value=new Date(o.currentYear,ge).getMonth().toString(),ye.textContent=monthToStr(ge,o.config.shorthandCurrentMonth,o.l10n),ye.tabIndex=-1,o.currentMonth===ge&&(ye.selected=!0),o.monthsDropdownContainer.appendChild(ye)}}}function Te(){var me=createElement("div","flatpickr-month"),ge=window.document.createDocumentFragment(),ye;o.config.showMonths>1||o.config.monthSelectorType==="static"?ye=createElement("span","cur-month"):(o.monthsDropdownContainer=createElement("select","flatpickr-monthDropdown-months"),o.monthsDropdownContainer.setAttribute("aria-label",o.l10n.monthAriaLabel),le(o.monthsDropdownContainer,"change",function(Ne){var Le=getEventTarget(Ne),Xe=parseInt(Le.value,10);o.changeMonth(Xe-o.currentMonth),He("onMonthChange")}),we(),ye=o.monthsDropdownContainer);var ve=createNumberInput("cur-year",{tabindex:"-1"}),Qe=ve.getElementsByTagName("input")[0];Qe.setAttribute("aria-label",o.l10n.yearAriaLabel),o.config.minDate&&Qe.setAttribute("min",o.config.minDate.getFullYear().toString()),o.config.maxDate&&(Qe.setAttribute("max",o.config.maxDate.getFullYear().toString()),Qe.disabled=!!o.config.minDate&&o.config.minDate.getFullYear()===o.config.maxDate.getFullYear());var Ae=createElement("div","flatpickr-current-month");return Ae.appendChild(ye),Ae.appendChild(ve),ge.appendChild(Ae),me.appendChild(ge),{container:me,yearElement:Qe,monthElement:ye}}function Ee(){clearNode(o.monthNav),o.monthNav.appendChild(o.prevMonthNav),o.config.showMonths&&(o.yearElements=[],o.monthElements=[]);for(var me=o.config.showMonths;me--;){var ge=Te();o.yearElements.push(ge.yearElement),o.monthElements.push(ge.monthElement),o.monthNav.appendChild(ge.container)}o.monthNav.appendChild(o.nextMonthNav)}function $e(){return o.monthNav=createElement("div","flatpickr-months"),o.yearElements=[],o.monthElements=[],o.prevMonthNav=createElement("span","flatpickr-prev-month"),o.prevMonthNav.innerHTML=o.config.prevArrow,o.nextMonthNav=createElement("span","flatpickr-next-month"),o.nextMonthNav.innerHTML=o.config.nextArrow,Ee(),Object.defineProperty(o,"_hidePrevMonthArrow",{get:function(){return o.__hidePrevMonthArrow},set:function(me){o.__hidePrevMonthArrow!==me&&(toggleClass(o.prevMonthNav,"flatpickr-disabled",me),o.__hidePrevMonthArrow=me)}}),Object.defineProperty(o,"_hideNextMonthArrow",{get:function(){return o.__hideNextMonthArrow},set:function(me){o.__hideNextMonthArrow!==me&&(toggleClass(o.nextMonthNav,"flatpickr-disabled",me),o.__hideNextMonthArrow=me)}}),o.currentYearElement=o.yearElements[0],_t(),o.monthNav}function Pe(){o.calendarContainer.classList.add("hasTime"),o.config.noCalendar&&o.calendarContainer.classList.add("noCalendar");var me=getDefaultHours(o.config);o.timeContainer=createElement("div","flatpickr-time"),o.timeContainer.tabIndex=-1;var ge=createElement("span","flatpickr-time-separator",":"),ye=createNumberInput("flatpickr-hour",{"aria-label":o.l10n.hourAriaLabel});o.hourElement=ye.getElementsByTagName("input")[0];var ve=createNumberInput("flatpickr-minute",{"aria-label":o.l10n.minuteAriaLabel});if(o.minuteElement=ve.getElementsByTagName("input")[0],o.hourElement.tabIndex=o.minuteElement.tabIndex=-1,o.hourElement.value=pad(o.latestSelectedDateObj?o.latestSelectedDateObj.getHours():o.config.time_24hr?me.hours:ee(me.hours)),o.minuteElement.value=pad(o.latestSelectedDateObj?o.latestSelectedDateObj.getMinutes():me.minutes),o.hourElement.setAttribute("step",o.config.hourIncrement.toString()),o.minuteElement.setAttribute("step",o.config.minuteIncrement.toString()),o.hourElement.setAttribute("min",o.config.time_24hr?"0":"1"),o.hourElement.setAttribute("max",o.config.time_24hr?"23":"12"),o.hourElement.setAttribute("maxlength","2"),o.minuteElement.setAttribute("min","0"),o.minuteElement.setAttribute("max","59"),o.minuteElement.setAttribute("maxlength","2"),o.timeContainer.appendChild(ye),o.timeContainer.appendChild(ge),o.timeContainer.appendChild(ve),o.config.time_24hr&&o.timeContainer.classList.add("time24hr"),o.config.enableSeconds){o.timeContainer.classList.add("hasSeconds");var Qe=createNumberInput("flatpickr-second");o.secondElement=Qe.getElementsByTagName("input")[0],o.secondElement.value=pad(o.latestSelectedDateObj?o.latestSelectedDateObj.getSeconds():me.seconds),o.secondElement.setAttribute("step",o.minuteElement.getAttribute("step")),o.secondElement.setAttribute("min","0"),o.secondElement.setAttribute("max","59"),o.secondElement.setAttribute("maxlength","2"),o.timeContainer.appendChild(createElement("span","flatpickr-time-separator",":")),o.timeContainer.appendChild(Qe)}return o.config.time_24hr||(o.amPM=createElement("span","flatpickr-am-pm",o.l10n.amPM[int((o.latestSelectedDateObj?o.hourElement.value:o.config.defaultHour)>11)]),o.amPM.title=o.l10n.toggleTitle,o.amPM.tabIndex=-1,o.timeContainer.appendChild(o.amPM)),o.timeContainer}function Me(){o.weekdayContainer?clearNode(o.weekdayContainer):o.weekdayContainer=createElement("div","flatpickr-weekdays");for(var me=o.config.showMonths;me--;){var ge=createElement("div","flatpickr-weekdaycontainer");o.weekdayContainer.appendChild(ge)}return Ve(),o.weekdayContainer}function Ve(){if(o.weekdayContainer){var me=o.l10n.firstDayOfWeek,ge=__spreadArrays(o.l10n.weekdays.shorthand);me>0&&me<ge.length&&(ge=__spreadArrays(ge.splice(me,ge.length),ge.splice(0,me)));for(var ye=o.config.showMonths;ye--;)o.weekdayContainer.children[ye].innerHTML=`
      <span class='flatpickr-weekday'>
        `+ge.join("</span><span class='flatpickr-weekday'>")+`
      </span>
      `}}function je(){o.calendarContainer.classList.add("hasWeeks");var me=createElement("div","flatpickr-weekwrapper");me.appendChild(createElement("span","flatpickr-weekday",o.l10n.weekAbbreviation));var ge=createElement("div","flatpickr-weeks");return me.appendChild(ge),{weekWrapper:me,weekNumbers:ge}}function Ze(me,ge){ge===void 0&&(ge=!0);var ye=ge?me:me-o.currentMonth;ye<0&&o._hidePrevMonthArrow===!0||ye>0&&o._hideNextMonthArrow===!0||(o.currentMonth+=ye,(o.currentMonth<0||o.currentMonth>11)&&(o.currentYear+=o.currentMonth>11?1:-1,o.currentMonth=(o.currentMonth+12)%12,He("onYearChange"),we()),ke(),He("onMonthChange"),_t())}function _e(me,ge){if(me===void 0&&(me=!0),ge===void 0&&(ge=!0),o.input.value="",o.altInput!==void 0&&(o.altInput.value=""),o.mobileInput!==void 0&&(o.mobileInput.value=""),o.selectedDates=[],o.latestSelectedDateObj=void 0,ge===!0&&(o.currentYear=o._initialDate.getFullYear(),o.currentMonth=o._initialDate.getMonth()),o.config.enableTime===!0){var ye=getDefaultHours(o.config),ve=ye.hours,Qe=ye.minutes,Ae=ye.seconds;re(ve,Qe,Ae)}o.redraw(),me&&He("onChange")}function ze(){o.isOpen=!1,o.isMobile||(o.calendarContainer!==void 0&&o.calendarContainer.classList.remove("open"),o._input!==void 0&&o._input.classList.remove("active")),He("onClose")}function Ge(){o.config!==void 0&&He("onDestroy");for(var me=o._handlers.length;me--;)o._handlers[me].remove();if(o._handlers=[],o.mobileInput)o.mobileInput.parentNode&&o.mobileInput.parentNode.removeChild(o.mobileInput),o.mobileInput=void 0;else if(o.calendarContainer&&o.calendarContainer.parentNode)if(o.config.static&&o.calendarContainer.parentNode){var ge=o.calendarContainer.parentNode;if(ge.lastChild&&ge.removeChild(ge.lastChild),ge.parentNode){for(;ge.firstChild;)ge.parentNode.insertBefore(ge.firstChild,ge);ge.parentNode.removeChild(ge)}}else o.calendarContainer.parentNode.removeChild(o.calendarContainer);o.altInput&&(o.input.type="text",o.altInput.parentNode&&o.altInput.parentNode.removeChild(o.altInput),delete o.altInput),o.input&&(o.input.type=o.input._type,o.input.classList.remove("flatpickr-input"),o.input.removeAttribute("readonly")),["_showTimeInput","latestSelectedDateObj","_hideNextMonthArrow","_hidePrevMonthArrow","__hideNextMonthArrow","__hidePrevMonthArrow","isMobile","isOpen","selectedDateElem","minDateHasTime","maxDateHasTime","days","daysContainer","_input","_positionElement","innerContainer","rContainer","monthNav","todayDateElem","calendarContainer","weekdayContainer","prevMonthNav","nextMonthNav","monthsDropdownContainer","currentMonthElement","currentYearElement","navigationCurrentMonth","selectedDateElem","config"].forEach(function(ye){try{delete o[ye]}catch{}})}function Ue(me){return o.calendarContainer.contains(me)}function tt(me){if(o.isOpen&&!o.config.inline){var ge=getEventTarget(me),ye=Ue(ge),ve=ge===o.input||ge===o.altInput||o.element.contains(ge)||me.path&&me.path.indexOf&&(~me.path.indexOf(o.input)||~me.path.indexOf(o.altInput)),Qe=!ve&&!ye&&!Ue(me.relatedTarget),Ae=!o.config.ignoredFocusElements.some(function(Ne){return Ne.contains(ge)});Qe&&Ae&&(o.config.allowInput&&o.setDate(o._input.value,!1,o.config.altInput?o.config.altFormat:o.config.dateFormat),o.timeContainer!==void 0&&o.minuteElement!==void 0&&o.hourElement!==void 0&&o.input.value!==""&&o.input.value!==void 0&&q(),o.close(),o.config&&o.config.mode==="range"&&o.selectedDates.length===1&&o.clear(!1))}}function it(me){if(!(!me||o.config.minDate&&me<o.config.minDate.getFullYear()||o.config.maxDate&&me>o.config.maxDate.getFullYear())){var ge=me,ye=o.currentYear!==ge;o.currentYear=ge||o.currentYear,o.config.maxDate&&o.currentYear===o.config.maxDate.getFullYear()?o.currentMonth=Math.min(o.config.maxDate.getMonth(),o.currentMonth):o.config.minDate&&o.currentYear===o.config.minDate.getFullYear()&&(o.currentMonth=Math.max(o.config.minDate.getMonth(),o.currentMonth)),ye&&(o.redraw(),He("onYearChange"),we())}}function Je(me,ge){var ye;ge===void 0&&(ge=!0);var ve=o.parseDate(me,void 0,ge);if(o.config.minDate&&ve&&compareDates(ve,o.config.minDate,ge!==void 0?ge:!o.minDateHasTime)<0||o.config.maxDate&&ve&&compareDates(ve,o.config.maxDate,ge!==void 0?ge:!o.maxDateHasTime)>0)return!1;if(!o.config.enable&&o.config.disable.length===0)return!0;if(ve===void 0)return!1;for(var Qe=!!o.config.enable,Ae=(ye=o.config.enable)!==null&&ye!==void 0?ye:o.config.disable,Ne=0,Le=void 0;Ne<Ae.length;Ne++){if(Le=Ae[Ne],typeof Le=="function"&&Le(ve))return Qe;if(Le instanceof Date&&ve!==void 0&&Le.getTime()===ve.getTime())return Qe;if(typeof Le=="string"){var Xe=o.parseDate(Le,void 0,!0);return Xe&&Xe.getTime()===ve.getTime()?Qe:!Qe}else if(typeof Le=="object"&&ve!==void 0&&Le.from&&Le.to&&ve.getTime()>=Le.from.getTime()&&ve.getTime()<=Le.to.getTime())return Qe}return!Qe}function ft(me){return o.daysContainer!==void 0?me.className.indexOf("hidden")===-1&&me.className.indexOf("flatpickr-disabled")===-1&&o.daysContainer.contains(me):!1}function Ii(me){var ge=me.target===o._input,ye=o._input.value.trimEnd()!==ii();ge&&ye&&!(me.relatedTarget&&Ue(me.relatedTarget))&&o.setDate(o._input.value,!0,me.target===o.altInput?o.config.altFormat:o.config.dateFormat)}function ai(me){var ge=getEventTarget(me),ye=o.config.wrap?h.contains(ge):ge===o._input,ve=o.config.allowInput,Qe=o.isOpen&&(!ve||!ye),Ae=o.config.inline&&ye&&!ve;if(me.keyCode===13&&ye){if(ve)return o.setDate(o._input.value,!0,ge===o.altInput?o.config.altFormat:o.config.dateFormat),o.close(),ge.blur();o.open()}else if(Ue(ge)||Qe||Ae){var Ne=!!o.timeContainer&&o.timeContainer.contains(ge);switch(me.keyCode){case 13:Ne?(me.preventDefault(),q(),Jt()):di(me);break;case 27:me.preventDefault(),Jt();break;case 8:case 46:ye&&!o.config.allowInput&&(me.preventDefault(),o.clear());break;case 37:case 39:if(!Ne&&!ye){me.preventDefault();var Le=k();if(o.daysContainer!==void 0&&(ve===!1||Le&&ft(Le))){var Xe=me.keyCode===39?1:-1;me.ctrlKey?(me.stopPropagation(),Ze(Xe),xe(Oe(1),0)):xe(void 0,Xe)}}else o.hourElement&&o.hourElement.focus();break;case 38:case 40:me.preventDefault();var Re=me.keyCode===40?1:-1;o.daysContainer&&ge.$i!==void 0||ge===o.input||ge===o.altInput?me.ctrlKey?(me.stopPropagation(),it(o.currentYear-Re),xe(Oe(1),0)):Ne||xe(void 0,Re*7):ge===o.currentYearElement?it(o.currentYear-Re):o.config.enableTime&&(!Ne&&o.hourElement&&o.hourElement.focus(),q(me),o._debouncedChange());break;case 9:if(Ne){var Be=[o.hourElement,o.minuteElement,o.secondElement,o.amPM].concat(o.pluginElements).filter(function(Ke){return Ke}),We=Be.indexOf(ge);if(We!==-1){var nt=Be[We+(me.shiftKey?-1:1)];me.preventDefault(),(nt||o._input).focus()}}else!o.config.noCalendar&&o.daysContainer&&o.daysContainer.contains(ge)&&me.shiftKey&&(me.preventDefault(),o._input.focus());break}}if(o.amPM!==void 0&&ge===o.amPM)switch(me.key){case o.l10n.amPM[0].charAt(0):case o.l10n.amPM[0].charAt(0).toLowerCase():o.amPM.textContent=o.l10n.amPM[0],te(),st();break;case o.l10n.amPM[1].charAt(0):case o.l10n.amPM[1].charAt(0).toLowerCase():o.amPM.textContent=o.l10n.amPM[1],te(),st();break}(ye||Ue(ge))&&He("onKeyDown",me)}function Zt(me,ge){if(ge===void 0&&(ge="flatpickr-day"),!(o.selectedDates.length!==1||me&&(!me.classList.contains(ge)||me.classList.contains("flatpickr-disabled")))){for(var ye=me?me.dateObj.getTime():o.days.firstElementChild.dateObj.getTime(),ve=o.parseDate(o.selectedDates[0],void 0,!0).getTime(),Qe=Math.min(ye,o.selectedDates[0].getTime()),Ae=Math.max(ye,o.selectedDates[0].getTime()),Ne=!1,Le=0,Xe=0,Re=Qe;Re<Ae;Re+=duration.DAY)Je(new Date(Re),!0)||(Ne=Ne||Re>Qe&&Re<Ae,Re<ve&&(!Le||Re>Le)?Le=Re:Re>ve&&(!Xe||Re<Xe)&&(Xe=Re));var Be=Array.from(o.rContainer.querySelectorAll("*:nth-child(-n+"+o.config.showMonths+") > ."+ge));Be.forEach(function(We){var nt=We.dateObj,Ke=nt.getTime(),Pt=Le>0&&Ke<Le||Xe>0&&Ke>Xe;if(Pt){We.classList.add("notAllowed"),["inRange","startRange","endRange"].forEach(function(gt){We.classList.remove(gt)});return}else if(Ne&&!Pt)return;["startRange","inRange","endRange","notAllowed"].forEach(function(gt){We.classList.remove(gt)}),me!==void 0&&(me.classList.add(ye<=o.selectedDates[0].getTime()?"startRange":"endRange"),ve<ye&&Ke===ve?We.classList.add("startRange"):ve>ye&&Ke===ve&&We.classList.add("endRange"),Ke>=Le&&(Xe===0||Ke<=Xe)&&isBetween(Ke,ve,ye)&&We.classList.add("inRange"))})}}function Vi(){o.isOpen&&!o.config.static&&!o.config.inline&&Xt()}function Fi(me,ge){if(ge===void 0&&(ge=o._positionElement),o.isMobile===!0){if(me){me.preventDefault();var ye=getEventTarget(me);ye&&ye.blur()}o.mobileInput!==void 0&&(o.mobileInput.focus(),o.mobileInput.click()),He("onOpen");return}else if(o._input.disabled||o.config.inline)return;var ve=o.isOpen;o.isOpen=!0,ve||(o.calendarContainer.classList.add("open"),o._input.classList.add("active"),He("onOpen"),Xt(ge)),o.config.enableTime===!0&&o.config.noCalendar===!0&&o.config.allowInput===!1&&(me===void 0||!o.timeContainer.contains(me.relatedTarget))&&setTimeout(function(){return o.hourElement.select()},50)}function li(me){return function(ge){var ye=o.config["_"+me+"Date"]=o.parseDate(ge,o.config.dateFormat),ve=o.config["_"+(me==="min"?"max":"min")+"Date"];ye!==void 0&&(o[me==="min"?"minDateHasTime":"maxDateHasTime"]=ye.getHours()>0||ye.getMinutes()>0||ye.getSeconds()>0),o.selectedDates&&(o.selectedDates=o.selectedDates.filter(function(Qe){return Je(Qe)}),!o.selectedDates.length&&me==="min"&&ne(ye),st()),o.daysContainer&&(ui(),ye!==void 0?o.currentYearElement[me]=ye.getFullYear().toString():o.currentYearElement.removeAttribute(me),o.currentYearElement.disabled=!!ve&&ye!==void 0&&ve.getFullYear()===ye.getFullYear())}}function Ni(){var me=["wrap","weekNumbers","allowInput","allowInvalidPreload","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"],ge=__assign(__assign({},JSON.parse(JSON.stringify(h.dataset||{}))),r),ye={};o.config.parseDate=ge.parseDate,o.config.formatDate=ge.formatDate,Object.defineProperty(o.config,"enable",{get:function(){return o.config._enable},set:function(Be){o.config._enable=pi(Be)}}),Object.defineProperty(o.config,"disable",{get:function(){return o.config._disable},set:function(Be){o.config._disable=pi(Be)}});var ve=ge.mode==="time";if(!ge.dateFormat&&(ge.enableTime||ve)){var Qe=flatpickr.defaultConfig.dateFormat||defaults$2.dateFormat;ye.dateFormat=ge.noCalendar||ve?"H:i"+(ge.enableSeconds?":S":""):Qe+" H:i"+(ge.enableSeconds?":S":"")}if(ge.altInput&&(ge.enableTime||ve)&&!ge.altFormat){var Ae=flatpickr.defaultConfig.altFormat||defaults$2.altFormat;ye.altFormat=ge.noCalendar||ve?"h:i"+(ge.enableSeconds?":S K":" K"):Ae+(" h:i"+(ge.enableSeconds?":S":"")+" K")}Object.defineProperty(o.config,"minDate",{get:function(){return o.config._minDate},set:li("min")}),Object.defineProperty(o.config,"maxDate",{get:function(){return o.config._maxDate},set:li("max")});var Ne=function(Be){return function(We){o.config[Be==="min"?"_minTime":"_maxTime"]=o.parseDate(We,"H:i:S")}};Object.defineProperty(o.config,"minTime",{get:function(){return o.config._minTime},set:Ne("min")}),Object.defineProperty(o.config,"maxTime",{get:function(){return o.config._maxTime},set:Ne("max")}),ge.mode==="time"&&(o.config.noCalendar=!0,o.config.enableTime=!0),Object.assign(o.config,ye,ge);for(var Le=0;Le<me.length;Le++)o.config[me[Le]]=o.config[me[Le]]===!0||o.config[me[Le]]==="true";HOOKS.filter(function(Be){return o.config[Be]!==void 0}).forEach(function(Be){o.config[Be]=arrayify(o.config[Be]||[]).map(A)}),o.isMobile=!o.config.disableMobile&&!o.config.inline&&o.config.mode==="single"&&!o.config.disable.length&&!o.config.enable&&!o.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);for(var Le=0;Le<o.config.plugins.length;Le++){var Xe=o.config.plugins[Le](o)||{};for(var Re in Xe)HOOKS.indexOf(Re)>-1?o.config[Re]=arrayify(Xe[Re]).map(A).concat(o.config[Re]):typeof ge[Re]>"u"&&(o.config[Re]=Xe[Re])}ge.altInputClass||(o.config.altInputClass=ci().className+" "+o.config.altInputClass),He("onParseConfig")}function ci(){return o.config.wrap?h.querySelector("[data-input]"):h}function hi(){typeof o.config.locale!="object"&&typeof flatpickr.l10ns[o.config.locale]>"u"&&o.config.errorHandler(new Error("flatpickr: invalid locale "+o.config.locale)),o.l10n=__assign(__assign({},flatpickr.l10ns.default),typeof o.config.locale=="object"?o.config.locale:o.config.locale!=="default"?flatpickr.l10ns[o.config.locale]:void 0),tokenRegex.D="("+o.l10n.weekdays.shorthand.join("|")+")",tokenRegex.l="("+o.l10n.weekdays.longhand.join("|")+")",tokenRegex.M="("+o.l10n.months.shorthand.join("|")+")",tokenRegex.F="("+o.l10n.months.longhand.join("|")+")",tokenRegex.K="("+o.l10n.amPM[0]+"|"+o.l10n.amPM[1]+"|"+o.l10n.amPM[0].toLowerCase()+"|"+o.l10n.amPM[1].toLowerCase()+")";var me=__assign(__assign({},r),JSON.parse(JSON.stringify(h.dataset||{})));me.time_24hr===void 0&&flatpickr.defaultConfig.time_24hr===void 0&&(o.config.time_24hr=o.l10n.time_24hr),o.formatDate=createDateFormatter(o),o.parseDate=createDateParser({config:o.config,l10n:o.l10n})}function Xt(me){if(typeof o.config.position=="function")return void o.config.position(o,me);if(o.calendarContainer!==void 0){He("onPreCalendarPosition");var ge=me||o._positionElement,ye=Array.prototype.reduce.call(o.calendarContainer.children,(function(on,an){return on+an.offsetHeight}),0),ve=o.calendarContainer.offsetWidth,Qe=o.config.position.split(" "),Ae=Qe[0],Ne=Qe.length>1?Qe[1]:null,Le=ge.getBoundingClientRect(),Xe=window.innerHeight-Le.bottom,Re=Ae==="above"||Ae!=="below"&&Xe<ye&&Le.top>ye,Be=window.pageYOffset+Le.top+(Re?-ye-2:ge.offsetHeight+2);if(toggleClass(o.calendarContainer,"arrowTop",!Re),toggleClass(o.calendarContainer,"arrowBottom",Re),!o.config.inline){var We=window.pageXOffset+Le.left,nt=!1,Ke=!1;Ne==="center"?(We-=(ve-Le.width)/2,nt=!0):Ne==="right"&&(We-=ve-Le.width,Ke=!0),toggleClass(o.calendarContainer,"arrowLeft",!nt&&!Ke),toggleClass(o.calendarContainer,"arrowCenter",nt),toggleClass(o.calendarContainer,"arrowRight",Ke);var Pt=window.document.body.offsetWidth-(window.pageXOffset+Le.right),gt=We+ve>window.document.body.offsetWidth,Ki=Pt+ve>window.document.body.offsetWidth;if(toggleClass(o.calendarContainer,"rightMost",gt),!o.config.static)if(o.calendarContainer.style.top=Be+"px",!gt)o.calendarContainer.style.left=We+"px",o.calendarContainer.style.right="auto";else if(!Ki)o.calendarContainer.style.left="auto",o.calendarContainer.style.right=Pt+"px";else{var ni=ji();if(ni===void 0)return;var Ji=window.document.body.offsetWidth,en=Math.max(0,Ji/2-ve/2),tn=".flatpickr-calendar.centerMost:before",nn=".flatpickr-calendar.centerMost:after",rn=ni.cssRules.length,sn="{left:"+Le.left+"px;right:auto;}";toggleClass(o.calendarContainer,"rightMost",!1),toggleClass(o.calendarContainer,"centerMost",!0),ni.insertRule(tn+","+nn+sn,rn),o.calendarContainer.style.left=en+"px",o.calendarContainer.style.right="auto"}}}}function ji(){for(var me=null,ge=0;ge<document.styleSheets.length;ge++){var ye=document.styleSheets[ge];if(ye.cssRules){try{ye.cssRules}catch{continue}me=ye;break}}return me??Zi()}function Zi(){var me=document.createElement("style");return document.head.appendChild(me),me.sheet}function ui(){o.config.noCalendar||o.isMobile||(we(),_t(),ke())}function Jt(){o._input.focus(),window.navigator.userAgent.indexOf("MSIE")!==-1||navigator.msMaxTouchPoints!==void 0?setTimeout(o.close,0):o.close()}function di(me){me.preventDefault(),me.stopPropagation();var ge=function(Be){return Be.classList&&Be.classList.contains("flatpickr-day")&&!Be.classList.contains("flatpickr-disabled")&&!Be.classList.contains("notAllowed")},ye=findParent(getEventTarget(me),ge);if(ye!==void 0){var ve=ye,Qe=o.latestSelectedDateObj=new Date(ve.dateObj.getTime()),Ae=(Qe.getMonth()<o.currentMonth||Qe.getMonth()>o.currentMonth+o.config.showMonths-1)&&o.config.mode!=="range";if(o.selectedDateElem=ve,o.config.mode==="single")o.selectedDates=[Qe];else if(o.config.mode==="multiple"){var Ne=ti(Qe);Ne?o.selectedDates.splice(parseInt(Ne),1):o.selectedDates.push(Qe)}else o.config.mode==="range"&&(o.selectedDates.length===2&&o.clear(!1,!1),o.latestSelectedDateObj=Qe,o.selectedDates.push(Qe),compareDates(Qe,o.selectedDates[0],!0)!==0&&o.selectedDates.sort(function(Be,We){return Be.getTime()-We.getTime()}));if(te(),Ae){var Le=o.currentYear!==Qe.getFullYear();o.currentYear=Qe.getFullYear(),o.currentMonth=Qe.getMonth(),Le&&(He("onYearChange"),we()),He("onMonthChange")}if(_t(),ke(),st(),!Ae&&o.config.mode!=="range"&&o.config.showMonths===1?ue(ve):o.selectedDateElem!==void 0&&o.hourElement===void 0&&o.selectedDateElem&&o.selectedDateElem.focus(),o.hourElement!==void 0&&o.hourElement!==void 0&&o.hourElement.focus(),o.config.closeOnSelect){var Xe=o.config.mode==="single"&&!o.config.enableTime,Re=o.config.mode==="range"&&o.selectedDates.length===2&&!o.config.enableTime;(Xe||Re)&&Jt()}pe()}}var qt={locale:[hi,Ve],showMonths:[Ee,R,Me],minDate:[he],maxDate:[he],positionElement:[mi],clickOpens:[function(){o.config.clickOpens===!0?(le(o._input,"focus",o.open),le(o._input,"click",o.open)):(o._input.removeEventListener("focus",o.open),o._input.removeEventListener("click",o.open))}]};function Xi(me,ge){if(me!==null&&typeof me=="object"){Object.assign(o.config,me);for(var ye in me)qt[ye]!==void 0&&qt[ye].forEach(function(ve){return ve()})}else o.config[me]=ge,qt[me]!==void 0?qt[me].forEach(function(ve){return ve()}):HOOKS.indexOf(me)>-1&&(o.config[me]=arrayify(ge));o.redraw(),st(!0)}function fi(me,ge){var ye=[];if(me instanceof Array)ye=me.map(function(ve){return o.parseDate(ve,ge)});else if(me instanceof Date||typeof me=="number")ye=[o.parseDate(me,ge)];else if(typeof me=="string")switch(o.config.mode){case"single":case"time":ye=[o.parseDate(me,ge)];break;case"multiple":ye=me.split(o.config.conjunction).map(function(ve){return o.parseDate(ve,ge)});break;case"range":ye=me.split(o.l10n.rangeSeparator).map(function(ve){return o.parseDate(ve,ge)});break}else o.config.errorHandler(new Error("Invalid date supplied: "+JSON.stringify(me)));o.selectedDates=o.config.allowInvalidPreload?ye:ye.filter(function(ve){return ve instanceof Date&&Je(ve,!1)}),o.config.mode==="range"&&o.selectedDates.sort(function(ve,Qe){return ve.getTime()-Qe.getTime()})}function qi(me,ge,ye){if(ge===void 0&&(ge=!1),ye===void 0&&(ye=o.config.dateFormat),me!==0&&!me||me instanceof Array&&me.length===0)return o.clear(ge);fi(me,ye),o.latestSelectedDateObj=o.selectedDates[o.selectedDates.length-1],o.redraw(),he(void 0,ge),ne(),o.selectedDates.length===0&&o.clear(!1),st(ge),ge&&He("onChange")}function pi(me){return me.slice().map(function(ge){return typeof ge=="string"||typeof ge=="number"||ge instanceof Date?o.parseDate(ge,void 0,!0):ge&&typeof ge=="object"&&ge.from&&ge.to?{from:o.parseDate(ge.from,void 0),to:o.parseDate(ge.to,void 0)}:ge}).filter(function(ge){return ge})}function _i(){o.selectedDates=[],o.now=o.parseDate(o.config.now)||new Date;var me=o.config.defaultDate||((o.input.nodeName==="INPUT"||o.input.nodeName==="TEXTAREA")&&o.input.placeholder&&o.input.value===o.input.placeholder?null:o.input.value);me&&fi(me,o.config.dateFormat),o._initialDate=o.selectedDates.length>0?o.selectedDates[0]:o.config.minDate&&o.config.minDate.getTime()>o.now.getTime()?o.config.minDate:o.config.maxDate&&o.config.maxDate.getTime()<o.now.getTime()?o.config.maxDate:o.now,o.currentYear=o._initialDate.getFullYear(),o.currentMonth=o._initialDate.getMonth(),o.selectedDates.length>0&&(o.latestSelectedDateObj=o.selectedDates[0]),o.config.minTime!==void 0&&(o.config.minTime=o.parseDate(o.config.minTime,"H:i")),o.config.maxTime!==void 0&&(o.config.maxTime=o.parseDate(o.config.maxTime,"H:i")),o.minDateHasTime=!!o.config.minDate&&(o.config.minDate.getHours()>0||o.config.minDate.getMinutes()>0||o.config.minDate.getSeconds()>0),o.maxDateHasTime=!!o.config.maxDate&&(o.config.maxDate.getHours()>0||o.config.maxDate.getMinutes()>0||o.config.maxDate.getSeconds()>0)}function zi(){if(o.input=ci(),!o.input){o.config.errorHandler(new Error("Invalid input element specified"));return}o.input._type=o.input.type,o.input.type="text",o.input.classList.add("flatpickr-input"),o._input=o.input,o.config.altInput&&(o.altInput=createElement(o.input.nodeName,o.config.altInputClass),o._input=o.altInput,o.altInput.placeholder=o.input.placeholder,o.altInput.disabled=o.input.disabled,o.altInput.required=o.input.required,o.altInput.tabIndex=o.input.tabIndex,o.altInput.type="text",o.input.setAttribute("type","hidden"),!o.config.static&&o.input.parentNode&&o.input.parentNode.insertBefore(o.altInput,o.input.nextSibling)),o.config.allowInput||o._input.setAttribute("readonly","readonly"),mi()}function mi(){o._positionElement=o.config.positionElement||o._input}function Yi(){var me=o.config.enableTime?o.config.noCalendar?"time":"datetime-local":"date";o.mobileInput=createElement("input",o.input.className+" flatpickr-mobile"),o.mobileInput.tabIndex=1,o.mobileInput.type=me,o.mobileInput.disabled=o.input.disabled,o.mobileInput.required=o.input.required,o.mobileInput.placeholder=o.input.placeholder,o.mobileFormatStr=me==="datetime-local"?"Y-m-d\\TH:i:S":me==="date"?"Y-m-d":"H:i:S",o.selectedDates.length>0&&(o.mobileInput.defaultValue=o.mobileInput.value=o.formatDate(o.selectedDates[0],o.mobileFormatStr)),o.config.minDate&&(o.mobileInput.min=o.formatDate(o.config.minDate,"Y-m-d")),o.config.maxDate&&(o.mobileInput.max=o.formatDate(o.config.maxDate,"Y-m-d")),o.input.getAttribute("step")&&(o.mobileInput.step=String(o.input.getAttribute("step"))),o.input.type="hidden",o.altInput!==void 0&&(o.altInput.type="hidden");try{o.input.parentNode&&o.input.parentNode.insertBefore(o.mobileInput,o.input.nextSibling)}catch{}le(o.mobileInput,"change",function(ge){o.setDate(getEventTarget(ge).value,!1,o.mobileFormatStr),He("onChange"),He("onClose")})}function Wi(me){if(o.isOpen===!0)return o.close();o.open(me)}function He(me,ge){if(o.config!==void 0){var ye=o.config[me];if(ye!==void 0&&ye.length>0)for(var ve=0;ye[ve]&&ve<ye.length;ve++)ye[ve](o.selectedDates,o.input.value,o,ge);me==="onChange"&&(o.input.dispatchEvent(ei("change")),o.input.dispatchEvent(ei("input")))}}function ei(me){var ge=document.createEvent("Event");return ge.initEvent(me,!0,!0),ge}function ti(me){for(var ge=0;ge<o.selectedDates.length;ge++){var ye=o.selectedDates[ge];if(ye instanceof Date&&compareDates(ye,me)===0)return""+ge}return!1}function Hi(me){return o.config.mode!=="range"||o.selectedDates.length<2?!1:compareDates(me,o.selectedDates[0])>=0&&compareDates(me,o.selectedDates[1])<=0}function _t(){o.config.noCalendar||o.isMobile||!o.monthNav||(o.yearElements.forEach(function(me,ge){var ye=new Date(o.currentYear,o.currentMonth,1);ye.setMonth(o.currentMonth+ge),o.config.showMonths>1||o.config.monthSelectorType==="static"?o.monthElements[ge].textContent=monthToStr(ye.getMonth(),o.config.shorthandCurrentMonth,o.l10n)+" ":o.monthsDropdownContainer.value=ye.getMonth().toString(),me.value=ye.getFullYear().toString()}),o._hidePrevMonthArrow=o.config.minDate!==void 0&&(o.currentYear===o.config.minDate.getFullYear()?o.currentMonth<=o.config.minDate.getMonth():o.currentYear<o.config.minDate.getFullYear()),o._hideNextMonthArrow=o.config.maxDate!==void 0&&(o.currentYear===o.config.maxDate.getFullYear()?o.currentMonth+1>o.config.maxDate.getMonth():o.currentYear>o.config.maxDate.getFullYear()))}function ii(me){var ge=me||(o.config.altInput?o.config.altFormat:o.config.dateFormat);return o.selectedDates.map(function(ye){return o.formatDate(ye,ge)}).filter(function(ye,ve,Qe){return o.config.mode!=="range"||o.config.enableTime||Qe.indexOf(ye)===ve}).join(o.config.mode!=="range"?o.config.conjunction:o.l10n.rangeSeparator)}function st(me){me===void 0&&(me=!0),o.mobileInput!==void 0&&o.mobileFormatStr&&(o.mobileInput.value=o.latestSelectedDateObj!==void 0?o.formatDate(o.latestSelectedDateObj,o.mobileFormatStr):""),o.input.value=ii(o.config.dateFormat),o.altInput!==void 0&&(o.altInput.value=ii(o.config.altFormat)),me!==!1&&He("onValueUpdate")}function Ui(me){var ge=getEventTarget(me),ye=o.prevMonthNav.contains(ge),ve=o.nextMonthNav.contains(ge);ye||ve?Ze(ye?-1:1):o.yearElements.indexOf(ge)>=0?ge.select():ge.classList.contains("arrowUp")?o.changeYear(o.currentYear+1):ge.classList.contains("arrowDown")&&o.changeYear(o.currentYear-1)}function Gi(me){me.preventDefault();var ge=me.type==="keydown",ye=getEventTarget(me),ve=ye;o.amPM!==void 0&&ye===o.amPM&&(o.amPM.textContent=o.l10n.amPM[int(o.amPM.textContent===o.l10n.amPM[0])]);var Qe=parseFloat(ve.getAttribute("min")),Ae=parseFloat(ve.getAttribute("max")),Ne=parseFloat(ve.getAttribute("step")),Le=parseInt(ve.value,10),Xe=me.delta||(ge?me.which===38?1:-1:0),Re=Le+Ne*Xe;if(typeof ve.value<"u"&&ve.value.length===2){var Be=ve===o.hourElement,We=ve===o.minuteElement;Re<Qe?(Re=Ae+Re+int(!Be)+(int(Be)&&int(!o.amPM)),We&&se(void 0,-1,o.hourElement)):Re>Ae&&(Re=ve===o.hourElement?Re-Ae-int(!o.amPM):Qe,We&&se(void 0,1,o.hourElement)),o.amPM&&Be&&(Ne===1?Re+Le===23:Math.abs(Re-Le)>Ne)&&(o.amPM.textContent=o.l10n.amPM[int(o.amPM.textContent===o.l10n.amPM[0])]),ve.value=pad(Re)}}return g(),o}function _flatpickr(h,r){for(var o=Array.prototype.slice.call(h).filter(function(A){return A instanceof HTMLElement}),u=[],g=0;g<o.length;g++){var k=o[g];try{if(k.getAttribute("data-fp-omit")!==null)continue;k._flatpickr!==void 0&&(k._flatpickr.destroy(),k._flatpickr=void 0),k._flatpickr=FlatpickrInstance(k,r||{}),u.push(k._flatpickr)}catch(A){console.error(A)}}return u.length===1?u[0]:u}typeof HTMLElement<"u"&&typeof HTMLCollection<"u"&&typeof NodeList<"u"&&(HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(h){return _flatpickr(this,h)},HTMLElement.prototype.flatpickr=function(h){return _flatpickr([this],h)});var flatpickr=function(h,r){return typeof h=="string"?_flatpickr(window.document.querySelectorAll(h),r):h instanceof Node?_flatpickr([h],r):_flatpickr(h,r)};flatpickr.defaultConfig={};flatpickr.l10ns={en:__assign({},english),default:__assign({},english)};flatpickr.localize=function(h){flatpickr.l10ns.default=__assign(__assign({},flatpickr.l10ns.default),h)};flatpickr.setDefaults=function(h){flatpickr.defaultConfig=__assign(__assign({},flatpickr.defaultConfig),h)};flatpickr.parseDate=createDateParser({});flatpickr.formatDate=createDateFormatter({});flatpickr.compareDates=compareDates;typeof jQuery<"u"&&typeof jQuery.fn<"u"&&(jQuery.fn.flatpickr=function(h){return _flatpickr(this,h)});Date.prototype.fp_incr=function(h){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+(typeof h=="string"?parseInt(h,10):h))};typeof window<"u"&&(window.flatpickr=flatpickr);let rangeFrom=[],rangeTo=[];(()=>{let h="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(r=>r?parseInt(r,36):1);for(let r=0,o=0;r<h.length;r++)(r%2?rangeTo:rangeFrom).push(o=o+h[r])})();function isExtendingChar(h){if(h<768)return!1;for(let r=0,o=rangeFrom.length;;){let u=r+o>>1;if(h<rangeFrom[u])o=u;else if(h>=rangeTo[u])r=u+1;else return!0;if(r==o)return!1}}function isRegionalIndicator(h){return h>=127462&&h<=127487}const ZWJ=8205;function findClusterBreak$1(h,r,o=!0,u=!0){return(o?nextClusterBreak:prevClusterBreak)(h,r,u)}function nextClusterBreak(h,r,o){if(r==h.length)return r;r&&surrogateLow$1(h.charCodeAt(r))&&surrogateHigh$1(h.charCodeAt(r-1))&&r--;let u=codePointAt$1(h,r);for(r+=codePointSize$1(u);r<h.length;){let g=codePointAt$1(h,r);if(u==ZWJ||g==ZWJ||o&&isExtendingChar(g))r+=codePointSize$1(g),u=g;else if(isRegionalIndicator(g)){let k=0,A=r-2;for(;A>=0&&isRegionalIndicator(codePointAt$1(h,A));)k++,A-=2;if(k%2==0)break;r+=2}else break}return r}function prevClusterBreak(h,r,o){for(;r>0;){let u=nextClusterBreak(h,r-2,o);if(u<r)return u;r--}return 0}function codePointAt$1(h,r){let o=h.charCodeAt(r);if(!surrogateHigh$1(o)||r+1==h.length)return o;let u=h.charCodeAt(r+1);return surrogateLow$1(u)?(o-55296<<10)+(u-56320)+65536:o}function surrogateLow$1(h){return h>=56320&&h<57344}function surrogateHigh$1(h){return h>=55296&&h<56320}function codePointSize$1(h){return h<65536?1:2}class Text{lineAt(r){if(r<0||r>this.length)throw new RangeError(`Invalid position ${r} in document of length ${this.length}`);return this.lineInner(r,!1,1,0)}line(r){if(r<1||r>this.lines)throw new RangeError(`Invalid line number ${r} in ${this.lines}-line document`);return this.lineInner(r,!0,1,0)}replace(r,o,u){[r,o]=clip(this,r,o);let g=[];return this.decompose(0,r,g,2),u.length&&u.decompose(0,u.length,g,3),this.decompose(o,this.length,g,1),TextNode.from(g,this.length-(o-r)+u.length)}append(r){return this.replace(this.length,this.length,r)}slice(r,o=this.length){[r,o]=clip(this,r,o);let u=[];return this.decompose(r,o,u,0),TextNode.from(u,o-r)}eq(r){if(r==this)return!0;if(r.length!=this.length||r.lines!=this.lines)return!1;let o=this.scanIdentical(r,1),u=this.length-this.scanIdentical(r,-1),g=new RawTextCursor(this),k=new RawTextCursor(r);for(let A=o,R=o;;){if(g.next(A),k.next(A),A=0,g.lineBreak!=k.lineBreak||g.done!=k.done||g.value!=k.value)return!1;if(R+=g.value.length,g.done||R>=u)return!0}}iter(r=1){return new RawTextCursor(this,r)}iterRange(r,o=this.length){return new PartialTextCursor(this,r,o)}iterLines(r,o){let u;if(r==null)u=this.iter();else{o==null&&(o=this.lines+1);let g=this.line(r).from;u=this.iterRange(g,Math.max(g,o==this.lines+1?this.length:o<=1?0:this.line(o-1).to))}return new LineCursor(u)}toString(){return this.sliceString(0)}toJSON(){let r=[];return this.flatten(r),r}constructor(){}static of(r){if(r.length==0)throw new RangeError("A document must have at least one line");return r.length==1&&!r[0]?Text.empty:r.length<=32?new TextLeaf(r):TextNode.from(TextLeaf.split(r,[]))}}class TextLeaf extends Text{constructor(r,o=textLength(r)){super(),this.text=r,this.length=o}get lines(){return this.text.length}get children(){return null}lineInner(r,o,u,g){for(let k=0;;k++){let A=this.text[k],R=g+A.length;if((o?u:R)>=r)return new Line$1(g,R,u,A);g=R+1,u++}}decompose(r,o,u,g){let k=r<=0&&o>=this.length?this:new TextLeaf(sliceText(this.text,r,o),Math.min(o,this.length)-Math.max(0,r));if(g&1){let A=u.pop(),R=appendText(k.text,A.text.slice(),0,k.length);if(R.length<=32)u.push(new TextLeaf(R,A.length+k.length));else{let q=R.length>>1;u.push(new TextLeaf(R.slice(0,q)),new TextLeaf(R.slice(q)))}}else u.push(k)}replace(r,o,u){if(!(u instanceof TextLeaf))return super.replace(r,o,u);[r,o]=clip(this,r,o);let g=appendText(this.text,appendText(u.text,sliceText(this.text,0,r)),o),k=this.length+u.length-(o-r);return g.length<=32?new TextLeaf(g,k):TextNode.from(TextLeaf.split(g,[]),k)}sliceString(r,o=this.length,u=`
`){[r,o]=clip(this,r,o);let g="";for(let k=0,A=0;k<=o&&A<this.text.length;A++){let R=this.text[A],q=k+R.length;k>r&&A&&(g+=u),r<q&&o>k&&(g+=R.slice(Math.max(0,r-k),o-k)),k=q+1}return g}flatten(r){for(let o of this.text)r.push(o)}scanIdentical(){return 0}static split(r,o){let u=[],g=-1;for(let k of r)u.push(k),g+=k.length+1,u.length==32&&(o.push(new TextLeaf(u,g)),u=[],g=-1);return g>-1&&o.push(new TextLeaf(u,g)),o}}class TextNode extends Text{constructor(r,o){super(),this.children=r,this.length=o,this.lines=0;for(let u of r)this.lines+=u.lines}lineInner(r,o,u,g){for(let k=0;;k++){let A=this.children[k],R=g+A.length,q=u+A.lines-1;if((o?q:R)>=r)return A.lineInner(r,o,u,g);g=R+1,u=q+1}}decompose(r,o,u,g){for(let k=0,A=0;A<=o&&k<this.children.length;k++){let R=this.children[k],q=A+R.length;if(r<=q&&o>=A){let _=g&((A<=r?1:0)|(q>=o?2:0));A>=r&&q<=o&&!_?u.push(R):R.decompose(r-A,o-A,u,_)}A=q+1}}replace(r,o,u){if([r,o]=clip(this,r,o),u.lines<this.lines)for(let g=0,k=0;g<this.children.length;g++){let A=this.children[g],R=k+A.length;if(r>=k&&o<=R){let q=A.replace(r-k,o-k,u),_=this.lines-A.lines+q.lines;if(q.lines<_>>4&&q.lines>_>>6){let ee=this.children.slice();return ee[g]=q,new TextNode(ee,this.length-(o-r)+u.length)}return super.replace(k,R,q)}k=R+1}return super.replace(r,o,u)}sliceString(r,o=this.length,u=`
`){[r,o]=clip(this,r,o);let g="";for(let k=0,A=0;k<this.children.length&&A<=o;k++){let R=this.children[k],q=A+R.length;A>r&&k&&(g+=u),r<q&&o>A&&(g+=R.sliceString(r-A,o-A,u)),A=q+1}return g}flatten(r){for(let o of this.children)o.flatten(r)}scanIdentical(r,o){if(!(r instanceof TextNode))return 0;let u=0,[g,k,A,R]=o>0?[0,0,this.children.length,r.children.length]:[this.children.length-1,r.children.length-1,-1,-1];for(;;g+=o,k+=o){if(g==A||k==R)return u;let q=this.children[g],_=r.children[k];if(q!=_)return u+q.scanIdentical(_,o);u+=q.length+1}}static from(r,o=r.reduce((u,g)=>u+g.length+1,-1)){let u=0;for(let re of r)u+=re.lines;if(u<32){let re=[];for(let oe of r)oe.flatten(re);return new TextLeaf(re,o)}let g=Math.max(32,u>>5),k=g<<1,A=g>>1,R=[],q=0,_=-1,ee=[];function te(re){let oe;if(re.lines>k&&re instanceof TextNode)for(let le of re.children)te(le);else re.lines>A&&(q>A||!q)?(ne(),R.push(re)):re instanceof TextLeaf&&q&&(oe=ee[ee.length-1])instanceof TextLeaf&&re.lines+oe.lines<=32?(q+=re.lines,_+=re.length+1,ee[ee.length-1]=new TextLeaf(oe.text.concat(re.text),oe.length+1+re.length)):(q+re.lines>g&&ne(),q+=re.lines,_+=re.length+1,ee.push(re))}function ne(){q!=0&&(R.push(ee.length==1?ee[0]:TextNode.from(ee,_)),_=-1,q=ee.length=0)}for(let re of r)te(re);return ne(),R.length==1?R[0]:new TextNode(R,o)}}Text.empty=new TextLeaf([""],0);function textLength(h){let r=-1;for(let o of h)r+=o.length+1;return r}function appendText(h,r,o=0,u=1e9){for(let g=0,k=0,A=!0;k<h.length&&g<=u;k++){let R=h[k],q=g+R.length;q>=o&&(q>u&&(R=R.slice(0,u-g)),g<o&&(R=R.slice(o-g)),A?(r[r.length-1]+=R,A=!1):r.push(R)),g=q+1}return r}function sliceText(h,r,o){return appendText(h,[""],r,o)}class RawTextCursor{constructor(r,o=1){this.dir=o,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[r],this.offsets=[o>0?1:(r instanceof TextLeaf?r.text.length:r.children.length)<<1]}nextInner(r,o){for(this.done=this.lineBreak=!1;;){let u=this.nodes.length-1,g=this.nodes[u],k=this.offsets[u],A=k>>1,R=g instanceof TextLeaf?g.text.length:g.children.length;if(A==(o>0?R:0)){if(u==0)return this.done=!0,this.value="",this;o>0&&this.offsets[u-1]++,this.nodes.pop(),this.offsets.pop()}else if((k&1)==(o>0?0:1)){if(this.offsets[u]+=o,r==0)return this.lineBreak=!0,this.value=`
`,this;r--}else if(g instanceof TextLeaf){let q=g.text[A+(o<0?-1:0)];if(this.offsets[u]+=o,q.length>Math.max(0,r))return this.value=r==0?q:o>0?q.slice(r):q.slice(0,q.length-r),this;r-=q.length}else{let q=g.children[A+(o<0?-1:0)];r>q.length?(r-=q.length,this.offsets[u]+=o):(o<0&&this.offsets[u]--,this.nodes.push(q),this.offsets.push(o>0?1:(q instanceof TextLeaf?q.text.length:q.children.length)<<1))}}}next(r=0){return r<0&&(this.nextInner(-r,-this.dir),r=this.value.length),this.nextInner(r,this.dir)}}class PartialTextCursor{constructor(r,o,u){this.value="",this.done=!1,this.cursor=new RawTextCursor(r,o>u?-1:1),this.pos=o>u?r.length:0,this.from=Math.min(o,u),this.to=Math.max(o,u)}nextInner(r,o){if(o<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;r+=Math.max(0,o<0?this.pos-this.to:this.from-this.pos);let u=o<0?this.pos-this.from:this.to-this.pos;r>u&&(r=u),u-=r;let{value:g}=this.cursor.next(r);return this.pos+=(g.length+r)*o,this.value=g.length<=u?g:o<0?g.slice(g.length-u):g.slice(0,u),this.done=!this.value,this}next(r=0){return r<0?r=Math.max(r,this.from-this.pos):r>0&&(r=Math.min(r,this.to-this.pos)),this.nextInner(r,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class LineCursor{constructor(r){this.inner=r,this.afterBreak=!0,this.value="",this.done=!1}next(r=0){let{done:o,lineBreak:u,value:g}=this.inner.next(r);return o&&this.afterBreak?(this.value="",this.afterBreak=!1):o?(this.done=!0,this.value=""):u?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=g,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(Text.prototype[Symbol.iterator]=function(){return this.iter()},RawTextCursor.prototype[Symbol.iterator]=PartialTextCursor.prototype[Symbol.iterator]=LineCursor.prototype[Symbol.iterator]=function(){return this});let Line$1=class{constructor(r,o,u,g){this.from=r,this.to=o,this.number=u,this.text=g}get length(){return this.to-this.from}};function clip(h,r,o){return r=Math.max(0,Math.min(h.length,r)),[r,Math.max(r,Math.min(h.length,o))]}function findClusterBreak(h,r,o=!0,u=!0){return findClusterBreak$1(h,r,o,u)}function surrogateLow(h){return h>=56320&&h<57344}function surrogateHigh(h){return h>=55296&&h<56320}function codePointAt(h,r){let o=h.charCodeAt(r);if(!surrogateHigh(o)||r+1==h.length)return o;let u=h.charCodeAt(r+1);return surrogateLow(u)?(o-55296<<10)+(u-56320)+65536:o}function fromCodePoint(h){return h<=65535?String.fromCharCode(h):(h-=65536,String.fromCharCode((h>>10)+55296,(h&1023)+56320))}function codePointSize(h){return h<65536?1:2}const DefaultSplit=/\r\n?|\n/;var MapMode=(function(h){return h[h.Simple=0]="Simple",h[h.TrackDel=1]="TrackDel",h[h.TrackBefore=2]="TrackBefore",h[h.TrackAfter=3]="TrackAfter",h})(MapMode||(MapMode={}));class ChangeDesc{constructor(r){this.sections=r}get length(){let r=0;for(let o=0;o<this.sections.length;o+=2)r+=this.sections[o];return r}get newLength(){let r=0;for(let o=0;o<this.sections.length;o+=2){let u=this.sections[o+1];r+=u<0?this.sections[o]:u}return r}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(r){for(let o=0,u=0,g=0;o<this.sections.length;){let k=this.sections[o++],A=this.sections[o++];A<0?(r(u,g,k),g+=k):g+=A,u+=k}}iterChangedRanges(r,o=!1){iterChanges(this,r,o)}get invertedDesc(){let r=[];for(let o=0;o<this.sections.length;){let u=this.sections[o++],g=this.sections[o++];g<0?r.push(u,g):r.push(g,u)}return new ChangeDesc(r)}composeDesc(r){return this.empty?r:r.empty?this:composeSets(this,r)}mapDesc(r,o=!1){return r.empty?this:mapSet(this,r,o)}mapPos(r,o=-1,u=MapMode.Simple){let g=0,k=0;for(let A=0;A<this.sections.length;){let R=this.sections[A++],q=this.sections[A++],_=g+R;if(q<0){if(_>r)return k+(r-g);k+=R}else{if(u!=MapMode.Simple&&_>=r&&(u==MapMode.TrackDel&&g<r&&_>r||u==MapMode.TrackBefore&&g<r||u==MapMode.TrackAfter&&_>r))return null;if(_>r||_==r&&o<0&&!R)return r==g||o<0?k:k+q;k+=q}g=_}if(r>g)throw new RangeError(`Position ${r} is out of range for changeset of length ${g}`);return k}touchesRange(r,o=r){for(let u=0,g=0;u<this.sections.length&&g<=o;){let k=this.sections[u++],A=this.sections[u++],R=g+k;if(A>=0&&g<=o&&R>=r)return g<r&&R>o?"cover":!0;g=R}return!1}toString(){let r="";for(let o=0;o<this.sections.length;){let u=this.sections[o++],g=this.sections[o++];r+=(r?" ":"")+u+(g>=0?":"+g:"")}return r}toJSON(){return this.sections}static fromJSON(r){if(!Array.isArray(r)||r.length%2||r.some(o=>typeof o!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new ChangeDesc(r)}static create(r){return new ChangeDesc(r)}}class ChangeSet extends ChangeDesc{constructor(r,o){super(r),this.inserted=o}apply(r){if(this.length!=r.length)throw new RangeError("Applying change set to a document with the wrong length");return iterChanges(this,(o,u,g,k,A)=>r=r.replace(g,g+(u-o),A),!1),r}mapDesc(r,o=!1){return mapSet(this,r,o,!0)}invert(r){let o=this.sections.slice(),u=[];for(let g=0,k=0;g<o.length;g+=2){let A=o[g],R=o[g+1];if(R>=0){o[g]=R,o[g+1]=A;let q=g>>1;for(;u.length<q;)u.push(Text.empty);u.push(A?r.slice(k,k+A):Text.empty)}k+=A}return new ChangeSet(o,u)}compose(r){return this.empty?r:r.empty?this:composeSets(this,r,!0)}map(r,o=!1){return r.empty?this:mapSet(this,r,o,!0)}iterChanges(r,o=!1){iterChanges(this,r,o)}get desc(){return ChangeDesc.create(this.sections)}filter(r){let o=[],u=[],g=[],k=new SectionIter(this);e:for(let A=0,R=0;;){let q=A==r.length?1e9:r[A++];for(;R<q||R==q&&k.len==0;){if(k.done)break e;let ee=Math.min(k.len,q-R);addSection(g,ee,-1);let te=k.ins==-1?-1:k.off==0?k.ins:0;addSection(o,ee,te),te>0&&addInsert(u,o,k.text),k.forward(ee),R+=ee}let _=r[A++];for(;R<_;){if(k.done)break e;let ee=Math.min(k.len,_-R);addSection(o,ee,-1),addSection(g,ee,k.ins==-1?-1:k.off==0?k.ins:0),k.forward(ee),R+=ee}}return{changes:new ChangeSet(o,u),filtered:ChangeDesc.create(g)}}toJSON(){let r=[];for(let o=0;o<this.sections.length;o+=2){let u=this.sections[o],g=this.sections[o+1];g<0?r.push(u):g==0?r.push([u]):r.push([u].concat(this.inserted[o>>1].toJSON()))}return r}static of(r,o,u){let g=[],k=[],A=0,R=null;function q(ee=!1){if(!ee&&!g.length)return;A<o&&addSection(g,o-A,-1);let te=new ChangeSet(g,k);R=R?R.compose(te.map(R)):te,g=[],k=[],A=0}function _(ee){if(Array.isArray(ee))for(let te of ee)_(te);else if(ee instanceof ChangeSet){if(ee.length!=o)throw new RangeError(`Mismatched change set length (got ${ee.length}, expected ${o})`);q(),R=R?R.compose(ee.map(R)):ee}else{let{from:te,to:ne=te,insert:re}=ee;if(te>ne||te<0||ne>o)throw new RangeError(`Invalid change range ${te} to ${ne} (in doc of length ${o})`);let oe=re?typeof re=="string"?Text.of(re.split(u||DefaultSplit)):re:Text.empty,le=oe.length;if(te==ne&&le==0)return;te<A&&q(),te>A&&addSection(g,te-A,-1),addSection(g,ne-te,le),addInsert(k,g,oe),A=ne}}return _(r),q(!R),R}static empty(r){return new ChangeSet(r?[r,-1]:[],[])}static fromJSON(r){if(!Array.isArray(r))throw new RangeError("Invalid JSON representation of ChangeSet");let o=[],u=[];for(let g=0;g<r.length;g++){let k=r[g];if(typeof k=="number")o.push(k,-1);else{if(!Array.isArray(k)||typeof k[0]!="number"||k.some((A,R)=>R&&typeof A!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(k.length==1)o.push(k[0],0);else{for(;u.length<g;)u.push(Text.empty);u[g]=Text.of(k.slice(1)),o.push(k[0],u[g].length)}}}return new ChangeSet(o,u)}static createSet(r,o){return new ChangeSet(r,o)}}function addSection(h,r,o,u=!1){if(r==0&&o<=0)return;let g=h.length-2;g>=0&&o<=0&&o==h[g+1]?h[g]+=r:g>=0&&r==0&&h[g]==0?h[g+1]+=o:u?(h[g]+=r,h[g+1]+=o):h.push(r,o)}function addInsert(h,r,o){if(o.length==0)return;let u=r.length-2>>1;if(u<h.length)h[h.length-1]=h[h.length-1].append(o);else{for(;h.length<u;)h.push(Text.empty);h.push(o)}}function iterChanges(h,r,o){let u=h.inserted;for(let g=0,k=0,A=0;A<h.sections.length;){let R=h.sections[A++],q=h.sections[A++];if(q<0)g+=R,k+=R;else{let _=g,ee=k,te=Text.empty;for(;_+=R,ee+=q,q&&u&&(te=te.append(u[A-2>>1])),!(o||A==h.sections.length||h.sections[A+1]<0);)R=h.sections[A++],q=h.sections[A++];r(g,_,k,ee,te),g=_,k=ee}}}function mapSet(h,r,o,u=!1){let g=[],k=u?[]:null,A=new SectionIter(h),R=new SectionIter(r);for(let q=-1;;){if(A.done&&R.len||R.done&&A.len)throw new Error("Mismatched change set lengths");if(A.ins==-1&&R.ins==-1){let _=Math.min(A.len,R.len);addSection(g,_,-1),A.forward(_),R.forward(_)}else if(R.ins>=0&&(A.ins<0||q==A.i||A.off==0&&(R.len<A.len||R.len==A.len&&!o))){let _=R.len;for(addSection(g,R.ins,-1);_;){let ee=Math.min(A.len,_);A.ins>=0&&q<A.i&&A.len<=ee&&(addSection(g,0,A.ins),k&&addInsert(k,g,A.text),q=A.i),A.forward(ee),_-=ee}R.next()}else if(A.ins>=0){let _=0,ee=A.len;for(;ee;)if(R.ins==-1){let te=Math.min(ee,R.len);_+=te,ee-=te,R.forward(te)}else if(R.ins==0&&R.len<ee)ee-=R.len,R.next();else break;addSection(g,_,q<A.i?A.ins:0),k&&q<A.i&&addInsert(k,g,A.text),q=A.i,A.forward(A.len-ee)}else{if(A.done&&R.done)return k?ChangeSet.createSet(g,k):ChangeDesc.create(g);throw new Error("Mismatched change set lengths")}}}function composeSets(h,r,o=!1){let u=[],g=o?[]:null,k=new SectionIter(h),A=new SectionIter(r);for(let R=!1;;){if(k.done&&A.done)return g?ChangeSet.createSet(u,g):ChangeDesc.create(u);if(k.ins==0)addSection(u,k.len,0,R),k.next();else if(A.len==0&&!A.done)addSection(u,0,A.ins,R),g&&addInsert(g,u,A.text),A.next();else{if(k.done||A.done)throw new Error("Mismatched change set lengths");{let q=Math.min(k.len2,A.len),_=u.length;if(k.ins==-1){let ee=A.ins==-1?-1:A.off?0:A.ins;addSection(u,q,ee,R),g&&ee&&addInsert(g,u,A.text)}else A.ins==-1?(addSection(u,k.off?0:k.len,q,R),g&&addInsert(g,u,k.textBit(q))):(addSection(u,k.off?0:k.len,A.off?0:A.ins,R),g&&!A.off&&addInsert(g,u,A.text));R=(k.ins>q||A.ins>=0&&A.len>q)&&(R||u.length>_),k.forward2(q),A.forward(q)}}}}class SectionIter{constructor(r){this.set=r,this.i=0,this.next()}next(){let{sections:r}=this.set;this.i<r.length?(this.len=r[this.i++],this.ins=r[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:r}=this.set,o=this.i-2>>1;return o>=r.length?Text.empty:r[o]}textBit(r){let{inserted:o}=this.set,u=this.i-2>>1;return u>=o.length&&!r?Text.empty:o[u].slice(this.off,r==null?void 0:this.off+r)}forward(r){r==this.len?this.next():(this.len-=r,this.off+=r)}forward2(r){this.ins==-1?this.forward(r):r==this.ins?this.next():(this.ins-=r,this.off+=r)}}class SelectionRange{constructor(r,o,u){this.from=r,this.to=o,this.flags=u}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let r=this.flags&7;return r==7?null:r}get goalColumn(){let r=this.flags>>6;return r==16777215?void 0:r}map(r,o=-1){let u,g;return this.empty?u=g=r.mapPos(this.from,o):(u=r.mapPos(this.from,1),g=r.mapPos(this.to,-1)),u==this.from&&g==this.to?this:new SelectionRange(u,g,this.flags)}extend(r,o=r){if(r<=this.anchor&&o>=this.anchor)return EditorSelection.range(r,o);let u=Math.abs(r-this.anchor)>Math.abs(o-this.anchor)?r:o;return EditorSelection.range(this.anchor,u)}eq(r,o=!1){return this.anchor==r.anchor&&this.head==r.head&&(!o||!this.empty||this.assoc==r.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(r){if(!r||typeof r.anchor!="number"||typeof r.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return EditorSelection.range(r.anchor,r.head)}static create(r,o,u){return new SelectionRange(r,o,u)}}class EditorSelection{constructor(r,o){this.ranges=r,this.mainIndex=o}map(r,o=-1){return r.empty?this:EditorSelection.create(this.ranges.map(u=>u.map(r,o)),this.mainIndex)}eq(r,o=!1){if(this.ranges.length!=r.ranges.length||this.mainIndex!=r.mainIndex)return!1;for(let u=0;u<this.ranges.length;u++)if(!this.ranges[u].eq(r.ranges[u],o))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new EditorSelection([this.main],0)}addRange(r,o=!0){return EditorSelection.create([r].concat(this.ranges),o?0:this.mainIndex+1)}replaceRange(r,o=this.mainIndex){let u=this.ranges.slice();return u[o]=r,EditorSelection.create(u,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(r=>r.toJSON()),main:this.mainIndex}}static fromJSON(r){if(!r||!Array.isArray(r.ranges)||typeof r.main!="number"||r.main>=r.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new EditorSelection(r.ranges.map(o=>SelectionRange.fromJSON(o)),r.main)}static single(r,o=r){return new EditorSelection([EditorSelection.range(r,o)],0)}static create(r,o=0){if(r.length==0)throw new RangeError("A selection needs at least one range");for(let u=0,g=0;g<r.length;g++){let k=r[g];if(k.empty?k.from<=u:k.from<u)return EditorSelection.normalized(r.slice(),o);u=k.to}return new EditorSelection(r,o)}static cursor(r,o=0,u,g){return SelectionRange.create(r,r,(o==0?0:o<0?8:16)|(u==null?7:Math.min(6,u))|(g??16777215)<<6)}static range(r,o,u,g){let k=(u??16777215)<<6|(g==null?7:Math.min(6,g));return o<r?SelectionRange.create(o,r,48|k):SelectionRange.create(r,o,(o>r?8:0)|k)}static normalized(r,o=0){let u=r[o];r.sort((g,k)=>g.from-k.from),o=r.indexOf(u);for(let g=1;g<r.length;g++){let k=r[g],A=r[g-1];if(k.empty?k.from<=A.to:k.from<A.to){let R=A.from,q=Math.max(k.to,A.to);g<=o&&o--,r.splice(--g,2,k.anchor>k.head?EditorSelection.range(q,R):EditorSelection.range(R,q))}}return new EditorSelection(r,o)}}function checkSelection(h,r){for(let o of h.ranges)if(o.to>r)throw new RangeError("Selection points outside of document")}let nextID=0;class Facet{constructor(r,o,u,g,k){this.combine=r,this.compareInput=o,this.compare=u,this.isStatic=g,this.id=nextID++,this.default=r([]),this.extensions=typeof k=="function"?k(this):k}get reader(){return this}static define(r={}){return new Facet(r.combine||(o=>o),r.compareInput||((o,u)=>o===u),r.compare||(r.combine?(o,u)=>o===u:sameArray$1),!!r.static,r.enables)}of(r){return new FacetProvider([],this,0,r)}compute(r,o){if(this.isStatic)throw new Error("Can't compute a static facet");return new FacetProvider(r,this,1,o)}computeN(r,o){if(this.isStatic)throw new Error("Can't compute a static facet");return new FacetProvider(r,this,2,o)}from(r,o){return o||(o=u=>u),this.compute([r],u=>o(u.field(r)))}}function sameArray$1(h,r){return h==r||h.length==r.length&&h.every((o,u)=>o===r[u])}class FacetProvider{constructor(r,o,u,g){this.dependencies=r,this.facet=o,this.type=u,this.value=g,this.id=nextID++}dynamicSlot(r){var o;let u=this.value,g=this.facet.compareInput,k=this.id,A=r[k]>>1,R=this.type==2,q=!1,_=!1,ee=[];for(let te of this.dependencies)te=="doc"?q=!0:te=="selection"?_=!0:(((o=r[te.id])!==null&&o!==void 0?o:1)&1)==0&&ee.push(r[te.id]);return{create(te){return te.values[A]=u(te),1},update(te,ne){if(q&&ne.docChanged||_&&(ne.docChanged||ne.selection)||ensureAll(te,ee)){let re=u(te);if(R?!compareArray(re,te.values[A],g):!g(re,te.values[A]))return te.values[A]=re,1}return 0},reconfigure:(te,ne)=>{let re,oe=ne.config.address[k];if(oe!=null){let le=getAddr(ne,oe);if(this.dependencies.every(pe=>pe instanceof Facet?ne.facet(pe)===te.facet(pe):pe instanceof StateField?ne.field(pe,!1)==te.field(pe,!1):!0)||(R?compareArray(re=u(te),le,g):g(re=u(te),le)))return te.values[A]=le,0}else re=u(te);return te.values[A]=re,1}}}}function compareArray(h,r,o){if(h.length!=r.length)return!1;for(let u=0;u<h.length;u++)if(!o(h[u],r[u]))return!1;return!0}function ensureAll(h,r){let o=!1;for(let u of r)ensureAddr(h,u)&1&&(o=!0);return o}function dynamicFacetSlot(h,r,o){let u=o.map(q=>h[q.id]),g=o.map(q=>q.type),k=u.filter(q=>!(q&1)),A=h[r.id]>>1;function R(q){let _=[];for(let ee=0;ee<u.length;ee++){let te=getAddr(q,u[ee]);if(g[ee]==2)for(let ne of te)_.push(ne);else _.push(te)}return r.combine(_)}return{create(q){for(let _ of u)ensureAddr(q,_);return q.values[A]=R(q),1},update(q,_){if(!ensureAll(q,k))return 0;let ee=R(q);return r.compare(ee,q.values[A])?0:(q.values[A]=ee,1)},reconfigure(q,_){let ee=ensureAll(q,u),te=_.config.facets[r.id],ne=_.facet(r);if(te&&!ee&&sameArray$1(o,te))return q.values[A]=ne,0;let re=R(q);return r.compare(re,ne)?(q.values[A]=ne,0):(q.values[A]=re,1)}}}const initField=Facet.define({static:!0});class StateField{constructor(r,o,u,g,k){this.id=r,this.createF=o,this.updateF=u,this.compareF=g,this.spec=k,this.provides=void 0}static define(r){let o=new StateField(nextID++,r.create,r.update,r.compare||((u,g)=>u===g),r);return r.provide&&(o.provides=r.provide(o)),o}create(r){let o=r.facet(initField).find(u=>u.field==this);return((o==null?void 0:o.create)||this.createF)(r)}slot(r){let o=r[this.id]>>1;return{create:u=>(u.values[o]=this.create(u),1),update:(u,g)=>{let k=u.values[o],A=this.updateF(k,g);return this.compareF(k,A)?0:(u.values[o]=A,1)},reconfigure:(u,g)=>{let k=u.facet(initField),A=g.facet(initField),R;return(R=k.find(q=>q.field==this))&&R!=A.find(q=>q.field==this)?(u.values[o]=R.create(u),1):g.config.address[this.id]!=null?(u.values[o]=g.field(this),0):(u.values[o]=this.create(u),1)}}}init(r){return[this,initField.of({field:this,create:r})]}get extension(){return this}}const Prec_={lowest:4,low:3,default:2,high:1,highest:0};function prec(h){return r=>new PrecExtension(r,h)}const Prec={highest:prec(Prec_.highest),high:prec(Prec_.high),default:prec(Prec_.default),low:prec(Prec_.low),lowest:prec(Prec_.lowest)};class PrecExtension{constructor(r,o){this.inner=r,this.prec=o}}class Compartment{of(r){return new CompartmentInstance(this,r)}reconfigure(r){return Compartment.reconfigure.of({compartment:this,extension:r})}get(r){return r.config.compartments.get(this)}}class CompartmentInstance{constructor(r,o){this.compartment=r,this.inner=o}}class Configuration{constructor(r,o,u,g,k,A){for(this.base=r,this.compartments=o,this.dynamicSlots=u,this.address=g,this.staticValues=k,this.facets=A,this.statusTemplate=[];this.statusTemplate.length<u.length;)this.statusTemplate.push(0)}staticFacet(r){let o=this.address[r.id];return o==null?r.default:this.staticValues[o>>1]}static resolve(r,o,u){let g=[],k=Object.create(null),A=new Map;for(let ne of flatten(r,o,A))ne instanceof StateField?g.push(ne):(k[ne.facet.id]||(k[ne.facet.id]=[])).push(ne);let R=Object.create(null),q=[],_=[];for(let ne of g)R[ne.id]=_.length<<1,_.push(re=>ne.slot(re));let ee=u==null?void 0:u.config.facets;for(let ne in k){let re=k[ne],oe=re[0].facet,le=ee&&ee[ne]||[];if(re.every(pe=>pe.type==0))if(R[oe.id]=q.length<<1|1,sameArray$1(le,re))q.push(u.facet(oe));else{let pe=oe.combine(re.map(de=>de.value));q.push(u&&oe.compare(pe,u.facet(oe))?u.facet(oe):pe)}else{for(let pe of re)pe.type==0?(R[pe.id]=q.length<<1|1,q.push(pe.value)):(R[pe.id]=_.length<<1,_.push(de=>pe.dynamicSlot(de)));R[oe.id]=_.length<<1,_.push(pe=>dynamicFacetSlot(pe,oe,re))}}let te=_.map(ne=>ne(R));return new Configuration(r,A,te,R,q,k)}}function flatten(h,r,o){let u=[[],[],[],[],[]],g=new Map;function k(A,R){let q=g.get(A);if(q!=null){if(q<=R)return;let _=u[q].indexOf(A);_>-1&&u[q].splice(_,1),A instanceof CompartmentInstance&&o.delete(A.compartment)}if(g.set(A,R),Array.isArray(A))for(let _ of A)k(_,R);else if(A instanceof CompartmentInstance){if(o.has(A.compartment))throw new RangeError("Duplicate use of compartment in extensions");let _=r.get(A.compartment)||A.inner;o.set(A.compartment,_),k(_,R)}else if(A instanceof PrecExtension)k(A.inner,A.prec);else if(A instanceof StateField)u[R].push(A),A.provides&&k(A.provides,R);else if(A instanceof FacetProvider)u[R].push(A),A.facet.extensions&&k(A.facet.extensions,Prec_.default);else{let _=A.extension;if(!_)throw new Error(`Unrecognized extension value in extension set (${A}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);k(_,R)}}return k(h,Prec_.default),u.reduce((A,R)=>A.concat(R))}function ensureAddr(h,r){if(r&1)return 2;let o=r>>1,u=h.status[o];if(u==4)throw new Error("Cyclic dependency between fields and/or facets");if(u&2)return u;h.status[o]=4;let g=h.computeSlot(h,h.config.dynamicSlots[o]);return h.status[o]=2|g}function getAddr(h,r){return r&1?h.config.staticValues[r>>1]:h.values[r>>1]}const languageData=Facet.define(),allowMultipleSelections=Facet.define({combine:h=>h.some(r=>r),static:!0}),lineSeparator=Facet.define({combine:h=>h.length?h[0]:void 0,static:!0}),changeFilter=Facet.define(),transactionFilter=Facet.define(),transactionExtender=Facet.define(),readOnly=Facet.define({combine:h=>h.length?h[0]:!1});class Annotation{constructor(r,o){this.type=r,this.value=o}static define(){return new AnnotationType}}class AnnotationType{of(r){return new Annotation(this,r)}}class StateEffectType{constructor(r){this.map=r}of(r){return new StateEffect(this,r)}}class StateEffect{constructor(r,o){this.type=r,this.value=o}map(r){let o=this.type.map(this.value,r);return o===void 0?void 0:o==this.value?this:new StateEffect(this.type,o)}is(r){return this.type==r}static define(r={}){return new StateEffectType(r.map||(o=>o))}static mapEffects(r,o){if(!r.length)return r;let u=[];for(let g of r){let k=g.map(o);k&&u.push(k)}return u}}StateEffect.reconfigure=StateEffect.define();StateEffect.appendConfig=StateEffect.define();class Transaction{constructor(r,o,u,g,k,A){this.startState=r,this.changes=o,this.selection=u,this.effects=g,this.annotations=k,this.scrollIntoView=A,this._doc=null,this._state=null,u&&checkSelection(u,o.newLength),k.some(R=>R.type==Transaction.time)||(this.annotations=k.concat(Transaction.time.of(Date.now())))}static create(r,o,u,g,k,A){return new Transaction(r,o,u,g,k,A)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(r){for(let o of this.annotations)if(o.type==r)return o.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(r){let o=this.annotation(Transaction.userEvent);return!!(o&&(o==r||o.length>r.length&&o.slice(0,r.length)==r&&o[r.length]=="."))}}Transaction.time=Annotation.define();Transaction.userEvent=Annotation.define();Transaction.addToHistory=Annotation.define();Transaction.remote=Annotation.define();function joinRanges(h,r){let o=[];for(let u=0,g=0;;){let k,A;if(u<h.length&&(g==r.length||r[g]>=h[u]))k=h[u++],A=h[u++];else if(g<r.length)k=r[g++],A=r[g++];else return o;!o.length||o[o.length-1]<k?o.push(k,A):o[o.length-1]<A&&(o[o.length-1]=A)}}function mergeTransaction(h,r,o){var u;let g,k,A;return o?(g=r.changes,k=ChangeSet.empty(r.changes.length),A=h.changes.compose(r.changes)):(g=r.changes.map(h.changes),k=h.changes.mapDesc(r.changes,!0),A=h.changes.compose(g)),{changes:A,selection:r.selection?r.selection.map(k):(u=h.selection)===null||u===void 0?void 0:u.map(g),effects:StateEffect.mapEffects(h.effects,g).concat(StateEffect.mapEffects(r.effects,k)),annotations:h.annotations.length?h.annotations.concat(r.annotations):r.annotations,scrollIntoView:h.scrollIntoView||r.scrollIntoView}}function resolveTransactionInner(h,r,o){let u=r.selection,g=asArray$1(r.annotations);return r.userEvent&&(g=g.concat(Transaction.userEvent.of(r.userEvent))),{changes:r.changes instanceof ChangeSet?r.changes:ChangeSet.of(r.changes||[],o,h.facet(lineSeparator)),selection:u&&(u instanceof EditorSelection?u:EditorSelection.single(u.anchor,u.head)),effects:asArray$1(r.effects),annotations:g,scrollIntoView:!!r.scrollIntoView}}function resolveTransaction(h,r,o){let u=resolveTransactionInner(h,r.length?r[0]:{},h.doc.length);r.length&&r[0].filter===!1&&(o=!1);for(let k=1;k<r.length;k++){r[k].filter===!1&&(o=!1);let A=!!r[k].sequential;u=mergeTransaction(u,resolveTransactionInner(h,r[k],A?u.changes.newLength:h.doc.length),A)}let g=Transaction.create(h,u.changes,u.selection,u.effects,u.annotations,u.scrollIntoView);return extendTransaction(o?filterTransaction(g):g)}function filterTransaction(h){let r=h.startState,o=!0;for(let g of r.facet(changeFilter)){let k=g(h);if(k===!1){o=!1;break}Array.isArray(k)&&(o=o===!0?k:joinRanges(o,k))}if(o!==!0){let g,k;if(o===!1)k=h.changes.invertedDesc,g=ChangeSet.empty(r.doc.length);else{let A=h.changes.filter(o);g=A.changes,k=A.filtered.mapDesc(A.changes).invertedDesc}h=Transaction.create(r,g,h.selection&&h.selection.map(k),StateEffect.mapEffects(h.effects,k),h.annotations,h.scrollIntoView)}let u=r.facet(transactionFilter);for(let g=u.length-1;g>=0;g--){let k=u[g](h);k instanceof Transaction?h=k:Array.isArray(k)&&k.length==1&&k[0]instanceof Transaction?h=k[0]:h=resolveTransaction(r,asArray$1(k),!1)}return h}function extendTransaction(h){let r=h.startState,o=r.facet(transactionExtender),u=h;for(let g=o.length-1;g>=0;g--){let k=o[g](h);k&&Object.keys(k).length&&(u=mergeTransaction(u,resolveTransactionInner(r,k,h.changes.newLength),!0))}return u==h?h:Transaction.create(r,h.changes,h.selection,u.effects,u.annotations,u.scrollIntoView)}const none$3=[];function asArray$1(h){return h==null?none$3:Array.isArray(h)?h:[h]}var CharCategory=(function(h){return h[h.Word=0]="Word",h[h.Space=1]="Space",h[h.Other=2]="Other",h})(CharCategory||(CharCategory={}));const nonASCIISingleCaseWordChar=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let wordChar;try{wordChar=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch(h){}function hasWordChar(h){if(wordChar)return wordChar.test(h);for(let r=0;r<h.length;r++){let o=h[r];if(/\w/.test(o)||o>""&&(o.toUpperCase()!=o.toLowerCase()||nonASCIISingleCaseWordChar.test(o)))return!0}return!1}function makeCategorizer(h){return r=>{if(!/\S/.test(r))return CharCategory.Space;if(hasWordChar(r))return CharCategory.Word;for(let o=0;o<h.length;o++)if(r.indexOf(h[o])>-1)return CharCategory.Word;return CharCategory.Other}}class EditorState{constructor(r,o,u,g,k,A){this.config=r,this.doc=o,this.selection=u,this.values=g,this.status=r.statusTemplate.slice(),this.computeSlot=k,A&&(A._state=this);for(let R=0;R<this.config.dynamicSlots.length;R++)ensureAddr(this,R<<1);this.computeSlot=null}field(r,o=!0){let u=this.config.address[r.id];if(u==null){if(o)throw new RangeError("Field is not present in this state");return}return ensureAddr(this,u),getAddr(this,u)}update(...r){return resolveTransaction(this,r,!0)}applyTransaction(r){let o=this.config,{base:u,compartments:g}=o;for(let R of r.effects)R.is(Compartment.reconfigure)?(o&&(g=new Map,o.compartments.forEach((q,_)=>g.set(_,q)),o=null),g.set(R.value.compartment,R.value.extension)):R.is(StateEffect.reconfigure)?(o=null,u=R.value):R.is(StateEffect.appendConfig)&&(o=null,u=asArray$1(u).concat(R.value));let k;o?k=r.startState.values.slice():(o=Configuration.resolve(u,g,this),k=new EditorState(o,this.doc,this.selection,o.dynamicSlots.map(()=>null),(q,_)=>_.reconfigure(q,this),null).values);let A=r.startState.facet(allowMultipleSelections)?r.newSelection:r.newSelection.asSingle();new EditorState(o,r.newDoc,A,k,(R,q)=>q.update(R,r),r)}replaceSelection(r){return typeof r=="string"&&(r=this.toText(r)),this.changeByRange(o=>({changes:{from:o.from,to:o.to,insert:r},range:EditorSelection.cursor(o.from+r.length)}))}changeByRange(r){let o=this.selection,u=r(o.ranges[0]),g=this.changes(u.changes),k=[u.range],A=asArray$1(u.effects);for(let R=1;R<o.ranges.length;R++){let q=r(o.ranges[R]),_=this.changes(q.changes),ee=_.map(g);for(let ne=0;ne<R;ne++)k[ne]=k[ne].map(ee);let te=g.mapDesc(_,!0);k.push(q.range.map(te)),g=g.compose(ee),A=StateEffect.mapEffects(A,ee).concat(StateEffect.mapEffects(asArray$1(q.effects),te))}return{changes:g,selection:EditorSelection.create(k,o.mainIndex),effects:A}}changes(r=[]){return r instanceof ChangeSet?r:ChangeSet.of(r,this.doc.length,this.facet(EditorState.lineSeparator))}toText(r){return Text.of(r.split(this.facet(EditorState.lineSeparator)||DefaultSplit))}sliceDoc(r=0,o=this.doc.length){return this.doc.sliceString(r,o,this.lineBreak)}facet(r){let o=this.config.address[r.id];return o==null?r.default:(ensureAddr(this,o),getAddr(this,o))}toJSON(r){let o={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(r)for(let u in r){let g=r[u];g instanceof StateField&&this.config.address[g.id]!=null&&(o[u]=g.spec.toJSON(this.field(r[u]),this))}return o}static fromJSON(r,o={},u){if(!r||typeof r.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let g=[];if(u){for(let k in u)if(Object.prototype.hasOwnProperty.call(r,k)){let A=u[k],R=r[k];g.push(A.init(q=>A.spec.fromJSON(R,q)))}}return EditorState.create({doc:r.doc,selection:EditorSelection.fromJSON(r.selection),extensions:o.extensions?g.concat([o.extensions]):g})}static create(r={}){let o=Configuration.resolve(r.extensions||[],new Map),u=r.doc instanceof Text?r.doc:Text.of((r.doc||"").split(o.staticFacet(EditorState.lineSeparator)||DefaultSplit)),g=r.selection?r.selection instanceof EditorSelection?r.selection:EditorSelection.single(r.selection.anchor,r.selection.head):EditorSelection.single(0);return checkSelection(g,u.length),o.staticFacet(allowMultipleSelections)||(g=g.asSingle()),new EditorState(o,u,g,o.dynamicSlots.map(()=>null),(k,A)=>A.create(k),null)}get tabSize(){return this.facet(EditorState.tabSize)}get lineBreak(){return this.facet(EditorState.lineSeparator)||`
`}get readOnly(){return this.facet(readOnly)}phrase(r,...o){for(let u of this.facet(EditorState.phrases))if(Object.prototype.hasOwnProperty.call(u,r)){r=u[r];break}return o.length&&(r=r.replace(/\$(\$|\d*)/g,(u,g)=>{if(g=="$")return"$";let k=+(g||1);return!k||k>o.length?u:o[k-1]})),r}languageDataAt(r,o,u=-1){let g=[];for(let k of this.facet(languageData))for(let A of k(this,o,u))Object.prototype.hasOwnProperty.call(A,r)&&g.push(A[r]);return g}charCategorizer(r){return makeCategorizer(this.languageDataAt("wordChars",r).join(""))}wordAt(r){let{text:o,from:u,length:g}=this.doc.lineAt(r),k=this.charCategorizer(r),A=r-u,R=r-u;for(;A>0;){let q=findClusterBreak(o,A,!1);if(k(o.slice(q,A))!=CharCategory.Word)break;A=q}for(;R<g;){let q=findClusterBreak(o,R);if(k(o.slice(R,q))!=CharCategory.Word)break;R=q}return A==R?null:EditorSelection.range(A+u,R+u)}}EditorState.allowMultipleSelections=allowMultipleSelections;EditorState.tabSize=Facet.define({combine:h=>h.length?h[0]:4});EditorState.lineSeparator=lineSeparator;EditorState.readOnly=readOnly;EditorState.phrases=Facet.define({compare(h,r){let o=Object.keys(h),u=Object.keys(r);return o.length==u.length&&o.every(g=>h[g]==r[g])}});EditorState.languageData=languageData;EditorState.changeFilter=changeFilter;EditorState.transactionFilter=transactionFilter;EditorState.transactionExtender=transactionExtender;Compartment.reconfigure=StateEffect.define();function combineConfig(h,r,o={}){let u={};for(let g of h)for(let k of Object.keys(g)){let A=g[k],R=u[k];if(R===void 0)u[k]=A;else if(!(R===A||A===void 0))if(Object.hasOwnProperty.call(o,k))u[k]=o[k](R,A);else throw new Error("Config merge conflict for field "+k)}for(let g in r)u[g]===void 0&&(u[g]=r[g]);return u}class RangeValue{eq(r){return this==r}range(r,o=r){return Range$1.create(r,o,this)}}RangeValue.prototype.startSide=RangeValue.prototype.endSide=0;RangeValue.prototype.point=!1;RangeValue.prototype.mapMode=MapMode.TrackDel;let Range$1=class Bi{constructor(r,o,u){this.from=r,this.to=o,this.value=u}static create(r,o,u){return new Bi(r,o,u)}};function cmpRange(h,r){return h.from-r.from||h.value.startSide-r.value.startSide}class Chunk{constructor(r,o,u,g){this.from=r,this.to=o,this.value=u,this.maxPoint=g}get length(){return this.to[this.to.length-1]}findIndex(r,o,u,g=0){let k=u?this.to:this.from;for(let A=g,R=k.length;;){if(A==R)return A;let q=A+R>>1,_=k[q]-r||(u?this.value[q].endSide:this.value[q].startSide)-o;if(q==A)return _>=0?A:R;_>=0?R=q:A=q+1}}between(r,o,u,g){for(let k=this.findIndex(o,-1e9,!0),A=this.findIndex(u,1e9,!1,k);k<A;k++)if(g(this.from[k]+r,this.to[k]+r,this.value[k])===!1)return!1}map(r,o){let u=[],g=[],k=[],A=-1,R=-1;for(let q=0;q<this.value.length;q++){let _=this.value[q],ee=this.from[q]+r,te=this.to[q]+r,ne,re;if(ee==te){let oe=o.mapPos(ee,_.startSide,_.mapMode);if(oe==null||(ne=re=oe,_.startSide!=_.endSide&&(re=o.mapPos(ee,_.endSide),re<ne)))continue}else if(ne=o.mapPos(ee,_.startSide),re=o.mapPos(te,_.endSide),ne>re||ne==re&&_.startSide>0&&_.endSide<=0)continue;(re-ne||_.endSide-_.startSide)<0||(A<0&&(A=ne),_.point&&(R=Math.max(R,re-ne)),u.push(_),g.push(ne-A),k.push(re-A))}return{mapped:u.length?new Chunk(g,k,u,R):null,pos:A}}}class RangeSet{constructor(r,o,u,g){this.chunkPos=r,this.chunk=o,this.nextLayer=u,this.maxPoint=g}static create(r,o,u,g){return new RangeSet(r,o,u,g)}get length(){let r=this.chunk.length-1;return r<0?0:Math.max(this.chunkEnd(r),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let r=this.nextLayer.size;for(let o of this.chunk)r+=o.value.length;return r}chunkEnd(r){return this.chunkPos[r]+this.chunk[r].length}update(r){let{add:o=[],sort:u=!1,filterFrom:g=0,filterTo:k=this.length}=r,A=r.filter;if(o.length==0&&!A)return this;if(u&&(o=o.slice().sort(cmpRange)),this.isEmpty)return o.length?RangeSet.of(o):this;let R=new LayerCursor(this,null,-1).goto(0),q=0,_=[],ee=new RangeSetBuilder;for(;R.value||q<o.length;)if(q<o.length&&(R.from-o[q].from||R.startSide-o[q].value.startSide)>=0){let te=o[q++];ee.addInner(te.from,te.to,te.value)||_.push(te)}else R.rangeIndex==1&&R.chunkIndex<this.chunk.length&&(q==o.length||this.chunkEnd(R.chunkIndex)<o[q].from)&&(!A||g>this.chunkEnd(R.chunkIndex)||k<this.chunkPos[R.chunkIndex])&&ee.addChunk(this.chunkPos[R.chunkIndex],this.chunk[R.chunkIndex])?R.nextChunk():((!A||g>R.to||k<R.from||A(R.from,R.to,R.value))&&(ee.addInner(R.from,R.to,R.value)||_.push(Range$1.create(R.from,R.to,R.value))),R.next());return ee.finishInner(this.nextLayer.isEmpty&&!_.length?RangeSet.empty:this.nextLayer.update({add:_,filter:A,filterFrom:g,filterTo:k}))}map(r){if(r.empty||this.isEmpty)return this;let o=[],u=[],g=-1;for(let A=0;A<this.chunk.length;A++){let R=this.chunkPos[A],q=this.chunk[A],_=r.touchesRange(R,R+q.length);if(_===!1)g=Math.max(g,q.maxPoint),o.push(q),u.push(r.mapPos(R));else if(_===!0){let{mapped:ee,pos:te}=q.map(R,r);ee&&(g=Math.max(g,ee.maxPoint),o.push(ee),u.push(te))}}let k=this.nextLayer.map(r);return o.length==0?k:new RangeSet(u,o,k||RangeSet.empty,g)}between(r,o,u){if(!this.isEmpty){for(let g=0;g<this.chunk.length;g++){let k=this.chunkPos[g],A=this.chunk[g];if(o>=k&&r<=k+A.length&&A.between(k,r-k,o-k,u)===!1)return}this.nextLayer.between(r,o,u)}}iter(r=0){return HeapCursor.from([this]).goto(r)}get isEmpty(){return this.nextLayer==this}static iter(r,o=0){return HeapCursor.from(r).goto(o)}static compare(r,o,u,g,k=-1){let A=r.filter(te=>te.maxPoint>0||!te.isEmpty&&te.maxPoint>=k),R=o.filter(te=>te.maxPoint>0||!te.isEmpty&&te.maxPoint>=k),q=findSharedChunks(A,R,u),_=new SpanCursor(A,q,k),ee=new SpanCursor(R,q,k);u.iterGaps((te,ne,re)=>compare(_,te,ee,ne,re,g)),u.empty&&u.length==0&&compare(_,0,ee,0,0,g)}static eq(r,o,u=0,g){g==null&&(g=999999999);let k=r.filter(ee=>!ee.isEmpty&&o.indexOf(ee)<0),A=o.filter(ee=>!ee.isEmpty&&r.indexOf(ee)<0);if(k.length!=A.length)return!1;if(!k.length)return!0;let R=findSharedChunks(k,A),q=new SpanCursor(k,R,0).goto(u),_=new SpanCursor(A,R,0).goto(u);for(;;){if(q.to!=_.to||!sameValues(q.active,_.active)||q.point&&(!_.point||!q.point.eq(_.point)))return!1;if(q.to>g)return!0;q.next(),_.next()}}static spans(r,o,u,g,k=-1){let A=new SpanCursor(r,null,k).goto(o),R=o,q=A.openStart;for(;;){let _=Math.min(A.to,u);if(A.point){let ee=A.activeForPoint(A.to),te=A.pointFrom<o?ee.length+1:A.point.startSide<0?ee.length:Math.min(ee.length,q);g.point(R,_,A.point,ee,te,A.pointRank),q=Math.min(A.openEnd(_),ee.length)}else _>R&&(g.span(R,_,A.active,q),q=A.openEnd(_));if(A.to>u)return q+(A.point&&A.to>u?1:0);R=A.to,A.next()}}static of(r,o=!1){let u=new RangeSetBuilder;for(let g of r instanceof Range$1?[r]:o?lazySort(r):r)u.add(g.from,g.to,g.value);return u.finish()}static join(r){if(!r.length)return RangeSet.empty;let o=r[r.length-1];for(let u=r.length-2;u>=0;u--)for(let g=r[u];g!=RangeSet.empty;g=g.nextLayer)o=new RangeSet(g.chunkPos,g.chunk,o,Math.max(g.maxPoint,o.maxPoint));return o}}RangeSet.empty=new RangeSet([],[],null,-1);function lazySort(h){if(h.length>1)for(let r=h[0],o=1;o<h.length;o++){let u=h[o];if(cmpRange(r,u)>0)return h.slice().sort(cmpRange);r=u}return h}RangeSet.empty.nextLayer=RangeSet.empty;class RangeSetBuilder{finishChunk(r){this.chunks.push(new Chunk(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,r&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(r,o,u){this.addInner(r,o,u)||(this.nextLayer||(this.nextLayer=new RangeSetBuilder)).add(r,o,u)}addInner(r,o,u){let g=r-this.lastTo||u.startSide-this.last.endSide;if(g<=0&&(r-this.lastFrom||u.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return g<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=r),this.from.push(r-this.chunkStart),this.to.push(o-this.chunkStart),this.last=u,this.lastFrom=r,this.lastTo=o,this.value.push(u),u.point&&(this.maxPoint=Math.max(this.maxPoint,o-r)),!0)}addChunk(r,o){if((r-this.lastTo||o.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,o.maxPoint),this.chunks.push(o),this.chunkPos.push(r);let u=o.value.length-1;return this.last=o.value[u],this.lastFrom=o.from[u]+r,this.lastTo=o.to[u]+r,!0}finish(){return this.finishInner(RangeSet.empty)}finishInner(r){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return r;let o=RangeSet.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(r):r,this.setMaxPoint);return this.from=null,o}}function findSharedChunks(h,r,o){let u=new Map;for(let k of h)for(let A=0;A<k.chunk.length;A++)k.chunk[A].maxPoint<=0&&u.set(k.chunk[A],k.chunkPos[A]);let g=new Set;for(let k of r)for(let A=0;A<k.chunk.length;A++){let R=u.get(k.chunk[A]);R!=null&&(o?o.mapPos(R):R)==k.chunkPos[A]&&!(o!=null&&o.touchesRange(R,R+k.chunk[A].length))&&g.add(k.chunk[A])}return g}class LayerCursor{constructor(r,o,u,g=0){this.layer=r,this.skip=o,this.minPoint=u,this.rank=g}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(r,o=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(r,o,!1),this}gotoInner(r,o,u){for(;this.chunkIndex<this.layer.chunk.length;){let g=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(g)||this.layer.chunkEnd(this.chunkIndex)<r||g.maxPoint<this.minPoint))break;this.chunkIndex++,u=!1}if(this.chunkIndex<this.layer.chunk.length){let g=this.layer.chunk[this.chunkIndex].findIndex(r-this.layer.chunkPos[this.chunkIndex],o,!0);(!u||this.rangeIndex<g)&&this.setRangeIndex(g)}this.next()}forward(r,o){(this.to-r||this.endSide-o)<0&&this.gotoInner(r,o,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let r=this.layer.chunkPos[this.chunkIndex],o=this.layer.chunk[this.chunkIndex],u=r+o.from[this.rangeIndex];if(this.from=u,this.to=r+o.to[this.rangeIndex],this.value=o.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(r){if(r==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=r}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(r){return this.from-r.from||this.startSide-r.startSide||this.rank-r.rank||this.to-r.to||this.endSide-r.endSide}}class HeapCursor{constructor(r){this.heap=r}static from(r,o=null,u=-1){let g=[];for(let k=0;k<r.length;k++)for(let A=r[k];!A.isEmpty;A=A.nextLayer)A.maxPoint>=u&&g.push(new LayerCursor(A,o,u,k));return g.length==1?g[0]:new HeapCursor(g)}get startSide(){return this.value?this.value.startSide:0}goto(r,o=-1e9){for(let u of this.heap)u.goto(r,o);for(let u=this.heap.length>>1;u>=0;u--)heapBubble(this.heap,u);return this.next(),this}forward(r,o){for(let u of this.heap)u.forward(r,o);for(let u=this.heap.length>>1;u>=0;u--)heapBubble(this.heap,u);(this.to-r||this.value.endSide-o)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let r=this.heap[0];this.from=r.from,this.to=r.to,this.value=r.value,this.rank=r.rank,r.value&&r.next(),heapBubble(this.heap,0)}}}function heapBubble(h,r){for(let o=h[r];;){let u=(r<<1)+1;if(u>=h.length)break;let g=h[u];if(u+1<h.length&&g.compare(h[u+1])>=0&&(g=h[u+1],u++),o.compare(g)<0)break;h[u]=o,h[r]=g,r=u}}class SpanCursor{constructor(r,o,u){this.minPoint=u,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=HeapCursor.from(r,o,u)}goto(r,o=-1e9){return this.cursor.goto(r,o),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=r,this.endSide=o,this.openStart=-1,this.next(),this}forward(r,o){for(;this.minActive>-1&&(this.activeTo[this.minActive]-r||this.active[this.minActive].endSide-o)<0;)this.removeActive(this.minActive);this.cursor.forward(r,o)}removeActive(r){remove(this.active,r),remove(this.activeTo,r),remove(this.activeRank,r),this.minActive=findMinIndex(this.active,this.activeTo)}addActive(r){let o=0,{value:u,to:g,rank:k}=this.cursor;for(;o<this.activeRank.length&&(k-this.activeRank[o]||g-this.activeTo[o])>0;)o++;insert(this.active,o,u),insert(this.activeTo,o,g),insert(this.activeRank,o,k),r&&insert(r,o,this.cursor.from),this.minActive=findMinIndex(this.active,this.activeTo)}next(){let r=this.to,o=this.point;this.point=null;let u=this.openStart<0?[]:null;for(;;){let g=this.minActive;if(g>-1&&(this.activeTo[g]-this.cursor.from||this.active[g].endSide-this.cursor.startSide)<0){if(this.activeTo[g]>r){this.to=this.activeTo[g],this.endSide=this.active[g].endSide;break}this.removeActive(g),u&&remove(u,g)}else if(this.cursor.value)if(this.cursor.from>r){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let k=this.cursor.value;if(!k.point)this.addActive(u),this.cursor.next();else if(o&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=k,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=k.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(u){this.openStart=0;for(let g=u.length-1;g>=0&&u[g]<r;g--)this.openStart++}}activeForPoint(r){if(!this.active.length)return this.active;let o=[];for(let u=this.active.length-1;u>=0&&!(this.activeRank[u]<this.pointRank);u--)(this.activeTo[u]>r||this.activeTo[u]==r&&this.active[u].endSide>=this.point.endSide)&&o.push(this.active[u]);return o.reverse()}openEnd(r){let o=0;for(let u=this.activeTo.length-1;u>=0&&this.activeTo[u]>r;u--)o++;return o}}function compare(h,r,o,u,g,k){h.goto(r),o.goto(u);let A=u+g,R=u,q=u-r;for(;;){let _=h.to+q-o.to,ee=_||h.endSide-o.endSide,te=ee<0?h.to+q:o.to,ne=Math.min(te,A);if(h.point||o.point?h.point&&o.point&&(h.point==o.point||h.point.eq(o.point))&&sameValues(h.activeForPoint(h.to),o.activeForPoint(o.to))||k.comparePoint(R,ne,h.point,o.point):ne>R&&!sameValues(h.active,o.active)&&k.compareRange(R,ne,h.active,o.active),te>A)break;(_||h.openEnd!=o.openEnd)&&k.boundChange&&k.boundChange(te),R=te,ee<=0&&h.next(),ee>=0&&o.next()}}function sameValues(h,r){if(h.length!=r.length)return!1;for(let o=0;o<h.length;o++)if(h[o]!=r[o]&&!h[o].eq(r[o]))return!1;return!0}function remove(h,r){for(let o=r,u=h.length-1;o<u;o++)h[o]=h[o+1];h.pop()}function insert(h,r,o){for(let u=h.length-1;u>=r;u--)h[u+1]=h[u];h[r]=o}function findMinIndex(h,r){let o=-1,u=1e9;for(let g=0;g<r.length;g++)(r[g]-u||h[g].endSide-h[o].endSide)<0&&(o=g,u=r[g]);return o}function countColumn(h,r,o=h.length){let u=0;for(let g=0;g<o&&g<h.length;)h.charCodeAt(g)==9?(u+=r-u%r,g++):(u++,g=findClusterBreak(h,g));return u}function findColumn(h,r,o,u){for(let g=0,k=0;;){if(k>=r)return g;if(g==h.length)break;k+=h.charCodeAt(g)==9?o-k%o:1,g=findClusterBreak(h,g)}return u===!0?-1:h.length}const C="",COUNT=typeof Symbol>"u"?"__"+C:Symbol.for(C),SET=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),top=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class StyleModule{constructor(r,o){this.rules=[];let{finish:u}=o||{};function g(A){return/^@/.test(A)?[A]:A.split(/,\s*/)}function k(A,R,q,_){let ee=[],te=/^@(\w+)\b/.exec(A[0]),ne=te&&te[1]=="keyframes";if(te&&R==null)return q.push(A[0]+";");for(let re in R){let oe=R[re];if(/&/.test(re))k(re.split(/,\s*/).map(le=>A.map(pe=>le.replace(/&/,pe))).reduce((le,pe)=>le.concat(pe)),oe,q);else if(oe&&typeof oe=="object"){if(!te)throw new RangeError("The value of a property ("+re+") should be a primitive value.");k(g(re),oe,ee,ne)}else oe!=null&&ee.push(re.replace(/_.*/,"").replace(/[A-Z]/g,le=>"-"+le.toLowerCase())+": "+oe+";")}(ee.length||ne)&&q.push((u&&!te&&!_?A.map(u):A).join(", ")+" {"+ee.join(" ")+"}")}for(let A in r)k(g(A),r[A],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let r=top[COUNT]||1;return top[COUNT]=r+1,C+r.toString(36)}static mount(r,o,u){let g=r[SET],k=u&&u.nonce;g?k&&g.setNonce(k):g=new StyleSet(r,k),g.mount(Array.isArray(o)?o:[o],r)}}let adoptedSet=new Map;class StyleSet{constructor(r,o){let u=r.ownerDocument||r,g=u.defaultView;if(!r.head&&r.adoptedStyleSheets&&g.CSSStyleSheet){let k=adoptedSet.get(u);if(k)return r[SET]=k;this.sheet=new g.CSSStyleSheet,adoptedSet.set(u,this)}else this.styleTag=u.createElement("style"),o&&this.styleTag.setAttribute("nonce",o);this.modules=[],r[SET]=this}mount(r,o){let u=this.sheet,g=0,k=0;for(let A=0;A<r.length;A++){let R=r[A],q=this.modules.indexOf(R);if(q<k&&q>-1&&(this.modules.splice(q,1),k--,q=-1),q==-1){if(this.modules.splice(k++,0,R),u)for(let _=0;_<R.rules.length;_++)u.insertRule(R.rules[_],g++)}else{for(;k<q;)g+=this.modules[k++].rules.length;g+=R.rules.length,k++}}if(u)o.adoptedStyleSheets.indexOf(this.sheet)<0&&(o.adoptedStyleSheets=[this.sheet,...o.adoptedStyleSheets]);else{let A="";for(let q=0;q<this.modules.length;q++)A+=this.modules[q].getRules()+`
`;this.styleTag.textContent=A;let R=o.head||o;this.styleTag.parentNode!=R&&R.insertBefore(this.styleTag,R.firstChild)}}setNonce(r){this.styleTag&&this.styleTag.getAttribute("nonce")!=r&&this.styleTag.setAttribute("nonce",r)}}var base={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},shift={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},mac=typeof navigator<"u"&&/Mac/.test(navigator.platform),ie$1=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var i=0;i<10;i++)base[48+i]=base[96+i]=String(i);for(var i=1;i<=24;i++)base[i+111]="F"+i;for(var i=65;i<=90;i++)base[i]=String.fromCharCode(i+32),shift[i]=String.fromCharCode(i);for(var code in base)shift.hasOwnProperty(code)||(shift[code]=base[code]);function keyName(h){var r=mac&&h.metaKey&&h.shiftKey&&!h.ctrlKey&&!h.altKey||ie$1&&h.shiftKey&&h.key&&h.key.length==1||h.key=="Unidentified",o=!r&&h.key||(h.shiftKey?shift:base)[h.keyCode]||h.key||"Unidentified";return o=="Esc"&&(o="Escape"),o=="Del"&&(o="Delete"),o=="Left"&&(o="ArrowLeft"),o=="Up"&&(o="ArrowUp"),o=="Right"&&(o="ArrowRight"),o=="Down"&&(o="ArrowDown"),o}function crelt(){var h=arguments[0];typeof h=="string"&&(h=document.createElement(h));var r=1,o=arguments[1];if(o&&typeof o=="object"&&o.nodeType==null&&!Array.isArray(o)){for(var u in o)if(Object.prototype.hasOwnProperty.call(o,u)){var g=o[u];typeof g=="string"?h.setAttribute(u,g):g!=null&&(h[u]=g)}r++}for(;r<arguments.length;r++)add(h,arguments[r]);return h}function add(h,r){if(typeof r=="string")h.appendChild(document.createTextNode(r));else if(r!=null)if(r.nodeType!=null)h.appendChild(r);else if(Array.isArray(r))for(var o=0;o<r.length;o++)add(h,r[o]);else throw new RangeError("Unsupported child node: "+r)}let nav=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},doc=typeof document<"u"?document:{documentElement:{style:{}}};const ie_edge=/Edge\/(\d+)/.exec(nav.userAgent),ie_upto10=/MSIE \d/.test(nav.userAgent),ie_11up=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(nav.userAgent),ie=!!(ie_upto10||ie_11up||ie_edge),gecko=!ie&&/gecko\/(\d+)/i.test(nav.userAgent),chrome=!ie&&/Chrome\/(\d+)/.exec(nav.userAgent),webkit="webkitFontSmoothing"in doc.documentElement.style,safari=!ie&&/Apple Computer/.test(nav.vendor),ios=safari&&(/Mobile\/\w+/.test(nav.userAgent)||nav.maxTouchPoints>2);var browser={mac:ios||/Mac/.test(nav.platform),windows:/Win/.test(nav.platform),linux:/Linux|X11/.test(nav.platform),ie,ie_version:ie_upto10?doc.documentMode||6:ie_11up?+ie_11up[1]:ie_edge?+ie_edge[1]:0,gecko,gecko_version:gecko?+(/Firefox\/(\d+)/.exec(nav.userAgent)||[0,0])[1]:0,chrome:!!chrome,chrome_version:chrome?+chrome[1]:0,ios,android:/Android\b/.test(nav.userAgent),webkit_version:webkit?+(/\bAppleWebKit\/(\d+)/.exec(nav.userAgent)||[0,0])[1]:0,safari,safari_version:safari?+(/\bVersion\/(\d+(\.\d+)?)/.exec(nav.userAgent)||[0,0])[1]:0,tabSize:doc.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};function getSelection(h){let r;return h.nodeType==11?r=h.getSelection?h:h.ownerDocument:r=h,r.getSelection()}function contains(h,r){return r?h==r||h.contains(r.nodeType!=1?r.parentNode:r):!1}function hasSelection(h,r){if(!r.anchorNode)return!1;try{return contains(h,r.anchorNode)}catch{return!1}}function clientRectsFor(h){return h.nodeType==3?textRange(h,0,h.nodeValue.length).getClientRects():h.nodeType==1?h.getClientRects():[]}function isEquivalentPosition(h,r,o,u){return o?scanFor(h,r,o,u,-1)||scanFor(h,r,o,u,1):!1}function domIndex(h){for(var r=0;;r++)if(h=h.previousSibling,!h)return r}function isBlockElement(h){return h.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(h.nodeName)}function scanFor(h,r,o,u,g){for(;;){if(h==o&&r==u)return!0;if(r==(g<0?0:maxOffset(h))){if(h.nodeName=="DIV")return!1;let k=h.parentNode;if(!k||k.nodeType!=1)return!1;r=domIndex(h)+(g<0?0:1),h=k}else if(h.nodeType==1){if(h=h.childNodes[r+(g<0?-1:0)],h.nodeType==1&&h.contentEditable=="false")return!1;r=g<0?maxOffset(h):0}else return!1}}function maxOffset(h){return h.nodeType==3?h.nodeValue.length:h.childNodes.length}function flattenRect(h,r){let o=r?h.left:h.right;return{left:o,right:o,top:h.top,bottom:h.bottom}}function windowRect(h){let r=h.visualViewport;return r?{left:0,right:r.width,top:0,bottom:r.height}:{left:0,right:h.innerWidth,top:0,bottom:h.innerHeight}}function getScale(h,r){let o=r.width/h.offsetWidth,u=r.height/h.offsetHeight;return(o>.995&&o<1.005||!isFinite(o)||Math.abs(r.width-h.offsetWidth)<1)&&(o=1),(u>.995&&u<1.005||!isFinite(u)||Math.abs(r.height-h.offsetHeight)<1)&&(u=1),{scaleX:o,scaleY:u}}function scrollRectIntoView(h,r,o,u,g,k,A,R){let q=h.ownerDocument,_=q.defaultView||window;for(let ee=h,te=!1;ee&&!te;)if(ee.nodeType==1){let ne,re=ee==q.body,oe=1,le=1;if(re)ne=windowRect(_);else{if(/^(fixed|sticky)$/.test(getComputedStyle(ee).position)&&(te=!0),ee.scrollHeight<=ee.clientHeight&&ee.scrollWidth<=ee.clientWidth){ee=ee.assignedSlot||ee.parentNode;continue}let he=ee.getBoundingClientRect();({scaleX:oe,scaleY:le}=getScale(ee,he)),ne={left:he.left,right:he.left+ee.clientWidth*oe,top:he.top,bottom:he.top+ee.clientHeight*le}}let pe=0,de=0;if(g=="nearest")r.top<ne.top?(de=r.top-(ne.top+A),o>0&&r.bottom>ne.bottom+de&&(de=r.bottom-ne.bottom+A)):r.bottom>ne.bottom&&(de=r.bottom-ne.bottom+A,o<0&&r.top-de<ne.top&&(de=r.top-(ne.top+A)));else{let he=r.bottom-r.top,ae=ne.bottom-ne.top;de=(g=="center"&&he<=ae?r.top+he/2-ae/2:g=="start"||g=="center"&&o<0?r.top-A:r.bottom-ae+A)-ne.top}if(u=="nearest"?r.left<ne.left?(pe=r.left-(ne.left+k),o>0&&r.right>ne.right+pe&&(pe=r.right-ne.right+k)):r.right>ne.right&&(pe=r.right-ne.right+k,o<0&&r.left<ne.left+pe&&(pe=r.left-(ne.left+k))):pe=(u=="center"?r.left+(r.right-r.left)/2-(ne.right-ne.left)/2:u=="start"==R?r.left-k:r.right-(ne.right-ne.left)+k)-ne.left,pe||de)if(re)_.scrollBy(pe,de);else{let he=0,ae=0;if(de){let se=ee.scrollTop;ee.scrollTop+=de/le,ae=(ee.scrollTop-se)*le}if(pe){let se=ee.scrollLeft;ee.scrollLeft+=pe/oe,he=(ee.scrollLeft-se)*oe}r={left:r.left-he,top:r.top-ae,right:r.right-he,bottom:r.bottom-ae},he&&Math.abs(he-pe)<1&&(u="nearest"),ae&&Math.abs(ae-de)<1&&(g="nearest")}if(re)break;(r.top<ne.top||r.bottom>ne.bottom||r.left<ne.left||r.right>ne.right)&&(r={left:Math.max(r.left,ne.left),right:Math.min(r.right,ne.right),top:Math.max(r.top,ne.top),bottom:Math.min(r.bottom,ne.bottom)}),ee=ee.assignedSlot||ee.parentNode}else if(ee.nodeType==11)ee=ee.host;else break}function scrollableParents(h){let r=h.ownerDocument,o,u;for(let g=h.parentNode;g&&!(g==r.body||o&&u);)if(g.nodeType==1)!u&&g.scrollHeight>g.clientHeight&&(u=g),!o&&g.scrollWidth>g.clientWidth&&(o=g),g=g.assignedSlot||g.parentNode;else if(g.nodeType==11)g=g.host;else break;return{x:o,y:u}}class DOMSelectionState{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(r){return this.anchorNode==r.anchorNode&&this.anchorOffset==r.anchorOffset&&this.focusNode==r.focusNode&&this.focusOffset==r.focusOffset}setRange(r){let{anchorNode:o,focusNode:u}=r;this.set(o,Math.min(r.anchorOffset,o?maxOffset(o):0),u,Math.min(r.focusOffset,u?maxOffset(u):0))}set(r,o,u,g){this.anchorNode=r,this.anchorOffset=o,this.focusNode=u,this.focusOffset=g}}let preventScrollSupported=null;browser.safari&&browser.safari_version>=26&&(preventScrollSupported=!1);function focusPreventScroll(h){if(h.setActive)return h.setActive();if(preventScrollSupported)return h.focus(preventScrollSupported);let r=[];for(let o=h;o&&(r.push(o,o.scrollTop,o.scrollLeft),o!=o.ownerDocument);o=o.parentNode);if(h.focus(preventScrollSupported==null?{get preventScroll(){return preventScrollSupported={preventScroll:!0},!0}}:void 0),!preventScrollSupported){preventScrollSupported=!1;for(let o=0;o<r.length;){let u=r[o++],g=r[o++],k=r[o++];u.scrollTop!=g&&(u.scrollTop=g),u.scrollLeft!=k&&(u.scrollLeft=k)}}}let scratchRange;function textRange(h,r,o=r){let u=scratchRange||(scratchRange=document.createRange());return u.setEnd(h,o),u.setStart(h,r),u}function dispatchKey(h,r,o,u){let g={key:r,code:r,keyCode:o,which:o,cancelable:!0};u&&({altKey:g.altKey,ctrlKey:g.ctrlKey,shiftKey:g.shiftKey,metaKey:g.metaKey}=u);let k=new KeyboardEvent("keydown",g);k.synthetic=!0,h.dispatchEvent(k);let A=new KeyboardEvent("keyup",g);return A.synthetic=!0,h.dispatchEvent(A),k.defaultPrevented||A.defaultPrevented}function getRoot(h){for(;h;){if(h&&(h.nodeType==9||h.nodeType==11&&h.host))return h;h=h.assignedSlot||h.parentNode}return null}function clearAttributes(h){for(;h.attributes.length;)h.removeAttributeNode(h.attributes[0])}function atElementStart(h,r){let o=r.focusNode,u=r.focusOffset;if(!o||r.anchorNode!=o||r.anchorOffset!=u)return!1;for(u=Math.min(u,maxOffset(o));;)if(u){if(o.nodeType!=1)return!1;let g=o.childNodes[u-1];g.contentEditable=="false"?u--:(o=g,u=maxOffset(o))}else{if(o==h)return!0;u=domIndex(o),o=o.parentNode}}function isScrolledToBottom(h){return h.scrollTop>Math.max(1,h.scrollHeight-h.clientHeight-4)}function textNodeBefore(h,r){for(let o=h,u=r;;){if(o.nodeType==3&&u>0)return{node:o,offset:u};if(o.nodeType==1&&u>0){if(o.contentEditable=="false")return null;o=o.childNodes[u-1],u=maxOffset(o)}else if(o.parentNode&&!isBlockElement(o))u=domIndex(o),o=o.parentNode;else return null}}function textNodeAfter(h,r){for(let o=h,u=r;;){if(o.nodeType==3&&u<o.nodeValue.length)return{node:o,offset:u};if(o.nodeType==1&&u<o.childNodes.length){if(o.contentEditable=="false")return null;o=o.childNodes[u],u=0}else if(o.parentNode&&!isBlockElement(o))u=domIndex(o)+1,o=o.parentNode;else return null}}class DOMPos{constructor(r,o,u=!0){this.node=r,this.offset=o,this.precise=u}static before(r,o){return new DOMPos(r.parentNode,domIndex(r),o)}static after(r,o){return new DOMPos(r.parentNode,domIndex(r)+1,o)}}const noChildren=[];class ContentView{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(r){let o=this.posAtStart;for(let u of this.children){if(u==r)return o;o+=u.length+u.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(r){return this.posBefore(r)+r.length}sync(r,o){if(this.flags&2){let u=this.dom,g=null,k;for(let A of this.children){if(A.flags&7){if(!A.dom&&(k=g?g.nextSibling:u.firstChild)){let R=ContentView.get(k);(!R||!R.parent&&R.canReuseDOM(A))&&A.reuseDOM(k)}A.sync(r,o),A.flags&=-8}if(k=g?g.nextSibling:u.firstChild,o&&!o.written&&o.node==u&&k!=A.dom&&(o.written=!0),A.dom.parentNode==u)for(;k&&k!=A.dom;)k=rm$1(k);else u.insertBefore(A.dom,k);g=A.dom}for(k=g?g.nextSibling:u.firstChild,k&&o&&o.node==u&&(o.written=!0);k;)k=rm$1(k)}else if(this.flags&1)for(let u of this.children)u.flags&7&&(u.sync(r,o),u.flags&=-8)}reuseDOM(r){}localPosFromDOM(r,o){let u;if(r==this.dom)u=this.dom.childNodes[o];else{let g=maxOffset(r)==0?0:o==0?-1:1;for(;;){let k=r.parentNode;if(k==this.dom)break;g==0&&k.firstChild!=k.lastChild&&(r==k.firstChild?g=-1:g=1),r=k}g<0?u=r:u=r.nextSibling}if(u==this.dom.firstChild)return 0;for(;u&&!ContentView.get(u);)u=u.nextSibling;if(!u)return this.length;for(let g=0,k=0;;g++){let A=this.children[g];if(A.dom==u)return k;k+=A.length+A.breakAfter}}domBoundsAround(r,o,u=0){let g=-1,k=-1,A=-1,R=-1;for(let q=0,_=u,ee=u;q<this.children.length;q++){let te=this.children[q],ne=_+te.length;if(_<r&&ne>o)return te.domBoundsAround(r,o,_);if(ne>=r&&g==-1&&(g=q,k=_),_>o&&te.dom.parentNode==this.dom){A=q,R=ee;break}ee=ne,_=ne+te.breakAfter}return{from:k,to:R<0?u+this.length:R,startDOM:(g?this.children[g-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:A<this.children.length&&A>=0?this.children[A].dom:null}}markDirty(r=!1){this.flags|=2,this.markParentsDirty(r)}markParentsDirty(r){for(let o=this.parent;o;o=o.parent){if(r&&(o.flags|=2),o.flags&1)return;o.flags|=1,r=!1}}setParent(r){this.parent!=r&&(this.parent=r,this.flags&7&&this.markParentsDirty(!0))}setDOM(r){this.dom!=r&&(this.dom&&(this.dom.cmView=null),this.dom=r,r.cmView=this)}get rootView(){for(let r=this;;){let o=r.parent;if(!o)return r;r=o}}replaceChildren(r,o,u=noChildren){this.markDirty();for(let g=r;g<o;g++){let k=this.children[g];k.parent==this&&u.indexOf(k)<0&&k.destroy()}u.length<250?this.children.splice(r,o-r,...u):this.children=[].concat(this.children.slice(0,r),u,this.children.slice(o));for(let g=0;g<u.length;g++)u[g].setParent(this)}ignoreMutation(r){return!1}ignoreEvent(r){return!1}childCursor(r=this.length){return new ChildCursor(this.children,r,this.children.length)}childPos(r,o=1){return this.childCursor().findPos(r,o)}toString(){let r=this.constructor.name.replace("View","");return r+(this.children.length?"("+this.children.join()+")":this.length?"["+(r=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(r){return r.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(r,o,u,g,k,A){return!1}become(r){return!1}canReuseDOM(r){return r.constructor==this.constructor&&!((this.flags|r.flags)&8)}getSide(){return 0}destroy(){for(let r of this.children)r.parent==this&&r.destroy();this.parent=null}}ContentView.prototype.breakAfter=0;function rm$1(h){let r=h.nextSibling;return h.parentNode.removeChild(h),r}class ChildCursor{constructor(r,o,u){this.children=r,this.pos=o,this.i=u,this.off=0}findPos(r,o=1){for(;;){if(r>this.pos||r==this.pos&&(o>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=r-this.pos,this;let u=this.children[--this.i];this.pos-=u.length+u.breakAfter}}}function replaceRange(h,r,o,u,g,k,A,R,q){let{children:_}=h,ee=_.length?_[r]:null,te=k.length?k[k.length-1]:null,ne=te?te.breakAfter:A;if(!(r==u&&ee&&!A&&!ne&&k.length<2&&ee.merge(o,g,k.length?te:null,o==0,R,q))){if(u<_.length){let re=_[u];re&&(g<re.length||re.breakAfter&&(te!=null&&te.breakAfter))?(r==u&&(re=re.split(g),g=0),!ne&&te&&re.merge(0,g,te,!0,0,q)?k[k.length-1]=re:((g||re.children.length&&!re.children[0].length)&&re.merge(0,g,null,!1,0,q),k.push(re))):re!=null&&re.breakAfter&&(te?te.breakAfter=1:A=1),u++}for(ee&&(ee.breakAfter=A,o>0&&(!A&&k.length&&ee.merge(o,ee.length,k[0],!1,R,0)?ee.breakAfter=k.shift().breakAfter:(o<ee.length||ee.children.length&&ee.children[ee.children.length-1].length==0)&&ee.merge(o,ee.length,null,!1,R,0),r++));r<u&&k.length;)if(_[u-1].become(k[k.length-1]))u--,k.pop(),q=k.length?0:R;else if(_[r].become(k[0]))r++,k.shift(),R=k.length?0:q;else break;!k.length&&r&&u<_.length&&!_[r-1].breakAfter&&_[u].merge(0,0,_[r-1],!1,R,q)&&r--,(r<u||k.length)&&h.replaceChildren(r,u,k)}}function mergeChildrenInto(h,r,o,u,g,k){let A=h.childCursor(),{i:R,off:q}=A.findPos(o,1),{i:_,off:ee}=A.findPos(r,-1),te=r-o;for(let ne of u)te+=ne.length;h.length+=te,replaceRange(h,_,ee,R,q,u,0,g,k)}const MaxJoinLen=256;class TextView extends ContentView{constructor(r){super(),this.text=r}get length(){return this.text.length}createDOM(r){this.setDOM(r||document.createTextNode(this.text))}sync(r,o){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(o&&o.node==this.dom&&(o.written=!0),this.dom.nodeValue=this.text)}reuseDOM(r){r.nodeType==3&&this.createDOM(r)}merge(r,o,u){return this.flags&8||u&&(!(u instanceof TextView)||this.length-(o-r)+u.length>MaxJoinLen||u.flags&8)?!1:(this.text=this.text.slice(0,r)+(u?u.text:"")+this.text.slice(o),this.markDirty(),!0)}split(r){let o=new TextView(this.text.slice(r));return this.text=this.text.slice(0,r),this.markDirty(),o.flags|=this.flags&8,o}localPosFromDOM(r,o){return r==this.dom?o:o?this.text.length:0}domAtPos(r){return new DOMPos(this.dom,r)}domBoundsAround(r,o,u){return{from:u,to:u+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(r,o){return textCoords(this.dom,r,o)}}class MarkView extends ContentView{constructor(r,o=[],u=0){super(),this.mark=r,this.children=o,this.length=u;for(let g of o)g.setParent(this)}setAttrs(r){if(clearAttributes(r),this.mark.class&&(r.className=this.mark.class),this.mark.attrs)for(let o in this.mark.attrs)r.setAttribute(o,this.mark.attrs[o]);return r}canReuseDOM(r){return super.canReuseDOM(r)&&!((this.flags|r.flags)&8)}reuseDOM(r){r.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(r),this.flags|=6)}sync(r,o){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(r,o)}merge(r,o,u,g,k,A){return u&&(!(u instanceof MarkView&&u.mark.eq(this.mark))||r&&k<=0||o<this.length&&A<=0)?!1:(mergeChildrenInto(this,r,o,u?u.children.slice():[],k-1,A-1),this.markDirty(),!0)}split(r){let o=[],u=0,g=-1,k=0;for(let R of this.children){let q=u+R.length;q>r&&o.push(u<r?R.split(r-u):R),g<0&&u>=r&&(g=k),u=q,k++}let A=this.length-r;return this.length=r,g>-1&&(this.children.length=g,this.markDirty()),new MarkView(this.mark,o,A)}domAtPos(r){return inlineDOMAtPos(this,r)}coordsAt(r,o){return coordsInChildren(this,r,o)}}function textCoords(h,r,o){let u=h.nodeValue.length;r>u&&(r=u);let g=r,k=r,A=0;r==0&&o<0||r==u&&o>=0?browser.chrome||browser.gecko||(r?(g--,A=1):k<u&&(k++,A=-1)):o<0?g--:k<u&&k++;let R=textRange(h,g,k).getClientRects();if(!R.length)return null;let q=R[(A?A<0:o>=0)?0:R.length-1];return browser.safari&&!A&&q.width==0&&(q=Array.prototype.find.call(R,_=>_.width)||q),A?flattenRect(q,A<0):q||null}class WidgetView extends ContentView{static create(r,o,u){return new WidgetView(r,o,u)}constructor(r,o,u){super(),this.widget=r,this.length=o,this.side=u,this.prevWidget=null}split(r){let o=WidgetView.create(this.widget,this.length-r,this.side);return this.length-=r,o}sync(r){(!this.dom||!this.widget.updateDOM(this.dom,r))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(r)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(r,o,u,g,k,A){return u&&(!(u instanceof WidgetView)||!this.widget.compare(u.widget)||r>0&&k<=0||o<this.length&&A<=0)?!1:(this.length=r+(u?u.length:0)+(this.length-o),!0)}become(r){return r instanceof WidgetView&&r.side==this.side&&this.widget.constructor==r.widget.constructor?(this.widget.compare(r.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=r.widget,this.length=r.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(r){return this.widget.ignoreEvent(r)}get overrideDOMText(){if(this.length==0)return Text.empty;let r=this;for(;r.parent;)r=r.parent;let{view:o}=r,u=o&&o.state.doc,g=this.posAtStart;return u?u.slice(g,g+this.length):Text.empty}domAtPos(r){return(this.length?r==0:this.side>0)?DOMPos.before(this.dom):DOMPos.after(this.dom,r==this.length)}domBoundsAround(){return null}coordsAt(r,o){let u=this.widget.coordsAt(this.dom,r,o);if(u)return u;let g=this.dom.getClientRects(),k=null;if(!g.length)return null;let A=this.side?this.side<0:r>0;for(let R=A?g.length-1:0;k=g[R],!(r>0?R==0:R==g.length-1||k.top<k.bottom);R+=A?-1:1);return flattenRect(k,!A)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class WidgetBufferView extends ContentView{constructor(r){super(),this.side=r}get length(){return 0}merge(){return!1}become(r){return r instanceof WidgetBufferView&&r.side==this.side}split(){return new WidgetBufferView(this.side)}sync(){if(!this.dom){let r=document.createElement("img");r.className="cm-widgetBuffer",r.setAttribute("aria-hidden","true"),this.setDOM(r)}}getSide(){return this.side}domAtPos(r){return this.side>0?DOMPos.before(this.dom):DOMPos.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(r){return this.dom.getBoundingClientRect()}get overrideDOMText(){return Text.empty}get isHidden(){return!0}}TextView.prototype.children=WidgetView.prototype.children=WidgetBufferView.prototype.children=noChildren;function inlineDOMAtPos(h,r){let o=h.dom,{children:u}=h,g=0;for(let k=0;g<u.length;g++){let A=u[g],R=k+A.length;if(!(R==k&&A.getSide()<=0)){if(r>k&&r<R&&A.dom.parentNode==o)return A.domAtPos(r-k);if(r<=k)break;k=R}}for(let k=g;k>0;k--){let A=u[k-1];if(A.dom.parentNode==o)return A.domAtPos(A.length)}for(let k=g;k<u.length;k++){let A=u[k];if(A.dom.parentNode==o)return A.domAtPos(0)}return new DOMPos(o,0)}function joinInlineInto(h,r,o){let u,{children:g}=h;o>0&&r instanceof MarkView&&g.length&&(u=g[g.length-1])instanceof MarkView&&u.mark.eq(r.mark)?joinInlineInto(u,r.children[0],o-1):(g.push(r),r.setParent(h)),h.length+=r.length}function coordsInChildren(h,r,o){let u=null,g=-1,k=null,A=-1;function R(_,ee){for(let te=0,ne=0;te<_.children.length&&ne<=ee;te++){let re=_.children[te],oe=ne+re.length;oe>=ee&&(re.children.length?R(re,ee-ne):(!k||k.isHidden&&(o>0||onSameLine(k,re)))&&(oe>ee||ne==oe&&re.getSide()>0)?(k=re,A=ee-ne):(ne<ee||ne==oe&&re.getSide()<0&&!re.isHidden)&&(u=re,g=ee-ne)),ne=oe}}R(h,r);let q=(o<0?u:k)||u||k;return q?q.coordsAt(Math.max(0,q==u?g:A),o):fallbackRect(h)}function fallbackRect(h){let r=h.dom.lastChild;if(!r)return h.dom.getBoundingClientRect();let o=clientRectsFor(r);return o[o.length-1]||null}function onSameLine(h,r){let o=h.coordsAt(0,1),u=r.coordsAt(0,1);return o&&u&&u.top<o.bottom}function combineAttrs(h,r){for(let o in h)o=="class"&&r.class?r.class+=" "+h.class:o=="style"&&r.style?r.style+=";"+h.style:r[o]=h[o];return r}const noAttrs$1=Object.create(null);function attrsEq(h,r,o){if(h==r)return!0;h||(h=noAttrs$1),r||(r=noAttrs$1);let u=Object.keys(h),g=Object.keys(r);if(u.length-(o&&u.indexOf(o)>-1?1:0)!=g.length-(o&&g.indexOf(o)>-1?1:0))return!1;for(let k of u)if(k!=o&&(g.indexOf(k)==-1||h[k]!==r[k]))return!1;return!0}function updateAttrs(h,r,o){let u=!1;if(r)for(let g in r)o&&g in o||(u=!0,g=="style"?h.style.cssText="":h.removeAttribute(g));if(o)for(let g in o)r&&r[g]==o[g]||(u=!0,g=="style"?h.style.cssText=o[g]:h.setAttribute(g,o[g]));return u}function getAttrs$1(h){let r=Object.create(null);for(let o=0;o<h.attributes.length;o++){let u=h.attributes[o];r[u.name]=u.value}return r}class WidgetType{eq(r){return!1}updateDOM(r,o){return!1}compare(r){return this==r||this.constructor==r.constructor&&this.eq(r)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(r){return!0}coordsAt(r,o,u){return null}get isHidden(){return!1}get editable(){return!1}destroy(r){}}var BlockType=(function(h){return h[h.Text=0]="Text",h[h.WidgetBefore=1]="WidgetBefore",h[h.WidgetAfter=2]="WidgetAfter",h[h.WidgetRange=3]="WidgetRange",h})(BlockType||(BlockType={}));class Decoration extends RangeValue{constructor(r,o,u,g){super(),this.startSide=r,this.endSide=o,this.widget=u,this.spec=g}get heightRelevant(){return!1}static mark(r){return new MarkDecoration(r)}static widget(r){let o=Math.max(-1e4,Math.min(1e4,r.side||0)),u=!!r.block;return o+=u&&!r.inlineOrder?o>0?3e8:-4e8:o>0?1e8:-1e8,new PointDecoration(r,o,o,u,r.widget||null,!1)}static replace(r){let o=!!r.block,u,g;if(r.isBlockGap)u=-5e8,g=4e8;else{let{start:k,end:A}=getInclusive(r,o);u=(k?o?-3e8:-1:5e8)-1,g=(A?o?2e8:1:-6e8)+1}return new PointDecoration(r,u,g,o,r.widget||null,!0)}static line(r){return new LineDecoration(r)}static set(r,o=!1){return RangeSet.of(r,o)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Decoration.none=RangeSet.empty;class MarkDecoration extends Decoration{constructor(r){let{start:o,end:u}=getInclusive(r);super(o?-1:5e8,u?1:-6e8,null,r),this.tagName=r.tagName||"span",this.class=r.class||"",this.attrs=r.attributes||null}eq(r){var o,u;return this==r||r instanceof MarkDecoration&&this.tagName==r.tagName&&(this.class||((o=this.attrs)===null||o===void 0?void 0:o.class))==(r.class||((u=r.attrs)===null||u===void 0?void 0:u.class))&&attrsEq(this.attrs,r.attrs,"class")}range(r,o=r){if(r>=o)throw new RangeError("Mark decorations may not be empty");return super.range(r,o)}}MarkDecoration.prototype.point=!1;class LineDecoration extends Decoration{constructor(r){super(-2e8,-2e8,null,r)}eq(r){return r instanceof LineDecoration&&this.spec.class==r.spec.class&&attrsEq(this.spec.attributes,r.spec.attributes)}range(r,o=r){if(o!=r)throw new RangeError("Line decoration ranges must be zero-length");return super.range(r,o)}}LineDecoration.prototype.mapMode=MapMode.TrackBefore;LineDecoration.prototype.point=!0;class PointDecoration extends Decoration{constructor(r,o,u,g,k,A){super(o,u,k,r),this.block=g,this.isReplace=A,this.mapMode=g?o<=0?MapMode.TrackBefore:MapMode.TrackAfter:MapMode.TrackDel}get type(){return this.startSide!=this.endSide?BlockType.WidgetRange:this.startSide<=0?BlockType.WidgetBefore:BlockType.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(r){return r instanceof PointDecoration&&widgetsEq(this.widget,r.widget)&&this.block==r.block&&this.startSide==r.startSide&&this.endSide==r.endSide}range(r,o=r){if(this.isReplace&&(r>o||r==o&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&o!=r)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(r,o)}}PointDecoration.prototype.point=!0;function getInclusive(h,r=!1){let{inclusiveStart:o,inclusiveEnd:u}=h;return o==null&&(o=h.inclusive),u==null&&(u=h.inclusive),{start:o??r,end:u??r}}function widgetsEq(h,r){return h==r||!!(h&&r&&h.compare(r))}function addRange(h,r,o,u=0){let g=o.length-1;g>=0&&o[g]+u>=h?o[g]=Math.max(o[g],r):o.push(h,r)}class LineView extends ContentView{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(r,o,u,g,k,A){if(u){if(!(u instanceof LineView))return!1;this.dom||u.transferDOM(this)}return g&&this.setDeco(u?u.attrs:null),mergeChildrenInto(this,r,o,u?u.children.slice():[],k,A),!0}split(r){let o=new LineView;if(o.breakAfter=this.breakAfter,this.length==0)return o;let{i:u,off:g}=this.childPos(r);g&&(o.append(this.children[u].split(g),0),this.children[u].merge(g,this.children[u].length,null,!1,0,0),u++);for(let k=u;k<this.children.length;k++)o.append(this.children[k],0);for(;u>0&&this.children[u-1].length==0;)this.children[--u].destroy();return this.children.length=u,this.markDirty(),this.length=r,o}transferDOM(r){this.dom&&(this.markDirty(),r.setDOM(this.dom),r.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(r){attrsEq(this.attrs,r)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=r)}append(r,o){joinInlineInto(this,r,o)}addLineDeco(r){let o=r.spec.attributes,u=r.spec.class;o&&(this.attrs=combineAttrs(o,this.attrs||{})),u&&(this.attrs=combineAttrs({class:u},this.attrs||{}))}domAtPos(r){return inlineDOMAtPos(this,r)}reuseDOM(r){r.nodeName=="DIV"&&(this.setDOM(r),this.flags|=6)}sync(r,o){var u;this.dom?this.flags&4&&(clearAttributes(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(updateAttrs(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(r,o);let g=this.dom.lastChild;for(;g&&ContentView.get(g)instanceof MarkView;)g=g.lastChild;if(!g||!this.length||g.nodeName!="BR"&&((u=ContentView.get(g))===null||u===void 0?void 0:u.isEditable)==!1&&(!browser.ios||!this.children.some(k=>k instanceof TextView))){let k=document.createElement("BR");k.cmIgnore=!0,this.dom.appendChild(k)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let r=0,o;for(let u of this.children){if(!(u instanceof TextView)||/[^ -~]/.test(u.text))return null;let g=clientRectsFor(u.dom);if(g.length!=1)return null;r+=g[0].width,o=g[0].height}return r?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:r/this.length,textHeight:o}:null}coordsAt(r,o){let u=coordsInChildren(this,r,o);if(!this.children.length&&u&&this.parent){let{heightOracle:g}=this.parent.view.viewState,k=u.bottom-u.top;if(Math.abs(k-g.lineHeight)<2&&g.textHeight<k){let A=(k-g.textHeight)/2;return{top:u.top+A,bottom:u.bottom-A,left:u.left,right:u.left}}}return u}become(r){return r instanceof LineView&&this.children.length==0&&r.children.length==0&&attrsEq(this.attrs,r.attrs)&&this.breakAfter==r.breakAfter}covers(){return!0}static find(r,o){for(let u=0,g=0;u<r.children.length;u++){let k=r.children[u],A=g+k.length;if(A>=o){if(k instanceof LineView)return k;if(A>o)break}g=A+k.breakAfter}return null}}class BlockWidgetView extends ContentView{constructor(r,o,u){super(),this.widget=r,this.length=o,this.deco=u,this.breakAfter=0,this.prevWidget=null}merge(r,o,u,g,k,A){return u&&(!(u instanceof BlockWidgetView)||!this.widget.compare(u.widget)||r>0&&k<=0||o<this.length&&A<=0)?!1:(this.length=r+(u?u.length:0)+(this.length-o),!0)}domAtPos(r){return r==0?DOMPos.before(this.dom):DOMPos.after(this.dom,r==this.length)}split(r){let o=this.length-r;this.length=r;let u=new BlockWidgetView(this.widget,o,this.deco);return u.breakAfter=this.breakAfter,u}get children(){return noChildren}sync(r){(!this.dom||!this.widget.updateDOM(this.dom,r))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(r)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Text.empty}domBoundsAround(){return null}become(r){return r instanceof BlockWidgetView&&r.widget.constructor==this.widget.constructor?(r.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=r.widget,this.length=r.length,this.deco=r.deco,this.breakAfter=r.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(r){return this.widget.ignoreEvent(r)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(r,o){let u=this.widget.coordsAt(this.dom,r,o);return u||(this.widget instanceof BlockGapWidget?null:flattenRect(this.dom.getBoundingClientRect(),this.length?r==0:o<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(r){let{startSide:o,endSide:u}=this.deco;return o==u?!1:r<0?o<0:u>0}}class BlockGapWidget extends WidgetType{constructor(r){super(),this.height=r}toDOM(){let r=document.createElement("div");return r.className="cm-gap",this.updateDOM(r),r}eq(r){return r.height==this.height}updateDOM(r){return r.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class ContentBuilder{constructor(r,o,u,g){this.doc=r,this.pos=o,this.end=u,this.disallowBlockEffectsFor=g,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=r.iter(),this.skip=o}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let r=this.content[this.content.length-1];return!(r.breakAfter||r instanceof BlockWidgetView&&r.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new LineView),this.atCursorPos=!0),this.curLine}flushBuffer(r=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(wrapMarks(new WidgetBufferView(-1),r),r.length),this.pendingBuffer=0)}addBlockWidget(r){this.flushBuffer(),this.curLine=null,this.content.push(r)}finish(r){this.pendingBuffer&&r<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(r&&this.content.length&&this.content[this.content.length-1]instanceof BlockWidgetView)&&this.getLine()}buildText(r,o,u){for(;r>0;){if(this.textOff==this.text.length){let{value:A,lineBreak:R,done:q}=this.cursor.next(this.skip);if(this.skip=0,q)throw new Error("Ran out of text content when drawing inline views");if(R){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,r--;continue}else this.text=A,this.textOff=0}let g=Math.min(this.text.length-this.textOff,r),k=Math.min(g,512);this.flushBuffer(o.slice(o.length-u)),this.getLine().append(wrapMarks(new TextView(this.text.slice(this.textOff,this.textOff+k)),o),u),this.atCursorPos=!0,this.textOff+=k,r-=k,u=g<=k?0:o.length}}span(r,o,u,g){this.buildText(o-r,u,g),this.pos=o,this.openStart<0&&(this.openStart=g)}point(r,o,u,g,k,A){if(this.disallowBlockEffectsFor[A]&&u instanceof PointDecoration){if(u.block)throw new RangeError("Block decorations may not be specified via plugins");if(o>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let R=o-r;if(u instanceof PointDecoration)if(u.block)u.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new BlockWidgetView(u.widget||NullWidget.block,R,u));else{let q=WidgetView.create(u.widget||NullWidget.inline,R,R?0:u.startSide),_=this.atCursorPos&&!q.isEditable&&k<=g.length&&(r<o||u.startSide>0),ee=!q.isEditable&&(r<o||k>g.length||u.startSide<=0),te=this.getLine();this.pendingBuffer==2&&!_&&!q.isEditable&&(this.pendingBuffer=0),this.flushBuffer(g),_&&(te.append(wrapMarks(new WidgetBufferView(1),g),k),k=g.length+Math.max(0,k-g.length)),te.append(wrapMarks(q,g),k),this.atCursorPos=ee,this.pendingBuffer=ee?r<o||k>g.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=g.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(u);R&&(this.textOff+R<=this.text.length?this.textOff+=R:(this.skip+=R-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=o),this.openStart<0&&(this.openStart=k)}static build(r,o,u,g,k){let A=new ContentBuilder(r,o,u,k);return A.openEnd=RangeSet.spans(g,o,u,A),A.openStart<0&&(A.openStart=A.openEnd),A.finish(A.openEnd),A}}function wrapMarks(h,r){for(let o of r)h=new MarkView(o,[h],h.length);return h}class NullWidget extends WidgetType{constructor(r){super(),this.tag=r}eq(r){return r.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(r){return r.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}NullWidget.inline=new NullWidget("span");NullWidget.block=new NullWidget("div");var Direction=(function(h){return h[h.LTR=0]="LTR",h[h.RTL=1]="RTL",h})(Direction||(Direction={}));const LTR=Direction.LTR,RTL=Direction.RTL;function dec(h){let r=[];for(let o=0;o<h.length;o++)r.push(1<<+h[o]);return r}const LowTypes=dec("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),ArabicTypes=dec("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Brackets=Object.create(null),BracketStack=[];for(let h of["()","[]","{}"]){let r=h.charCodeAt(0),o=h.charCodeAt(1);Brackets[r]=o,Brackets[o]=-r}function charType(h){return h<=247?LowTypes[h]:1424<=h&&h<=1524?2:1536<=h&&h<=1785?ArabicTypes[h-1536]:1774<=h&&h<=2220?4:8192<=h&&h<=8204?256:64336<=h&&h<=65023?4:1}const BidiRE=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class BidiSpan{get dir(){return this.level%2?RTL:LTR}constructor(r,o,u){this.from=r,this.to=o,this.level=u}side(r,o){return this.dir==o==r?this.to:this.from}forward(r,o){return r==(this.dir==o)}static find(r,o,u,g){let k=-1;for(let A=0;A<r.length;A++){let R=r[A];if(R.from<=o&&R.to>=o){if(R.level==u)return A;(k<0||(g!=0?g<0?R.from<o:R.to>o:r[k].level>R.level))&&(k=A)}}if(k<0)throw new RangeError("Index out of range");return k}}function isolatesEq(h,r){if(h.length!=r.length)return!1;for(let o=0;o<h.length;o++){let u=h[o],g=r[o];if(u.from!=g.from||u.to!=g.to||u.direction!=g.direction||!isolatesEq(u.inner,g.inner))return!1}return!0}const types=[];function computeCharTypes(h,r,o,u,g){for(let k=0;k<=u.length;k++){let A=k?u[k-1].to:r,R=k<u.length?u[k].from:o,q=k?256:g;for(let _=A,ee=q,te=q;_<R;_++){let ne=charType(h.charCodeAt(_));ne==512?ne=ee:ne==8&&te==4&&(ne=16),types[_]=ne==4?2:ne,ne&7&&(te=ne),ee=ne}for(let _=A,ee=q,te=q;_<R;_++){let ne=types[_];if(ne==128)_<R-1&&ee==types[_+1]&&ee&24?ne=types[_]=ee:types[_]=256;else if(ne==64){let re=_+1;for(;re<R&&types[re]==64;)re++;let oe=_&&ee==8||re<o&&types[re]==8?te==1?1:8:256;for(let le=_;le<re;le++)types[le]=oe;_=re-1}else ne==8&&te==1&&(types[_]=1);ee=ne,ne&7&&(te=ne)}}}function processBracketPairs(h,r,o,u,g){let k=g==1?2:1;for(let A=0,R=0,q=0;A<=u.length;A++){let _=A?u[A-1].to:r,ee=A<u.length?u[A].from:o;for(let te=_,ne,re,oe;te<ee;te++)if(re=Brackets[ne=h.charCodeAt(te)])if(re<0){for(let le=R-3;le>=0;le-=3)if(BracketStack[le+1]==-re){let pe=BracketStack[le+2],de=pe&2?g:pe&4?pe&1?k:g:0;de&&(types[te]=types[BracketStack[le]]=de),R=le;break}}else{if(BracketStack.length==189)break;BracketStack[R++]=te,BracketStack[R++]=ne,BracketStack[R++]=q}else if((oe=types[te])==2||oe==1){let le=oe==g;q=le?0:1;for(let pe=R-3;pe>=0;pe-=3){let de=BracketStack[pe+2];if(de&2)break;if(le)BracketStack[pe+2]|=2;else{if(de&4)break;BracketStack[pe+2]|=4}}}}}function processNeutrals(h,r,o,u){for(let g=0,k=u;g<=o.length;g++){let A=g?o[g-1].to:h,R=g<o.length?o[g].from:r;for(let q=A;q<R;){let _=types[q];if(_==256){let ee=q+1;for(;;)if(ee==R){if(g==o.length)break;ee=o[g++].to,R=g<o.length?o[g].from:r}else if(types[ee]==256)ee++;else break;let te=k==1,ne=(ee<r?types[ee]:u)==1,re=te==ne?te?1:2:u;for(let oe=ee,le=g,pe=le?o[le-1].to:h;oe>q;)oe==pe&&(oe=o[--le].from,pe=le?o[le-1].to:h),types[--oe]=re;q=ee}else k=_,q++}}}function emitSpans(h,r,o,u,g,k,A){let R=u%2?2:1;if(u%2==g%2)for(let q=r,_=0;q<o;){let ee=!0,te=!1;if(_==k.length||q<k[_].from){let le=types[q];le!=R&&(ee=!1,te=le==16)}let ne=!ee&&R==1?[]:null,re=ee?u:u+1,oe=q;e:for(;;)if(_<k.length&&oe==k[_].from){if(te)break e;let le=k[_];if(!ee)for(let pe=le.to,de=_+1;;){if(pe==o)break e;if(de<k.length&&k[de].from==pe)pe=k[de++].to;else{if(types[pe]==R)break e;break}}if(_++,ne)ne.push(le);else{le.from>q&&A.push(new BidiSpan(q,le.from,re));let pe=le.direction==LTR!=!(re%2);computeSectionOrder(h,pe?u+1:u,g,le.inner,le.from,le.to,A),q=le.to}oe=le.to}else{if(oe==o||(ee?types[oe]!=R:types[oe]==R))break;oe++}ne?emitSpans(h,q,oe,u+1,g,ne,A):q<oe&&A.push(new BidiSpan(q,oe,re)),q=oe}else for(let q=o,_=k.length;q>r;){let ee=!0,te=!1;if(!_||q>k[_-1].to){let le=types[q-1];le!=R&&(ee=!1,te=le==16)}let ne=!ee&&R==1?[]:null,re=ee?u:u+1,oe=q;e:for(;;)if(_&&oe==k[_-1].to){if(te)break e;let le=k[--_];if(!ee)for(let pe=le.from,de=_;;){if(pe==r)break e;if(de&&k[de-1].to==pe)pe=k[--de].from;else{if(types[pe-1]==R)break e;break}}if(ne)ne.push(le);else{le.to<q&&A.push(new BidiSpan(le.to,q,re));let pe=le.direction==LTR!=!(re%2);computeSectionOrder(h,pe?u+1:u,g,le.inner,le.from,le.to,A),q=le.from}oe=le.from}else{if(oe==r||(ee?types[oe-1]!=R:types[oe-1]==R))break;oe--}ne?emitSpans(h,oe,q,u+1,g,ne,A):oe<q&&A.push(new BidiSpan(oe,q,re)),q=oe}}function computeSectionOrder(h,r,o,u,g,k,A){let R=r%2?2:1;computeCharTypes(h,g,k,u,R),processBracketPairs(h,g,k,u,R),processNeutrals(g,k,u,R),emitSpans(h,g,k,r,o,u,A)}function computeOrder(h,r,o){if(!h)return[new BidiSpan(0,0,r==RTL?1:0)];if(r==LTR&&!o.length&&!BidiRE.test(h))return trivialOrder(h.length);if(o.length)for(;h.length>types.length;)types[types.length]=256;let u=[],g=r==LTR?0:1;return computeSectionOrder(h,g,g,o,0,h.length,u),u}function trivialOrder(h){return[new BidiSpan(0,h,0)]}let movedOver="";function moveVisually(h,r,o,u,g){var k;let A=u.head-h.from,R=BidiSpan.find(r,A,(k=u.bidiLevel)!==null&&k!==void 0?k:-1,u.assoc),q=r[R],_=q.side(g,o);if(A==_){let ne=R+=g?1:-1;if(ne<0||ne>=r.length)return null;q=r[R=ne],A=q.side(!g,o),_=q.side(g,o)}let ee=findClusterBreak(h.text,A,q.forward(g,o));(ee<q.from||ee>q.to)&&(ee=_),movedOver=h.text.slice(Math.min(A,ee),Math.max(A,ee));let te=R==(g?r.length-1:0)?null:r[R+(g?1:-1)];return te&&ee==_&&te.level+(g?0:1)<q.level?EditorSelection.cursor(te.side(!g,o)+h.from,te.forward(g,o)?1:-1,te.level):EditorSelection.cursor(ee+h.from,q.forward(g,o)?-1:1,q.level)}function autoDirection(h,r,o){for(let u=r;u<o;u++){let g=charType(h.charCodeAt(u));if(g==1)return LTR;if(g==2||g==4)return RTL}return LTR}const clickAddsSelectionRange=Facet.define(),dragMovesSelection$1=Facet.define(),mouseSelectionStyle=Facet.define(),exceptionSink=Facet.define(),updateListener=Facet.define(),inputHandler$1=Facet.define(),focusChangeEffect=Facet.define(),clipboardInputFilter=Facet.define(),clipboardOutputFilter=Facet.define(),perLineTextDirection=Facet.define({combine:h=>h.some(r=>r)}),nativeSelectionHidden=Facet.define({combine:h=>h.some(r=>r)}),scrollHandler=Facet.define();class ScrollTarget{constructor(r,o="nearest",u="nearest",g=5,k=5,A=!1){this.range=r,this.y=o,this.x=u,this.yMargin=g,this.xMargin=k,this.isSnapshot=A}map(r){return r.empty?this:new ScrollTarget(this.range.map(r),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(r){return this.range.to<=r.doc.length?this:new ScrollTarget(EditorSelection.cursor(r.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const scrollIntoView$1=StateEffect.define({map:(h,r)=>h.map(r)}),setEditContextFormatting=StateEffect.define();function logException(h,r,o){let u=h.facet(exceptionSink);u.length?u[0](r):window.onerror&&window.onerror(String(r),o,void 0,void 0,r)||(o?console.error(o+":",r):console.error(r))}const editable=Facet.define({combine:h=>h.length?h[0]:!0});let nextPluginID=0;const viewPlugin=Facet.define({combine(h){return h.filter((r,o)=>{for(let u=0;u<o;u++)if(h[u].plugin==r.plugin)return!1;return!0})}});class ViewPlugin{constructor(r,o,u,g,k){this.id=r,this.create=o,this.domEventHandlers=u,this.domEventObservers=g,this.baseExtensions=k(this),this.extension=this.baseExtensions.concat(viewPlugin.of({plugin:this,arg:void 0}))}of(r){return this.baseExtensions.concat(viewPlugin.of({plugin:this,arg:r}))}static define(r,o){const{eventHandlers:u,eventObservers:g,provide:k,decorations:A}=o||{};return new ViewPlugin(nextPluginID++,r,u,g,R=>{let q=[];return A&&q.push(decorations.of(_=>{let ee=_.plugin(R);return ee?A(ee):Decoration.none})),k&&q.push(k(R)),q})}static fromClass(r,o){return ViewPlugin.define((u,g)=>new r(u,g),o)}}class PluginInstance{constructor(r){this.spec=r,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(r){if(this.value){if(this.mustUpdate){let o=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(o)}catch(u){if(logException(o.state,u,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(r,this.spec.arg)}catch(o){logException(r.state,o,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(r){var o;if(!((o=this.value)===null||o===void 0)&&o.destroy)try{this.value.destroy()}catch(u){logException(r.state,u,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const editorAttributes=Facet.define(),contentAttributes=Facet.define(),decorations=Facet.define(),outerDecorations=Facet.define(),atomicRanges=Facet.define(),bidiIsolatedRanges=Facet.define();function getIsolatedRanges(h,r){let o=h.state.facet(bidiIsolatedRanges);if(!o.length)return o;let u=o.map(k=>k instanceof Function?k(h):k),g=[];return RangeSet.spans(u,r.from,r.to,{point(){},span(k,A,R,q){let _=k-r.from,ee=A-r.from,te=g;for(let ne=R.length-1;ne>=0;ne--,q--){let re=R[ne].spec.bidiIsolate,oe;if(re==null&&(re=autoDirection(r.text,_,ee)),q>0&&te.length&&(oe=te[te.length-1]).to==_&&oe.direction==re)oe.to=ee,te=oe.inner;else{let le={from:_,to:ee,direction:re,inner:[]};te.push(le),te=le.inner}}}}),g}const scrollMargins=Facet.define();function getScrollMargins(h){let r=0,o=0,u=0,g=0;for(let k of h.state.facet(scrollMargins)){let A=k(h);A&&(A.left!=null&&(r=Math.max(r,A.left)),A.right!=null&&(o=Math.max(o,A.right)),A.top!=null&&(u=Math.max(u,A.top)),A.bottom!=null&&(g=Math.max(g,A.bottom)))}return{left:r,right:o,top:u,bottom:g}}const styleModule=Facet.define();class ChangedRange{constructor(r,o,u,g){this.fromA=r,this.toA=o,this.fromB=u,this.toB=g}join(r){return new ChangedRange(Math.min(this.fromA,r.fromA),Math.max(this.toA,r.toA),Math.min(this.fromB,r.fromB),Math.max(this.toB,r.toB))}addToSet(r){let o=r.length,u=this;for(;o>0;o--){let g=r[o-1];if(!(g.fromA>u.toA)){if(g.toA<u.fromA)break;u=u.join(g),r.splice(o-1,1)}}return r.splice(o,0,u),r}static extendWithRanges(r,o){if(o.length==0)return r;let u=[];for(let g=0,k=0,A=0,R=0;;g++){let q=g==r.length?null:r[g],_=A-R,ee=q?q.fromB:1e9;for(;k<o.length&&o[k]<ee;){let te=o[k],ne=o[k+1],re=Math.max(R,te),oe=Math.min(ee,ne);if(re<=oe&&new ChangedRange(re+_,oe+_,re,oe).addToSet(u),ne>ee)break;k+=2}if(!q)return u;new ChangedRange(q.fromA,q.toA,q.fromB,q.toB).addToSet(u),A=q.toA,R=q.toB}}}class ViewUpdate{constructor(r,o,u){this.view=r,this.state=o,this.transactions=u,this.flags=0,this.startState=r.state,this.changes=ChangeSet.empty(this.startState.doc.length);for(let k of u)this.changes=this.changes.compose(k.changes);let g=[];this.changes.iterChangedRanges((k,A,R,q)=>g.push(new ChangedRange(k,A,R,q))),this.changedRanges=g}static create(r,o,u){return new ViewUpdate(r,o,u)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(r=>r.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class DocView extends ContentView{get length(){return this.view.state.doc.length}constructor(r){super(),this.view=r,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=Decoration.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(r.contentDOM),this.children=[new LineView],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new ChangedRange(0,0,0,r.state.doc.length)],0,null)}update(r){var o;let u=r.changedRanges;this.minWidth>0&&u.length&&(u.every(({fromA:_,toA:ee})=>ee<this.minWidthFrom||_>this.minWidthTo)?(this.minWidthFrom=r.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=r.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(r);let g=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((o=this.domChanged)===null||o===void 0)&&o.newSel?g=this.domChanged.newSel.head:!touchesComposition(r.changes,this.hasComposition)&&!r.selectionSet&&(g=r.state.selection.main.head));let k=g>-1?findCompositionRange(this.view,r.changes,g):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:_,to:ee}=this.hasComposition;u=new ChangedRange(_,ee,r.changes.mapPos(_,-1),r.changes.mapPos(ee,1)).addToSet(u.slice())}this.hasComposition=k?{from:k.range.fromB,to:k.range.toB}:null,(browser.ie||browser.chrome)&&!k&&r&&r.state.doc.lines!=r.startState.doc.lines&&(this.forceSelection=!0);let A=this.decorations,R=this.updateDeco(),q=findChangedDeco(A,R,r.changes);return u=ChangedRange.extendWithRanges(u,q),!(this.flags&7)&&u.length==0?!1:(this.updateInner(u,r.startState.doc.length,k),r.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(r,o,u){this.view.viewState.mustMeasureContent=!0,this.updateChildren(r,o,u);let{observer:g}=this.view;g.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let A=browser.chrome||browser.ios?{node:g.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,A),this.flags&=-8,A&&(A.written||g.selectionRange.focusNode!=A.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(A=>A.flags&=-9);let k=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let A of this.children)A instanceof BlockWidgetView&&A.widget instanceof BlockGapWidget&&k.push(A.dom);g.updateGaps(k)}updateChildren(r,o,u){let g=u?u.range.addToSet(r.slice()):r,k=this.childCursor(o);for(let A=g.length-1;;A--){let R=A>=0?g[A]:null;if(!R)break;let{fromA:q,toA:_,fromB:ee,toB:te}=R,ne,re,oe,le;if(u&&u.range.fromB<te&&u.range.toB>ee){let se=ContentBuilder.build(this.view.state.doc,ee,u.range.fromB,this.decorations,this.dynamicDecorationMap),ce=ContentBuilder.build(this.view.state.doc,u.range.toB,te,this.decorations,this.dynamicDecorationMap);re=se.breakAtStart,oe=se.openStart,le=ce.openEnd;let fe=this.compositionView(u);ce.breakAtStart?fe.breakAfter=1:ce.content.length&&fe.merge(fe.length,fe.length,ce.content[0],!1,ce.openStart,0)&&(fe.breakAfter=ce.content[0].breakAfter,ce.content.shift()),se.content.length&&fe.merge(0,0,se.content[se.content.length-1],!0,0,se.openEnd)&&se.content.pop(),ne=se.content.concat(fe).concat(ce.content)}else({content:ne,breakAtStart:re,openStart:oe,openEnd:le}=ContentBuilder.build(this.view.state.doc,ee,te,this.decorations,this.dynamicDecorationMap));let{i:pe,off:de}=k.findPos(_,1),{i:he,off:ae}=k.findPos(q,-1);replaceRange(this,he,ae,pe,de,ne,re,oe,le)}u&&this.fixCompositionDOM(u)}updateEditContextFormatting(r){this.editContextFormatting=this.editContextFormatting.map(r.changes);for(let o of r.transactions)for(let u of o.effects)u.is(setEditContextFormatting)&&(this.editContextFormatting=u.value)}compositionView(r){let o=new TextView(r.text.nodeValue);o.flags|=8;for(let{deco:g}of r.marks)o=new MarkView(g,[o],o.length);let u=new LineView;return u.append(o,0),u}fixCompositionDOM(r){let o=(k,A)=>{A.flags|=8|(A.children.some(q=>q.flags&7)?1:0),this.markedForComposition.add(A);let R=ContentView.get(k);R&&R!=A&&(R.dom=null),A.setDOM(k)},u=this.childPos(r.range.fromB,1),g=this.children[u.i];o(r.line,g);for(let k=r.marks.length-1;k>=-1;k--)u=g.childPos(u.off,1),g=g.children[u.i],o(k>=0?r.marks[k].node:r.text,g)}updateSelection(r=!1,o=!1){(r||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let u=this.view.root.activeElement,g=u==this.dom,k=!g&&!(this.view.state.facet(editable)||this.dom.tabIndex>-1)&&hasSelection(this.dom,this.view.observer.selectionRange)&&!(u&&this.dom.contains(u));if(!(g||o||k))return;let A=this.forceSelection;this.forceSelection=!1;let R=this.view.state.selection.main,q=this.moveToLine(this.domAtPos(R.anchor)),_=R.empty?q:this.moveToLine(this.domAtPos(R.head));if(browser.gecko&&R.empty&&!this.hasComposition&&betweenUneditable(q)){let te=document.createTextNode("");this.view.observer.ignore(()=>q.node.insertBefore(te,q.node.childNodes[q.offset]||null)),q=_=new DOMPos(te,0),A=!0}let ee=this.view.observer.selectionRange;(A||!ee.focusNode||(!isEquivalentPosition(q.node,q.offset,ee.anchorNode,ee.anchorOffset)||!isEquivalentPosition(_.node,_.offset,ee.focusNode,ee.focusOffset))&&!this.suppressWidgetCursorChange(ee,R))&&(this.view.observer.ignore(()=>{browser.android&&browser.chrome&&this.dom.contains(ee.focusNode)&&inUneditable(ee.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let te=getSelection(this.view.root);if(te)if(R.empty){if(browser.gecko){let ne=nextToUneditable(q.node,q.offset);if(ne&&ne!=3){let re=(ne==1?textNodeBefore:textNodeAfter)(q.node,q.offset);re&&(q=new DOMPos(re.node,re.offset))}}te.collapse(q.node,q.offset),R.bidiLevel!=null&&te.caretBidiLevel!==void 0&&(te.caretBidiLevel=R.bidiLevel)}else if(te.extend){te.collapse(q.node,q.offset);try{te.extend(_.node,_.offset)}catch{}}else{let ne=document.createRange();R.anchor>R.head&&([q,_]=[_,q]),ne.setEnd(_.node,_.offset),ne.setStart(q.node,q.offset),te.removeAllRanges(),te.addRange(ne)}k&&this.view.root.activeElement==this.dom&&(this.dom.blur(),u&&u.focus())}),this.view.observer.setSelectionRange(q,_)),this.impreciseAnchor=q.precise?null:new DOMPos(ee.anchorNode,ee.anchorOffset),this.impreciseHead=_.precise?null:new DOMPos(ee.focusNode,ee.focusOffset)}suppressWidgetCursorChange(r,o){return this.hasComposition&&o.empty&&isEquivalentPosition(r.focusNode,r.focusOffset,r.anchorNode,r.anchorOffset)&&this.posFromDOM(r.focusNode,r.focusOffset)==o.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:r}=this,o=r.state.selection.main,u=getSelection(r.root),{anchorNode:g,anchorOffset:k}=r.observer.selectionRange;if(!u||!o.empty||!o.assoc||!u.modify)return;let A=LineView.find(this,o.head);if(!A)return;let R=A.posAtStart;if(o.head==R||o.head==R+A.length)return;let q=this.coordsAt(o.head,-1),_=this.coordsAt(o.head,1);if(!q||!_||q.bottom>_.top)return;let ee=this.domAtPos(o.head+o.assoc);u.collapse(ee.node,ee.offset),u.modify("move",o.assoc<0?"forward":"backward","lineboundary"),r.observer.readSelectionRange();let te=r.observer.selectionRange;r.docView.posFromDOM(te.anchorNode,te.anchorOffset)!=o.from&&u.collapse(g,k)}moveToLine(r){let o=this.dom,u;if(r.node!=o)return r;for(let g=r.offset;!u&&g<o.childNodes.length;g++){let k=ContentView.get(o.childNodes[g]);k instanceof LineView&&(u=k.domAtPos(0))}for(let g=r.offset-1;!u&&g>=0;g--){let k=ContentView.get(o.childNodes[g]);k instanceof LineView&&(u=k.domAtPos(k.length))}return u?new DOMPos(u.node,u.offset,!0):r}nearest(r){for(let o=r;o;){let u=ContentView.get(o);if(u&&u.rootView==this)return u;o=o.parentNode}return null}posFromDOM(r,o){let u=this.nearest(r);if(!u)throw new RangeError("Trying to find position for a DOM position outside of the document");return u.localPosFromDOM(r,o)+u.posAtStart}domAtPos(r){let{i:o,off:u}=this.childCursor().findPos(r,-1);for(;o<this.children.length-1;){let g=this.children[o];if(u<g.length||g instanceof LineView)break;o++,u=0}return this.children[o].domAtPos(u)}coordsAt(r,o){let u=null,g=0;for(let k=this.length,A=this.children.length-1;A>=0;A--){let R=this.children[A],q=k-R.breakAfter,_=q-R.length;if(q<r)break;if(_<=r&&(_<r||R.covers(-1))&&(q>r||R.covers(1))&&(!u||R instanceof LineView&&!(u instanceof LineView&&o>=0)))u=R,g=_;else if(u&&_==r&&q==r&&R instanceof BlockWidgetView&&Math.abs(o)<2){if(R.deco.startSide<0)break;A&&(u=null)}k=_}return u?u.coordsAt(r-g,o):null}coordsForChar(r){let{i:o,off:u}=this.childPos(r,1),g=this.children[o];if(!(g instanceof LineView))return null;for(;g.children.length;){let{i:R,off:q}=g.childPos(u,1);for(;;R++){if(R==g.children.length)return null;if((g=g.children[R]).length)break}u=q}if(!(g instanceof TextView))return null;let k=findClusterBreak(g.text,u);if(k==u)return null;let A=textRange(g.dom,u,k).getClientRects();for(let R=0;R<A.length;R++){let q=A[R];if(R==A.length-1||q.top<q.bottom&&q.left<q.right)return q}return null}measureVisibleLineHeights(r){let o=[],{from:u,to:g}=r,k=this.view.contentDOM.clientWidth,A=k>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,R=-1,q=this.view.textDirection==Direction.LTR;for(let _=0,ee=0;ee<this.children.length;ee++){let te=this.children[ee],ne=_+te.length;if(ne>g)break;if(_>=u){let re=te.dom.getBoundingClientRect();if(o.push(re.height),A){let oe=te.dom.lastChild,le=oe?clientRectsFor(oe):[];if(le.length){let pe=le[le.length-1],de=q?pe.right-re.left:re.right-pe.left;de>R&&(R=de,this.minWidth=k,this.minWidthFrom=_,this.minWidthTo=ne)}}}_=ne+te.breakAfter}return o}textDirectionAt(r){let{i:o}=this.childPos(r,1);return getComputedStyle(this.children[o].dom).direction=="rtl"?Direction.RTL:Direction.LTR}measureTextSize(){for(let k of this.children)if(k instanceof LineView){let A=k.measureTextSize();if(A)return A}let r=document.createElement("div"),o,u,g;return r.className="cm-line",r.style.width="99999px",r.style.position="absolute",r.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(r);let k=clientRectsFor(r.firstChild)[0];o=r.getBoundingClientRect().height,u=k?k.width/27:7,g=k?k.height:o,r.remove()}),{lineHeight:o,charWidth:u,textHeight:g}}childCursor(r=this.length){let o=this.children.length;return o&&(r-=this.children[--o].length),new ChildCursor(this.children,r,o)}computeBlockGapDeco(){let r=[],o=this.view.viewState;for(let u=0,g=0;;g++){let k=g==o.viewports.length?null:o.viewports[g],A=k?k.from-1:this.length;if(A>u){let R=(o.lineBlockAt(A).bottom-o.lineBlockAt(u).top)/this.view.scaleY;r.push(Decoration.replace({widget:new BlockGapWidget(R),block:!0,inclusive:!0,isBlockGap:!0}).range(u,A))}if(!k)break;u=k.to+1}return Decoration.set(r)}updateDeco(){let r=1,o=this.view.state.facet(decorations).map(k=>(this.dynamicDecorationMap[r++]=typeof k=="function")?k(this.view):k),u=!1,g=this.view.state.facet(outerDecorations).map((k,A)=>{let R=typeof k=="function";return R&&(u=!0),R?k(this.view):k});for(g.length&&(this.dynamicDecorationMap[r++]=u,o.push(RangeSet.join(g))),this.decorations=[this.editContextFormatting,...o,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];r<this.decorations.length;)this.dynamicDecorationMap[r++]=!1;return this.decorations}scrollIntoView(r){if(r.isSnapshot){let _=this.view.viewState.lineBlockAt(r.range.head);this.view.scrollDOM.scrollTop=_.top-r.yMargin,this.view.scrollDOM.scrollLeft=r.xMargin;return}for(let _ of this.view.state.facet(scrollHandler))try{if(_(this.view,r.range,r))return!0}catch(ee){logException(this.view.state,ee,"scroll handler")}let{range:o}=r,u=this.coordsAt(o.head,o.empty?o.assoc:o.head>o.anchor?-1:1),g;if(!u)return;!o.empty&&(g=this.coordsAt(o.anchor,o.anchor>o.head?-1:1))&&(u={left:Math.min(u.left,g.left),top:Math.min(u.top,g.top),right:Math.max(u.right,g.right),bottom:Math.max(u.bottom,g.bottom)});let k=getScrollMargins(this.view),A={left:u.left-k.left,top:u.top-k.top,right:u.right+k.right,bottom:u.bottom+k.bottom},{offsetWidth:R,offsetHeight:q}=this.view.scrollDOM;scrollRectIntoView(this.view.scrollDOM,A,o.head<o.anchor?-1:1,r.x,r.y,Math.max(Math.min(r.xMargin,R),-R),Math.max(Math.min(r.yMargin,q),-q),this.view.textDirection==Direction.LTR)}}function betweenUneditable(h){return h.node.nodeType==1&&h.node.firstChild&&(h.offset==0||h.node.childNodes[h.offset-1].contentEditable=="false")&&(h.offset==h.node.childNodes.length||h.node.childNodes[h.offset].contentEditable=="false")}function findCompositionNode(h,r){let o=h.observer.selectionRange;if(!o.focusNode)return null;let u=textNodeBefore(o.focusNode,o.focusOffset),g=textNodeAfter(o.focusNode,o.focusOffset),k=u||g;if(g&&u&&g.node!=u.node){let R=ContentView.get(g.node);if(!R||R instanceof TextView&&R.text!=g.node.nodeValue)k=g;else if(h.docView.lastCompositionAfterCursor){let q=ContentView.get(u.node);!q||q instanceof TextView&&q.text!=u.node.nodeValue||(k=g)}}if(h.docView.lastCompositionAfterCursor=k!=u,!k)return null;let A=r-k.offset;return{from:A,to:A+k.node.nodeValue.length,node:k.node}}function findCompositionRange(h,r,o){let u=findCompositionNode(h,o);if(!u)return null;let{node:g,from:k,to:A}=u,R=g.nodeValue;if(/[\n\r]/.test(R)||h.state.doc.sliceString(u.from,u.to)!=R)return null;let q=r.invertedDesc,_=new ChangedRange(q.mapPos(k),q.mapPos(A),k,A),ee=[];for(let te=g.parentNode;;te=te.parentNode){let ne=ContentView.get(te);if(ne instanceof MarkView)ee.push({node:te,deco:ne.mark});else{if(ne instanceof LineView||te.nodeName=="DIV"&&te.parentNode==h.contentDOM)return{range:_,text:g,marks:ee,line:te};if(te!=h.contentDOM)ee.push({node:te,deco:new MarkDecoration({inclusive:!0,attributes:getAttrs$1(te),tagName:te.tagName.toLowerCase()})});else return null}}}function nextToUneditable(h,r){return h.nodeType!=1?0:(r&&h.childNodes[r-1].contentEditable=="false"?1:0)|(r<h.childNodes.length&&h.childNodes[r].contentEditable=="false"?2:0)}let DecorationComparator$1=class{constructor(){this.changes=[]}compareRange(r,o){addRange(r,o,this.changes)}comparePoint(r,o){addRange(r,o,this.changes)}boundChange(r){addRange(r,r,this.changes)}};function findChangedDeco(h,r,o){let u=new DecorationComparator$1;return RangeSet.compare(h,r,o,u),u.changes}function inUneditable(h,r){for(let o=h;o&&o!=r;o=o.assignedSlot||o.parentNode)if(o.nodeType==1&&o.contentEditable=="false")return!0;return!1}function touchesComposition(h,r){let o=!1;return r&&h.iterChangedRanges((u,g)=>{u<r.to&&g>r.from&&(o=!0)}),o}function groupAt(h,r,o=1){let u=h.charCategorizer(r),g=h.doc.lineAt(r),k=r-g.from;if(g.length==0)return EditorSelection.cursor(r);k==0?o=1:k==g.length&&(o=-1);let A=k,R=k;o<0?A=findClusterBreak(g.text,k,!1):R=findClusterBreak(g.text,k);let q=u(g.text.slice(A,R));for(;A>0;){let _=findClusterBreak(g.text,A,!1);if(u(g.text.slice(_,A))!=q)break;A=_}for(;R<g.length;){let _=findClusterBreak(g.text,R);if(u(g.text.slice(R,_))!=q)break;R=_}return EditorSelection.range(A+g.from,R+g.from)}function getdx(h,r){return r.left>h?r.left-h:Math.max(0,h-r.right)}function getdy(h,r){return r.top>h?r.top-h:Math.max(0,h-r.bottom)}function yOverlap(h,r){return h.top<r.bottom-1&&h.bottom>r.top+1}function upTop(h,r){return r<h.top?{top:r,left:h.left,right:h.right,bottom:h.bottom}:h}function upBot(h,r){return r>h.bottom?{top:h.top,left:h.left,right:h.right,bottom:r}:h}function domPosAtCoords(h,r,o){let u,g,k,A,R=!1,q,_,ee,te;for(let oe=h.firstChild;oe;oe=oe.nextSibling){let le=clientRectsFor(oe);for(let pe=0;pe<le.length;pe++){let de=le[pe];g&&yOverlap(g,de)&&(de=upTop(upBot(de,g.bottom),g.top));let he=getdx(r,de),ae=getdy(o,de);if(he==0&&ae==0)return oe.nodeType==3?domPosInText(oe,r,o):domPosAtCoords(oe,r,o);(!u||A>ae||A==ae&&k>he)&&(u=oe,g=de,k=he,A=ae,R=he?r<de.left?pe>0:pe<le.length-1:!0),he==0?o>de.bottom&&(!ee||ee.bottom<de.bottom)?(q=oe,ee=de):o<de.top&&(!te||te.top>de.top)&&(_=oe,te=de):ee&&yOverlap(ee,de)?ee=upBot(ee,de.bottom):te&&yOverlap(te,de)&&(te=upTop(te,de.top))}}if(ee&&ee.bottom>=o?(u=q,g=ee):te&&te.top<=o&&(u=_,g=te),!u)return{node:h,offset:0};let ne=Math.max(g.left,Math.min(g.right,r));if(u.nodeType==3)return domPosInText(u,ne,o);if(R&&u.contentEditable!="false")return domPosAtCoords(u,ne,o);let re=Array.prototype.indexOf.call(h.childNodes,u)+(r>=(g.left+g.right)/2?1:0);return{node:h,offset:re}}function domPosInText(h,r,o){let u=h.nodeValue.length,g=-1,k=1e9,A=0;for(let R=0;R<u;R++){let q=textRange(h,R,R+1).getClientRects();for(let _=0;_<q.length;_++){let ee=q[_];if(ee.top==ee.bottom)continue;A||(A=r-ee.left);let te=(ee.top>o?ee.top-o:o-ee.bottom)-1;if(ee.left-1<=r&&ee.right+1>=r&&te<k){let ne=r>=(ee.left+ee.right)/2,re=ne;if((browser.chrome||browser.gecko)&&textRange(h,R).getBoundingClientRect().left==ee.right&&(re=!ne),te<=0)return{node:h,offset:R+(re?1:0)};g=R+(re?1:0),k=te}}}return{node:h,offset:g>-1?g:A>0?h.nodeValue.length:0}}function posAtCoords(h,r,o,u=-1){var g,k;let A=h.contentDOM.getBoundingClientRect(),R=A.top+h.viewState.paddingTop,q,{docHeight:_}=h.viewState,{x:ee,y:te}=r,ne=te-R;if(ne<0)return 0;if(ne>_)return h.state.doc.length;for(let se=h.viewState.heightOracle.textHeight/2,ce=!1;q=h.elementAtHeight(ne),q.type!=BlockType.Text;)for(;ne=u>0?q.bottom+se:q.top-se,!(ne>=0&&ne<=_);){if(ce)return o?null:0;ce=!0,u=-u}te=R+ne;let re=q.from;if(re<h.viewport.from)return h.viewport.from==0?0:o?null:posAtCoordsImprecise(h,A,q,ee,te);if(re>h.viewport.to)return h.viewport.to==h.state.doc.length?h.state.doc.length:o?null:posAtCoordsImprecise(h,A,q,ee,te);let oe=h.dom.ownerDocument,le=h.root.elementFromPoint?h.root:oe,pe=le.elementFromPoint(ee,te);pe&&!h.contentDOM.contains(pe)&&(pe=null),pe||(ee=Math.max(A.left+1,Math.min(A.right-1,ee)),pe=le.elementFromPoint(ee,te),pe&&!h.contentDOM.contains(pe)&&(pe=null));let de,he=-1;if(pe&&((g=h.docView.nearest(pe))===null||g===void 0?void 0:g.isEditable)!=!1){if(oe.caretPositionFromPoint){let se=oe.caretPositionFromPoint(ee,te);se&&({offsetNode:de,offset:he}=se)}else if(oe.caretRangeFromPoint){let se=oe.caretRangeFromPoint(ee,te);se&&({startContainer:de,startOffset:he}=se)}de&&(!h.contentDOM.contains(de)||browser.safari&&isSuspiciousSafariCaretResult(de,he,ee)||browser.chrome&&isSuspiciousChromeCaretResult(de,he,ee))&&(de=void 0),de&&(he=Math.min(maxOffset(de),he))}if(!de||!h.docView.dom.contains(de)){let se=LineView.find(h.docView,re);if(!se)return ne>q.top+q.height/2?q.to:q.from;({node:de,offset:he}=domPosAtCoords(se.dom,ee,te))}let ae=h.docView.nearest(de);if(!ae)return null;if(ae.isWidget&&((k=ae.dom)===null||k===void 0?void 0:k.nodeType)==1){let se=ae.dom.getBoundingClientRect();return r.y<se.top||r.y<=se.bottom&&r.x<=(se.left+se.right)/2?ae.posAtStart:ae.posAtEnd}else return ae.localPosFromDOM(de,he)+ae.posAtStart}function posAtCoordsImprecise(h,r,o,u,g){let k=Math.round((u-r.left)*h.defaultCharacterWidth);if(h.lineWrapping&&o.height>h.defaultLineHeight*1.5){let R=h.viewState.heightOracle.textHeight,q=Math.floor((g-o.top-(h.defaultLineHeight-R)*.5)/R);k+=q*h.viewState.heightOracle.lineLength}let A=h.state.sliceDoc(o.from,o.to);return o.from+findColumn(A,k,h.state.tabSize)}function isEndOfLineBefore(h,r,o){let u,g=h;if(h.nodeType!=3||r!=(u=h.nodeValue.length))return!1;for(;;){let k=g.nextSibling;if(k){if(k.nodeName=="BR")break;return!1}else{let A=g.parentNode;if(!A||A.nodeName=="DIV")break;g=A}}return textRange(h,u-1,u).getBoundingClientRect().right>o}function isSuspiciousSafariCaretResult(h,r,o){return isEndOfLineBefore(h,r,o)}function isSuspiciousChromeCaretResult(h,r,o){if(r!=0)return isEndOfLineBefore(h,r,o);for(let g=h;;){let k=g.parentNode;if(!k||k.nodeType!=1||k.firstChild!=g)return!1;if(k.classList.contains("cm-line"))break;g=k}let u=h.nodeType==1?h.getBoundingClientRect():textRange(h,0,Math.max(h.nodeValue.length,1)).getBoundingClientRect();return o-u.left>5}function blockAt(h,r,o){let u=h.lineBlockAt(r);if(Array.isArray(u.type)){let g;for(let k of u.type){if(k.from>r)break;if(!(k.to<r)){if(k.from<r&&k.to>r)return k;(!g||k.type==BlockType.Text&&(g.type!=k.type||(o<0?k.from<r:k.to>r)))&&(g=k)}}return g||u}return u}function moveToLineBoundary(h,r,o,u){let g=blockAt(h,r.head,r.assoc||-1),k=!u||g.type!=BlockType.Text||!(h.lineWrapping||g.widgetLineBreaks)?null:h.coordsAtPos(r.assoc<0&&r.head>g.from?r.head-1:r.head);if(k){let A=h.dom.getBoundingClientRect(),R=h.textDirectionAt(g.from),q=h.posAtCoords({x:o==(R==Direction.LTR)?A.right-1:A.left+1,y:(k.top+k.bottom)/2});if(q!=null)return EditorSelection.cursor(q,o?-1:1)}return EditorSelection.cursor(o?g.to:g.from,o?-1:1)}function moveByChar(h,r,o,u){let g=h.state.doc.lineAt(r.head),k=h.bidiSpans(g),A=h.textDirectionAt(g.from);for(let R=r,q=null;;){let _=moveVisually(g,k,A,R,o),ee=movedOver;if(!_){if(g.number==(o?h.state.doc.lines:1))return R;ee=`
`,g=h.state.doc.line(g.number+(o?1:-1)),k=h.bidiSpans(g),_=h.visualLineSide(g,!o)}if(q){if(!q(ee))return R}else{if(!u)return _;q=u(ee)}R=_}}function byGroup(h,r,o){let u=h.state.charCategorizer(r),g=u(o);return k=>{let A=u(k);return g==CharCategory.Space&&(g=A),g==A}}function moveVertically(h,r,o,u){let g=r.head,k=o?1:-1;if(g==(o?h.state.doc.length:0))return EditorSelection.cursor(g,r.assoc);let A=r.goalColumn,R,q=h.contentDOM.getBoundingClientRect(),_=h.coordsAtPos(g,r.assoc||-1),ee=h.documentTop;if(_)A==null&&(A=_.left-q.left),R=k<0?_.top:_.bottom;else{let re=h.viewState.lineBlockAt(g);A==null&&(A=Math.min(q.right-q.left,h.defaultCharacterWidth*(g-re.from))),R=(k<0?re.top:re.bottom)+ee}let te=q.left+A,ne=u??h.viewState.heightOracle.textHeight>>1;for(let re=0;;re+=10){let oe=R+(ne+re)*k,le=posAtCoords(h,{x:te,y:oe},!1,k);if(oe<q.top||oe>q.bottom||(k<0?le<g:le>g)){let pe=h.docView.coordsForChar(le),de=!pe||oe<pe.top?-1:1;return EditorSelection.cursor(le,de,void 0,A)}}}function skipAtomicRanges(h,r,o){for(;;){let u=0;for(let g of h)g.between(r-1,r+1,(k,A,R)=>{if(r>k&&r<A){let q=u||o||(r-k<A-r?-1:1);r=q<0?k:A,u=q}});if(!u)return r}}function skipAtomsForSelection(h,r){let o=null;for(let u=0;u<r.ranges.length;u++){let g=r.ranges[u],k=null;if(g.empty){let A=skipAtomicRanges(h,g.from,0);A!=g.from&&(k=EditorSelection.cursor(A,-1))}else{let A=skipAtomicRanges(h,g.from,-1),R=skipAtomicRanges(h,g.to,1);(A!=g.from||R!=g.to)&&(k=EditorSelection.range(g.from==g.anchor?A:R,g.from==g.head?A:R))}k&&(o||(o=r.ranges.slice()),o[u]=k)}return o?EditorSelection.create(o,r.mainIndex):r}function skipAtoms(h,r,o){let u=skipAtomicRanges(h.state.facet(atomicRanges).map(g=>g(h)),o.from,r.head>o.from?-1:1);return u==o.from?o:EditorSelection.cursor(u,u<o.from?1:-1)}const LineBreakPlaceholder="";class DOMReader{constructor(r,o){this.points=r,this.text="",this.lineSeparator=o.facet(EditorState.lineSeparator)}append(r){this.text+=r}lineBreak(){this.text+=LineBreakPlaceholder}readRange(r,o){if(!r)return this;let u=r.parentNode;for(let g=r;;){this.findPointBefore(u,g);let k=this.text.length;this.readNode(g);let A=g.nextSibling;if(A==o)break;let R=ContentView.get(g),q=ContentView.get(A);(R&&q?R.breakAfter:(R?R.breakAfter:isBlockElement(g))||isBlockElement(A)&&(g.nodeName!="BR"||g.cmIgnore)&&this.text.length>k)&&!isEmptyToEnd(A,o)&&this.lineBreak(),g=A}return this.findPointBefore(u,o),this}readTextNode(r){let o=r.nodeValue;for(let u of this.points)u.node==r&&(u.pos=this.text.length+Math.min(u.offset,o.length));for(let u=0,g=this.lineSeparator?null:/\r\n?|\n/g;;){let k=-1,A=1,R;if(this.lineSeparator?(k=o.indexOf(this.lineSeparator,u),A=this.lineSeparator.length):(R=g.exec(o))&&(k=R.index,A=R[0].length),this.append(o.slice(u,k<0?o.length:k)),k<0)break;if(this.lineBreak(),A>1)for(let q of this.points)q.node==r&&q.pos>this.text.length&&(q.pos-=A-1);u=k+A}}readNode(r){if(r.cmIgnore)return;let o=ContentView.get(r),u=o&&o.overrideDOMText;if(u!=null){this.findPointInside(r,u.length);for(let g=u.iter();!g.next().done;)g.lineBreak?this.lineBreak():this.append(g.value)}else r.nodeType==3?this.readTextNode(r):r.nodeName=="BR"?r.nextSibling&&this.lineBreak():r.nodeType==1&&this.readRange(r.firstChild,null)}findPointBefore(r,o){for(let u of this.points)u.node==r&&r.childNodes[u.offset]==o&&(u.pos=this.text.length)}findPointInside(r,o){for(let u of this.points)(r.nodeType==3?u.node==r:r.contains(u.node))&&(u.pos=this.text.length+(isAtEnd(r,u.node,u.offset)?o:0))}}function isAtEnd(h,r,o){for(;;){if(!r||o<maxOffset(r))return!1;if(r==h)return!0;o=domIndex(r)+1,r=r.parentNode}}function isEmptyToEnd(h,r){let o;for(;!(h==r||!h);h=h.nextSibling){let u=ContentView.get(h);if(!(u!=null&&u.isWidget||h.cmIgnore))return!1;u&&(o||(o=[])).push(u)}if(o)for(let u of o){let g=u.overrideDOMText;if(g!=null&&g.length)return!1}return!0}class DOMPoint{constructor(r,o){this.node=r,this.offset=o,this.pos=-1}}class DOMChange{constructor(r,o,u,g){this.typeOver=g,this.bounds=null,this.text="",this.domChanged=o>-1;let{impreciseHead:k,impreciseAnchor:A}=r.docView;if(r.state.readOnly&&o>-1)this.newSel=null;else if(o>-1&&(this.bounds=r.docView.domBoundsAround(o,u,0))){let R=k||A?[]:selectionPoints(r),q=new DOMReader(R,r.state);q.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=q.text,this.newSel=selectionFromPoints(R,this.bounds.from)}else{let R=r.observer.selectionRange,q=k&&k.node==R.focusNode&&k.offset==R.focusOffset||!contains(r.contentDOM,R.focusNode)?r.state.selection.main.head:r.docView.posFromDOM(R.focusNode,R.focusOffset),_=A&&A.node==R.anchorNode&&A.offset==R.anchorOffset||!contains(r.contentDOM,R.anchorNode)?r.state.selection.main.anchor:r.docView.posFromDOM(R.anchorNode,R.anchorOffset),ee=r.viewport;if((browser.ios||browser.chrome)&&r.state.selection.main.empty&&q!=_&&(ee.from>0||ee.to<r.state.doc.length)){let te=Math.min(q,_),ne=Math.max(q,_),re=ee.from-te,oe=ee.to-ne;(re==0||re==1||te==0)&&(oe==0||oe==-1||ne==r.state.doc.length)&&(q=0,_=r.state.doc.length)}this.newSel=EditorSelection.single(_,q)}}}function applyDOMChange(h,r){let o,{newSel:u}=r,g=h.state.selection.main,k=h.inputState.lastKeyTime>Date.now()-100?h.inputState.lastKeyCode:-1;if(r.bounds){let{from:A,to:R}=r.bounds,q=g.from,_=null;(k===8||browser.android&&r.text.length<R-A)&&(q=g.to,_="end");let ee=findDiff(h.state.doc.sliceString(A,R,LineBreakPlaceholder),r.text,q-A,_);ee&&(browser.chrome&&k==13&&ee.toB==ee.from+2&&r.text.slice(ee.from,ee.toB)==LineBreakPlaceholder+LineBreakPlaceholder&&ee.toB--,o={from:A+ee.from,to:A+ee.toA,insert:Text.of(r.text.slice(ee.from,ee.toB).split(LineBreakPlaceholder))})}else u&&(!h.hasFocus&&h.state.facet(editable)||u.main.eq(g))&&(u=null);if(!o&&!u)return!1;if(!o&&r.typeOver&&!g.empty&&u&&u.main.empty?o={from:g.from,to:g.to,insert:h.state.doc.slice(g.from,g.to)}:(browser.mac||browser.android)&&o&&o.from==o.to&&o.from==g.head-1&&/^\. ?$/.test(o.insert.toString())&&h.contentDOM.getAttribute("autocorrect")=="off"?(u&&o.insert.length==2&&(u=EditorSelection.single(u.main.anchor-1,u.main.head-1)),o={from:o.from,to:o.to,insert:Text.of([o.insert.toString().replace("."," ")])}):o&&o.from>=g.from&&o.to<=g.to&&(o.from!=g.from||o.to!=g.to)&&g.to-g.from-(o.to-o.from)<=4?o={from:g.from,to:g.to,insert:h.state.doc.slice(g.from,o.from).append(o.insert).append(h.state.doc.slice(o.to,g.to))}:browser.chrome&&o&&o.from==o.to&&o.from==g.head&&o.insert.toString()==`
 `&&h.lineWrapping&&(u&&(u=EditorSelection.single(u.main.anchor-1,u.main.head-1)),o={from:g.from,to:g.to,insert:Text.of([" "])}),o)return applyDOMChangeInner(h,o,u,k);if(u&&!u.main.eq(g)){let A=!1,R="select";return h.inputState.lastSelectionTime>Date.now()-50&&(h.inputState.lastSelectionOrigin=="select"&&(A=!0),R=h.inputState.lastSelectionOrigin,R=="select.pointer"&&(u=skipAtomsForSelection(h.state.facet(atomicRanges).map(q=>q(h)),u))),h.dispatch({selection:u,scrollIntoView:A,userEvent:R}),!0}else return!1}function applyDOMChangeInner(h,r,o,u=-1){if(browser.ios&&h.inputState.flushIOSKey(r))return!0;let g=h.state.selection.main;if(browser.android&&(r.to==g.to&&(r.from==g.from||r.from==g.from-1&&h.state.sliceDoc(r.from,g.from)==" ")&&r.insert.length==1&&r.insert.lines==2&&dispatchKey(h.contentDOM,"Enter",13)||(r.from==g.from-1&&r.to==g.to&&r.insert.length==0||u==8&&r.insert.length<r.to-r.from&&r.to>g.head)&&dispatchKey(h.contentDOM,"Backspace",8)||r.from==g.from&&r.to==g.to+1&&r.insert.length==0&&dispatchKey(h.contentDOM,"Delete",46)))return!0;let k=r.insert.toString();h.inputState.composing>=0&&h.inputState.composing++;let A,R=()=>A||(A=applyDefaultInsert(h,r,o));return h.state.facet(inputHandler$1).some(q=>q(h,r.from,r.to,k,R))||h.dispatch(R()),!0}function applyDefaultInsert(h,r,o){let u,g=h.state,k=g.selection.main,A=-1;if(r.from==r.to&&r.from<k.from||r.from>k.to){let q=r.from<k.from?-1:1,_=q<0?k.from:k.to,ee=skipAtomicRanges(g.facet(atomicRanges).map(te=>te(h)),_,q);r.from==ee&&(A=ee)}if(A>-1)u={changes:r,selection:EditorSelection.cursor(r.from+r.insert.length,-1)};else if(r.from>=k.from&&r.to<=k.to&&r.to-r.from>=(k.to-k.from)/3&&(!o||o.main.empty&&o.main.from==r.from+r.insert.length)&&h.inputState.composing<0){let q=k.from<r.from?g.sliceDoc(k.from,r.from):"",_=k.to>r.to?g.sliceDoc(r.to,k.to):"";u=g.replaceSelection(h.state.toText(q+r.insert.sliceString(0,void 0,h.state.lineBreak)+_))}else{let q=g.changes(r),_=o&&o.main.to<=q.newLength?o.main:void 0;if(g.selection.ranges.length>1&&h.inputState.composing>=0&&r.to<=k.to&&r.to>=k.to-10){let ee=h.state.sliceDoc(r.from,r.to),te,ne=o&&findCompositionNode(h,o.main.head);if(ne){let le=r.insert.length-(r.to-r.from);te={from:ne.from,to:ne.to-le}}else te=h.state.doc.lineAt(k.head);let re=k.to-r.to,oe=k.to-k.from;u=g.changeByRange(le=>{if(le.from==k.from&&le.to==k.to)return{changes:q,range:_||le.map(q)};let pe=le.to-re,de=pe-ee.length;if(le.to-le.from!=oe||h.state.sliceDoc(de,pe)!=ee||le.to>=te.from&&le.from<=te.to)return{range:le};let he=g.changes({from:de,to:pe,insert:r.insert}),ae=le.to-k.to;return{changes:he,range:_?EditorSelection.range(Math.max(0,_.anchor+ae),Math.max(0,_.head+ae)):le.map(he)}})}else u={changes:q,selection:_&&g.selection.replaceRange(_)}}let R="input.type";return(h.composing||h.inputState.compositionPendingChange&&h.inputState.compositionEndedAt>Date.now()-50)&&(h.inputState.compositionPendingChange=!1,R+=".compose",h.inputState.compositionFirstChange&&(R+=".start",h.inputState.compositionFirstChange=!1)),g.update(u,{userEvent:R,scrollIntoView:!0})}function findDiff(h,r,o,u){let g=Math.min(h.length,r.length),k=0;for(;k<g&&h.charCodeAt(k)==r.charCodeAt(k);)k++;if(k==g&&h.length==r.length)return null;let A=h.length,R=r.length;for(;A>0&&R>0&&h.charCodeAt(A-1)==r.charCodeAt(R-1);)A--,R--;if(u=="end"){let q=Math.max(0,k-Math.min(A,R));o-=A+q-k}if(A<k&&h.length<r.length){let q=o<=k&&o>=A?k-o:0;k-=q,R=k+(R-A),A=k}else if(R<k){let q=o<=k&&o>=R?k-o:0;k-=q,A=k+(A-R),R=k}return{from:k,toA:A,toB:R}}function selectionPoints(h){let r=[];if(h.root.activeElement!=h.contentDOM)return r;let{anchorNode:o,anchorOffset:u,focusNode:g,focusOffset:k}=h.observer.selectionRange;return o&&(r.push(new DOMPoint(o,u)),(g!=o||k!=u)&&r.push(new DOMPoint(g,k))),r}function selectionFromPoints(h,r){if(h.length==0)return null;let o=h[0].pos,u=h.length==2?h[1].pos:o;return o>-1&&u>-1?EditorSelection.single(o+r,u+r):null}class InputState{setSelectionOrigin(r){this.lastSelectionOrigin=r,this.lastSelectionTime=Date.now()}constructor(r){this.view=r,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=r.hasFocus,browser.safari&&r.contentDOM.addEventListener("input",()=>null),browser.gecko&&firefoxCopyCutHack(r.contentDOM.ownerDocument)}handleEvent(r){!eventBelongsToEditor(this.view,r)||this.ignoreDuringComposition(r)||r.type=="keydown"&&this.keydown(r)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(r.type,r)):this.runHandlers(r.type,r))}runHandlers(r,o){let u=this.handlers[r];if(u){for(let g of u.observers)g(this.view,o);for(let g of u.handlers){if(o.defaultPrevented)break;if(g(this.view,o)){o.preventDefault();break}}}}ensureHandlers(r){let o=computeHandlers(r),u=this.handlers,g=this.view.contentDOM;for(let k in o)if(k!="scroll"){let A=!o[k].handlers.length,R=u[k];R&&A!=!R.handlers.length&&(g.removeEventListener(k,this.handleEvent),R=null),R||g.addEventListener(k,this.handleEvent,{passive:A})}for(let k in u)k!="scroll"&&!o[k]&&g.removeEventListener(k,this.handleEvent);this.handlers=o}keydown(r){if(this.lastKeyCode=r.keyCode,this.lastKeyTime=Date.now(),r.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&r.keyCode!=27&&modifierCodes.indexOf(r.keyCode)<0&&(this.tabFocusMode=-1),browser.android&&browser.chrome&&!r.synthetic&&(r.keyCode==13||r.keyCode==8))return this.view.observer.delayAndroidKey(r.key,r.keyCode),!0;let o;return browser.ios&&!r.synthetic&&!r.altKey&&!r.metaKey&&((o=PendingKeys.find(u=>u.keyCode==r.keyCode))&&!r.ctrlKey||EmacsyPendingKeys.indexOf(r.key)>-1&&r.ctrlKey&&!r.shiftKey)?(this.pendingIOSKey=o||r,setTimeout(()=>this.flushIOSKey(),250),!0):(r.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(r){let o=this.pendingIOSKey;return!o||o.key=="Enter"&&r&&r.from<r.to&&/^\S+$/.test(r.insert.toString())?!1:(this.pendingIOSKey=void 0,dispatchKey(this.view.contentDOM,o.key,o.keyCode,o instanceof KeyboardEvent?o:void 0))}ignoreDuringComposition(r){return!/^key/.test(r.type)||r.synthetic?!1:this.composing>0?!0:browser.safari&&!browser.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1}startMouseSelection(r){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=r}update(r){this.view.observer.update(r),this.mouseSelection&&this.mouseSelection.update(r),this.draggedContent&&r.docChanged&&(this.draggedContent=this.draggedContent.map(r.changes)),r.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function bindHandler(h,r){return(o,u)=>{try{return r.call(h,u,o)}catch(g){logException(o.state,g)}}}function computeHandlers(h){let r=Object.create(null);function o(u){return r[u]||(r[u]={observers:[],handlers:[]})}for(let u of h){let g=u.spec,k=g&&g.plugin.domEventHandlers,A=g&&g.plugin.domEventObservers;if(k)for(let R in k){let q=k[R];q&&o(R).handlers.push(bindHandler(u.value,q))}if(A)for(let R in A){let q=A[R];q&&o(R).observers.push(bindHandler(u.value,q))}}for(let u in handlers)o(u).handlers.push(handlers[u]);for(let u in observers)o(u).observers.push(observers[u]);return r}const PendingKeys=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],EmacsyPendingKeys="dthko",modifierCodes=[16,17,18,20,91,92,224,225],dragScrollMargin=6;function dragScrollSpeed(h){return Math.max(0,h)*.7+8}function dist(h,r){return Math.max(Math.abs(h.clientX-r.clientX),Math.abs(h.clientY-r.clientY))}class MouseSelection{constructor(r,o,u,g){this.view=r,this.startEvent=o,this.style=u,this.mustSelect=g,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=o,this.scrollParents=scrollableParents(r.contentDOM),this.atoms=r.state.facet(atomicRanges).map(A=>A(r));let k=r.contentDOM.ownerDocument;k.addEventListener("mousemove",this.move=this.move.bind(this)),k.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=o.shiftKey,this.multiple=r.state.facet(EditorState.allowMultipleSelections)&&addsSelectionRange(r,o),this.dragging=isInPrimarySelection(r,o)&&getClickType(o)==1?null:!1}start(r){this.dragging===!1&&this.select(r)}move(r){if(r.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&dist(this.startEvent,r)<10)return;this.select(this.lastEvent=r);let o=0,u=0,g=0,k=0,A=this.view.win.innerWidth,R=this.view.win.innerHeight;this.scrollParents.x&&({left:g,right:A}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:k,bottom:R}=this.scrollParents.y.getBoundingClientRect());let q=getScrollMargins(this.view);r.clientX-q.left<=g+dragScrollMargin?o=-dragScrollSpeed(g-r.clientX):r.clientX+q.right>=A-dragScrollMargin&&(o=dragScrollSpeed(r.clientX-A)),r.clientY-q.top<=k+dragScrollMargin?u=-dragScrollSpeed(k-r.clientY):r.clientY+q.bottom>=R-dragScrollMargin&&(u=dragScrollSpeed(r.clientY-R)),this.setScrollSpeed(o,u)}up(r){this.dragging==null&&this.select(this.lastEvent),this.dragging||r.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let r=this.view.contentDOM.ownerDocument;r.removeEventListener("mousemove",this.move),r.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(r,o){this.scrollSpeed={x:r,y:o},r||o?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:r,y:o}=this.scrollSpeed;r&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=r,r=0),o&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=o,o=0),(r||o)&&this.view.win.scrollBy(r,o),this.dragging===!1&&this.select(this.lastEvent)}select(r){let{view:o}=this,u=skipAtomsForSelection(this.atoms,this.style.get(r,this.extend,this.multiple));(this.mustSelect||!u.eq(o.state.selection,this.dragging===!1))&&this.view.dispatch({selection:u,userEvent:"select.pointer"}),this.mustSelect=!1}update(r){r.transactions.some(o=>o.isUserEvent("input.type"))?this.destroy():this.style.update(r)&&setTimeout(()=>this.select(this.lastEvent),20)}}function addsSelectionRange(h,r){let o=h.state.facet(clickAddsSelectionRange);return o.length?o[0](r):browser.mac?r.metaKey:r.ctrlKey}function dragMovesSelection(h,r){let o=h.state.facet(dragMovesSelection$1);return o.length?o[0](r):browser.mac?!r.altKey:!r.ctrlKey}function isInPrimarySelection(h,r){let{main:o}=h.state.selection;if(o.empty)return!1;let u=getSelection(h.root);if(!u||u.rangeCount==0)return!0;let g=u.getRangeAt(0).getClientRects();for(let k=0;k<g.length;k++){let A=g[k];if(A.left<=r.clientX&&A.right>=r.clientX&&A.top<=r.clientY&&A.bottom>=r.clientY)return!0}return!1}function eventBelongsToEditor(h,r){if(!r.bubbles)return!0;if(r.defaultPrevented)return!1;for(let o=r.target,u;o!=h.contentDOM;o=o.parentNode)if(!o||o.nodeType==11||(u=ContentView.get(o))&&u.ignoreEvent(r))return!1;return!0}const handlers=Object.create(null),observers=Object.create(null),brokenClipboardAPI=browser.ie&&browser.ie_version<15||browser.ios&&browser.webkit_version<604;function capturePaste(h){let r=h.dom.parentNode;if(!r)return;let o=r.appendChild(document.createElement("textarea"));o.style.cssText="position: fixed; left: -10000px; top: 10px",o.focus(),setTimeout(()=>{h.focus(),o.remove(),doPaste(h,o.value)},50)}function textFilter(h,r,o){for(let u of h.facet(r))o=u(o,h);return o}function doPaste(h,r){r=textFilter(h.state,clipboardInputFilter,r);let{state:o}=h,u,g=1,k=o.toText(r),A=k.lines==o.selection.ranges.length;if(lastLinewiseCopy!=null&&o.selection.ranges.every(q=>q.empty)&&lastLinewiseCopy==k.toString()){let q=-1;u=o.changeByRange(_=>{let ee=o.doc.lineAt(_.from);if(ee.from==q)return{range:_};q=ee.from;let te=o.toText((A?k.line(g++).text:r)+o.lineBreak);return{changes:{from:ee.from,insert:te},range:EditorSelection.cursor(_.from+te.length)}})}else A?u=o.changeByRange(q=>{let _=k.line(g++);return{changes:{from:q.from,to:q.to,insert:_.text},range:EditorSelection.cursor(q.from+_.length)}}):u=o.replaceSelection(k);h.dispatch(u,{userEvent:"input.paste",scrollIntoView:!0})}observers.scroll=h=>{h.inputState.lastScrollTop=h.scrollDOM.scrollTop,h.inputState.lastScrollLeft=h.scrollDOM.scrollLeft};handlers.keydown=(h,r)=>(h.inputState.setSelectionOrigin("select"),r.keyCode==27&&h.inputState.tabFocusMode!=0&&(h.inputState.tabFocusMode=Date.now()+2e3),!1);observers.touchstart=(h,r)=>{h.inputState.lastTouchTime=Date.now(),h.inputState.setSelectionOrigin("select.pointer")};observers.touchmove=h=>{h.inputState.setSelectionOrigin("select.pointer")};handlers.mousedown=(h,r)=>{if(h.observer.flush(),h.inputState.lastTouchTime>Date.now()-2e3)return!1;let o=null;for(let u of h.state.facet(mouseSelectionStyle))if(o=u(h,r),o)break;if(!o&&r.button==0&&(o=basicMouseSelection(h,r)),o){let u=!h.hasFocus;h.inputState.startMouseSelection(new MouseSelection(h,r,o,u)),u&&h.observer.ignore(()=>{focusPreventScroll(h.contentDOM);let k=h.root.activeElement;k&&!k.contains(h.contentDOM)&&k.blur()});let g=h.inputState.mouseSelection;if(g)return g.start(r),g.dragging===!1}else h.inputState.setSelectionOrigin("select.pointer");return!1};function rangeForClick(h,r,o,u){if(u==1)return EditorSelection.cursor(r,o);if(u==2)return groupAt(h.state,r,o);{let g=LineView.find(h.docView,r),k=h.state.doc.lineAt(g?g.posAtEnd:r),A=g?g.posAtStart:k.from,R=g?g.posAtEnd:k.to;return R<h.state.doc.length&&R==k.to&&R++,EditorSelection.range(A,R)}}let inside=(h,r,o)=>r>=o.top&&r<=o.bottom&&h>=o.left&&h<=o.right;function findPositionSide(h,r,o,u){let g=LineView.find(h.docView,r);if(!g)return 1;let k=r-g.posAtStart;if(k==0)return 1;if(k==g.length)return-1;let A=g.coordsAt(k,-1);if(A&&inside(o,u,A))return-1;let R=g.coordsAt(k,1);return R&&inside(o,u,R)?1:A&&A.bottom>=u?-1:1}function queryPos(h,r){let o=h.posAtCoords({x:r.clientX,y:r.clientY},!1);return{pos:o,bias:findPositionSide(h,o,r.clientX,r.clientY)}}const BadMouseDetail=browser.ie&&browser.ie_version<=11;let lastMouseDown=null,lastMouseDownCount=0,lastMouseDownTime=0;function getClickType(h){if(!BadMouseDetail)return h.detail;let r=lastMouseDown,o=lastMouseDownTime;return lastMouseDown=h,lastMouseDownTime=Date.now(),lastMouseDownCount=!r||o>Date.now()-400&&Math.abs(r.clientX-h.clientX)<2&&Math.abs(r.clientY-h.clientY)<2?(lastMouseDownCount+1)%3:1}function basicMouseSelection(h,r){let o=queryPos(h,r),u=getClickType(r),g=h.state.selection;return{update(k){k.docChanged&&(o.pos=k.changes.mapPos(o.pos),g=g.map(k.changes))},get(k,A,R){let q=queryPos(h,k),_,ee=rangeForClick(h,q.pos,q.bias,u);if(o.pos!=q.pos&&!A){let te=rangeForClick(h,o.pos,o.bias,u),ne=Math.min(te.from,ee.from),re=Math.max(te.to,ee.to);ee=ne<ee.from?EditorSelection.range(ne,re):EditorSelection.range(re,ne)}return A?g.replaceRange(g.main.extend(ee.from,ee.to)):R&&u==1&&g.ranges.length>1&&(_=removeRangeAround(g,q.pos))?_:R?g.addRange(ee):EditorSelection.create([ee])}}}function removeRangeAround(h,r){for(let o=0;o<h.ranges.length;o++){let{from:u,to:g}=h.ranges[o];if(u<=r&&g>=r)return EditorSelection.create(h.ranges.slice(0,o).concat(h.ranges.slice(o+1)),h.mainIndex==o?0:h.mainIndex-(h.mainIndex>o?1:0))}return null}handlers.dragstart=(h,r)=>{let{selection:{main:o}}=h.state;if(r.target.draggable){let g=h.docView.nearest(r.target);if(g&&g.isWidget){let k=g.posAtStart,A=k+g.length;(k>=o.to||A<=o.from)&&(o=EditorSelection.range(k,A))}}let{inputState:u}=h;return u.mouseSelection&&(u.mouseSelection.dragging=!0),u.draggedContent=o,r.dataTransfer&&(r.dataTransfer.setData("Text",textFilter(h.state,clipboardOutputFilter,h.state.sliceDoc(o.from,o.to))),r.dataTransfer.effectAllowed="copyMove"),!1};handlers.dragend=h=>(h.inputState.draggedContent=null,!1);function dropText(h,r,o,u){if(o=textFilter(h.state,clipboardInputFilter,o),!o)return;let g=h.posAtCoords({x:r.clientX,y:r.clientY},!1),{draggedContent:k}=h.inputState,A=u&&k&&dragMovesSelection(h,r)?{from:k.from,to:k.to}:null,R={from:g,insert:o},q=h.state.changes(A?[A,R]:R);h.focus(),h.dispatch({changes:q,selection:{anchor:q.mapPos(g,-1),head:q.mapPos(g,1)},userEvent:A?"move.drop":"input.drop"}),h.inputState.draggedContent=null}handlers.drop=(h,r)=>{if(!r.dataTransfer)return!1;if(h.state.readOnly)return!0;let o=r.dataTransfer.files;if(o&&o.length){let u=Array(o.length),g=0,k=()=>{++g==o.length&&dropText(h,r,u.filter(A=>A!=null).join(h.state.lineBreak),!1)};for(let A=0;A<o.length;A++){let R=new FileReader;R.onerror=k,R.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(R.result)||(u[A]=R.result),k()},R.readAsText(o[A])}return!0}else{let u=r.dataTransfer.getData("Text");if(u)return dropText(h,r,u,!0),!0}return!1};handlers.paste=(h,r)=>{if(h.state.readOnly)return!0;h.observer.flush();let o=brokenClipboardAPI?null:r.clipboardData;return o?(doPaste(h,o.getData("text/plain")||o.getData("text/uri-list")),!0):(capturePaste(h),!1)};function captureCopy(h,r){let o=h.dom.parentNode;if(!o)return;let u=o.appendChild(document.createElement("textarea"));u.style.cssText="position: fixed; left: -10000px; top: 10px",u.value=r,u.focus(),u.selectionEnd=r.length,u.selectionStart=0,setTimeout(()=>{u.remove(),h.focus()},50)}function copiedRange(h){let r=[],o=[],u=!1;for(let g of h.selection.ranges)g.empty||(r.push(h.sliceDoc(g.from,g.to)),o.push(g));if(!r.length){let g=-1;for(let{from:k}of h.selection.ranges){let A=h.doc.lineAt(k);A.number>g&&(r.push(A.text),o.push({from:A.from,to:Math.min(h.doc.length,A.to+1)})),g=A.number}u=!0}return{text:textFilter(h,clipboardOutputFilter,r.join(h.lineBreak)),ranges:o,linewise:u}}let lastLinewiseCopy=null;handlers.copy=handlers.cut=(h,r)=>{let{text:o,ranges:u,linewise:g}=copiedRange(h.state);if(!o&&!g)return!1;lastLinewiseCopy=g?o:null,r.type=="cut"&&!h.state.readOnly&&h.dispatch({changes:u,scrollIntoView:!0,userEvent:"delete.cut"});let k=brokenClipboardAPI?null:r.clipboardData;return k?(k.clearData(),k.setData("text/plain",o),!0):(captureCopy(h,o),!1)};const isFocusChange=Annotation.define();function focusChangeTransaction(h,r){let o=[];for(let u of h.facet(focusChangeEffect)){let g=u(h,r);g&&o.push(g)}return o.length?h.update({effects:o,annotations:isFocusChange.of(!0)}):null}function updateForFocusChange(h){setTimeout(()=>{let r=h.hasFocus;if(r!=h.inputState.notifiedFocused){let o=focusChangeTransaction(h.state,r);o?h.dispatch(o):h.update([])}},10)}observers.focus=h=>{h.inputState.lastFocusTime=Date.now(),!h.scrollDOM.scrollTop&&(h.inputState.lastScrollTop||h.inputState.lastScrollLeft)&&(h.scrollDOM.scrollTop=h.inputState.lastScrollTop,h.scrollDOM.scrollLeft=h.inputState.lastScrollLeft),updateForFocusChange(h)};observers.blur=h=>{h.observer.clearSelectionRange(),updateForFocusChange(h)};observers.compositionstart=observers.compositionupdate=h=>{h.observer.editContext||(h.inputState.compositionFirstChange==null&&(h.inputState.compositionFirstChange=!0),h.inputState.composing<0&&(h.inputState.composing=0))};observers.compositionend=h=>{h.observer.editContext||(h.inputState.composing=-1,h.inputState.compositionEndedAt=Date.now(),h.inputState.compositionPendingKey=!0,h.inputState.compositionPendingChange=h.observer.pendingRecords().length>0,h.inputState.compositionFirstChange=null,browser.chrome&&browser.android?h.observer.flushSoon():h.inputState.compositionPendingChange?Promise.resolve().then(()=>h.observer.flush()):setTimeout(()=>{h.inputState.composing<0&&h.docView.hasComposition&&h.update([])},50))};observers.contextmenu=h=>{h.inputState.lastContextMenu=Date.now()};handlers.beforeinput=(h,r)=>{var o,u;if(r.inputType=="insertReplacementText"&&h.observer.editContext){let k=(o=r.dataTransfer)===null||o===void 0?void 0:o.getData("text/plain"),A=r.getTargetRanges();if(k&&A.length){let R=A[0],q=h.posAtDOM(R.startContainer,R.startOffset),_=h.posAtDOM(R.endContainer,R.endOffset);return applyDOMChangeInner(h,{from:q,to:_,insert:h.state.toText(k)},null),!0}}let g;if(browser.chrome&&browser.android&&(g=PendingKeys.find(k=>k.inputType==r.inputType))&&(h.observer.delayAndroidKey(g.key,g.keyCode),g.key=="Backspace"||g.key=="Delete")){let k=((u=window.visualViewport)===null||u===void 0?void 0:u.height)||0;setTimeout(()=>{var A;(((A=window.visualViewport)===null||A===void 0?void 0:A.height)||0)>k+10&&h.hasFocus&&(h.contentDOM.blur(),h.focus())},100)}return browser.ios&&r.inputType=="deleteContentForward"&&h.observer.flushSoon(),browser.safari&&r.inputType=="insertText"&&h.inputState.composing>=0&&setTimeout(()=>observers.compositionend(h,r),20),!1};const appliedFirefoxHack=new Set;function firefoxCopyCutHack(h){appliedFirefoxHack.has(h)||(appliedFirefoxHack.add(h),h.addEventListener("copy",()=>{}),h.addEventListener("cut",()=>{}))}const wrappingWhiteSpace=["pre-wrap","normal","pre-line","break-spaces"];let heightChangeFlag=!1;function clearHeightChangeFlag(){heightChangeFlag=!1}class HeightOracle{constructor(r){this.lineWrapping=r,this.doc=Text.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(r,o){let u=this.doc.lineAt(o).number-this.doc.lineAt(r).number+1;return this.lineWrapping&&(u+=Math.max(0,Math.ceil((o-r-u*this.lineLength*.5)/this.lineLength))),this.lineHeight*u}heightForLine(r){return this.lineWrapping?(1+Math.max(0,Math.ceil((r-this.lineLength)/Math.max(1,this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(r){return this.doc=r,this}mustRefreshForWrapping(r){return wrappingWhiteSpace.indexOf(r)>-1!=this.lineWrapping}mustRefreshForHeights(r){let o=!1;for(let u=0;u<r.length;u++){let g=r[u];g<0?u++:this.heightSamples[Math.floor(g*10)]||(o=!0,this.heightSamples[Math.floor(g*10)]=!0)}return o}refresh(r,o,u,g,k,A){let R=wrappingWhiteSpace.indexOf(r)>-1,q=Math.round(o)!=Math.round(this.lineHeight)||this.lineWrapping!=R;if(this.lineWrapping=R,this.lineHeight=o,this.charWidth=u,this.textHeight=g,this.lineLength=k,q){this.heightSamples={};for(let _=0;_<A.length;_++){let ee=A[_];ee<0?_++:this.heightSamples[Math.floor(ee*10)]=!0}}return q}}class MeasuredHeights{constructor(r,o){this.from=r,this.heights=o,this.index=0}get more(){return this.index<this.heights.length}}class BlockInfo{constructor(r,o,u,g,k){this.from=r,this.length=o,this.top=u,this.height=g,this._content=k}get type(){return typeof this._content=="number"?BlockType.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof PointDecoration?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(r){let o=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(r._content)?r._content:[r]);return new BlockInfo(this.from,this.length+r.length,this.top,this.height+r.height,o)}}var QueryType$1=(function(h){return h[h.ByPos=0]="ByPos",h[h.ByHeight=1]="ByHeight",h[h.ByPosNoHeight=2]="ByPosNoHeight",h})(QueryType$1||(QueryType$1={}));const Epsilon=.001;class HeightMap{constructor(r,o,u=2){this.length=r,this.height=o,this.flags=u}get outdated(){return(this.flags&2)>0}set outdated(r){this.flags=(r?2:0)|this.flags&-3}setHeight(r){this.height!=r&&(Math.abs(this.height-r)>Epsilon&&(heightChangeFlag=!0),this.height=r)}replace(r,o,u){return HeightMap.of(u)}decomposeLeft(r,o){o.push(this)}decomposeRight(r,o){o.push(this)}applyChanges(r,o,u,g){let k=this,A=u.doc;for(let R=g.length-1;R>=0;R--){let{fromA:q,toA:_,fromB:ee,toB:te}=g[R],ne=k.lineAt(q,QueryType$1.ByPosNoHeight,u.setDoc(o),0,0),re=ne.to>=_?ne:k.lineAt(_,QueryType$1.ByPosNoHeight,u,0,0);for(te+=re.to-_,_=re.to;R>0&&ne.from<=g[R-1].toA;)q=g[R-1].fromA,ee=g[R-1].fromB,R--,q<ne.from&&(ne=k.lineAt(q,QueryType$1.ByPosNoHeight,u,0,0));ee+=ne.from-q,q=ne.from;let oe=NodeBuilder.build(u.setDoc(A),r,ee,te);k=replace(k,k.replace(q,_,oe))}return k.updateHeight(u,0)}static empty(){return new HeightMapText(0,0)}static of(r){if(r.length==1)return r[0];let o=0,u=r.length,g=0,k=0;for(;;)if(o==u)if(g>k*2){let R=r[o-1];R.break?r.splice(--o,1,R.left,null,R.right):r.splice(--o,1,R.left,R.right),u+=1+R.break,g-=R.size}else if(k>g*2){let R=r[u];R.break?r.splice(u,1,R.left,null,R.right):r.splice(u,1,R.left,R.right),u+=2+R.break,k-=R.size}else break;else if(g<k){let R=r[o++];R&&(g+=R.size)}else{let R=r[--u];R&&(k+=R.size)}let A=0;return r[o-1]==null?(A=1,o--):r[o]==null&&(A=1,u++),new HeightMapBranch(HeightMap.of(r.slice(0,o)),A,HeightMap.of(r.slice(u)))}}function replace(h,r){return h==r?h:(h.constructor!=r.constructor&&(heightChangeFlag=!0),r)}HeightMap.prototype.size=1;class HeightMapBlock extends HeightMap{constructor(r,o,u){super(r,o),this.deco=u}blockAt(r,o,u,g){return new BlockInfo(g,this.length,u,this.height,this.deco||0)}lineAt(r,o,u,g,k){return this.blockAt(0,u,g,k)}forEachLine(r,o,u,g,k,A){r<=k+this.length&&o>=k&&A(this.blockAt(0,u,g,k))}updateHeight(r,o=0,u=!1,g){return g&&g.from<=o&&g.more&&this.setHeight(g.heights[g.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class HeightMapText extends HeightMapBlock{constructor(r,o){super(r,o,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(r,o,u,g){return new BlockInfo(g,this.length,u,this.height,this.breaks)}replace(r,o,u){let g=u[0];return u.length==1&&(g instanceof HeightMapText||g instanceof HeightMapGap&&g.flags&4)&&Math.abs(this.length-g.length)<10?(g instanceof HeightMapGap?g=new HeightMapText(g.length,this.height):g.height=this.height,this.outdated||(g.outdated=!1),g):HeightMap.of(u)}updateHeight(r,o=0,u=!1,g){return g&&g.from<=o&&g.more?this.setHeight(g.heights[g.index++]):(u||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,r.heightForLine(this.length-this.collapsed))+this.breaks*r.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class HeightMapGap extends HeightMap{constructor(r){super(r,0)}heightMetrics(r,o){let u=r.doc.lineAt(o).number,g=r.doc.lineAt(o+this.length).number,k=g-u+1,A,R=0;if(r.lineWrapping){let q=Math.min(this.height,r.lineHeight*k);A=q/k,this.length>k+1&&(R=(this.height-q)/(this.length-k-1))}else A=this.height/k;return{firstLine:u,lastLine:g,perLine:A,perChar:R}}blockAt(r,o,u,g){let{firstLine:k,lastLine:A,perLine:R,perChar:q}=this.heightMetrics(o,g);if(o.lineWrapping){let _=g+(r<o.lineHeight?0:Math.round(Math.max(0,Math.min(1,(r-u)/this.height))*this.length)),ee=o.doc.lineAt(_),te=R+ee.length*q,ne=Math.max(u,r-te/2);return new BlockInfo(ee.from,ee.length,ne,te,0)}else{let _=Math.max(0,Math.min(A-k,Math.floor((r-u)/R))),{from:ee,length:te}=o.doc.line(k+_);return new BlockInfo(ee,te,u+R*_,R,0)}}lineAt(r,o,u,g,k){if(o==QueryType$1.ByHeight)return this.blockAt(r,u,g,k);if(o==QueryType$1.ByPosNoHeight){let{from:re,to:oe}=u.doc.lineAt(r);return new BlockInfo(re,oe-re,0,0,0)}let{firstLine:A,perLine:R,perChar:q}=this.heightMetrics(u,k),_=u.doc.lineAt(r),ee=R+_.length*q,te=_.number-A,ne=g+R*te+q*(_.from-k-te);return new BlockInfo(_.from,_.length,Math.max(g,Math.min(ne,g+this.height-ee)),ee,0)}forEachLine(r,o,u,g,k,A){r=Math.max(r,k),o=Math.min(o,k+this.length);let{firstLine:R,perLine:q,perChar:_}=this.heightMetrics(u,k);for(let ee=r,te=g;ee<=o;){let ne=u.doc.lineAt(ee);if(ee==r){let oe=ne.number-R;te+=q*oe+_*(r-k-oe)}let re=q+_*ne.length;A(new BlockInfo(ne.from,ne.length,te,re,0)),te+=re,ee=ne.to+1}}replace(r,o,u){let g=this.length-o;if(g>0){let k=u[u.length-1];k instanceof HeightMapGap?u[u.length-1]=new HeightMapGap(k.length+g):u.push(null,new HeightMapGap(g-1))}if(r>0){let k=u[0];k instanceof HeightMapGap?u[0]=new HeightMapGap(r+k.length):u.unshift(new HeightMapGap(r-1),null)}return HeightMap.of(u)}decomposeLeft(r,o){o.push(new HeightMapGap(r-1),null)}decomposeRight(r,o){o.push(null,new HeightMapGap(this.length-r-1))}updateHeight(r,o=0,u=!1,g){let k=o+this.length;if(g&&g.from<=o+this.length&&g.more){let A=[],R=Math.max(o,g.from),q=-1;for(g.from>o&&A.push(new HeightMapGap(g.from-o-1).updateHeight(r,o));R<=k&&g.more;){let ee=r.doc.lineAt(R).length;A.length&&A.push(null);let te=g.heights[g.index++];q==-1?q=te:Math.abs(te-q)>=Epsilon&&(q=-2);let ne=new HeightMapText(ee,te);ne.outdated=!1,A.push(ne),R+=ee+1}R<=k&&A.push(null,new HeightMapGap(k-R).updateHeight(r,R));let _=HeightMap.of(A);return(q<0||Math.abs(_.height-this.height)>=Epsilon||Math.abs(q-this.heightMetrics(r,o).perLine)>=Epsilon)&&(heightChangeFlag=!0),replace(this,_)}else(u||this.outdated)&&(this.setHeight(r.heightForGap(o,o+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class HeightMapBranch extends HeightMap{constructor(r,o,u){super(r.length+o+u.length,r.height+u.height,o|(r.outdated||u.outdated?2:0)),this.left=r,this.right=u,this.size=r.size+u.size}get break(){return this.flags&1}blockAt(r,o,u,g){let k=u+this.left.height;return r<k?this.left.blockAt(r,o,u,g):this.right.blockAt(r,o,k,g+this.left.length+this.break)}lineAt(r,o,u,g,k){let A=g+this.left.height,R=k+this.left.length+this.break,q=o==QueryType$1.ByHeight?r<A:r<R,_=q?this.left.lineAt(r,o,u,g,k):this.right.lineAt(r,o,u,A,R);if(this.break||(q?_.to<R:_.from>R))return _;let ee=o==QueryType$1.ByPosNoHeight?QueryType$1.ByPosNoHeight:QueryType$1.ByPos;return q?_.join(this.right.lineAt(R,ee,u,A,R)):this.left.lineAt(R,ee,u,g,k).join(_)}forEachLine(r,o,u,g,k,A){let R=g+this.left.height,q=k+this.left.length+this.break;if(this.break)r<q&&this.left.forEachLine(r,o,u,g,k,A),o>=q&&this.right.forEachLine(r,o,u,R,q,A);else{let _=this.lineAt(q,QueryType$1.ByPos,u,g,k);r<_.from&&this.left.forEachLine(r,_.from-1,u,g,k,A),_.to>=r&&_.from<=o&&A(_),o>_.to&&this.right.forEachLine(_.to+1,o,u,R,q,A)}}replace(r,o,u){let g=this.left.length+this.break;if(o<g)return this.balanced(this.left.replace(r,o,u),this.right);if(r>this.left.length)return this.balanced(this.left,this.right.replace(r-g,o-g,u));let k=[];r>0&&this.decomposeLeft(r,k);let A=k.length;for(let R of u)k.push(R);if(r>0&&mergeGaps(k,A-1),o<this.length){let R=k.length;this.decomposeRight(o,k),mergeGaps(k,R)}return HeightMap.of(k)}decomposeLeft(r,o){let u=this.left.length;if(r<=u)return this.left.decomposeLeft(r,o);o.push(this.left),this.break&&(u++,r>=u&&o.push(null)),r>u&&this.right.decomposeLeft(r-u,o)}decomposeRight(r,o){let u=this.left.length,g=u+this.break;if(r>=g)return this.right.decomposeRight(r-g,o);r<u&&this.left.decomposeRight(r,o),this.break&&r<g&&o.push(null),o.push(this.right)}balanced(r,o){return r.size>2*o.size||o.size>2*r.size?HeightMap.of(this.break?[r,null,o]:[r,o]):(this.left=replace(this.left,r),this.right=replace(this.right,o),this.setHeight(r.height+o.height),this.outdated=r.outdated||o.outdated,this.size=r.size+o.size,this.length=r.length+this.break+o.length,this)}updateHeight(r,o=0,u=!1,g){let{left:k,right:A}=this,R=o+k.length+this.break,q=null;return g&&g.from<=o+k.length&&g.more?q=k=k.updateHeight(r,o,u,g):k.updateHeight(r,o,u),g&&g.from<=R+A.length&&g.more?q=A=A.updateHeight(r,R,u,g):A.updateHeight(r,R,u),q?this.balanced(k,A):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function mergeGaps(h,r){let o,u;h[r]==null&&(o=h[r-1])instanceof HeightMapGap&&(u=h[r+1])instanceof HeightMapGap&&h.splice(r-1,3,new HeightMapGap(o.length+1+u.length))}const relevantWidgetHeight=5;class NodeBuilder{constructor(r,o){this.pos=r,this.oracle=o,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=r}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(r,o){if(this.lineStart>-1){let u=Math.min(o,this.lineEnd),g=this.nodes[this.nodes.length-1];g instanceof HeightMapText?g.length+=u-this.pos:(u>this.pos||!this.isCovered)&&this.nodes.push(new HeightMapText(u-this.pos,-1)),this.writtenTo=u,o>u&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=o}point(r,o,u){if(r<o||u.heightRelevant){let g=u.widget?u.widget.estimatedHeight:0,k=u.widget?u.widget.lineBreaks:0;g<0&&(g=this.oracle.lineHeight);let A=o-r;u.block?this.addBlock(new HeightMapBlock(A,g,u)):(A||k||g>=relevantWidgetHeight)&&this.addLineDeco(g,k,A)}else o>r&&this.span(r,o);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:r,to:o}=this.oracle.doc.lineAt(this.pos);this.lineStart=r,this.lineEnd=o,this.writtenTo<r&&((this.writtenTo<r-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,r-1)),this.nodes.push(null)),this.pos>r&&this.nodes.push(new HeightMapText(this.pos-r,-1)),this.writtenTo=this.pos}blankContent(r,o){let u=new HeightMapGap(o-r);return this.oracle.doc.lineAt(r).to==o&&(u.flags|=4),u}ensureLine(){this.enterLine();let r=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(r instanceof HeightMapText)return r;let o=new HeightMapText(0,-1);return this.nodes.push(o),o}addBlock(r){this.enterLine();let o=r.deco;o&&o.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(r),this.writtenTo=this.pos=this.pos+r.length,o&&o.endSide>0&&(this.covering=r)}addLineDeco(r,o,u){let g=this.ensureLine();g.length+=u,g.collapsed+=u,g.widgetHeight=Math.max(g.widgetHeight,r),g.breaks+=o,this.writtenTo=this.pos=this.pos+u}finish(r){let o=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(o instanceof HeightMapText)&&!this.isCovered?this.nodes.push(new HeightMapText(0,-1)):(this.writtenTo<this.pos||o==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let u=r;for(let g of this.nodes)g instanceof HeightMapText&&g.updateHeight(this.oracle,u),u+=g?g.length:1;return this.nodes}static build(r,o,u,g){let k=new NodeBuilder(u,r);return RangeSet.spans(o,u,g,k,0),k.finish(u)}}function heightRelevantDecoChanges(h,r,o){let u=new DecorationComparator;return RangeSet.compare(h,r,o,u,0),u.changes}class DecorationComparator{constructor(){this.changes=[]}compareRange(){}comparePoint(r,o,u,g){(r<o||u&&u.heightRelevant||g&&g.heightRelevant)&&addRange(r,o,this.changes,5)}}function visiblePixelRange(h,r){let o=h.getBoundingClientRect(),u=h.ownerDocument,g=u.defaultView||window,k=Math.max(0,o.left),A=Math.min(g.innerWidth,o.right),R=Math.max(0,o.top),q=Math.min(g.innerHeight,o.bottom);for(let _=h.parentNode;_&&_!=u.body;)if(_.nodeType==1){let ee=_,te=window.getComputedStyle(ee);if((ee.scrollHeight>ee.clientHeight||ee.scrollWidth>ee.clientWidth)&&te.overflow!="visible"){let ne=ee.getBoundingClientRect();k=Math.max(k,ne.left),A=Math.min(A,ne.right),R=Math.max(R,ne.top),q=Math.min(_==h.parentNode?g.innerHeight:q,ne.bottom)}_=te.position=="absolute"||te.position=="fixed"?ee.offsetParent:ee.parentNode}else if(_.nodeType==11)_=_.host;else break;return{left:k-o.left,right:Math.max(k,A)-o.left,top:R-(o.top+r),bottom:Math.max(R,q)-(o.top+r)}}function inWindow(h){let r=h.getBoundingClientRect(),o=h.ownerDocument.defaultView||window;return r.left<o.innerWidth&&r.right>0&&r.top<o.innerHeight&&r.bottom>0}function fullPixelRange(h,r){let o=h.getBoundingClientRect();return{left:0,right:o.right-o.left,top:r,bottom:o.bottom-(o.top+r)}}class LineGap{constructor(r,o,u,g){this.from=r,this.to=o,this.size=u,this.displaySize=g}static same(r,o){if(r.length!=o.length)return!1;for(let u=0;u<r.length;u++){let g=r[u],k=o[u];if(g.from!=k.from||g.to!=k.to||g.size!=k.size)return!1}return!0}draw(r,o){return Decoration.replace({widget:new LineGapWidget(this.displaySize*(o?r.scaleY:r.scaleX),o)}).range(this.from,this.to)}}class LineGapWidget extends WidgetType{constructor(r,o){super(),this.size=r,this.vertical=o}eq(r){return r.size==this.size&&r.vertical==this.vertical}toDOM(){let r=document.createElement("div");return this.vertical?r.style.height=this.size+"px":(r.style.width=this.size+"px",r.style.height="2px",r.style.display="inline-block"),r}get estimatedHeight(){return this.vertical?this.size:-1}}class ViewState{constructor(r){this.state=r,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=IdScaler,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Direction.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let o=r.facet(contentAttributes).some(u=>typeof u!="function"&&u.class=="cm-lineWrapping");this.heightOracle=new HeightOracle(o),this.stateDeco=r.facet(decorations).filter(u=>typeof u!="function"),this.heightMap=HeightMap.empty().applyChanges(this.stateDeco,Text.empty,this.heightOracle.setDoc(r.doc),[new ChangedRange(0,0,0,r.doc.length)]);for(let u=0;u<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());u++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Decoration.set(this.lineGaps.map(u=>u.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let r=[this.viewport],{main:o}=this.state.selection;for(let u=0;u<=1;u++){let g=u?o.head:o.anchor;if(!r.some(({from:k,to:A})=>g>=k&&g<=A)){let{from:k,to:A}=this.lineBlockAt(g);r.push(new Viewport(k,A))}}return this.viewports=r.sort((u,g)=>u.from-g.from),this.updateScaler()}updateScaler(){let r=this.scaler;return this.scaler=this.heightMap.height<=7e6?IdScaler:new BigScaler(this.heightOracle,this.heightMap,this.viewports),r.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,r=>{this.viewportLines.push(scaleBlock(r,this.scaler))})}update(r,o=null){this.state=r.state;let u=this.stateDeco;this.stateDeco=this.state.facet(decorations).filter(ee=>typeof ee!="function");let g=r.changedRanges,k=ChangedRange.extendWithRanges(g,heightRelevantDecoChanges(u,this.stateDeco,r?r.changes:ChangeSet.empty(this.state.doc.length))),A=this.heightMap.height,R=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);clearHeightChangeFlag(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,r.startState.doc,this.heightOracle.setDoc(this.state.doc),k),(this.heightMap.height!=A||heightChangeFlag)&&(r.flags|=2),R?(this.scrollAnchorPos=r.changes.mapPos(R.from,-1),this.scrollAnchorHeight=R.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=A);let q=k.length?this.mapViewport(this.viewport,r.changes):this.viewport;(o&&(o.range.head<q.from||o.range.head>q.to)||!this.viewportIsAppropriate(q))&&(q=this.getViewport(0,o));let _=q.from!=this.viewport.from||q.to!=this.viewport.to;this.viewport=q,r.flags|=this.updateForViewport(),(_||!r.changes.empty||r.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,r.changes))),r.flags|=this.computeVisibleRanges(r.changes),o&&(this.scrollTarget=o),!this.mustEnforceCursorAssoc&&r.selectionSet&&r.view.lineWrapping&&r.state.selection.main.empty&&r.state.selection.main.assoc&&!r.state.facet(nativeSelectionHidden)&&(this.mustEnforceCursorAssoc=!0)}measure(r){let o=r.contentDOM,u=window.getComputedStyle(o),g=this.heightOracle,k=u.whiteSpace;this.defaultTextDirection=u.direction=="rtl"?Direction.RTL:Direction.LTR;let A=this.heightOracle.mustRefreshForWrapping(k),R=o.getBoundingClientRect(),q=A||this.mustMeasureContent||this.contentDOMHeight!=R.height;this.contentDOMHeight=R.height,this.mustMeasureContent=!1;let _=0,ee=0;if(R.width&&R.height){let{scaleX:se,scaleY:ce}=getScale(o,R);(se>.005&&Math.abs(this.scaleX-se)>.005||ce>.005&&Math.abs(this.scaleY-ce)>.005)&&(this.scaleX=se,this.scaleY=ce,_|=16,A=q=!0)}let te=(parseInt(u.paddingTop)||0)*this.scaleY,ne=(parseInt(u.paddingBottom)||0)*this.scaleY;(this.paddingTop!=te||this.paddingBottom!=ne)&&(this.paddingTop=te,this.paddingBottom=ne,_|=18),this.editorWidth!=r.scrollDOM.clientWidth&&(g.lineWrapping&&(q=!0),this.editorWidth=r.scrollDOM.clientWidth,_|=16);let re=r.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=re&&(this.scrollAnchorHeight=-1,this.scrollTop=re),this.scrolledToBottom=isScrolledToBottom(r.scrollDOM);let oe=(this.printing?fullPixelRange:visiblePixelRange)(o,this.paddingTop),le=oe.top-this.pixelViewport.top,pe=oe.bottom-this.pixelViewport.bottom;this.pixelViewport=oe;let de=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(de!=this.inView&&(this.inView=de,de&&(q=!0)),!this.inView&&!this.scrollTarget&&!inWindow(r.dom))return 0;let he=R.width;if((this.contentDOMWidth!=he||this.editorHeight!=r.scrollDOM.clientHeight)&&(this.contentDOMWidth=R.width,this.editorHeight=r.scrollDOM.clientHeight,_|=16),q){let se=r.docView.measureVisibleLineHeights(this.viewport);if(g.mustRefreshForHeights(se)&&(A=!0),A||g.lineWrapping&&Math.abs(he-this.contentDOMWidth)>g.charWidth){let{lineHeight:ce,charWidth:fe,textHeight:ue}=r.docView.measureTextSize();A=ce>0&&g.refresh(k,ce,fe,ue,Math.max(5,he/fe),se),A&&(r.docView.minWidth=0,_|=16)}le>0&&pe>0?ee=Math.max(le,pe):le<0&&pe<0&&(ee=Math.min(le,pe)),clearHeightChangeFlag();for(let ce of this.viewports){let fe=ce.from==this.viewport.from?se:r.docView.measureVisibleLineHeights(ce);this.heightMap=(A?HeightMap.empty().applyChanges(this.stateDeco,Text.empty,this.heightOracle,[new ChangedRange(0,0,0,r.state.doc.length)]):this.heightMap).updateHeight(g,0,A,new MeasuredHeights(ce.from,fe))}heightChangeFlag&&(_|=2)}let ae=!this.viewportIsAppropriate(this.viewport,ee)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return ae&&(_&2&&(_|=this.updateScaler()),this.viewport=this.getViewport(ee,this.scrollTarget),_|=this.updateForViewport()),(_&2||ae)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(A?[]:this.lineGaps,r)),_|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,r.docView.enforceCursorAssoc()),_}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(r,o){let u=.5-Math.max(-.5,Math.min(.5,r/1e3/2)),g=this.heightMap,k=this.heightOracle,{visibleTop:A,visibleBottom:R}=this,q=new Viewport(g.lineAt(A-u*1e3,QueryType$1.ByHeight,k,0,0).from,g.lineAt(R+(1-u)*1e3,QueryType$1.ByHeight,k,0,0).to);if(o){let{head:_}=o.range;if(_<q.from||_>q.to){let ee=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),te=g.lineAt(_,QueryType$1.ByPos,k,0,0),ne;o.y=="center"?ne=(te.top+te.bottom)/2-ee/2:o.y=="start"||o.y=="nearest"&&_<q.from?ne=te.top:ne=te.bottom-ee,q=new Viewport(g.lineAt(ne-1e3/2,QueryType$1.ByHeight,k,0,0).from,g.lineAt(ne+ee+1e3/2,QueryType$1.ByHeight,k,0,0).to)}}return q}mapViewport(r,o){let u=o.mapPos(r.from,-1),g=o.mapPos(r.to,1);return new Viewport(this.heightMap.lineAt(u,QueryType$1.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(g,QueryType$1.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:r,to:o},u=0){if(!this.inView)return!0;let{top:g}=this.heightMap.lineAt(r,QueryType$1.ByPos,this.heightOracle,0,0),{bottom:k}=this.heightMap.lineAt(o,QueryType$1.ByPos,this.heightOracle,0,0),{visibleTop:A,visibleBottom:R}=this;return(r==0||g<=A-Math.max(10,Math.min(-u,250)))&&(o==this.state.doc.length||k>=R+Math.max(10,Math.min(u,250)))&&g>A-2*1e3&&k<R+2*1e3}mapLineGaps(r,o){if(!r.length||o.empty)return r;let u=[];for(let g of r)o.touchesRange(g.from,g.to)||u.push(new LineGap(o.mapPos(g.from),o.mapPos(g.to),g.size,g.displaySize));return u}ensureLineGaps(r,o){let u=this.heightOracle.lineWrapping,g=u?1e4:2e3,k=g>>1,A=g<<1;if(this.defaultTextDirection!=Direction.LTR&&!u)return[];let R=[],q=(ee,te,ne,re)=>{if(te-ee<k)return;let oe=this.state.selection.main,le=[oe.from];oe.empty||le.push(oe.to);for(let de of le)if(de>ee&&de<te){q(ee,de-10,ne,re),q(de+10,te,ne,re);return}let pe=find(r,de=>de.from>=ne.from&&de.to<=ne.to&&Math.abs(de.from-ee)<k&&Math.abs(de.to-te)<k&&!le.some(he=>de.from<he&&de.to>he));if(!pe){if(te<ne.to&&o&&u&&o.visibleRanges.some(ae=>ae.from<=te&&ae.to>=te)){let ae=o.moveToLineBoundary(EditorSelection.cursor(te),!1,!0).head;ae>ee&&(te=ae)}let de=this.gapSize(ne,ee,te,re),he=u||de<2e6?de:2e6;pe=new LineGap(ee,te,de,he)}R.push(pe)},_=ee=>{if(ee.length<A||ee.type!=BlockType.Text)return;let te=lineStructure(ee.from,ee.to,this.stateDeco);if(te.total<A)return;let ne=this.scrollTarget?this.scrollTarget.range.head:null,re,oe;if(u){let le=g/this.heightOracle.lineLength*this.heightOracle.lineHeight,pe,de;if(ne!=null){let he=findFraction(te,ne),ae=((this.visibleBottom-this.visibleTop)/2+le)/ee.height;pe=he-ae,de=he+ae}else pe=(this.visibleTop-ee.top-le)/ee.height,de=(this.visibleBottom-ee.top+le)/ee.height;re=findPosition(te,pe),oe=findPosition(te,de)}else{let le=te.total*this.heightOracle.charWidth,pe=g*this.heightOracle.charWidth,de=0;if(le>2e6)for(let fe of r)fe.from>=ee.from&&fe.from<ee.to&&fe.size!=fe.displaySize&&fe.from*this.heightOracle.charWidth+de<this.pixelViewport.left&&(de=fe.size-fe.displaySize);let he=this.pixelViewport.left+de,ae=this.pixelViewport.right+de,se,ce;if(ne!=null){let fe=findFraction(te,ne),ue=((ae-he)/2+pe)/le;se=fe-ue,ce=fe+ue}else se=(he-pe)/le,ce=(ae+pe)/le;re=findPosition(te,se),oe=findPosition(te,ce)}re>ee.from&&q(ee.from,re,ee,te),oe<ee.to&&q(oe,ee.to,ee,te)};for(let ee of this.viewportLines)Array.isArray(ee.type)?ee.type.forEach(_):_(ee);return R}gapSize(r,o,u,g){let k=findFraction(g,u)-findFraction(g,o);return this.heightOracle.lineWrapping?r.height*k:g.total*this.heightOracle.charWidth*k}updateLineGaps(r){LineGap.same(r,this.lineGaps)||(this.lineGaps=r,this.lineGapDeco=Decoration.set(r.map(o=>o.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(r){let o=this.stateDeco;this.lineGaps.length&&(o=o.concat(this.lineGapDeco));let u=[];RangeSet.spans(o,this.viewport.from,this.viewport.to,{span(k,A){u.push({from:k,to:A})},point(){}},20);let g=0;if(u.length!=this.visibleRanges.length)g=12;else for(let k=0;k<u.length&&!(g&8);k++){let A=this.visibleRanges[k],R=u[k];(A.from!=R.from||A.to!=R.to)&&(g|=4,r&&r.mapPos(A.from,-1)==R.from&&r.mapPos(A.to,1)==R.to||(g|=8))}return this.visibleRanges=u,g}lineBlockAt(r){return r>=this.viewport.from&&r<=this.viewport.to&&this.viewportLines.find(o=>o.from<=r&&o.to>=r)||scaleBlock(this.heightMap.lineAt(r,QueryType$1.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(r){return r>=this.viewportLines[0].top&&r<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(o=>o.top<=r&&o.bottom>=r)||scaleBlock(this.heightMap.lineAt(this.scaler.fromDOM(r),QueryType$1.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(r){let o=this.lineBlockAtHeight(r+8);return o.from>=this.viewport.from||this.viewportLines[0].top-r>200?o:this.viewportLines[0]}elementAtHeight(r){return scaleBlock(this.heightMap.blockAt(this.scaler.fromDOM(r),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Viewport{constructor(r,o){this.from=r,this.to=o}}function lineStructure(h,r,o){let u=[],g=h,k=0;return RangeSet.spans(o,h,r,{span(){},point(A,R){A>g&&(u.push({from:g,to:A}),k+=A-g),g=R}},20),g<r&&(u.push({from:g,to:r}),k+=r-g),{total:k,ranges:u}}function findPosition({total:h,ranges:r},o){if(o<=0)return r[0].from;if(o>=1)return r[r.length-1].to;let u=Math.floor(h*o);for(let g=0;;g++){let{from:k,to:A}=r[g],R=A-k;if(u<=R)return k+u;u-=R}}function findFraction(h,r){let o=0;for(let{from:u,to:g}of h.ranges){if(r<=g){o+=r-u;break}o+=g-u}return o/h.total}function find(h,r){for(let o of h)if(r(o))return o}const IdScaler={toDOM(h){return h},fromDOM(h){return h},scale:1,eq(h){return h==this}};class BigScaler{constructor(r,o,u){let g=0,k=0,A=0;this.viewports=u.map(({from:R,to:q})=>{let _=o.lineAt(R,QueryType$1.ByPos,r,0,0).top,ee=o.lineAt(q,QueryType$1.ByPos,r,0,0).bottom;return g+=ee-_,{from:R,to:q,top:_,bottom:ee,domTop:0,domBottom:0}}),this.scale=(7e6-g)/(o.height-g);for(let R of this.viewports)R.domTop=A+(R.top-k)*this.scale,A=R.domBottom=R.domTop+(R.bottom-R.top),k=R.bottom}toDOM(r){for(let o=0,u=0,g=0;;o++){let k=o<this.viewports.length?this.viewports[o]:null;if(!k||r<k.top)return g+(r-u)*this.scale;if(r<=k.bottom)return k.domTop+(r-k.top);u=k.bottom,g=k.domBottom}}fromDOM(r){for(let o=0,u=0,g=0;;o++){let k=o<this.viewports.length?this.viewports[o]:null;if(!k||r<k.domTop)return u+(r-g)/this.scale;if(r<=k.domBottom)return k.top+(r-k.domTop);u=k.bottom,g=k.domBottom}}eq(r){return r instanceof BigScaler?this.scale==r.scale&&this.viewports.length==r.viewports.length&&this.viewports.every((o,u)=>o.from==r.viewports[u].from&&o.to==r.viewports[u].to):!1}}function scaleBlock(h,r){if(r.scale==1)return h;let o=r.toDOM(h.top),u=r.toDOM(h.bottom);return new BlockInfo(h.from,h.length,o,u-o,Array.isArray(h._content)?h._content.map(g=>scaleBlock(g,r)):h._content)}const theme=Facet.define({combine:h=>h.join(" ")}),darkTheme=Facet.define({combine:h=>h.indexOf(!0)>-1}),baseThemeID=StyleModule.newName(),baseLightID=StyleModule.newName(),baseDarkID=StyleModule.newName(),lightDarkIDs={"&light":"."+baseLightID,"&dark":"."+baseDarkID};function buildTheme(h,r,o){return new StyleModule(r,{finish(u){return/&/.test(u)?u.replace(/&\w*/,g=>{if(g=="&")return h;if(!o||!o[g])throw new RangeError(`Unsupported selector: ${g}`);return o[g]}):h+" "+u}})}const baseTheme$1$3=buildTheme("."+baseThemeID,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},lightDarkIDs),observeOptions={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},useCharData=browser.ie&&browser.ie_version<=11;class DOMObserver{constructor(r){this.view=r,this.active=!1,this.editContext=null,this.selectionRange=new DOMSelectionState,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=r.contentDOM,this.observer=new MutationObserver(o=>{for(let u of o)this.queue.push(u);(browser.ie&&browser.ie_version<=11||browser.ios&&r.composing)&&o.some(u=>u.type=="childList"&&u.removedNodes.length||u.type=="characterData"&&u.oldValue.length>u.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&browser.android&&r.constructor.EDIT_CONTEXT!==!1&&!(browser.chrome&&browser.chrome_version<126)&&(this.editContext=new EditContextManager(r),r.state.facet(editable)&&(r.contentDOM.editContext=this.editContext.editContext)),useCharData&&(this.onCharData=o=>{this.queue.push({target:o.target,type:"characterData",oldValue:o.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var o;((o=this.view.docView)===null||o===void 0?void 0:o.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(r.scrollDOM)),this.addWindowListeners(this.win=r.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(o=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),o.length>0&&o[o.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(o=>{o.length>0&&o[o.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(r){this.view.inputState.runHandlers("scroll",r),this.intersecting&&this.view.measure()}onScroll(r){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(r)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(r){(r.type=="change"||!r.type)&&!r.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(r){if(this.gapIntersection&&(r.length!=this.gaps.length||this.gaps.some((o,u)=>o!=r[u]))){this.gapIntersection.disconnect();for(let o of r)this.gapIntersection.observe(o);this.gaps=r}}onSelectionChange(r){let o=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:u}=this,g=this.selectionRange;if(u.state.facet(editable)?u.root.activeElement!=this.dom:!hasSelection(this.dom,g))return;let k=g.anchorNode&&u.docView.nearest(g.anchorNode);if(k&&k.ignoreEvent(r)){o||(this.selectionChanged=!1);return}(browser.ie&&browser.ie_version<=11||browser.android&&browser.chrome)&&!u.state.selection.main.empty&&g.focusNode&&isEquivalentPosition(g.focusNode,g.focusOffset,g.anchorNode,g.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:r}=this,o=getSelection(r.root);if(!o)return!1;let u=browser.safari&&r.root.nodeType==11&&r.root.activeElement==this.dom&&safariSelectionRangeHack(this.view,o)||o;if(!u||this.selectionRange.eq(u))return!1;let g=hasSelection(this.dom,u);return g&&!this.selectionChanged&&r.inputState.lastFocusTime>Date.now()-200&&r.inputState.lastTouchTime<Date.now()-300&&atElementStart(this.dom,u)?(this.view.inputState.lastFocusTime=0,r.docView.updateSelection(),!1):(this.selectionRange.setRange(u),g&&(this.selectionChanged=!0),!0)}setSelectionRange(r,o){this.selectionRange.set(r.node,r.offset,o.node,o.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let r=0,o=null;for(let u=this.dom;u;)if(u.nodeType==1)!o&&r<this.scrollTargets.length&&this.scrollTargets[r]==u?r++:o||(o=this.scrollTargets.slice(0,r)),o&&o.push(u),u=u.assignedSlot||u.parentNode;else if(u.nodeType==11)u=u.host;else break;if(r<this.scrollTargets.length&&!o&&(o=this.scrollTargets.slice(0,r)),o){for(let u of this.scrollTargets)u.removeEventListener("scroll",this.onScroll);for(let u of this.scrollTargets=o)u.addEventListener("scroll",this.onScroll)}}ignore(r){if(!this.active)return r();try{return this.stop(),r()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,observeOptions),useCharData&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),useCharData&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(r,o){var u;if(!this.delayedAndroidKey){let g=()=>{let k=this.delayedAndroidKey;k&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=k.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&k.force&&dispatchKey(this.dom,k.key,k.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(g)}(!this.delayedAndroidKey||r=="Enter")&&(this.delayedAndroidKey={key:r,keyCode:o,force:this.lastChange<Date.now()-50||!!(!((u=this.delayedAndroidKey)===null||u===void 0)&&u.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let r of this.observer.takeRecords())this.queue.push(r);return this.queue}processRecords(){let r=this.pendingRecords();r.length&&(this.queue=[]);let o=-1,u=-1,g=!1;for(let k of r){let A=this.readMutation(k);A&&(A.typeOver&&(g=!0),o==-1?{from:o,to:u}=A:(o=Math.min(A.from,o),u=Math.max(A.to,u)))}return{from:o,to:u,typeOver:g}}readChange(){let{from:r,to:o,typeOver:u}=this.processRecords(),g=this.selectionChanged&&hasSelection(this.dom,this.selectionRange);if(r<0&&!g)return null;r>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let k=new DOMChange(this.view,r,o,u);return this.view.docView.domChanged={newSel:k.newSel?k.newSel.main:null},k}flush(r=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;r&&this.readSelectionRange();let o=this.readChange();if(!o)return this.view.requestMeasure(),!1;let u=this.view.state,g=applyDOMChange(this.view,o);return this.view.state==u&&(o.domChanged||o.newSel&&!o.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),g}readMutation(r){let o=this.view.docView.nearest(r.target);if(!o||o.ignoreMutation(r))return null;if(o.markDirty(r.type=="attributes"),r.type=="attributes"&&(o.flags|=4),r.type=="childList"){let u=findChild(o,r.previousSibling||r.target.previousSibling,-1),g=findChild(o,r.nextSibling||r.target.nextSibling,1);return{from:u?o.posAfter(u):o.posAtStart,to:g?o.posBefore(g):o.posAtEnd,typeOver:!1}}else return r.type=="characterData"?{from:o.posAtStart,to:o.posAtEnd,typeOver:r.target.nodeValue==r.oldValue}:null}setWindow(r){r!=this.win&&(this.removeWindowListeners(this.win),this.win=r,this.addWindowListeners(this.win))}addWindowListeners(r){r.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):r.addEventListener("beforeprint",this.onPrint),r.addEventListener("scroll",this.onScroll),r.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(r){r.removeEventListener("scroll",this.onScroll),r.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):r.removeEventListener("beforeprint",this.onPrint),r.document.removeEventListener("selectionchange",this.onSelectionChange)}update(r){this.editContext&&(this.editContext.update(r),r.startState.facet(editable)!=r.state.facet(editable)&&(r.view.contentDOM.editContext=r.state.facet(editable)?this.editContext.editContext:null))}destroy(){var r,o,u;this.stop(),(r=this.intersection)===null||r===void 0||r.disconnect(),(o=this.gapIntersection)===null||o===void 0||o.disconnect(),(u=this.resizeScroll)===null||u===void 0||u.disconnect();for(let g of this.scrollTargets)g.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function findChild(h,r,o){for(;r;){let u=ContentView.get(r);if(u&&u.parent==h)return u;let g=r.parentNode;r=g!=h.dom?g:o>0?r.nextSibling:r.previousSibling}return null}function buildSelectionRangeFromRange(h,r){let o=r.startContainer,u=r.startOffset,g=r.endContainer,k=r.endOffset,A=h.docView.domAtPos(h.state.selection.main.anchor);return isEquivalentPosition(A.node,A.offset,g,k)&&([o,u,g,k]=[g,k,o,u]),{anchorNode:o,anchorOffset:u,focusNode:g,focusOffset:k}}function safariSelectionRangeHack(h,r){if(r.getComposedRanges){let g=r.getComposedRanges(h.root)[0];if(g)return buildSelectionRangeFromRange(h,g)}let o=null;function u(g){g.preventDefault(),g.stopImmediatePropagation(),o=g.getTargetRanges()[0]}return h.contentDOM.addEventListener("beforeinput",u,!0),h.dom.ownerDocument.execCommand("indent"),h.contentDOM.removeEventListener("beforeinput",u,!0),o?buildSelectionRangeFromRange(h,o):null}class EditContextManager{constructor(r){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(r.state);let o=this.editContext=new window.EditContext({text:r.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,r.state.selection.main.anchor))),selectionEnd:this.toContextPos(r.state.selection.main.head)});this.handlers.textupdate=u=>{let g=r.state.selection.main,{anchor:k,head:A}=g,R=this.toEditorPos(u.updateRangeStart),q=this.toEditorPos(u.updateRangeEnd);r.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:u.updateRangeStart,editorBase:R,drifted:!1});let _=q-R>u.text.length;R==this.from&&k<this.from?R=k:q==this.to&&k>this.to&&(q=k);let ee=findDiff(r.state.sliceDoc(R,q),u.text,(_?g.from:g.to)-R,_?"end":null);if(!ee){let ne=EditorSelection.single(this.toEditorPos(u.selectionStart),this.toEditorPos(u.selectionEnd));ne.main.eq(g)||r.dispatch({selection:ne,userEvent:"select"});return}let te={from:ee.from+R,to:ee.toA+R,insert:Text.of(u.text.slice(ee.from,ee.toB).split(`
`))};if((browser.mac||browser.android)&&te.from==A-1&&/^\. ?$/.test(u.text)&&r.contentDOM.getAttribute("autocorrect")=="off"&&(te={from:R,to:q,insert:Text.of([u.text.replace("."," ")])}),this.pendingContextChange=te,!r.state.readOnly){let ne=this.to-this.from+(te.to-te.from+te.insert.length);applyDOMChangeInner(r,te,EditorSelection.single(this.toEditorPos(u.selectionStart,ne),this.toEditorPos(u.selectionEnd,ne)))}this.pendingContextChange&&(this.revertPending(r.state),this.setSelection(r.state)),te.from<te.to&&!te.insert.length&&r.inputState.composing>=0&&!/[\\p{Alphabetic}\\p{Number}_]/.test(o.text.slice(Math.max(0,u.updateRangeStart-1),Math.min(o.text.length,u.updateRangeStart+1)))&&this.handlers.compositionend(u)},this.handlers.characterboundsupdate=u=>{let g=[],k=null;for(let A=this.toEditorPos(u.rangeStart),R=this.toEditorPos(u.rangeEnd);A<R;A++){let q=r.coordsForChar(A);k=q&&new DOMRect(q.left,q.top,q.right-q.left,q.bottom-q.top)||k||new DOMRect,g.push(k)}o.updateCharacterBounds(u.rangeStart,g)},this.handlers.textformatupdate=u=>{let g=[];for(let k of u.getTextFormats()){let A=k.underlineStyle,R=k.underlineThickness;if(!/none/i.test(A)&&!/none/i.test(R)){let q=this.toEditorPos(k.rangeStart),_=this.toEditorPos(k.rangeEnd);if(q<_){let ee=`text-decoration: underline ${/^[a-z]/.test(A)?A+" ":A=="Dashed"?"dashed ":A=="Squiggle"?"wavy ":""}${/thin/i.test(R)?1:2}px`;g.push(Decoration.mark({attributes:{style:ee}}).range(q,_))}}}r.dispatch({effects:setEditContextFormatting.of(Decoration.set(g))})},this.handlers.compositionstart=()=>{r.inputState.composing<0&&(r.inputState.composing=0,r.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(r.inputState.composing=-1,r.inputState.compositionFirstChange=null,this.composing){let{drifted:u}=this.composing;this.composing=null,u&&this.reset(r.state)}};for(let u in this.handlers)o.addEventListener(u,this.handlers[u]);this.measureReq={read:u=>{this.editContext.updateControlBounds(u.contentDOM.getBoundingClientRect());let g=getSelection(u.root);g&&g.rangeCount&&this.editContext.updateSelectionBounds(g.getRangeAt(0).getBoundingClientRect())}}}applyEdits(r){let o=0,u=!1,g=this.pendingContextChange;return r.changes.iterChanges((k,A,R,q,_)=>{if(u)return;let ee=_.length-(A-k);if(g&&A>=g.to)if(g.from==k&&g.to==A&&g.insert.eq(_)){g=this.pendingContextChange=null,o+=ee,this.to+=ee;return}else g=null,this.revertPending(r.state);if(k+=o,A+=o,A<=this.from)this.from+=ee,this.to+=ee;else if(k<this.to){if(k<this.from||A>this.to||this.to-this.from+_.length>3e4){u=!0;return}this.editContext.updateText(this.toContextPos(k),this.toContextPos(A),_.toString()),this.to+=ee}o+=ee}),g&&!u&&this.revertPending(r.state),!u}update(r){let o=this.pendingContextChange,u=r.startState.selection.main;this.composing&&(this.composing.drifted||!r.changes.touchesRange(u.from,u.to)&&r.transactions.some(g=>!g.isUserEvent("input.type")&&g.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=r.changes.mapPos(this.composing.editorBase)):!this.applyEdits(r)||!this.rangeIsValid(r.state)?(this.pendingContextChange=null,this.reset(r.state)):(r.docChanged||r.selectionSet||o)&&this.setSelection(r.state),(r.geometryChanged||r.docChanged||r.selectionSet)&&r.view.requestMeasure(this.measureReq)}resetRange(r){let{head:o}=r.selection.main;this.from=Math.max(0,o-1e4),this.to=Math.min(r.doc.length,o+1e4)}reset(r){this.resetRange(r),this.editContext.updateText(0,this.editContext.text.length,r.doc.sliceString(this.from,this.to)),this.setSelection(r)}revertPending(r){let o=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(o.from),this.toContextPos(o.from+o.insert.length),r.doc.sliceString(o.from,o.to))}setSelection(r){let{main:o}=r.selection,u=this.toContextPos(Math.max(this.from,Math.min(this.to,o.anchor))),g=this.toContextPos(o.head);(this.editContext.selectionStart!=u||this.editContext.selectionEnd!=g)&&this.editContext.updateSelection(u,g)}rangeIsValid(r){let{head:o}=r.selection.main;return!(this.from>0&&o-this.from<500||this.to<r.doc.length&&this.to-o<500||this.to-this.from>1e4*3)}toEditorPos(r,o=this.to-this.from){r=Math.min(r,o);let u=this.composing;return u&&u.drifted?u.editorBase+(r-u.contextBase):r+this.from}toContextPos(r){let o=this.composing;return o&&o.drifted?o.contextBase+(r-o.editorBase):r-this.from}destroy(){for(let r in this.handlers)this.editContext.removeEventListener(r,this.handlers[r])}}class EditorView{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(r={}){var o;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),r.parent&&r.parent.appendChild(this.dom);let{dispatch:u}=r;this.dispatchTransactions=r.dispatchTransactions||u&&(g=>g.forEach(k=>u(k,this)))||(g=>this.update(g)),this.dispatch=this.dispatch.bind(this),this._root=r.root||getRoot(r.parent)||document,this.viewState=new ViewState(r.state||EditorState.create(r)),r.scrollTo&&r.scrollTo.is(scrollIntoView$1)&&(this.viewState.scrollTarget=r.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(viewPlugin).map(g=>new PluginInstance(g));for(let g of this.plugins)g.update(this);this.observer=new DOMObserver(this),this.inputState=new InputState(this),this.inputState.ensureHandlers(this.plugins),this.docView=new DocView(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((o=document.fonts)===null||o===void 0)&&o.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...r){let o=r.length==1&&r[0]instanceof Transaction?r:r.length==1&&Array.isArray(r[0])?r[0]:[this.state.update(...r)];this.dispatchTransactions(o,this)}update(r){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let o=!1,u=!1,g,k=this.state;for(let ne of r){if(ne.startState!=k)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");k=ne.state}if(this.destroyed){this.viewState.state=k;return}let A=this.hasFocus,R=0,q=null;r.some(ne=>ne.annotation(isFocusChange))?(this.inputState.notifiedFocused=A,R=1):A!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=A,q=focusChangeTransaction(k,A),q||(R=1));let _=this.observer.delayedAndroidKey,ee=null;if(_?(this.observer.clearDelayedAndroidKey(),ee=this.observer.readChange(),(ee&&!this.state.doc.eq(k.doc)||!this.state.selection.eq(k.selection))&&(ee=null)):this.observer.clear(),k.facet(EditorState.phrases)!=this.state.facet(EditorState.phrases))return this.setState(k);g=ViewUpdate.create(this,k,r),g.flags|=R;let te=this.viewState.scrollTarget;try{this.updateState=2;for(let ne of r){if(te&&(te=te.map(ne.changes)),ne.scrollIntoView){let{main:re}=ne.state.selection;te=new ScrollTarget(re.empty?re:EditorSelection.cursor(re.head,re.head>re.anchor?-1:1))}for(let re of ne.effects)re.is(scrollIntoView$1)&&(te=re.value.clip(this.state))}this.viewState.update(g,te),this.bidiCache=CachedOrder.update(this.bidiCache,g.changes),g.empty||(this.updatePlugins(g),this.inputState.update(g)),o=this.docView.update(g),this.state.facet(styleModule)!=this.styleModules&&this.mountStyles(),u=this.updateAttrs(),this.showAnnouncements(r),this.docView.updateSelection(o,r.some(ne=>ne.isUserEvent("select.pointer")))}finally{this.updateState=0}if(g.startState.facet(theme)!=g.state.facet(theme)&&(this.viewState.mustMeasureContent=!0),(o||u||te||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),o&&this.docViewUpdate(),!g.empty)for(let ne of this.state.facet(updateListener))try{ne(g)}catch(re){logException(this.state,re,"update listener")}(q||ee)&&Promise.resolve().then(()=>{q&&this.state==q.startState&&this.dispatch(q),ee&&!applyDOMChange(this,ee)&&_.force&&dispatchKey(this.contentDOM,_.key,_.keyCode)})}setState(r){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=r;return}this.updateState=2;let o=this.hasFocus;try{for(let u of this.plugins)u.destroy(this);this.viewState=new ViewState(r),this.plugins=r.facet(viewPlugin).map(u=>new PluginInstance(u)),this.pluginMap.clear();for(let u of this.plugins)u.update(this);this.docView.destroy(),this.docView=new DocView(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}o&&this.focus(),this.requestMeasure()}updatePlugins(r){let o=r.startState.facet(viewPlugin),u=r.state.facet(viewPlugin);if(o!=u){let g=[];for(let k of u){let A=o.indexOf(k);if(A<0)g.push(new PluginInstance(k));else{let R=this.plugins[A];R.mustUpdate=r,g.push(R)}}for(let k of this.plugins)k.mustUpdate!=r&&k.destroy(this);this.plugins=g,this.pluginMap.clear()}else for(let g of this.plugins)g.mustUpdate=r;for(let g=0;g<this.plugins.length;g++)this.plugins[g].update(this);o!=u&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let r of this.plugins){let o=r.value;if(o&&o.docViewUpdate)try{o.docViewUpdate(this)}catch(u){logException(this.state,u,"doc view update listener")}}}measure(r=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,r&&this.observer.forceFlush();let o=null,u=this.scrollDOM,g=u.scrollTop*this.scaleY,{scrollAnchorPos:k,scrollAnchorHeight:A}=this.viewState;Math.abs(g-this.viewState.scrollTop)>1&&(A=-1),this.viewState.scrollAnchorHeight=-1;try{for(let R=0;;R++){if(A<0)if(isScrolledToBottom(u))k=-1,A=this.viewState.heightMap.height;else{let re=this.viewState.scrollAnchorAt(g);k=re.from,A=re.top}this.updateState=1;let q=this.viewState.measure(this);if(!q&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(R>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let _=[];q&4||([this.measureRequests,_]=[_,this.measureRequests]);let ee=_.map(re=>{try{return re.read(this)}catch(oe){return logException(this.state,oe),BadMeasure}}),te=ViewUpdate.create(this,this.state,[]),ne=!1;te.flags|=q,o?o.flags|=q:o=te,this.updateState=2,te.empty||(this.updatePlugins(te),this.inputState.update(te),this.updateAttrs(),ne=this.docView.update(te),ne&&this.docViewUpdate());for(let re=0;re<_.length;re++)if(ee[re]!=BadMeasure)try{let oe=_[re];oe.write&&oe.write(ee[re],this)}catch(oe){logException(this.state,oe)}if(ne&&this.docView.updateSelection(!0),!te.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,A=-1;continue}else{let oe=(k<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(k).top)-A;if(oe>1||oe<-1){g=g+oe,u.scrollTop=g/this.scaleY,A=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(o&&!o.empty)for(let R of this.state.facet(updateListener))R(o)}get themeClasses(){return baseThemeID+" "+(this.state.facet(darkTheme)?baseDarkID:baseLightID)+" "+this.state.facet(theme)}updateAttrs(){let r=attrsFromFacet(this,editorAttributes,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),o={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(editable)?"true":"false",class:"cm-content",style:`${browser.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(o["aria-readonly"]="true"),attrsFromFacet(this,contentAttributes,o);let u=this.observer.ignore(()=>{let g=updateAttrs(this.contentDOM,this.contentAttrs,o),k=updateAttrs(this.dom,this.editorAttrs,r);return g||k});return this.editorAttrs=r,this.contentAttrs=o,u}showAnnouncements(r){let o=!0;for(let u of r)for(let g of u.effects)if(g.is(EditorView.announce)){o&&(this.announceDOM.textContent=""),o=!1;let k=this.announceDOM.appendChild(document.createElement("div"));k.textContent=g.value}}mountStyles(){this.styleModules=this.state.facet(styleModule);let r=this.state.facet(EditorView.cspNonce);StyleModule.mount(this.root,this.styleModules.concat(baseTheme$1$3).reverse(),r?{nonce:r}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(r){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),r){if(this.measureRequests.indexOf(r)>-1)return;if(r.key!=null){for(let o=0;o<this.measureRequests.length;o++)if(this.measureRequests[o].key===r.key){this.measureRequests[o]=r;return}}this.measureRequests.push(r)}}plugin(r){let o=this.pluginMap.get(r);return(o===void 0||o&&o.plugin!=r)&&this.pluginMap.set(r,o=this.plugins.find(u=>u.plugin==r)||null),o&&o.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(r){return this.readMeasured(),this.viewState.elementAtHeight(r)}lineBlockAtHeight(r){return this.readMeasured(),this.viewState.lineBlockAtHeight(r)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(r){return this.viewState.lineBlockAt(r)}get contentHeight(){return this.viewState.contentHeight}moveByChar(r,o,u){return skipAtoms(this,r,moveByChar(this,r,o,u))}moveByGroup(r,o){return skipAtoms(this,r,moveByChar(this,r,o,u=>byGroup(this,r.head,u)))}visualLineSide(r,o){let u=this.bidiSpans(r),g=this.textDirectionAt(r.from),k=u[o?u.length-1:0];return EditorSelection.cursor(k.side(o,g)+r.from,k.forward(!o,g)?1:-1)}moveToLineBoundary(r,o,u=!0){return moveToLineBoundary(this,r,o,u)}moveVertically(r,o,u){return skipAtoms(this,r,moveVertically(this,r,o,u))}domAtPos(r){return this.docView.domAtPos(r)}posAtDOM(r,o=0){return this.docView.posFromDOM(r,o)}posAtCoords(r,o=!0){return this.readMeasured(),posAtCoords(this,r,o)}coordsAtPos(r,o=1){this.readMeasured();let u=this.docView.coordsAt(r,o);if(!u||u.left==u.right)return u;let g=this.state.doc.lineAt(r),k=this.bidiSpans(g),A=k[BidiSpan.find(k,r-g.from,-1,o)];return flattenRect(u,A.dir==Direction.LTR==o>0)}coordsForChar(r){return this.readMeasured(),this.docView.coordsForChar(r)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(r){return!this.state.facet(perLineTextDirection)||r<this.viewport.from||r>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(r))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(r){if(r.length>MaxBidiLine)return trivialOrder(r.length);let o=this.textDirectionAt(r.from),u;for(let k of this.bidiCache)if(k.from==r.from&&k.dir==o&&(k.fresh||isolatesEq(k.isolates,u=getIsolatedRanges(this,r))))return k.order;u||(u=getIsolatedRanges(this,r));let g=computeOrder(r.text,o,u);return this.bidiCache.push(new CachedOrder(r.from,r.to,o,u,!0,g)),g}get hasFocus(){var r;return(this.dom.ownerDocument.hasFocus()||browser.safari&&((r=this.inputState)===null||r===void 0?void 0:r.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{focusPreventScroll(this.contentDOM),this.docView.updateSelection()})}setRoot(r){this._root!=r&&(this._root=r,this.observer.setWindow((r.nodeType==9?r:r.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let r of this.plugins)r.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(r,o={}){return scrollIntoView$1.of(new ScrollTarget(typeof r=="number"?EditorSelection.cursor(r):r,o.y,o.x,o.yMargin,o.xMargin))}scrollSnapshot(){let{scrollTop:r,scrollLeft:o}=this.scrollDOM,u=this.viewState.scrollAnchorAt(r);return scrollIntoView$1.of(new ScrollTarget(EditorSelection.cursor(u.from),"start","start",u.top-r,o,!0))}setTabFocusMode(r){r==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof r=="boolean"?this.inputState.tabFocusMode=r?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+r)}static domEventHandlers(r){return ViewPlugin.define(()=>({}),{eventHandlers:r})}static domEventObservers(r){return ViewPlugin.define(()=>({}),{eventObservers:r})}static theme(r,o){let u=StyleModule.newName(),g=[theme.of(u),styleModule.of(buildTheme(`.${u}`,r))];return o&&o.dark&&g.push(darkTheme.of(!0)),g}static baseTheme(r){return Prec.lowest(styleModule.of(buildTheme("."+baseThemeID,r,lightDarkIDs)))}static findFromDOM(r){var o;let u=r.querySelector(".cm-content"),g=u&&ContentView.get(u)||ContentView.get(r);return((o=g==null?void 0:g.rootView)===null||o===void 0?void 0:o.view)||null}}EditorView.styleModule=styleModule;EditorView.inputHandler=inputHandler$1;EditorView.clipboardInputFilter=clipboardInputFilter;EditorView.clipboardOutputFilter=clipboardOutputFilter;EditorView.scrollHandler=scrollHandler;EditorView.focusChangeEffect=focusChangeEffect;EditorView.perLineTextDirection=perLineTextDirection;EditorView.exceptionSink=exceptionSink;EditorView.updateListener=updateListener;EditorView.editable=editable;EditorView.mouseSelectionStyle=mouseSelectionStyle;EditorView.dragMovesSelection=dragMovesSelection$1;EditorView.clickAddsSelectionRange=clickAddsSelectionRange;EditorView.decorations=decorations;EditorView.outerDecorations=outerDecorations;EditorView.atomicRanges=atomicRanges;EditorView.bidiIsolatedRanges=bidiIsolatedRanges;EditorView.scrollMargins=scrollMargins;EditorView.darkTheme=darkTheme;EditorView.cspNonce=Facet.define({combine:h=>h.length?h[0]:""});EditorView.contentAttributes=contentAttributes;EditorView.editorAttributes=editorAttributes;EditorView.lineWrapping=EditorView.contentAttributes.of({class:"cm-lineWrapping"});EditorView.announce=StateEffect.define();const MaxBidiLine=4096,BadMeasure={};class CachedOrder{constructor(r,o,u,g,k,A){this.from=r,this.to=o,this.dir=u,this.isolates=g,this.fresh=k,this.order=A}static update(r,o){if(o.empty&&!r.some(k=>k.fresh))return r;let u=[],g=r.length?r[r.length-1].dir:Direction.LTR;for(let k=Math.max(0,r.length-10);k<r.length;k++){let A=r[k];A.dir==g&&!o.touchesRange(A.from,A.to)&&u.push(new CachedOrder(o.mapPos(A.from,1),o.mapPos(A.to,-1),A.dir,A.isolates,!1,A.order))}return u}}function attrsFromFacet(h,r,o){for(let u=h.state.facet(r),g=u.length-1;g>=0;g--){let k=u[g],A=typeof k=="function"?k(h):k;A&&combineAttrs(A,o)}return o}const currentPlatform=browser.mac?"mac":browser.windows?"win":browser.linux?"linux":"key";function normalizeKeyName(h,r){const o=h.split(/-(?!$)/);let u=o[o.length-1];u=="Space"&&(u=" ");let g,k,A,R;for(let q=0;q<o.length-1;++q){const _=o[q];if(/^(cmd|meta|m)$/i.test(_))R=!0;else if(/^a(lt)?$/i.test(_))g=!0;else if(/^(c|ctrl|control)$/i.test(_))k=!0;else if(/^s(hift)?$/i.test(_))A=!0;else if(/^mod$/i.test(_))r=="mac"?R=!0:k=!0;else throw new Error("Unrecognized modifier name: "+_)}return g&&(u="Alt-"+u),k&&(u="Ctrl-"+u),R&&(u="Meta-"+u),A&&(u="Shift-"+u),u}function modifiers(h,r,o){return r.altKey&&(h="Alt-"+h),r.ctrlKey&&(h="Ctrl-"+h),r.metaKey&&(h="Meta-"+h),o!==!1&&r.shiftKey&&(h="Shift-"+h),h}const handleKeyEvents=Prec.default(EditorView.domEventHandlers({keydown(h,r){return runHandlers(getKeymap(r.state),h,r,"editor")}})),keymap=Facet.define({enables:handleKeyEvents}),Keymaps=new WeakMap;function getKeymap(h){let r=h.facet(keymap),o=Keymaps.get(r);return o||Keymaps.set(r,o=buildKeymap(r.reduce((u,g)=>u.concat(g),[]))),o}function runScopeHandlers(h,r,o){return runHandlers(getKeymap(h.state),r,h,o)}let storedPrefix=null;const PrefixTimeout=4e3;function buildKeymap(h,r=currentPlatform){let o=Object.create(null),u=Object.create(null),g=(A,R)=>{let q=u[A];if(q==null)u[A]=R;else if(q!=R)throw new Error("Key binding "+A+" is used both as a regular binding and as a multi-stroke prefix")},k=(A,R,q,_,ee)=>{var te,ne;let re=o[A]||(o[A]=Object.create(null)),oe=R.split(/ (?!$)/).map(de=>normalizeKeyName(de,r));for(let de=1;de<oe.length;de++){let he=oe.slice(0,de).join(" ");g(he,!0),re[he]||(re[he]={preventDefault:!0,stopPropagation:!1,run:[ae=>{let se=storedPrefix={view:ae,prefix:he,scope:A};return setTimeout(()=>{storedPrefix==se&&(storedPrefix=null)},PrefixTimeout),!0}]})}let le=oe.join(" ");g(le,!1);let pe=re[le]||(re[le]={preventDefault:!1,stopPropagation:!1,run:((ne=(te=re._any)===null||te===void 0?void 0:te.run)===null||ne===void 0?void 0:ne.slice())||[]});q&&pe.run.push(q),_&&(pe.preventDefault=!0),ee&&(pe.stopPropagation=!0)};for(let A of h){let R=A.scope?A.scope.split(" "):["editor"];if(A.any)for(let _ of R){let ee=o[_]||(o[_]=Object.create(null));ee._any||(ee._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:te}=A;for(let ne in ee)ee[ne].run.push(re=>te(re,currentKeyEvent))}let q=A[r]||A.key;if(q)for(let _ of R)k(_,q,A.run,A.preventDefault,A.stopPropagation),A.shift&&k(_,"Shift-"+q,A.shift,A.preventDefault,A.stopPropagation)}return o}let currentKeyEvent=null;function runHandlers(h,r,o,u){currentKeyEvent=r;let g=keyName(r),k=codePointAt(g,0),A=codePointSize(k)==g.length&&g!=" ",R="",q=!1,_=!1,ee=!1;storedPrefix&&storedPrefix.view==o&&storedPrefix.scope==u&&(R=storedPrefix.prefix+" ",modifierCodes.indexOf(r.keyCode)<0&&(_=!0,storedPrefix=null));let te=new Set,ne=pe=>{if(pe){for(let de of pe.run)if(!te.has(de)&&(te.add(de),de(o)))return pe.stopPropagation&&(ee=!0),!0;pe.preventDefault&&(pe.stopPropagation&&(ee=!0),_=!0)}return!1},re=h[u],oe,le;return re&&(ne(re[R+modifiers(g,r,!A)])?q=!0:A&&(r.altKey||r.metaKey||r.ctrlKey)&&!(browser.windows&&r.ctrlKey&&r.altKey)&&!(browser.mac&&r.altKey&&!(r.ctrlKey||r.metaKey))&&(oe=base[r.keyCode])&&oe!=g?(ne(re[R+modifiers(oe,r,!0)])||r.shiftKey&&(le=shift[r.keyCode])!=g&&le!=oe&&ne(re[R+modifiers(le,r,!1)]))&&(q=!0):A&&r.shiftKey&&ne(re[R+modifiers(g,r,!0)])&&(q=!0),!q&&ne(re._any)&&(q=!0)),_&&(q=!0),q&&ee&&r.stopPropagation(),currentKeyEvent=null,q}class RectangleMarker{constructor(r,o,u,g,k){this.className=r,this.left=o,this.top=u,this.width=g,this.height=k}draw(){let r=document.createElement("div");return r.className=this.className,this.adjust(r),r}update(r,o){return o.className!=this.className?!1:(this.adjust(r),!0)}adjust(r){r.style.left=this.left+"px",r.style.top=this.top+"px",this.width!=null&&(r.style.width=this.width+"px"),r.style.height=this.height+"px"}eq(r){return this.left==r.left&&this.top==r.top&&this.width==r.width&&this.height==r.height&&this.className==r.className}static forRange(r,o,u){if(u.empty){let g=r.coordsAtPos(u.head,u.assoc||1);if(!g)return[];let k=getBase(r);return[new RectangleMarker(o,g.left-k.left,g.top-k.top,null,g.bottom-g.top)]}else return rectanglesForRange(r,o,u)}}function getBase(h){let r=h.scrollDOM.getBoundingClientRect();return{left:(h.textDirection==Direction.LTR?r.left:r.right-h.scrollDOM.clientWidth*h.scaleX)-h.scrollDOM.scrollLeft*h.scaleX,top:r.top-h.scrollDOM.scrollTop*h.scaleY}}function wrappedLine(h,r,o,u){let g=h.coordsAtPos(r,o*2);if(!g)return u;let k=h.dom.getBoundingClientRect(),A=(g.top+g.bottom)/2,R=h.posAtCoords({x:k.left+1,y:A}),q=h.posAtCoords({x:k.right-1,y:A});return R==null||q==null?u:{from:Math.max(u.from,Math.min(R,q)),to:Math.min(u.to,Math.max(R,q))}}function rectanglesForRange(h,r,o){if(o.to<=h.viewport.from||o.from>=h.viewport.to)return[];let u=Math.max(o.from,h.viewport.from),g=Math.min(o.to,h.viewport.to),k=h.textDirection==Direction.LTR,A=h.contentDOM,R=A.getBoundingClientRect(),q=getBase(h),_=A.querySelector(".cm-line"),ee=_&&window.getComputedStyle(_),te=R.left+(ee?parseInt(ee.paddingLeft)+Math.min(0,parseInt(ee.textIndent)):0),ne=R.right-(ee?parseInt(ee.paddingRight):0),re=blockAt(h,u,1),oe=blockAt(h,g,-1),le=re.type==BlockType.Text?re:null,pe=oe.type==BlockType.Text?oe:null;if(le&&(h.lineWrapping||re.widgetLineBreaks)&&(le=wrappedLine(h,u,1,le)),pe&&(h.lineWrapping||oe.widgetLineBreaks)&&(pe=wrappedLine(h,g,-1,pe)),le&&pe&&le.from==pe.from&&le.to==pe.to)return he(ae(o.from,o.to,le));{let ce=le?ae(o.from,null,le):se(re,!1),fe=pe?ae(null,o.to,pe):se(oe,!0),ue=[];return(le||re).to<(pe||oe).from-(le&&pe?1:0)||re.widgetLineBreaks>1&&ce.bottom+h.defaultLineHeight/2<fe.top?ue.push(de(te,ce.bottom,ne,fe.top)):ce.bottom<fe.top&&h.elementAtHeight((ce.bottom+fe.top)/2).type==BlockType.Text&&(ce.bottom=fe.top=(ce.bottom+fe.top)/2),he(ce).concat(ue).concat(he(fe))}function de(ce,fe,ue,Oe){return new RectangleMarker(r,ce-q.left,fe-q.top,ue-ce,Oe-fe)}function he({top:ce,bottom:fe,horizontal:ue}){let Oe=[];for(let be=0;be<ue.length;be+=2)Oe.push(de(ue[be],ce,ue[be+1],fe));return Oe}function ae(ce,fe,ue){let Oe=1e9,be=-1e9,xe=[];function Se(Te,Ee,$e,Pe,Me){let Ve=h.coordsAtPos(Te,Te==ue.to?-2:2),je=h.coordsAtPos($e,$e==ue.from?2:-2);!Ve||!je||(Oe=Math.min(Ve.top,je.top,Oe),be=Math.max(Ve.bottom,je.bottom,be),Me==Direction.LTR?xe.push(k&&Ee?te:Ve.left,k&&Pe?ne:je.right):xe.push(!k&&Pe?te:je.left,!k&&Ee?ne:Ve.right))}let ke=ce??ue.from,we=fe??ue.to;for(let Te of h.visibleRanges)if(Te.to>ke&&Te.from<we)for(let Ee=Math.max(Te.from,ke),$e=Math.min(Te.to,we);;){let Pe=h.state.doc.lineAt(Ee);for(let Me of h.bidiSpans(Pe)){let Ve=Me.from+Pe.from,je=Me.to+Pe.from;if(Ve>=$e)break;je>Ee&&Se(Math.max(Ve,Ee),ce==null&&Ve<=ke,Math.min(je,$e),fe==null&&je>=we,Me.dir)}if(Ee=Pe.to+1,Ee>=$e)break}return xe.length==0&&Se(ke,ce==null,we,fe==null,h.textDirection),{top:Oe,bottom:be,horizontal:xe}}function se(ce,fe){let ue=R.top+(fe?ce.top:ce.bottom);return{top:ue,bottom:ue,horizontal:[]}}}function sameMarker(h,r){return h.constructor==r.constructor&&h.eq(r)}class LayerView{constructor(r,o){this.view=r,this.layer=o,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=r.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),o.above&&this.dom.classList.add("cm-layer-above"),o.class&&this.dom.classList.add(o.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(r.state),r.requestMeasure(this.measureReq),o.mount&&o.mount(this.dom,r)}update(r){r.startState.facet(layerOrder)!=r.state.facet(layerOrder)&&this.setOrder(r.state),(this.layer.update(r,this.dom)||r.geometryChanged)&&(this.scale(),r.view.requestMeasure(this.measureReq))}docViewUpdate(r){this.layer.updateOnDocViewUpdate!==!1&&r.requestMeasure(this.measureReq)}setOrder(r){let o=0,u=r.facet(layerOrder);for(;o<u.length&&u[o]!=this.layer;)o++;this.dom.style.zIndex=String((this.layer.above?150:-1)-o)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:r,scaleY:o}=this.view;(r!=this.scaleX||o!=this.scaleY)&&(this.scaleX=r,this.scaleY=o,this.dom.style.transform=`scale(${1/r}, ${1/o})`)}draw(r){if(r.length!=this.drawn.length||r.some((o,u)=>!sameMarker(o,this.drawn[u]))){let o=this.dom.firstChild,u=0;for(let g of r)g.update&&o&&g.constructor&&this.drawn[u].constructor&&g.update(o,this.drawn[u])?(o=o.nextSibling,u++):this.dom.insertBefore(g.draw(),o);for(;o;){let g=o.nextSibling;o.remove(),o=g}this.drawn=r,browser.safari&&browser.safari_version>=26&&(this.dom.style.display=this.dom.firstChild?"":"none")}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const layerOrder=Facet.define();function layer(h){return[ViewPlugin.define(r=>new LayerView(r,h)),layerOrder.of(h)]}const selectionConfig=Facet.define({combine(h){return combineConfig(h,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(r,o)=>Math.min(r,o),drawRangeCursor:(r,o)=>r||o})}});function drawSelection(h={}){return[selectionConfig.of(h),cursorLayer,selectionLayer,hideNativeSelection,nativeSelectionHidden.of(!0)]}function configChanged(h){return h.startState.facet(selectionConfig)!=h.state.facet(selectionConfig)}const cursorLayer=layer({above:!0,markers(h){let{state:r}=h,o=r.facet(selectionConfig),u=[];for(let g of r.selection.ranges){let k=g==r.selection.main;if(g.empty||o.drawRangeCursor){let A=k?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",R=g.empty?g:EditorSelection.cursor(g.head,g.head>g.anchor?-1:1);for(let q of RectangleMarker.forRange(h,A,R))u.push(q)}}return u},update(h,r){h.transactions.some(u=>u.selection)&&(r.style.animationName=r.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let o=configChanged(h);return o&&setBlinkRate(h.state,r),h.docChanged||h.selectionSet||o},mount(h,r){setBlinkRate(r.state,h)},class:"cm-cursorLayer"});function setBlinkRate(h,r){r.style.animationDuration=h.facet(selectionConfig).cursorBlinkRate+"ms"}const selectionLayer=layer({above:!1,markers(h){return h.state.selection.ranges.map(r=>r.empty?[]:RectangleMarker.forRange(h,"cm-selectionBackground",r)).reduce((r,o)=>r.concat(o))},update(h,r){return h.docChanged||h.selectionSet||h.viewportChanged||configChanged(h)},class:"cm-selectionLayer"}),hideNativeSelection=Prec.highest(EditorView.theme({".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-content":{caretColor:"transparent !important","& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}})),setDropCursorPos=StateEffect.define({map(h,r){return h==null?null:r.mapPos(h)}}),dropCursorPos=StateField.define({create(){return null},update(h,r){return h!=null&&(h=r.changes.mapPos(h)),r.effects.reduce((o,u)=>u.is(setDropCursorPos)?u.value:o,h)}}),drawDropCursor=ViewPlugin.fromClass(class{constructor(h){this.view=h,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(h){var r;let o=h.state.field(dropCursorPos);o==null?this.cursor!=null&&((r=this.cursor)===null||r===void 0||r.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(h.startState.field(dropCursorPos)!=o||h.docChanged||h.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:h}=this,r=h.state.field(dropCursorPos),o=r!=null&&h.coordsAtPos(r);if(!o)return null;let u=h.scrollDOM.getBoundingClientRect();return{left:o.left-u.left+h.scrollDOM.scrollLeft*h.scaleX,top:o.top-u.top+h.scrollDOM.scrollTop*h.scaleY,height:o.bottom-o.top}}drawCursor(h){if(this.cursor){let{scaleX:r,scaleY:o}=this.view;h?(this.cursor.style.left=h.left/r+"px",this.cursor.style.top=h.top/o+"px",this.cursor.style.height=h.height/o+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(h){this.view.state.field(dropCursorPos)!=h&&this.view.dispatch({effects:setDropCursorPos.of(h)})}},{eventObservers:{dragover(h){this.setDropPos(this.view.posAtCoords({x:h.clientX,y:h.clientY}))},dragleave(h){(h.target==this.view.contentDOM||!this.view.contentDOM.contains(h.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function dropCursor(){return[dropCursorPos,drawDropCursor]}function iterMatches(h,r,o,u,g){r.lastIndex=0;for(let k=h.iterRange(o,u),A=o,R;!k.next().done;A+=k.value.length)if(!k.lineBreak)for(;R=r.exec(k.value);)g(A+R.index,R)}function matchRanges(h,r){let o=h.visibleRanges;if(o.length==1&&o[0].from==h.viewport.from&&o[0].to==h.viewport.to)return o;let u=[];for(let{from:g,to:k}of o)g=Math.max(h.state.doc.lineAt(g).from,g-r),k=Math.min(h.state.doc.lineAt(k).to,k+r),u.length&&u[u.length-1].to>=g?u[u.length-1].to=k:u.push({from:g,to:k});return u}class MatchDecorator{constructor(r){const{regexp:o,decoration:u,decorate:g,boundary:k,maxLength:A=1e3}=r;if(!o.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=o,g)this.addMatch=(R,q,_,ee)=>g(ee,_,_+R[0].length,R,q);else if(typeof u=="function")this.addMatch=(R,q,_,ee)=>{let te=u(R,q,_);te&&ee(_,_+R[0].length,te)};else if(u)this.addMatch=(R,q,_,ee)=>ee(_,_+R[0].length,u);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=k,this.maxLength=A}createDeco(r){let o=new RangeSetBuilder,u=o.add.bind(o);for(let{from:g,to:k}of matchRanges(r,this.maxLength))iterMatches(r.state.doc,this.regexp,g,k,(A,R)=>this.addMatch(R,r,A,u));return o.finish()}updateDeco(r,o){let u=1e9,g=-1;return r.docChanged&&r.changes.iterChanges((k,A,R,q)=>{q>=r.view.viewport.from&&R<=r.view.viewport.to&&(u=Math.min(R,u),g=Math.max(q,g))}),r.viewportMoved||g-u>1e3?this.createDeco(r.view):g>-1?this.updateRange(r.view,o.map(r.changes),u,g):o}updateRange(r,o,u,g){for(let k of r.visibleRanges){let A=Math.max(k.from,u),R=Math.min(k.to,g);if(R>=A){let q=r.state.doc.lineAt(A),_=q.to<R?r.state.doc.lineAt(R):q,ee=Math.max(k.from,q.from),te=Math.min(k.to,_.to);if(this.boundary){for(;A>q.from;A--)if(this.boundary.test(q.text[A-1-q.from])){ee=A;break}for(;R<_.to;R++)if(this.boundary.test(_.text[R-_.from])){te=R;break}}let ne=[],re,oe=(le,pe,de)=>ne.push(de.range(le,pe));if(q==_)for(this.regexp.lastIndex=ee-q.from;(re=this.regexp.exec(q.text))&&re.index<te-q.from;)this.addMatch(re,r,re.index+q.from,oe);else iterMatches(r.state.doc,this.regexp,ee,te,(le,pe)=>this.addMatch(pe,r,le,oe));o=o.update({filterFrom:ee,filterTo:te,filter:(le,pe)=>le<ee||pe>te,add:ne})}}return o}}const UnicodeRegexpSupport=/x/.unicode!=null?"gu":"g",Specials=new RegExp(`[\0-\b
--\u2028\u2029\uFEFF-]`,UnicodeRegexpSupport),Names={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let _supportsTabSize=null;function supportsTabSize(){var h;if(_supportsTabSize==null&&typeof document<"u"&&document.body){let r=document.body.style;_supportsTabSize=((h=r.tabSize)!==null&&h!==void 0?h:r.MozTabSize)!=null}return _supportsTabSize||!1}const specialCharConfig=Facet.define({combine(h){let r=combineConfig(h,{render:null,specialChars:Specials,addSpecialChars:null});return(r.replaceTabs=!supportsTabSize())&&(r.specialChars=new RegExp("	|"+r.specialChars.source,UnicodeRegexpSupport)),r.addSpecialChars&&(r.specialChars=new RegExp(r.specialChars.source+"|"+r.addSpecialChars.source,UnicodeRegexpSupport)),r}});function highlightSpecialChars(h={}){return[specialCharConfig.of(h),specialCharPlugin()]}let _plugin=null;function specialCharPlugin(){return _plugin||(_plugin=ViewPlugin.fromClass(class{constructor(h){this.view=h,this.decorations=Decoration.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(h.state.facet(specialCharConfig)),this.decorations=this.decorator.createDeco(h)}makeDecorator(h){return new MatchDecorator({regexp:h.specialChars,decoration:(r,o,u)=>{let{doc:g}=o.state,k=codePointAt(r[0],0);if(k==9){let A=g.lineAt(u),R=o.state.tabSize,q=countColumn(A.text,R,u-A.from);return Decoration.replace({widget:new TabWidget((R-q%R)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[k]||(this.decorationCache[k]=Decoration.replace({widget:new SpecialCharWidget(h,k)}))},boundary:h.replaceTabs?void 0:/[^]/})}update(h){let r=h.state.facet(specialCharConfig);h.startState.facet(specialCharConfig)!=r?(this.decorator=this.makeDecorator(r),this.decorations=this.decorator.createDeco(h.view)):this.decorations=this.decorator.updateDeco(h,this.decorations)}},{decorations:h=>h.decorations}))}const DefaultPlaceholder="";function placeholder$1(h){return h>=32?DefaultPlaceholder:h==10?"":String.fromCharCode(9216+h)}class SpecialCharWidget extends WidgetType{constructor(r,o){super(),this.options=r,this.code=o}eq(r){return r.code==this.code}toDOM(r){let o=placeholder$1(this.code),u=r.state.phrase("Control character")+" "+(Names[this.code]||"0x"+this.code.toString(16)),g=this.options.render&&this.options.render(this.code,u,o);if(g)return g;let k=document.createElement("span");return k.textContent=o,k.title=u,k.setAttribute("aria-label",u),k.className="cm-specialChar",k}ignoreEvent(){return!1}}class TabWidget extends WidgetType{constructor(r){super(),this.width=r}eq(r){return r.width==this.width}toDOM(){let r=document.createElement("span");return r.textContent="	",r.className="cm-tab",r.style.width=this.width+"px",r}ignoreEvent(){return!1}}function highlightActiveLine(){return activeLineHighlighter}const lineDeco=Decoration.line({class:"cm-activeLine"}),activeLineHighlighter=ViewPlugin.fromClass(class{constructor(h){this.decorations=this.getDeco(h)}update(h){(h.docChanged||h.selectionSet)&&(this.decorations=this.getDeco(h.view))}getDeco(h){let r=-1,o=[];for(let u of h.state.selection.ranges){let g=h.lineBlockAt(u.head);g.from>r&&(o.push(lineDeco.range(g.from)),r=g.from)}return Decoration.set(o)}},{decorations:h=>h.decorations}),MaxOff=2e3;function rectangleFor(h,r,o){let u=Math.min(r.line,o.line),g=Math.max(r.line,o.line),k=[];if(r.off>MaxOff||o.off>MaxOff||r.col<0||o.col<0){let A=Math.min(r.off,o.off),R=Math.max(r.off,o.off);for(let q=u;q<=g;q++){let _=h.doc.line(q);_.length<=R&&k.push(EditorSelection.range(_.from+A,_.to+R))}}else{let A=Math.min(r.col,o.col),R=Math.max(r.col,o.col);for(let q=u;q<=g;q++){let _=h.doc.line(q),ee=findColumn(_.text,A,h.tabSize,!0);if(ee<0)k.push(EditorSelection.cursor(_.to));else{let te=findColumn(_.text,R,h.tabSize);k.push(EditorSelection.range(_.from+ee,_.from+te))}}}return k}function absoluteColumn(h,r){let o=h.coordsAtPos(h.viewport.from);return o?Math.round(Math.abs((o.left-r)/h.defaultCharacterWidth)):-1}function getPos(h,r){let o=h.posAtCoords({x:r.clientX,y:r.clientY},!1),u=h.state.doc.lineAt(o),g=o-u.from,k=g>MaxOff?-1:g==u.length?absoluteColumn(h,r.clientX):countColumn(u.text,h.state.tabSize,o-u.from);return{line:u.number,col:k,off:g}}function rectangleSelectionStyle(h,r){let o=getPos(h,r),u=h.state.selection;return o?{update(g){if(g.docChanged){let k=g.changes.mapPos(g.startState.doc.line(o.line).from),A=g.state.doc.lineAt(k);o={line:A.number,col:o.col,off:Math.min(o.off,A.length)},u=u.map(g.changes)}},get(g,k,A){let R=getPos(h,g);if(!R)return u;let q=rectangleFor(h.state,o,R);return q.length?A?EditorSelection.create(q.concat(u.ranges)):EditorSelection.create(q):u}}:null}function rectangularSelection(h){let r=(o=>o.altKey&&o.button==0);return EditorView.mouseSelectionStyle.of((o,u)=>r(u)?rectangleSelectionStyle(o,u):null)}const keys={Alt:[18,h=>!!h.altKey],Control:[17,h=>!!h.ctrlKey],Shift:[16,h=>!!h.shiftKey],Meta:[91,h=>!!h.metaKey]},showCrosshair={style:"cursor: crosshair"};function crosshairCursor(h={}){let[r,o]=keys[h.key||"Alt"],u=ViewPlugin.fromClass(class{constructor(g){this.view=g,this.isDown=!1}set(g){this.isDown!=g&&(this.isDown=g,this.view.update([]))}},{eventObservers:{keydown(g){this.set(g.keyCode==r||o(g))},keyup(g){(g.keyCode==r||!o(g))&&this.set(!1)},mousemove(g){this.set(o(g))}}});return[u,EditorView.contentAttributes.of(g=>{var k;return!((k=g.plugin(u))===null||k===void 0)&&k.isDown?showCrosshair:null})]}const Outside="-10000px";class TooltipViewManager{constructor(r,o,u,g){this.facet=o,this.createTooltipView=u,this.removeTooltipView=g,this.input=r.state.facet(o),this.tooltips=this.input.filter(A=>A);let k=null;this.tooltipViews=this.tooltips.map(A=>k=u(A,k))}update(r,o){var u;let g=r.state.facet(this.facet),k=g.filter(q=>q);if(g===this.input){for(let q of this.tooltipViews)q.update&&q.update(r);return!1}let A=[],R=o?[]:null;for(let q=0;q<k.length;q++){let _=k[q],ee=-1;if(_){for(let te=0;te<this.tooltips.length;te++){let ne=this.tooltips[te];ne&&ne.create==_.create&&(ee=te)}if(ee<0)A[q]=this.createTooltipView(_,q?A[q-1]:null),R&&(R[q]=!!_.above);else{let te=A[q]=this.tooltipViews[ee];R&&(R[q]=o[ee]),te.update&&te.update(r)}}}for(let q of this.tooltipViews)A.indexOf(q)<0&&(this.removeTooltipView(q),(u=q.destroy)===null||u===void 0||u.call(q));return o&&(R.forEach((q,_)=>o[_]=q),o.length=R.length),this.input=g,this.tooltips=k,this.tooltipViews=A,!0}}function windowSpace(h){let r=h.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:r.clientHeight,right:r.clientWidth}}const tooltipConfig=Facet.define({combine:h=>{var r,o,u;return{position:browser.ios?"absolute":((r=h.find(g=>g.position))===null||r===void 0?void 0:r.position)||"fixed",parent:((o=h.find(g=>g.parent))===null||o===void 0?void 0:o.parent)||null,tooltipSpace:((u=h.find(g=>g.tooltipSpace))===null||u===void 0?void 0:u.tooltipSpace)||windowSpace}}}),knownHeight=new WeakMap,tooltipPlugin=ViewPlugin.fromClass(class{constructor(h){this.view=h,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let r=h.state.facet(tooltipConfig);this.position=r.position,this.parent=r.parent,this.classes=h.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new TooltipViewManager(h,showTooltip,(o,u)=>this.createTooltip(o,u),o=>{this.resizeObserver&&this.resizeObserver.unobserve(o.dom),o.dom.remove()}),this.above=this.manager.tooltips.map(o=>!!o.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(o=>{Date.now()>this.lastTransaction-50&&o.length>0&&o[o.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),h.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let h of this.manager.tooltipViews)this.intersectionObserver.observe(h.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(h){h.transactions.length&&(this.lastTransaction=Date.now());let r=this.manager.update(h,this.above);r&&this.observeIntersection();let o=r||h.geometryChanged,u=h.state.facet(tooltipConfig);if(u.position!=this.position&&!this.madeAbsolute){this.position=u.position;for(let g of this.manager.tooltipViews)g.dom.style.position=this.position;o=!0}if(u.parent!=this.parent){this.parent&&this.container.remove(),this.parent=u.parent,this.createContainer();for(let g of this.manager.tooltipViews)this.container.appendChild(g.dom);o=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);o&&this.maybeMeasure()}createTooltip(h,r){let o=h.create(this.view),u=r?r.dom:null;if(o.dom.classList.add("cm-tooltip"),h.arrow&&!o.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let g=document.createElement("div");g.className="cm-tooltip-arrow",o.dom.appendChild(g)}return o.dom.style.position=this.position,o.dom.style.top=Outside,o.dom.style.left="0px",this.container.insertBefore(o.dom,u),o.mount&&o.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(o.dom),o}destroy(){var h,r,o;this.view.win.removeEventListener("resize",this.measureSoon);for(let u of this.manager.tooltipViews)u.dom.remove(),(h=u.destroy)===null||h===void 0||h.call(u);this.parent&&this.container.remove(),(r=this.resizeObserver)===null||r===void 0||r.disconnect(),(o=this.intersectionObserver)===null||o===void 0||o.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let h=1,r=1,o=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:k}=this.manager.tooltipViews[0];if(browser.gecko)o=k.offsetParent!=this.container.ownerDocument.body;else if(k.style.top==Outside&&k.style.left=="0px"){let A=k.getBoundingClientRect();o=Math.abs(A.top+1e4)>1||Math.abs(A.left)>1}}if(o||this.position=="absolute")if(this.parent){let k=this.parent.getBoundingClientRect();k.width&&k.height&&(h=k.width/this.parent.offsetWidth,r=k.height/this.parent.offsetHeight)}else({scaleX:h,scaleY:r}=this.view.viewState);let u=this.view.scrollDOM.getBoundingClientRect(),g=getScrollMargins(this.view);return{visible:{left:u.left+g.left,top:u.top+g.top,right:u.right-g.right,bottom:u.bottom-g.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((k,A)=>{let R=this.manager.tooltipViews[A];return R.getCoords?R.getCoords(k.pos):this.view.coordsAtPos(k.pos)}),size:this.manager.tooltipViews.map(({dom:k})=>k.getBoundingClientRect()),space:this.view.state.facet(tooltipConfig).tooltipSpace(this.view),scaleX:h,scaleY:r,makeAbsolute:o}}writeMeasure(h){var r;if(h.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let R of this.manager.tooltipViews)R.dom.style.position="absolute"}let{visible:o,space:u,scaleX:g,scaleY:k}=h,A=[];for(let R=0;R<this.manager.tooltips.length;R++){let q=this.manager.tooltips[R],_=this.manager.tooltipViews[R],{dom:ee}=_,te=h.pos[R],ne=h.size[R];if(!te||q.clip!==!1&&(te.bottom<=Math.max(o.top,u.top)||te.top>=Math.min(o.bottom,u.bottom)||te.right<Math.max(o.left,u.left)-.1||te.left>Math.min(o.right,u.right)+.1)){ee.style.top=Outside;continue}let re=q.arrow?_.dom.querySelector(".cm-tooltip-arrow"):null,oe=re?7:0,le=ne.right-ne.left,pe=(r=knownHeight.get(_))!==null&&r!==void 0?r:ne.bottom-ne.top,de=_.offset||noOffset,he=this.view.textDirection==Direction.LTR,ae=ne.width>u.right-u.left?he?u.left:u.right-ne.width:he?Math.max(u.left,Math.min(te.left-(re?14:0)+de.x,u.right-le)):Math.min(Math.max(u.left,te.left-le+(re?14:0)-de.x),u.right-le),se=this.above[R];!q.strictSide&&(se?te.top-pe-oe-de.y<u.top:te.bottom+pe+oe+de.y>u.bottom)&&se==u.bottom-te.bottom>te.top-u.top&&(se=this.above[R]=!se);let ce=(se?te.top-u.top:u.bottom-te.bottom)-oe;if(ce<pe&&_.resize!==!1){if(ce<this.view.defaultLineHeight){ee.style.top=Outside;continue}knownHeight.set(_,pe),ee.style.height=(pe=ce)/k+"px"}else ee.style.height&&(ee.style.height="");let fe=se?te.top-pe-oe-de.y:te.bottom+oe+de.y,ue=ae+le;if(_.overlap!==!0)for(let Oe of A)Oe.left<ue&&Oe.right>ae&&Oe.top<fe+pe&&Oe.bottom>fe&&(fe=se?Oe.top-pe-2-oe:Oe.bottom+oe+2);if(this.position=="absolute"?(ee.style.top=(fe-h.parent.top)/k+"px",setLeftStyle(ee,(ae-h.parent.left)/g)):(ee.style.top=fe/k+"px",setLeftStyle(ee,ae/g)),re){let Oe=te.left+(he?de.x:-de.x)-(ae+14-7);re.style.left=Oe/g+"px"}_.overlap!==!0&&A.push({left:ae,top:fe,right:ue,bottom:fe+pe}),ee.classList.toggle("cm-tooltip-above",se),ee.classList.toggle("cm-tooltip-below",!se),_.positioned&&_.positioned(h.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let h of this.manager.tooltipViews)h.dom.style.top=Outside}},{eventObservers:{scroll(){this.maybeMeasure()}}});function setLeftStyle(h,r){let o=parseInt(h.style.left,10);(isNaN(o)||Math.abs(r-o)>1)&&(h.style.left=r+"px")}const baseTheme$4=EditorView.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:"14px",position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),noOffset={x:0,y:0},showTooltip=Facet.define({enables:[tooltipPlugin,baseTheme$4]}),showHoverTooltip=Facet.define({combine:h=>h.reduce((r,o)=>r.concat(o),[])});class HoverTooltipHost{static create(r){return new HoverTooltipHost(r)}constructor(r){this.view=r,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new TooltipViewManager(r,showHoverTooltip,(o,u)=>this.createHostedView(o,u),o=>o.dom.remove())}createHostedView(r,o){let u=r.create(this.view);return u.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(u.dom,o?o.dom.nextSibling:this.dom.firstChild),this.mounted&&u.mount&&u.mount(this.view),u}mount(r){for(let o of this.manager.tooltipViews)o.mount&&o.mount(r);this.mounted=!0}positioned(r){for(let o of this.manager.tooltipViews)o.positioned&&o.positioned(r)}update(r){this.manager.update(r)}destroy(){var r;for(let o of this.manager.tooltipViews)(r=o.destroy)===null||r===void 0||r.call(o)}passProp(r){let o;for(let u of this.manager.tooltipViews){let g=u[r];if(g!==void 0){if(o===void 0)o=g;else if(o!==g)return}}return o}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const showHoverTooltipHost=showTooltip.compute([showHoverTooltip],h=>{let r=h.facet(showHoverTooltip);return r.length===0?null:{pos:Math.min(...r.map(o=>o.pos)),end:Math.max(...r.map(o=>{var u;return(u=o.end)!==null&&u!==void 0?u:o.pos})),create:HoverTooltipHost.create,above:r[0].above,arrow:r.some(o=>o.arrow)}});class HoverPlugin{constructor(r,o,u,g,k){this.view=r,this.source=o,this.field=u,this.setHover=g,this.hoverTime=k,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:r.dom,time:0},this.checkHover=this.checkHover.bind(this),r.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),r.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let r=Date.now()-this.lastMove.time;r<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-r):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:r,lastMove:o}=this,u=r.docView.nearest(o.target);if(!u)return;let g,k=1;if(u instanceof WidgetView)g=u.posAtStart;else{if(g=r.posAtCoords(o),g==null)return;let R=r.coordsAtPos(g);if(!R||o.y<R.top||o.y>R.bottom||o.x<R.left-r.defaultCharacterWidth||o.x>R.right+r.defaultCharacterWidth)return;let q=r.bidiSpans(r.state.doc.lineAt(g)).find(ee=>ee.from<=g&&ee.to>=g),_=q&&q.dir==Direction.RTL?-1:1;k=o.x<R.left?-_:_}let A=this.source(r,g,k);if(A!=null&&A.then){let R=this.pending={pos:g};A.then(q=>{this.pending==R&&(this.pending=null,q&&!(Array.isArray(q)&&!q.length)&&r.dispatch({effects:this.setHover.of(Array.isArray(q)?q:[q])}))},q=>logException(r.state,q,"hover tooltip"))}else A&&!(Array.isArray(A)&&!A.length)&&r.dispatch({effects:this.setHover.of(Array.isArray(A)?A:[A])})}get tooltip(){let r=this.view.plugin(tooltipPlugin),o=r?r.manager.tooltips.findIndex(u=>u.create==HoverTooltipHost.create):-1;return o>-1?r.manager.tooltipViews[o]:null}mousemove(r){var o,u;this.lastMove={x:r.clientX,y:r.clientY,target:r.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:g,tooltip:k}=this;if(g.length&&k&&!isInTooltip(k.dom,r)||this.pending){let{pos:A}=g[0]||this.pending,R=(u=(o=g[0])===null||o===void 0?void 0:o.end)!==null&&u!==void 0?u:A;(A==R?this.view.posAtCoords(this.lastMove)!=A:!isOverRange(this.view,A,R,r.clientX,r.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(r){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:o}=this;if(o.length){let{tooltip:u}=this;u&&u.dom.contains(r.relatedTarget)?this.watchTooltipLeave(u.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(r){let o=u=>{r.removeEventListener("mouseleave",o),this.active.length&&!this.view.dom.contains(u.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};r.addEventListener("mouseleave",o)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const tooltipMargin=4;function isInTooltip(h,r){let{left:o,right:u,top:g,bottom:k}=h.getBoundingClientRect(),A;if(A=h.querySelector(".cm-tooltip-arrow")){let R=A.getBoundingClientRect();g=Math.min(R.top,g),k=Math.max(R.bottom,k)}return r.clientX>=o-tooltipMargin&&r.clientX<=u+tooltipMargin&&r.clientY>=g-tooltipMargin&&r.clientY<=k+tooltipMargin}function isOverRange(h,r,o,u,g,k){let A=h.scrollDOM.getBoundingClientRect(),R=h.documentTop+h.documentPadding.top+h.contentHeight;if(A.left>u||A.right<u||A.top>g||Math.min(A.bottom,R)<g)return!1;let q=h.posAtCoords({x:u,y:g},!1);return q>=r&&q<=o}function hoverTooltip(h,r={}){let o=StateEffect.define(),u=StateField.define({create(){return[]},update(g,k){if(g.length&&(r.hideOnChange&&(k.docChanged||k.selection)?g=[]:r.hideOn&&(g=g.filter(A=>!r.hideOn(k,A))),k.docChanged)){let A=[];for(let R of g){let q=k.changes.mapPos(R.pos,-1,MapMode.TrackDel);if(q!=null){let _=Object.assign(Object.create(null),R);_.pos=q,_.end!=null&&(_.end=k.changes.mapPos(_.end)),A.push(_)}}g=A}for(let A of k.effects)A.is(o)&&(g=A.value),A.is(closeHoverTooltipEffect)&&(g=[]);return g},provide:g=>showHoverTooltip.from(g)});return{active:u,extension:[u,ViewPlugin.define(g=>new HoverPlugin(g,h,u,o,r.hoverTime||300)),showHoverTooltipHost]}}function getTooltip(h,r){let o=h.plugin(tooltipPlugin);if(!o)return null;let u=o.manager.tooltips.indexOf(r);return u<0?null:o.manager.tooltipViews[u]}const closeHoverTooltipEffect=StateEffect.define(),panelConfig=Facet.define({combine(h){let r,o;for(let u of h)r=r||u.topContainer,o=o||u.bottomContainer;return{topContainer:r,bottomContainer:o}}});function getPanel(h,r){let o=h.plugin(panelPlugin),u=o?o.specs.indexOf(r):-1;return u>-1?o.panels[u]:null}const panelPlugin=ViewPlugin.fromClass(class{constructor(h){this.input=h.state.facet(showPanel),this.specs=this.input.filter(o=>o),this.panels=this.specs.map(o=>o(h));let r=h.state.facet(panelConfig);this.top=new PanelGroup(h,!0,r.topContainer),this.bottom=new PanelGroup(h,!1,r.bottomContainer),this.top.sync(this.panels.filter(o=>o.top)),this.bottom.sync(this.panels.filter(o=>!o.top));for(let o of this.panels)o.dom.classList.add("cm-panel"),o.mount&&o.mount()}update(h){let r=h.state.facet(panelConfig);this.top.container!=r.topContainer&&(this.top.sync([]),this.top=new PanelGroup(h.view,!0,r.topContainer)),this.bottom.container!=r.bottomContainer&&(this.bottom.sync([]),this.bottom=new PanelGroup(h.view,!1,r.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let o=h.state.facet(showPanel);if(o!=this.input){let u=o.filter(q=>q),g=[],k=[],A=[],R=[];for(let q of u){let _=this.specs.indexOf(q),ee;_<0?(ee=q(h.view),R.push(ee)):(ee=this.panels[_],ee.update&&ee.update(h)),g.push(ee),(ee.top?k:A).push(ee)}this.specs=u,this.panels=g,this.top.sync(k),this.bottom.sync(A);for(let q of R)q.dom.classList.add("cm-panel"),q.mount&&q.mount()}else for(let u of this.panels)u.update&&u.update(h)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:h=>EditorView.scrollMargins.of(r=>{let o=r.plugin(h);return o&&{top:o.top.scrollMargin(),bottom:o.bottom.scrollMargin()}})});class PanelGroup{constructor(r,o,u){this.view=r,this.top=o,this.container=u,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(r){for(let o of this.panels)o.destroy&&r.indexOf(o)<0&&o.destroy();this.panels=r,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let o=this.container||this.view.dom;o.insertBefore(this.dom,this.top?o.firstChild:null)}let r=this.dom.firstChild;for(let o of this.panels)if(o.dom.parentNode==this.dom){for(;r!=o.dom;)r=rm(r);r=r.nextSibling}else this.dom.insertBefore(o.dom,r);for(;r;)r=rm(r)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let r of this.classes.split(" "))r&&this.container.classList.remove(r);for(let r of(this.classes=this.view.themeClasses).split(" "))r&&this.container.classList.add(r)}}}function rm(h){let r=h.nextSibling;return h.remove(),r}const showPanel=Facet.define({enables:panelPlugin});class GutterMarker extends RangeValue{compare(r){return this==r||this.constructor==r.constructor&&this.eq(r)}eq(r){return!1}destroy(r){}}GutterMarker.prototype.elementClass="";GutterMarker.prototype.toDOM=void 0;GutterMarker.prototype.mapMode=MapMode.TrackBefore;GutterMarker.prototype.startSide=GutterMarker.prototype.endSide=-1;GutterMarker.prototype.point=!0;const gutterLineClass=Facet.define(),gutterWidgetClass=Facet.define(),defaults$1={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>RangeSet.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{},side:"before"},activeGutters=Facet.define();function gutter(h){return[gutters(),activeGutters.of({...defaults$1,...h})]}const unfixGutters=Facet.define({combine:h=>h.some(r=>r)});function gutters(h){return[gutterView]}const gutterView=ViewPlugin.fromClass(class{constructor(h){this.view=h,this.domAfter=null,this.prevViewport=h.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=h.state.facet(activeGutters).map(r=>new SingleGutterView(h,r)),this.fixed=!h.state.facet(unfixGutters);for(let r of this.gutters)r.config.side=="after"?this.getDOMAfter().appendChild(r.dom):this.dom.appendChild(r.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),h.scrollDOM.insertBefore(this.dom,h.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(h){if(this.updateGutters(h)){let r=this.prevViewport,o=h.view.viewport,u=Math.min(r.to,o.to)-Math.max(r.from,o.from);this.syncGutters(u<(o.to-o.from)*.8)}if(h.geometryChanged){let r=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=r,this.domAfter&&(this.domAfter.style.minHeight=r)}this.view.state.facet(unfixGutters)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=h.view.viewport}syncGutters(h){let r=this.dom.nextSibling;h&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let o=RangeSet.iter(this.view.state.facet(gutterLineClass),this.view.viewport.from),u=[],g=this.gutters.map(k=>new UpdateContext(k,this.view.viewport,-this.view.documentPadding.top));for(let k of this.view.viewportLineBlocks)if(u.length&&(u=[]),Array.isArray(k.type)){let A=!0;for(let R of k.type)if(R.type==BlockType.Text&&A){advanceCursor(o,u,R.from);for(let q of g)q.line(this.view,R,u);A=!1}else if(R.widget)for(let q of g)q.widget(this.view,R)}else if(k.type==BlockType.Text){advanceCursor(o,u,k.from);for(let A of g)A.line(this.view,k,u)}else if(k.widget)for(let A of g)A.widget(this.view,k);for(let k of g)k.finish();h&&(this.view.scrollDOM.insertBefore(this.dom,r),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(h){let r=h.startState.facet(activeGutters),o=h.state.facet(activeGutters),u=h.docChanged||h.heightChanged||h.viewportChanged||!RangeSet.eq(h.startState.facet(gutterLineClass),h.state.facet(gutterLineClass),h.view.viewport.from,h.view.viewport.to);if(r==o)for(let g of this.gutters)g.update(h)&&(u=!0);else{u=!0;let g=[];for(let k of o){let A=r.indexOf(k);A<0?g.push(new SingleGutterView(this.view,k)):(this.gutters[A].update(h),g.push(this.gutters[A]))}for(let k of this.gutters)k.dom.remove(),g.indexOf(k)<0&&k.destroy();for(let k of g)k.config.side=="after"?this.getDOMAfter().appendChild(k.dom):this.dom.appendChild(k.dom);this.gutters=g}return u}destroy(){for(let h of this.gutters)h.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:h=>EditorView.scrollMargins.of(r=>{let o=r.plugin(h);if(!o||o.gutters.length==0||!o.fixed)return null;let u=o.dom.offsetWidth*r.scaleX,g=o.domAfter?o.domAfter.offsetWidth*r.scaleX:0;return r.textDirection==Direction.LTR?{left:u,right:g}:{right:u,left:g}})});function asArray(h){return Array.isArray(h)?h:[h]}function advanceCursor(h,r,o){for(;h.value&&h.from<=o;)h.from==o&&r.push(h.value),h.next()}class UpdateContext{constructor(r,o,u){this.gutter=r,this.height=u,this.i=0,this.cursor=RangeSet.iter(r.markers,o.from)}addElement(r,o,u){let{gutter:g}=this,k=(o.top-this.height)/r.scaleY,A=o.height/r.scaleY;if(this.i==g.elements.length){let R=new GutterElement(r,A,k,u);g.elements.push(R),g.dom.appendChild(R.dom)}else g.elements[this.i].update(r,A,k,u);this.height=o.bottom,this.i++}line(r,o,u){let g=[];advanceCursor(this.cursor,g,o.from),u.length&&(g=g.concat(u));let k=this.gutter.config.lineMarker(r,o,g);k&&g.unshift(k);let A=this.gutter;g.length==0&&!A.config.renderEmptyElements||this.addElement(r,o,g)}widget(r,o){let u=this.gutter.config.widgetMarker(r,o.widget,o),g=u?[u]:null;for(let k of r.state.facet(gutterWidgetClass)){let A=k(r,o.widget,o);A&&(g||(g=[])).push(A)}g&&this.addElement(r,o,g)}finish(){let r=this.gutter;for(;r.elements.length>this.i;){let o=r.elements.pop();r.dom.removeChild(o.dom),o.destroy()}}}class SingleGutterView{constructor(r,o){this.view=r,this.config=o,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let u in o.domEventHandlers)this.dom.addEventListener(u,g=>{let k=g.target,A;if(k!=this.dom&&this.dom.contains(k)){for(;k.parentNode!=this.dom;)k=k.parentNode;let q=k.getBoundingClientRect();A=(q.top+q.bottom)/2}else A=g.clientY;let R=r.lineBlockAtHeight(A-r.documentTop);o.domEventHandlers[u](r,R,g)&&g.preventDefault()});this.markers=asArray(o.markers(r)),o.initialSpacer&&(this.spacer=new GutterElement(r,0,0,[o.initialSpacer(r)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(r){let o=this.markers;if(this.markers=asArray(this.config.markers(r.view)),this.spacer&&this.config.updateSpacer){let g=this.config.updateSpacer(this.spacer.markers[0],r);g!=this.spacer.markers[0]&&this.spacer.update(r.view,0,0,[g])}let u=r.view.viewport;return!RangeSet.eq(this.markers,o,u.from,u.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(r):!1)}destroy(){for(let r of this.elements)r.destroy()}}class GutterElement{constructor(r,o,u,g){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(r,o,u,g)}update(r,o,u,g){this.height!=o&&(this.height=o,this.dom.style.height=o+"px"),this.above!=u&&(this.dom.style.marginTop=(this.above=u)?u+"px":""),sameMarkers(this.markers,g)||this.setMarkers(r,g)}setMarkers(r,o){let u="cm-gutterElement",g=this.dom.firstChild;for(let k=0,A=0;;){let R=A,q=k<o.length?o[k++]:null,_=!1;if(q){let ee=q.elementClass;ee&&(u+=" "+ee);for(let te=A;te<this.markers.length;te++)if(this.markers[te].compare(q)){R=te,_=!0;break}}else R=this.markers.length;for(;A<R;){let ee=this.markers[A++];if(ee.toDOM){ee.destroy(g);let te=g.nextSibling;g.remove(),g=te}}if(!q)break;q.toDOM&&(_?g=g.nextSibling:this.dom.insertBefore(q.toDOM(r),g)),_&&A++}this.dom.className=u,this.markers=o}destroy(){this.setMarkers(null,[])}}function sameMarkers(h,r){if(h.length!=r.length)return!1;for(let o=0;o<h.length;o++)if(!h[o].compare(r[o]))return!1;return!0}const lineNumberMarkers=Facet.define(),lineNumberWidgetMarker=Facet.define(),lineNumberConfig=Facet.define({combine(h){return combineConfig(h,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(r,o){let u=Object.assign({},r);for(let g in o){let k=u[g],A=o[g];u[g]=k?(R,q,_)=>k(R,q,_)||A(R,q,_):A}return u}})}});class NumberMarker extends GutterMarker{constructor(r){super(),this.number=r}eq(r){return this.number==r.number}toDOM(){return document.createTextNode(this.number)}}function formatNumber(h,r){return h.state.facet(lineNumberConfig).formatNumber(r,h.state)}const lineNumberGutter=activeGutters.compute([lineNumberConfig],h=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(r){return r.state.facet(lineNumberMarkers)},lineMarker(r,o,u){return u.some(g=>g.toDOM)?null:new NumberMarker(formatNumber(r,r.state.doc.lineAt(o.from).number))},widgetMarker:(r,o,u)=>{for(let g of r.state.facet(lineNumberWidgetMarker)){let k=g(r,o,u);if(k)return k}return null},lineMarkerChange:r=>r.startState.facet(lineNumberConfig)!=r.state.facet(lineNumberConfig),initialSpacer(r){return new NumberMarker(formatNumber(r,maxLineNumber(r.state.doc.lines)))},updateSpacer(r,o){let u=formatNumber(o.view,maxLineNumber(o.view.state.doc.lines));return u==r.number?r:new NumberMarker(u)},domEventHandlers:h.facet(lineNumberConfig).domEventHandlers,side:"before"}));function lineNumbers(h={}){return[lineNumberConfig.of(h),gutters(),lineNumberGutter]}function maxLineNumber(h){let r=9;for(;r<h;)r=r*10+9;return r}const activeLineGutterMarker=new class extends GutterMarker{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},activeLineGutterHighlighter=gutterLineClass.compute(["selection"],h=>{let r=[],o=-1;for(let u of h.selection.ranges){let g=h.doc.lineAt(u.head).from;g>o&&(o=g,r.push(activeLineGutterMarker.range(g)))}return RangeSet.of(r)});function highlightActiveLineGutter(){return activeLineGutterHighlighter}const DefaultBufferLength=1024;let nextPropID=0;class Range{constructor(r,o){this.from=r,this.to=o}}class NodeProp{constructor(r={}){this.id=nextPropID++,this.perNode=!!r.perNode,this.deserialize=r.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(r){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof r!="function"&&(r=NodeType.match(r)),o=>{let u=r(o);return u===void 0?null:[this,u]}}}NodeProp.closedBy=new NodeProp({deserialize:h=>h.split(" ")});NodeProp.openedBy=new NodeProp({deserialize:h=>h.split(" ")});NodeProp.group=new NodeProp({deserialize:h=>h.split(" ")});NodeProp.isolate=new NodeProp({deserialize:h=>{if(h&&h!="rtl"&&h!="ltr"&&h!="auto")throw new RangeError("Invalid value for isolate: "+h);return h||"auto"}});NodeProp.contextHash=new NodeProp({perNode:!0});NodeProp.lookAhead=new NodeProp({perNode:!0});NodeProp.mounted=new NodeProp({perNode:!0});class MountedTree{constructor(r,o,u){this.tree=r,this.overlay=o,this.parser=u}static get(r){return r&&r.props&&r.props[NodeProp.mounted.id]}}const noProps=Object.create(null);class NodeType{constructor(r,o,u,g=0){this.name=r,this.props=o,this.id=u,this.flags=g}static define(r){let o=r.props&&r.props.length?Object.create(null):noProps,u=(r.top?1:0)|(r.skipped?2:0)|(r.error?4:0)|(r.name==null?8:0),g=new NodeType(r.name||"",o,r.id,u);if(r.props){for(let k of r.props)if(Array.isArray(k)||(k=k(g)),k){if(k[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");o[k[0].id]=k[1]}}return g}prop(r){return this.props[r.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(r){if(typeof r=="string"){if(this.name==r)return!0;let o=this.prop(NodeProp.group);return o?o.indexOf(r)>-1:!1}return this.id==r}static match(r){let o=Object.create(null);for(let u in r)for(let g of u.split(" "))o[g]=r[u];return u=>{for(let g=u.prop(NodeProp.group),k=-1;k<(g?g.length:0);k++){let A=o[k<0?u.name:g[k]];if(A)return A}}}}NodeType.none=new NodeType("",Object.create(null),0,8);class NodeSet{constructor(r){this.types=r;for(let o=0;o<r.length;o++)if(r[o].id!=o)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...r){let o=[];for(let u of this.types){let g=null;for(let k of r){let A=k(u);A&&(g||(g=Object.assign({},u.props)),g[A[0].id]=A[1])}o.push(g?new NodeType(u.name,g,u.id,u.flags):u)}return new NodeSet(o)}}const CachedNode=new WeakMap,CachedInnerNode=new WeakMap;var IterMode;(function(h){h[h.ExcludeBuffers=1]="ExcludeBuffers",h[h.IncludeAnonymous=2]="IncludeAnonymous",h[h.IgnoreMounts=4]="IgnoreMounts",h[h.IgnoreOverlays=8]="IgnoreOverlays"})(IterMode||(IterMode={}));class Tree{constructor(r,o,u,g,k){if(this.type=r,this.children=o,this.positions=u,this.length=g,this.props=null,k&&k.length){this.props=Object.create(null);for(let[A,R]of k)this.props[typeof A=="number"?A:A.id]=R}}toString(){let r=MountedTree.get(this);if(r&&!r.overlay)return r.tree.toString();let o="";for(let u of this.children){let g=u.toString();g&&(o&&(o+=","),o+=g)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(o.length?"("+o+")":""):o}cursor(r=0){return new TreeCursor(this.topNode,r)}cursorAt(r,o=0,u=0){let g=CachedNode.get(this)||this.topNode,k=new TreeCursor(g);return k.moveTo(r,o),CachedNode.set(this,k._tree),k}get topNode(){return new TreeNode(this,0,0,null)}resolve(r,o=0){let u=resolveNode(CachedNode.get(this)||this.topNode,r,o,!1);return CachedNode.set(this,u),u}resolveInner(r,o=0){let u=resolveNode(CachedInnerNode.get(this)||this.topNode,r,o,!0);return CachedInnerNode.set(this,u),u}resolveStack(r,o=0){return stackIterator(this,r,o)}iterate(r){let{enter:o,leave:u,from:g=0,to:k=this.length}=r,A=r.mode||0,R=(A&IterMode.IncludeAnonymous)>0;for(let q=this.cursor(A|IterMode.IncludeAnonymous);;){let _=!1;if(q.from<=k&&q.to>=g&&(!R&&q.type.isAnonymous||o(q)!==!1)){if(q.firstChild())continue;_=!0}for(;_&&u&&(R||!q.type.isAnonymous)&&u(q),!q.nextSibling();){if(!q.parent())return;_=!0}}}prop(r){return r.perNode?this.props?this.props[r.id]:void 0:this.type.prop(r)}get propValues(){let r=[];if(this.props)for(let o in this.props)r.push([+o,this.props[o]]);return r}balance(r={}){return this.children.length<=8?this:balanceRange(NodeType.none,this.children,this.positions,0,this.children.length,0,this.length,(o,u,g)=>new Tree(this.type,o,u,g,this.propValues),r.makeTree||((o,u,g)=>new Tree(NodeType.none,o,u,g)))}static build(r){return buildTree(r)}}Tree.empty=new Tree(NodeType.none,[],[],0);class FlatBufferCursor{constructor(r,o){this.buffer=r,this.index=o}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new FlatBufferCursor(this.buffer,this.index)}}class TreeBuffer{constructor(r,o,u){this.buffer=r,this.length=o,this.set=u}get type(){return NodeType.none}toString(){let r=[];for(let o=0;o<this.buffer.length;)r.push(this.childString(o)),o=this.buffer[o+3];return r.join(",")}childString(r){let o=this.buffer[r],u=this.buffer[r+3],g=this.set.types[o],k=g.name;if(/\W/.test(k)&&!g.isError&&(k=JSON.stringify(k)),r+=4,u==r)return k;let A=[];for(;r<u;)A.push(this.childString(r)),r=this.buffer[r+3];return k+"("+A.join(",")+")"}findChild(r,o,u,g,k){let{buffer:A}=this,R=-1;for(let q=r;q!=o&&!(checkSide(k,g,A[q+1],A[q+2])&&(R=q,u>0));q=A[q+3]);return R}slice(r,o,u){let g=this.buffer,k=new Uint16Array(o-r),A=0;for(let R=r,q=0;R<o;){k[q++]=g[R++],k[q++]=g[R++]-u;let _=k[q++]=g[R++]-u;k[q++]=g[R++]-r,A=Math.max(A,_)}return new TreeBuffer(k,A,this.set)}}function checkSide(h,r,o,u){switch(h){case-2:return o<r;case-1:return u>=r&&o<r;case 0:return o<r&&u>r;case 1:return o<=r&&u>r;case 2:return u>r;case 4:return!0}}function resolveNode(h,r,o,u){for(var g;h.from==h.to||(o<1?h.from>=r:h.from>r)||(o>-1?h.to<=r:h.to<r);){let A=!u&&h instanceof TreeNode&&h.index<0?null:h.parent;if(!A)return h;h=A}let k=u?0:IterMode.IgnoreOverlays;if(u)for(let A=h,R=A.parent;R;A=R,R=A.parent)A instanceof TreeNode&&A.index<0&&((g=R.enter(r,o,k))===null||g===void 0?void 0:g.from)!=A.from&&(h=R);for(;;){let A=h.enter(r,o,k);if(!A)return h;h=A}}class BaseNode{cursor(r=0){return new TreeCursor(this,r)}getChild(r,o=null,u=null){let g=getChildren(this,r,o,u);return g.length?g[0]:null}getChildren(r,o=null,u=null){return getChildren(this,r,o,u)}resolve(r,o=0){return resolveNode(this,r,o,!1)}resolveInner(r,o=0){return resolveNode(this,r,o,!0)}matchContext(r){return matchNodeContext(this.parent,r)}enterUnfinishedNodesBefore(r){let o=this.childBefore(r),u=this;for(;o;){let g=o.lastChild;if(!g||g.to!=o.to)break;g.type.isError&&g.from==g.to?(u=o,o=g.prevSibling):o=g}return u}get node(){return this}get next(){return this.parent}}class TreeNode extends BaseNode{constructor(r,o,u,g){super(),this._tree=r,this.from=o,this.index=u,this._parent=g}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(r,o,u,g,k=0){for(let A=this;;){for(let{children:R,positions:q}=A._tree,_=o>0?R.length:-1;r!=_;r+=o){let ee=R[r],te=q[r]+A.from;if(checkSide(g,u,te,te+ee.length)){if(ee instanceof TreeBuffer){if(k&IterMode.ExcludeBuffers)continue;let ne=ee.findChild(0,ee.buffer.length,o,u-te,g);if(ne>-1)return new BufferNode(new BufferContext(A,ee,r,te),null,ne)}else if(k&IterMode.IncludeAnonymous||!ee.type.isAnonymous||hasChild(ee)){let ne;if(!(k&IterMode.IgnoreMounts)&&(ne=MountedTree.get(ee))&&!ne.overlay)return new TreeNode(ne.tree,te,r,A);let re=new TreeNode(ee,te,r,A);return k&IterMode.IncludeAnonymous||!re.type.isAnonymous?re:re.nextChild(o<0?ee.children.length-1:0,o,u,g)}}}if(k&IterMode.IncludeAnonymous||!A.type.isAnonymous||(A.index>=0?r=A.index+o:r=o<0?-1:A._parent._tree.children.length,A=A._parent,!A))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(r){return this.nextChild(0,1,r,2)}childBefore(r){return this.nextChild(this._tree.children.length-1,-1,r,-2)}enter(r,o,u=0){let g;if(!(u&IterMode.IgnoreOverlays)&&(g=MountedTree.get(this._tree))&&g.overlay){let k=r-this.from;for(let{from:A,to:R}of g.overlay)if((o>0?A<=k:A<k)&&(o<0?R>=k:R>k))return new TreeNode(g.tree,g.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,r,o,u)}nextSignificantParent(){let r=this;for(;r.type.isAnonymous&&r._parent;)r=r._parent;return r}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function getChildren(h,r,o,u){let g=h.cursor(),k=[];if(!g.firstChild())return k;if(o!=null){for(let A=!1;!A;)if(A=g.type.is(o),!g.nextSibling())return k}for(;;){if(u!=null&&g.type.is(u))return k;if(g.type.is(r)&&k.push(g.node),!g.nextSibling())return u==null?k:[]}}function matchNodeContext(h,r,o=r.length-1){for(let u=h;o>=0;u=u.parent){if(!u)return!1;if(!u.type.isAnonymous){if(r[o]&&r[o]!=u.name)return!1;o--}}return!0}class BufferContext{constructor(r,o,u,g){this.parent=r,this.buffer=o,this.index=u,this.start=g}}class BufferNode extends BaseNode{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(r,o,u){super(),this.context=r,this._parent=o,this.index=u,this.type=r.buffer.set.types[r.buffer.buffer[u]]}child(r,o,u){let{buffer:g}=this.context,k=g.findChild(this.index+4,g.buffer[this.index+3],r,o-this.context.start,u);return k<0?null:new BufferNode(this.context,this,k)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(r){return this.child(1,r,2)}childBefore(r){return this.child(-1,r,-2)}enter(r,o,u=0){if(u&IterMode.ExcludeBuffers)return null;let{buffer:g}=this.context,k=g.findChild(this.index+4,g.buffer[this.index+3],o>0?1:-1,r-this.context.start,o);return k<0?null:new BufferNode(this.context,this,k)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(r){return this._parent?null:this.context.parent.nextChild(this.context.index+r,r,0,4)}get nextSibling(){let{buffer:r}=this.context,o=r.buffer[this.index+3];return o<(this._parent?r.buffer[this._parent.index+3]:r.buffer.length)?new BufferNode(this.context,this._parent,o):this.externalSibling(1)}get prevSibling(){let{buffer:r}=this.context,o=this._parent?this._parent.index+4:0;return this.index==o?this.externalSibling(-1):new BufferNode(this.context,this._parent,r.findChild(o,this.index,-1,0,4))}get tree(){return null}toTree(){let r=[],o=[],{buffer:u}=this.context,g=this.index+4,k=u.buffer[this.index+3];if(k>g){let A=u.buffer[this.index+1];r.push(u.slice(g,k,A)),o.push(0)}return new Tree(this.type,r,o,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function iterStack(h){if(!h.length)return null;let r=0,o=h[0];for(let k=1;k<h.length;k++){let A=h[k];(A.from>o.from||A.to<o.to)&&(o=A,r=k)}let u=o instanceof TreeNode&&o.index<0?null:o.parent,g=h.slice();return u?g[r]=u:g.splice(r,1),new StackIterator(g,o)}class StackIterator{constructor(r,o){this.heads=r,this.node=o}get next(){return iterStack(this.heads)}}function stackIterator(h,r,o){let u=h.resolveInner(r,o),g=null;for(let k=u instanceof TreeNode?u:u.context.parent;k;k=k.parent)if(k.index<0){let A=k.parent;(g||(g=[u])).push(A.resolve(r,o)),k=A}else{let A=MountedTree.get(k.tree);if(A&&A.overlay&&A.overlay[0].from<=r&&A.overlay[A.overlay.length-1].to>=r){let R=new TreeNode(A.tree,A.overlay[0].from+k.from,-1,k);(g||(g=[u])).push(resolveNode(R,r,o,!1))}}return g?iterStack(g):u}class TreeCursor{get name(){return this.type.name}constructor(r,o=0){if(this.mode=o,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,r instanceof TreeNode)this.yieldNode(r);else{this._tree=r.context.parent,this.buffer=r.context;for(let u=r._parent;u;u=u._parent)this.stack.unshift(u.index);this.bufferNode=r,this.yieldBuf(r.index)}}yieldNode(r){return r?(this._tree=r,this.type=r.type,this.from=r.from,this.to=r.to,!0):!1}yieldBuf(r,o){this.index=r;let{start:u,buffer:g}=this.buffer;return this.type=o||g.set.types[g.buffer[r]],this.from=u+g.buffer[r+1],this.to=u+g.buffer[r+2],!0}yield(r){return r?r instanceof TreeNode?(this.buffer=null,this.yieldNode(r)):(this.buffer=r.context,this.yieldBuf(r.index,r.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(r,o,u){if(!this.buffer)return this.yield(this._tree.nextChild(r<0?this._tree._tree.children.length-1:0,r,o,u,this.mode));let{buffer:g}=this.buffer,k=g.findChild(this.index+4,g.buffer[this.index+3],r,o-this.buffer.start,u);return k<0?!1:(this.stack.push(this.index),this.yieldBuf(k))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(r){return this.enterChild(1,r,2)}childBefore(r){return this.enterChild(-1,r,-2)}enter(r,o,u=this.mode){return this.buffer?u&IterMode.ExcludeBuffers?!1:this.enterChild(1,r,o):this.yield(this._tree.enter(r,o,u))}parent(){if(!this.buffer)return this.yieldNode(this.mode&IterMode.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let r=this.mode&IterMode.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(r)}sibling(r){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+r,r,0,4,this.mode)):!1;let{buffer:o}=this.buffer,u=this.stack.length-1;if(r<0){let g=u<0?0:this.stack[u]+4;if(this.index!=g)return this.yieldBuf(o.findChild(g,this.index,-1,0,4))}else{let g=o.buffer[this.index+3];if(g<(u<0?o.buffer.length:o.buffer[this.stack[u]+3]))return this.yieldBuf(g)}return u<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+r,r,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(r){let o,u,{buffer:g}=this;if(g){if(r>0){if(this.index<g.buffer.buffer.length)return!1}else for(let k=0;k<this.index;k++)if(g.buffer.buffer[k+3]<this.index)return!1;({index:o,parent:u}=g)}else({index:o,_parent:u}=this._tree);for(;u;{index:o,_parent:u}=u)if(o>-1)for(let k=o+r,A=r<0?-1:u._tree.children.length;k!=A;k+=r){let R=u._tree.children[k];if(this.mode&IterMode.IncludeAnonymous||R instanceof TreeBuffer||!R.type.isAnonymous||hasChild(R))return!1}return!0}move(r,o){if(o&&this.enterChild(r,0,4))return!0;for(;;){if(this.sibling(r))return!0;if(this.atLastNode(r)||!this.parent())return!1}}next(r=!0){return this.move(1,r)}prev(r=!0){return this.move(-1,r)}moveTo(r,o=0){for(;(this.from==this.to||(o<1?this.from>=r:this.from>r)||(o>-1?this.to<=r:this.to<r))&&this.parent(););for(;this.enterChild(1,r,o););return this}get node(){if(!this.buffer)return this._tree;let r=this.bufferNode,o=null,u=0;if(r&&r.context==this.buffer)e:for(let g=this.index,k=this.stack.length;k>=0;){for(let A=r;A;A=A._parent)if(A.index==g){if(g==this.index)return A;o=A,u=k+1;break e}g=this.stack[--k]}for(let g=u;g<this.stack.length;g++)o=new BufferNode(this.buffer,o,this.stack[g]);return this.bufferNode=new BufferNode(this.buffer,o,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(r,o){for(let u=0;;){let g=!1;if(this.type.isAnonymous||r(this)!==!1){if(this.firstChild()){u++;continue}this.type.isAnonymous||(g=!0)}for(;;){if(g&&o&&o(this),g=this.type.isAnonymous,!u)return;if(this.nextSibling())break;this.parent(),u--,g=!0}}}matchContext(r){if(!this.buffer)return matchNodeContext(this.node.parent,r);let{buffer:o}=this.buffer,{types:u}=o.set;for(let g=r.length-1,k=this.stack.length-1;g>=0;k--){if(k<0)return matchNodeContext(this._tree,r,g);let A=u[o.buffer[this.stack[k]]];if(!A.isAnonymous){if(r[g]&&r[g]!=A.name)return!1;g--}}return!0}}function hasChild(h){return h.children.some(r=>r instanceof TreeBuffer||!r.type.isAnonymous||hasChild(r))}function buildTree(h){var r;let{buffer:o,nodeSet:u,maxBufferLength:g=DefaultBufferLength,reused:k=[],minRepeatType:A=u.types.length}=h,R=Array.isArray(o)?new FlatBufferCursor(o,o.length):o,q=u.types,_=0,ee=0;function te(ce,fe,ue,Oe,be,xe){let{id:Se,start:ke,end:we,size:Te}=R,Ee=ee,$e=_;for(;Te<0;)if(R.next(),Te==-1){let Ze=k[Se];ue.push(Ze),Oe.push(ke-ce);return}else if(Te==-3){_=Se;return}else if(Te==-4){ee=Se;return}else throw new RangeError(`Unrecognized record size: ${Te}`);let Pe=q[Se],Me,Ve,je=ke-ce;if(we-ke<=g&&(Ve=pe(R.pos-fe,be))){let Ze=new Uint16Array(Ve.size-Ve.skip),_e=R.pos-Ve.size,ze=Ze.length;for(;R.pos>_e;)ze=de(Ve.start,Ze,ze);Me=new TreeBuffer(Ze,we-Ve.start,u),je=Ve.start-ce}else{let Ze=R.pos-Te;R.next();let _e=[],ze=[],Ge=Se>=A?Se:-1,Ue=0,tt=we;for(;R.pos>Ze;)Ge>=0&&R.id==Ge&&R.size>=0?(R.end<=tt-g&&(oe(_e,ze,ke,Ue,R.end,tt,Ge,Ee,$e),Ue=_e.length,tt=R.end),R.next()):xe>2500?ne(ke,Ze,_e,ze):te(ke,Ze,_e,ze,Ge,xe+1);if(Ge>=0&&Ue>0&&Ue<_e.length&&oe(_e,ze,ke,Ue,ke,tt,Ge,Ee,$e),_e.reverse(),ze.reverse(),Ge>-1&&Ue>0){let it=re(Pe,$e);Me=balanceRange(Pe,_e,ze,0,_e.length,0,we-ke,it,it)}else Me=le(Pe,_e,ze,we-ke,Ee-we,$e)}ue.push(Me),Oe.push(je)}function ne(ce,fe,ue,Oe){let be=[],xe=0,Se=-1;for(;R.pos>fe;){let{id:ke,start:we,end:Te,size:Ee}=R;if(Ee>4)R.next();else{if(Se>-1&&we<Se)break;Se<0&&(Se=Te-g),be.push(ke,we,Te),xe++,R.next()}}if(xe){let ke=new Uint16Array(xe*4),we=be[be.length-2];for(let Te=be.length-3,Ee=0;Te>=0;Te-=3)ke[Ee++]=be[Te],ke[Ee++]=be[Te+1]-we,ke[Ee++]=be[Te+2]-we,ke[Ee++]=Ee;ue.push(new TreeBuffer(ke,be[2]-we,u)),Oe.push(we-ce)}}function re(ce,fe){return(ue,Oe,be)=>{let xe=0,Se=ue.length-1,ke,we;if(Se>=0&&(ke=ue[Se])instanceof Tree){if(!Se&&ke.type==ce&&ke.length==be)return ke;(we=ke.prop(NodeProp.lookAhead))&&(xe=Oe[Se]+ke.length+we)}return le(ce,ue,Oe,be,xe,fe)}}function oe(ce,fe,ue,Oe,be,xe,Se,ke,we){let Te=[],Ee=[];for(;ce.length>Oe;)Te.push(ce.pop()),Ee.push(fe.pop()+ue-be);ce.push(le(u.types[Se],Te,Ee,xe-be,ke-xe,we)),fe.push(be-ue)}function le(ce,fe,ue,Oe,be,xe,Se){if(xe){let ke=[NodeProp.contextHash,xe];Se=Se?[ke].concat(Se):[ke]}if(be>25){let ke=[NodeProp.lookAhead,be];Se=Se?[ke].concat(Se):[ke]}return new Tree(ce,fe,ue,Oe,Se)}function pe(ce,fe){let ue=R.fork(),Oe=0,be=0,xe=0,Se=ue.end-g,ke={size:0,start:0,skip:0};e:for(let we=ue.pos-ce;ue.pos>we;){let Te=ue.size;if(ue.id==fe&&Te>=0){ke.size=Oe,ke.start=be,ke.skip=xe,xe+=4,Oe+=4,ue.next();continue}let Ee=ue.pos-Te;if(Te<0||Ee<we||ue.start<Se)break;let $e=ue.id>=A?4:0,Pe=ue.start;for(ue.next();ue.pos>Ee;){if(ue.size<0)if(ue.size==-3)$e+=4;else break e;else ue.id>=A&&($e+=4);ue.next()}be=Pe,Oe+=Te,xe+=$e}return(fe<0||Oe==ce)&&(ke.size=Oe,ke.start=be,ke.skip=xe),ke.size>4?ke:void 0}function de(ce,fe,ue){let{id:Oe,start:be,end:xe,size:Se}=R;if(R.next(),Se>=0&&Oe<A){let ke=ue;if(Se>4){let we=R.pos-(Se-4);for(;R.pos>we;)ue=de(ce,fe,ue)}fe[--ue]=ke,fe[--ue]=xe-ce,fe[--ue]=be-ce,fe[--ue]=Oe}else Se==-3?_=Oe:Se==-4&&(ee=Oe);return ue}let he=[],ae=[];for(;R.pos>0;)te(h.start||0,h.bufferStart||0,he,ae,-1,0);let se=(r=h.length)!==null&&r!==void 0?r:he.length?ae[0]+he[0].length:0;return new Tree(q[h.topID],he.reverse(),ae.reverse(),se)}const nodeSizeCache=new WeakMap;function nodeSize(h,r){if(!h.isAnonymous||r instanceof TreeBuffer||r.type!=h)return 1;let o=nodeSizeCache.get(r);if(o==null){o=1;for(let u of r.children){if(u.type!=h||!(u instanceof Tree)){o=1;break}o+=nodeSize(h,u)}nodeSizeCache.set(r,o)}return o}function balanceRange(h,r,o,u,g,k,A,R,q){let _=0;for(let oe=u;oe<g;oe++)_+=nodeSize(h,r[oe]);let ee=Math.ceil(_*1.5/8),te=[],ne=[];function re(oe,le,pe,de,he){for(let ae=pe;ae<de;){let se=ae,ce=le[ae],fe=nodeSize(h,oe[ae]);for(ae++;ae<de;ae++){let ue=nodeSize(h,oe[ae]);if(fe+ue>=ee)break;fe+=ue}if(ae==se+1){if(fe>ee){let ue=oe[se];re(ue.children,ue.positions,0,ue.children.length,le[se]+he);continue}te.push(oe[se])}else{let ue=le[ae-1]+oe[ae-1].length-ce;te.push(balanceRange(h,oe,le,se,ae,ce,ue,null,q))}ne.push(ce+he-k)}}return re(r,o,u,g,0),(R||q)(te,ne,A)}class NodeWeakMap{constructor(){this.map=new WeakMap}setBuffer(r,o,u){let g=this.map.get(r);g||this.map.set(r,g=new Map),g.set(o,u)}getBuffer(r,o){let u=this.map.get(r);return u&&u.get(o)}set(r,o){r instanceof BufferNode?this.setBuffer(r.context.buffer,r.index,o):r instanceof TreeNode&&this.map.set(r.tree,o)}get(r){return r instanceof BufferNode?this.getBuffer(r.context.buffer,r.index):r instanceof TreeNode?this.map.get(r.tree):void 0}cursorSet(r,o){r.buffer?this.setBuffer(r.buffer.buffer,r.index,o):this.map.set(r.tree,o)}cursorGet(r){return r.buffer?this.getBuffer(r.buffer.buffer,r.index):this.map.get(r.tree)}}class TreeFragment{constructor(r,o,u,g,k=!1,A=!1){this.from=r,this.to=o,this.tree=u,this.offset=g,this.open=(k?1:0)|(A?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(r,o=[],u=!1){let g=[new TreeFragment(0,r.length,r,0,!1,u)];for(let k of o)k.to>r.length&&g.push(k);return g}static applyChanges(r,o,u=128){if(!o.length)return r;let g=[],k=1,A=r.length?r[0]:null;for(let R=0,q=0,_=0;;R++){let ee=R<o.length?o[R]:null,te=ee?ee.fromA:1e9;if(te-q>=u)for(;A&&A.from<te;){let ne=A;if(q>=ne.from||te<=ne.to||_){let re=Math.max(ne.from,q)-_,oe=Math.min(ne.to,te)-_;ne=re>=oe?null:new TreeFragment(re,oe,ne.tree,ne.offset+_,R>0,!!ee)}if(ne&&g.push(ne),A.to>te)break;A=k<r.length?r[k++]:null}if(!ee)break;q=ee.toA,_=ee.toA-ee.toB}return g}}class Parser{startParse(r,o,u){return typeof r=="string"&&(r=new StringInput(r)),u=u?u.length?u.map(g=>new Range(g.from,g.to)):[new Range(0,0)]:[new Range(0,r.length)],this.createParse(r,o||[],u)}parse(r,o,u){let g=this.startParse(r,o,u);for(;;){let k=g.advance();if(k)return k}}}class StringInput{constructor(r){this.string=r}get length(){return this.string.length}chunk(r){return this.string.slice(r)}get lineChunks(){return!1}read(r,o){return this.string.slice(r,o)}}function parseMixed(h){return(r,o,u,g)=>new MixedParse(r,h,o,u,g)}class InnerParse{constructor(r,o,u,g,k){this.parser=r,this.parse=o,this.overlay=u,this.target=g,this.from=k}}function checkRanges(h){if(!h.length||h.some(r=>r.from>=r.to))throw new RangeError("Invalid inner parse ranges given: "+JSON.stringify(h))}class ActiveOverlay{constructor(r,o,u,g,k,A,R){this.parser=r,this.predicate=o,this.mounts=u,this.index=g,this.start=k,this.target=A,this.prev=R,this.depth=0,this.ranges=[]}}const stoppedInner=new NodeProp({perNode:!0});class MixedParse{constructor(r,o,u,g,k){this.nest=o,this.input=u,this.fragments=g,this.ranges=k,this.inner=[],this.innerDone=0,this.baseTree=null,this.stoppedAt=null,this.baseParse=r}advance(){if(this.baseParse){let u=this.baseParse.advance();if(!u)return null;if(this.baseParse=null,this.baseTree=u,this.startInner(),this.stoppedAt!=null)for(let g of this.inner)g.parse.stopAt(this.stoppedAt)}if(this.innerDone==this.inner.length){let u=this.baseTree;return this.stoppedAt!=null&&(u=new Tree(u.type,u.children,u.positions,u.length,u.propValues.concat([[stoppedInner,this.stoppedAt]]))),u}let r=this.inner[this.innerDone],o=r.parse.advance();if(o){this.innerDone++;let u=Object.assign(Object.create(null),r.target.props);u[NodeProp.mounted.id]=new MountedTree(o,r.overlay,r.parser),r.target.props=u}return null}get parsedPos(){if(this.baseParse)return 0;let r=this.input.length;for(let o=this.innerDone;o<this.inner.length;o++)this.inner[o].from<r&&(r=Math.min(r,this.inner[o].parse.parsedPos));return r}stopAt(r){if(this.stoppedAt=r,this.baseParse)this.baseParse.stopAt(r);else for(let o=this.innerDone;o<this.inner.length;o++)this.inner[o].parse.stopAt(r)}startInner(){let r=new FragmentCursor$2(this.fragments),o=null,u=null,g=new TreeCursor(new TreeNode(this.baseTree,this.ranges[0].from,0,null),IterMode.IncludeAnonymous|IterMode.IgnoreMounts);e:for(let k,A;;){let R=!0,q;if(this.stoppedAt!=null&&g.from>=this.stoppedAt)R=!1;else if(r.hasNode(g)){if(o){let _=o.mounts.find(ee=>ee.frag.from<=g.from&&ee.frag.to>=g.to&&ee.mount.overlay);if(_)for(let ee of _.mount.overlay){let te=ee.from+_.pos,ne=ee.to+_.pos;te>=g.from&&ne<=g.to&&!o.ranges.some(re=>re.from<ne&&re.to>te)&&o.ranges.push({from:te,to:ne})}}R=!1}else if(u&&(A=checkCover(u.ranges,g.from,g.to)))R=A!=2;else if(!g.type.isAnonymous&&(k=this.nest(g,this.input))&&(g.from<g.to||!k.overlay)){g.tree||materialize(g);let _=r.findMounts(g.from,k.parser);if(typeof k.overlay=="function")o=new ActiveOverlay(k.parser,k.overlay,_,this.inner.length,g.from,g.tree,o);else{let ee=punchRanges(this.ranges,k.overlay||(g.from<g.to?[new Range(g.from,g.to)]:[]));ee.length&&checkRanges(ee),(ee.length||!k.overlay)&&this.inner.push(new InnerParse(k.parser,ee.length?k.parser.startParse(this.input,enterFragments(_,ee),ee):k.parser.startParse(""),k.overlay?k.overlay.map(te=>new Range(te.from-g.from,te.to-g.from)):null,g.tree,ee.length?ee[0].from:g.from)),k.overlay?ee.length&&(u={ranges:ee,depth:0,prev:u}):R=!1}}else if(o&&(q=o.predicate(g))&&(q===!0&&(q=new Range(g.from,g.to)),q.from<q.to)){let _=o.ranges.length-1;_>=0&&o.ranges[_].to==q.from?o.ranges[_]={from:o.ranges[_].from,to:q.to}:o.ranges.push(q)}if(R&&g.firstChild())o&&o.depth++,u&&u.depth++;else for(;!g.nextSibling();){if(!g.parent())break e;if(o&&!--o.depth){let _=punchRanges(this.ranges,o.ranges);_.length&&(checkRanges(_),this.inner.splice(o.index,0,new InnerParse(o.parser,o.parser.startParse(this.input,enterFragments(o.mounts,_),_),o.ranges.map(ee=>new Range(ee.from-o.start,ee.to-o.start)),o.target,_[0].from))),o=o.prev}u&&!--u.depth&&(u=u.prev)}}}}function checkCover(h,r,o){for(let u of h){if(u.from>=o)break;if(u.to>r)return u.from<=r&&u.to>=o?2:1}return 0}function sliceBuf(h,r,o,u,g,k){if(r<o){let A=h.buffer[r+1];u.push(h.slice(r,o,A)),g.push(A-k)}}function materialize(h){let{node:r}=h,o=[],u=r.context.buffer;do o.push(h.index),h.parent();while(!h.tree);let g=h.tree,k=g.children.indexOf(u),A=g.children[k],R=A.buffer,q=[k];function _(ee,te,ne,re,oe,le){let pe=o[le],de=[],he=[];sliceBuf(A,ee,pe,de,he,re);let ae=R[pe+1],se=R[pe+2];q.push(de.length);let ce=le?_(pe+4,R[pe+3],A.set.types[R[pe]],ae,se-ae,le-1):r.toTree();return de.push(ce),he.push(ae-re),sliceBuf(A,R[pe+3],te,de,he,re),new Tree(ne,de,he,oe)}g.children[k]=_(0,R.length,NodeType.none,0,A.length,o.length-1);for(let ee of q){let te=h.tree.children[ee],ne=h.tree.positions[ee];h.yield(new TreeNode(te,ne+h.from,ee,h._tree))}}class StructureCursor{constructor(r,o){this.offset=o,this.done=!1,this.cursor=r.cursor(IterMode.IncludeAnonymous|IterMode.IgnoreMounts)}moveTo(r){let{cursor:o}=this,u=r-this.offset;for(;!this.done&&o.from<u;)o.to>=r&&o.enter(u,1,IterMode.IgnoreOverlays|IterMode.ExcludeBuffers)||o.next(!1)||(this.done=!0)}hasNode(r){if(this.moveTo(r.from),!this.done&&this.cursor.from+this.offset==r.from&&this.cursor.tree)for(let o=this.cursor.tree;;){if(o==r.tree)return!0;if(o.children.length&&o.positions[0]==0&&o.children[0]instanceof Tree)o=o.children[0];else break}return!1}}let FragmentCursor$2=class{constructor(r){var o;if(this.fragments=r,this.curTo=0,this.fragI=0,r.length){let u=this.curFrag=r[0];this.curTo=(o=u.tree.prop(stoppedInner))!==null&&o!==void 0?o:u.to,this.inner=new StructureCursor(u.tree,-u.offset)}else this.curFrag=this.inner=null}hasNode(r){for(;this.curFrag&&r.from>=this.curTo;)this.nextFrag();return this.curFrag&&this.curFrag.from<=r.from&&this.curTo>=r.to&&this.inner.hasNode(r)}nextFrag(){var r;if(this.fragI++,this.fragI==this.fragments.length)this.curFrag=this.inner=null;else{let o=this.curFrag=this.fragments[this.fragI];this.curTo=(r=o.tree.prop(stoppedInner))!==null&&r!==void 0?r:o.to,this.inner=new StructureCursor(o.tree,-o.offset)}}findMounts(r,o){var u;let g=[];if(this.inner){this.inner.cursor.moveTo(r,1);for(let k=this.inner.cursor.node;k;k=k.parent){let A=(u=k.tree)===null||u===void 0?void 0:u.prop(NodeProp.mounted);if(A&&A.parser==o)for(let R=this.fragI;R<this.fragments.length;R++){let q=this.fragments[R];if(q.from>=k.to)break;q.tree==this.curFrag.tree&&g.push({frag:q,pos:k.from-q.offset,mount:A})}}}return g}};function punchRanges(h,r){let o=null,u=r;for(let g=1,k=0;g<h.length;g++){let A=h[g-1].to,R=h[g].from;for(;k<u.length;k++){let q=u[k];if(q.from>=R)break;q.to<=A||(o||(u=o=r.slice()),q.from<A?(o[k]=new Range(q.from,A),q.to>R&&o.splice(k+1,0,new Range(R,q.to))):q.to>R?o[k--]=new Range(R,q.to):o.splice(k--,1))}}return u}function findCoverChanges(h,r,o,u){let g=0,k=0,A=!1,R=!1,q=-1e9,_=[];for(;;){let ee=g==h.length?1e9:A?h[g].to:h[g].from,te=k==r.length?1e9:R?r[k].to:r[k].from;if(A!=R){let ne=Math.max(q,o),re=Math.min(ee,te,u);ne<re&&_.push(new Range(ne,re))}if(q=Math.min(ee,te),q==1e9)break;ee==q&&(A?(A=!1,g++):A=!0),te==q&&(R?(R=!1,k++):R=!0)}return _}function enterFragments(h,r){let o=[];for(let{pos:u,mount:g,frag:k}of h){let A=u+(g.overlay?g.overlay[0].from:0),R=A+g.tree.length,q=Math.max(k.from,A),_=Math.min(k.to,R);if(g.overlay){let ee=g.overlay.map(ne=>new Range(ne.from+u,ne.to+u)),te=findCoverChanges(r,ee,q,_);for(let ne=0,re=q;;ne++){let oe=ne==te.length,le=oe?_:te[ne].from;if(le>re&&o.push(new TreeFragment(re,le,g.tree,-A,k.from>=re||k.openStart,k.to<=le||k.openEnd)),oe)break;re=te[ne].to}}else o.push(new TreeFragment(q,_,g.tree,-A,k.from>=A||k.openStart,k.to<=R||k.openEnd))}return o}let nextTagID=0;class Tag{constructor(r,o,u,g){this.name=r,this.set=o,this.base=u,this.modified=g,this.id=nextTagID++}toString(){let{name:r}=this;for(let o of this.modified)o.name&&(r=`${o.name}(${r})`);return r}static define(r,o){let u=typeof r=="string"?r:"?";if(r instanceof Tag&&(o=r),o!=null&&o.base)throw new Error("Can not derive from a modified tag");let g=new Tag(u,[],null,[]);if(g.set.push(g),o)for(let k of o.set)g.set.push(k);return g}static defineModifier(r){let o=new Modifier(r);return u=>u.modified.indexOf(o)>-1?u:Modifier.get(u.base||u,u.modified.concat(o).sort((g,k)=>g.id-k.id))}}let nextModifierID=0;class Modifier{constructor(r){this.name=r,this.instances=[],this.id=nextModifierID++}static get(r,o){if(!o.length)return r;let u=o[0].instances.find(R=>R.base==r&&sameArray(o,R.modified));if(u)return u;let g=[],k=new Tag(r.name,g,r,o);for(let R of o)R.instances.push(k);let A=powerSet(o);for(let R of r.set)if(!R.modified.length)for(let q of A)g.push(Modifier.get(R,q));return k}}function sameArray(h,r){return h.length==r.length&&h.every((o,u)=>o==r[u])}function powerSet(h){let r=[[]];for(let o=0;o<h.length;o++)for(let u=0,g=r.length;u<g;u++)r.push(r[u].concat(h[o]));return r.sort((o,u)=>u.length-o.length)}function styleTags(h){let r=Object.create(null);for(let o in h){let u=h[o];Array.isArray(u)||(u=[u]);for(let g of o.split(" "))if(g){let k=[],A=2,R=g;for(let te=0;;){if(R=="..."&&te>0&&te+3==g.length){A=1;break}let ne=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(R);if(!ne)throw new RangeError("Invalid path: "+g);if(k.push(ne[0]=="*"?"":ne[0][0]=='"'?JSON.parse(ne[0]):ne[0]),te+=ne[0].length,te==g.length)break;let re=g[te++];if(te==g.length&&re=="!"){A=0;break}if(re!="/")throw new RangeError("Invalid path: "+g);R=g.slice(te)}let q=k.length-1,_=k[q];if(!_)throw new RangeError("Invalid path: "+g);let ee=new Rule(u,A,q>0?k.slice(0,q):null);r[_]=ee.sort(r[_])}}return ruleNodeProp.add(r)}const ruleNodeProp=new NodeProp;class Rule{constructor(r,o,u,g){this.tags=r,this.mode=o,this.context=u,this.next=g}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(r){return!r||r.depth<this.depth?(this.next=r,this):(r.next=this.sort(r.next),r)}get depth(){return this.context?this.context.length:0}}Rule.empty=new Rule([],2,null);function tagHighlighter(h,r){let o=Object.create(null);for(let k of h)if(!Array.isArray(k.tag))o[k.tag.id]=k.class;else for(let A of k.tag)o[A.id]=k.class;let{scope:u,all:g=null}=r||{};return{style:k=>{let A=g;for(let R of k)for(let q of R.set){let _=o[q.id];if(_){A=A?A+" "+_:_;break}}return A},scope:u}}function highlightTags(h,r){let o=null;for(let u of h){let g=u.style(r);g&&(o=o?o+" "+g:g)}return o}function highlightTree(h,r,o,u=0,g=h.length){let k=new HighlightBuilder(u,Array.isArray(r)?r:[r],o);k.highlightRange(h.cursor(),u,g,"",k.highlighters),k.flush(g)}class HighlightBuilder{constructor(r,o,u){this.at=r,this.highlighters=o,this.span=u,this.class=""}startSpan(r,o){o!=this.class&&(this.flush(r),r>this.at&&(this.at=r),this.class=o)}flush(r){r>this.at&&this.class&&this.span(this.at,r,this.class)}highlightRange(r,o,u,g,k){let{type:A,from:R,to:q}=r;if(R>=u||q<=o)return;A.isTop&&(k=this.highlighters.filter(re=>!re.scope||re.scope(A)));let _=g,ee=getStyleTags(r)||Rule.empty,te=highlightTags(k,ee.tags);if(te&&(_&&(_+=" "),_+=te,ee.mode==1&&(g+=(g?" ":"")+te)),this.startSpan(Math.max(o,R),_),ee.opaque)return;let ne=r.tree&&r.tree.prop(NodeProp.mounted);if(ne&&ne.overlay){let re=r.node.enter(ne.overlay[0].from+R,1),oe=this.highlighters.filter(pe=>!pe.scope||pe.scope(ne.tree.type)),le=r.firstChild();for(let pe=0,de=R;;pe++){let he=pe<ne.overlay.length?ne.overlay[pe]:null,ae=he?he.from+R:q,se=Math.max(o,de),ce=Math.min(u,ae);if(se<ce&&le)for(;r.from<ce&&(this.highlightRange(r,se,ce,g,k),this.startSpan(Math.min(ce,r.to),_),!(r.to>=ae||!r.nextSibling())););if(!he||ae>u)break;de=he.to+R,de>o&&(this.highlightRange(re.cursor(),Math.max(o,he.from+R),Math.min(u,de),"",oe),this.startSpan(Math.min(u,de),_))}le&&r.parent()}else if(r.firstChild()){ne&&(g="");do if(!(r.to<=o)){if(r.from>=u)break;this.highlightRange(r,o,u,g,k),this.startSpan(Math.min(u,r.to),_)}while(r.nextSibling());r.parent()}}}function getStyleTags(h){let r=h.type.prop(ruleNodeProp);for(;r&&r.context&&!h.matchContext(r.context);)r=r.next;return r||null}const t=Tag.define,comment=t(),name=t(),typeName=t(name),propertyName=t(name),literal=t(),string=t(literal),number=t(literal),content=t(),heading=t(content),keyword=t(),operator=t(),punctuation=t(),bracket=t(punctuation),meta=t(),tags$1={comment,lineComment:t(comment),blockComment:t(comment),docComment:t(comment),name,variableName:t(name),typeName,tagName:t(typeName),propertyName,attributeName:t(propertyName),className:t(name),labelName:t(name),namespace:t(name),macroName:t(name),literal,string,docString:t(string),character:t(string),attributeValue:t(string),number,integer:t(number),float:t(number),bool:t(literal),regexp:t(literal),escape:t(literal),color:t(literal),url:t(literal),keyword,self:t(keyword),null:t(keyword),atom:t(keyword),unit:t(keyword),modifier:t(keyword),operatorKeyword:t(keyword),controlKeyword:t(keyword),definitionKeyword:t(keyword),moduleKeyword:t(keyword),operator,derefOperator:t(operator),arithmeticOperator:t(operator),logicOperator:t(operator),bitwiseOperator:t(operator),compareOperator:t(operator),updateOperator:t(operator),definitionOperator:t(operator),typeOperator:t(operator),controlOperator:t(operator),punctuation,separator:t(punctuation),bracket,angleBracket:t(bracket),squareBracket:t(bracket),paren:t(bracket),brace:t(bracket),content,heading,heading1:t(heading),heading2:t(heading),heading3:t(heading),heading4:t(heading),heading5:t(heading),heading6:t(heading),contentSeparator:t(content),list:t(content),quote:t(content),emphasis:t(content),strong:t(content),link:t(content),monospace:t(content),strikethrough:t(content),inserted:t(),deleted:t(),changed:t(),invalid:t(),meta,documentMeta:t(meta),annotation:t(meta),processingInstruction:t(meta),definition:Tag.defineModifier("definition"),constant:Tag.defineModifier("constant"),function:Tag.defineModifier("function"),standard:Tag.defineModifier("standard"),local:Tag.defineModifier("local"),special:Tag.defineModifier("special")};for(let h in tags$1){let r=tags$1[h];r instanceof Tag&&(r.name=h)}tagHighlighter([{tag:tags$1.link,class:"tok-link"},{tag:tags$1.heading,class:"tok-heading"},{tag:tags$1.emphasis,class:"tok-emphasis"},{tag:tags$1.strong,class:"tok-strong"},{tag:tags$1.keyword,class:"tok-keyword"},{tag:tags$1.atom,class:"tok-atom"},{tag:tags$1.bool,class:"tok-bool"},{tag:tags$1.url,class:"tok-url"},{tag:tags$1.labelName,class:"tok-labelName"},{tag:tags$1.inserted,class:"tok-inserted"},{tag:tags$1.deleted,class:"tok-deleted"},{tag:tags$1.literal,class:"tok-literal"},{tag:tags$1.string,class:"tok-string"},{tag:tags$1.number,class:"tok-number"},{tag:[tags$1.regexp,tags$1.escape,tags$1.special(tags$1.string)],class:"tok-string2"},{tag:tags$1.variableName,class:"tok-variableName"},{tag:tags$1.local(tags$1.variableName),class:"tok-variableName tok-local"},{tag:tags$1.definition(tags$1.variableName),class:"tok-variableName tok-definition"},{tag:tags$1.special(tags$1.variableName),class:"tok-variableName2"},{tag:tags$1.definition(tags$1.propertyName),class:"tok-propertyName tok-definition"},{tag:tags$1.typeName,class:"tok-typeName"},{tag:tags$1.namespace,class:"tok-namespace"},{tag:tags$1.className,class:"tok-className"},{tag:tags$1.macroName,class:"tok-macroName"},{tag:tags$1.propertyName,class:"tok-propertyName"},{tag:tags$1.operator,class:"tok-operator"},{tag:tags$1.comment,class:"tok-comment"},{tag:tags$1.meta,class:"tok-meta"},{tag:tags$1.invalid,class:"tok-invalid"},{tag:tags$1.punctuation,class:"tok-punctuation"}]);var _a;const languageDataProp=new NodeProp;function defineLanguageFacet(h){return Facet.define({combine:h?r=>r.concat(h):void 0})}const sublanguageProp=new NodeProp;class Language{constructor(r,o,u=[],g=""){this.data=r,this.name=g,EditorState.prototype.hasOwnProperty("tree")||Object.defineProperty(EditorState.prototype,"tree",{get(){return syntaxTree(this)}}),this.parser=o,this.extension=[language.of(this),EditorState.languageData.of((k,A,R)=>{let q=topNodeAt(k,A,R),_=q.type.prop(languageDataProp);if(!_)return[];let ee=k.facet(_),te=q.type.prop(sublanguageProp);if(te){let ne=q.resolve(A-q.from,R);for(let re of te)if(re.test(ne,k)){let oe=k.facet(re.facet);return re.type=="replace"?oe:oe.concat(ee)}}return ee})].concat(u)}isActiveAt(r,o,u=-1){return topNodeAt(r,o,u).type.prop(languageDataProp)==this.data}findRegions(r){let o=r.facet(language);if((o==null?void 0:o.data)==this.data)return[{from:0,to:r.doc.length}];if(!o||!o.allowsNesting)return[];let u=[],g=(k,A)=>{if(k.prop(languageDataProp)==this.data){u.push({from:A,to:A+k.length});return}let R=k.prop(NodeProp.mounted);if(R){if(R.tree.prop(languageDataProp)==this.data){if(R.overlay)for(let q of R.overlay)u.push({from:q.from+A,to:q.to+A});else u.push({from:A,to:A+k.length});return}else if(R.overlay){let q=u.length;if(g(R.tree,R.overlay[0].from+A),u.length>q)return}}for(let q=0;q<k.children.length;q++){let _=k.children[q];_ instanceof Tree&&g(_,k.positions[q]+A)}};return g(syntaxTree(r),0),u}get allowsNesting(){return!0}}Language.setState=StateEffect.define();function topNodeAt(h,r,o){let u=h.facet(language),g=syntaxTree(h).topNode;if(!u||u.allowsNesting)for(let k=g;k;k=k.enter(r,o,IterMode.ExcludeBuffers))k.type.isTop&&(g=k);return g}class LRLanguage extends Language{constructor(r,o,u){super(r,o,[],u),this.parser=o}static define(r){let o=defineLanguageFacet(r.languageData);return new LRLanguage(o,r.parser.configure({props:[languageDataProp.add(u=>u.isTop?o:void 0)]}),r.name)}configure(r,o){return new LRLanguage(this.data,this.parser.configure(r),o||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function syntaxTree(h){let r=h.field(Language.state,!1);return r?r.tree:Tree.empty}class DocInput{constructor(r){this.doc=r,this.cursorPos=0,this.string="",this.cursor=r.iter()}get length(){return this.doc.length}syncTo(r){return this.string=this.cursor.next(r-this.cursorPos).value,this.cursorPos=r+this.string.length,this.cursorPos-this.string.length}chunk(r){return this.syncTo(r),this.string}get lineChunks(){return!0}read(r,o){let u=this.cursorPos-this.string.length;return r<u||o>=this.cursorPos?this.doc.sliceString(r,o):this.string.slice(r-u,o-u)}}let currentContext=null;class ParseContext{constructor(r,o,u=[],g,k,A,R,q){this.parser=r,this.state=o,this.fragments=u,this.tree=g,this.treeLen=k,this.viewport=A,this.skipped=R,this.scheduleOn=q,this.parse=null,this.tempSkipped=[]}static create(r,o,u){return new ParseContext(r,o,[],Tree.empty,0,u,[],null)}startParse(){return this.parser.startParse(new DocInput(this.state.doc),this.fragments)}work(r,o){return o!=null&&o>=this.state.doc.length&&(o=void 0),this.tree!=Tree.empty&&this.isDone(o??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var u;if(typeof r=="number"){let g=Date.now()+r;r=()=>Date.now()>g}for(this.parse||(this.parse=this.startParse()),o!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>o)&&o<this.state.doc.length&&this.parse.stopAt(o);;){let g=this.parse.advance();if(g)if(this.fragments=this.withoutTempSkipped(TreeFragment.addTree(g,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(u=this.parse.stoppedAt)!==null&&u!==void 0?u:this.state.doc.length,this.tree=g,this.parse=null,this.treeLen<(o??this.state.doc.length))this.parse=this.startParse();else return!0;if(r())return!1}})}takeTree(){let r,o;this.parse&&(r=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>r)&&this.parse.stopAt(r),this.withContext(()=>{for(;!(o=this.parse.advance()););}),this.treeLen=r,this.tree=o,this.fragments=this.withoutTempSkipped(TreeFragment.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(r){let o=currentContext;currentContext=this;try{return r()}finally{currentContext=o}}withoutTempSkipped(r){for(let o;o=this.tempSkipped.pop();)r=cutFragments(r,o.from,o.to);return r}changes(r,o){let{fragments:u,tree:g,treeLen:k,viewport:A,skipped:R}=this;if(this.takeTree(),!r.empty){let q=[];if(r.iterChangedRanges((_,ee,te,ne)=>q.push({fromA:_,toA:ee,fromB:te,toB:ne})),u=TreeFragment.applyChanges(u,q),g=Tree.empty,k=0,A={from:r.mapPos(A.from,-1),to:r.mapPos(A.to,1)},this.skipped.length){R=[];for(let _ of this.skipped){let ee=r.mapPos(_.from,1),te=r.mapPos(_.to,-1);ee<te&&R.push({from:ee,to:te})}}}return new ParseContext(this.parser,o,u,g,k,A,R,this.scheduleOn)}updateViewport(r){if(this.viewport.from==r.from&&this.viewport.to==r.to)return!1;this.viewport=r;let o=this.skipped.length;for(let u=0;u<this.skipped.length;u++){let{from:g,to:k}=this.skipped[u];g<r.to&&k>r.from&&(this.fragments=cutFragments(this.fragments,g,k),this.skipped.splice(u--,1))}return this.skipped.length>=o?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(r,o){this.skipped.push({from:r,to:o})}static getSkippingParser(r){return new class extends Parser{createParse(o,u,g){let k=g[0].from,A=g[g.length-1].to;return{parsedPos:k,advance(){let q=currentContext;if(q){for(let _ of g)q.tempSkipped.push(_);r&&(q.scheduleOn=q.scheduleOn?Promise.all([q.scheduleOn,r]):r)}return this.parsedPos=A,new Tree(NodeType.none,[],[],A-k)},stoppedAt:null,stopAt(){}}}}}isDone(r){r=Math.min(r,this.state.doc.length);let o=this.fragments;return this.treeLen>=r&&o.length&&o[0].from==0&&o[0].to>=r}static get(){return currentContext}}function cutFragments(h,r,o){return TreeFragment.applyChanges(h,[{fromA:r,toA:o,fromB:r,toB:o}])}class LanguageState{constructor(r){this.context=r,this.tree=r.tree}apply(r){if(!r.docChanged&&this.tree==this.context.tree)return this;let o=this.context.changes(r.changes,r.state),u=this.context.treeLen==r.startState.doc.length?void 0:Math.max(r.changes.mapPos(this.context.treeLen),o.viewport.to);return o.work(20,u)||o.takeTree(),new LanguageState(o)}static init(r){let o=Math.min(3e3,r.doc.length),u=ParseContext.create(r.facet(language).parser,r,{from:0,to:o});return u.work(20,o)||u.takeTree(),new LanguageState(u)}}Language.state=StateField.define({create:LanguageState.init,update(h,r){for(let o of r.effects)if(o.is(Language.setState))return o.value;return r.startState.facet(language)!=r.state.facet(language)?LanguageState.init(r.state):h.apply(r)}});let requestIdle=h=>{let r=setTimeout(()=>h(),500);return()=>clearTimeout(r)};typeof requestIdleCallback<"u"&&(requestIdle=h=>{let r=-1,o=setTimeout(()=>{r=requestIdleCallback(h,{timeout:400})},100);return()=>r<0?clearTimeout(o):cancelIdleCallback(r)});const isInputPending=typeof navigator<"u"&&(!((_a=navigator.scheduling)===null||_a===void 0)&&_a.isInputPending)?()=>navigator.scheduling.isInputPending():null,parseWorker=ViewPlugin.fromClass(class{constructor(r){this.view=r,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(r){let o=this.view.state.field(Language.state).context;(o.updateViewport(r.view.viewport)||this.view.viewport.to>o.treeLen)&&this.scheduleWork(),(r.docChanged||r.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(o)}scheduleWork(){if(this.working)return;let{state:r}=this.view,o=r.field(Language.state);(o.tree!=o.context.tree||!o.context.isDone(r.doc.length))&&(this.working=requestIdle(this.work))}work(r){this.working=null;let o=Date.now();if(this.chunkEnd<o&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=o+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:u,viewport:{to:g}}=this.view,k=u.field(Language.state);if(k.tree==k.context.tree&&k.context.isDone(g+1e5))return;let A=Date.now()+Math.min(this.chunkBudget,100,r&&!isInputPending?Math.max(25,r.timeRemaining()-5):1e9),R=k.context.treeLen<g&&u.doc.length>g+1e3,q=k.context.work(()=>isInputPending&&isInputPending()||Date.now()>A,g+(R?0:1e5));this.chunkBudget-=Date.now()-o,(q||this.chunkBudget<=0)&&(k.context.takeTree(),this.view.dispatch({effects:Language.setState.of(new LanguageState(k.context))})),this.chunkBudget>0&&!(q&&!R)&&this.scheduleWork(),this.checkAsyncSchedule(k.context)}checkAsyncSchedule(r){r.scheduleOn&&(this.workScheduled++,r.scheduleOn.then(()=>this.scheduleWork()).catch(o=>logException(this.view.state,o)).then(()=>this.workScheduled--),r.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),language=Facet.define({combine(h){return h.length?h[0]:null},enables:h=>[Language.state,parseWorker,EditorView.contentAttributes.compute([h],r=>{let o=r.facet(h);return o&&o.name?{"data-language":o.name}:{}})]});class LanguageSupport{constructor(r,o=[]){this.language=r,this.support=o,this.extension=[r,o]}}class LanguageDescription{constructor(r,o,u,g,k,A=void 0){this.name=r,this.alias=o,this.extensions=u,this.filename=g,this.loadFunc=k,this.support=A,this.loading=null}load(){return this.loading||(this.loading=this.loadFunc().then(r=>this.support=r,r=>{throw this.loading=null,r}))}static of(r){let{load:o,support:u}=r;if(!o){if(!u)throw new RangeError("Must pass either 'load' or 'support' to LanguageDescription.of");o=()=>Promise.resolve(u)}return new LanguageDescription(r.name,(r.alias||[]).concat(r.name).map(g=>g.toLowerCase()),r.extensions||[],r.filename,o,u)}static matchFilename(r,o){for(let g of r)if(g.filename&&g.filename.test(o))return g;let u=/\.([^.]+)$/.exec(o);if(u){for(let g of r)if(g.extensions.indexOf(u[1])>-1)return g}return null}static matchLanguageName(r,o,u=!0){o=o.toLowerCase();for(let g of r)if(g.alias.some(k=>k==o))return g;if(u)for(let g of r)for(let k of g.alias){let A=o.indexOf(k);if(A>-1&&(k.length>2||!/\w/.test(o[A-1])&&!/\w/.test(o[A+k.length])))return g}return null}}const indentService=Facet.define(),indentUnit=Facet.define({combine:h=>{if(!h.length)return"  ";let r=h[0];if(!r||/\S/.test(r)||Array.from(r).some(o=>o!=r[0]))throw new Error("Invalid indent unit: "+JSON.stringify(h[0]));return r}});function getIndentUnit(h){let r=h.facet(indentUnit);return r.charCodeAt(0)==9?h.tabSize*r.length:r.length}function indentString(h,r){let o="",u=h.tabSize,g=h.facet(indentUnit)[0];if(g=="	"){for(;r>=u;)o+="	",r-=u;g=" "}for(let k=0;k<r;k++)o+=g;return o}function getIndentation(h,r){h instanceof EditorState&&(h=new IndentContext(h));for(let u of h.state.facet(indentService)){let g=u(h,r);if(g!==void 0)return g}let o=syntaxTree(h.state);return o.length>=r?syntaxIndentation(h,o,r):null}class IndentContext{constructor(r,o={}){this.state=r,this.options=o,this.unit=getIndentUnit(r)}lineAt(r,o=1){let u=this.state.doc.lineAt(r),{simulateBreak:g,simulateDoubleBreak:k}=this.options;return g!=null&&g>=u.from&&g<=u.to?k&&g==r?{text:"",from:r}:(o<0?g<r:g<=r)?{text:u.text.slice(g-u.from),from:g}:{text:u.text.slice(0,g-u.from),from:u.from}:u}textAfterPos(r,o=1){if(this.options.simulateDoubleBreak&&r==this.options.simulateBreak)return"";let{text:u,from:g}=this.lineAt(r,o);return u.slice(r-g,Math.min(u.length,r+100-g))}column(r,o=1){let{text:u,from:g}=this.lineAt(r,o),k=this.countColumn(u,r-g),A=this.options.overrideIndentation?this.options.overrideIndentation(g):-1;return A>-1&&(k+=A-this.countColumn(u,u.search(/\S|$/))),k}countColumn(r,o=r.length){return countColumn(r,this.state.tabSize,o)}lineIndent(r,o=1){let{text:u,from:g}=this.lineAt(r,o),k=this.options.overrideIndentation;if(k){let A=k(g);if(A>-1)return A}return this.countColumn(u,u.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const indentNodeProp=new NodeProp;function syntaxIndentation(h,r,o){let u=r.resolveStack(o),g=r.resolveInner(o,-1).resolve(o,0).enterUnfinishedNodesBefore(o);if(g!=u.node){let k=[];for(let A=g;A&&!(A.from<u.node.from||A.to>u.node.to||A.from==u.node.from&&A.type==u.node.type);A=A.parent)k.push(A);for(let A=k.length-1;A>=0;A--)u={node:k[A],next:u}}return indentFor(u,h,o)}function indentFor(h,r,o){for(let u=h;u;u=u.next){let g=indentStrategy(u.node);if(g)return g(TreeIndentContext.create(r,o,u))}return 0}function ignoreClosed(h){return h.pos==h.options.simulateBreak&&h.options.simulateDoubleBreak}function indentStrategy(h){let r=h.type.prop(indentNodeProp);if(r)return r;let o=h.firstChild,u;if(o&&(u=o.type.prop(NodeProp.closedBy))){let g=h.lastChild,k=g&&u.indexOf(g.name)>-1;return A=>delimitedStrategy(A,!0,1,void 0,k&&!ignoreClosed(A)?g.from:void 0)}return h.parent==null?topIndent:null}function topIndent(){return 0}class TreeIndentContext extends IndentContext{constructor(r,o,u){super(r.state,r.options),this.base=r,this.pos=o,this.context=u}get node(){return this.context.node}static create(r,o,u){return new TreeIndentContext(r,o,u)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(r){let o=this.state.doc.lineAt(r.from);for(;;){let u=r.resolve(o.from);for(;u.parent&&u.parent.from==u.from;)u=u.parent;if(isParent(u,r))break;o=this.state.doc.lineAt(u.from)}return this.lineIndent(o.from)}continue(){return indentFor(this.context.next,this.base,this.pos)}}function isParent(h,r){for(let o=r;o;o=o.parent)if(h==o)return!0;return!1}function bracketedAligned(h){let r=h.node,o=r.childAfter(r.from),u=r.lastChild;if(!o)return null;let g=h.options.simulateBreak,k=h.state.doc.lineAt(o.from),A=g==null||g<=k.from?k.to:Math.min(k.to,g);for(let R=o.to;;){let q=r.childAfter(R);if(!q||q==u)return null;if(!q.type.isSkipped){if(q.from>=A)return null;let _=/^ */.exec(k.text.slice(o.to-k.from))[0].length;return{from:o.from,to:o.to+_}}R=q.to}}function delimitedIndent({closing:h,align:r=!0,units:o=1}){return u=>delimitedStrategy(u,r,o,h)}function delimitedStrategy(h,r,o,u,g){let k=h.textAfter,A=k.match(/^\s*/)[0].length,R=u&&k.slice(A,A+u.length)==u||g==h.pos+A,q=r?bracketedAligned(h):null;return q?R?h.column(q.from):h.column(q.to):h.baseIndent+(R?0:h.unit*o)}const flatIndent=h=>h.baseIndent;function continuedIndent({except:h,units:r=1}={}){return o=>{let u=h&&h.test(o.textAfter);return o.baseIndent+(u?0:r*o.unit)}}const DontIndentBeyond=200;function indentOnInput(){return EditorState.transactionFilter.of(h=>{if(!h.docChanged||!h.isUserEvent("input.type")&&!h.isUserEvent("input.complete"))return h;let r=h.startState.languageDataAt("indentOnInput",h.startState.selection.main.head);if(!r.length)return h;let o=h.newDoc,{head:u}=h.newSelection.main,g=o.lineAt(u);if(u>g.from+DontIndentBeyond)return h;let k=o.sliceString(g.from,u);if(!r.some(_=>_.test(k)))return h;let{state:A}=h,R=-1,q=[];for(let{head:_}of A.selection.ranges){let ee=A.doc.lineAt(_);if(ee.from==R)continue;R=ee.from;let te=getIndentation(A,ee.from);if(te==null)continue;let ne=/^\s*/.exec(ee.text)[0],re=indentString(A,te);ne!=re&&q.push({from:ee.from,to:ee.from+ne.length,insert:re})}return q.length?[h,{changes:q,sequential:!0}]:h})}const foldService=Facet.define(),foldNodeProp=new NodeProp;function foldInside(h){let r=h.firstChild,o=h.lastChild;return r&&r.to<o.from?{from:r.to,to:o.type.isError?h.to:o.from}:null}function syntaxFolding(h,r,o){let u=syntaxTree(h);if(u.length<o)return null;let g=u.resolveStack(o,1),k=null;for(let A=g;A;A=A.next){let R=A.node;if(R.to<=o||R.from>o)continue;if(k&&R.from<r)break;let q=R.type.prop(foldNodeProp);if(q&&(R.to<u.length-50||u.length==h.doc.length||!isUnfinished(R))){let _=q(R,h);_&&_.from<=o&&_.from>=r&&_.to>o&&(k=_)}}return k}function isUnfinished(h){let r=h.lastChild;return r&&r.to==h.to&&r.type.isError}function foldable(h,r,o){for(let u of h.facet(foldService)){let g=u(h,r,o);if(g)return g}return syntaxFolding(h,r,o)}function mapRange(h,r){let o=r.mapPos(h.from,1),u=r.mapPos(h.to,-1);return o>=u?void 0:{from:o,to:u}}const foldEffect=StateEffect.define({map:mapRange}),unfoldEffect=StateEffect.define({map:mapRange});function selectedLines(h){let r=[];for(let{head:o}of h.state.selection.ranges)r.some(u=>u.from<=o&&u.to>=o)||r.push(h.lineBlockAt(o));return r}const foldState=StateField.define({create(){return Decoration.none},update(h,r){r.isUserEvent("delete")&&r.changes.iterChangedRanges((o,u)=>h=clearTouchedFolds(h,o,u)),h=h.map(r.changes);for(let o of r.effects)if(o.is(foldEffect)&&!foldExists(h,o.value.from,o.value.to)){let{preparePlaceholder:u}=r.state.facet(foldConfig),g=u?Decoration.replace({widget:new PreparedFoldWidget(u(r.state,o.value))}):foldWidget;h=h.update({add:[g.range(o.value.from,o.value.to)]})}else o.is(unfoldEffect)&&(h=h.update({filter:(u,g)=>o.value.from!=u||o.value.to!=g,filterFrom:o.value.from,filterTo:o.value.to}));return r.selection&&(h=clearTouchedFolds(h,r.selection.main.head)),h},provide:h=>EditorView.decorations.from(h),toJSON(h,r){let o=[];return h.between(0,r.doc.length,(u,g)=>{o.push(u,g)}),o},fromJSON(h){if(!Array.isArray(h)||h.length%2)throw new RangeError("Invalid JSON for fold state");let r=[];for(let o=0;o<h.length;){let u=h[o++],g=h[o++];if(typeof u!="number"||typeof g!="number")throw new RangeError("Invalid JSON for fold state");r.push(foldWidget.range(u,g))}return Decoration.set(r,!0)}});function clearTouchedFolds(h,r,o=r){let u=!1;return h.between(r,o,(g,k)=>{g<o&&k>r&&(u=!0)}),u?h.update({filterFrom:r,filterTo:o,filter:(g,k)=>g>=o||k<=r}):h}function findFold(h,r,o){var u;let g=null;return(u=h.field(foldState,!1))===null||u===void 0||u.between(r,o,(k,A)=>{(!g||g.from>k)&&(g={from:k,to:A})}),g}function foldExists(h,r,o){let u=!1;return h.between(r,r,(g,k)=>{g==r&&k==o&&(u=!0)}),u}function maybeEnable(h,r){return h.field(foldState,!1)?r:r.concat(StateEffect.appendConfig.of(codeFolding()))}const foldCode=h=>{for(let r of selectedLines(h)){let o=foldable(h.state,r.from,r.to);if(o)return h.dispatch({effects:maybeEnable(h.state,[foldEffect.of(o),announceFold(h,o)])}),!0}return!1},unfoldCode=h=>{if(!h.state.field(foldState,!1))return!1;let r=[];for(let o of selectedLines(h)){let u=findFold(h.state,o.from,o.to);u&&r.push(unfoldEffect.of(u),announceFold(h,u,!1))}return r.length&&h.dispatch({effects:r}),r.length>0};function announceFold(h,r,o=!0){let u=h.state.doc.lineAt(r.from).number,g=h.state.doc.lineAt(r.to).number;return EditorView.announce.of(`${h.state.phrase(o?"Folded lines":"Unfolded lines")} ${u} ${h.state.phrase("to")} ${g}.`)}const foldAll=h=>{let{state:r}=h,o=[];for(let u=0;u<r.doc.length;){let g=h.lineBlockAt(u),k=foldable(r,g.from,g.to);k&&o.push(foldEffect.of(k)),u=(k?h.lineBlockAt(k.to):g).to+1}return o.length&&h.dispatch({effects:maybeEnable(h.state,o)}),!!o.length},unfoldAll=h=>{let r=h.state.field(foldState,!1);if(!r||!r.size)return!1;let o=[];return r.between(0,h.state.doc.length,(u,g)=>{o.push(unfoldEffect.of({from:u,to:g}))}),h.dispatch({effects:o}),!0},foldKeymap=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:foldCode},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:unfoldCode},{key:"Ctrl-Alt-[",run:foldAll},{key:"Ctrl-Alt-]",run:unfoldAll}],defaultConfig={placeholderDOM:null,preparePlaceholder:null,placeholderText:""},foldConfig=Facet.define({combine(h){return combineConfig(h,defaultConfig)}});function codeFolding(h){return[foldState,baseTheme$1$2]}function widgetToDOM(h,r){let{state:o}=h,u=o.facet(foldConfig),g=A=>{let R=h.lineBlockAt(h.posAtDOM(A.target)),q=findFold(h.state,R.from,R.to);q&&h.dispatch({effects:unfoldEffect.of(q)}),A.preventDefault()};if(u.placeholderDOM)return u.placeholderDOM(h,g,r);let k=document.createElement("span");return k.textContent=u.placeholderText,k.setAttribute("aria-label",o.phrase("folded code")),k.title=o.phrase("unfold"),k.className="cm-foldPlaceholder",k.onclick=g,k}const foldWidget=Decoration.replace({widget:new class extends WidgetType{toDOM(h){return widgetToDOM(h,null)}}});class PreparedFoldWidget extends WidgetType{constructor(r){super(),this.value=r}eq(r){return this.value==r.value}toDOM(r){return widgetToDOM(r,this.value)}}const foldGutterDefaults={openText:"",closedText:"",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class FoldMarker extends GutterMarker{constructor(r,o){super(),this.config=r,this.open=o}eq(r){return this.config==r.config&&this.open==r.open}toDOM(r){if(this.config.markerDOM)return this.config.markerDOM(this.open);let o=document.createElement("span");return o.textContent=this.open?this.config.openText:this.config.closedText,o.title=r.state.phrase(this.open?"Fold line":"Unfold line"),o}}function foldGutter(h={}){let r={...foldGutterDefaults,...h},o=new FoldMarker(r,!0),u=new FoldMarker(r,!1),g=ViewPlugin.fromClass(class{constructor(A){this.from=A.viewport.from,this.markers=this.buildMarkers(A)}update(A){(A.docChanged||A.viewportChanged||A.startState.facet(language)!=A.state.facet(language)||A.startState.field(foldState,!1)!=A.state.field(foldState,!1)||syntaxTree(A.startState)!=syntaxTree(A.state)||r.foldingChanged(A))&&(this.markers=this.buildMarkers(A.view))}buildMarkers(A){let R=new RangeSetBuilder;for(let q of A.viewportLineBlocks){let _=findFold(A.state,q.from,q.to)?u:foldable(A.state,q.from,q.to)?o:null;_&&R.add(q.from,q.from,_)}return R.finish()}}),{domEventHandlers:k}=r;return[g,gutter({class:"cm-foldGutter",markers(A){var R;return((R=A.plugin(g))===null||R===void 0?void 0:R.markers)||RangeSet.empty},initialSpacer(){return new FoldMarker(r,!1)},domEventHandlers:{...k,click:(A,R,q)=>{if(k.click&&k.click(A,R,q))return!0;let _=findFold(A.state,R.from,R.to);if(_)return A.dispatch({effects:unfoldEffect.of(_)}),!0;let ee=foldable(A.state,R.from,R.to);return ee?(A.dispatch({effects:foldEffect.of(ee)}),!0):!1}}}),codeFolding()]}const baseTheme$1$2=EditorView.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class HighlightStyle{constructor(r,o){this.specs=r;let u;function g(R){let q=StyleModule.newName();return(u||(u=Object.create(null)))["."+q]=R,q}const k=typeof o.all=="string"?o.all:o.all?g(o.all):void 0,A=o.scope;this.scope=A instanceof Language?R=>R.prop(languageDataProp)==A.data:A?R=>R==A:void 0,this.style=tagHighlighter(r.map(R=>({tag:R.tag,class:R.class||g(Object.assign({},R,{tag:null}))})),{all:k}).style,this.module=u?new StyleModule(u):null,this.themeType=o.themeType}static define(r,o){return new HighlightStyle(r,o||{})}}const highlighterFacet=Facet.define(),fallbackHighlighter=Facet.define({combine(h){return h.length?[h[0]]:null}});function getHighlighters(h){let r=h.facet(highlighterFacet);return r.length?r:h.facet(fallbackHighlighter)}function syntaxHighlighting(h,r){let o=[treeHighlighter],u;return h instanceof HighlightStyle&&(h.module&&o.push(EditorView.styleModule.of(h.module)),u=h.themeType),r!=null&&r.fallback?o.push(fallbackHighlighter.of(h)):u?o.push(highlighterFacet.computeN([EditorView.darkTheme],g=>g.facet(EditorView.darkTheme)==(u=="dark")?[h]:[])):o.push(highlighterFacet.of(h)),o}class TreeHighlighter{constructor(r){this.markCache=Object.create(null),this.tree=syntaxTree(r.state),this.decorations=this.buildDeco(r,getHighlighters(r.state)),this.decoratedTo=r.viewport.to}update(r){let o=syntaxTree(r.state),u=getHighlighters(r.state),g=u!=getHighlighters(r.startState),{viewport:k}=r.view,A=r.changes.mapPos(this.decoratedTo,1);o.length<k.to&&!g&&o.type==this.tree.type&&A>=k.to?(this.decorations=this.decorations.map(r.changes),this.decoratedTo=A):(o!=this.tree||r.viewportChanged||g)&&(this.tree=o,this.decorations=this.buildDeco(r.view,u),this.decoratedTo=k.to)}buildDeco(r,o){if(!o||!this.tree.length)return Decoration.none;let u=new RangeSetBuilder;for(let{from:g,to:k}of r.visibleRanges)highlightTree(this.tree,o,(A,R,q)=>{u.add(A,R,this.markCache[q]||(this.markCache[q]=Decoration.mark({class:q})))},g,k);return u.finish()}}const treeHighlighter=Prec.high(ViewPlugin.fromClass(TreeHighlighter,{decorations:h=>h.decorations})),defaultHighlightStyle=HighlightStyle.define([{tag:tags$1.meta,color:"#404740"},{tag:tags$1.link,textDecoration:"underline"},{tag:tags$1.heading,textDecoration:"underline",fontWeight:"bold"},{tag:tags$1.emphasis,fontStyle:"italic"},{tag:tags$1.strong,fontWeight:"bold"},{tag:tags$1.strikethrough,textDecoration:"line-through"},{tag:tags$1.keyword,color:"#708"},{tag:[tags$1.atom,tags$1.bool,tags$1.url,tags$1.contentSeparator,tags$1.labelName],color:"#219"},{tag:[tags$1.literal,tags$1.inserted],color:"#164"},{tag:[tags$1.string,tags$1.deleted],color:"#a11"},{tag:[tags$1.regexp,tags$1.escape,tags$1.special(tags$1.string)],color:"#e40"},{tag:tags$1.definition(tags$1.variableName),color:"#00f"},{tag:tags$1.local(tags$1.variableName),color:"#30a"},{tag:[tags$1.typeName,tags$1.namespace],color:"#085"},{tag:tags$1.className,color:"#167"},{tag:[tags$1.special(tags$1.variableName),tags$1.macroName],color:"#256"},{tag:tags$1.definition(tags$1.propertyName),color:"#00c"},{tag:tags$1.comment,color:"#940"},{tag:tags$1.invalid,color:"#f00"}]),baseTheme$3=EditorView.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),DefaultScanDist=1e4,DefaultBrackets="()[]{}",bracketMatchingConfig=Facet.define({combine(h){return combineConfig(h,{afterCursor:!0,brackets:DefaultBrackets,maxScanDistance:DefaultScanDist,renderMatch:defaultRenderMatch})}}),matchingMark=Decoration.mark({class:"cm-matchingBracket"}),nonmatchingMark=Decoration.mark({class:"cm-nonmatchingBracket"});function defaultRenderMatch(h){let r=[],o=h.matched?matchingMark:nonmatchingMark;return r.push(o.range(h.start.from,h.start.to)),h.end&&r.push(o.range(h.end.from,h.end.to)),r}const bracketMatchingState=StateField.define({create(){return Decoration.none},update(h,r){if(!r.docChanged&&!r.selection)return h;let o=[],u=r.state.facet(bracketMatchingConfig);for(let g of r.state.selection.ranges){if(!g.empty)continue;let k=matchBrackets(r.state,g.head,-1,u)||g.head>0&&matchBrackets(r.state,g.head-1,1,u)||u.afterCursor&&(matchBrackets(r.state,g.head,1,u)||g.head<r.state.doc.length&&matchBrackets(r.state,g.head+1,-1,u));k&&(o=o.concat(u.renderMatch(k,r.state)))}return Decoration.set(o,!0)},provide:h=>EditorView.decorations.from(h)}),bracketMatchingUnique=[bracketMatchingState,baseTheme$3];function bracketMatching(h={}){return[bracketMatchingConfig.of(h),bracketMatchingUnique]}const bracketMatchingHandle=new NodeProp;function matchingNodes(h,r,o){let u=h.prop(r<0?NodeProp.openedBy:NodeProp.closedBy);if(u)return u;if(h.name.length==1){let g=o.indexOf(h.name);if(g>-1&&g%2==(r<0?1:0))return[o[g+r]]}return null}function findHandle(h){let r=h.type.prop(bracketMatchingHandle);return r?r(h.node):h}function matchBrackets(h,r,o,u={}){let g=u.maxScanDistance||DefaultScanDist,k=u.brackets||DefaultBrackets,A=syntaxTree(h),R=A.resolveInner(r,o);for(let q=R;q;q=q.parent){let _=matchingNodes(q.type,o,k);if(_&&q.from<q.to){let ee=findHandle(q);if(ee&&(o>0?r>=ee.from&&r<ee.to:r>ee.from&&r<=ee.to))return matchMarkedBrackets(h,r,o,q,ee,_,k)}}return matchPlainBrackets(h,r,o,A,R.type,g,k)}function matchMarkedBrackets(h,r,o,u,g,k,A){let R=u.parent,q={from:g.from,to:g.to},_=0,ee=R==null?void 0:R.cursor();if(ee&&(o<0?ee.childBefore(u.from):ee.childAfter(u.to)))do if(o<0?ee.to<=u.from:ee.from>=u.to){if(_==0&&k.indexOf(ee.type.name)>-1&&ee.from<ee.to){let te=findHandle(ee);return{start:q,end:te?{from:te.from,to:te.to}:void 0,matched:!0}}else if(matchingNodes(ee.type,o,A))_++;else if(matchingNodes(ee.type,-o,A)){if(_==0){let te=findHandle(ee);return{start:q,end:te&&te.from<te.to?{from:te.from,to:te.to}:void 0,matched:!1}}_--}}while(o<0?ee.prevSibling():ee.nextSibling());return{start:q,matched:!1}}function matchPlainBrackets(h,r,o,u,g,k,A){let R=o<0?h.sliceDoc(r-1,r):h.sliceDoc(r,r+1),q=A.indexOf(R);if(q<0||q%2==0!=o>0)return null;let _={from:o<0?r-1:r,to:o>0?r+1:r},ee=h.doc.iterRange(r,o>0?h.doc.length:0),te=0;for(let ne=0;!ee.next().done&&ne<=k;){let re=ee.value;o<0&&(ne+=re.length);let oe=r+ne*o;for(let le=o>0?0:re.length-1,pe=o>0?re.length:-1;le!=pe;le+=o){let de=A.indexOf(re[le]);if(!(de<0||u.resolveInner(oe+le,1).type!=g))if(de%2==0==o>0)te++;else{if(te==1)return{start:_,end:{from:oe+le,to:oe+le+1},matched:de>>1==q>>1};te--}}o>0&&(ne+=re.length)}return ee.done?{start:_,matched:!1}:null}const noTokens=Object.create(null),typeArray=[NodeType.none],warned=[],byTag=Object.create(null),defaultTable=Object.create(null);for(let[h,r]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])defaultTable[h]=createTokenType(noTokens,r);function warnForPart(h,r){warned.indexOf(h)>-1||(warned.push(h),console.warn(r))}function createTokenType(h,r){let o=[];for(let R of r.split(" ")){let q=[];for(let _ of R.split(".")){let ee=h[_]||tags$1[_];ee?typeof ee=="function"?q.length?q=q.map(ee):warnForPart(_,`Modifier ${_} used at start of tag`):q.length?warnForPart(_,`Tag ${_} used as modifier`):q=Array.isArray(ee)?ee:[ee]:warnForPart(_,`Unknown highlighting tag ${_}`)}for(let _ of q)o.push(_)}if(!o.length)return 0;let u=r.replace(/ /g,"_"),g=u+" "+o.map(R=>R.id),k=byTag[g];if(k)return k.id;let A=byTag[g]=NodeType.define({id:typeArray.length,name:u,props:[styleTags({[u]:o})]});return typeArray.push(A),A.id}Direction.RTL,Direction.LTR;const toggleComment=h=>{let{state:r}=h,o=r.doc.lineAt(r.selection.main.from),u=getConfig(h.state,o.from);return u.line?toggleLineComment(h):u.block?toggleBlockCommentByLine(h):!1};function command(h,r){return({state:o,dispatch:u})=>{if(o.readOnly)return!1;let g=h(r,o);return g?(u(o.update(g)),!0):!1}}const toggleLineComment=command(changeLineComment,0),toggleBlockComment=command(changeBlockComment,0),toggleBlockCommentByLine=command((h,r)=>changeBlockComment(h,r,selectedLineRanges(r)),0);function getConfig(h,r){let o=h.languageDataAt("commentTokens",r,1);return o.length?o[0]:{}}const SearchMargin=50;function findBlockComment(h,{open:r,close:o},u,g){let k=h.sliceDoc(u-SearchMargin,u),A=h.sliceDoc(g,g+SearchMargin),R=/\s*$/.exec(k)[0].length,q=/^\s*/.exec(A)[0].length,_=k.length-R;if(k.slice(_-r.length,_)==r&&A.slice(q,q+o.length)==o)return{open:{pos:u-R,margin:R&&1},close:{pos:g+q,margin:q&&1}};let ee,te;g-u<=2*SearchMargin?ee=te=h.sliceDoc(u,g):(ee=h.sliceDoc(u,u+SearchMargin),te=h.sliceDoc(g-SearchMargin,g));let ne=/^\s*/.exec(ee)[0].length,re=/\s*$/.exec(te)[0].length,oe=te.length-re-o.length;return ee.slice(ne,ne+r.length)==r&&te.slice(oe,oe+o.length)==o?{open:{pos:u+ne+r.length,margin:/\s/.test(ee.charAt(ne+r.length))?1:0},close:{pos:g-re-o.length,margin:/\s/.test(te.charAt(oe-1))?1:0}}:null}function selectedLineRanges(h){let r=[];for(let o of h.selection.ranges){let u=h.doc.lineAt(o.from),g=o.to<=u.to?u:h.doc.lineAt(o.to);g.from>u.from&&g.from==o.to&&(g=o.to==u.to+1?u:h.doc.lineAt(o.to-1));let k=r.length-1;k>=0&&r[k].to>u.from?r[k].to=g.to:r.push({from:u.from+/^\s*/.exec(u.text)[0].length,to:g.to})}return r}function changeBlockComment(h,r,o=r.selection.ranges){let u=o.map(k=>getConfig(r,k.from).block);if(!u.every(k=>k))return null;let g=o.map((k,A)=>findBlockComment(r,u[A],k.from,k.to));if(h!=2&&!g.every(k=>k))return{changes:r.changes(o.map((k,A)=>g[A]?[]:[{from:k.from,insert:u[A].open+" "},{from:k.to,insert:" "+u[A].close}]))};if(h!=1&&g.some(k=>k)){let k=[];for(let A=0,R;A<g.length;A++)if(R=g[A]){let q=u[A],{open:_,close:ee}=R;k.push({from:_.pos-q.open.length,to:_.pos+_.margin},{from:ee.pos-ee.margin,to:ee.pos+q.close.length})}return{changes:k}}return null}function changeLineComment(h,r,o=r.selection.ranges){let u=[],g=-1;for(let{from:k,to:A}of o){let R=u.length,q=1e9,_=getConfig(r,k).line;if(_){for(let ee=k;ee<=A;){let te=r.doc.lineAt(ee);if(te.from>g&&(k==A||A>te.from)){g=te.from;let ne=/^\s*/.exec(te.text)[0].length,re=ne==te.length,oe=te.text.slice(ne,ne+_.length)==_?ne:-1;ne<te.text.length&&ne<q&&(q=ne),u.push({line:te,comment:oe,token:_,indent:ne,empty:re,single:!1})}ee=te.to+1}if(q<1e9)for(let ee=R;ee<u.length;ee++)u[ee].indent<u[ee].line.text.length&&(u[ee].indent=q);u.length==R+1&&(u[R].single=!0)}}if(h!=2&&u.some(k=>k.comment<0&&(!k.empty||k.single))){let k=[];for(let{line:R,token:q,indent:_,empty:ee,single:te}of u)(te||!ee)&&k.push({from:R.from+_,insert:q+" "});let A=r.changes(k);return{changes:A,selection:r.selection.map(A,1)}}else if(h!=1&&u.some(k=>k.comment>=0)){let k=[];for(let{line:A,comment:R,token:q}of u)if(R>=0){let _=A.from+R,ee=_+q.length;A.text[ee-A.from]==" "&&ee++,k.push({from:_,to:ee})}return{changes:k}}return null}const fromHistory=Annotation.define(),isolateHistory=Annotation.define(),invertedEffects=Facet.define(),historyConfig=Facet.define({combine(h){return combineConfig(h,{minDepth:100,newGroupDelay:500,joinToEvent:(r,o)=>o},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(r,o)=>(u,g)=>r(u,g)||o(u,g)})}}),historyField_=StateField.define({create(){return HistoryState.empty},update(h,r){let o=r.state.facet(historyConfig),u=r.annotation(fromHistory);if(u){let q=HistEvent.fromTransaction(r,u.selection),_=u.side,ee=_==0?h.undone:h.done;return q?ee=updateBranch(ee,ee.length,o.minDepth,q):ee=addSelection(ee,r.startState.selection),new HistoryState(_==0?u.rest:ee,_==0?ee:u.rest)}let g=r.annotation(isolateHistory);if((g=="full"||g=="before")&&(h=h.isolate()),r.annotation(Transaction.addToHistory)===!1)return r.changes.empty?h:h.addMapping(r.changes.desc);let k=HistEvent.fromTransaction(r),A=r.annotation(Transaction.time),R=r.annotation(Transaction.userEvent);return k?h=h.addChanges(k,A,R,o,r):r.selection&&(h=h.addSelection(r.startState.selection,A,R,o.newGroupDelay)),(g=="full"||g=="after")&&(h=h.isolate()),h},toJSON(h){return{done:h.done.map(r=>r.toJSON()),undone:h.undone.map(r=>r.toJSON())}},fromJSON(h){return new HistoryState(h.done.map(HistEvent.fromJSON),h.undone.map(HistEvent.fromJSON))}});function history$1(h={}){return[historyField_,historyConfig.of(h),EditorView.domEventHandlers({beforeinput(r,o){let u=r.inputType=="historyUndo"?undo:r.inputType=="historyRedo"?redo:null;return u?(r.preventDefault(),u(o)):!1}})]}function cmd(h,r){return function({state:o,dispatch:u}){if(!r&&o.readOnly)return!1;let g=o.field(historyField_,!1);if(!g)return!1;let k=g.pop(h,o,r);return k?(u(k),!0):!1}}const undo=cmd(0,!1),redo=cmd(1,!1),undoSelection=cmd(0,!0),redoSelection=cmd(1,!0);class HistEvent{constructor(r,o,u,g,k){this.changes=r,this.effects=o,this.mapped=u,this.startSelection=g,this.selectionsAfter=k}setSelAfter(r){return new HistEvent(this.changes,this.effects,this.mapped,this.startSelection,r)}toJSON(){var r,o,u;return{changes:(r=this.changes)===null||r===void 0?void 0:r.toJSON(),mapped:(o=this.mapped)===null||o===void 0?void 0:o.toJSON(),startSelection:(u=this.startSelection)===null||u===void 0?void 0:u.toJSON(),selectionsAfter:this.selectionsAfter.map(g=>g.toJSON())}}static fromJSON(r){return new HistEvent(r.changes&&ChangeSet.fromJSON(r.changes),[],r.mapped&&ChangeDesc.fromJSON(r.mapped),r.startSelection&&EditorSelection.fromJSON(r.startSelection),r.selectionsAfter.map(EditorSelection.fromJSON))}static fromTransaction(r,o){let u=none$2;for(let g of r.startState.facet(invertedEffects)){let k=g(r);k.length&&(u=u.concat(k))}return!u.length&&r.changes.empty?null:new HistEvent(r.changes.invert(r.startState.doc),u,void 0,o||r.startState.selection,none$2)}static selection(r){return new HistEvent(void 0,none$2,void 0,void 0,r)}}function updateBranch(h,r,o,u){let g=r+1>o+20?r-o-1:0,k=h.slice(g,r);return k.push(u),k}function isAdjacent(h,r){let o=[],u=!1;return h.iterChangedRanges((g,k)=>o.push(g,k)),r.iterChangedRanges((g,k,A,R)=>{for(let q=0;q<o.length;){let _=o[q++],ee=o[q++];R>=_&&A<=ee&&(u=!0)}}),u}function eqSelectionShape(h,r){return h.ranges.length==r.ranges.length&&h.ranges.filter((o,u)=>o.empty!=r.ranges[u].empty).length===0}function conc(h,r){return h.length?r.length?h.concat(r):h:r}const none$2=[],MaxSelectionsPerEvent=200;function addSelection(h,r){if(h.length){let o=h[h.length-1],u=o.selectionsAfter.slice(Math.max(0,o.selectionsAfter.length-MaxSelectionsPerEvent));return u.length&&u[u.length-1].eq(r)?h:(u.push(r),updateBranch(h,h.length-1,1e9,o.setSelAfter(u)))}else return[HistEvent.selection([r])]}function popSelection(h){let r=h[h.length-1],o=h.slice();return o[h.length-1]=r.setSelAfter(r.selectionsAfter.slice(0,r.selectionsAfter.length-1)),o}function addMappingToBranch(h,r){if(!h.length)return h;let o=h.length,u=none$2;for(;o;){let g=mapEvent(h[o-1],r,u);if(g.changes&&!g.changes.empty||g.effects.length){let k=h.slice(0,o);return k[o-1]=g,k}else r=g.mapped,o--,u=g.selectionsAfter}return u.length?[HistEvent.selection(u)]:none$2}function mapEvent(h,r,o){let u=conc(h.selectionsAfter.length?h.selectionsAfter.map(R=>R.map(r)):none$2,o);if(!h.changes)return HistEvent.selection(u);let g=h.changes.map(r),k=r.mapDesc(h.changes,!0),A=h.mapped?h.mapped.composeDesc(k):k;return new HistEvent(g,StateEffect.mapEffects(h.effects,r),A,h.startSelection.map(k),u)}const joinableUserEvent=/^(input\.type|delete)($|\.)/;class HistoryState{constructor(r,o,u=0,g=void 0){this.done=r,this.undone=o,this.prevTime=u,this.prevUserEvent=g}isolate(){return this.prevTime?new HistoryState(this.done,this.undone):this}addChanges(r,o,u,g,k){let A=this.done,R=A[A.length-1];return R&&R.changes&&!R.changes.empty&&r.changes&&(!u||joinableUserEvent.test(u))&&(!R.selectionsAfter.length&&o-this.prevTime<g.newGroupDelay&&g.joinToEvent(k,isAdjacent(R.changes,r.changes))||u=="input.type.compose")?A=updateBranch(A,A.length-1,g.minDepth,new HistEvent(r.changes.compose(R.changes),conc(StateEffect.mapEffects(r.effects,R.changes),R.effects),R.mapped,R.startSelection,none$2)):A=updateBranch(A,A.length,g.minDepth,r),new HistoryState(A,none$2,o,u)}addSelection(r,o,u,g){let k=this.done.length?this.done[this.done.length-1].selectionsAfter:none$2;return k.length>0&&o-this.prevTime<g&&u==this.prevUserEvent&&u&&/^select($|\.)/.test(u)&&eqSelectionShape(k[k.length-1],r)?this:new HistoryState(addSelection(this.done,r),this.undone,o,u)}addMapping(r){return new HistoryState(addMappingToBranch(this.done,r),addMappingToBranch(this.undone,r),this.prevTime,this.prevUserEvent)}pop(r,o,u){let g=r==0?this.done:this.undone;if(g.length==0)return null;let k=g[g.length-1],A=k.selectionsAfter[0]||o.selection;if(u&&k.selectionsAfter.length)return o.update({selection:k.selectionsAfter[k.selectionsAfter.length-1],annotations:fromHistory.of({side:r,rest:popSelection(g),selection:A}),userEvent:r==0?"select.undo":"select.redo",scrollIntoView:!0});if(k.changes){let R=g.length==1?none$2:g.slice(0,g.length-1);return k.mapped&&(R=addMappingToBranch(R,k.mapped)),o.update({changes:k.changes,selection:k.startSelection,effects:k.effects,annotations:fromHistory.of({side:r,rest:R,selection:A}),filter:!1,userEvent:r==0?"undo":"redo",scrollIntoView:!0})}else return null}}HistoryState.empty=new HistoryState(none$2,none$2);const historyKeymap=[{key:"Mod-z",run:undo,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:redo,preventDefault:!0},{linux:"Ctrl-Shift-z",run:redo,preventDefault:!0},{key:"Mod-u",run:undoSelection,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:redoSelection,preventDefault:!0}];function updateSel(h,r){return EditorSelection.create(h.ranges.map(r),h.mainIndex)}function setSel(h,r){return h.update({selection:r,scrollIntoView:!0,userEvent:"select"})}function moveSel({state:h,dispatch:r},o){let u=updateSel(h.selection,o);return u.eq(h.selection,!0)?!1:(r(setSel(h,u)),!0)}function rangeEnd(h,r){return EditorSelection.cursor(r?h.to:h.from)}function cursorByChar(h,r){return moveSel(h,o=>o.empty?h.moveByChar(o,r):rangeEnd(o,r))}function ltrAtCursor(h){return h.textDirectionAt(h.state.selection.main.head)==Direction.LTR}const cursorCharLeft=h=>cursorByChar(h,!ltrAtCursor(h)),cursorCharRight=h=>cursorByChar(h,ltrAtCursor(h));function cursorByGroup(h,r){return moveSel(h,o=>o.empty?h.moveByGroup(o,r):rangeEnd(o,r))}const cursorGroupLeft=h=>cursorByGroup(h,!ltrAtCursor(h)),cursorGroupRight=h=>cursorByGroup(h,ltrAtCursor(h));function interestingNode(h,r,o){if(r.type.prop(o))return!0;let u=r.to-r.from;return u&&(u>2||/[^\s,.;:]/.test(h.sliceDoc(r.from,r.to)))||r.firstChild}function moveBySyntax(h,r,o){let u=syntaxTree(h).resolveInner(r.head),g=o?NodeProp.closedBy:NodeProp.openedBy;for(let q=r.head;;){let _=o?u.childAfter(q):u.childBefore(q);if(!_)break;interestingNode(h,_,g)?u=_:q=o?_.to:_.from}let k=u.type.prop(g),A,R;return k&&(A=o?matchBrackets(h,u.from,1):matchBrackets(h,u.to,-1))&&A.matched?R=o?A.end.to:A.end.from:R=o?u.to:u.from,EditorSelection.cursor(R,o?-1:1)}const cursorSyntaxLeft=h=>moveSel(h,r=>moveBySyntax(h.state,r,!ltrAtCursor(h))),cursorSyntaxRight=h=>moveSel(h,r=>moveBySyntax(h.state,r,ltrAtCursor(h)));function cursorByLine(h,r){return moveSel(h,o=>{if(!o.empty)return rangeEnd(o,r);let u=h.moveVertically(o,r);return u.head!=o.head?u:h.moveToLineBoundary(o,r)})}const cursorLineUp=h=>cursorByLine(h,!1),cursorLineDown=h=>cursorByLine(h,!0);function pageInfo(h){let r=h.scrollDOM.clientHeight<h.scrollDOM.scrollHeight-2,o=0,u=0,g;if(r){for(let k of h.state.facet(EditorView.scrollMargins)){let A=k(h);A!=null&&A.top&&(o=Math.max(A==null?void 0:A.top,o)),A!=null&&A.bottom&&(u=Math.max(A==null?void 0:A.bottom,u))}g=h.scrollDOM.clientHeight-o-u}else g=(h.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:o,marginBottom:u,selfScroll:r,height:Math.max(h.defaultLineHeight,g-5)}}function cursorByPage(h,r){let o=pageInfo(h),{state:u}=h,g=updateSel(u.selection,A=>A.empty?h.moveVertically(A,r,o.height):rangeEnd(A,r));if(g.eq(u.selection))return!1;let k;if(o.selfScroll){let A=h.coordsAtPos(u.selection.main.head),R=h.scrollDOM.getBoundingClientRect(),q=R.top+o.marginTop,_=R.bottom-o.marginBottom;A&&A.top>q&&A.bottom<_&&(k=EditorView.scrollIntoView(g.main.head,{y:"start",yMargin:A.top-q}))}return h.dispatch(setSel(u,g),{effects:k}),!0}const cursorPageUp=h=>cursorByPage(h,!1),cursorPageDown=h=>cursorByPage(h,!0);function moveByLineBoundary(h,r,o){let u=h.lineBlockAt(r.head),g=h.moveToLineBoundary(r,o);if(g.head==r.head&&g.head!=(o?u.to:u.from)&&(g=h.moveToLineBoundary(r,o,!1)),!o&&g.head==u.from&&u.length){let k=/^\s*/.exec(h.state.sliceDoc(u.from,Math.min(u.from+100,u.to)))[0].length;k&&r.head!=u.from+k&&(g=EditorSelection.cursor(u.from+k))}return g}const cursorLineBoundaryForward=h=>moveSel(h,r=>moveByLineBoundary(h,r,!0)),cursorLineBoundaryBackward=h=>moveSel(h,r=>moveByLineBoundary(h,r,!1)),cursorLineBoundaryLeft=h=>moveSel(h,r=>moveByLineBoundary(h,r,!ltrAtCursor(h))),cursorLineBoundaryRight=h=>moveSel(h,r=>moveByLineBoundary(h,r,ltrAtCursor(h))),cursorLineStart=h=>moveSel(h,r=>EditorSelection.cursor(h.lineBlockAt(r.head).from,1)),cursorLineEnd=h=>moveSel(h,r=>EditorSelection.cursor(h.lineBlockAt(r.head).to,-1));function toMatchingBracket(h,r,o){let u=!1,g=updateSel(h.selection,k=>{let A=matchBrackets(h,k.head,-1)||matchBrackets(h,k.head,1)||k.head>0&&matchBrackets(h,k.head-1,1)||k.head<h.doc.length&&matchBrackets(h,k.head+1,-1);if(!A||!A.end)return k;u=!0;let R=A.start.from==k.head?A.end.to:A.end.from;return EditorSelection.cursor(R)});return u?(r(setSel(h,g)),!0):!1}const cursorMatchingBracket=({state:h,dispatch:r})=>toMatchingBracket(h,r);function extendSel(h,r){let o=updateSel(h.state.selection,u=>{let g=r(u);return EditorSelection.range(u.anchor,g.head,g.goalColumn,g.bidiLevel||void 0)});return o.eq(h.state.selection)?!1:(h.dispatch(setSel(h.state,o)),!0)}function selectByChar(h,r){return extendSel(h,o=>h.moveByChar(o,r))}const selectCharLeft=h=>selectByChar(h,!ltrAtCursor(h)),selectCharRight=h=>selectByChar(h,ltrAtCursor(h));function selectByGroup(h,r){return extendSel(h,o=>h.moveByGroup(o,r))}const selectGroupLeft=h=>selectByGroup(h,!ltrAtCursor(h)),selectGroupRight=h=>selectByGroup(h,ltrAtCursor(h)),selectSyntaxLeft=h=>extendSel(h,r=>moveBySyntax(h.state,r,!ltrAtCursor(h))),selectSyntaxRight=h=>extendSel(h,r=>moveBySyntax(h.state,r,ltrAtCursor(h)));function selectByLine(h,r){return extendSel(h,o=>h.moveVertically(o,r))}const selectLineUp=h=>selectByLine(h,!1),selectLineDown=h=>selectByLine(h,!0);function selectByPage(h,r){return extendSel(h,o=>h.moveVertically(o,r,pageInfo(h).height))}const selectPageUp=h=>selectByPage(h,!1),selectPageDown=h=>selectByPage(h,!0),selectLineBoundaryForward=h=>extendSel(h,r=>moveByLineBoundary(h,r,!0)),selectLineBoundaryBackward=h=>extendSel(h,r=>moveByLineBoundary(h,r,!1)),selectLineBoundaryLeft=h=>extendSel(h,r=>moveByLineBoundary(h,r,!ltrAtCursor(h))),selectLineBoundaryRight=h=>extendSel(h,r=>moveByLineBoundary(h,r,ltrAtCursor(h))),selectLineStart=h=>extendSel(h,r=>EditorSelection.cursor(h.lineBlockAt(r.head).from)),selectLineEnd=h=>extendSel(h,r=>EditorSelection.cursor(h.lineBlockAt(r.head).to)),cursorDocStart=({state:h,dispatch:r})=>(r(setSel(h,{anchor:0})),!0),cursorDocEnd=({state:h,dispatch:r})=>(r(setSel(h,{anchor:h.doc.length})),!0),selectDocStart=({state:h,dispatch:r})=>(r(setSel(h,{anchor:h.selection.main.anchor,head:0})),!0),selectDocEnd=({state:h,dispatch:r})=>(r(setSel(h,{anchor:h.selection.main.anchor,head:h.doc.length})),!0),selectAll=({state:h,dispatch:r})=>(r(h.update({selection:{anchor:0,head:h.doc.length},userEvent:"select"})),!0),selectLine=({state:h,dispatch:r})=>{let o=selectedLineBlocks(h).map(({from:u,to:g})=>EditorSelection.range(u,Math.min(g+1,h.doc.length)));return r(h.update({selection:EditorSelection.create(o),userEvent:"select"})),!0},selectParentSyntax=({state:h,dispatch:r})=>{let o=updateSel(h.selection,u=>{let g=syntaxTree(h),k=g.resolveStack(u.from,1);if(u.empty){let A=g.resolveStack(u.from,-1);A.node.from>=k.node.from&&A.node.to<=k.node.to&&(k=A)}for(let A=k;A;A=A.next){let{node:R}=A;if((R.from<u.from&&R.to>=u.to||R.to>u.to&&R.from<=u.from)&&A.next)return EditorSelection.range(R.to,R.from)}return u});return o.eq(h.selection)?!1:(r(setSel(h,o)),!0)};function addCursorVertically(h,r){let{state:o}=h,u=o.selection,g=o.selection.ranges.slice();for(let k of o.selection.ranges){let A=o.doc.lineAt(k.head);if(r?A.to<h.state.doc.length:A.from>0)for(let R=k;;){let q=h.moveVertically(R,r);if(q.head<A.from||q.head>A.to){g.some(_=>_.head==q.head)||g.push(q);break}else{if(q.head==R.head)break;R=q}}}return g.length==u.ranges.length?!1:(h.dispatch(setSel(o,EditorSelection.create(g,g.length-1))),!0)}const addCursorAbove=h=>addCursorVertically(h,!1),addCursorBelow=h=>addCursorVertically(h,!0),simplifySelection=({state:h,dispatch:r})=>{let o=h.selection,u=null;return o.ranges.length>1?u=EditorSelection.create([o.main]):o.main.empty||(u=EditorSelection.create([EditorSelection.cursor(o.main.head)])),u?(r(setSel(h,u)),!0):!1};function deleteBy(h,r){if(h.state.readOnly)return!1;let o="delete.selection",{state:u}=h,g=u.changeByRange(k=>{let{from:A,to:R}=k;if(A==R){let q=r(k);q<A?(o="delete.backward",q=skipAtomic(h,q,!1)):q>A&&(o="delete.forward",q=skipAtomic(h,q,!0)),A=Math.min(A,q),R=Math.max(R,q)}else A=skipAtomic(h,A,!1),R=skipAtomic(h,R,!0);return A==R?{range:k}:{changes:{from:A,to:R},range:EditorSelection.cursor(A,A<k.head?-1:1)}});return g.changes.empty?!1:(h.dispatch(u.update(g,{scrollIntoView:!0,userEvent:o,effects:o=="delete.selection"?EditorView.announce.of(u.phrase("Selection deleted")):void 0})),!0)}function skipAtomic(h,r,o){if(h instanceof EditorView)for(let u of h.state.facet(EditorView.atomicRanges).map(g=>g(h)))u.between(r,r,(g,k)=>{g<r&&k>r&&(r=o?k:g)});return r}const deleteByChar=(h,r,o)=>deleteBy(h,u=>{let g=u.from,{state:k}=h,A=k.doc.lineAt(g),R,q;if(o&&!r&&g>A.from&&g<A.from+200&&!/[^ \t]/.test(R=A.text.slice(0,g-A.from))){if(R[R.length-1]=="	")return g-1;let _=countColumn(R,k.tabSize),ee=_%getIndentUnit(k)||getIndentUnit(k);for(let te=0;te<ee&&R[R.length-1-te]==" ";te++)g--;q=g}else q=findClusterBreak(A.text,g-A.from,r,r)+A.from,q==g&&A.number!=(r?k.doc.lines:1)?q+=r?1:-1:!r&&/[\ufe00-\ufe0f]/.test(A.text.slice(q-A.from,g-A.from))&&(q=findClusterBreak(A.text,q-A.from,!1,!1)+A.from);return q}),deleteCharBackward=h=>deleteByChar(h,!1,!0),deleteCharForward=h=>deleteByChar(h,!0,!1),deleteByGroup=(h,r)=>deleteBy(h,o=>{let u=o.head,{state:g}=h,k=g.doc.lineAt(u),A=g.charCategorizer(u);for(let R=null;;){if(u==(r?k.to:k.from)){u==o.head&&k.number!=(r?g.doc.lines:1)&&(u+=r?1:-1);break}let q=findClusterBreak(k.text,u-k.from,r)+k.from,_=k.text.slice(Math.min(u,q)-k.from,Math.max(u,q)-k.from),ee=A(_);if(R!=null&&ee!=R)break;(_!=" "||u!=o.head)&&(R=ee),u=q}return u}),deleteGroupBackward=h=>deleteByGroup(h,!1),deleteGroupForward=h=>deleteByGroup(h,!0),deleteToLineEnd=h=>deleteBy(h,r=>{let o=h.lineBlockAt(r.head).to;return r.head<o?o:Math.min(h.state.doc.length,r.head+1)}),deleteLineBoundaryBackward=h=>deleteBy(h,r=>{let o=h.moveToLineBoundary(r,!1).head;return r.head>o?o:Math.max(0,r.head-1)}),deleteLineBoundaryForward=h=>deleteBy(h,r=>{let o=h.moveToLineBoundary(r,!0).head;return r.head<o?o:Math.min(h.state.doc.length,r.head+1)}),splitLine=({state:h,dispatch:r})=>{if(h.readOnly)return!1;let o=h.changeByRange(u=>({changes:{from:u.from,to:u.to,insert:Text.of(["",""])},range:EditorSelection.cursor(u.from)}));return r(h.update(o,{scrollIntoView:!0,userEvent:"input"})),!0},transposeChars=({state:h,dispatch:r})=>{if(h.readOnly)return!1;let o=h.changeByRange(u=>{if(!u.empty||u.from==0||u.from==h.doc.length)return{range:u};let g=u.from,k=h.doc.lineAt(g),A=g==k.from?g-1:findClusterBreak(k.text,g-k.from,!1)+k.from,R=g==k.to?g+1:findClusterBreak(k.text,g-k.from,!0)+k.from;return{changes:{from:A,to:R,insert:h.doc.slice(g,R).append(h.doc.slice(A,g))},range:EditorSelection.cursor(R)}});return o.changes.empty?!1:(r(h.update(o,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function selectedLineBlocks(h){let r=[],o=-1;for(let u of h.selection.ranges){let g=h.doc.lineAt(u.from),k=h.doc.lineAt(u.to);if(!u.empty&&u.to==k.from&&(k=h.doc.lineAt(u.to-1)),o>=g.number){let A=r[r.length-1];A.to=k.to,A.ranges.push(u)}else r.push({from:g.from,to:k.to,ranges:[u]});o=k.number+1}return r}function moveLine(h,r,o){if(h.readOnly)return!1;let u=[],g=[];for(let k of selectedLineBlocks(h)){if(o?k.to==h.doc.length:k.from==0)continue;let A=h.doc.lineAt(o?k.to+1:k.from-1),R=A.length+1;if(o){u.push({from:k.to,to:A.to},{from:k.from,insert:A.text+h.lineBreak});for(let q of k.ranges)g.push(EditorSelection.range(Math.min(h.doc.length,q.anchor+R),Math.min(h.doc.length,q.head+R)))}else{u.push({from:A.from,to:k.from},{from:k.to,insert:h.lineBreak+A.text});for(let q of k.ranges)g.push(EditorSelection.range(q.anchor-R,q.head-R))}}return u.length?(r(h.update({changes:u,scrollIntoView:!0,selection:EditorSelection.create(g,h.selection.mainIndex),userEvent:"move.line"})),!0):!1}const moveLineUp=({state:h,dispatch:r})=>moveLine(h,r,!1),moveLineDown=({state:h,dispatch:r})=>moveLine(h,r,!0);function copyLine(h,r,o){if(h.readOnly)return!1;let u=[];for(let g of selectedLineBlocks(h))o?u.push({from:g.from,insert:h.doc.slice(g.from,g.to)+h.lineBreak}):u.push({from:g.to,insert:h.lineBreak+h.doc.slice(g.from,g.to)});return r(h.update({changes:u,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const copyLineUp=({state:h,dispatch:r})=>copyLine(h,r,!1),copyLineDown=({state:h,dispatch:r})=>copyLine(h,r,!0),deleteLine=h=>{if(h.state.readOnly)return!1;let{state:r}=h,o=r.changes(selectedLineBlocks(r).map(({from:g,to:k})=>(g>0?g--:k<r.doc.length&&k++,{from:g,to:k}))),u=updateSel(r.selection,g=>{let k;if(h.lineWrapping){let A=h.lineBlockAt(g.head),R=h.coordsAtPos(g.head,g.assoc||1);R&&(k=A.bottom+h.documentTop-R.bottom+h.defaultLineHeight/2)}return h.moveVertically(g,!0,k)}).map(o);return h.dispatch({changes:o,selection:u,scrollIntoView:!0,userEvent:"delete.line"}),!0};function isBetweenBrackets(h,r){if(/\(\)|\[\]|\{\}/.test(h.sliceDoc(r-1,r+1)))return{from:r,to:r};let o=syntaxTree(h).resolveInner(r),u=o.childBefore(r),g=o.childAfter(r),k;return u&&g&&u.to<=r&&g.from>=r&&(k=u.type.prop(NodeProp.closedBy))&&k.indexOf(g.name)>-1&&h.doc.lineAt(u.to).from==h.doc.lineAt(g.from).from&&!/\S/.test(h.sliceDoc(u.to,g.from))?{from:u.to,to:g.from}:null}const insertNewlineAndIndent=newlineAndIndent(!1),insertBlankLine=newlineAndIndent(!0);function newlineAndIndent(h){return({state:r,dispatch:o})=>{if(r.readOnly)return!1;let u=r.changeByRange(g=>{let{from:k,to:A}=g,R=r.doc.lineAt(k),q=!h&&k==A&&isBetweenBrackets(r,k);h&&(k=A=(A<=R.to?R:r.doc.lineAt(A)).to);let _=new IndentContext(r,{simulateBreak:k,simulateDoubleBreak:!!q}),ee=getIndentation(_,k);for(ee==null&&(ee=countColumn(/^\s*/.exec(r.doc.lineAt(k).text)[0],r.tabSize));A<R.to&&/\s/.test(R.text[A-R.from]);)A++;q?{from:k,to:A}=q:k>R.from&&k<R.from+100&&!/\S/.test(R.text.slice(0,k))&&(k=R.from);let te=["",indentString(r,ee)];return q&&te.push(indentString(r,_.lineIndent(R.from,-1))),{changes:{from:k,to:A,insert:Text.of(te)},range:EditorSelection.cursor(k+1+te[1].length)}});return o(r.update(u,{scrollIntoView:!0,userEvent:"input"})),!0}}function changeBySelectedLine(h,r){let o=-1;return h.changeByRange(u=>{let g=[];for(let A=u.from;A<=u.to;){let R=h.doc.lineAt(A);R.number>o&&(u.empty||u.to>R.from)&&(r(R,g,u),o=R.number),A=R.to+1}let k=h.changes(g);return{changes:g,range:EditorSelection.range(k.mapPos(u.anchor,1),k.mapPos(u.head,1))}})}const indentSelection=({state:h,dispatch:r})=>{if(h.readOnly)return!1;let o=Object.create(null),u=new IndentContext(h,{overrideIndentation:k=>{let A=o[k];return A??-1}}),g=changeBySelectedLine(h,(k,A,R)=>{let q=getIndentation(u,k.from);if(q==null)return;/\S/.test(k.text)||(q=0);let _=/^\s*/.exec(k.text)[0],ee=indentString(h,q);(_!=ee||R.from<k.from+_.length)&&(o[k.from]=q,A.push({from:k.from,to:k.from+_.length,insert:ee}))});return g.changes.empty||r(h.update(g,{userEvent:"indent"})),!0},indentMore=({state:h,dispatch:r})=>h.readOnly?!1:(r(h.update(changeBySelectedLine(h,(o,u)=>{u.push({from:o.from,insert:h.facet(indentUnit)})}),{userEvent:"input.indent"})),!0),indentLess=({state:h,dispatch:r})=>h.readOnly?!1:(r(h.update(changeBySelectedLine(h,(o,u)=>{let g=/^\s*/.exec(o.text)[0];if(!g)return;let k=countColumn(g,h.tabSize),A=0,R=indentString(h,Math.max(0,k-getIndentUnit(h)));for(;A<g.length&&A<R.length&&g.charCodeAt(A)==R.charCodeAt(A);)A++;u.push({from:o.from+A,to:o.from+g.length,insert:R.slice(A)})}),{userEvent:"delete.dedent"})),!0),toggleTabFocusMode=h=>(h.setTabFocusMode(),!0),emacsStyleKeymap=[{key:"Ctrl-b",run:cursorCharLeft,shift:selectCharLeft,preventDefault:!0},{key:"Ctrl-f",run:cursorCharRight,shift:selectCharRight},{key:"Ctrl-p",run:cursorLineUp,shift:selectLineUp},{key:"Ctrl-n",run:cursorLineDown,shift:selectLineDown},{key:"Ctrl-a",run:cursorLineStart,shift:selectLineStart},{key:"Ctrl-e",run:cursorLineEnd,shift:selectLineEnd},{key:"Ctrl-d",run:deleteCharForward},{key:"Ctrl-h",run:deleteCharBackward},{key:"Ctrl-k",run:deleteToLineEnd},{key:"Ctrl-Alt-h",run:deleteGroupBackward},{key:"Ctrl-o",run:splitLine},{key:"Ctrl-t",run:transposeChars},{key:"Ctrl-v",run:cursorPageDown}],standardKeymap=[{key:"ArrowLeft",run:cursorCharLeft,shift:selectCharLeft,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:cursorGroupLeft,shift:selectGroupLeft,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:cursorLineBoundaryLeft,shift:selectLineBoundaryLeft,preventDefault:!0},{key:"ArrowRight",run:cursorCharRight,shift:selectCharRight,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:cursorGroupRight,shift:selectGroupRight,preventDefault:!0},{mac:"Cmd-ArrowRight",run:cursorLineBoundaryRight,shift:selectLineBoundaryRight,preventDefault:!0},{key:"ArrowUp",run:cursorLineUp,shift:selectLineUp,preventDefault:!0},{mac:"Cmd-ArrowUp",run:cursorDocStart,shift:selectDocStart},{mac:"Ctrl-ArrowUp",run:cursorPageUp,shift:selectPageUp},{key:"ArrowDown",run:cursorLineDown,shift:selectLineDown,preventDefault:!0},{mac:"Cmd-ArrowDown",run:cursorDocEnd,shift:selectDocEnd},{mac:"Ctrl-ArrowDown",run:cursorPageDown,shift:selectPageDown},{key:"PageUp",run:cursorPageUp,shift:selectPageUp},{key:"PageDown",run:cursorPageDown,shift:selectPageDown},{key:"Home",run:cursorLineBoundaryBackward,shift:selectLineBoundaryBackward,preventDefault:!0},{key:"Mod-Home",run:cursorDocStart,shift:selectDocStart},{key:"End",run:cursorLineBoundaryForward,shift:selectLineBoundaryForward,preventDefault:!0},{key:"Mod-End",run:cursorDocEnd,shift:selectDocEnd},{key:"Enter",run:insertNewlineAndIndent,shift:insertNewlineAndIndent},{key:"Mod-a",run:selectAll},{key:"Backspace",run:deleteCharBackward,shift:deleteCharBackward,preventDefault:!0},{key:"Delete",run:deleteCharForward,preventDefault:!0},{key:"Mod-Backspace",mac:"Alt-Backspace",run:deleteGroupBackward,preventDefault:!0},{key:"Mod-Delete",mac:"Alt-Delete",run:deleteGroupForward,preventDefault:!0},{mac:"Mod-Backspace",run:deleteLineBoundaryBackward,preventDefault:!0},{mac:"Mod-Delete",run:deleteLineBoundaryForward,preventDefault:!0}].concat(emacsStyleKeymap.map(h=>({mac:h.key,run:h.run,shift:h.shift}))),defaultKeymap=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:cursorSyntaxLeft,shift:selectSyntaxLeft},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:cursorSyntaxRight,shift:selectSyntaxRight},{key:"Alt-ArrowUp",run:moveLineUp},{key:"Shift-Alt-ArrowUp",run:copyLineUp},{key:"Alt-ArrowDown",run:moveLineDown},{key:"Shift-Alt-ArrowDown",run:copyLineDown},{key:"Mod-Alt-ArrowUp",run:addCursorAbove},{key:"Mod-Alt-ArrowDown",run:addCursorBelow},{key:"Escape",run:simplifySelection},{key:"Mod-Enter",run:insertBlankLine},{key:"Alt-l",mac:"Ctrl-l",run:selectLine},{key:"Mod-i",run:selectParentSyntax,preventDefault:!0},{key:"Mod-[",run:indentLess},{key:"Mod-]",run:indentMore},{key:"Mod-Alt-\\",run:indentSelection},{key:"Shift-Mod-k",run:deleteLine},{key:"Shift-Mod-\\",run:cursorMatchingBracket},{key:"Mod-/",run:toggleComment},{key:"Alt-A",run:toggleBlockComment},{key:"Ctrl-m",mac:"Shift-Alt-m",run:toggleTabFocusMode}].concat(standardKeymap),basicNormalize=typeof String.prototype.normalize=="function"?h=>h.normalize("NFKD"):h=>h;class SearchCursor{constructor(r,o,u=0,g=r.length,k,A){this.test=A,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=r.iterRange(u,g),this.bufferStart=u,this.normalize=k?R=>k(basicNormalize(R)):basicNormalize,this.query=this.normalize(o)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return codePointAt(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let r=this.peek();if(r<0)return this.done=!0,this;let o=fromCodePoint(r),u=this.bufferStart+this.bufferPos;this.bufferPos+=codePointSize(r);let g=this.normalize(o);if(g.length)for(let k=0,A=u;;k++){let R=g.charCodeAt(k),q=this.match(R,A,this.bufferPos+this.bufferStart);if(k==g.length-1){if(q)return this.value=q,this;break}A==u&&k<o.length&&o.charCodeAt(k)==R&&A++}}}match(r,o,u){let g=null;for(let k=0;k<this.matches.length;k+=2){let A=this.matches[k],R=!1;this.query.charCodeAt(A)==r&&(A==this.query.length-1?g={from:this.matches[k+1],to:u}:(this.matches[k]++,R=!0)),R||(this.matches.splice(k,2),k-=2)}return this.query.charCodeAt(0)==r&&(this.query.length==1?g={from:o,to:u}:this.matches.push(1,o)),g&&this.test&&!this.test(g.from,g.to,this.buffer,this.bufferStart)&&(g=null),g}}typeof Symbol<"u"&&(SearchCursor.prototype[Symbol.iterator]=function(){return this});const empty={from:-1,to:-1,match:/.*/.exec("")},baseFlags="gm"+(/x/.unicode==null?"":"u");class RegExpCursor{constructor(r,o,u,g=0,k=r.length){if(this.text=r,this.to=k,this.curLine="",this.done=!1,this.value=empty,/\\[sWDnr]|\n|\r|\[\^/.test(o))return new MultilineRegExpCursor(r,o,u,g,k);this.re=new RegExp(o,baseFlags+(u!=null&&u.ignoreCase?"i":"")),this.test=u==null?void 0:u.test,this.iter=r.iter();let A=r.lineAt(g);this.curLineStart=A.from,this.matchPos=toCharEnd(r,g),this.getLine(this.curLineStart)}getLine(r){this.iter.next(r),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let r=this.matchPos-this.curLineStart;;){this.re.lastIndex=r;let o=this.matchPos<=this.to&&this.re.exec(this.curLine);if(o){let u=this.curLineStart+o.index,g=u+o[0].length;if(this.matchPos=toCharEnd(this.text,g+(u==g?1:0)),u==this.curLineStart+this.curLine.length&&this.nextLine(),(u<g||u>this.value.to)&&(!this.test||this.test(u,g,o)))return this.value={from:u,to:g,match:o},this;r=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),r=0;else return this.done=!0,this}}}const flattened=new WeakMap;class FlattenedDoc{constructor(r,o){this.from=r,this.text=o}get to(){return this.from+this.text.length}static get(r,o,u){let g=flattened.get(r);if(!g||g.from>=u||g.to<=o){let R=new FlattenedDoc(o,r.sliceString(o,u));return flattened.set(r,R),R}if(g.from==o&&g.to==u)return g;let{text:k,from:A}=g;return A>o&&(k=r.sliceString(o,A)+k,A=o),g.to<u&&(k+=r.sliceString(g.to,u)),flattened.set(r,new FlattenedDoc(A,k)),new FlattenedDoc(o,k.slice(o-A,u-A))}}class MultilineRegExpCursor{constructor(r,o,u,g,k){this.text=r,this.to=k,this.done=!1,this.value=empty,this.matchPos=toCharEnd(r,g),this.re=new RegExp(o,baseFlags+(u!=null&&u.ignoreCase?"i":"")),this.test=u==null?void 0:u.test,this.flat=FlattenedDoc.get(r,g,this.chunkEnd(g+5e3))}chunkEnd(r){return r>=this.to?this.to:this.text.lineAt(r).to}next(){for(;;){let r=this.re.lastIndex=this.matchPos-this.flat.from,o=this.re.exec(this.flat.text);if(o&&!o[0]&&o.index==r&&(this.re.lastIndex=r+1,o=this.re.exec(this.flat.text)),o){let u=this.flat.from+o.index,g=u+o[0].length;if((this.flat.to>=this.to||o.index+o[0].length<=this.flat.text.length-10)&&(!this.test||this.test(u,g,o)))return this.value={from:u,to:g,match:o},this.matchPos=toCharEnd(this.text,g+(u==g?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=FlattenedDoc.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(RegExpCursor.prototype[Symbol.iterator]=MultilineRegExpCursor.prototype[Symbol.iterator]=function(){return this});function validRegExp(h){try{return new RegExp(h,baseFlags),!0}catch{return!1}}function toCharEnd(h,r){if(r>=h.length)return r;let o=h.lineAt(r),u;for(;r<o.to&&(u=o.text.charCodeAt(r-o.from))>=56320&&u<57344;)r++;return r}function createLineDialog(h){let r=String(h.state.doc.lineAt(h.state.selection.main.head).number),o=crelt("input",{class:"cm-textfield",name:"line",value:r}),u=crelt("form",{class:"cm-gotoLine",onkeydown:k=>{k.keyCode==27?(k.preventDefault(),h.dispatch({effects:dialogEffect.of(!1)}),h.focus()):k.keyCode==13&&(k.preventDefault(),g())},onsubmit:k=>{k.preventDefault(),g()}},crelt("label",h.state.phrase("Go to line"),": ",o)," ",crelt("button",{class:"cm-button",type:"submit"},h.state.phrase("go")),crelt("button",{name:"close",onclick:()=>{h.dispatch({effects:dialogEffect.of(!1)}),h.focus()},"aria-label":h.state.phrase("close"),type:"button"},[""]));function g(){let k=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(o.value);if(!k)return;let{state:A}=h,R=A.doc.lineAt(A.selection.main.head),[,q,_,ee,te]=k,ne=ee?+ee.slice(1):0,re=_?+_:R.number;if(_&&te){let pe=re/100;q&&(pe=pe*(q=="-"?-1:1)+R.number/A.doc.lines),re=Math.round(A.doc.lines*pe)}else _&&q&&(re=re*(q=="-"?-1:1)+R.number);let oe=A.doc.line(Math.max(1,Math.min(A.doc.lines,re))),le=EditorSelection.cursor(oe.from+Math.max(0,Math.min(ne,oe.length)));h.dispatch({effects:[dialogEffect.of(!1),EditorView.scrollIntoView(le.from,{y:"center"})],selection:le}),h.focus()}return{dom:u}}const dialogEffect=StateEffect.define(),dialogField=StateField.define({create(){return!0},update(h,r){for(let o of r.effects)o.is(dialogEffect)&&(h=o.value);return h},provide:h=>showPanel.from(h,r=>r?createLineDialog:null)}),gotoLine=h=>{let r=getPanel(h,createLineDialog);if(!r){let o=[dialogEffect.of(!0)];h.state.field(dialogField,!1)==null&&o.push(StateEffect.appendConfig.of([dialogField,baseTheme$1$1])),h.dispatch({effects:o}),r=getPanel(h,createLineDialog)}return r&&r.dom.querySelector("input").select(),!0},baseTheme$1$1=EditorView.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}}),defaultHighlightOptions={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},highlightConfig=Facet.define({combine(h){return combineConfig(h,defaultHighlightOptions,{highlightWordAroundCursor:(r,o)=>r||o,minSelectionLength:Math.min,maxMatches:Math.min})}});function highlightSelectionMatches(h){return[defaultTheme,matchHighlighter]}const matchDeco=Decoration.mark({class:"cm-selectionMatch"}),mainMatchDeco=Decoration.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function insideWordBoundaries(h,r,o,u){return(o==0||h(r.sliceDoc(o-1,o))!=CharCategory.Word)&&(u==r.doc.length||h(r.sliceDoc(u,u+1))!=CharCategory.Word)}function insideWord(h,r,o,u){return h(r.sliceDoc(o,o+1))==CharCategory.Word&&h(r.sliceDoc(u-1,u))==CharCategory.Word}const matchHighlighter=ViewPlugin.fromClass(class{constructor(h){this.decorations=this.getDeco(h)}update(h){(h.selectionSet||h.docChanged||h.viewportChanged)&&(this.decorations=this.getDeco(h.view))}getDeco(h){let r=h.state.facet(highlightConfig),{state:o}=h,u=o.selection;if(u.ranges.length>1)return Decoration.none;let g=u.main,k,A=null;if(g.empty){if(!r.highlightWordAroundCursor)return Decoration.none;let q=o.wordAt(g.head);if(!q)return Decoration.none;A=o.charCategorizer(g.head),k=o.sliceDoc(q.from,q.to)}else{let q=g.to-g.from;if(q<r.minSelectionLength||q>200)return Decoration.none;if(r.wholeWords){if(k=o.sliceDoc(g.from,g.to),A=o.charCategorizer(g.head),!(insideWordBoundaries(A,o,g.from,g.to)&&insideWord(A,o,g.from,g.to)))return Decoration.none}else if(k=o.sliceDoc(g.from,g.to),!k)return Decoration.none}let R=[];for(let q of h.visibleRanges){let _=new SearchCursor(o.doc,k,q.from,q.to);for(;!_.next().done;){let{from:ee,to:te}=_.value;if((!A||insideWordBoundaries(A,o,ee,te))&&(g.empty&&ee<=g.from&&te>=g.to?R.push(mainMatchDeco.range(ee,te)):(ee>=g.to||te<=g.from)&&R.push(matchDeco.range(ee,te)),R.length>r.maxMatches))return Decoration.none}}return Decoration.set(R)}},{decorations:h=>h.decorations}),defaultTheme=EditorView.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),selectWord=({state:h,dispatch:r})=>{let{selection:o}=h,u=EditorSelection.create(o.ranges.map(g=>h.wordAt(g.head)||EditorSelection.cursor(g.head)),o.mainIndex);return u.eq(o)?!1:(r(h.update({selection:u})),!0)};function findNextOccurrence(h,r){let{main:o,ranges:u}=h.selection,g=h.wordAt(o.head),k=g&&g.from==o.from&&g.to==o.to;for(let A=!1,R=new SearchCursor(h.doc,r,u[u.length-1].to);;)if(R.next(),R.done){if(A)return null;R=new SearchCursor(h.doc,r,0,Math.max(0,u[u.length-1].from-1)),A=!0}else{if(A&&u.some(q=>q.from==R.value.from))continue;if(k){let q=h.wordAt(R.value.from);if(!q||q.from!=R.value.from||q.to!=R.value.to)continue}return R.value}}const selectNextOccurrence=({state:h,dispatch:r})=>{let{ranges:o}=h.selection;if(o.some(k=>k.from===k.to))return selectWord({state:h,dispatch:r});let u=h.sliceDoc(o[0].from,o[0].to);if(h.selection.ranges.some(k=>h.sliceDoc(k.from,k.to)!=u))return!1;let g=findNextOccurrence(h,u);return g?(r(h.update({selection:h.selection.addRange(EditorSelection.range(g.from,g.to),!1),effects:EditorView.scrollIntoView(g.to)})),!0):!1},searchConfigFacet=Facet.define({combine(h){return combineConfig(h,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:r=>new SearchPanel(r),scrollToMatch:r=>EditorView.scrollIntoView(r)})}});class SearchQuery{constructor(r){this.search=r.search,this.caseSensitive=!!r.caseSensitive,this.literal=!!r.literal,this.regexp=!!r.regexp,this.replace=r.replace||"",this.valid=!!this.search&&(!this.regexp||validRegExp(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!r.wholeWord}unquote(r){return this.literal?r:r.replace(/\\([nrt\\])/g,(o,u)=>u=="n"?`
`:u=="r"?"\r":u=="t"?"	":"\\")}eq(r){return this.search==r.search&&this.replace==r.replace&&this.caseSensitive==r.caseSensitive&&this.regexp==r.regexp&&this.wholeWord==r.wholeWord}create(){return this.regexp?new RegExpQuery(this):new StringQuery(this)}getCursor(r,o=0,u){let g=r.doc?r:EditorState.create({doc:r});return u==null&&(u=g.doc.length),this.regexp?regexpCursor(this,g,o,u):stringCursor(this,g,o,u)}}class QueryType{constructor(r){this.spec=r}}function stringCursor(h,r,o,u){return new SearchCursor(r.doc,h.unquoted,o,u,h.caseSensitive?void 0:g=>g.toLowerCase(),h.wholeWord?stringWordTest(r.doc,r.charCategorizer(r.selection.main.head)):void 0)}function stringWordTest(h,r){return(o,u,g,k)=>((k>o||k+g.length<u)&&(k=Math.max(0,o-2),g=h.sliceString(k,Math.min(h.length,u+2))),(r(charBefore(g,o-k))!=CharCategory.Word||r(charAfter(g,o-k))!=CharCategory.Word)&&(r(charAfter(g,u-k))!=CharCategory.Word||r(charBefore(g,u-k))!=CharCategory.Word))}class StringQuery extends QueryType{constructor(r){super(r)}nextMatch(r,o,u){let g=stringCursor(this.spec,r,u,r.doc.length).nextOverlapping();if(g.done){let k=Math.min(r.doc.length,o+this.spec.unquoted.length);g=stringCursor(this.spec,r,0,k).nextOverlapping()}return g.done||g.value.from==o&&g.value.to==u?null:g.value}prevMatchInRange(r,o,u){for(let g=u;;){let k=Math.max(o,g-1e4-this.spec.unquoted.length),A=stringCursor(this.spec,r,k,g),R=null;for(;!A.nextOverlapping().done;)R=A.value;if(R)return R;if(k==o)return null;g-=1e4}}prevMatch(r,o,u){let g=this.prevMatchInRange(r,0,o);return g||(g=this.prevMatchInRange(r,Math.max(0,u-this.spec.unquoted.length),r.doc.length)),g&&(g.from!=o||g.to!=u)?g:null}getReplacement(r){return this.spec.unquote(this.spec.replace)}matchAll(r,o){let u=stringCursor(this.spec,r,0,r.doc.length),g=[];for(;!u.next().done;){if(g.length>=o)return null;g.push(u.value)}return g}highlight(r,o,u,g){let k=stringCursor(this.spec,r,Math.max(0,o-this.spec.unquoted.length),Math.min(u+this.spec.unquoted.length,r.doc.length));for(;!k.next().done;)g(k.value.from,k.value.to)}}function regexpCursor(h,r,o,u){return new RegExpCursor(r.doc,h.search,{ignoreCase:!h.caseSensitive,test:h.wholeWord?regexpWordTest(r.charCategorizer(r.selection.main.head)):void 0},o,u)}function charBefore(h,r){return h.slice(findClusterBreak(h,r,!1),r)}function charAfter(h,r){return h.slice(r,findClusterBreak(h,r))}function regexpWordTest(h){return(r,o,u)=>!u[0].length||(h(charBefore(u.input,u.index))!=CharCategory.Word||h(charAfter(u.input,u.index))!=CharCategory.Word)&&(h(charAfter(u.input,u.index+u[0].length))!=CharCategory.Word||h(charBefore(u.input,u.index+u[0].length))!=CharCategory.Word)}class RegExpQuery extends QueryType{nextMatch(r,o,u){let g=regexpCursor(this.spec,r,u,r.doc.length).next();return g.done&&(g=regexpCursor(this.spec,r,0,o).next()),g.done?null:g.value}prevMatchInRange(r,o,u){for(let g=1;;g++){let k=Math.max(o,u-g*1e4),A=regexpCursor(this.spec,r,k,u),R=null;for(;!A.next().done;)R=A.value;if(R&&(k==o||R.from>k+10))return R;if(k==o)return null}}prevMatch(r,o,u){return this.prevMatchInRange(r,0,o)||this.prevMatchInRange(r,u,r.doc.length)}getReplacement(r){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(o,u)=>{if(u=="&")return r.match[0];if(u=="$")return"$";for(let g=u.length;g>0;g--){let k=+u.slice(0,g);if(k>0&&k<r.match.length)return r.match[k]+u.slice(g)}return o})}matchAll(r,o){let u=regexpCursor(this.spec,r,0,r.doc.length),g=[];for(;!u.next().done;){if(g.length>=o)return null;g.push(u.value)}return g}highlight(r,o,u,g){let k=regexpCursor(this.spec,r,Math.max(0,o-250),Math.min(u+250,r.doc.length));for(;!k.next().done;)g(k.value.from,k.value.to)}}const setSearchQuery=StateEffect.define(),togglePanel$1=StateEffect.define(),searchState=StateField.define({create(h){return new SearchState(defaultQuery(h).create(),null)},update(h,r){for(let o of r.effects)o.is(setSearchQuery)?h=new SearchState(o.value.create(),h.panel):o.is(togglePanel$1)&&(h=new SearchState(h.query,o.value?createSearchPanel:null));return h},provide:h=>showPanel.from(h,r=>r.panel)});class SearchState{constructor(r,o){this.query=r,this.panel=o}}const matchMark=Decoration.mark({class:"cm-searchMatch"}),selectedMatchMark=Decoration.mark({class:"cm-searchMatch cm-searchMatch-selected"}),searchHighlighter=ViewPlugin.fromClass(class{constructor(h){this.view=h,this.decorations=this.highlight(h.state.field(searchState))}update(h){let r=h.state.field(searchState);(r!=h.startState.field(searchState)||h.docChanged||h.selectionSet||h.viewportChanged)&&(this.decorations=this.highlight(r))}highlight({query:h,panel:r}){if(!r||!h.spec.valid)return Decoration.none;let{view:o}=this,u=new RangeSetBuilder;for(let g=0,k=o.visibleRanges,A=k.length;g<A;g++){let{from:R,to:q}=k[g];for(;g<A-1&&q>k[g+1].from-500;)q=k[++g].to;h.highlight(o.state,R,q,(_,ee)=>{let te=o.state.selection.ranges.some(ne=>ne.from==_&&ne.to==ee);u.add(_,ee,te?selectedMatchMark:matchMark)})}return u.finish()}},{decorations:h=>h.decorations});function searchCommand(h){return r=>{let o=r.state.field(searchState,!1);return o&&o.query.spec.valid?h(r,o):openSearchPanel(r)}}const findNext=searchCommand((h,{query:r})=>{let{to:o}=h.state.selection.main,u=r.nextMatch(h.state,o,o);if(!u)return!1;let g=EditorSelection.single(u.from,u.to),k=h.state.facet(searchConfigFacet);return h.dispatch({selection:g,effects:[announceMatch(h,u),k.scrollToMatch(g.main,h)],userEvent:"select.search"}),selectSearchInput(h),!0}),findPrevious=searchCommand((h,{query:r})=>{let{state:o}=h,{from:u}=o.selection.main,g=r.prevMatch(o,u,u);if(!g)return!1;let k=EditorSelection.single(g.from,g.to),A=h.state.facet(searchConfigFacet);return h.dispatch({selection:k,effects:[announceMatch(h,g),A.scrollToMatch(k.main,h)],userEvent:"select.search"}),selectSearchInput(h),!0}),selectMatches=searchCommand((h,{query:r})=>{let o=r.matchAll(h.state,1e3);return!o||!o.length?!1:(h.dispatch({selection:EditorSelection.create(o.map(u=>EditorSelection.range(u.from,u.to))),userEvent:"select.search.matches"}),!0)}),selectSelectionMatches=({state:h,dispatch:r})=>{let o=h.selection;if(o.ranges.length>1||o.main.empty)return!1;let{from:u,to:g}=o.main,k=[],A=0;for(let R=new SearchCursor(h.doc,h.sliceDoc(u,g));!R.next().done;){if(k.length>1e3)return!1;R.value.from==u&&(A=k.length),k.push(EditorSelection.range(R.value.from,R.value.to))}return r(h.update({selection:EditorSelection.create(k,A),userEvent:"select.search.matches"})),!0},replaceNext=searchCommand((h,{query:r})=>{let{state:o}=h,{from:u,to:g}=o.selection.main;if(o.readOnly)return!1;let k=r.nextMatch(o,u,u);if(!k)return!1;let A=k,R=[],q,_,ee=[];A.from==u&&A.to==g&&(_=o.toText(r.getReplacement(A)),R.push({from:A.from,to:A.to,insert:_}),A=r.nextMatch(o,A.from,A.to),ee.push(EditorView.announce.of(o.phrase("replaced match on line $",o.doc.lineAt(u).number)+".")));let te=h.state.changes(R);return A&&(q=EditorSelection.single(A.from,A.to).map(te),ee.push(announceMatch(h,A)),ee.push(o.facet(searchConfigFacet).scrollToMatch(q.main,h))),h.dispatch({changes:te,selection:q,effects:ee,userEvent:"input.replace"}),!0}),replaceAll=searchCommand((h,{query:r})=>{if(h.state.readOnly)return!1;let o=r.matchAll(h.state,1e9).map(g=>{let{from:k,to:A}=g;return{from:k,to:A,insert:r.getReplacement(g)}});if(!o.length)return!1;let u=h.state.phrase("replaced $ matches",o.length)+".";return h.dispatch({changes:o,effects:EditorView.announce.of(u),userEvent:"input.replace.all"}),!0});function createSearchPanel(h){return h.state.facet(searchConfigFacet).createPanel(h)}function defaultQuery(h,r){var o,u,g,k,A;let R=h.selection.main,q=R.empty||R.to>R.from+100?"":h.sliceDoc(R.from,R.to);if(r&&!q)return r;let _=h.facet(searchConfigFacet);return new SearchQuery({search:((o=r==null?void 0:r.literal)!==null&&o!==void 0?o:_.literal)?q:q.replace(/\n/g,"\\n"),caseSensitive:(u=r==null?void 0:r.caseSensitive)!==null&&u!==void 0?u:_.caseSensitive,literal:(g=r==null?void 0:r.literal)!==null&&g!==void 0?g:_.literal,regexp:(k=r==null?void 0:r.regexp)!==null&&k!==void 0?k:_.regexp,wholeWord:(A=r==null?void 0:r.wholeWord)!==null&&A!==void 0?A:_.wholeWord})}function getSearchInput(h){let r=getPanel(h,createSearchPanel);return r&&r.dom.querySelector("[main-field]")}function selectSearchInput(h){let r=getSearchInput(h);r&&r==h.root.activeElement&&r.select()}const openSearchPanel=h=>{let r=h.state.field(searchState,!1);if(r&&r.panel){let o=getSearchInput(h);if(o&&o!=h.root.activeElement){let u=defaultQuery(h.state,r.query.spec);u.valid&&h.dispatch({effects:setSearchQuery.of(u)}),o.focus(),o.select()}}else h.dispatch({effects:[togglePanel$1.of(!0),r?setSearchQuery.of(defaultQuery(h.state,r.query.spec)):StateEffect.appendConfig.of(searchExtensions)]});return!0},closeSearchPanel=h=>{let r=h.state.field(searchState,!1);if(!r||!r.panel)return!1;let o=getPanel(h,createSearchPanel);return o&&o.dom.contains(h.root.activeElement)&&h.focus(),h.dispatch({effects:togglePanel$1.of(!1)}),!0},searchKeymap=[{key:"Mod-f",run:openSearchPanel,scope:"editor search-panel"},{key:"F3",run:findNext,shift:findPrevious,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:findNext,shift:findPrevious,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:closeSearchPanel,scope:"editor search-panel"},{key:"Mod-Shift-l",run:selectSelectionMatches},{key:"Mod-Alt-g",run:gotoLine},{key:"Mod-d",run:selectNextOccurrence,preventDefault:!0}];class SearchPanel{constructor(r){this.view=r;let o=this.query=r.state.field(searchState).query.spec;this.commit=this.commit.bind(this),this.searchField=crelt("input",{value:o.search,placeholder:phrase(r,"Find"),"aria-label":phrase(r,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=crelt("input",{value:o.replace,placeholder:phrase(r,"Replace"),"aria-label":phrase(r,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=crelt("input",{type:"checkbox",name:"case",form:"",checked:o.caseSensitive,onchange:this.commit}),this.reField=crelt("input",{type:"checkbox",name:"re",form:"",checked:o.regexp,onchange:this.commit}),this.wordField=crelt("input",{type:"checkbox",name:"word",form:"",checked:o.wholeWord,onchange:this.commit});function u(g,k,A){return crelt("button",{class:"cm-button",name:g,onclick:k,type:"button"},A)}this.dom=crelt("div",{onkeydown:g=>this.keydown(g),class:"cm-search"},[this.searchField,u("next",()=>findNext(r),[phrase(r,"next")]),u("prev",()=>findPrevious(r),[phrase(r,"previous")]),u("select",()=>selectMatches(r),[phrase(r,"all")]),crelt("label",null,[this.caseField,phrase(r,"match case")]),crelt("label",null,[this.reField,phrase(r,"regexp")]),crelt("label",null,[this.wordField,phrase(r,"by word")]),...r.state.readOnly?[]:[crelt("br"),this.replaceField,u("replace",()=>replaceNext(r),[phrase(r,"replace")]),u("replaceAll",()=>replaceAll(r),[phrase(r,"replace all")])],crelt("button",{name:"close",onclick:()=>closeSearchPanel(r),"aria-label":phrase(r,"close"),type:"button"},[""])])}commit(){let r=new SearchQuery({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});r.eq(this.query)||(this.query=r,this.view.dispatch({effects:setSearchQuery.of(r)}))}keydown(r){runScopeHandlers(this.view,r,"search-panel")?r.preventDefault():r.keyCode==13&&r.target==this.searchField?(r.preventDefault(),(r.shiftKey?findPrevious:findNext)(this.view)):r.keyCode==13&&r.target==this.replaceField&&(r.preventDefault(),replaceNext(this.view))}update(r){for(let o of r.transactions)for(let u of o.effects)u.is(setSearchQuery)&&!u.value.eq(this.query)&&this.setQuery(u.value)}setQuery(r){this.query=r,this.searchField.value=r.search,this.replaceField.value=r.replace,this.caseField.checked=r.caseSensitive,this.reField.checked=r.regexp,this.wordField.checked=r.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(searchConfigFacet).top}}function phrase(h,r){return h.state.phrase(r)}const AnnounceMargin=30,Break=/[\s\.,:;?!]/;function announceMatch(h,{from:r,to:o}){let u=h.state.doc.lineAt(r),g=h.state.doc.lineAt(o).to,k=Math.max(u.from,r-AnnounceMargin),A=Math.min(g,o+AnnounceMargin),R=h.state.sliceDoc(k,A);if(k!=u.from){for(let q=0;q<AnnounceMargin;q++)if(!Break.test(R[q+1])&&Break.test(R[q])){R=R.slice(q);break}}if(A!=g){for(let q=R.length-1;q>R.length-AnnounceMargin;q--)if(!Break.test(R[q-1])&&Break.test(R[q])){R=R.slice(0,q);break}}return EditorView.announce.of(`${h.state.phrase("current match")}. ${R} ${h.state.phrase("on line")} ${u.number}.`)}const baseTheme$2=EditorView.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),searchExtensions=[searchState,Prec.low(searchHighlighter),baseTheme$2];class CompletionContext{constructor(r,o,u,g){this.state=r,this.pos=o,this.explicit=u,this.view=g,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(r){let o=syntaxTree(this.state).resolveInner(this.pos,-1);for(;o&&r.indexOf(o.name)<0;)o=o.parent;return o?{from:o.from,to:this.pos,text:this.state.sliceDoc(o.from,this.pos),type:o.type}:null}matchBefore(r){let o=this.state.doc.lineAt(this.pos),u=Math.max(o.from,this.pos-250),g=o.text.slice(u-o.from,this.pos-o.from),k=g.search(ensureAnchor(r,!1));return k<0?null:{from:u+k,to:this.pos,text:g.slice(k)}}get aborted(){return this.abortListeners==null}addEventListener(r,o,u){r=="abort"&&this.abortListeners&&(this.abortListeners.push(o),u&&u.onDocChange&&(this.abortOnDocChange=!0))}}function toSet(h){let r=Object.keys(h).join(""),o=/\w/.test(r);return o&&(r=r.replace(/\w/g,"")),`[${o?"\\w":""}${r.replace(/[^\w\s]/g,"\\$&")}]`}function prefixMatch(h){let r=Object.create(null),o=Object.create(null);for(let{label:g}of h){r[g[0]]=!0;for(let k=1;k<g.length;k++)o[g[k]]=!0}let u=toSet(r)+toSet(o)+"*$";return[new RegExp("^"+u),new RegExp(u)]}function completeFromList(h){let r=h.map(g=>typeof g=="string"?{label:g}:g),[o,u]=r.every(g=>/^\w+$/.test(g.label))?[/\w*$/,/\w+$/]:prefixMatch(r);return g=>{let k=g.matchBefore(u);return k||g.explicit?{from:k?k.from:g.pos,options:r,validFor:o}:null}}function ifNotIn(h,r){return o=>{for(let u=syntaxTree(o.state).resolveInner(o.pos,-1);u;u=u.parent){if(h.indexOf(u.name)>-1)return null;if(u.type.isTop)break}return r(o)}}class Option{constructor(r,o,u,g){this.completion=r,this.source=o,this.match=u,this.score=g}}function cur(h){return h.selection.main.from}function ensureAnchor(h,r){var o;let{source:u}=h,g=r&&u[0]!="^",k=u[u.length-1]!="$";return!g&&!k?h:new RegExp(`${g?"^":""}(?:${u})${k?"$":""}`,(o=h.flags)!==null&&o!==void 0?o:h.ignoreCase?"i":"")}const pickedCompletion=Annotation.define();function insertCompletionText(h,r,o,u){let{main:g}=h.selection,k=o-g.from,A=u-g.from;return{...h.changeByRange(R=>{if(R!=g&&o!=u&&h.sliceDoc(R.from+k,R.from+A)!=h.sliceDoc(o,u))return{range:R};let q=h.toText(r);return{changes:{from:R.from+k,to:u==g.from?R.to:R.from+A,insert:q},range:EditorSelection.cursor(R.from+k+q.length)}}),scrollIntoView:!0,userEvent:"input.complete"}}const SourceCache=new WeakMap;function asSource(h){if(!Array.isArray(h))return h;let r=SourceCache.get(h);return r||SourceCache.set(h,r=completeFromList(h)),r}const startCompletionEffect=StateEffect.define(),closeCompletionEffect=StateEffect.define();class FuzzyMatcher{constructor(r){this.pattern=r,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let o=0;o<r.length;){let u=codePointAt(r,o),g=codePointSize(u);this.chars.push(u);let k=r.slice(o,o+g),A=k.toUpperCase();this.folded.push(codePointAt(A==k?k.toLowerCase():A,0)),o+=g}this.astral=r.length!=this.chars.length}ret(r,o){return this.score=r,this.matched=o,this}match(r){if(this.pattern.length==0)return this.ret(-100,[]);if(r.length<this.pattern.length)return null;let{chars:o,folded:u,any:g,precise:k,byWord:A}=this;if(o.length==1){let he=codePointAt(r,0),ae=codePointSize(he),se=ae==r.length?0:-100;if(he!=o[0])if(he==u[0])se+=-200;else return null;return this.ret(se,[0,ae])}let R=r.indexOf(this.pattern);if(R==0)return this.ret(r.length==this.pattern.length?0:-100,[0,this.pattern.length]);let q=o.length,_=0;if(R<0){for(let he=0,ae=Math.min(r.length,200);he<ae&&_<q;){let se=codePointAt(r,he);(se==o[_]||se==u[_])&&(g[_++]=he),he+=codePointSize(se)}if(_<q)return null}let ee=0,te=0,ne=!1,re=0,oe=-1,le=-1,pe=/[a-z]/.test(r),de=!0;for(let he=0,ae=Math.min(r.length,200),se=0;he<ae&&te<q;){let ce=codePointAt(r,he);R<0&&(ee<q&&ce==o[ee]&&(k[ee++]=he),re<q&&(ce==o[re]||ce==u[re]?(re==0&&(oe=he),le=he+1,re++):re=0));let fe,ue=ce<255?ce>=48&&ce<=57||ce>=97&&ce<=122?2:ce>=65&&ce<=90?1:0:(fe=fromCodePoint(ce))!=fe.toLowerCase()?1:fe!=fe.toUpperCase()?2:0;(!he||ue==1&&pe||se==0&&ue!=0)&&(o[te]==ce||u[te]==ce&&(ne=!0)?A[te++]=he:A.length&&(de=!1)),se=ue,he+=codePointSize(ce)}return te==q&&A[0]==0&&de?this.result(-100+(ne?-200:0),A,r):re==q&&oe==0?this.ret(-200-r.length+(le==r.length?0:-100),[0,le]):R>-1?this.ret(-700-r.length,[R,R+this.pattern.length]):re==q?this.ret(-900-r.length,[oe,le]):te==q?this.result(-100+(ne?-200:0)+-700+(de?0:-1100),A,r):o.length==2?null:this.result((g[0]?-700:0)+-200+-1100,g,r)}result(r,o,u){let g=[],k=0;for(let A of o){let R=A+(this.astral?codePointSize(codePointAt(u,A)):1);k&&g[k-1]==A?g[k-1]=R:(g[k++]=A,g[k++]=R)}return this.ret(r-u.length,g)}}class StrictMatcher{constructor(r){this.pattern=r,this.matched=[],this.score=0,this.folded=r.toLowerCase()}match(r){if(r.length<this.pattern.length)return null;let o=r.slice(0,this.pattern.length),u=o==this.pattern?0:o.toLowerCase()==this.folded?-200:null;return u==null?null:(this.matched=[0,o.length],this.score=u+(r.length==this.pattern.length?0:-100),this)}}const completionConfig=Facet.define({combine(h){return combineConfig(h,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:defaultPositionInfo,filterStrict:!1,compareCompletions:(r,o)=>r.label.localeCompare(o.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(r,o)=>r&&o,closeOnBlur:(r,o)=>r&&o,icons:(r,o)=>r&&o,tooltipClass:(r,o)=>u=>joinClass(r(u),o(u)),optionClass:(r,o)=>u=>joinClass(r(u),o(u)),addToOptions:(r,o)=>r.concat(o),filterStrict:(r,o)=>r||o})}});function joinClass(h,r){return h?r?h+" "+r:h:r}function defaultPositionInfo(h,r,o,u,g,k){let A=h.textDirection==Direction.RTL,R=A,q=!1,_="top",ee,te,ne=r.left-g.left,re=g.right-r.right,oe=u.right-u.left,le=u.bottom-u.top;if(R&&ne<Math.min(oe,re)?R=!1:!R&&re<Math.min(oe,ne)&&(R=!0),oe<=(R?ne:re))ee=Math.max(g.top,Math.min(o.top,g.bottom-le))-r.top,te=Math.min(400,R?ne:re);else{q=!0,te=Math.min(400,(A?r.right:g.right-r.left)-30);let he=g.bottom-r.bottom;he>=le||he>r.top?ee=o.bottom-r.top:(_="bottom",ee=r.bottom-o.top)}let pe=(r.bottom-r.top)/k.offsetHeight,de=(r.right-r.left)/k.offsetWidth;return{style:`${_}: ${ee/pe}px; max-width: ${te/de}px`,class:"cm-completionInfo-"+(q?A?"left-narrow":"right-narrow":R?"left":"right")}}function optionContent(h){let r=h.addToOptions.slice();return h.icons&&r.push({render(o){let u=document.createElement("div");return u.classList.add("cm-completionIcon"),o.type&&u.classList.add(...o.type.split(/\s+/g).map(g=>"cm-completionIcon-"+g)),u.setAttribute("aria-hidden","true"),u},position:20}),r.push({render(o,u,g,k){let A=document.createElement("span");A.className="cm-completionLabel";let R=o.displayLabel||o.label,q=0;for(let _=0;_<k.length;){let ee=k[_++],te=k[_++];ee>q&&A.appendChild(document.createTextNode(R.slice(q,ee)));let ne=A.appendChild(document.createElement("span"));ne.appendChild(document.createTextNode(R.slice(ee,te))),ne.className="cm-completionMatchedText",q=te}return q<R.length&&A.appendChild(document.createTextNode(R.slice(q))),A},position:50},{render(o){if(!o.detail)return null;let u=document.createElement("span");return u.className="cm-completionDetail",u.textContent=o.detail,u},position:80}),r.sort((o,u)=>o.position-u.position).map(o=>o.render)}function rangeAroundSelected(h,r,o){if(h<=o)return{from:0,to:h};if(r<0&&(r=0),r<=h>>1){let g=Math.floor(r/o);return{from:g*o,to:(g+1)*o}}let u=Math.floor((h-r)/o);return{from:h-(u+1)*o,to:h-u*o}}class CompletionTooltip{constructor(r,o,u){this.view=r,this.stateField=o,this.applyCompletion=u,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:q=>this.placeInfo(q),key:this},this.space=null,this.currentClass="";let g=r.state.field(o),{options:k,selected:A}=g.open,R=r.state.facet(completionConfig);this.optionContent=optionContent(R),this.optionClass=R.optionClass,this.tooltipClass=R.tooltipClass,this.range=rangeAroundSelected(k.length,A,R.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(r.state),this.dom.addEventListener("mousedown",q=>{let{options:_}=r.state.field(o).open;for(let ee=q.target,te;ee&&ee!=this.dom;ee=ee.parentNode)if(ee.nodeName=="LI"&&(te=/-(\d+)$/.exec(ee.id))&&+te[1]<_.length){this.applyCompletion(r,_[+te[1]]),q.preventDefault();return}}),this.dom.addEventListener("focusout",q=>{let _=r.state.field(this.stateField,!1);_&&_.tooltip&&r.state.facet(completionConfig).closeOnBlur&&q.relatedTarget!=r.contentDOM&&r.dispatch({effects:closeCompletionEffect.of(null)})}),this.showOptions(k,g.id)}mount(){this.updateSel()}showOptions(r,o){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(r,o,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(r){var o;let u=r.state.field(this.stateField),g=r.startState.field(this.stateField);if(this.updateTooltipClass(r.state),u!=g){let{options:k,selected:A,disabled:R}=u.open;(!g.open||g.open.options!=k)&&(this.range=rangeAroundSelected(k.length,A,r.state.facet(completionConfig).maxRenderedOptions),this.showOptions(k,u.id)),this.updateSel(),R!=((o=g.open)===null||o===void 0?void 0:o.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!R)}}updateTooltipClass(r){let o=this.tooltipClass(r);if(o!=this.currentClass){for(let u of this.currentClass.split(" "))u&&this.dom.classList.remove(u);for(let u of o.split(" "))u&&this.dom.classList.add(u);this.currentClass=o}}positioned(r){this.space=r,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let r=this.view.state.field(this.stateField),o=r.open;if((o.selected>-1&&o.selected<this.range.from||o.selected>=this.range.to)&&(this.range=rangeAroundSelected(o.options.length,o.selected,this.view.state.facet(completionConfig).maxRenderedOptions),this.showOptions(o.options,r.id)),this.updateSelectedOption(o.selected)){this.destroyInfo();let{completion:u}=o.options[o.selected],{info:g}=u;if(!g)return;let k=typeof g=="string"?document.createTextNode(g):g(u);if(!k)return;"then"in k?k.then(A=>{A&&this.view.state.field(this.stateField,!1)==r&&this.addInfoPane(A,u)}).catch(A=>logException(this.view.state,A,"completion info")):this.addInfoPane(k,u)}}addInfoPane(r,o){this.destroyInfo();let u=this.info=document.createElement("div");if(u.className="cm-tooltip cm-completionInfo",r.nodeType!=null)u.appendChild(r),this.infoDestroy=null;else{let{dom:g,destroy:k}=r;u.appendChild(g),this.infoDestroy=k||null}this.dom.appendChild(u),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(r){let o=null;for(let u=this.list.firstChild,g=this.range.from;u;u=u.nextSibling,g++)u.nodeName!="LI"||!u.id?g--:g==r?u.hasAttribute("aria-selected")||(u.setAttribute("aria-selected","true"),o=u):u.hasAttribute("aria-selected")&&u.removeAttribute("aria-selected");return o&&scrollIntoView(this.list,o),o}measureInfo(){let r=this.dom.querySelector("[aria-selected]");if(!r||!this.info)return null;let o=this.dom.getBoundingClientRect(),u=this.info.getBoundingClientRect(),g=r.getBoundingClientRect(),k=this.space;if(!k){let A=this.dom.ownerDocument.documentElement;k={left:0,top:0,right:A.clientWidth,bottom:A.clientHeight}}return g.top>Math.min(k.bottom,o.bottom)-10||g.bottom<Math.max(k.top,o.top)+10?null:this.view.state.facet(completionConfig).positionInfo(this.view,o,g,u,k,this.dom)}placeInfo(r){this.info&&(r?(r.style&&(this.info.style.cssText=r.style),this.info.className="cm-tooltip cm-completionInfo "+(r.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(r,o,u){const g=document.createElement("ul");g.id=o,g.setAttribute("role","listbox"),g.setAttribute("aria-expanded","true"),g.setAttribute("aria-label",this.view.state.phrase("Completions")),g.addEventListener("mousedown",A=>{A.target==g&&A.preventDefault()});let k=null;for(let A=u.from;A<u.to;A++){let{completion:R,match:q}=r[A],{section:_}=R;if(_){let ne=typeof _=="string"?_:_.name;if(ne!=k&&(A>u.from||u.from==0))if(k=ne,typeof _!="string"&&_.header)g.appendChild(_.header(_));else{let re=g.appendChild(document.createElement("completion-section"));re.textContent=ne}}const ee=g.appendChild(document.createElement("li"));ee.id=o+"-"+A,ee.setAttribute("role","option");let te=this.optionClass(R);te&&(ee.className=te);for(let ne of this.optionContent){let re=ne(R,this.view.state,this.view,q);re&&ee.appendChild(re)}}return u.from&&g.classList.add("cm-completionListIncompleteTop"),u.to<r.length&&g.classList.add("cm-completionListIncompleteBottom"),g}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function completionTooltip(h,r){return o=>new CompletionTooltip(o,h,r)}function scrollIntoView(h,r){let o=h.getBoundingClientRect(),u=r.getBoundingClientRect(),g=o.height/h.offsetHeight;u.top<o.top?h.scrollTop-=(o.top-u.top)/g:u.bottom>o.bottom&&(h.scrollTop+=(u.bottom-o.bottom)/g)}function score(h){return(h.boost||0)*100+(h.apply?10:0)+(h.info?5:0)+(h.type?1:0)}function sortOptions(h,r){let o=[],u=null,g=null,k=ee=>{o.push(ee);let{section:te}=ee.completion;if(te){u||(u=[]);let ne=typeof te=="string"?te:te.name;u.some(re=>re.name==ne)||u.push(typeof te=="string"?{name:ne}:te)}},A=r.facet(completionConfig);for(let ee of h)if(ee.hasResult()){let te=ee.result.getMatch;if(ee.result.filter===!1)for(let ne of ee.result.options)k(new Option(ne,ee.source,te?te(ne):[],1e9-o.length));else{let ne=r.sliceDoc(ee.from,ee.to),re,oe=A.filterStrict?new StrictMatcher(ne):new FuzzyMatcher(ne);for(let le of ee.result.options)if(re=oe.match(le.label)){let pe=le.displayLabel?te?te(le,re.matched):[]:re.matched,de=re.score+(le.boost||0);if(k(new Option(le,ee.source,pe,de)),typeof le.section=="object"&&le.section.rank==="dynamic"){let{name:he}=le.section;g||(g=Object.create(null)),g[he]=Math.max(de,g[he]||-1e9)}}}}if(u){let ee=Object.create(null),te=0,ne=(re,oe)=>(re.rank==="dynamic"&&oe.rank==="dynamic"?g[oe.name]-g[re.name]:0)||(typeof re.rank=="number"?re.rank:1e9)-(typeof oe.rank=="number"?oe.rank:1e9)||(re.name<oe.name?-1:1);for(let re of u.sort(ne))te-=1e5,ee[re.name]=te;for(let re of o){let{section:oe}=re.completion;oe&&(re.score+=ee[typeof oe=="string"?oe:oe.name])}}let R=[],q=null,_=A.compareCompletions;for(let ee of o.sort((te,ne)=>ne.score-te.score||_(te.completion,ne.completion))){let te=ee.completion;!q||q.label!=te.label||q.detail!=te.detail||q.type!=null&&te.type!=null&&q.type!=te.type||q.apply!=te.apply||q.boost!=te.boost?R.push(ee):score(ee.completion)>score(q)&&(R[R.length-1]=ee),q=ee.completion}return R}class CompletionDialog{constructor(r,o,u,g,k,A){this.options=r,this.attrs=o,this.tooltip=u,this.timestamp=g,this.selected=k,this.disabled=A}setSelected(r,o){return r==this.selected||r>=this.options.length?this:new CompletionDialog(this.options,makeAttrs(o,r),this.tooltip,this.timestamp,r,this.disabled)}static build(r,o,u,g,k,A){if(g&&!A&&r.some(_=>_.isPending))return g.setDisabled();let R=sortOptions(r,o);if(!R.length)return g&&r.some(_=>_.isPending)?g.setDisabled():null;let q=o.facet(completionConfig).selectOnOpen?0:-1;if(g&&g.selected!=q&&g.selected!=-1){let _=g.options[g.selected].completion;for(let ee=0;ee<R.length;ee++)if(R[ee].completion==_){q=ee;break}}return new CompletionDialog(R,makeAttrs(u,q),{pos:r.reduce((_,ee)=>ee.hasResult()?Math.min(_,ee.from):_,1e8),create:createTooltip,above:k.aboveCursor},g?g.timestamp:Date.now(),q,!1)}map(r){return new CompletionDialog(this.options,this.attrs,{...this.tooltip,pos:r.mapPos(this.tooltip.pos)},this.timestamp,this.selected,this.disabled)}setDisabled(){return new CompletionDialog(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class CompletionState{constructor(r,o,u){this.active=r,this.id=o,this.open=u}static start(){return new CompletionState(none$1,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(r){let{state:o}=r,u=o.facet(completionConfig),k=(u.override||o.languageDataAt("autocomplete",cur(o)).map(asSource)).map(q=>(this.active.find(ee=>ee.source==q)||new ActiveSource(q,this.active.some(ee=>ee.state!=0)?1:0)).update(r,u));k.length==this.active.length&&k.every((q,_)=>q==this.active[_])&&(k=this.active);let A=this.open,R=r.effects.some(q=>q.is(setActiveEffect));A&&r.docChanged&&(A=A.map(r.changes)),r.selection||k.some(q=>q.hasResult()&&r.changes.touchesRange(q.from,q.to))||!sameResults(k,this.active)||R?A=CompletionDialog.build(k,o,this.id,A,u,R):A&&A.disabled&&!k.some(q=>q.isPending)&&(A=null),!A&&k.every(q=>!q.isPending)&&k.some(q=>q.hasResult())&&(k=k.map(q=>q.hasResult()?new ActiveSource(q.source,0):q));for(let q of r.effects)q.is(setSelectedEffect)&&(A=A&&A.setSelected(q.value,this.id));return k==this.active&&A==this.open?this:new CompletionState(k,this.id,A)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?baseAttrs:noAttrs}}function sameResults(h,r){if(h==r)return!0;for(let o=0,u=0;;){for(;o<h.length&&!h[o].hasResult();)o++;for(;u<r.length&&!r[u].hasResult();)u++;let g=o==h.length,k=u==r.length;if(g||k)return g==k;if(h[o++].result!=r[u++].result)return!1}}const baseAttrs={"aria-autocomplete":"list"},noAttrs={};function makeAttrs(h,r){let o={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":h};return r>-1&&(o["aria-activedescendant"]=h+"-"+r),o}const none$1=[];function getUpdateType(h,r){if(h.isUserEvent("input.complete")){let u=h.annotation(pickedCompletion);if(u&&r.activateOnCompletion(u))return 12}let o=h.isUserEvent("input.type");return o&&r.activateOnTyping?5:o?1:h.isUserEvent("delete.backward")?2:h.selection?8:h.docChanged?16:0}class ActiveSource{constructor(r,o,u=!1){this.source=r,this.state=o,this.explicit=u}hasResult(){return!1}get isPending(){return this.state==1}update(r,o){let u=getUpdateType(r,o),g=this;(u&8||u&16&&this.touches(r))&&(g=new ActiveSource(g.source,0)),u&4&&g.state==0&&(g=new ActiveSource(this.source,1)),g=g.updateFor(r,u);for(let k of r.effects)if(k.is(startCompletionEffect))g=new ActiveSource(g.source,1,k.value);else if(k.is(closeCompletionEffect))g=new ActiveSource(g.source,0);else if(k.is(setActiveEffect))for(let A of k.value)A.source==g.source&&(g=A);return g}updateFor(r,o){return this.map(r.changes)}map(r){return this}touches(r){return r.changes.touchesRange(cur(r.state))}}class ActiveResult extends ActiveSource{constructor(r,o,u,g,k,A){super(r,3,o),this.limit=u,this.result=g,this.from=k,this.to=A}hasResult(){return!0}updateFor(r,o){var u;if(!(o&3))return this.map(r.changes);let g=this.result;g.map&&!r.changes.empty&&(g=g.map(g,r.changes));let k=r.changes.mapPos(this.from),A=r.changes.mapPos(this.to,1),R=cur(r.state);if(R>A||!g||o&2&&(cur(r.startState)==this.from||R<this.limit))return new ActiveSource(this.source,o&4?1:0);let q=r.changes.mapPos(this.limit);return checkValid(g.validFor,r.state,k,A)?new ActiveResult(this.source,this.explicit,q,g,k,A):g.update&&(g=g.update(g,k,A,new CompletionContext(r.state,R,!1)))?new ActiveResult(this.source,this.explicit,q,g,g.from,(u=g.to)!==null&&u!==void 0?u:cur(r.state)):new ActiveSource(this.source,1,this.explicit)}map(r){return r.empty?this:(this.result.map?this.result.map(this.result,r):this.result)?new ActiveResult(this.source,this.explicit,r.mapPos(this.limit),this.result,r.mapPos(this.from),r.mapPos(this.to,1)):new ActiveSource(this.source,0)}touches(r){return r.changes.touchesRange(this.from,this.to)}}function checkValid(h,r,o,u){if(!h)return!1;let g=r.sliceDoc(o,u);return typeof h=="function"?h(g,o,u,r):ensureAnchor(h,!0).test(g)}const setActiveEffect=StateEffect.define({map(h,r){return h.map(o=>o.map(r))}}),setSelectedEffect=StateEffect.define(),completionState=StateField.define({create(){return CompletionState.start()},update(h,r){return h.update(r)},provide:h=>[showTooltip.from(h,r=>r.tooltip),EditorView.contentAttributes.from(h,r=>r.attrs)]});function applyCompletion(h,r){const o=r.completion.apply||r.completion.label;let u=h.state.field(completionState).active.find(g=>g.source==r.source);return u instanceof ActiveResult?(typeof o=="string"?h.dispatch({...insertCompletionText(h.state,o,u.from,u.to),annotations:pickedCompletion.of(r.completion)}):o(h,r.completion,u.from,u.to),!0):!1}const createTooltip=completionTooltip(completionState,applyCompletion);function moveCompletionSelection(h,r="option"){return o=>{let u=o.state.field(completionState,!1);if(!u||!u.open||u.open.disabled||Date.now()-u.open.timestamp<o.state.facet(completionConfig).interactionDelay)return!1;let g=1,k;r=="page"&&(k=getTooltip(o,u.open.tooltip))&&(g=Math.max(2,Math.floor(k.dom.offsetHeight/k.dom.querySelector("li").offsetHeight)-1));let{length:A}=u.open.options,R=u.open.selected>-1?u.open.selected+g*(h?1:-1):h?0:A-1;return R<0?R=r=="page"?0:A-1:R>=A&&(R=r=="page"?A-1:0),o.dispatch({effects:setSelectedEffect.of(R)}),!0}}const acceptCompletion=h=>{let r=h.state.field(completionState,!1);return h.state.readOnly||!r||!r.open||r.open.selected<0||r.open.disabled||Date.now()-r.open.timestamp<h.state.facet(completionConfig).interactionDelay?!1:applyCompletion(h,r.open.options[r.open.selected])},startCompletion=h=>h.state.field(completionState,!1)?(h.dispatch({effects:startCompletionEffect.of(!0)}),!0):!1,closeCompletion=h=>{let r=h.state.field(completionState,!1);return!r||!r.active.some(o=>o.state!=0)?!1:(h.dispatch({effects:closeCompletionEffect.of(null)}),!0)};class RunningQuery{constructor(r,o){this.active=r,this.context=o,this.time=Date.now(),this.updates=[],this.done=void 0}}const MaxUpdateCount=50,MinAbortTime=1e3,completionPlugin=ViewPlugin.fromClass(class{constructor(h){this.view=h,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let r of h.state.field(completionState).active)r.isPending&&this.startQuery(r)}update(h){let r=h.state.field(completionState),o=h.state.facet(completionConfig);if(!h.selectionSet&&!h.docChanged&&h.startState.field(completionState)==r)return;let u=h.transactions.some(k=>{let A=getUpdateType(k,o);return A&8||(k.selection||k.docChanged)&&!(A&3)});for(let k=0;k<this.running.length;k++){let A=this.running[k];if(u||A.context.abortOnDocChange&&h.docChanged||A.updates.length+h.transactions.length>MaxUpdateCount&&Date.now()-A.time>MinAbortTime){for(let R of A.context.abortListeners)try{R()}catch(q){logException(this.view.state,q)}A.context.abortListeners=null,this.running.splice(k--,1)}else A.updates.push(...h.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),h.transactions.some(k=>k.effects.some(A=>A.is(startCompletionEffect)))&&(this.pendingStart=!0);let g=this.pendingStart?50:o.activateOnTypingDelay;if(this.debounceUpdate=r.active.some(k=>k.isPending&&!this.running.some(A=>A.active.source==k.source))?setTimeout(()=>this.startUpdate(),g):-1,this.composing!=0)for(let k of h.transactions)k.isUserEvent("input.type")?this.composing=2:this.composing==2&&k.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:h}=this.view,r=h.field(completionState);for(let o of r.active)o.isPending&&!this.running.some(u=>u.active.source==o.source)&&this.startQuery(o);this.running.length&&r.open&&r.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(completionConfig).updateSyncTime))}startQuery(h){let{state:r}=this.view,o=cur(r),u=new CompletionContext(r,o,h.explicit,this.view),g=new RunningQuery(h,u);this.running.push(g),Promise.resolve(h.source(u)).then(k=>{g.context.aborted||(g.done=k||null,this.scheduleAccept())},k=>{this.view.dispatch({effects:closeCompletionEffect.of(null)}),logException(this.view.state,k)})}scheduleAccept(){this.running.every(h=>h.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(completionConfig).updateSyncTime))}accept(){var h;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let r=[],o=this.view.state.facet(completionConfig),u=this.view.state.field(completionState);for(let g=0;g<this.running.length;g++){let k=this.running[g];if(k.done===void 0)continue;if(this.running.splice(g--,1),k.done){let R=cur(k.updates.length?k.updates[0].startState:this.view.state),q=Math.min(R,k.done.from+(k.active.explicit?0:1)),_=new ActiveResult(k.active.source,k.active.explicit,q,k.done,k.done.from,(h=k.done.to)!==null&&h!==void 0?h:R);for(let ee of k.updates)_=_.update(ee,o);if(_.hasResult()){r.push(_);continue}}let A=u.active.find(R=>R.source==k.active.source);if(A&&A.isPending)if(k.done==null){let R=new ActiveSource(k.active.source,0);for(let q of k.updates)R=R.update(q,o);R.isPending||r.push(R)}else this.startQuery(A)}(r.length||u.open&&u.open.disabled)&&this.view.dispatch({effects:setActiveEffect.of(r)})}},{eventHandlers:{blur(h){let r=this.view.state.field(completionState,!1);if(r&&r.tooltip&&this.view.state.facet(completionConfig).closeOnBlur){let o=r.open&&getTooltip(this.view,r.open.tooltip);(!o||!o.dom.contains(h.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:closeCompletionEffect.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:startCompletionEffect.of(!1)}),20),this.composing=0}}}),windows=typeof navigator=="object"&&/Win/.test(navigator.platform),commitCharacters=Prec.highest(EditorView.domEventHandlers({keydown(h,r){let o=r.state.field(completionState,!1);if(!o||!o.open||o.open.disabled||o.open.selected<0||h.key.length>1||h.ctrlKey&&!(windows&&h.altKey)||h.metaKey)return!1;let u=o.open.options[o.open.selected],g=o.active.find(A=>A.source==u.source),k=u.completion.commitCharacters||g.result.commitCharacters;return k&&k.indexOf(h.key)>-1&&applyCompletion(r,u),!1}})),baseTheme$1=EditorView.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'""',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"''"}},".cm-completionIcon-class":{"&:after":{content:"''"}},".cm-completionIcon-interface":{"&:after":{content:"''"}},".cm-completionIcon-variable":{"&:after":{content:"''"}},".cm-completionIcon-constant":{"&:after":{content:"''"}},".cm-completionIcon-type":{"&:after":{content:"''"}},".cm-completionIcon-enum":{"&:after":{content:"''"}},".cm-completionIcon-property":{"&:after":{content:"''"}},".cm-completionIcon-keyword":{"&:after":{content:"''"}},".cm-completionIcon-namespace":{"&:after":{content:"''"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class FieldPos{constructor(r,o,u,g){this.field=r,this.line=o,this.from=u,this.to=g}}class FieldRange{constructor(r,o,u){this.field=r,this.from=o,this.to=u}map(r){let o=r.mapPos(this.from,-1,MapMode.TrackDel),u=r.mapPos(this.to,1,MapMode.TrackDel);return o==null||u==null?null:new FieldRange(this.field,o,u)}}class Snippet{constructor(r,o){this.lines=r,this.fieldPositions=o}instantiate(r,o){let u=[],g=[o],k=r.doc.lineAt(o),A=/^\s*/.exec(k.text)[0];for(let q of this.lines){if(u.length){let _=A,ee=/^\t*/.exec(q)[0].length;for(let te=0;te<ee;te++)_+=r.facet(indentUnit);g.push(o+_.length-ee),q=_+q.slice(ee)}u.push(q),o+=q.length+1}let R=this.fieldPositions.map(q=>new FieldRange(q.field,g[q.line]+q.from,g[q.line]+q.to));return{text:u,ranges:R}}static parse(r){let o=[],u=[],g=[],k;for(let A of r.split(/\r\n?|\n/)){for(;k=/[#$]\{(?:(\d+)(?::([^{}]*))?|((?:\\[{}]|[^{}])*))\}/.exec(A);){let R=k[1]?+k[1]:null,q=k[2]||k[3]||"",_=-1,ee=q.replace(/\\[{}]/g,te=>te[1]);for(let te=0;te<o.length;te++)(R!=null?o[te].seq==R:ee&&o[te].name==ee)&&(_=te);if(_<0){let te=0;for(;te<o.length&&(R==null||o[te].seq!=null&&o[te].seq<R);)te++;o.splice(te,0,{seq:R,name:ee}),_=te;for(let ne of g)ne.field>=_&&ne.field++}for(let te of g)if(te.line==u.length&&te.from>k.index){let ne=k[2]?3+(k[1]||"").length:2;te.from-=ne,te.to-=ne}g.push(new FieldPos(_,u.length,k.index,k.index+ee.length)),A=A.slice(0,k.index)+q+A.slice(k.index+k[0].length)}A=A.replace(/\\([{}])/g,(R,q,_)=>{for(let ee of g)ee.line==u.length&&ee.from>_&&(ee.from--,ee.to--);return q}),u.push(A)}return new Snippet(u,g)}}let fieldMarker=Decoration.widget({widget:new class extends WidgetType{toDOM(){let h=document.createElement("span");return h.className="cm-snippetFieldPosition",h}ignoreEvent(){return!1}}}),fieldRange=Decoration.mark({class:"cm-snippetField"});class ActiveSnippet{constructor(r,o){this.ranges=r,this.active=o,this.deco=Decoration.set(r.map(u=>(u.from==u.to?fieldMarker:fieldRange).range(u.from,u.to)),!0)}map(r){let o=[];for(let u of this.ranges){let g=u.map(r);if(!g)return null;o.push(g)}return new ActiveSnippet(o,this.active)}selectionInsideField(r){return r.ranges.every(o=>this.ranges.some(u=>u.field==this.active&&u.from<=o.from&&u.to>=o.to))}}const setActive=StateEffect.define({map(h,r){return h&&h.map(r)}}),moveToField=StateEffect.define(),snippetState=StateField.define({create(){return null},update(h,r){for(let o of r.effects){if(o.is(setActive))return o.value;if(o.is(moveToField)&&h)return new ActiveSnippet(h.ranges,o.value)}return h&&r.docChanged&&(h=h.map(r.changes)),h&&r.selection&&!h.selectionInsideField(r.selection)&&(h=null),h},provide:h=>EditorView.decorations.from(h,r=>r?r.deco:Decoration.none)});function fieldSelection(h,r){return EditorSelection.create(h.filter(o=>o.field==r).map(o=>EditorSelection.range(o.from,o.to)))}function snippet(h){let r=Snippet.parse(h);return(o,u,g,k)=>{let{text:A,ranges:R}=r.instantiate(o.state,g),{main:q}=o.state.selection,_={changes:{from:g,to:k==q.from?q.to:k,insert:Text.of(A)},scrollIntoView:!0,annotations:u?[pickedCompletion.of(u),Transaction.userEvent.of("input.complete")]:void 0};if(R.length&&(_.selection=fieldSelection(R,0)),R.some(ee=>ee.field>0)){let ee=new ActiveSnippet(R,0),te=_.effects=[setActive.of(ee)];o.state.field(snippetState,!1)===void 0&&te.push(StateEffect.appendConfig.of([snippetState,addSnippetKeymap,snippetPointerHandler,baseTheme$1]))}o.dispatch(o.state.update(_))}}function moveField(h){return({state:r,dispatch:o})=>{let u=r.field(snippetState,!1);if(!u||h<0&&u.active==0)return!1;let g=u.active+h,k=h>0&&!u.ranges.some(A=>A.field==g+h);return o(r.update({selection:fieldSelection(u.ranges,g),effects:setActive.of(k?null:new ActiveSnippet(u.ranges,g)),scrollIntoView:!0})),!0}}const clearSnippet=({state:h,dispatch:r})=>h.field(snippetState,!1)?(r(h.update({effects:setActive.of(null)})),!0):!1,nextSnippetField=moveField(1),prevSnippetField=moveField(-1),defaultSnippetKeymap=[{key:"Tab",run:nextSnippetField,shift:prevSnippetField},{key:"Escape",run:clearSnippet}],snippetKeymap=Facet.define({combine(h){return h.length?h[0]:defaultSnippetKeymap}}),addSnippetKeymap=Prec.highest(keymap.compute([snippetKeymap],h=>h.facet(snippetKeymap)));function snippetCompletion(h,r){return{...r,apply:snippet(h)}}const snippetPointerHandler=EditorView.domEventHandlers({mousedown(h,r){let o=r.state.field(snippetState,!1),u;if(!o||(u=r.posAtCoords({x:h.clientX,y:h.clientY}))==null)return!1;let g=o.ranges.find(k=>k.from<=u&&k.to>=u);return!g||g.field==o.active?!1:(r.dispatch({selection:fieldSelection(o.ranges,g.field),effects:setActive.of(o.ranges.some(k=>k.field>g.field)?new ActiveSnippet(o.ranges,g.field):null),scrollIntoView:!0}),!0)}}),defaults={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},closeBracketEffect=StateEffect.define({map(h,r){let o=r.mapPos(h,-1,MapMode.TrackAfter);return o??void 0}}),closedBracket=new class extends RangeValue{};closedBracket.startSide=1;closedBracket.endSide=-1;const bracketState=StateField.define({create(){return RangeSet.empty},update(h,r){if(h=h.map(r.changes),r.selection){let o=r.state.doc.lineAt(r.selection.main.head);h=h.update({filter:u=>u>=o.from&&u<=o.to})}for(let o of r.effects)o.is(closeBracketEffect)&&(h=h.update({add:[closedBracket.range(o.value,o.value+1)]}));return h}});function closeBrackets(){return[inputHandler,bracketState]}const definedClosing="()[]{}<>";function closing(h){for(let r=0;r<definedClosing.length;r+=2)if(definedClosing.charCodeAt(r)==h)return definedClosing.charAt(r+1);return fromCodePoint(h<128?h:h+1)}function config(h,r){return h.languageDataAt("closeBrackets",r)[0]||defaults}const android$1=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),inputHandler=EditorView.inputHandler.of((h,r,o,u)=>{if((android$1?h.composing:h.compositionStarted)||h.state.readOnly)return!1;let g=h.state.selection.main;if(u.length>2||u.length==2&&codePointSize(codePointAt(u,0))==1||r!=g.from||o!=g.to)return!1;let k=insertBracket(h.state,u);return k?(h.dispatch(k),!0):!1}),deleteBracketPair=({state:h,dispatch:r})=>{if(h.readOnly)return!1;let u=config(h,h.selection.main.head).brackets||defaults.brackets,g=null,k=h.changeByRange(A=>{if(A.empty){let R=prevChar(h.doc,A.head);for(let q of u)if(q==R&&nextChar(h.doc,A.head)==closing(codePointAt(q,0)))return{changes:{from:A.head-q.length,to:A.head+q.length},range:EditorSelection.cursor(A.head-q.length)}}return{range:g=A}});return g||r(h.update(k,{scrollIntoView:!0,userEvent:"delete.backward"})),!g},closeBracketsKeymap=[{key:"Backspace",run:deleteBracketPair}];function insertBracket(h,r){let o=config(h,h.selection.main.head),u=o.brackets||defaults.brackets;for(let g of u){let k=closing(codePointAt(g,0));if(r==g)return k==g?handleSame(h,g,u.indexOf(g+g+g)>-1,o):handleOpen(h,g,k,o.before||defaults.before);if(r==k&&closedBracketAt(h,h.selection.main.from))return handleClose(h,g,k)}return null}function closedBracketAt(h,r){let o=!1;return h.field(bracketState).between(0,h.doc.length,u=>{u==r&&(o=!0)}),o}function nextChar(h,r){let o=h.sliceString(r,r+2);return o.slice(0,codePointSize(codePointAt(o,0)))}function prevChar(h,r){let o=h.sliceString(r-2,r);return codePointSize(codePointAt(o,0))==o.length?o:o.slice(1)}function handleOpen(h,r,o,u){let g=null,k=h.changeByRange(A=>{if(!A.empty)return{changes:[{insert:r,from:A.from},{insert:o,from:A.to}],effects:closeBracketEffect.of(A.to+r.length),range:EditorSelection.range(A.anchor+r.length,A.head+r.length)};let R=nextChar(h.doc,A.head);return!R||/\s/.test(R)||u.indexOf(R)>-1?{changes:{insert:r+o,from:A.head},effects:closeBracketEffect.of(A.head+r.length),range:EditorSelection.cursor(A.head+r.length)}:{range:g=A}});return g?null:h.update(k,{scrollIntoView:!0,userEvent:"input.type"})}function handleClose(h,r,o){let u=null,g=h.changeByRange(k=>k.empty&&nextChar(h.doc,k.head)==o?{changes:{from:k.head,to:k.head+o.length,insert:o},range:EditorSelection.cursor(k.head+o.length)}:u={range:k});return u?null:h.update(g,{scrollIntoView:!0,userEvent:"input.type"})}function handleSame(h,r,o,u){let g=u.stringPrefixes||defaults.stringPrefixes,k=null,A=h.changeByRange(R=>{if(!R.empty)return{changes:[{insert:r,from:R.from},{insert:r,from:R.to}],effects:closeBracketEffect.of(R.to+r.length),range:EditorSelection.range(R.anchor+r.length,R.head+r.length)};let q=R.head,_=nextChar(h.doc,q),ee;if(_==r){if(nodeStart(h,q))return{changes:{insert:r+r,from:q},effects:closeBracketEffect.of(q+r.length),range:EditorSelection.cursor(q+r.length)};if(closedBracketAt(h,q)){let ne=o&&h.sliceDoc(q,q+r.length*3)==r+r+r?r+r+r:r;return{changes:{from:q,to:q+ne.length,insert:ne},range:EditorSelection.cursor(q+ne.length)}}}else{if(o&&h.sliceDoc(q-2*r.length,q)==r+r&&(ee=canStartStringAt(h,q-2*r.length,g))>-1&&nodeStart(h,ee))return{changes:{insert:r+r+r+r,from:q},effects:closeBracketEffect.of(q+r.length),range:EditorSelection.cursor(q+r.length)};if(h.charCategorizer(q)(_)!=CharCategory.Word&&canStartStringAt(h,q,g)>-1&&!probablyInString(h,q,r,g))return{changes:{insert:r+r,from:q},effects:closeBracketEffect.of(q+r.length),range:EditorSelection.cursor(q+r.length)}}return{range:k=R}});return k?null:h.update(A,{scrollIntoView:!0,userEvent:"input.type"})}function nodeStart(h,r){let o=syntaxTree(h).resolveInner(r+1);return o.parent&&o.from==r}function probablyInString(h,r,o,u){let g=syntaxTree(h).resolveInner(r,-1),k=u.reduce((A,R)=>Math.max(A,R.length),0);for(let A=0;A<5;A++){let R=h.sliceDoc(g.from,Math.min(g.to,g.from+o.length+k)),q=R.indexOf(o);if(!q||q>-1&&u.indexOf(R.slice(0,q))>-1){let ee=g.firstChild;for(;ee&&ee.from==g.from&&ee.to-ee.from>o.length+q;){if(h.sliceDoc(ee.to-o.length,ee.to)==o)return!1;ee=ee.firstChild}return!0}let _=g.to==r&&g.parent;if(!_)break;g=_}return!1}function canStartStringAt(h,r,o){let u=h.charCategorizer(r);if(u(h.sliceDoc(r-1,r))!=CharCategory.Word)return r;for(let g of o){let k=r-g.length;if(h.sliceDoc(k,r)==g&&u(h.sliceDoc(k-1,k))!=CharCategory.Word)return k}return-1}function autocompletion(h={}){return[commitCharacters,completionState,completionConfig.of(h),completionPlugin,completionKeymapExt,baseTheme$1]}const completionKeymap=[{key:"Ctrl-Space",run:startCompletion},{mac:"Alt-`",run:startCompletion},{mac:"Alt-i",run:startCompletion},{key:"Escape",run:closeCompletion},{key:"ArrowDown",run:moveCompletionSelection(!0)},{key:"ArrowUp",run:moveCompletionSelection(!1)},{key:"PageDown",run:moveCompletionSelection(!0,"page")},{key:"PageUp",run:moveCompletionSelection(!1,"page")},{key:"Enter",run:acceptCompletion}],completionKeymapExt=Prec.highest(keymap.computeN([completionConfig],h=>h.facet(completionConfig).defaultKeymap?[completionKeymap]:[]));class SelectedDiagnostic{constructor(r,o,u){this.from=r,this.to=o,this.diagnostic=u}}class LintState{constructor(r,o,u){this.diagnostics=r,this.panel=o,this.selected=u}static init(r,o,u){let g=u.facet(lintConfig).markerFilter;g&&(r=g(r,u));let k=r.slice().sort((ee,te)=>ee.from-te.from||ee.to-te.to),A=new RangeSetBuilder,R=[],q=0;for(let ee=0;;){let te=ee==k.length?null:k[ee];if(!te&&!R.length)break;let ne,re;for(R.length?(ne=q,re=R.reduce((le,pe)=>Math.min(le,pe.to),te&&te.from>ne?te.from:1e8)):(ne=te.from,re=te.to,R.push(te),ee++);ee<k.length;){let le=k[ee];if(le.from==ne&&(le.to>le.from||le.to==ne))R.push(le),ee++,re=Math.min(le.to,re);else{re=Math.min(le.from,re);break}}let oe=maxSeverity(R);if(R.some(le=>le.from==le.to||le.from==le.to-1&&u.doc.lineAt(le.from).to==le.from))A.add(ne,ne,Decoration.widget({widget:new DiagnosticWidget(oe),diagnostics:R.slice()}));else{let le=R.reduce((pe,de)=>de.markClass?pe+" "+de.markClass:pe,"");A.add(ne,re,Decoration.mark({class:"cm-lintRange cm-lintRange-"+oe+le,diagnostics:R.slice(),inclusiveEnd:R.some(pe=>pe.to>re)}))}q=re;for(let le=0;le<R.length;le++)R[le].to<=q&&R.splice(le--,1)}let _=A.finish();return new LintState(_,o,findDiagnostic(_))}}function findDiagnostic(h,r=null,o=0){let u=null;return h.between(o,1e9,(g,k,{spec:A})=>{if(!(r&&A.diagnostics.indexOf(r)<0))if(!u)u=new SelectedDiagnostic(g,k,r||A.diagnostics[0]);else{if(A.diagnostics.indexOf(u.diagnostic)<0)return!1;u=new SelectedDiagnostic(u.from,k,u.diagnostic)}}),u}function hideTooltip(h,r){let o=r.pos,u=r.end||o,g=h.state.facet(lintConfig).hideOn(h,o,u);if(g!=null)return g;let k=h.startState.doc.lineAt(r.pos);return!!(h.effects.some(A=>A.is(setDiagnosticsEffect))||h.changes.touchesRange(k.from,Math.max(k.to,u)))}function maybeEnableLint(h,r){return h.field(lintState,!1)?r:r.concat(StateEffect.appendConfig.of(lintExtensions))}const setDiagnosticsEffect=StateEffect.define(),togglePanel=StateEffect.define(),movePanelSelection=StateEffect.define(),lintState=StateField.define({create(){return new LintState(Decoration.none,null,null)},update(h,r){if(r.docChanged&&h.diagnostics.size){let o=h.diagnostics.map(r.changes),u=null,g=h.panel;if(h.selected){let k=r.changes.mapPos(h.selected.from,1);u=findDiagnostic(o,h.selected.diagnostic,k)||findDiagnostic(o,null,k)}!o.size&&g&&r.state.facet(lintConfig).autoPanel&&(g=null),h=new LintState(o,g,u)}for(let o of r.effects)if(o.is(setDiagnosticsEffect)){let u=r.state.facet(lintConfig).autoPanel?o.value.length?LintPanel.open:null:h.panel;h=LintState.init(o.value,u,r.state)}else o.is(togglePanel)?h=new LintState(h.diagnostics,o.value?LintPanel.open:null,h.selected):o.is(movePanelSelection)&&(h=new LintState(h.diagnostics,h.panel,o.value));return h},provide:h=>[showPanel.from(h,r=>r.panel),EditorView.decorations.from(h,r=>r.diagnostics)]}),activeMark=Decoration.mark({class:"cm-lintRange cm-lintRange-active"});function lintTooltip(h,r,o){let{diagnostics:u}=h.state.field(lintState),g,k=-1,A=-1;u.between(r-(o<0?1:0),r+(o>0?1:0),(q,_,{spec:ee})=>{if(r>=q&&r<=_&&(q==_||(r>q||o>0)&&(r<_||o<0)))return g=ee.diagnostics,k=q,A=_,!1});let R=h.state.facet(lintConfig).tooltipFilter;return g&&R&&(g=R(g,h.state)),g?{pos:k,end:A,above:h.state.doc.lineAt(k).to<A,create(){return{dom:diagnosticsTooltip(h,g)}}}:null}function diagnosticsTooltip(h,r){return crelt("ul",{class:"cm-tooltip-lint"},r.map(o=>renderDiagnostic(h,o,!1)))}const openLintPanel=h=>{let r=h.state.field(lintState,!1);(!r||!r.panel)&&h.dispatch({effects:maybeEnableLint(h.state,[togglePanel.of(!0)])});let o=getPanel(h,LintPanel.open);return o&&o.dom.querySelector(".cm-panel-lint ul").focus(),!0},closeLintPanel=h=>{let r=h.state.field(lintState,!1);return!r||!r.panel?!1:(h.dispatch({effects:togglePanel.of(!1)}),!0)},nextDiagnostic=h=>{let r=h.state.field(lintState,!1);if(!r)return!1;let o=h.state.selection.main,u=r.diagnostics.iter(o.to+1);return!u.value&&(u=r.diagnostics.iter(0),!u.value||u.from==o.from&&u.to==o.to)?!1:(h.dispatch({selection:{anchor:u.from,head:u.to},scrollIntoView:!0}),!0)},lintKeymap=[{key:"Mod-Shift-m",run:openLintPanel,preventDefault:!0},{key:"F8",run:nextDiagnostic}],lintConfig=Facet.define({combine(h){return{sources:h.map(r=>r.source).filter(r=>r!=null),...combineConfig(h.map(r=>r.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{delay:Math.max,markerFilter:combineFilter,tooltipFilter:combineFilter,needsRefresh:(r,o)=>r?o?u=>r(u)||o(u):r:o,hideOn:(r,o)=>r?o?(u,g,k)=>r(u,g,k)||o(u,g,k):r:o,autoPanel:(r,o)=>r||o})}}});function combineFilter(h,r){return h?r?(o,u)=>r(h(o,u),u):h:r}function assignKeys(h){let r=[];if(h)e:for(let{name:o}of h){for(let u=0;u<o.length;u++){let g=o[u];if(/[a-zA-Z]/.test(g)&&!r.some(k=>k.toLowerCase()==g.toLowerCase())){r.push(g);continue e}}r.push("")}return r}function renderDiagnostic(h,r,o){var u;let g=o?assignKeys(r.actions):[];return crelt("li",{class:"cm-diagnostic cm-diagnostic-"+r.severity},crelt("span",{class:"cm-diagnosticText"},r.renderMessage?r.renderMessage(h):r.message),(u=r.actions)===null||u===void 0?void 0:u.map((k,A)=>{let R=!1,q=re=>{if(re.preventDefault(),R)return;R=!0;let oe=findDiagnostic(h.state.field(lintState).diagnostics,r);oe&&k.apply(h,oe.from,oe.to)},{name:_}=k,ee=g[A]?_.indexOf(g[A]):-1,te=ee<0?_:[_.slice(0,ee),crelt("u",_.slice(ee,ee+1)),_.slice(ee+1)],ne=k.markClass?" "+k.markClass:"";return crelt("button",{type:"button",class:"cm-diagnosticAction"+ne,onclick:q,onmousedown:q,"aria-label":` Action: ${_}${ee<0?"":` (access key "${g[A]})"`}.`},te)}),r.source&&crelt("div",{class:"cm-diagnosticSource"},r.source))}class DiagnosticWidget extends WidgetType{constructor(r){super(),this.sev=r}eq(r){return r.sev==this.sev}toDOM(){return crelt("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}}class PanelItem{constructor(r,o){this.diagnostic=o,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=renderDiagnostic(r,o,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class LintPanel{constructor(r){this.view=r,this.items=[];let o=g=>{if(g.keyCode==27)closeLintPanel(this.view),this.view.focus();else if(g.keyCode==38||g.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(g.keyCode==40||g.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(g.keyCode==36)this.moveSelection(0);else if(g.keyCode==35)this.moveSelection(this.items.length-1);else if(g.keyCode==13)this.view.focus();else if(g.keyCode>=65&&g.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:k}=this.items[this.selectedIndex],A=assignKeys(k.actions);for(let R=0;R<A.length;R++)if(A[R].toUpperCase().charCodeAt(0)==g.keyCode){let q=findDiagnostic(this.view.state.field(lintState).diagnostics,k);q&&k.actions[R].apply(r,q.from,q.to)}}else return;g.preventDefault()},u=g=>{for(let k=0;k<this.items.length;k++)this.items[k].dom.contains(g.target)&&this.moveSelection(k)};this.list=crelt("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:o,onclick:u}),this.dom=crelt("div",{class:"cm-panel-lint"},this.list,crelt("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>closeLintPanel(this.view)},"")),this.update()}get selectedIndex(){let r=this.view.state.field(lintState).selected;if(!r)return-1;for(let o=0;o<this.items.length;o++)if(this.items[o].diagnostic==r.diagnostic)return o;return-1}update(){let{diagnostics:r,selected:o}=this.view.state.field(lintState),u=0,g=!1,k=null,A=new Set;for(r.between(0,this.view.state.doc.length,(R,q,{spec:_})=>{for(let ee of _.diagnostics){if(A.has(ee))continue;A.add(ee);let te=-1,ne;for(let re=u;re<this.items.length;re++)if(this.items[re].diagnostic==ee){te=re;break}te<0?(ne=new PanelItem(this.view,ee),this.items.splice(u,0,ne),g=!0):(ne=this.items[te],te>u&&(this.items.splice(u,te-u),g=!0)),o&&ne.diagnostic==o.diagnostic?ne.dom.hasAttribute("aria-selected")||(ne.dom.setAttribute("aria-selected","true"),k=ne):ne.dom.hasAttribute("aria-selected")&&ne.dom.removeAttribute("aria-selected"),u++}});u<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)g=!0,this.items.pop();this.items.length==0&&(this.items.push(new PanelItem(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),g=!0),k?(this.list.setAttribute("aria-activedescendant",k.id),this.view.requestMeasure({key:this,read:()=>({sel:k.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:R,panel:q})=>{let _=q.height/this.list.offsetHeight;R.top<q.top?this.list.scrollTop-=(q.top-R.top)/_:R.bottom>q.bottom&&(this.list.scrollTop+=(R.bottom-q.bottom)/_)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),g&&this.sync()}sync(){let r=this.list.firstChild;function o(){let u=r;r=u.nextSibling,u.remove()}for(let u of this.items)if(u.dom.parentNode==this.list){for(;r!=u.dom;)o();r=u.dom.nextSibling}else this.list.insertBefore(u.dom,r);for(;r;)o()}moveSelection(r){if(this.selectedIndex<0)return;let o=this.view.state.field(lintState),u=findDiagnostic(o.diagnostics,this.items[r].diagnostic);u&&this.view.dispatch({selection:{anchor:u.from,head:u.to},scrollIntoView:!0,effects:movePanelSelection.of(u)})}static open(r){return new LintPanel(r)}}function svg(h,r='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${r}>${encodeURIComponent(h)}</svg>')`}function underline(h){return svg(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${h}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const baseTheme=EditorView.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:underline("#d11")},".cm-lintRange-warning":{backgroundImage:underline("orange")},".cm-lintRange-info":{backgroundImage:underline("#999")},".cm-lintRange-hint":{backgroundImage:underline("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function severityWeight(h){return h=="error"?4:h=="warning"?3:h=="info"?2:1}function maxSeverity(h){let r="hint",o=1;for(let u of h){let g=severityWeight(u.severity);g>o&&(o=g,r=u.severity)}return r}const lintExtensions=[lintState,EditorView.decorations.compute([lintState],h=>{let{selected:r,panel:o}=h.field(lintState);return!r||!o||r.from==r.to?Decoration.none:Decoration.set([activeMark.range(r.from,r.to)])}),hoverTooltip(lintTooltip,{hideOn:hideTooltip}),baseTheme],basicSetup=[lineNumbers(),highlightActiveLineGutter(),highlightSpecialChars(),history$1(),foldGutter(),drawSelection(),dropCursor(),EditorState.allowMultipleSelections.of(!0),indentOnInput(),syntaxHighlighting(defaultHighlightStyle,{fallback:!0}),bracketMatching(),closeBrackets(),autocompletion(),rectangularSelection(),crosshairCursor(),highlightActiveLine(),highlightSelectionMatches(),keymap.of([...closeBracketsKeymap,...defaultKeymap,...searchKeymap,...historyKeymap,...foldKeymap,...completionKeymap,...lintKeymap])];class CompositeBlock{static create(r,o,u,g,k){let A=g+(g<<8)+r+(o<<4)|0;return new CompositeBlock(r,o,u,A,k,[],[])}constructor(r,o,u,g,k,A,R){this.type=r,this.value=o,this.from=u,this.hash=g,this.end=k,this.children=A,this.positions=R,this.hashProp=[[NodeProp.contextHash,g]]}addChild(r,o){r.prop(NodeProp.contextHash)!=this.hash&&(r=new Tree(r.type,r.children,r.positions,r.length,this.hashProp)),this.children.push(r),this.positions.push(o)}toTree(r,o=this.end){let u=this.children.length-1;return u>=0&&(o=Math.max(o,this.positions[u]+this.children[u].length+this.from)),new Tree(r.types[this.type],this.children,this.positions,o-this.from).balance({makeTree:(g,k,A)=>new Tree(NodeType.none,g,k,A,this.hashProp)})}}var Type;(function(h){h[h.Document=1]="Document",h[h.CodeBlock=2]="CodeBlock",h[h.FencedCode=3]="FencedCode",h[h.Blockquote=4]="Blockquote",h[h.HorizontalRule=5]="HorizontalRule",h[h.BulletList=6]="BulletList",h[h.OrderedList=7]="OrderedList",h[h.ListItem=8]="ListItem",h[h.ATXHeading1=9]="ATXHeading1",h[h.ATXHeading2=10]="ATXHeading2",h[h.ATXHeading3=11]="ATXHeading3",h[h.ATXHeading4=12]="ATXHeading4",h[h.ATXHeading5=13]="ATXHeading5",h[h.ATXHeading6=14]="ATXHeading6",h[h.SetextHeading1=15]="SetextHeading1",h[h.SetextHeading2=16]="SetextHeading2",h[h.HTMLBlock=17]="HTMLBlock",h[h.LinkReference=18]="LinkReference",h[h.Paragraph=19]="Paragraph",h[h.CommentBlock=20]="CommentBlock",h[h.ProcessingInstructionBlock=21]="ProcessingInstructionBlock",h[h.Escape=22]="Escape",h[h.Entity=23]="Entity",h[h.HardBreak=24]="HardBreak",h[h.Emphasis=25]="Emphasis",h[h.StrongEmphasis=26]="StrongEmphasis",h[h.Link=27]="Link",h[h.Image=28]="Image",h[h.InlineCode=29]="InlineCode",h[h.HTMLTag=30]="HTMLTag",h[h.Comment=31]="Comment",h[h.ProcessingInstruction=32]="ProcessingInstruction",h[h.Autolink=33]="Autolink",h[h.HeaderMark=34]="HeaderMark",h[h.QuoteMark=35]="QuoteMark",h[h.ListMark=36]="ListMark",h[h.LinkMark=37]="LinkMark",h[h.EmphasisMark=38]="EmphasisMark",h[h.CodeMark=39]="CodeMark",h[h.CodeText=40]="CodeText",h[h.CodeInfo=41]="CodeInfo",h[h.LinkTitle=42]="LinkTitle",h[h.LinkLabel=43]="LinkLabel",h[h.URL=44]="URL"})(Type||(Type={}));class LeafBlock{constructor(r,o){this.start=r,this.content=o,this.marks=[],this.parsers=[]}}class Line{constructor(){this.text="",this.baseIndent=0,this.basePos=0,this.depth=0,this.markers=[],this.pos=0,this.indent=0,this.next=-1}forward(){this.basePos>this.pos&&this.forwardInner()}forwardInner(){let r=this.skipSpace(this.basePos);this.indent=this.countIndent(r,this.pos,this.indent),this.pos=r,this.next=r==this.text.length?-1:this.text.charCodeAt(r)}skipSpace(r){return skipSpace(this.text,r)}reset(r){for(this.text=r,this.baseIndent=this.basePos=this.pos=this.indent=0,this.forwardInner(),this.depth=1;this.markers.length;)this.markers.pop()}moveBase(r){this.basePos=r,this.baseIndent=this.countIndent(r,this.pos,this.indent)}moveBaseColumn(r){this.baseIndent=r,this.basePos=this.findColumn(r)}addMarker(r){this.markers.push(r)}countIndent(r,o=0,u=0){for(let g=o;g<r;g++)u+=this.text.charCodeAt(g)==9?4-u%4:1;return u}findColumn(r){let o=0;for(let u=0;o<this.text.length&&u<r;o++)u+=this.text.charCodeAt(o)==9?4-u%4:1;return o}scrub(){if(!this.baseIndent)return this.text;let r="";for(let o=0;o<this.basePos;o++)r+=" ";return r+this.text.slice(this.basePos)}}function skipForList(h,r,o){if(o.pos==o.text.length||h!=r.block&&o.indent>=r.stack[o.depth+1].value+o.baseIndent)return!0;if(o.indent>=o.baseIndent+4)return!1;let u=(h.type==Type.OrderedList?isOrderedList:isBulletList)(o,r,!1);return u>0&&(h.type!=Type.BulletList||isHorizontalRule(o,r,!1)<0)&&o.text.charCodeAt(o.pos+u-1)==h.value}const DefaultSkipMarkup={[Type.Blockquote](h,r,o){return o.next!=62?!1:(o.markers.push(elt(Type.QuoteMark,r.lineStart+o.pos,r.lineStart+o.pos+1)),o.moveBase(o.pos+(space$2(o.text.charCodeAt(o.pos+1))?2:1)),h.end=r.lineStart+o.text.length,!0)},[Type.ListItem](h,r,o){return o.indent<o.baseIndent+h.value&&o.next>-1?!1:(o.moveBaseColumn(o.baseIndent+h.value),!0)},[Type.OrderedList]:skipForList,[Type.BulletList]:skipForList,[Type.Document](){return!0}};function space$2(h){return h==32||h==9||h==10||h==13}function skipSpace(h,r=0){for(;r<h.length&&space$2(h.charCodeAt(r));)r++;return r}function skipSpaceBack(h,r,o){for(;r>o&&space$2(h.charCodeAt(r-1));)r--;return r}function isFencedCode(h){if(h.next!=96&&h.next!=126)return-1;let r=h.pos+1;for(;r<h.text.length&&h.text.charCodeAt(r)==h.next;)r++;if(r<h.pos+3)return-1;if(h.next==96){for(let o=r;o<h.text.length;o++)if(h.text.charCodeAt(o)==96)return-1}return r}function isBlockquote(h){return h.next!=62?-1:h.text.charCodeAt(h.pos+1)==32?2:1}function isHorizontalRule(h,r,o){if(h.next!=42&&h.next!=45&&h.next!=95)return-1;let u=1;for(let g=h.pos+1;g<h.text.length;g++){let k=h.text.charCodeAt(g);if(k==h.next)u++;else if(!space$2(k))return-1}return o&&h.next==45&&isSetextUnderline(h)>-1&&h.depth==r.stack.length&&r.parser.leafBlockParsers.indexOf(DefaultLeafBlocks.SetextHeading)>-1||u<3?-1:1}function inList(h,r){for(let o=h.stack.length-1;o>=0;o--)if(h.stack[o].type==r)return!0;return!1}function isBulletList(h,r,o){return(h.next==45||h.next==43||h.next==42)&&(h.pos==h.text.length-1||space$2(h.text.charCodeAt(h.pos+1)))&&(!o||inList(r,Type.BulletList)||h.skipSpace(h.pos+2)<h.text.length)?1:-1}function isOrderedList(h,r,o){let u=h.pos,g=h.next;for(;g>=48&&g<=57;){u++;if(u==h.text.length)return-1;g=h.text.charCodeAt(u)}return u==h.pos||u>h.pos+9||g!=46&&g!=41||u<h.text.length-1&&!space$2(h.text.charCodeAt(u+1))||o&&!inList(r,Type.OrderedList)&&(h.skipSpace(u+1)==h.text.length||u>h.pos+1||h.next!=49)?-1:u+1-h.pos}function isAtxHeading(h){if(h.next!=35)return-1;let r=h.pos+1;for(;r<h.text.length&&h.text.charCodeAt(r)==35;)r++;if(r<h.text.length&&h.text.charCodeAt(r)!=32)return-1;let o=r-h.pos;return o>6?-1:o}function isSetextUnderline(h){if(h.next!=45&&h.next!=61||h.indent>=h.baseIndent+4)return-1;let r=h.pos+1;for(;r<h.text.length&&h.text.charCodeAt(r)==h.next;)r++;let o=r;for(;r<h.text.length&&space$2(h.text.charCodeAt(r));)r++;return r==h.text.length?o:-1}const EmptyLine=/^[ \t]*$/,CommentEnd=/-->/,ProcessingEnd=/\?>/,HTMLBlockStyle=[[/^<(?:script|pre|style)(?:\s|>|$)/i,/<\/(?:script|pre|style)>/i],[/^\s*<!--/,CommentEnd],[/^\s*<\?/,ProcessingEnd],[/^\s*<![A-Z]/,/>/],[/^\s*<!\[CDATA\[/,/\]\]>/],[/^\s*<\/?(?:address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h1|h2|h3|h4|h5|h6|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul)(?:\s|\/?>|$)/i,EmptyLine],[/^\s*(?:<\/[a-z][\w-]*\s*>|<[a-z][\w-]*(\s+[a-z:_][\w-.]*(?:\s*=\s*(?:[^\s"'=<>`]+|'[^']*'|"[^"]*"))?)*\s*>)\s*$/i,EmptyLine]];function isHTMLBlock(h,r,o){if(h.next!=60)return-1;let u=h.text.slice(h.pos);for(let g=0,k=HTMLBlockStyle.length-(o?1:0);g<k;g++)if(HTMLBlockStyle[g][0].test(u))return g;return-1}function getListIndent(h,r){let o=h.countIndent(r,h.pos,h.indent),u=h.countIndent(h.skipSpace(r),r,o);return u>=o+5?o+1:u}function addCodeText(h,r,o){let u=h.length-1;u>=0&&h[u].to==r&&h[u].type==Type.CodeText?h[u].to=o:h.push(elt(Type.CodeText,r,o))}const DefaultBlockParsers={LinkReference:void 0,IndentedCode(h,r){let o=r.baseIndent+4;if(r.indent<o)return!1;let u=r.findColumn(o),g=h.lineStart+u,k=h.lineStart+r.text.length,A=[],R=[];for(addCodeText(A,g,k);h.nextLine()&&r.depth>=h.stack.length;)if(r.pos==r.text.length){addCodeText(R,h.lineStart-1,h.lineStart);for(let q of r.markers)R.push(q)}else{if(r.indent<o)break;{if(R.length){for(let _ of R)_.type==Type.CodeText?addCodeText(A,_.from,_.to):A.push(_);R=[]}addCodeText(A,h.lineStart-1,h.lineStart);for(let _ of r.markers)A.push(_);k=h.lineStart+r.text.length;let q=h.lineStart+r.findColumn(r.baseIndent+4);q<k&&addCodeText(A,q,k)}}return R.length&&(R=R.filter(q=>q.type!=Type.CodeText),R.length&&(r.markers=R.concat(r.markers))),h.addNode(h.buffer.writeElements(A,-g).finish(Type.CodeBlock,k-g),g),!0},FencedCode(h,r){let o=isFencedCode(r);if(o<0)return!1;let u=h.lineStart+r.pos,g=r.next,k=o-r.pos,A=r.skipSpace(o),R=skipSpaceBack(r.text,r.text.length,A),q=[elt(Type.CodeMark,u,u+k)];A<R&&q.push(elt(Type.CodeInfo,h.lineStart+A,h.lineStart+R));for(let _=!0;h.nextLine()&&r.depth>=h.stack.length;_=!1){let ee=r.pos;if(r.indent-r.baseIndent<4)for(;ee<r.text.length&&r.text.charCodeAt(ee)==g;)ee++;if(ee-r.pos>=k&&r.skipSpace(ee)==r.text.length){for(let te of r.markers)q.push(te);q.push(elt(Type.CodeMark,h.lineStart+r.pos,h.lineStart+ee)),h.nextLine();break}else{_||addCodeText(q,h.lineStart-1,h.lineStart);for(let re of r.markers)q.push(re);let te=h.lineStart+r.basePos,ne=h.lineStart+r.text.length;te<ne&&addCodeText(q,te,ne)}}return h.addNode(h.buffer.writeElements(q,-u).finish(Type.FencedCode,h.prevLineEnd()-u),u),!0},Blockquote(h,r){let o=isBlockquote(r);return o<0?!1:(h.startContext(Type.Blockquote,r.pos),h.addNode(Type.QuoteMark,h.lineStart+r.pos,h.lineStart+r.pos+1),r.moveBase(r.pos+o),null)},HorizontalRule(h,r){if(isHorizontalRule(r,h,!1)<0)return!1;let o=h.lineStart+r.pos;return h.nextLine(),h.addNode(Type.HorizontalRule,o),!0},BulletList(h,r){let o=isBulletList(r,h,!1);if(o<0)return!1;h.block.type!=Type.BulletList&&h.startContext(Type.BulletList,r.basePos,r.next);let u=getListIndent(r,r.pos+1);return h.startContext(Type.ListItem,r.basePos,u-r.baseIndent),h.addNode(Type.ListMark,h.lineStart+r.pos,h.lineStart+r.pos+o),r.moveBaseColumn(u),null},OrderedList(h,r){let o=isOrderedList(r,h,!1);if(o<0)return!1;h.block.type!=Type.OrderedList&&h.startContext(Type.OrderedList,r.basePos,r.text.charCodeAt(r.pos+o-1));let u=getListIndent(r,r.pos+o);return h.startContext(Type.ListItem,r.basePos,u-r.baseIndent),h.addNode(Type.ListMark,h.lineStart+r.pos,h.lineStart+r.pos+o),r.moveBaseColumn(u),null},ATXHeading(h,r){let o=isAtxHeading(r);if(o<0)return!1;let u=r.pos,g=h.lineStart+u,k=skipSpaceBack(r.text,r.text.length,u),A=k;for(;A>u&&r.text.charCodeAt(A-1)==r.next;)A--;(A==k||A==u||!space$2(r.text.charCodeAt(A-1)))&&(A=r.text.length);let R=h.buffer.write(Type.HeaderMark,0,o).writeElements(h.parser.parseInline(r.text.slice(u+o+1,A),g+o+1),-g);A<r.text.length&&R.write(Type.HeaderMark,A-u,k-u);let q=R.finish(Type.ATXHeading1-1+o,r.text.length-u);return h.nextLine(),h.addNode(q,g),!0},HTMLBlock(h,r){let o=isHTMLBlock(r,h,!1);if(o<0)return!1;let u=h.lineStart+r.pos,g=HTMLBlockStyle[o][1],k=[],A=g!=EmptyLine;for(;!g.test(r.text)&&h.nextLine();){if(r.depth<h.stack.length){A=!1;break}for(let _ of r.markers)k.push(_)}A&&h.nextLine();let R=g==CommentEnd?Type.CommentBlock:g==ProcessingEnd?Type.ProcessingInstructionBlock:Type.HTMLBlock,q=h.prevLineEnd();return h.addNode(h.buffer.writeElements(k,-u).finish(R,q-u),u),!0},SetextHeading:void 0};class LinkReferenceParser{constructor(r){this.stage=0,this.elts=[],this.pos=0,this.start=r.start,this.advance(r.content)}nextLine(r,o,u){if(this.stage==-1)return!1;let g=u.content+`
`+o.scrub(),k=this.advance(g);return k>-1&&k<g.length?this.complete(r,u,k):!1}finish(r,o){return(this.stage==2||this.stage==3)&&skipSpace(o.content,this.pos)==o.content.length?this.complete(r,o,o.content.length):!1}complete(r,o,u){return r.addLeafElement(o,elt(Type.LinkReference,this.start,this.start+u,this.elts)),!0}nextStage(r){return r?(this.pos=r.to-this.start,this.elts.push(r),this.stage++,!0):(r===!1&&(this.stage=-1),!1)}advance(r){for(;;){if(this.stage==-1)return-1;if(this.stage==0){if(!this.nextStage(parseLinkLabel(r,this.pos,this.start,!0)))return-1;if(r.charCodeAt(this.pos)!=58)return this.stage=-1;this.elts.push(elt(Type.LinkMark,this.pos+this.start,this.pos+this.start+1)),this.pos++}else if(this.stage==1){if(!this.nextStage(parseURL(r,skipSpace(r,this.pos),this.start)))return-1}else if(this.stage==2){let o=skipSpace(r,this.pos),u=0;if(o>this.pos){let g=parseLinkTitle(r,o,this.start);if(g){let k=lineEnd(r,g.to-this.start);k>0&&(this.nextStage(g),u=k)}}return u||(u=lineEnd(r,this.pos)),u>0&&u<r.length?u:-1}else return lineEnd(r,this.pos)}}}function lineEnd(h,r){for(;r<h.length;r++){let o=h.charCodeAt(r);if(o==10)break;if(!space$2(o))return-1}return r}class SetextHeadingParser{nextLine(r,o,u){let g=o.depth<r.stack.length?-1:isSetextUnderline(o),k=o.next;if(g<0)return!1;let A=elt(Type.HeaderMark,r.lineStart+o.pos,r.lineStart+g);return r.nextLine(),r.addLeafElement(u,elt(k==61?Type.SetextHeading1:Type.SetextHeading2,u.start,r.prevLineEnd(),[...r.parser.parseInline(u.content,u.start),A])),!0}finish(){return!1}}const DefaultLeafBlocks={LinkReference(h,r){return r.content.charCodeAt(0)==91?new LinkReferenceParser(r):null},SetextHeading(){return new SetextHeadingParser}},DefaultEndLeaf=[(h,r)=>isAtxHeading(r)>=0,(h,r)=>isFencedCode(r)>=0,(h,r)=>isBlockquote(r)>=0,(h,r)=>isBulletList(r,h,!0)>=0,(h,r)=>isOrderedList(r,h,!0)>=0,(h,r)=>isHorizontalRule(r,h,!0)>=0,(h,r)=>isHTMLBlock(r,h,!0)>=0],scanLineResult={text:"",end:0};class BlockContext{constructor(r,o,u,g){this.parser=r,this.input=o,this.ranges=g,this.line=new Line,this.atEnd=!1,this.reusePlaceholders=new Map,this.stoppedAt=null,this.rangeI=0,this.to=g[g.length-1].to,this.lineStart=this.absoluteLineStart=this.absoluteLineEnd=g[0].from,this.block=CompositeBlock.create(Type.Document,0,this.lineStart,0,0),this.stack=[this.block],this.fragments=u.length?new FragmentCursor$1(u,o):null,this.readLine()}get parsedPos(){return this.absoluteLineStart}advance(){if(this.stoppedAt!=null&&this.absoluteLineStart>this.stoppedAt)return this.finish();let{line:r}=this;for(;;){for(let u=0;;){let g=r.depth<this.stack.length?this.stack[this.stack.length-1]:null;for(;u<r.markers.length&&(!g||r.markers[u].from<g.end);){let k=r.markers[u++];this.addNode(k.type,k.from,k.to)}if(!g)break;this.finishContext()}if(r.pos<r.text.length)break;if(!this.nextLine())return this.finish()}if(this.fragments&&this.reuseFragment(r.basePos))return null;e:for(;;){for(let u of this.parser.blockParsers)if(u){let g=u(this,r);if(g!=!1){if(g==!0)return null;r.forward();continue e}}break}let o=new LeafBlock(this.lineStart+r.pos,r.text.slice(r.pos));for(let u of this.parser.leafBlockParsers)if(u){let g=u(this,o);g&&o.parsers.push(g)}e:for(;this.nextLine()&&r.pos!=r.text.length;){if(r.indent<r.baseIndent+4){for(let u of this.parser.endLeafBlock)if(u(this,r,o))break e}for(let u of o.parsers)if(u.nextLine(this,r,o))return null;o.content+=`
`+r.scrub();for(let u of r.markers)o.marks.push(u)}return this.finishLeaf(o),null}stopAt(r){if(this.stoppedAt!=null&&this.stoppedAt<r)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=r}reuseFragment(r){if(!this.fragments.moveTo(this.absoluteLineStart+r,this.absoluteLineStart)||!this.fragments.matches(this.block.hash))return!1;let o=this.fragments.takeNodes(this);return o?(this.absoluteLineStart+=o,this.lineStart=toRelative(this.absoluteLineStart,this.ranges),this.moveRangeI(),this.absoluteLineStart<this.to?(this.lineStart++,this.absoluteLineStart++,this.readLine()):(this.atEnd=!0,this.readLine()),!0):!1}get depth(){return this.stack.length}parentType(r=this.depth-1){return this.parser.nodeSet.types[this.stack[r].type]}nextLine(){return this.lineStart+=this.line.text.length,this.absoluteLineEnd>=this.to?(this.absoluteLineStart=this.absoluteLineEnd,this.atEnd=!0,this.readLine(),!1):(this.lineStart++,this.absoluteLineStart=this.absoluteLineEnd+1,this.moveRangeI(),this.readLine(),!0)}peekLine(){return this.scanLine(this.absoluteLineEnd+1).text}moveRangeI(){for(;this.rangeI<this.ranges.length-1&&this.absoluteLineStart>=this.ranges[this.rangeI].to;)this.rangeI++,this.absoluteLineStart=Math.max(this.absoluteLineStart,this.ranges[this.rangeI].from)}scanLine(r){let o=scanLineResult;if(o.end=r,r>=this.to)o.text="";else if(o.text=this.lineChunkAt(r),o.end+=o.text.length,this.ranges.length>1){let u=this.absoluteLineStart,g=this.rangeI;for(;this.ranges[g].to<o.end;){g++;let k=this.ranges[g].from,A=this.lineChunkAt(k);o.end=k+A.length,o.text=o.text.slice(0,this.ranges[g-1].to-u)+A,u=o.end-o.text.length}}return o}readLine(){let{line:r}=this,{text:o,end:u}=this.scanLine(this.absoluteLineStart);for(this.absoluteLineEnd=u,r.reset(o);r.depth<this.stack.length;r.depth++){let g=this.stack[r.depth],k=this.parser.skipContextMarkup[g.type];if(!k)throw new Error("Unhandled block context "+Type[g.type]);if(!k(g,this,r))break;r.forward()}}lineChunkAt(r){let o=this.input.chunk(r),u;if(this.input.lineChunks)u=o==`
`?"":o;else{let g=o.indexOf(`
`);u=g<0?o:o.slice(0,g)}return r+u.length>this.to?u.slice(0,this.to-r):u}prevLineEnd(){return this.atEnd?this.lineStart:this.lineStart-1}startContext(r,o,u=0){this.block=CompositeBlock.create(r,u,this.lineStart+o,this.block.hash,this.lineStart+this.line.text.length),this.stack.push(this.block)}startComposite(r,o,u=0){this.startContext(this.parser.getNodeType(r),o,u)}addNode(r,o,u){typeof r=="number"&&(r=new Tree(this.parser.nodeSet.types[r],none,none,(u??this.prevLineEnd())-o)),this.block.addChild(r,o-this.block.from)}addElement(r){this.block.addChild(r.toTree(this.parser.nodeSet),r.from-this.block.from)}addLeafElement(r,o){this.addNode(this.buffer.writeElements(injectMarks(o.children,r.marks),-o.from).finish(o.type,o.to-o.from),o.from)}finishContext(){let r=this.stack.pop(),o=this.stack[this.stack.length-1];o.addChild(r.toTree(this.parser.nodeSet),r.from-o.from),this.block=o}finish(){for(;this.stack.length>1;)this.finishContext();return this.addGaps(this.block.toTree(this.parser.nodeSet,this.lineStart))}addGaps(r){return this.ranges.length>1?injectGaps(this.ranges,0,r.topNode,this.ranges[0].from,this.reusePlaceholders):r}finishLeaf(r){for(let u of r.parsers)if(u.finish(this,r))return;let o=injectMarks(this.parser.parseInline(r.content,r.start),r.marks);this.addNode(this.buffer.writeElements(o,-r.start).finish(Type.Paragraph,r.content.length),r.start)}elt(r,o,u,g){return typeof r=="string"?elt(this.parser.getNodeType(r),o,u,g):new TreeElement(r,o)}get buffer(){return new Buffer(this.parser.nodeSet)}}function injectGaps(h,r,o,u,g){let k=h[r].to,A=[],R=[],q=o.from+u;function _(ee,te){for(;te?ee>=k:ee>k;){let ne=h[r+1].from-k;u+=ne,ee+=ne,r++,k=h[r].to}}for(let ee=o.firstChild;ee;ee=ee.nextSibling){_(ee.from+u,!0);let te=ee.from+u,ne,re=g.get(ee.tree);re?ne=re:ee.to+u>k?(ne=injectGaps(h,r,ee,u,g),_(ee.to+u,!1)):ne=ee.toTree(),A.push(ne),R.push(te-q)}return _(o.to+u,!1),new Tree(o.type,A,R,o.to+u-q,o.tree?o.tree.propValues:void 0)}class MarkdownParser extends Parser{constructor(r,o,u,g,k,A,R,q,_){super(),this.nodeSet=r,this.blockParsers=o,this.leafBlockParsers=u,this.blockNames=g,this.endLeafBlock=k,this.skipContextMarkup=A,this.inlineParsers=R,this.inlineNames=q,this.wrappers=_,this.nodeTypes=Object.create(null);for(let ee of r.types)this.nodeTypes[ee.name]=ee.id}createParse(r,o,u){let g=new BlockContext(this,r,o,u);for(let k of this.wrappers)g=k(g,r,o,u);return g}configure(r){let o=resolveConfig(r);if(!o)return this;let{nodeSet:u,skipContextMarkup:g}=this,k=this.blockParsers.slice(),A=this.leafBlockParsers.slice(),R=this.blockNames.slice(),q=this.inlineParsers.slice(),_=this.inlineNames.slice(),ee=this.endLeafBlock.slice(),te=this.wrappers;if(nonEmpty(o.defineNodes)){g=Object.assign({},g);let ne=u.types.slice(),re;for(let oe of o.defineNodes){let{name:le,block:pe,composite:de,style:he}=typeof oe=="string"?{name:oe}:oe;if(ne.some(ce=>ce.name==le))continue;de&&(g[ne.length]=(ce,fe,ue)=>de(fe,ue,ce.value));let ae=ne.length,se=de?["Block","BlockContext"]:pe?ae>=Type.ATXHeading1&&ae<=Type.SetextHeading2?["Block","LeafBlock","Heading"]:["Block","LeafBlock"]:void 0;ne.push(NodeType.define({id:ae,name:le,props:se&&[[NodeProp.group,se]]})),he&&(re||(re={}),Array.isArray(he)||he instanceof Tag?re[le]=he:Object.assign(re,he))}u=new NodeSet(ne),re&&(u=u.extend(styleTags(re)))}if(nonEmpty(o.props)&&(u=u.extend(...o.props)),nonEmpty(o.remove))for(let ne of o.remove){let re=this.blockNames.indexOf(ne),oe=this.inlineNames.indexOf(ne);re>-1&&(k[re]=A[re]=void 0),oe>-1&&(q[oe]=void 0)}if(nonEmpty(o.parseBlock))for(let ne of o.parseBlock){let re=R.indexOf(ne.name);if(re>-1)k[re]=ne.parse,A[re]=ne.leaf;else{let oe=ne.before?findName(R,ne.before):ne.after?findName(R,ne.after)+1:R.length-1;k.splice(oe,0,ne.parse),A.splice(oe,0,ne.leaf),R.splice(oe,0,ne.name)}ne.endLeaf&&ee.push(ne.endLeaf)}if(nonEmpty(o.parseInline))for(let ne of o.parseInline){let re=_.indexOf(ne.name);if(re>-1)q[re]=ne.parse;else{let oe=ne.before?findName(_,ne.before):ne.after?findName(_,ne.after)+1:_.length-1;q.splice(oe,0,ne.parse),_.splice(oe,0,ne.name)}}return o.wrap&&(te=te.concat(o.wrap)),new MarkdownParser(u,k,A,R,ee,g,q,_,te)}getNodeType(r){let o=this.nodeTypes[r];if(o==null)throw new RangeError(`Unknown node type '${r}'`);return o}parseInline(r,o){let u=new InlineContext(this,r,o);e:for(let g=o;g<u.end;){let k=u.char(g);for(let A of this.inlineParsers)if(A){let R=A(u,k,g);if(R>=0){g=R;continue e}}g++}return u.resolveMarkers(0)}}function nonEmpty(h){return h!=null&&h.length>0}function resolveConfig(h){if(!Array.isArray(h))return h;if(h.length==0)return null;let r=resolveConfig(h[0]);if(h.length==1)return r;let o=resolveConfig(h.slice(1));if(!o||!r)return r||o;let u=(A,R)=>(A||none).concat(R||none),g=r.wrap,k=o.wrap;return{props:u(r.props,o.props),defineNodes:u(r.defineNodes,o.defineNodes),parseBlock:u(r.parseBlock,o.parseBlock),parseInline:u(r.parseInline,o.parseInline),remove:u(r.remove,o.remove),wrap:g?k?(A,R,q,_)=>g(k(A,R,q,_),R,q,_):g:k}}function findName(h,r){let o=h.indexOf(r);if(o<0)throw new RangeError(`Position specified relative to unknown parser ${r}`);return o}let nodeTypes=[NodeType.none];for(let h=1,r;r=Type[h];h++)nodeTypes[h]=NodeType.define({id:h,name:r,props:h>=Type.Escape?[]:[[NodeProp.group,h in DefaultSkipMarkup?["Block","BlockContext"]:["Block","LeafBlock"]]],top:r=="Document"});const none=[];class Buffer{constructor(r){this.nodeSet=r,this.content=[],this.nodes=[]}write(r,o,u,g=0){return this.content.push(r,o,u,4+g*4),this}writeElements(r,o=0){for(let u of r)u.writeTo(this,o);return this}finish(r,o){return Tree.build({buffer:this.content,nodeSet:this.nodeSet,reused:this.nodes,topID:r,length:o})}}let Element$2=class{constructor(r,o,u,g=none){this.type=r,this.from=o,this.to=u,this.children=g}writeTo(r,o){let u=r.content.length;r.writeElements(this.children,o),r.content.push(this.type,this.from+o,this.to+o,r.content.length+4-u)}toTree(r){return new Buffer(r).writeElements(this.children,-this.from).finish(this.type,this.to-this.from)}};class TreeElement{constructor(r,o){this.tree=r,this.from=o}get to(){return this.from+this.tree.length}get type(){return this.tree.type.id}get children(){return none}writeTo(r,o){r.nodes.push(this.tree),r.content.push(r.nodes.length-1,this.from+o,this.to+o,-1)}toTree(){return this.tree}}function elt(h,r,o,u){return new Element$2(h,r,o,u)}const EmphasisUnderscore={resolve:"Emphasis",mark:"EmphasisMark"},EmphasisAsterisk={resolve:"Emphasis",mark:"EmphasisMark"},LinkStart={},ImageStart={};class InlineDelimiter{constructor(r,o,u,g){this.type=r,this.from=o,this.to=u,this.side=g}}const Escapable="!\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~";let Punctuation=/[!"#$%&'()*+,\-.\/:;<=>?@\[\\\]^_`{|}~\xA1\u2010-\u2027]/;try{Punctuation=new RegExp("[\\p{S}|\\p{P}]","u")}catch(h){}const DefaultInline={Escape(h,r,o){if(r!=92||o==h.end-1)return-1;let u=h.char(o+1);for(let g=0;g<Escapable.length;g++)if(Escapable.charCodeAt(g)==u)return h.append(elt(Type.Escape,o,o+2));return-1},Entity(h,r,o){if(r!=38)return-1;let u=/^(?:#\d+|#x[a-f\d]+|\w+);/i.exec(h.slice(o+1,o+31));return u?h.append(elt(Type.Entity,o,o+1+u[0].length)):-1},InlineCode(h,r,o){if(r!=96||o&&h.char(o-1)==96)return-1;let u=o+1;for(;u<h.end&&h.char(u)==96;)u++;let g=u-o,k=0;for(;u<h.end;u++)if(h.char(u)==96){if(k++,k==g&&h.char(u+1)!=96)return h.append(elt(Type.InlineCode,o,u+1,[elt(Type.CodeMark,o,o+g),elt(Type.CodeMark,u+1-g,u+1)]))}else k=0;return-1},HTMLTag(h,r,o){if(r!=60||o==h.end-1)return-1;let u=h.slice(o+1,h.end),g=/^(?:[a-z][-\w+.]+:[^\s>]+|[a-z\d.!#$%&'*+/=?^_`{|}~-]+@[a-z\d](?:[a-z\d-]{0,61}[a-z\d])?(?:\.[a-z\d](?:[a-z\d-]{0,61}[a-z\d])?)*)>/i.exec(u);if(g)return h.append(elt(Type.Autolink,o,o+1+g[0].length,[elt(Type.LinkMark,o,o+1),elt(Type.URL,o+1,o+g[0].length),elt(Type.LinkMark,o+g[0].length,o+1+g[0].length)]));let k=/^!--[^>](?:-[^-]|[^-])*?-->/i.exec(u);if(k)return h.append(elt(Type.Comment,o,o+1+k[0].length));let A=/^\?[^]*?\?>/.exec(u);if(A)return h.append(elt(Type.ProcessingInstruction,o,o+1+A[0].length));let R=/^(?:![A-Z][^]*?>|!\[CDATA\[[^]*?\]\]>|\/\s*[a-zA-Z][\w-]*\s*>|\s*[a-zA-Z][\w-]*(\s+[a-zA-Z:_][\w-.:]*(?:\s*=\s*(?:[^\s"'=<>`]+|'[^']*'|"[^"]*"))?)*\s*(\/\s*)?>)/.exec(u);return R?h.append(elt(Type.HTMLTag,o,o+1+R[0].length)):-1},Emphasis(h,r,o){if(r!=95&&r!=42)return-1;let u=o+1;for(;h.char(u)==r;)u++;let g=h.slice(o-1,o),k=h.slice(u,u+1),A=Punctuation.test(g),R=Punctuation.test(k),q=/\s|^$/.test(g),_=/\s|^$/.test(k),ee=!_&&(!R||q||A),te=!q&&(!A||_||R),ne=ee&&(r==42||!te||A),re=te&&(r==42||!ee||R);return h.append(new InlineDelimiter(r==95?EmphasisUnderscore:EmphasisAsterisk,o,u,(ne?1:0)|(re?2:0)))},HardBreak(h,r,o){if(r==92&&h.char(o+1)==10)return h.append(elt(Type.HardBreak,o,o+2));if(r==32){let u=o+1;for(;h.char(u)==32;)u++;if(h.char(u)==10&&u>=o+2)return h.append(elt(Type.HardBreak,o,u+1))}return-1},Link(h,r,o){return r==91?h.append(new InlineDelimiter(LinkStart,o,o+1,1)):-1},Image(h,r,o){return r==33&&h.char(o+1)==91?h.append(new InlineDelimiter(ImageStart,o,o+2,1)):-1},LinkEnd(h,r,o){if(r!=93)return-1;for(let u=h.parts.length-1;u>=0;u--){let g=h.parts[u];if(g instanceof InlineDelimiter&&(g.type==LinkStart||g.type==ImageStart)){if(!g.side||h.skipSpace(g.to)==o&&!/[(\[]/.test(h.slice(o+1,o+2)))return h.parts[u]=null,-1;let k=h.takeContent(u),A=h.parts[u]=finishLink(h,k,g.type==LinkStart?Type.Link:Type.Image,g.from,o+1);if(g.type==LinkStart)for(let R=0;R<u;R++){let q=h.parts[R];q instanceof InlineDelimiter&&q.type==LinkStart&&(q.side=0)}return A.to}}return-1}};function finishLink(h,r,o,u,g){let{text:k}=h,A=h.char(g),R=g;if(r.unshift(elt(Type.LinkMark,u,u+(o==Type.Image?2:1))),r.push(elt(Type.LinkMark,g-1,g)),A==40){let q=h.skipSpace(g+1),_=parseURL(k,q-h.offset,h.offset),ee;_&&(q=h.skipSpace(_.to),q!=_.to&&(ee=parseLinkTitle(k,q-h.offset,h.offset),ee&&(q=h.skipSpace(ee.to)))),h.char(q)==41&&(r.push(elt(Type.LinkMark,g,g+1)),R=q+1,_&&r.push(_),ee&&r.push(ee),r.push(elt(Type.LinkMark,q,R)))}else if(A==91){let q=parseLinkLabel(k,g-h.offset,h.offset,!1);q&&(r.push(q),R=q.to)}return elt(o,u,R,r)}function parseURL(h,r,o){if(h.charCodeAt(r)==60){for(let g=r+1;g<h.length;g++){let k=h.charCodeAt(g);if(k==62)return elt(Type.URL,r+o,g+1+o);if(k==60||k==10)return!1}return null}else{let g=0,k=r;for(let A=!1;k<h.length;k++){let R=h.charCodeAt(k);if(space$2(R))break;if(A)A=!1;else if(R==40)g++;else if(R==41){if(!g)break;g--}else R==92&&(A=!0)}return k>r?elt(Type.URL,r+o,k+o):k==h.length?null:!1}}function parseLinkTitle(h,r,o){let u=h.charCodeAt(r);if(u!=39&&u!=34&&u!=40)return!1;let g=u==40?41:u;for(let k=r+1,A=!1;k<h.length;k++){let R=h.charCodeAt(k);if(A)A=!1;else{if(R==g)return elt(Type.LinkTitle,r+o,k+1+o);R==92&&(A=!0)}}return null}function parseLinkLabel(h,r,o,u){for(let g=!1,k=r+1,A=Math.min(h.length,k+999);k<A;k++){let R=h.charCodeAt(k);if(g)g=!1;else{if(R==93)return u?!1:elt(Type.LinkLabel,r+o,k+1+o);if(u&&!space$2(R)&&(u=!1),R==91)return!1;R==92&&(g=!0)}}return null}class InlineContext{constructor(r,o,u){this.parser=r,this.text=o,this.offset=u,this.parts=[]}char(r){return r>=this.end?-1:this.text.charCodeAt(r-this.offset)}get end(){return this.offset+this.text.length}slice(r,o){return this.text.slice(r-this.offset,o-this.offset)}append(r){return this.parts.push(r),r.to}addDelimiter(r,o,u,g,k){return this.append(new InlineDelimiter(r,o,u,(g?1:0)|(k?2:0)))}get hasOpenLink(){for(let r=this.parts.length-1;r>=0;r--){let o=this.parts[r];if(o instanceof InlineDelimiter&&(o.type==LinkStart||o.type==ImageStart))return!0}return!1}addElement(r){return this.append(r)}resolveMarkers(r){for(let u=r;u<this.parts.length;u++){let g=this.parts[u];if(!(g instanceof InlineDelimiter&&g.type.resolve&&g.side&2))continue;let k=g.type==EmphasisUnderscore||g.type==EmphasisAsterisk,A=g.to-g.from,R,q=u-1;for(;q>=r;q--){let le=this.parts[q];if(le instanceof InlineDelimiter&&le.side&1&&le.type==g.type&&!(k&&(g.side&1||le.side&2)&&(le.to-le.from+A)%3==0&&((le.to-le.from)%3||A%3))){R=le;break}}if(!R)continue;let _=g.type.resolve,ee=[],te=R.from,ne=g.to;if(k){let le=Math.min(2,R.to-R.from,A);te=R.to-le,ne=g.from+le,_=le==1?"Emphasis":"StrongEmphasis"}R.type.mark&&ee.push(this.elt(R.type.mark,te,R.to));for(let le=q+1;le<u;le++)this.parts[le]instanceof Element$2&&ee.push(this.parts[le]),this.parts[le]=null;g.type.mark&&ee.push(this.elt(g.type.mark,g.from,ne));let re=this.elt(_,te,ne,ee);this.parts[q]=k&&R.from!=te?new InlineDelimiter(R.type,R.from,te,R.side):null,(this.parts[u]=k&&g.to!=ne?new InlineDelimiter(g.type,ne,g.to,g.side):null)?this.parts.splice(u,0,re):this.parts[u]=re}let o=[];for(let u=r;u<this.parts.length;u++){let g=this.parts[u];g instanceof Element$2&&o.push(g)}return o}findOpeningDelimiter(r){for(let o=this.parts.length-1;o>=0;o--){let u=this.parts[o];if(u instanceof InlineDelimiter&&u.type==r)return o}return null}takeContent(r){let o=this.resolveMarkers(r);return this.parts.length=r,o}skipSpace(r){return skipSpace(this.text,r-this.offset)+this.offset}elt(r,o,u,g){return typeof r=="string"?elt(this.parser.getNodeType(r),o,u,g):new TreeElement(r,o)}}function injectMarks(h,r){if(!r.length)return h;if(!h.length)return r;let o=h.slice(),u=0;for(let g of r){for(;u<o.length&&o[u].to<g.to;)u++;if(u<o.length&&o[u].from<g.from){let k=o[u];k instanceof Element$2&&(o[u]=new Element$2(k.type,k.from,k.to,injectMarks(k.children,[g])))}else o.splice(u++,0,g)}return o}const NotLast=[Type.CodeBlock,Type.ListItem,Type.OrderedList,Type.BulletList];let FragmentCursor$1=class{constructor(r,o){this.fragments=r,this.input=o,this.i=0,this.fragment=null,this.fragmentEnd=-1,this.cursor=null,r.length&&(this.fragment=r[this.i++])}nextFragment(){this.fragment=this.i<this.fragments.length?this.fragments[this.i++]:null,this.cursor=null,this.fragmentEnd=-1}moveTo(r,o){for(;this.fragment&&this.fragment.to<=r;)this.nextFragment();if(!this.fragment||this.fragment.from>(r?r-1:0))return!1;if(this.fragmentEnd<0){let k=this.fragment.to;for(;k>0&&this.input.read(k-1,k)!=`
`;)k--;this.fragmentEnd=k?k-1:0}let u=this.cursor;u||(u=this.cursor=this.fragment.tree.cursor(),u.firstChild());let g=r+this.fragment.offset;for(;u.to<=g;)if(!u.parent())return!1;for(;;){if(u.from>=g)return this.fragment.from<=o;if(!u.childAfter(g))return!1}}matches(r){let o=this.cursor.tree;return o&&o.prop(NodeProp.contextHash)==r}takeNodes(r){let o=this.cursor,u=this.fragment.offset,g=this.fragmentEnd-(this.fragment.openEnd?1:0),k=r.absoluteLineStart,A=k,R=r.block.children.length,q=A,_=R;for(;;){if(o.to-u>g){if(o.type.isAnonymous&&o.firstChild())continue;break}let ee=toRelative(o.from-u,r.ranges);if(o.to-u<=r.ranges[r.rangeI].to)r.addNode(o.tree,ee);else{let te=new Tree(r.parser.nodeSet.types[Type.Paragraph],[],[],0,r.block.hashProp);r.reusePlaceholders.set(te,o.tree),r.addNode(te,ee)}if(o.type.is("Block")&&(NotLast.indexOf(o.type.id)<0?(A=o.to-u,R=r.block.children.length):(A=q,R=_,q=o.to-u,_=r.block.children.length)),!o.nextSibling())break}for(;r.block.children.length>R;)r.block.children.pop(),r.block.positions.pop();return A-k}};function toRelative(h,r){let o=h;for(let u=1;u<r.length;u++){let g=r[u-1].to,k=r[u].from;g<h&&(o-=k-g)}return o}const markdownHighlighting=styleTags({"Blockquote/...":tags$1.quote,HorizontalRule:tags$1.contentSeparator,"ATXHeading1/... SetextHeading1/...":tags$1.heading1,"ATXHeading2/... SetextHeading2/...":tags$1.heading2,"ATXHeading3/...":tags$1.heading3,"ATXHeading4/...":tags$1.heading4,"ATXHeading5/...":tags$1.heading5,"ATXHeading6/...":tags$1.heading6,"Comment CommentBlock":tags$1.comment,Escape:tags$1.escape,Entity:tags$1.character,"Emphasis/...":tags$1.emphasis,"StrongEmphasis/...":tags$1.strong,"Link/... Image/...":tags$1.link,"OrderedList/... BulletList/...":tags$1.list,"BlockQuote/...":tags$1.quote,"InlineCode CodeText":tags$1.monospace,"URL Autolink":tags$1.url,"HeaderMark HardBreak QuoteMark ListMark LinkMark EmphasisMark CodeMark":tags$1.processingInstruction,"CodeInfo LinkLabel":tags$1.labelName,LinkTitle:tags$1.string,Paragraph:tags$1.content}),parser$3=new MarkdownParser(new NodeSet(nodeTypes).extend(markdownHighlighting),Object.keys(DefaultBlockParsers).map(h=>DefaultBlockParsers[h]),Object.keys(DefaultBlockParsers).map(h=>DefaultLeafBlocks[h]),Object.keys(DefaultBlockParsers),DefaultEndLeaf,DefaultSkipMarkup,Object.keys(DefaultInline).map(h=>DefaultInline[h]),Object.keys(DefaultInline),[]);function leftOverSpace(h,r,o){let u=[];for(let g=h.firstChild,k=r;;g=g.nextSibling){let A=g?g.from:o;if(A>k&&u.push({from:k,to:A}),!g)break;k=g.to}return u}function parseCode(h){let{codeParser:r,htmlParser:o}=h;return{wrap:parseMixed((g,k)=>{let A=g.type.id;if(r&&(A==Type.CodeBlock||A==Type.FencedCode)){let R="";if(A==Type.FencedCode){let _=g.node.getChild(Type.CodeInfo);_&&(R=k.read(_.from,_.to))}let q=r(R);if(q)return{parser:q,overlay:_=>_.type.id==Type.CodeText}}else if(o&&(A==Type.HTMLBlock||A==Type.HTMLTag||A==Type.CommentBlock))return{parser:o,overlay:leftOverSpace(g.node,g.from,g.to)};return null})}}const StrikethroughDelim={resolve:"Strikethrough",mark:"StrikethroughMark"},Strikethrough={defineNodes:[{name:"Strikethrough",style:{"Strikethrough/...":tags$1.strikethrough}},{name:"StrikethroughMark",style:tags$1.processingInstruction}],parseInline:[{name:"Strikethrough",parse(h,r,o){if(r!=126||h.char(o+1)!=126||h.char(o+2)==126)return-1;let u=h.slice(o-1,o),g=h.slice(o+2,o+3),k=/\s|^$/.test(u),A=/\s|^$/.test(g),R=Punctuation.test(u),q=Punctuation.test(g);return h.addDelimiter(StrikethroughDelim,o,o+2,!A&&(!q||k||R),!k&&(!R||A||q))},after:"Emphasis"}]};function parseRow(h,r,o=0,u,g=0){let k=0,A=!0,R=-1,q=-1,_=!1,ee=()=>{u.push(h.elt("TableCell",g+R,g+q,h.parser.parseInline(r.slice(R,q),g+R)))};for(let te=o;te<r.length;te++){let ne=r.charCodeAt(te);ne==124&&!_?((!A||R>-1)&&k++,A=!1,u&&(R>-1&&ee(),u.push(h.elt("TableDelimiter",te+g,te+g+1))),R=q=-1):(_||ne!=32&&ne!=9)&&(R<0&&(R=te),q=te+1),_=!_&&ne==92}return R>-1&&(k++,u&&ee()),k}function hasPipe(h,r){for(let o=r;o<h.length;o++){let u=h.charCodeAt(o);if(u==124)return!0;u==92&&o++}return!1}const delimiterLine=/^\|?(\s*:?-+:?\s*\|)+(\s*:?-+:?\s*)?$/;class TableParser{constructor(){this.rows=null}nextLine(r,o,u){if(this.rows==null){this.rows=!1;let g;if((o.next==45||o.next==58||o.next==124)&&delimiterLine.test(g=o.text.slice(o.pos))){let k=[];parseRow(r,u.content,0,k,u.start)==parseRow(r,g,o.pos)&&(this.rows=[r.elt("TableHeader",u.start,u.start+u.content.length,k),r.elt("TableDelimiter",r.lineStart+o.pos,r.lineStart+o.text.length)])}}else if(this.rows){let g=[];parseRow(r,o.text,o.pos,g,r.lineStart),this.rows.push(r.elt("TableRow",r.lineStart+o.pos,r.lineStart+o.text.length,g))}return!1}finish(r,o){return this.rows?(r.addLeafElement(o,r.elt("Table",o.start,o.start+o.content.length,this.rows)),!0):!1}}const Table={defineNodes:[{name:"Table",block:!0},{name:"TableHeader",style:{"TableHeader/...":tags$1.heading}},"TableRow",{name:"TableCell",style:tags$1.content},{name:"TableDelimiter",style:tags$1.processingInstruction}],parseBlock:[{name:"Table",leaf(h,r){return hasPipe(r.content,0)?new TableParser:null},endLeaf(h,r,o){if(o.parsers.some(g=>g instanceof TableParser)||!hasPipe(r.text,r.basePos))return!1;let u=h.peekLine();return delimiterLine.test(u)&&parseRow(h,r.text,r.basePos)==parseRow(h,u,r.basePos)},before:"SetextHeading"}]};class TaskParser{nextLine(){return!1}finish(r,o){return r.addLeafElement(o,r.elt("Task",o.start,o.start+o.content.length,[r.elt("TaskMarker",o.start,o.start+3),...r.parser.parseInline(o.content.slice(3),o.start+3)])),!0}}const TaskList={defineNodes:[{name:"Task",block:!0,style:tags$1.list},{name:"TaskMarker",style:tags$1.atom}],parseBlock:[{name:"TaskList",leaf(h,r){return/^\[[ xX]\][ \t]/.test(r.content)&&h.parentType().name=="ListItem"?new TaskParser:null},after:"SetextHeading"}]},autolinkRE=/(www\.)|(https?:\/\/)|([\w.+-]{1,100}@)|(mailto:|xmpp:)/gy,urlRE=/[\w-]+(\.[\w-]+)+(\/[^\s<]*)?/gy,lastTwoDomainWords=/[\w-]+\.[\w-]+($|\/)/,emailRE=/[\w.+-]+@[\w-]+(\.[\w.-]+)+/gy,xmppResourceRE=/\/[a-zA-Z\d@.]+/gy;function count(h,r,o,u){let g=0;for(let k=r;k<o;k++)h[k]==u&&g++;return g}function autolinkURLEnd(h,r){urlRE.lastIndex=r;let o=urlRE.exec(h);if(!o||lastTwoDomainWords.exec(o[0])[0].indexOf("_")>-1)return-1;let u=r+o[0].length;for(;;){let g=h[u-1],k;if(/[?!.,:*_~]/.test(g)||g==")"&&count(h,r,u,")")>count(h,r,u,"("))u--;else if(g==";"&&(k=/&(?:#\d+|#x[a-f\d]+|\w+);$/.exec(h.slice(r,u))))u=r+k.index;else break}return u}function autolinkEmailEnd(h,r){emailRE.lastIndex=r;let o=emailRE.exec(h);if(!o)return-1;let u=o[0][o[0].length-1];return u=="_"||u=="-"?-1:r+o[0].length-(u=="."?1:0)}const Autolink={parseInline:[{name:"Autolink",parse(h,r,o){let u=o-h.offset;if(u&&/\w/.test(h.text[u-1]))return-1;autolinkRE.lastIndex=u;let g=autolinkRE.exec(h.text),k=-1;if(!g)return-1;if(g[1]||g[2]){if(k=autolinkURLEnd(h.text,u+g[0].length),k>-1&&h.hasOpenLink){let A=/([^\[\]]|\[[^\]]*\])*/.exec(h.text.slice(u,k));k=u+A[0].length}}else g[3]?k=autolinkEmailEnd(h.text,u):(k=autolinkEmailEnd(h.text,u+g[0].length),k>-1&&g[0]=="xmpp:"&&(xmppResourceRE.lastIndex=k,g=xmppResourceRE.exec(h.text),g&&(k=g.index+g[0].length)));return k<0?-1:(h.addElement(h.elt("URL",o,k+h.offset)),k+h.offset)}}]},GFM=[Table,TaskList,Strikethrough,Autolink];function parseSubSuper(h,r,o){return(u,g,k)=>{if(g!=h||u.char(k+1)==h)return-1;let A=[u.elt(o,k,k+1)];for(let R=k+1;R<u.end;R++){let q=u.char(R);if(q==h)return u.addElement(u.elt(r,k,R+1,A.concat(u.elt(o,R,R+1))));if(q==92&&A.push(u.elt("Escape",R,R+++2)),space$2(q))break}return-1}}const Superscript={defineNodes:[{name:"Superscript",style:tags$1.special(tags$1.content)},{name:"SuperscriptMark",style:tags$1.processingInstruction}],parseInline:[{name:"Superscript",parse:parseSubSuper(94,"Superscript","SuperscriptMark")}]},Subscript={defineNodes:[{name:"Subscript",style:tags$1.special(tags$1.content)},{name:"SubscriptMark",style:tags$1.processingInstruction}],parseInline:[{name:"Subscript",parse:parseSubSuper(126,"Subscript","SubscriptMark")}]},Emoji={defineNodes:[{name:"Emoji",style:tags$1.character}],parseInline:[{name:"Emoji",parse(h,r,o){let u;return r!=58||!(u=/^[a-zA-Z_0-9]+:/.exec(h.slice(o+1,h.end)))?-1:h.addElement(h.elt("Emoji",o,o+1+u[0].length))}}]};var define_process_env_default={};class Stack{constructor(r,o,u,g,k,A,R,q,_,ee=0,te){this.p=r,this.stack=o,this.state=u,this.reducePos=g,this.pos=k,this.score=A,this.buffer=R,this.bufferBase=q,this.curContext=_,this.lookAhead=ee,this.parent=te}toString(){return`[${this.stack.filter((r,o)=>o%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(r,o,u=0){let g=r.parser.context;return new Stack(r,[],o,u,u,0,[],0,g?new StackContext(g,g.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(r,o){this.stack.push(this.state,o,this.bufferBase+this.buffer.length),this.state=r}reduce(r){var o;let u=r>>19,g=r&65535,{parser:k}=this.p,A=this.reducePos<this.pos-25;A&&this.setLookAhead(this.pos);let R=k.dynamicPrecedence(g);if(R&&(this.score+=R),u==0){this.pushState(k.getGoto(this.state,g,!0),this.reducePos),g<k.minRepeatTerm&&this.storeNode(g,this.reducePos,this.reducePos,A?8:4,!0),this.reduceContext(g,this.reducePos);return}let q=this.stack.length-(u-1)*3-(r&262144?6:0),_=q?this.stack[q-2]:this.p.ranges[0].from,ee=this.reducePos-_;ee>=2e3&&!(!((o=this.p.parser.nodeSet.types[g])===null||o===void 0)&&o.isAnonymous)&&(_==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=ee):this.p.lastBigReductionSize<ee&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=_,this.p.lastBigReductionSize=ee));let te=q?this.stack[q-1]:0,ne=this.bufferBase+this.buffer.length-te;if(g<k.minRepeatTerm||r&131072){let re=k.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(g,_,re,ne+4,!0)}if(r&262144)this.state=this.stack[q];else{let re=this.stack[q-3];this.state=k.getGoto(re,g,!0)}for(;this.stack.length>q;)this.stack.pop();this.reduceContext(g,_)}storeNode(r,o,u,g=4,k=!1){if(r==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let A=this,R=this.buffer.length;if(R==0&&A.parent&&(R=A.bufferBase-A.parent.bufferBase,A=A.parent),R>0&&A.buffer[R-4]==0&&A.buffer[R-1]>-1){if(o==u)return;if(A.buffer[R-2]>=o){A.buffer[R-2]=u;return}}}if(!k||this.pos==u)this.buffer.push(r,o,u,g);else{let A=this.buffer.length;if(A>0&&this.buffer[A-4]!=0){let R=!1;for(let q=A;q>0&&this.buffer[q-2]>u;q-=4)if(this.buffer[q-1]>=0){R=!0;break}if(R)for(;A>0&&this.buffer[A-2]>u;)this.buffer[A]=this.buffer[A-4],this.buffer[A+1]=this.buffer[A-3],this.buffer[A+2]=this.buffer[A-2],this.buffer[A+3]=this.buffer[A-1],A-=4,g>4&&(g-=4)}this.buffer[A]=r,this.buffer[A+1]=o,this.buffer[A+2]=u,this.buffer[A+3]=g}}shift(r,o,u,g){if(r&131072)this.pushState(r&65535,this.pos);else if((r&262144)==0){let k=r,{parser:A}=this.p;(g>this.pos||o<=A.maxNode)&&(this.pos=g,A.stateFlag(k,1)||(this.reducePos=g)),this.pushState(k,u),this.shiftContext(o,u),o<=A.maxNode&&this.buffer.push(o,u,g,4)}else this.pos=g,this.shiftContext(o,u),o<=this.p.parser.maxNode&&this.buffer.push(o,u,g,4)}apply(r,o,u,g){r&65536?this.reduce(r):this.shift(r,o,u,g)}useNode(r,o){let u=this.p.reused.length-1;(u<0||this.p.reused[u]!=r)&&(this.p.reused.push(r),u++);let g=this.pos;this.reducePos=this.pos=g+r.length,this.pushState(o,g),this.buffer.push(u,g,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,r,this,this.p.stream.reset(this.pos-r.length)))}split(){let r=this,o=r.buffer.length;for(;o>0&&r.buffer[o-2]>r.reducePos;)o-=4;let u=r.buffer.slice(o),g=r.bufferBase+o;for(;r&&g==r.bufferBase;)r=r.parent;return new Stack(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,u,g,this.curContext,this.lookAhead,r)}recoverByDelete(r,o){let u=r<=this.p.parser.maxNode;u&&this.storeNode(r,this.pos,o,4),this.storeNode(0,this.pos,o,u?8:4),this.pos=this.reducePos=o,this.score-=190}canShift(r){for(let o=new SimulatedStack(this);;){let u=this.p.parser.stateSlot(o.state,4)||this.p.parser.hasAction(o.state,r);if(u==0)return!1;if((u&65536)==0)return!0;o.reduce(u)}}recoverByInsert(r){if(this.stack.length>=300)return[];let o=this.p.parser.nextStates(this.state);if(o.length>8||this.stack.length>=120){let g=[];for(let k=0,A;k<o.length;k+=2)(A=o[k+1])!=this.state&&this.p.parser.hasAction(A,r)&&g.push(o[k],A);if(this.stack.length<120)for(let k=0;g.length<8&&k<o.length;k+=2){let A=o[k+1];g.some((R,q)=>q&1&&R==A)||g.push(o[k],A)}o=g}let u=[];for(let g=0;g<o.length&&u.length<4;g+=2){let k=o[g+1];if(k==this.state)continue;let A=this.split();A.pushState(k,this.pos),A.storeNode(0,A.pos,A.pos,4,!0),A.shiftContext(o[g],this.pos),A.reducePos=this.pos,A.score-=200,u.push(A)}return u}forceReduce(){let{parser:r}=this.p,o=r.stateSlot(this.state,5);if((o&65536)==0)return!1;if(!r.validAction(this.state,o)){let u=o>>19,g=o&65535,k=this.stack.length-u*3;if(k<0||r.getGoto(this.stack[k],g,!1)<0){let A=this.findForcedReduction();if(A==null)return!1;o=A}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(o),!0}findForcedReduction(){let{parser:r}=this.p,o=[],u=(g,k)=>{if(!o.includes(g))return o.push(g),r.allActions(g,A=>{if(!(A&393216))if(A&65536){let R=(A>>19)-k;if(R>1){let q=A&65535,_=this.stack.length-R*3;if(_>=0&&r.getGoto(this.stack[_],q,!1)>=0)return R<<19|65536|q}}else{let R=u(A,k+1);if(R!=null)return R}})};return u(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:r}=this.p;return r.data[r.stateSlot(this.state,1)]==65535&&!r.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(r){if(this.state!=r.state||this.stack.length!=r.stack.length)return!1;for(let o=0;o<this.stack.length;o+=3)if(this.stack[o]!=r.stack[o])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(r){return this.p.parser.dialect.flags[r]}shiftContext(r,o){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,r,this,this.p.stream.reset(o)))}reduceContext(r,o){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,r,this,this.p.stream.reset(o)))}emitContext(){let r=this.buffer.length-1;(r<0||this.buffer[r]!=-3)&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let r=this.buffer.length-1;(r<0||this.buffer[r]!=-4)&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(r){if(r!=this.curContext.context){let o=new StackContext(this.curContext.tracker,r);o.hash!=this.curContext.hash&&this.emitContext(),this.curContext=o}}setLookAhead(r){r>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=r)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class StackContext{constructor(r,o){this.tracker=r,this.context=o,this.hash=r.strict?r.hash(o):0}}class SimulatedStack{constructor(r){this.start=r,this.state=r.state,this.stack=r.stack,this.base=this.stack.length}reduce(r){let o=r&65535,u=r>>19;u==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(u-1)*3;let g=this.start.p.parser.getGoto(this.stack[this.base-3],o,!0);this.state=g}}class StackBufferCursor{constructor(r,o,u){this.stack=r,this.pos=o,this.index=u,this.buffer=r.buffer,this.index==0&&this.maybeNext()}static create(r,o=r.bufferBase+r.buffer.length){return new StackBufferCursor(r,o,o-r.bufferBase)}maybeNext(){let r=this.stack.parent;r!=null&&(this.index=this.stack.bufferBase-r.bufferBase,this.stack=r,this.buffer=r.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new StackBufferCursor(this.stack,this.pos,this.index)}}function decodeArray(h,r=Uint16Array){if(typeof h!="string")return h;let o=null;for(let u=0,g=0;u<h.length;){let k=0;for(;;){let A=h.charCodeAt(u++),R=!1;if(A==126){k=65535;break}A>=92&&A--,A>=34&&A--;let q=A-32;if(q>=46&&(q-=46,R=!0),k+=q,R)break;k*=46}o?o[g++]=k:o=new r(k)}return o}class CachedToken{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const nullToken=new CachedToken;class InputStream{constructor(r,o){this.input=r,this.ranges=o,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=nullToken,this.rangeIndex=0,this.pos=this.chunkPos=o[0].from,this.range=o[0],this.end=o[o.length-1].to,this.readNext()}resolveOffset(r,o){let u=this.range,g=this.rangeIndex,k=this.pos+r;for(;k<u.from;){if(!g)return null;let A=this.ranges[--g];k-=u.from-A.to,u=A}for(;o<0?k>u.to:k>=u.to;){if(g==this.ranges.length-1)return null;let A=this.ranges[++g];k+=A.from-u.to,u=A}return k}clipPos(r){if(r>=this.range.from&&r<this.range.to)return r;for(let o of this.ranges)if(o.to>r)return Math.max(r,o.from);return this.end}peek(r){let o=this.chunkOff+r,u,g;if(o>=0&&o<this.chunk.length)u=this.pos+r,g=this.chunk.charCodeAt(o);else{let k=this.resolveOffset(r,1);if(k==null)return-1;if(u=k,u>=this.chunk2Pos&&u<this.chunk2Pos+this.chunk2.length)g=this.chunk2.charCodeAt(u-this.chunk2Pos);else{let A=this.rangeIndex,R=this.range;for(;R.to<=u;)R=this.ranges[++A];this.chunk2=this.input.chunk(this.chunk2Pos=u),u+this.chunk2.length>R.to&&(this.chunk2=this.chunk2.slice(0,R.to-u)),g=this.chunk2.charCodeAt(0)}}return u>=this.token.lookAhead&&(this.token.lookAhead=u+1),g}acceptToken(r,o=0){let u=o?this.resolveOffset(o,-1):this.pos;if(u==null||u<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=r,this.token.end=u}acceptTokenTo(r,o){this.token.value=r,this.token.end=o}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:r,chunkPos:o}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=r,this.chunk2Pos=o,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let r=this.input.chunk(this.pos),o=this.pos+r.length;this.chunk=o>this.range.to?r.slice(0,this.range.to-this.pos):r,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(r=1){for(this.chunkOff+=r;this.pos+r>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();r-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=r,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(r,o){if(o?(this.token=o,o.start=r,o.lookAhead=r+1,o.value=o.extended=-1):this.token=nullToken,this.pos!=r){if(this.pos=r,r==this.end)return this.setDone(),this;for(;r<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;r>=this.range.to;)this.range=this.ranges[++this.rangeIndex];r>=this.chunkPos&&r<this.chunkPos+this.chunk.length?this.chunkOff=r-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(r,o){if(r>=this.chunkPos&&o<=this.chunkPos+this.chunk.length)return this.chunk.slice(r-this.chunkPos,o-this.chunkPos);if(r>=this.chunk2Pos&&o<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(r-this.chunk2Pos,o-this.chunk2Pos);if(r>=this.range.from&&o<=this.range.to)return this.input.read(r,o);let u="";for(let g of this.ranges){if(g.from>=o)break;g.to>r&&(u+=this.input.read(Math.max(g.from,r),Math.min(g.to,o)))}return u}}class TokenGroup{constructor(r,o){this.data=r,this.id=o}token(r,o){let{parser:u}=o.p;readToken(this.data,r,o,this.id,u.data,u.tokenPrecTable)}}TokenGroup.prototype.contextual=TokenGroup.prototype.fallback=TokenGroup.prototype.extend=!1;class LocalTokenGroup{constructor(r,o,u){this.precTable=o,this.elseToken=u,this.data=typeof r=="string"?decodeArray(r):r}token(r,o){let u=r.pos,g=0;for(;;){let k=r.next<0,A=r.resolveOffset(1,1);if(readToken(this.data,r,o,0,this.data,this.precTable),r.token.value>-1)break;if(this.elseToken==null)return;if(k||g++,A==null)break;r.reset(A,r.token)}g&&(r.reset(u,r.token),r.acceptToken(this.elseToken,g))}}LocalTokenGroup.prototype.contextual=TokenGroup.prototype.fallback=TokenGroup.prototype.extend=!1;class ExternalTokenizer{constructor(r,o={}){this.token=r,this.contextual=!!o.contextual,this.fallback=!!o.fallback,this.extend=!!o.extend}}function readToken(h,r,o,u,g,k){let A=0,R=1<<u,{dialect:q}=o.p.parser;e:for(;(R&h[A])!=0;){let _=h[A+1];for(let re=A+3;re<_;re+=2)if((h[re+1]&R)>0){let oe=h[re];if(q.allows(oe)&&(r.token.value==-1||r.token.value==oe||overrides(oe,r.token.value,g,k))){r.acceptToken(oe);break}}let ee=r.next,te=0,ne=h[A+2];if(r.next<0&&ne>te&&h[_+ne*3-3]==65535){A=h[_+ne*3-1];continue e}for(;te<ne;){let re=te+ne>>1,oe=_+re+(re<<1),le=h[oe],pe=h[oe+1]||65536;if(ee<le)ne=re;else if(ee>=pe)te=re+1;else{A=h[oe+2],r.advance();continue e}}break}}function findOffset(h,r,o){for(let u=r,g;(g=h[u])!=65535;u++)if(g==o)return u-r;return-1}function overrides(h,r,o,u){let g=findOffset(o,u,r);return g<0||findOffset(o,u,h)<g}const verbose=typeof process<"u"&&define_process_env_default&&/\bparse\b/.test(define_process_env_default.LOG);let stackIDs=null;function cutAt(h,r,o){let u=h.cursor(IterMode.IncludeAnonymous);for(u.moveTo(r);;)if(!(o<0?u.childBefore(r):u.childAfter(r)))for(;;){if((o<0?u.to<r:u.from>r)&&!u.type.isError)return o<0?Math.max(0,Math.min(u.to-1,r-25)):Math.min(h.length,Math.max(u.from+1,r+25));if(o<0?u.prevSibling():u.nextSibling())break;if(!u.parent())return o<0?0:h.length}}class FragmentCursor{constructor(r,o){this.fragments=r,this.nodeSet=o,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let r=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(r){for(this.safeFrom=r.openStart?cutAt(r.tree,r.from+r.offset,1)-r.offset:r.from,this.safeTo=r.openEnd?cutAt(r.tree,r.to+r.offset,-1)-r.offset:r.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(r.tree),this.start.push(-r.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(r){if(r<this.nextStart)return null;for(;this.fragment&&this.safeTo<=r;)this.nextFragment();if(!this.fragment)return null;for(;;){let o=this.trees.length-1;if(o<0)return this.nextFragment(),null;let u=this.trees[o],g=this.index[o];if(g==u.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let k=u.children[g],A=this.start[o]+u.positions[g];if(A>r)return this.nextStart=A,null;if(k instanceof Tree){if(A==r){if(A<this.safeFrom)return null;let R=A+k.length;if(R<=this.safeTo){let q=k.prop(NodeProp.lookAhead);if(!q||R+q<this.fragment.to)return k}}this.index[o]++,A+k.length>=Math.max(this.safeFrom,r)&&(this.trees.push(k),this.start.push(A),this.index.push(0))}else this.index[o]++,this.nextStart=A+k.length}}}class TokenCache{constructor(r,o){this.stream=o,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=r.tokenizers.map(u=>new CachedToken)}getActions(r){let o=0,u=null,{parser:g}=r.p,{tokenizers:k}=g,A=g.stateSlot(r.state,3),R=r.curContext?r.curContext.hash:0,q=0;for(let _=0;_<k.length;_++){if((1<<_&A)==0)continue;let ee=k[_],te=this.tokens[_];if(!(u&&!ee.fallback)&&((ee.contextual||te.start!=r.pos||te.mask!=A||te.context!=R)&&(this.updateCachedToken(te,ee,r),te.mask=A,te.context=R),te.lookAhead>te.end+25&&(q=Math.max(te.lookAhead,q)),te.value!=0)){let ne=o;if(te.extended>-1&&(o=this.addActions(r,te.extended,te.end,o)),o=this.addActions(r,te.value,te.end,o),!ee.extend&&(u=te,o>ne))break}}for(;this.actions.length>o;)this.actions.pop();return q&&r.setLookAhead(q),!u&&r.pos==this.stream.end&&(u=new CachedToken,u.value=r.p.parser.eofTerm,u.start=u.end=r.pos,o=this.addActions(r,u.value,u.end,o)),this.mainToken=u,this.actions}getMainToken(r){if(this.mainToken)return this.mainToken;let o=new CachedToken,{pos:u,p:g}=r;return o.start=u,o.end=Math.min(u+1,g.stream.end),o.value=u==g.stream.end?g.parser.eofTerm:0,o}updateCachedToken(r,o,u){let g=this.stream.clipPos(u.pos);if(o.token(this.stream.reset(g,r),u),r.value>-1){let{parser:k}=u.p;for(let A=0;A<k.specialized.length;A++)if(k.specialized[A]==r.value){let R=k.specializers[A](this.stream.read(r.start,r.end),u);if(R>=0&&u.p.parser.dialect.allows(R>>1)){(R&1)==0?r.value=R>>1:r.extended=R>>1;break}}}else r.value=0,r.end=this.stream.clipPos(g+1)}putAction(r,o,u,g){for(let k=0;k<g;k+=3)if(this.actions[k]==r)return g;return this.actions[g++]=r,this.actions[g++]=o,this.actions[g++]=u,g}addActions(r,o,u,g){let{state:k}=r,{parser:A}=r.p,{data:R}=A;for(let q=0;q<2;q++)for(let _=A.stateSlot(k,q?2:1);;_+=3){if(R[_]==65535)if(R[_+1]==1)_=pair(R,_+2);else{g==0&&R[_+1]==2&&(g=this.putAction(pair(R,_+2),o,u,g));break}R[_]==o&&(g=this.putAction(pair(R,_+1),o,u,g))}return g}}class Parse{constructor(r,o,u,g){this.parser=r,this.input=o,this.ranges=g,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new InputStream(o,g),this.tokens=new TokenCache(r,this.stream),this.topTerm=r.top[1];let{from:k}=g[0];this.stacks=[Stack.start(this,r.top[0],k)],this.fragments=u.length&&this.stream.end-k>r.bufferLength*4?new FragmentCursor(u,r.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let r=this.stacks,o=this.minStackPos,u=this.stacks=[],g,k;if(this.bigReductionCount>300&&r.length==1){let[A]=r;for(;A.forceReduce()&&A.stack.length&&A.stack[A.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let A=0;A<r.length;A++){let R=r[A];for(;;){if(this.tokens.mainToken=null,R.pos>o)u.push(R);else{if(this.advanceStack(R,u,r))continue;{g||(g=[],k=[]),g.push(R);let q=this.tokens.getMainToken(R);k.push(q.value,q.end)}}break}}if(!u.length){let A=g&&findFinished(g);if(A)return verbose&&console.log("Finish with "+this.stackID(A)),this.stackToTree(A);if(this.parser.strict)throw verbose&&g&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+o);this.recovering||(this.recovering=5)}if(this.recovering&&g){let A=this.stoppedAt!=null&&g[0].pos>this.stoppedAt?g[0]:this.runRecovery(g,k,u);if(A)return verbose&&console.log("Force-finish "+this.stackID(A)),this.stackToTree(A.forceAll())}if(this.recovering){let A=this.recovering==1?1:this.recovering*3;if(u.length>A)for(u.sort((R,q)=>q.score-R.score);u.length>A;)u.pop();u.some(R=>R.reducePos>o)&&this.recovering--}else if(u.length>1){e:for(let A=0;A<u.length-1;A++){let R=u[A];for(let q=A+1;q<u.length;q++){let _=u[q];if(R.sameState(_)||R.buffer.length>500&&_.buffer.length>500)if((R.score-_.score||R.buffer.length-_.buffer.length)>0)u.splice(q--,1);else{u.splice(A--,1);continue e}}}u.length>12&&u.splice(12,u.length-12)}this.minStackPos=u[0].pos;for(let A=1;A<u.length;A++)u[A].pos<this.minStackPos&&(this.minStackPos=u[A].pos);return null}stopAt(r){if(this.stoppedAt!=null&&this.stoppedAt<r)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=r}advanceStack(r,o,u){let g=r.pos,{parser:k}=this,A=verbose?this.stackID(r)+" -> ":"";if(this.stoppedAt!=null&&g>this.stoppedAt)return r.forceReduce()?r:null;if(this.fragments){let _=r.curContext&&r.curContext.tracker.strict,ee=_?r.curContext.hash:0;for(let te=this.fragments.nodeAt(g);te;){let ne=this.parser.nodeSet.types[te.type.id]==te.type?k.getGoto(r.state,te.type.id):-1;if(ne>-1&&te.length&&(!_||(te.prop(NodeProp.contextHash)||0)==ee))return r.useNode(te,ne),verbose&&console.log(A+this.stackID(r)+` (via reuse of ${k.getName(te.type.id)})`),!0;if(!(te instanceof Tree)||te.children.length==0||te.positions[0]>0)break;let re=te.children[0];if(re instanceof Tree&&te.positions[0]==0)te=re;else break}}let R=k.stateSlot(r.state,4);if(R>0)return r.reduce(R),verbose&&console.log(A+this.stackID(r)+` (via always-reduce ${k.getName(R&65535)})`),!0;if(r.stack.length>=8400)for(;r.stack.length>6e3&&r.forceReduce(););let q=this.tokens.getActions(r);for(let _=0;_<q.length;){let ee=q[_++],te=q[_++],ne=q[_++],re=_==q.length||!u,oe=re?r:r.split(),le=this.tokens.mainToken;if(oe.apply(ee,te,le?le.start:oe.pos,ne),verbose&&console.log(A+this.stackID(oe)+` (via ${(ee&65536)==0?"shift":`reduce of ${k.getName(ee&65535)}`} for ${k.getName(te)} @ ${g}${oe==r?"":", split"})`),re)return!0;oe.pos>g?o.push(oe):u.push(oe)}return!1}advanceFully(r,o){let u=r.pos;for(;;){if(!this.advanceStack(r,null,null))return!1;if(r.pos>u)return pushStackDedup(r,o),!0}}runRecovery(r,o,u){let g=null,k=!1;for(let A=0;A<r.length;A++){let R=r[A],q=o[A<<1],_=o[(A<<1)+1],ee=verbose?this.stackID(R)+" -> ":"";if(R.deadEnd&&(k||(k=!0,R.restart(),verbose&&console.log(ee+this.stackID(R)+" (restarted)"),this.advanceFully(R,u))))continue;let te=R.split(),ne=ee;for(let re=0;te.forceReduce()&&re<10&&(verbose&&console.log(ne+this.stackID(te)+" (via force-reduce)"),!this.advanceFully(te,u));re++)verbose&&(ne=this.stackID(te)+" -> ");for(let re of R.recoverByInsert(q))verbose&&console.log(ee+this.stackID(re)+" (via recover-insert)"),this.advanceFully(re,u);this.stream.end>R.pos?(_==R.pos&&(_++,q=0),R.recoverByDelete(q,_),verbose&&console.log(ee+this.stackID(R)+` (via recover-delete ${this.parser.getName(q)})`),pushStackDedup(R,u)):(!g||g.score<R.score)&&(g=R)}return g}stackToTree(r){return r.close(),Tree.build({buffer:StackBufferCursor.create(r),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:r.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(r){let o=(stackIDs||(stackIDs=new WeakMap)).get(r);return o||stackIDs.set(r,o=String.fromCodePoint(this.nextStackID++)),o+r}}function pushStackDedup(h,r){for(let o=0;o<r.length;o++){let u=r[o];if(u.pos==h.pos&&u.sameState(h)){r[o].score<h.score&&(r[o]=h);return}}r.push(h)}class Dialect{constructor(r,o,u){this.source=r,this.flags=o,this.disabled=u}allows(r){return!this.disabled||this.disabled[r]==0}}const id=h=>h;class ContextTracker{constructor(r){this.start=r.start,this.shift=r.shift||id,this.reduce=r.reduce||id,this.reuse=r.reuse||id,this.hash=r.hash||(()=>0),this.strict=r.strict!==!1}}class LRParser extends Parser{constructor(r){if(super(),this.wrappers=[],r.version!=14)throw new RangeError(`Parser version (${r.version}) doesn't match runtime version (14)`);let o=r.nodeNames.split(" ");this.minRepeatTerm=o.length;for(let R=0;R<r.repeatNodeCount;R++)o.push("");let u=Object.keys(r.topRules).map(R=>r.topRules[R][1]),g=[];for(let R=0;R<o.length;R++)g.push([]);function k(R,q,_){g[R].push([q,q.deserialize(String(_))])}if(r.nodeProps)for(let R of r.nodeProps){let q=R[0];typeof q=="string"&&(q=NodeProp[q]);for(let _=1;_<R.length;){let ee=R[_++];if(ee>=0)k(ee,q,R[_++]);else{let te=R[_+-ee];for(let ne=-ee;ne>0;ne--)k(R[_++],q,te);_++}}}this.nodeSet=new NodeSet(o.map((R,q)=>NodeType.define({name:q>=this.minRepeatTerm?void 0:R,id:q,props:g[q],top:u.indexOf(q)>-1,error:q==0,skipped:r.skippedNodes&&r.skippedNodes.indexOf(q)>-1}))),r.propSources&&(this.nodeSet=this.nodeSet.extend(...r.propSources)),this.strict=!1,this.bufferLength=DefaultBufferLength;let A=decodeArray(r.tokenData);this.context=r.context,this.specializerSpecs=r.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let R=0;R<this.specializerSpecs.length;R++)this.specialized[R]=this.specializerSpecs[R].term;this.specializers=this.specializerSpecs.map(getSpecializer),this.states=decodeArray(r.states,Uint32Array),this.data=decodeArray(r.stateData),this.goto=decodeArray(r.goto),this.maxTerm=r.maxTerm,this.tokenizers=r.tokenizers.map(R=>typeof R=="number"?new TokenGroup(A,R):R),this.topRules=r.topRules,this.dialects=r.dialects||{},this.dynamicPrecedences=r.dynamicPrecedences||null,this.tokenPrecTable=r.tokenPrec,this.termNames=r.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(r,o,u){let g=new Parse(this,r,o,u);for(let k of this.wrappers)g=k(g,r,o,u);return g}getGoto(r,o,u=!1){let g=this.goto;if(o>=g[0])return-1;for(let k=g[o+1];;){let A=g[k++],R=A&1,q=g[k++];if(R&&u)return q;for(let _=k+(A>>1);k<_;k++)if(g[k]==r)return q;if(R)return-1}}hasAction(r,o){let u=this.data;for(let g=0;g<2;g++)for(let k=this.stateSlot(r,g?2:1),A;;k+=3){if((A=u[k])==65535)if(u[k+1]==1)A=u[k=pair(u,k+2)];else{if(u[k+1]==2)return pair(u,k+2);break}if(A==o||A==0)return pair(u,k+1)}return 0}stateSlot(r,o){return this.states[r*6+o]}stateFlag(r,o){return(this.stateSlot(r,0)&o)>0}validAction(r,o){return!!this.allActions(r,u=>u==o?!0:null)}allActions(r,o){let u=this.stateSlot(r,4),g=u?o(u):void 0;for(let k=this.stateSlot(r,1);g==null;k+=3){if(this.data[k]==65535)if(this.data[k+1]==1)k=pair(this.data,k+2);else break;g=o(pair(this.data,k+1))}return g}nextStates(r){let o=[];for(let u=this.stateSlot(r,1);;u+=3){if(this.data[u]==65535)if(this.data[u+1]==1)u=pair(this.data,u+2);else break;if((this.data[u+2]&1)==0){let g=this.data[u+1];o.some((k,A)=>A&1&&k==g)||o.push(this.data[u],g)}}return o}configure(r){let o=Object.assign(Object.create(LRParser.prototype),this);if(r.props&&(o.nodeSet=this.nodeSet.extend(...r.props)),r.top){let u=this.topRules[r.top];if(!u)throw new RangeError(`Invalid top rule name ${r.top}`);o.top=u}return r.tokenizers&&(o.tokenizers=this.tokenizers.map(u=>{let g=r.tokenizers.find(k=>k.from==u);return g?g.to:u})),r.specializers&&(o.specializers=this.specializers.slice(),o.specializerSpecs=this.specializerSpecs.map((u,g)=>{let k=r.specializers.find(R=>R.from==u.external);if(!k)return u;let A=Object.assign(Object.assign({},u),{external:k.to});return o.specializers[g]=getSpecializer(A),A})),r.contextTracker&&(o.context=r.contextTracker),r.dialect&&(o.dialect=this.parseDialect(r.dialect)),r.strict!=null&&(o.strict=r.strict),r.wrap&&(o.wrappers=o.wrappers.concat(r.wrap)),r.bufferLength!=null&&(o.bufferLength=r.bufferLength),o}hasWrappers(){return this.wrappers.length>0}getName(r){return this.termNames?this.termNames[r]:String(r<=this.maxNode&&this.nodeSet.types[r].name||r)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(r){let o=this.dynamicPrecedences;return o==null?0:o[r]||0}parseDialect(r){let o=Object.keys(this.dialects),u=o.map(()=>!1);if(r)for(let k of r.split(" ")){let A=o.indexOf(k);A>=0&&(u[A]=!0)}let g=null;for(let k=0;k<o.length;k++)if(!u[k])for(let A=this.dialects[o[k]],R;(R=this.data[A++])!=65535;)(g||(g=new Uint8Array(this.maxTerm+1)))[R]=1;return new Dialect(r,u,g)}static deserialize(r){return new LRParser(r)}}function pair(h,r){return h[r]|h[r+1]<<16}function findFinished(h){let r=null;for(let o of h){let u=o.p.stoppedAt;(o.pos==o.p.stream.end||u!=null&&o.pos>u)&&o.p.parser.stateFlag(o.state,2)&&(!r||r.score<o.score)&&(r=o)}return r}function getSpecializer(h){if(h.external){let r=h.extend?1:0;return(o,u)=>h.external(o,u)<<1|r}return h.get}const scriptText=55,StartCloseScriptTag=1,styleText=56,StartCloseStyleTag=2,textareaText=57,StartCloseTextareaTag=3,EndTag=4,SelfClosingEndTag=5,StartTag=6,StartScriptTag=7,StartStyleTag=8,StartTextareaTag=9,StartSelfClosingTag=10,StartCloseTag=11,NoMatchStartCloseTag=12,MismatchedStartCloseTag=13,missingCloseTag=58,IncompleteTag=14,IncompleteCloseTag=15,commentContent$1=59,Element$1=21,TagName=23,Attribute=24,AttributeName=25,AttributeValue=27,UnquotedAttributeValue=28,ScriptText=29,StyleText=32,TextareaText=35,OpenTag=37,CloseTag=38,Dialect_noMatch=0,Dialect_selfClosing=1,selfClosers$1={area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed={dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},closeOnOpen={dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}};function nameChar(h){return h==45||h==46||h==58||h>=65&&h<=90||h==95||h>=97&&h<=122||h>=161}let cachedName=null,cachedInput=null,cachedPos=0;function tagNameAfter(h,r){let o=h.pos+r;if(cachedPos==o&&cachedInput==h)return cachedName;let u=h.peek(r),g="";for(;nameChar(u);)g+=String.fromCharCode(u),u=h.peek(++r);return cachedInput=h,cachedPos=o,cachedName=g?g.toLowerCase():u==question$1||u==bang?void 0:null}const lessThan=60,greaterThan=62,slash$1=47,question$1=63,bang=33,dash$1=45;function ElementContext(h,r){this.name=h,this.parent=r}const startTagTerms=[StartTag,StartSelfClosingTag,StartScriptTag,StartStyleTag,StartTextareaTag],elementContext=new ContextTracker({start:null,shift(h,r,o,u){return startTagTerms.indexOf(r)>-1?new ElementContext(tagNameAfter(u,1)||"",h):h},reduce(h,r){return r==Element$1&&h?h.parent:h},reuse(h,r,o,u){let g=r.type.id;return g==StartTag||g==OpenTag?new ElementContext(tagNameAfter(u,1)||"",h):h},strict:!1}),tagStart=new ExternalTokenizer((h,r)=>{if(h.next!=lessThan){h.next<0&&r.context&&h.acceptToken(missingCloseTag);return}h.advance();let o=h.next==slash$1;o&&h.advance();let u=tagNameAfter(h,0);if(u===void 0)return;if(!u)return h.acceptToken(o?IncompleteCloseTag:IncompleteTag);let g=r.context?r.context.name:null;if(o){if(u==g)return h.acceptToken(StartCloseTag);if(g&&implicitlyClosed[g])return h.acceptToken(missingCloseTag,-2);if(r.dialectEnabled(Dialect_noMatch))return h.acceptToken(NoMatchStartCloseTag);for(let k=r.context;k;k=k.parent)if(k.name==u)return;h.acceptToken(MismatchedStartCloseTag)}else{if(u=="script")return h.acceptToken(StartScriptTag);if(u=="style")return h.acceptToken(StartStyleTag);if(u=="textarea")return h.acceptToken(StartTextareaTag);if(selfClosers$1.hasOwnProperty(u))return h.acceptToken(StartSelfClosingTag);g&&closeOnOpen[g]&&closeOnOpen[g][u]?h.acceptToken(missingCloseTag,-1):h.acceptToken(StartTag)}},{contextual:!0}),commentContent=new ExternalTokenizer(h=>{for(let r=0,o=0;;o++){if(h.next<0){o&&h.acceptToken(commentContent$1);break}if(h.next==dash$1)r++;else if(h.next==greaterThan&&r>=2){o>=3&&h.acceptToken(commentContent$1,-2);break}else r=0;h.advance()}});function inForeignElement(h){for(;h;h=h.parent)if(h.name=="svg"||h.name=="math")return!0;return!1}const endTag=new ExternalTokenizer((h,r)=>{if(h.next==slash$1&&h.peek(1)==greaterThan){let o=r.dialectEnabled(Dialect_selfClosing)||inForeignElement(r.context);h.acceptToken(o?SelfClosingEndTag:EndTag,2)}else h.next==greaterThan&&h.acceptToken(EndTag,1)});function contentTokenizer(h,r,o){let u=2+h.length;return new ExternalTokenizer(g=>{for(let k=0,A=0,R=0;;R++){if(g.next<0){R&&g.acceptToken(r);break}if(k==0&&g.next==lessThan||k==1&&g.next==slash$1||k>=2&&k<u&&g.next==h.charCodeAt(k-2))k++,A++;else if(k==u&&g.next==greaterThan){R>A?g.acceptToken(r,-A):g.acceptToken(o,-(A-2));break}else if((g.next==10||g.next==13)&&R){g.acceptToken(r,1);break}else k=A=0;g.advance()}})}const scriptTokens=contentTokenizer("script",scriptText,StartCloseScriptTag),styleTokens=contentTokenizer("style",styleText,StartCloseStyleTag),textareaTokens=contentTokenizer("textarea",textareaText,StartCloseTextareaTag),htmlHighlighting=styleTags({"Text RawText IncompleteTag IncompleteCloseTag":tags$1.content,"StartTag StartCloseTag SelfClosingEndTag EndTag":tags$1.angleBracket,TagName:tags$1.tagName,"MismatchedCloseTag/TagName":[tags$1.tagName,tags$1.invalid],AttributeName:tags$1.attributeName,"AttributeValue UnquotedAttributeValue":tags$1.attributeValue,Is:tags$1.definitionOperator,"EntityReference CharacterReference":tags$1.character,Comment:tags$1.blockComment,ProcessingInst:tags$1.processingInstruction,DoctypeDecl:tags$1.documentMeta}),parser$2=LRParser.deserialize({version:14,states:",xOVO!rOOO!ZQ#tO'#CrO!`Q#tO'#C{O!eQ#tO'#DOO!jQ#tO'#DRO!oQ#tO'#DTO!tOaO'#CqO#PObO'#CqO#[OdO'#CqO$kO!rO'#CqOOO`'#Cq'#CqO$rO$fO'#DUO$zQ#tO'#DWO%PQ#tO'#DXOOO`'#Dl'#DlOOO`'#DZ'#DZQVO!rOOO%UQ&rO,59^O%aQ&rO,59gO%lQ&rO,59jO%wQ&rO,59mO&SQ&rO,59oOOOa'#D_'#D_O&_OaO'#CyO&jOaO,59]OOOb'#D`'#D`O&rObO'#C|O&}ObO,59]OOOd'#Da'#DaO'VOdO'#DPO'bOdO,59]OOO`'#Db'#DbO'jO!rO,59]O'qQ#tO'#DSOOO`,59],59]OOOp'#Dc'#DcO'vO$fO,59pOOO`,59p,59pO(OQ#|O,59rO(TQ#|O,59sOOO`-E7X-E7XO(YQ&rO'#CtOOQW'#D['#D[O(hQ&rO1G.xOOOa1G.x1G.xOOO`1G/Z1G/ZO(sQ&rO1G/ROOOb1G/R1G/RO)OQ&rO1G/UOOOd1G/U1G/UO)ZQ&rO1G/XOOO`1G/X1G/XO)fQ&rO1G/ZOOOa-E7]-E7]O)qQ#tO'#CzOOO`1G.w1G.wOOOb-E7^-E7^O)vQ#tO'#C}OOOd-E7_-E7_O){Q#tO'#DQOOO`-E7`-E7`O*QQ#|O,59nOOOp-E7a-E7aOOO`1G/[1G/[OOO`1G/^1G/^OOO`1G/_1G/_O*VQ,UO,59`OOQW-E7Y-E7YOOOa7+$d7+$dOOO`7+$u7+$uOOOb7+$m7+$mOOOd7+$p7+$pOOO`7+$s7+$sO*bQ#|O,59fO*gQ#|O,59iO*lQ#|O,59lOOO`1G/Y1G/YO*qO7[O'#CwO+SOMhO'#CwOOQW1G.z1G.zOOO`1G/Q1G/QOOO`1G/T1G/TOOO`1G/W1G/WOOOO'#D]'#D]O+eO7[O,59cOOQW,59c,59cOOOO'#D^'#D^O+vOMhO,59cOOOO-E7Z-E7ZOOQW1G.}1G.}OOOO-E7[-E7[",stateData:",c~O!_OS~OUSOVPOWQOXROYTO[]O][O^^O_^Oa^Ob^Oc^Od^Oy^O|_O!eZO~OgaO~OgbO~OgcO~OgdO~OgeO~O!XfOPmP![mP~O!YiOQpP![pP~O!ZlORsP![sP~OUSOVPOWQOXROYTOZqO[]O][O^^O_^Oa^Ob^Oc^Od^Oy^O!eZO~O![rO~P#gO!]sO!fuO~OgvO~OgwO~OS|OT}OiyO~OS!POT}OiyO~OS!ROT}OiyO~OS!TOT}OiyO~OS}OT}OiyO~O!XfOPmX![mX~OP!WO![!XO~O!YiOQpX![pX~OQ!ZO![!XO~O!ZlORsX![sX~OR!]O![!XO~O![!XO~P#gOg!_O~O!]sO!f!aO~OS!bO~OS!cO~Oj!dOShXThXihX~OS!fOT!gOiyO~OS!hOT!gOiyO~OS!iOT!gOiyO~OS!jOT!gOiyO~OS!gOT!gOiyO~Og!kO~Og!lO~Og!mO~OS!nO~Ol!qO!a!oO!c!pO~OS!rO~OS!sO~OS!tO~Ob!uOc!uOd!uO!a!wO!b!uO~Ob!xOc!xOd!xO!c!wO!d!xO~Ob!uOc!uOd!uO!a!{O!b!uO~Ob!xOc!xOd!xO!c!{O!d!xO~OT~cbd!ey|!e~",goto:"%q!aPPPPPPPPPPPPPPPPPPPPP!b!hP!nPP!zP!}#Q#T#Z#^#a#g#j#m#s#y!bP!b!bP$P$V$m$s$y%P%V%]%cPPPPPPPP%iX^OX`pXUOX`pezabcde{!O!Q!S!UR!q!dRhUR!XhXVOX`pRkVR!XkXWOX`pRnWR!XnXXOX`pQrXR!XpXYOX`pQ`ORx`Q{aQ!ObQ!QcQ!SdQ!UeZ!e{!O!Q!S!UQ!v!oR!z!vQ!y!pR!|!yQgUR!VgQjVR!YjQmWR![mQpXR!^pQtZR!`tS_O`ToXp",nodeNames:" StartCloseTag StartCloseTag StartCloseTag EndTag SelfClosingEndTag StartTag StartTag StartTag StartTag StartTag StartCloseTag StartCloseTag StartCloseTag IncompleteTag IncompleteCloseTag Document Text EntityReference CharacterReference InvalidEntity Element OpenTag TagName Attribute AttributeName Is AttributeValue UnquotedAttributeValue ScriptText CloseTag OpenTag StyleText CloseTag OpenTag TextareaText CloseTag OpenTag CloseTag SelfClosingTag Comment ProcessingInst MismatchedCloseTag CloseTag DoctypeDecl",maxTerm:68,context:elementContext,nodeProps:[["closedBy",-10,1,2,3,7,8,9,10,11,12,13,"EndTag",6,"EndTag SelfClosingEndTag",-4,22,31,34,37,"CloseTag"],["openedBy",4,"StartTag StartCloseTag",5,"StartTag",-4,30,33,36,38,"OpenTag"],["group",-10,14,15,18,19,20,21,40,41,42,43,"Entity",17,"Entity TextContent",-3,29,32,35,"TextContent Entity"],["isolate",-11,22,30,31,33,34,36,37,38,39,42,43,"ltr",-3,27,28,40,""]],propSources:[htmlHighlighting],skippedNodes:[0],repeatNodeCount:9,tokenData:"!<p!aR!YOX$qXY,QYZ,QZ[$q[]&X]^,Q^p$qpq,Qqr-_rs3_sv-_vw3}wxHYx}-_}!OH{!O!P-_!P!Q$q!Q![-_![!]Mz!]!^-_!^!_!$S!_!`!;x!`!a&X!a!c-_!c!}Mz!}#R-_#R#SMz#S#T1k#T#oMz#o#s-_#s$f$q$f%W-_%W%oMz%o%p-_%p&aMz&a&b-_&b1pMz1p4U-_4U4dMz4d4e-_4e$ISMz$IS$I`-_$I`$IbMz$Ib$Kh-_$Kh%#tMz%#t&/x-_&/x&EtMz&Et&FV-_&FV;'SMz;'S;:j!#|;:j;=`3X<%l?&r-_?&r?AhMz?Ah?BY$q?BY?MnMz?MnO$q!Z$|caPlW!b`!dpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr$qrs&}sv$qvw+Pwx(tx!^$q!^!_*V!_!a&X!a#S$q#S#T&X#T;'S$q;'S;=`+z<%lO$q!R&bXaP!b`!dpOr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&Xq'UVaP!dpOv&}wx'kx!^&}!^!_(V!_;'S&};'S;=`(n<%lO&}P'pTaPOv'kw!^'k!_;'S'k;'S;=`(P<%lO'kP(SP;=`<%l'kp([S!dpOv(Vx;'S(V;'S;=`(h<%lO(Vp(kP;=`<%l(Vq(qP;=`<%l&}a({WaP!b`Or(trs'ksv(tw!^(t!^!_)e!_;'S(t;'S;=`*P<%lO(t`)jT!b`Or)esv)ew;'S)e;'S;=`)y<%lO)e`)|P;=`<%l)ea*SP;=`<%l(t!Q*^V!b`!dpOr*Vrs(Vsv*Vwx)ex;'S*V;'S;=`*s<%lO*V!Q*vP;=`<%l*V!R*|P;=`<%l&XW+UYlWOX+PZ[+P^p+Pqr+Psw+Px!^+P!a#S+P#T;'S+P;'S;=`+t<%lO+PW+wP;=`<%l+P!Z+}P;=`<%l$q!a,]`aP!b`!dp!_^OX&XXY,QYZ,QZ]&X]^,Q^p&Xpq,Qqr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&X!_-ljiSaPlW!b`!dpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr-_rs&}sv-_vw/^wx(tx!P-_!P!Q$q!Q!^-_!^!_*V!_!a&X!a#S-_#S#T1k#T#s-_#s$f$q$f;'S-_;'S;=`3X<%l?Ah-_?Ah?BY$q?BY?Mn-_?MnO$q[/ebiSlWOX+PZ[+P^p+Pqr/^sw/^x!P/^!P!Q+P!Q!^/^!a#S/^#S#T0m#T#s/^#s$f+P$f;'S/^;'S;=`1e<%l?Ah/^?Ah?BY+P?BY?Mn/^?MnO+PS0rXiSqr0msw0mx!P0m!Q!^0m!a#s0m$f;'S0m;'S;=`1_<%l?Ah0m?BY?Mn0mS1bP;=`<%l0m[1hP;=`<%l/^!V1vciSaP!b`!dpOq&Xqr1krs&}sv1kvw0mwx(tx!P1k!P!Q&X!Q!^1k!^!_*V!_!a&X!a#s1k#s$f&X$f;'S1k;'S;=`3R<%l?Ah1k?Ah?BY&X?BY?Mn1k?MnO&X!V3UP;=`<%l1k!_3[P;=`<%l-_!Z3hV!ahaP!dpOv&}wx'kx!^&}!^!_(V!_;'S&};'S;=`(n<%lO&}!_4WiiSlWd!ROX5uXZ7SZ[5u[^7S^p5uqr8trs7Sst>]tw8twx7Sx!P8t!P!Q5u!Q!]8t!]!^/^!^!a7S!a#S8t#S#T;{#T#s8t#s$f5u$f;'S8t;'S;=`>V<%l?Ah8t?Ah?BY5u?BY?Mn8t?MnO5u!Z5zblWOX5uXZ7SZ[5u[^7S^p5uqr5urs7Sst+Ptw5uwx7Sx!]5u!]!^7w!^!a7S!a#S5u#S#T7S#T;'S5u;'S;=`8n<%lO5u!R7VVOp7Sqs7St!]7S!]!^7l!^;'S7S;'S;=`7q<%lO7S!R7qOb!R!R7tP;=`<%l7S!Z8OYlWb!ROX+PZ[+P^p+Pqr+Psw+Px!^+P!a#S+P#T;'S+P;'S;=`+t<%lO+P!Z8qP;=`<%l5u!_8{iiSlWOX5uXZ7SZ[5u[^7S^p5uqr8trs7Sst/^tw8twx7Sx!P8t!P!Q5u!Q!]8t!]!^:j!^!a7S!a#S8t#S#T;{#T#s8t#s$f5u$f;'S8t;'S;=`>V<%l?Ah8t?Ah?BY5u?BY?Mn8t?MnO5u!_:sbiSlWb!ROX+PZ[+P^p+Pqr/^sw/^x!P/^!P!Q+P!Q!^/^!a#S/^#S#T0m#T#s/^#s$f+P$f;'S/^;'S;=`1e<%l?Ah/^?Ah?BY+P?BY?Mn/^?MnO+P!V<QciSOp7Sqr;{rs7Sst0mtw;{wx7Sx!P;{!P!Q7S!Q!];{!]!^=]!^!a7S!a#s;{#s$f7S$f;'S;{;'S;=`>P<%l?Ah;{?Ah?BY7S?BY?Mn;{?MnO7S!V=dXiSb!Rqr0msw0mx!P0m!Q!^0m!a#s0m$f;'S0m;'S;=`1_<%l?Ah0m?BY?Mn0m!V>SP;=`<%l;{!_>YP;=`<%l8t!_>dhiSlWOX@OXZAYZ[@O[^AY^p@OqrBwrsAYswBwwxAYx!PBw!P!Q@O!Q!]Bw!]!^/^!^!aAY!a#SBw#S#TE{#T#sBw#s$f@O$f;'SBw;'S;=`HS<%l?AhBw?Ah?BY@O?BY?MnBw?MnO@O!Z@TalWOX@OXZAYZ[@O[^AY^p@Oqr@OrsAYsw@OwxAYx!]@O!]!^Az!^!aAY!a#S@O#S#TAY#T;'S@O;'S;=`Bq<%lO@O!RA]UOpAYq!]AY!]!^Ao!^;'SAY;'S;=`At<%lOAY!RAtOc!R!RAwP;=`<%lAY!ZBRYlWc!ROX+PZ[+P^p+Pqr+Psw+Px!^+P!a#S+P#T;'S+P;'S;=`+t<%lO+P!ZBtP;=`<%l@O!_COhiSlWOX@OXZAYZ[@O[^AY^p@OqrBwrsAYswBwwxAYx!PBw!P!Q@O!Q!]Bw!]!^Dj!^!aAY!a#SBw#S#TE{#T#sBw#s$f@O$f;'SBw;'S;=`HS<%l?AhBw?Ah?BY@O?BY?MnBw?MnO@O!_DsbiSlWc!ROX+PZ[+P^p+Pqr/^sw/^x!P/^!P!Q+P!Q!^/^!a#S/^#S#T0m#T#s/^#s$f+P$f;'S/^;'S;=`1e<%l?Ah/^?Ah?BY+P?BY?Mn/^?MnO+P!VFQbiSOpAYqrE{rsAYswE{wxAYx!PE{!P!QAY!Q!]E{!]!^GY!^!aAY!a#sE{#s$fAY$f;'SE{;'S;=`G|<%l?AhE{?Ah?BYAY?BY?MnE{?MnOAY!VGaXiSc!Rqr0msw0mx!P0m!Q!^0m!a#s0m$f;'S0m;'S;=`1_<%l?Ah0m?BY?Mn0m!VHPP;=`<%lE{!_HVP;=`<%lBw!ZHcW!cxaP!b`Or(trs'ksv(tw!^(t!^!_)e!_;'S(t;'S;=`*P<%lO(t!aIYliSaPlW!b`!dpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr-_rs&}sv-_vw/^wx(tx}-_}!OKQ!O!P-_!P!Q$q!Q!^-_!^!_*V!_!a&X!a#S-_#S#T1k#T#s-_#s$f$q$f;'S-_;'S;=`3X<%l?Ah-_?Ah?BY$q?BY?Mn-_?MnO$q!aK_kiSaPlW!b`!dpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr-_rs&}sv-_vw/^wx(tx!P-_!P!Q$q!Q!^-_!^!_*V!_!`&X!`!aMS!a#S-_#S#T1k#T#s-_#s$f$q$f;'S-_;'S;=`3X<%l?Ah-_?Ah?BY$q?BY?Mn-_?MnO$q!TM_XaP!b`!dp!fQOr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&X!aNZ!ZiSgQaPlW!b`!dpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr-_rs&}sv-_vw/^wx(tx}-_}!OMz!O!PMz!P!Q$q!Q![Mz![!]Mz!]!^-_!^!_*V!_!a&X!a!c-_!c!}Mz!}#R-_#R#SMz#S#T1k#T#oMz#o#s-_#s$f$q$f$}-_$}%OMz%O%W-_%W%oMz%o%p-_%p&aMz&a&b-_&b1pMz1p4UMz4U4dMz4d4e-_4e$ISMz$IS$I`-_$I`$IbMz$Ib$Je-_$Je$JgMz$Jg$Kh-_$Kh%#tMz%#t&/x-_&/x&EtMz&Et&FV-_&FV;'SMz;'S;:j!#|;:j;=`3X<%l?&r-_?&r?AhMz?Ah?BY$q?BY?MnMz?MnO$q!a!$PP;=`<%lMz!R!$ZY!b`!dpOq*Vqr!$yrs(Vsv*Vwx)ex!a*V!a!b!4t!b;'S*V;'S;=`*s<%lO*V!R!%Q]!b`!dpOr*Vrs(Vsv*Vwx)ex}*V}!O!%y!O!f*V!f!g!']!g#W*V#W#X!0`#X;'S*V;'S;=`*s<%lO*V!R!&QX!b`!dpOr*Vrs(Vsv*Vwx)ex}*V}!O!&m!O;'S*V;'S;=`*s<%lO*V!R!&vV!b`!dp!ePOr*Vrs(Vsv*Vwx)ex;'S*V;'S;=`*s<%lO*V!R!'dX!b`!dpOr*Vrs(Vsv*Vwx)ex!q*V!q!r!(P!r;'S*V;'S;=`*s<%lO*V!R!(WX!b`!dpOr*Vrs(Vsv*Vwx)ex!e*V!e!f!(s!f;'S*V;'S;=`*s<%lO*V!R!(zX!b`!dpOr*Vrs(Vsv*Vwx)ex!v*V!v!w!)g!w;'S*V;'S;=`*s<%lO*V!R!)nX!b`!dpOr*Vrs(Vsv*Vwx)ex!{*V!{!|!*Z!|;'S*V;'S;=`*s<%lO*V!R!*bX!b`!dpOr*Vrs(Vsv*Vwx)ex!r*V!r!s!*}!s;'S*V;'S;=`*s<%lO*V!R!+UX!b`!dpOr*Vrs(Vsv*Vwx)ex!g*V!g!h!+q!h;'S*V;'S;=`*s<%lO*V!R!+xY!b`!dpOr!+qrs!,hsv!+qvw!-Swx!.[x!`!+q!`!a!/j!a;'S!+q;'S;=`!0Y<%lO!+qq!,mV!dpOv!,hvx!-Sx!`!,h!`!a!-q!a;'S!,h;'S;=`!.U<%lO!,hP!-VTO!`!-S!`!a!-f!a;'S!-S;'S;=`!-k<%lO!-SP!-kO|PP!-nP;=`<%l!-Sq!-xS!dp|POv(Vx;'S(V;'S;=`(h<%lO(Vq!.XP;=`<%l!,ha!.aX!b`Or!.[rs!-Ssv!.[vw!-Sw!`!.[!`!a!.|!a;'S!.[;'S;=`!/d<%lO!.[a!/TT!b`|POr)esv)ew;'S)e;'S;=`)y<%lO)ea!/gP;=`<%l!.[!R!/sV!b`!dp|POr*Vrs(Vsv*Vwx)ex;'S*V;'S;=`*s<%lO*V!R!0]P;=`<%l!+q!R!0gX!b`!dpOr*Vrs(Vsv*Vwx)ex#c*V#c#d!1S#d;'S*V;'S;=`*s<%lO*V!R!1ZX!b`!dpOr*Vrs(Vsv*Vwx)ex#V*V#V#W!1v#W;'S*V;'S;=`*s<%lO*V!R!1}X!b`!dpOr*Vrs(Vsv*Vwx)ex#h*V#h#i!2j#i;'S*V;'S;=`*s<%lO*V!R!2qX!b`!dpOr*Vrs(Vsv*Vwx)ex#m*V#m#n!3^#n;'S*V;'S;=`*s<%lO*V!R!3eX!b`!dpOr*Vrs(Vsv*Vwx)ex#d*V#d#e!4Q#e;'S*V;'S;=`*s<%lO*V!R!4XX!b`!dpOr*Vrs(Vsv*Vwx)ex#X*V#X#Y!+q#Y;'S*V;'S;=`*s<%lO*V!R!4{Y!b`!dpOr!4trs!5ksv!4tvw!6Vwx!8]x!a!4t!a!b!:]!b;'S!4t;'S;=`!;r<%lO!4tq!5pV!dpOv!5kvx!6Vx!a!5k!a!b!7W!b;'S!5k;'S;=`!8V<%lO!5kP!6YTO!a!6V!a!b!6i!b;'S!6V;'S;=`!7Q<%lO!6VP!6lTO!`!6V!`!a!6{!a;'S!6V;'S;=`!7Q<%lO!6VP!7QOyPP!7TP;=`<%l!6Vq!7]V!dpOv!5kvx!6Vx!`!5k!`!a!7r!a;'S!5k;'S;=`!8V<%lO!5kq!7yS!dpyPOv(Vx;'S(V;'S;=`(h<%lO(Vq!8YP;=`<%l!5ka!8bX!b`Or!8]rs!6Vsv!8]vw!6Vw!a!8]!a!b!8}!b;'S!8];'S;=`!:V<%lO!8]a!9SX!b`Or!8]rs!6Vsv!8]vw!6Vw!`!8]!`!a!9o!a;'S!8];'S;=`!:V<%lO!8]a!9vT!b`yPOr)esv)ew;'S)e;'S;=`)y<%lO)ea!:YP;=`<%l!8]!R!:dY!b`!dpOr!4trs!5ksv!4tvw!6Vwx!8]x!`!4t!`!a!;S!a;'S!4t;'S;=`!;r<%lO!4t!R!;]V!b`!dpyPOr*Vrs(Vsv*Vwx)ex;'S*V;'S;=`*s<%lO*V!R!;uP;=`<%l!4t!V!<TXjSaP!b`!dpOr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&X",tokenizers:[scriptTokens,styleTokens,textareaTokens,endTag,tagStart,commentContent,0,1,2,3,4,5],topRules:{Document:[0,16]},dialects:{noMatch:0,selfClosing:515},tokenPrec:517});function getAttrs(h,r){let o=Object.create(null);for(let u of h.getChildren(Attribute)){let g=u.getChild(AttributeName),k=u.getChild(AttributeValue)||u.getChild(UnquotedAttributeValue);g&&(o[r.read(g.from,g.to)]=k?k.type.id==AttributeValue?r.read(k.from+1,k.to-1):r.read(k.from,k.to):"")}return o}function findTagName(h,r){let o=h.getChild(TagName);return o?r.read(o.from,o.to):" "}function maybeNest(h,r,o){let u;for(let g of o)if(!g.attrs||g.attrs(u||(u=getAttrs(h.node.parent.firstChild,r))))return{parser:g.parser};return null}function configureNesting(h=[],r=[]){let o=[],u=[],g=[],k=[];for(let R of h)(R.tag=="script"?o:R.tag=="style"?u:R.tag=="textarea"?g:k).push(R);let A=r.length?Object.create(null):null;for(let R of r)(A[R.name]||(A[R.name]=[])).push(R);return parseMixed((R,q)=>{let _=R.type.id;if(_==ScriptText)return maybeNest(R,q,o);if(_==StyleText)return maybeNest(R,q,u);if(_==TextareaText)return maybeNest(R,q,g);if(_==Element$1&&k.length){let ee=R.node,te=ee.firstChild,ne=te&&findTagName(te,q),re;if(ne){for(let oe of k)if(oe.tag==ne&&(!oe.attrs||oe.attrs(re||(re=getAttrs(te,q))))){let le=ee.lastChild,pe=le.type.id==CloseTag?le.from:ee.to;if(pe>te.to)return{parser:oe.parser,overlay:[{from:te.to,to:pe}]}}}}if(A&&_==Attribute){let ee=R.node,te;if(te=ee.firstChild){let ne=A[q.read(te.from,te.to)];if(ne)for(let re of ne){if(re.tagName&&re.tagName!=findTagName(ee.parent,q))continue;let oe=ee.lastChild;if(oe.type.id==AttributeValue){let le=oe.from+1,pe=oe.lastChild,de=oe.to-(pe&&pe.isError?0:1);if(de>le)return{parser:re.parser,overlay:[{from:le,to:de}]}}else if(oe.type.id==UnquotedAttributeValue)return{parser:re.parser,overlay:[{from:oe.from,to:oe.to}]}}}}return null})}const descendantOp=122,Unit=1,identifier$2=123,callee=124,VariableName=2,queryIdentifier=125,queryVariableName=3,QueryCallee=4,space$1=[9,10,11,12,13,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288],colon=58,parenL=40,underscore=95,bracketL$1=91,dash=45,period=46,hash=35,percent=37,ampersand=38,backslash=92,newline$1=10,asterisk=42;function isAlpha(h){return h>=65&&h<=90||h>=97&&h<=122||h>=161}function isDigit(h){return h>=48&&h<=57}function isHex(h){return isDigit(h)||h>=97&&h<=102||h>=65&&h<=70}const identifierTokens=(h,r,o)=>(u,g)=>{for(let k=!1,A=0,R=0;;R++){let{next:q}=u;if(isAlpha(q)||q==dash||q==underscore||k&&isDigit(q))!k&&(q!=dash||R>0)&&(k=!0),A===R&&q==dash&&A++,u.advance();else if(q==backslash&&u.peek(1)!=newline$1){if(u.advance(),isHex(u.next)){do u.advance();while(isHex(u.next));u.next==32&&u.advance()}else u.next>-1&&u.advance();k=!0}else{k&&u.acceptToken(A==2&&g.canShift(VariableName)?r:q==parenL?o:h);break}}},identifiers=new ExternalTokenizer(identifierTokens(identifier$2,VariableName,callee)),queryIdentifiers=new ExternalTokenizer(identifierTokens(queryIdentifier,queryVariableName,QueryCallee)),descendant=new ExternalTokenizer(h=>{if(space$1.includes(h.peek(-1))){let{next:r}=h;(isAlpha(r)||r==underscore||r==hash||r==period||r==asterisk||r==bracketL$1||r==colon&&isAlpha(h.peek(1))||r==dash||r==ampersand)&&h.acceptToken(descendantOp)}}),unitToken=new ExternalTokenizer(h=>{if(!space$1.includes(h.peek(-1))){let{next:r}=h;if(r==percent&&(h.advance(),h.acceptToken(Unit)),isAlpha(r)){do h.advance();while(isAlpha(h.next)||isDigit(h.next));h.acceptToken(Unit)}}}),cssHighlighting=styleTags({"AtKeyword import charset namespace keyframes media supports":tags$1.definitionKeyword,"from to selector":tags$1.keyword,NamespaceName:tags$1.namespace,KeyframeName:tags$1.labelName,KeyframeRangeName:tags$1.operatorKeyword,TagName:tags$1.tagName,ClassName:tags$1.className,PseudoClassName:tags$1.constant(tags$1.className),IdName:tags$1.labelName,"FeatureName PropertyName":tags$1.propertyName,AttributeName:tags$1.attributeName,NumberLiteral:tags$1.number,KeywordQuery:tags$1.keyword,UnaryQueryOp:tags$1.operatorKeyword,"CallTag ValueName":tags$1.atom,VariableName:tags$1.variableName,Callee:tags$1.operatorKeyword,Unit:tags$1.unit,"UniversalSelector NestingSelector":tags$1.definitionOperator,"MatchOp CompareOp":tags$1.compareOperator,"ChildOp SiblingOp, LogicOp":tags$1.logicOperator,BinOp:tags$1.arithmeticOperator,Important:tags$1.modifier,Comment:tags$1.blockComment,ColorLiteral:tags$1.color,"ParenthesizedContent StringLiteral":tags$1.string,":":tags$1.punctuation,"PseudoOp #":tags$1.derefOperator,"; ,":tags$1.separator,"( )":tags$1.paren,"[ ]":tags$1.squareBracket,"{ }":tags$1.brace}),spec_callee={__proto__:null,lang:38,"nth-child":38,"nth-last-child":38,"nth-of-type":38,"nth-last-of-type":38,dir:38,"host-context":38,if:84,url:124,"url-prefix":124,domain:124,regexp:124},spec_queryIdentifier={__proto__:null,or:98,and:98,not:106,only:106,layer:170},spec_QueryCallee={__proto__:null,selector:112,layer:166},spec_AtKeyword={__proto__:null,"@import":162,"@media":174,"@charset":178,"@namespace":182,"@keyframes":188,"@supports":200,"@scope":204},spec_identifier$1={__proto__:null,to:207},parser$1=LRParser.deserialize({version:14,states:"EbQYQdOOO#qQdOOP#xO`OOOOQP'#Cf'#CfOOQP'#Ce'#CeO#}QdO'#ChO$nQaO'#CcO$xQdO'#CkO%TQdO'#DpO%YQdO'#DrO%_QdO'#DuO%_QdO'#DxOOQP'#FV'#FVO&eQhO'#EhOOQS'#FU'#FUOOQS'#Ek'#EkQYQdOOO&lQdO'#EOO&PQhO'#EUO&lQdO'#EWO'aQdO'#EYO'lQdO'#E]O'tQhO'#EcO(VQdO'#EeO(bQaO'#CfO)VQ`O'#D{O)[Q`O'#F`O)gQdO'#F`QOQ`OOP)qO&jO'#CaPOOO)C@t)C@tOOQP'#Cj'#CjOOQP,59S,59SO#}QdO,59SO)|QdO,59VO%TQdO,5:[O%YQdO,5:^O%_QdO,5:aO%_QdO,5:cO%_QdO,5:dO%_QdO'#ErO*XQ`O,58}O*aQdO'#DzOOQS,58},58}OOQP'#Cn'#CnOOQO'#Dn'#DnOOQP,59V,59VO*hQ`O,59VO*mQ`O,59VOOQP'#Dq'#DqOOQP,5:[,5:[OOQO'#Ds'#DsO*rQpO,5:^O+]QaO,5:aO+sQaO,5:dOOQW'#DZ'#DZO,ZQhO'#DdO,xQhO'#FaO'tQhO'#DbO-WQ`O'#DhOOQW'#F['#F[O-]Q`O,5;SO-eQ`O'#DeOOQS-E8i-E8iOOQ['#Cs'#CsO-jQdO'#CtO.QQdO'#CzO.hQdO'#C}O/OQ!pO'#DPO1RQ!jO,5:jOOQO'#DU'#DUO*mQ`O'#DTO1cQ!nO'#FXO3`Q`O'#DVO3eQ`O'#DkOOQ['#FX'#FXO-`Q`O,5:pO3jQ!bO,5:rOOQS'#E['#E[O3rQ`O,5:tO3wQdO,5:tOOQO'#E_'#E_O4PQ`O,5:wO4UQhO,5:}O%_QdO'#DgOOQS,5;P,5;PO-eQ`O,5;PO4^QdO,5;PO4fQdO,5:gO4vQdO'#EtO5TQ`O,5;zO5TQ`O,5;zPOOO'#Ej'#EjP5`O&jO,58{POOO,58{,58{OOQP1G.n1G.nOOQP1G.q1G.qO*hQ`O1G.qO*mQ`O1G.qOOQP1G/v1G/vO5kQpO1G/xO5sQaO1G/{O6ZQaO1G/}O6qQaO1G0OO7XQaO,5;^OOQO-E8p-E8pOOQS1G.i1G.iO7cQ`O,5:fO7hQdO'#DoO7oQdO'#CrOOQP1G/x1G/xO&lQdO1G/xO7vQ!jO'#DZO8UQ!bO,59vO8^QhO,5:OOOQO'#F]'#F]O8XQ!bO,59zO'tQhO,59xO8fQhO'#EvO8sQ`O,5;{O9OQhO,59|O9uQhO'#DiOOQW,5:S,5:SOOQS1G0n1G0nOOQW,5:P,5:PO9|Q!fO'#FYOOQS'#FY'#FYOOQS'#Em'#EmO;^QdO,59`OOQ[,59`,59`O;tQdO,59fOOQ[,59f,59fO<[QdO,59iOOQ[,59i,59iOOQ[,59k,59kO&lQdO,59mO<rQhO'#EQOOQW'#EQ'#EQO=WQ`O1G0UO1[QhO1G0UOOQ[,59o,59oO'tQhO'#DXOOQ[,59q,59qO=]Q#tO,5:VOOQS1G0[1G0[OOQS1G0^1G0^OOQS1G0`1G0`O=hQ`O1G0`O=mQdO'#E`OOQS1G0c1G0cOOQS1G0i1G0iO=xQaO,5:RO-`Q`O1G0kOOQS1G0k1G0kO-eQ`O1G0kO>PQ!fO1G0ROOQO1G0R1G0ROOQO,5;`,5;`O>gQdO,5;`OOQO-E8r-E8rO>tQ`O1G1fPOOO-E8h-E8hPOOO1G.g1G.gOOQP7+$]7+$]OOQP7+%d7+%dO&lQdO7+%dOOQS1G0Q1G0QO?PQaO'#F_O?ZQ`O,5:ZO?`Q!fO'#ElO@^QdO'#FWO@hQ`O,59^O@mQ!bO7+%dO&lQdO1G/bO@uQhO1G/fOOQW1G/j1G/jOOQW1G/d1G/dOAWQhO,5;bOOQO-E8t-E8tOAfQhO'#DZOAtQhO'#F^OBPQ`O'#F^OBUQ`O,5:TOOQS-E8k-E8kOOQ[1G.z1G.zOOQ[1G/Q1G/QOOQ[1G/T1G/TOOQ[1G/X1G/XOBZQdO,5:lOOQS7+%p7+%pOB`Q`O7+%pOBeQhO'#DYOBmQ`O,59sO'tQhO,59sOOQ[1G/q1G/qOBuQ`O1G/qOOQS7+%z7+%zOBzQbO'#DPOOQO'#Eb'#EbOCYQ`O'#EaOOQO'#Ea'#EaOCeQ`O'#EwOCmQdO,5:zOOQS,5:z,5:zOOQ[1G/m1G/mOOQS7+&V7+&VO-`Q`O7+&VOCxQ!fO'#EsO&lQdO'#EsOEPQdO7+%mOOQO7+%m7+%mOOQO1G0z1G0zOEdQ!bO<<IOOElQdO'#EqOEvQ`O,5;yOOQP1G/u1G/uOOQS-E8j-E8jOFOQdO'#EpOFYQ`O,5;rOOQ]1G.x1G.xOOQP<<IO<<IOOFbQdO7+$|OOQO'#D]'#D]OFiQ!bO7+%QOFqQhO'#EoOF{Q`O,5;xO&lQdO,5;xOOQW1G/o1G/oOOQO'#ES'#ESOGTQ`O1G0WOOQS<<I[<<I[O&lQdO,59tOGnQhO1G/_OOQ[1G/_1G/_OGuQ`O1G/_OOQW-E8l-E8lOOQ[7+%]7+%]OOQO,5:{,5:{O=pQdO'#ExOCeQ`O,5;cOOQS,5;c,5;cOOQS-E8u-E8uOOQS1G0f1G0fOOQS<<Iq<<IqOG}Q!fO,5;_OOQS-E8q-E8qOOQO<<IX<<IXOOQPAN>jAN>jOIUQaO,5;]OOQO-E8o-E8oOI`QdO,5;[OOQO-E8n-E8nOOQW<<Hh<<HhOOQW<<Hl<<HlOIjQhO<<HlOI{QhO,5;ZOJWQ`O,5;ZOOQO-E8m-E8mOJ]QdO1G1dOBZQdO'#EuOJgQ`O7+%rOOQW7+%r7+%rOJoQ!bO1G/`OOQ[7+$y7+$yOJzQhO7+$yPKRQ`O'#EnOOQO,5;d,5;dOOQO-E8v-E8vOOQS1G0}1G0}OKWQ`OAN>WO&lQdO1G0uOK]Q`O7+'OOOQO,5;a,5;aOOQO-E8s-E8sOOQW<<I^<<I^OOQ[<<He<<HePOQW,5;Y,5;YOOQWG23rG23rOKeQdO7+&a",stateData:"Kx~O#sOS#tQQ~OW[OZ[O]TO`VOaVOi]OjWOmXO!jYO!mZO!saO!ybO!{cO!}dO#QeO#WfO#YgO#oRO~OQiOW[OZ[O]TO`VOaVOi]OjWOmXO!jYO!mZO!saO!ybO!{cO!}dO#QeO#WfO#YgO#ohO~O#m$SP~P!dO#tmO~O#ooO~O]qO`rOarOjsOmtO!juO!mwO#nvO~OpzO!^xO~P$SOc!QO#o|O#p}O~O#o!RO~O#o!TO~OW[OZ[O]TO`VOaVOjWOmXO!jYO!mZO#oRO~OS!]Oe!YO!V![O!Y!`O#q!XOp$TP~Ok$TP~P&POQ!jOe!cOm!dOp!eOr!mOt!mOz!kO!`!lO#o!bO#p!hO#}!fO~Ot!qO!`!lO#o!pO~Ot!sO#o!sO~OS!]Oe!YO!V![O!Y!`O#q!XO~Oe!vOpzO#Z!xO~O]YX`YX`!pXaYXjYXmYXpYX!^YX!jYX!mYX#nYX~O`!zO~Ok!{O#m$SXo$SX~O#m$SXo$SX~P!dO#u#OO#v#OO#w#QO~Oc#UO#o|O#p}O~OpzO!^xO~Oo$SP~P!dOe#`O~Oe#aO~Ol#bO!h#cO~O]qO`rOarOjsOmtO~Op!ia!^!ia!j!ia!m!ia#n!iad!ia~P*zOp!la!^!la!j!la!m!la#n!lad!la~P*zOR#gOS!]Oe!YOr#gOt#gO!V![O!Y!`O#q#dO#}!fO~O!R#iO!^#jOk$TXp$TX~Oe#mO~Ok#oOpzO~Oe!vO~O]#rO`#rOd#uOi#rOj#rOk#rO~P&lO]#rO`#rOi#rOj#rOk#rOl#wO~P&lO]#rO`#rOi#rOj#rOk#rOo#yO~P&lOP#zOSsXesXksXvsX!VsX!YsX!usX!wsX#qsX!TsXQsX]sX`sXdsXisXjsXmsXpsXrsXtsXzsX!`sX#osX#psX#}sXlsXosX!^sX!qsX#msX~Ov#{O!u#|O!w#}Ok$TP~P'tOe#aOS#{Xk#{Xv#{X!V#{X!Y#{X!u#{X!w#{X#q#{XQ#{X]#{X`#{Xd#{Xi#{Xj#{Xm#{Xp#{Xr#{Xt#{Xz#{X!`#{X#o#{X#p#{X#}#{Xl#{Xo#{X!^#{X!q#{X#m#{X~Oe$RO~Oe$TO~Ok$VOv#{O~Ok$WO~Ot$XO!`!lO~Op$YO~OpzO!R#iO~OpzO#Z$`O~O!q$bOk!oa#m!oao!oa~P&lOk#hX#m#hXo#hX~P!dOk!{O#m$Sao$Sa~O#u#OO#v#OO#w$hO~Ol$jO!h$kO~Op!ii!^!ii!j!ii!m!ii#n!iid!ii~P*zOp!ki!^!ki!j!ki!m!ki#n!kid!ki~P*zOp!li!^!li!j!li!m!li#n!lid!li~P*zOp#fa!^#fa~P$SOo$lO~Od$RP~P%_Od#zP~P&lO`!PXd}X!R}X!T!PX~O`$sO!T$tO~Od$uO!R#iO~Ok#jXp#jX!^#jX~P'tO!^#jOk$Tap$Ta~O!R#iOk!Uap!Ua!^!Uad!Ua`!Ua~OS!]Oe!YO!V![O!Y!`O#q$yO~Od$QP~P9dOv#{OQ#|X]#|X`#|Xd#|Xe#|Xi#|Xj#|Xk#|Xm#|Xp#|Xr#|Xt#|Xz#|X!`#|X#o#|X#p#|X#}#|Xl#|Xo#|X~O]#rO`#rOd%OOi#rOj#rOk#rO~P&lO]#rO`#rOi#rOj#rOk#rOl%PO~P&lO]#rO`#rOi#rOj#rOk#rOo%QO~P&lOe%SOS!tXk!tX!V!tX!Y!tX#q!tX~Ok%TO~Od%YOt%ZO!a%ZO~Ok%[O~Oo%cO#o%^O#}%]O~Od%dO~P$SOv#{O!^%hO!q%jOk!oi#m!oio!oi~P&lOk#ha#m#hao#ha~P!dOk!{O#m$Sio$Si~O!^%mOd$RX~P$SOd%oO~Ov#{OQ#`Xd#`Xe#`Xm#`Xp#`Xr#`Xt#`Xz#`X!^#`X!`#`X#o#`X#p#`X#}#`X~O!^%qOd#zX~P&lOd%sO~Ol%tOv#{O~OR#gOr#gOt#gO#q%vO#}!fO~O!R#iOk#jap#ja!^#ja~O`!PXd}X!R}X!^}X~O!R#iO!^%xOd$QX~O`%zO~Od%{O~O#o%|O~Ok&OO~O`&PO!R#iO~Od&ROk&QO~Od&UO~OP#zOpsX!^sXdsX~O#}%]Op#TX!^#TX~OpzO!^&WO~Oo&[O#o%^O#}%]O~Ov#{OQ#gXe#gXk#gXm#gXp#gXr#gXt#gXz#gX!^#gX!`#gX!q#gX#m#gX#o#gX#p#gX#}#gXo#gX~O!^%hO!q&`Ok!oq#m!oqo!oq~P&lOl&aOv#{O~Od#eX!^#eX~P%_O!^%mOd$Ra~Od#dX!^#dX~P&lO!^%qOd#za~Od&fO~P&lOd&gO!T&hO~Od#cX!^#cX~P9dO!^%xOd$Qa~O]&mOd&oO~OS#bae#ba!V#ba!Y#ba#q#ba~Od&qO~PG]Od&qOk&rO~Ov#{OQ#gae#gak#gam#gap#gar#gat#gaz#ga!^#ga!`#ga!q#ga#m#ga#o#ga#p#ga#}#gao#ga~Od#ea!^#ea~P$SOd#da!^#da~P&lOR#gOr#gOt#gO#q%vO#}%]O~O!R#iOd#ca!^#ca~O`&xO~O!^%xOd$Qi~P&lO]&mOd&|O~Ov#{Od|ik|i~Od&}O~PG]Ok'OO~Od'PO~O!^%xOd$Qq~Od#cq!^#cq~P&lO#s!a#t#}]#}v!m~",goto:"2h$UPPPPP$VP$YP$c$uP$cP%X$cPP%_PPP%e%o%oPPPPP%oPP%oP&]P%oP%o'W%oP't'w'}'}(^'}P'}P'}P'}'}P(m'}(yP(|PP)p)v$c)|$c*SP$cP$c$cP*Y*{+YP$YP+aP+dP$YP$YP$YP+j$YP+m+p+s+z$YP$YPP$YP,P,V,f,|-[-b-l-r-x.O.U.`.f.l.rPPPPPPPPPPP.x/R/w/z0|P1U1u2O2R2U2[RnQ_^OP`kz!{$dq[OPYZ`kuvwxz!v!{#`$d%mqSOPYZ`kuvwxz!v!{#`$d%mQpTR#RqQ!OVR#SrQ#S!QS$Q!i!jR$i#U!V!mac!c!d!e!z#a#c#t#v#x#{$a$k$p$s%h%i%q%u%z&P&d&l&x'Q!U!mac!c!d!e!z#a#c#t#v#x#{$a$k$p$s%h%i%q%u%z&P&d&l&x'QU#g!Y$t&hU%`$Y%b&WR&V%_!V!iac!c!d!e!z#a#c#t#v#x#{$a$k$p$s%h%i%q%u%z&P&d&l&x'QR$S!kQ%W$RR&S%Xk!^]bf!Y![!g#i#j#m$P$R%X%xQ#e!YQ${#mQ%w$tQ&j%xR&w&hQ!ygQ#p!`Q$^!xR%f$`R#n!]!U!mac!c!d!e!z#a#c#t#v#x#{$a$k$p$s%h%i%q%u%z&P&d&l&x'QQ!qdR$X!rQ!PVR#TrQ#S!PR$i#TQ!SWR#VsQ!UXR#WtQ{UQ!wgQ#^yQ#o!_Q$U!nQ$[!uQ$_!yQ%e$^Q&Y%aQ&]%fR&v&XSjPzQ!}kQ$c!{R%k$dZiPkz!{$dR$P!gQ%}%SR&z&mR!rdR!teR$Z!tS%a$Y%bR&t&WV%_$Y%b&WQ#PmR$g#PQ`OSkPzU!a`k$dR$d!{Q$p#aY%p$p%u&d&l'QQ%u$sQ&d%qQ&l%zR'Q&xQ#t!cQ#v!dQ#x!eV$}#t#v#xQ%X$RR&T%XQ%y$zS&k%y&yR&y&lQ%r$pR&e%rQ%n$mR&c%nQyUR#]yQ%i$aR&_%iQ!|jS$e!|$fR$f!}Q&n%}R&{&nQ#k!ZR$x#kQ%b$YR&Z%bQ&X%aR&u&X__OP`kz!{$d^UOP`kz!{$dQ!VYQ!WZQ#XuQ#YvQ#ZwQ#[xQ$]!vQ$m#`R&b%mR$q#aQ!gaQ!oc[#q!c!d!e#t#v#xQ$a!zd$o#a$p$s%q%u%z&d&l&x'QQ$r#cQ%R#{S%g$a%iQ%l$kQ&^%hR&p&P]#s!c!d!e#t#v#xW!Z]b!g$PQ!ufQ#f!YQ#l![Q$v#iQ$w#jQ$z#mS%V$R%XR&i%xQ#h!YQ%w$tR&w&hR$|#mR$n#`QlPR#_zQ!_]Q!nbQ$O!gR%U$P",nodeNames:" Unit VariableName VariableName QueryCallee Comment StyleSheet RuleSet UniversalSelector TagSelector TagName NestingSelector ClassSelector . ClassName PseudoClassSelector : :: PseudoClassName PseudoClassName ) ( ArgList ValueName ParenthesizedValue AtKeyword # ; ] [ BracketedValue } { BracedValue ColorLiteral NumberLiteral StringLiteral BinaryExpression BinOp CallExpression Callee IfExpression if ArgList IfBranch KeywordQuery FeatureQuery FeatureName BinaryQuery LogicOp ComparisonQuery CompareOp UnaryQuery UnaryQueryOp ParenthesizedQuery SelectorQuery selector ParenthesizedSelector CallQuery ArgList , CallLiteral CallTag ParenthesizedContent PseudoClassName ArgList IdSelector IdName AttributeSelector AttributeName MatchOp ChildSelector ChildOp DescendantSelector SiblingSelector SiblingOp Block Declaration PropertyName Important ImportStatement import Layer layer LayerName layer MediaStatement media CharsetStatement charset NamespaceStatement namespace NamespaceName KeyframesStatement keyframes KeyframeName KeyframeList KeyframeSelector KeyframeRangeName SupportsStatement supports ScopeStatement scope to AtRule Styles",maxTerm:143,nodeProps:[["isolate",-2,5,36,""],["openedBy",20,"(",28,"[",31,"{"],["closedBy",21,")",29,"]",32,"}"]],propSources:[cssHighlighting],skippedNodes:[0,5,106],repeatNodeCount:15,tokenData:"JQ~R!YOX$qX^%i^p$qpq%iqr({rs-ust/itu6Wuv$qvw7Qwx7cxy9Qyz9cz{9h{|:R|}>t}!O?V!O!P?t!P!Q@]!Q![AU![!]BP!]!^B{!^!_C^!_!`DY!`!aDm!a!b$q!b!cEn!c!}$q!}#OG{#O#P$q#P#QH^#Q#R6W#R#o$q#o#pHo#p#q6W#q#rIQ#r#sIc#s#y$q#y#z%i#z$f$q$f$g%i$g#BY$q#BY#BZ%i#BZ$IS$q$IS$I_%i$I_$I|$q$I|$JO%i$JO$JT$q$JT$JU%i$JU$KV$q$KV$KW%i$KW&FU$q&FU&FV%i&FV;'S$q;'S;=`Iz<%lO$q`$tSOy%Qz;'S%Q;'S;=`%c<%lO%Q`%VS!a`Oy%Qz;'S%Q;'S;=`%c<%lO%Q`%fP;=`<%l%Q~%nh#s~OX%QX^'Y^p%Qpq'Yqy%Qz#y%Q#y#z'Y#z$f%Q$f$g'Y$g#BY%Q#BY#BZ'Y#BZ$IS%Q$IS$I_'Y$I_$I|%Q$I|$JO'Y$JO$JT%Q$JT$JU'Y$JU$KV%Q$KV$KW'Y$KW&FU%Q&FU&FV'Y&FV;'S%Q;'S;=`%c<%lO%Q~'ah#s~!a`OX%QX^'Y^p%Qpq'Yqy%Qz#y%Q#y#z'Y#z$f%Q$f$g'Y$g#BY%Q#BY#BZ'Y#BZ$IS%Q$IS$I_'Y$I_$I|%Q$I|$JO'Y$JO$JT%Q$JT$JU'Y$JU$KV%Q$KV$KW'Y$KW&FU%Q&FU&FV'Y&FV;'S%Q;'S;=`%c<%lO%Qj)OUOy%Qz#]%Q#]#^)b#^;'S%Q;'S;=`%c<%lO%Qj)gU!a`Oy%Qz#a%Q#a#b)y#b;'S%Q;'S;=`%c<%lO%Qj*OU!a`Oy%Qz#d%Q#d#e*b#e;'S%Q;'S;=`%c<%lO%Qj*gU!a`Oy%Qz#c%Q#c#d*y#d;'S%Q;'S;=`%c<%lO%Qj+OU!a`Oy%Qz#f%Q#f#g+b#g;'S%Q;'S;=`%c<%lO%Qj+gU!a`Oy%Qz#h%Q#h#i+y#i;'S%Q;'S;=`%c<%lO%Qj,OU!a`Oy%Qz#T%Q#T#U,b#U;'S%Q;'S;=`%c<%lO%Qj,gU!a`Oy%Qz#b%Q#b#c,y#c;'S%Q;'S;=`%c<%lO%Qj-OU!a`Oy%Qz#h%Q#h#i-b#i;'S%Q;'S;=`%c<%lO%Qj-iS!qY!a`Oy%Qz;'S%Q;'S;=`%c<%lO%Q~-xWOY-uZr-urs.bs#O-u#O#P.g#P;'S-u;'S;=`/c<%lO-u~.gOt~~.jRO;'S-u;'S;=`.s;=`O-u~.vXOY-uZr-urs.bs#O-u#O#P.g#P;'S-u;'S;=`/c;=`<%l-u<%lO-u~/fP;=`<%l-uj/nYjYOy%Qz!Q%Q!Q![0^![!c%Q!c!i0^!i#T%Q#T#Z0^#Z;'S%Q;'S;=`%c<%lO%Qj0cY!a`Oy%Qz!Q%Q!Q![1R![!c%Q!c!i1R!i#T%Q#T#Z1R#Z;'S%Q;'S;=`%c<%lO%Qj1WY!a`Oy%Qz!Q%Q!Q![1v![!c%Q!c!i1v!i#T%Q#T#Z1v#Z;'S%Q;'S;=`%c<%lO%Qj1}YrY!a`Oy%Qz!Q%Q!Q![2m![!c%Q!c!i2m!i#T%Q#T#Z2m#Z;'S%Q;'S;=`%c<%lO%Qj2tYrY!a`Oy%Qz!Q%Q!Q![3d![!c%Q!c!i3d!i#T%Q#T#Z3d#Z;'S%Q;'S;=`%c<%lO%Qj3iY!a`Oy%Qz!Q%Q!Q![4X![!c%Q!c!i4X!i#T%Q#T#Z4X#Z;'S%Q;'S;=`%c<%lO%Qj4`YrY!a`Oy%Qz!Q%Q!Q![5O![!c%Q!c!i5O!i#T%Q#T#Z5O#Z;'S%Q;'S;=`%c<%lO%Qj5TY!a`Oy%Qz!Q%Q!Q![5s![!c%Q!c!i5s!i#T%Q#T#Z5s#Z;'S%Q;'S;=`%c<%lO%Qj5zSrY!a`Oy%Qz;'S%Q;'S;=`%c<%lO%Qd6ZUOy%Qz!_%Q!_!`6m!`;'S%Q;'S;=`%c<%lO%Qd6tS!hS!a`Oy%Qz;'S%Q;'S;=`%c<%lO%Qb7VSZQOy%Qz;'S%Q;'S;=`%c<%lO%Q~7fWOY7cZw7cwx.bx#O7c#O#P8O#P;'S7c;'S;=`8z<%lO7c~8RRO;'S7c;'S;=`8[;=`O7c~8_XOY7cZw7cwx.bx#O7c#O#P8O#P;'S7c;'S;=`8z;=`<%l7c<%lO7c~8}P;=`<%l7cj9VSeYOy%Qz;'S%Q;'S;=`%c<%lO%Q~9hOd~n9oUWQvWOy%Qz!_%Q!_!`6m!`;'S%Q;'S;=`%c<%lO%Qj:YWvW!mQOy%Qz!O%Q!O!P:r!P!Q%Q!Q![=w![;'S%Q;'S;=`%c<%lO%Qj:wU!a`Oy%Qz!Q%Q!Q![;Z![;'S%Q;'S;=`%c<%lO%Qj;bY!a`#}YOy%Qz!Q%Q!Q![;Z![!g%Q!g!h<Q!h#X%Q#X#Y<Q#Y;'S%Q;'S;=`%c<%lO%Qj<VY!a`Oy%Qz{%Q{|<u|}%Q}!O<u!O!Q%Q!Q![=^![;'S%Q;'S;=`%c<%lO%Qj<zU!a`Oy%Qz!Q%Q!Q![=^![;'S%Q;'S;=`%c<%lO%Qj=eU!a`#}YOy%Qz!Q%Q!Q![=^![;'S%Q;'S;=`%c<%lO%Qj>O[!a`#}YOy%Qz!O%Q!O!P;Z!P!Q%Q!Q![=w![!g%Q!g!h<Q!h#X%Q#X#Y<Q#Y;'S%Q;'S;=`%c<%lO%Qj>yS!^YOy%Qz;'S%Q;'S;=`%c<%lO%Qj?[WvWOy%Qz!O%Q!O!P:r!P!Q%Q!Q![=w![;'S%Q;'S;=`%c<%lO%Qj?yU]YOy%Qz!Q%Q!Q![;Z![;'S%Q;'S;=`%c<%lO%Q~@bTvWOy%Qz{@q{;'S%Q;'S;=`%c<%lO%Q~@xS!a`#t~Oy%Qz;'S%Q;'S;=`%c<%lO%QjAZ[#}YOy%Qz!O%Q!O!P;Z!P!Q%Q!Q![=w![!g%Q!g!h<Q!h#X%Q#X#Y<Q#Y;'S%Q;'S;=`%c<%lO%QjBUU`YOy%Qz![%Q![!]Bh!];'S%Q;'S;=`%c<%lO%QbBoSaQ!a`Oy%Qz;'S%Q;'S;=`%c<%lO%QjCQSkYOy%Qz;'S%Q;'S;=`%c<%lO%QhCcU!TWOy%Qz!_%Q!_!`Cu!`;'S%Q;'S;=`%c<%lO%QhC|S!TW!a`Oy%Qz;'S%Q;'S;=`%c<%lO%QlDaS!TW!hSOy%Qz;'S%Q;'S;=`%c<%lO%QjDtV!jQ!TWOy%Qz!_%Q!_!`Cu!`!aEZ!a;'S%Q;'S;=`%c<%lO%QbEbS!jQ!a`Oy%Qz;'S%Q;'S;=`%c<%lO%QjEqYOy%Qz}%Q}!OFa!O!c%Q!c!}GO!}#T%Q#T#oGO#o;'S%Q;'S;=`%c<%lO%QjFfW!a`Oy%Qz!c%Q!c!}GO!}#T%Q#T#oGO#o;'S%Q;'S;=`%c<%lO%QjGV[iY!a`Oy%Qz}%Q}!OGO!O!Q%Q!Q![GO![!c%Q!c!}GO!}#T%Q#T#oGO#o;'S%Q;'S;=`%c<%lO%QjHQSmYOy%Qz;'S%Q;'S;=`%c<%lO%QnHcSl^Oy%Qz;'S%Q;'S;=`%c<%lO%QjHtSpYOy%Qz;'S%Q;'S;=`%c<%lO%QjIVSoYOy%Qz;'S%Q;'S;=`%c<%lO%QfIhU!mQOy%Qz!_%Q!_!`6m!`;'S%Q;'S;=`%c<%lO%Q`I}P;=`<%l$q",tokenizers:[descendant,unitToken,identifiers,queryIdentifiers,1,2,3,4,new LocalTokenGroup("m~RRYZ[z{a~~g~aO#v~~dP!P!Qg~lO#w~~",28,129)],topRules:{StyleSheet:[0,6],Styles:[1,105]},specialized:[{term:124,get:h=>spec_callee[h]||-1},{term:125,get:h=>spec_queryIdentifier[h]||-1},{term:4,get:h=>spec_QueryCallee[h]||-1},{term:25,get:h=>spec_AtKeyword[h]||-1},{term:123,get:h=>spec_identifier$1[h]||-1}],tokenPrec:1963});let _properties=null;function properties(){if(!_properties&&typeof document=="object"&&document.body){let{style:h}=document.body,r=[],o=new Set;for(let u in h)u!="cssText"&&u!="cssFloat"&&typeof h[u]=="string"&&(/[A-Z]/.test(u)&&(u=u.replace(/[A-Z]/g,g=>"-"+g.toLowerCase())),o.has(u)||(r.push(u),o.add(u)));_properties=r.sort().map(u=>({type:"property",label:u,apply:u+": "}))}return _properties||[]}const pseudoClasses=["active","after","any-link","autofill","backdrop","before","checked","cue","default","defined","disabled","empty","enabled","file-selector-button","first","first-child","first-letter","first-line","first-of-type","focus","focus-visible","focus-within","fullscreen","has","host","host-context","hover","in-range","indeterminate","invalid","is","lang","last-child","last-of-type","left","link","marker","modal","not","nth-child","nth-last-child","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","part","placeholder","placeholder-shown","read-only","read-write","required","right","root","scope","selection","slotted","target","target-text","valid","visited","where"].map(h=>({type:"class",label:h})),values=["above","absolute","activeborder","additive","activecaption","after-white-space","ahead","alias","all","all-scroll","alphabetic","alternate","always","antialiased","appworkspace","asterisks","attr","auto","auto-flow","avoid","avoid-column","avoid-page","avoid-region","axis-pan","background","backwards","baseline","below","bidi-override","blink","block","block-axis","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","bullets","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","calc","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-decimal","clear","clip","close-quote","col-resize","collapse","color","color-burn","color-dodge","column","column-reverse","compact","condensed","contain","content","contents","content-box","context-menu","continuous","copy","counter","counters","cover","crop","cross","crosshair","currentcolor","cursive","cyclic","darken","dashed","decimal","decimal-leading-zero","default","default-button","dense","destination-atop","destination-in","destination-out","destination-over","difference","disc","discard","disclosure-closed","disclosure-open","document","dot-dash","dot-dot-dash","dotted","double","down","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic-abegede-gez","ethiopic-halehame-aa-er","ethiopic-halehame-gez","ew-resize","exclusion","expanded","extends","extra-condensed","extra-expanded","fantasy","fast","fill","fill-box","fixed","flat","flex","flex-end","flex-start","footnotes","forwards","from","geometricPrecision","graytext","grid","groove","hand","hard-light","help","hidden","hide","higher","highlight","highlighttext","horizontal","hsl","hsla","hue","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-flex","inline-grid","inline-table","inset","inside","intrinsic","invert","italic","justify","keep-all","landscape","large","larger","left","level","lighter","lighten","line-through","linear","linear-gradient","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-hexadecimal","lower-latin","lower-norwegian","lowercase","ltr","luminosity","manipulation","match","matrix","matrix3d","medium","menu","menutext","message-box","middle","min-intrinsic","mix","monospace","move","multiple","multiple_mask_images","multiply","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","numbers","numeric","nw-resize","nwse-resize","oblique","opacity","open-quote","optimizeLegibility","optimizeSpeed","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","perspective","pinch-zoom","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radial-gradient","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeating-linear-gradient","repeating-radial-gradient","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","rotate","rotate3d","rotateX","rotateY","rotateZ","round","row","row-resize","row-reverse","rtl","run-in","running","s-resize","sans-serif","saturation","scale","scale3d","scaleX","scaleY","scaleZ","screen","scroll","scrollbar","scroll-position","se-resize","self-start","self-end","semi-condensed","semi-expanded","separate","serif","show","single","skew","skewX","skewY","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","soft-light","solid","source-atop","source-in","source-out","source-over","space","space-around","space-between","space-evenly","spell-out","square","start","static","status-bar","stretch","stroke","stroke-box","sub","subpixel-antialiased","svg_masks","super","sw-resize","symbolic","symbols","system-ui","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","text","text-bottom","text-top","textarea","textfield","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","to","top","transform","translate","translate3d","translateX","translateY","translateZ","transparent","ultra-condensed","ultra-expanded","underline","unidirectional-pan","unset","up","upper-latin","uppercase","url","var","vertical","vertical-text","view-box","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","words","wrap","wrap-reverse","x-large","x-small","xor","xx-large","xx-small"].map(h=>({type:"keyword",label:h})).concat(["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"].map(h=>({type:"constant",label:h}))),tags=["a","abbr","address","article","aside","b","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","dd","del","details","dfn","dialog","div","dl","dt","em","figcaption","figure","footer","form","header","hgroup","h1","h2","h3","h4","h5","h6","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","main","meter","nav","ol","output","p","pre","ruby","section","select","small","source","span","strong","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","tr","u","ul"].map(h=>({type:"type",label:h})),atRules=["@charset","@color-profile","@container","@counter-style","@font-face","@font-feature-values","@font-palette-values","@import","@keyframes","@layer","@media","@namespace","@page","@position-try","@property","@scope","@starting-style","@supports","@view-transition"].map(h=>({type:"keyword",label:h})),identifier$1=/^(\w[\w-]*|-\w[\w-]*|)$/,variable=/^-(-[\w-]*)?$/;function isVarArg(h,r){var o;if((h.name=="("||h.type.isError)&&(h=h.parent||h),h.name!="ArgList")return!1;let u=(o=h.parent)===null||o===void 0?void 0:o.firstChild;return(u==null?void 0:u.name)!="Callee"?!1:r.sliceString(u.from,u.to)=="var"}const VariablesByNode=new NodeWeakMap,declSelector=["Declaration"];function astTop(h){for(let r=h;;){if(r.type.isTop)return r;if(!(r=r.parent))return h}}function variableNames(h,r,o){if(r.to-r.from>4096){let u=VariablesByNode.get(r);if(u)return u;let g=[],k=new Set,A=r.cursor(IterMode.IncludeAnonymous);if(A.firstChild())do for(let R of variableNames(h,A.node,o))k.has(R.label)||(k.add(R.label),g.push(R));while(A.nextSibling());return VariablesByNode.set(r,g),g}else{let u=[],g=new Set;return r.cursor().iterate(k=>{var A;if(o(k)&&k.matchContext(declSelector)&&((A=k.node.nextSibling)===null||A===void 0?void 0:A.name)==":"){let R=h.sliceString(k.from,k.to);g.has(R)||(g.add(R),u.push({label:R,type:"variable"}))}}),u}}const defineCSSCompletionSource=h=>r=>{let{state:o,pos:u}=r,g=syntaxTree(o).resolveInner(u,-1),k=g.type.isError&&g.from==g.to-1&&o.doc.sliceString(g.from,g.to)=="-";if(g.name=="PropertyName"||(k||g.name=="TagName")&&/^(Block|Styles)$/.test(g.resolve(g.to).name))return{from:g.from,options:properties(),validFor:identifier$1};if(g.name=="ValueName")return{from:g.from,options:values,validFor:identifier$1};if(g.name=="PseudoClassName")return{from:g.from,options:pseudoClasses,validFor:identifier$1};if(h(g)||(r.explicit||k)&&isVarArg(g,o.doc))return{from:h(g)||k?g.from:u,options:variableNames(o.doc,astTop(g),h),validFor:variable};if(g.name=="TagName"){for(let{parent:q}=g;q;q=q.parent)if(q.name=="Block")return{from:g.from,options:properties(),validFor:identifier$1};return{from:g.from,options:tags,validFor:identifier$1}}if(g.name=="AtKeyword")return{from:g.from,options:atRules,validFor:identifier$1};if(!r.explicit)return null;let A=g.resolve(u),R=A.childBefore(u);return R&&R.name==":"&&A.name=="PseudoClassSelector"?{from:u,options:pseudoClasses,validFor:identifier$1}:R&&R.name==":"&&A.name=="Declaration"||A.name=="ArgList"?{from:u,options:values,validFor:identifier$1}:A.name=="Block"||A.name=="Styles"?{from:u,options:properties(),validFor:identifier$1}:null},cssCompletionSource=defineCSSCompletionSource(h=>h.name=="VariableName"),cssLanguage=LRLanguage.define({name:"css",parser:parser$1.configure({props:[indentNodeProp.add({Declaration:continuedIndent()}),foldNodeProp.add({"Block KeyframeList":foldInside})]}),languageData:{commentTokens:{block:{open:"/*",close:"*/"}},indentOnInput:/^\s*\}$/,wordChars:"-"}});function css(){return new LanguageSupport(cssLanguage,cssLanguage.data.of({autocomplete:cssCompletionSource}))}const noSemi=316,noSemiType=317,incdec=1,incdecPrefix=2,questionDot=3,JSXStartTag=4,insertSemi=318,spaces=320,newline=321,LineComment=5,BlockComment=6,Dialect_jsx=0,space=[9,10,11,12,13,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288],braceR=125,semicolon=59,slash=47,star=42,plus=43,minus=45,lt=60,comma=44,question=63,dot=46,bracketL=91,trackNewline=new ContextTracker({start:!1,shift(h,r){return r==LineComment||r==BlockComment||r==spaces?h:r==newline},strict:!1}),insertSemicolon=new ExternalTokenizer((h,r)=>{let{next:o}=h;(o==braceR||o==-1||r.context)&&h.acceptToken(insertSemi)},{contextual:!0,fallback:!0}),noSemicolon=new ExternalTokenizer((h,r)=>{let{next:o}=h,u;space.indexOf(o)>-1||o==slash&&((u=h.peek(1))==slash||u==star)||o!=braceR&&o!=semicolon&&o!=-1&&!r.context&&h.acceptToken(noSemi)},{contextual:!0}),noSemicolonType=new ExternalTokenizer((h,r)=>{h.next==bracketL&&!r.context&&h.acceptToken(noSemiType)},{contextual:!0}),operatorToken=new ExternalTokenizer((h,r)=>{let{next:o}=h;if(o==plus||o==minus){if(h.advance(),o==h.next){h.advance();let u=!r.context&&r.canShift(incdec);h.acceptToken(u?incdec:incdecPrefix)}}else o==question&&h.peek(1)==dot&&(h.advance(),h.advance(),(h.next<48||h.next>57)&&h.acceptToken(questionDot))},{contextual:!0});function identifierChar(h,r){return h>=65&&h<=90||h>=97&&h<=122||h==95||h>=192||!r&&h>=48&&h<=57}const jsx=new ExternalTokenizer((h,r)=>{if(h.next!=lt||!r.dialectEnabled(Dialect_jsx)||(h.advance(),h.next==slash))return;let o=0;for(;space.indexOf(h.next)>-1;)h.advance(),o++;if(identifierChar(h.next,!0)){for(h.advance(),o++;identifierChar(h.next,!1);)h.advance(),o++;for(;space.indexOf(h.next)>-1;)h.advance(),o++;if(h.next==comma)return;for(let u=0;;u++){if(u==7){if(!identifierChar(h.next,!0))return;break}if(h.next!="extends".charCodeAt(u))break;h.advance(),o++}}h.acceptToken(JSXStartTag,-o)}),jsHighlight=styleTags({"get set async static":tags$1.modifier,"for while do if else switch try catch finally return throw break continue default case defer":tags$1.controlKeyword,"in of await yield void typeof delete instanceof as satisfies":tags$1.operatorKeyword,"let var const using function class extends":tags$1.definitionKeyword,"import export from":tags$1.moduleKeyword,"with debugger new":tags$1.keyword,TemplateString:tags$1.special(tags$1.string),super:tags$1.atom,BooleanLiteral:tags$1.bool,this:tags$1.self,null:tags$1.null,Star:tags$1.modifier,VariableName:tags$1.variableName,"CallExpression/VariableName TaggedTemplateExpression/VariableName":tags$1.function(tags$1.variableName),VariableDefinition:tags$1.definition(tags$1.variableName),Label:tags$1.labelName,PropertyName:tags$1.propertyName,PrivatePropertyName:tags$1.special(tags$1.propertyName),"CallExpression/MemberExpression/PropertyName":tags$1.function(tags$1.propertyName),"FunctionDeclaration/VariableDefinition":tags$1.function(tags$1.definition(tags$1.variableName)),"ClassDeclaration/VariableDefinition":tags$1.definition(tags$1.className),"NewExpression/VariableName":tags$1.className,PropertyDefinition:tags$1.definition(tags$1.propertyName),PrivatePropertyDefinition:tags$1.definition(tags$1.special(tags$1.propertyName)),UpdateOp:tags$1.updateOperator,"LineComment Hashbang":tags$1.lineComment,BlockComment:tags$1.blockComment,Number:tags$1.number,String:tags$1.string,Escape:tags$1.escape,ArithOp:tags$1.arithmeticOperator,LogicOp:tags$1.logicOperator,BitOp:tags$1.bitwiseOperator,CompareOp:tags$1.compareOperator,RegExp:tags$1.regexp,Equals:tags$1.definitionOperator,Arrow:tags$1.function(tags$1.punctuation),": Spread":tags$1.punctuation,"( )":tags$1.paren,"[ ]":tags$1.squareBracket,"{ }":tags$1.brace,"InterpolationStart InterpolationEnd":tags$1.special(tags$1.brace),".":tags$1.derefOperator,", ;":tags$1.separator,"@":tags$1.meta,TypeName:tags$1.typeName,TypeDefinition:tags$1.definition(tags$1.typeName),"type enum interface implements namespace module declare":tags$1.definitionKeyword,"abstract global Privacy readonly override":tags$1.modifier,"is keyof unique infer asserts":tags$1.operatorKeyword,JSXAttributeValue:tags$1.attributeValue,JSXText:tags$1.content,"JSXStartTag JSXStartCloseTag JSXSelfCloseEndTag JSXEndTag":tags$1.angleBracket,"JSXIdentifier JSXNameSpacedName":tags$1.tagName,"JSXAttribute/JSXIdentifier JSXAttribute/JSXNameSpacedName":tags$1.attributeName,"JSXBuiltin/JSXIdentifier":tags$1.standard(tags$1.tagName)}),spec_identifier={__proto__:null,export:20,as:25,from:33,default:36,async:41,function:42,in:52,out:55,const:56,extends:60,this:64,true:72,false:72,null:84,void:88,typeof:92,super:108,new:142,delete:154,yield:163,await:167,class:172,public:235,private:235,protected:235,readonly:237,instanceof:256,satisfies:259,import:292,keyof:349,unique:353,infer:359,asserts:395,is:397,abstract:417,implements:419,type:421,let:424,var:426,using:429,interface:435,enum:439,namespace:445,module:447,declare:451,global:455,defer:471,for:476,of:485,while:488,with:492,do:496,if:500,else:502,switch:506,case:512,try:518,catch:522,finally:526,return:530,throw:534,break:538,continue:542,debugger:546},spec_word={__proto__:null,async:129,get:131,set:133,declare:195,public:197,private:197,protected:197,static:199,abstract:201,override:203,readonly:209,accessor:211,new:401},spec_LessThan={__proto__:null,"<":193},parser=LRParser.deserialize({version:14,states:"$F|Q%TQlOOO%[QlOOO'_QpOOP(lO`OOO*zQ!0MxO'#CiO+RO#tO'#CjO+aO&jO'#CjO+oO#@ItO'#DaO.QQlO'#DgO.bQlO'#DrO%[QlO'#DzO0fQlO'#ESOOQ!0Lf'#E['#E[O1PQ`O'#EXOOQO'#Ep'#EpOOQO'#Il'#IlO1XQ`O'#GsO1dQ`O'#EoO1iQ`O'#EoO3hQ!0MxO'#JrO6[Q!0MxO'#JsO6uQ`O'#F]O6zQ,UO'#FtOOQ!0Lf'#Ff'#FfO7VO7dO'#FfO9XQMhO'#F|O9`Q`O'#F{OOQ!0Lf'#Js'#JsOOQ!0Lb'#Jr'#JrO9eQ`O'#GwOOQ['#K_'#K_O9pQ`O'#IYO9uQ!0LrO'#IZOOQ['#J`'#J`OOQ['#I_'#I_Q`QlOOQ`QlOOO9}Q!L^O'#DvO:UQlO'#EOO:]QlO'#EQO9kQ`O'#GsO:dQMhO'#CoO:rQ`O'#EnO:}Q`O'#EyO;hQMhO'#FeO;xQ`O'#GsOOQO'#K`'#K`O;}Q`O'#K`O<]Q`O'#G{O<]Q`O'#G|O<]Q`O'#HOO9kQ`O'#HRO=SQ`O'#HUO>kQ`O'#CeO>{Q`O'#HcO?TQ`O'#HiO?TQ`O'#HkO`QlO'#HmO?TQ`O'#HoO?TQ`O'#HrO?YQ`O'#HxO?_Q!0LsO'#IOO%[QlO'#IQO?jQ!0LsO'#ISO?uQ!0LsO'#IUO9uQ!0LrO'#IWO@QQ!0MxO'#CiOASQpO'#DlQOQ`OOO%[QlO'#EQOAjQ`O'#ETO:dQMhO'#EnOAuQ`O'#EnOBQQ!bO'#FeOOQ['#Cg'#CgOOQ!0Lb'#Dq'#DqOOQ!0Lb'#Jv'#JvO%[QlO'#JvOOQO'#Jy'#JyOOQO'#Ih'#IhOCQQpO'#EgOOQ!0Lb'#Ef'#EfOOQ!0Lb'#J}'#J}OC|Q!0MSO'#EgODWQpO'#EWOOQO'#Jx'#JxODlQpO'#JyOEyQpO'#EWODWQpO'#EgPFWO&2DjO'#CbPOOO)CD})CD}OOOO'#I`'#I`OFcO#tO,59UOOQ!0Lh,59U,59UOOOO'#Ia'#IaOFqO&jO,59UOGPQ!L^O'#DcOOOO'#Ic'#IcOGWO#@ItO,59{OOQ!0Lf,59{,59{OGfQlO'#IdOGyQ`O'#JtOIxQ!fO'#JtO+}QlO'#JtOJPQ`O,5:ROJgQ`O'#EpOJtQ`O'#KTOKPQ`O'#KSOKPQ`O'#KSOKXQ`O,5;^OK^Q`O'#KROOQ!0Ln,5:^,5:^OKeQlO,5:^OMcQ!0MxO,5:fONSQ`O,5:nONmQ!0LrO'#KQONtQ`O'#KPO9eQ`O'#KPO! YQ`O'#KPO! bQ`O,5;]O! gQ`O'#KPO!#lQ!fO'#JsOOQ!0Lh'#Ci'#CiO%[QlO'#ESO!$[Q!fO,5:sOOQS'#Jz'#JzOOQO-E<j-E<jO9kQ`O,5=_O!$rQ`O,5=_O!$wQlO,5;ZO!&zQMhO'#EkO!(eQ`O,5;ZO!(jQlO'#DyO!(tQpO,5;dO!(|QpO,5;dO%[QlO,5;dOOQ['#FT'#FTOOQ['#FV'#FVO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eOOQ['#FZ'#FZO!)[QlO,5;tOOQ!0Lf,5;y,5;yOOQ!0Lf,5;z,5;zOOQ!0Lf,5;|,5;|O%[QlO'#IpO!+_Q!0LrO,5<iO%[QlO,5;eO!&zQMhO,5;eO!+|QMhO,5;eO!-nQMhO'#E^O%[QlO,5;wOOQ!0Lf,5;{,5;{O!-uQ,UO'#FjO!.rQ,UO'#KXO!.^Q,UO'#KXO!.yQ,UO'#KXOOQO'#KX'#KXO!/_Q,UO,5<SOOOW,5<`,5<`O!/pQlO'#FvOOOW'#Io'#IoO7VO7dO,5<QO!/wQ,UO'#FxOOQ!0Lf,5<Q,5<QO!0hQ$IUO'#CyOOQ!0Lh'#C}'#C}O!0{O#@ItO'#DRO!1iQMjO,5<eO!1pQ`O,5<hO!3YQ(CWO'#GXO!3jQ`O'#GYO!3oQ`O'#GYO!5_Q(CWO'#G^O!6dQpO'#GbOOQO'#Gn'#GnO!,TQMhO'#GmOOQO'#Gp'#GpO!,TQMhO'#GoO!7VQ$IUO'#JlOOQ!0Lh'#Jl'#JlO!7aQ`O'#JkO!7oQ`O'#JjO!7wQ`O'#CuOOQ!0Lh'#C{'#C{O!8YQ`O'#C}OOQ!0Lh'#DV'#DVOOQ!0Lh'#DX'#DXO!8_Q`O,5<eO1SQ`O'#DZO!,TQMhO'#GPO!,TQMhO'#GRO!8gQ`O'#GTO!8lQ`O'#GUO!3oQ`O'#G[O!,TQMhO'#GaO<]Q`O'#JkO!8qQ`O'#EqO!9`Q`O,5<gOOQ!0Lb'#Cr'#CrO!9hQ`O'#ErO!:bQpO'#EsOOQ!0Lb'#KR'#KRO!:iQ!0LrO'#KaO9uQ!0LrO,5=cO`QlO,5>tOOQ['#Jh'#JhOOQ[,5>u,5>uOOQ[-E<]-E<]O!<hQ!0MxO,5:bO!:]QpO,5:`O!?RQ!0MxO,5:jO%[QlO,5:jO!AiQ!0MxO,5:lOOQO,5@z,5@zO!BYQMhO,5=_O!BhQ!0LrO'#JiO9`Q`O'#JiO!ByQ!0LrO,59ZO!CUQpO,59ZO!C^QMhO,59ZO:dQMhO,59ZO!CiQ`O,5;ZO!CqQ`O'#HbO!DVQ`O'#KdO%[QlO,5;}O!:]QpO,5<PO!D_Q`O,5=zO!DdQ`O,5=zO!DiQ`O,5=zO!DwQ`O,5=zO9uQ!0LrO,5=zO<]Q`O,5=jOOQO'#Cy'#CyO!EOQpO,5=gO!EWQMhO,5=hO!EcQ`O,5=jO!EhQ!bO,5=mO!EpQ`O'#K`O?YQ`O'#HWO9kQ`O'#HYO!EuQ`O'#HYO:dQMhO'#H[O!EzQ`O'#H[OOQ[,5=p,5=pO!FPQ`O'#H]O!FbQ`O'#CoO!FgQ`O,59PO!FqQ`O,59PO!HvQlO,59POOQ[,59P,59PO!IWQ!0LrO,59PO%[QlO,59PO!KcQlO'#HeOOQ['#Hf'#HfOOQ['#Hg'#HgO`QlO,5=}O!KyQ`O,5=}O`QlO,5>TO`QlO,5>VO!LOQ`O,5>XO`QlO,5>ZO!LTQ`O,5>^O!LYQlO,5>dOOQ[,5>j,5>jO%[QlO,5>jO9uQ!0LrO,5>lOOQ[,5>n,5>nO#!dQ`O,5>nOOQ[,5>p,5>pO#!dQ`O,5>pOOQ[,5>r,5>rO##QQpO'#D_O%[QlO'#JvO##sQpO'#JvO##}QpO'#DmO#$`QpO'#DmO#&qQlO'#DmO#&xQ`O'#JuO#'QQ`O,5:WO#'VQ`O'#EtO#'eQ`O'#KUO#'mQ`O,5;_O#'rQpO'#DmO#(PQpO'#EVOOQ!0Lf,5:o,5:oO%[QlO,5:oO#(WQ`O,5:oO?YQ`O,5;YO!CUQpO,5;YO!C^QMhO,5;YO:dQMhO,5;YO#(`Q`O,5@bO#(eQ07dO,5:sOOQO-E<f-E<fO#)kQ!0MSO,5;RODWQpO,5:rO#)uQpO,5:rODWQpO,5;RO!ByQ!0LrO,5:rOOQ!0Lb'#Ej'#EjOOQO,5;R,5;RO%[QlO,5;RO#*SQ!0LrO,5;RO#*_Q!0LrO,5;RO!CUQpO,5:rOOQO,5;X,5;XO#*mQ!0LrO,5;RPOOO'#I^'#I^P#+RO&2DjO,58|POOO,58|,58|OOOO-E<^-E<^OOQ!0Lh1G.p1G.pOOOO-E<_-E<_OOOO,59},59}O#+^Q!bO,59}OOOO-E<a-E<aOOQ!0Lf1G/g1G/gO#+cQ!fO,5?OO+}QlO,5?OOOQO,5?U,5?UO#+mQlO'#IdOOQO-E<b-E<bO#+zQ`O,5@`O#,SQ!fO,5@`O#,ZQ`O,5@nOOQ!0Lf1G/m1G/mO%[QlO,5@oO#,cQ`O'#IjOOQO-E<h-E<hO#,ZQ`O,5@nOOQ!0Lb1G0x1G0xOOQ!0Ln1G/x1G/xOOQ!0Ln1G0Y1G0YO%[QlO,5@lO#,wQ!0LrO,5@lO#-YQ!0LrO,5@lO#-aQ`O,5@kO9eQ`O,5@kO#-iQ`O,5@kO#-wQ`O'#ImO#-aQ`O,5@kOOQ!0Lb1G0w1G0wO!(tQpO,5:uO!)PQpO,5:uOOQS,5:w,5:wO#.iQdO,5:wO#.qQMhO1G2yO9kQ`O1G2yOOQ!0Lf1G0u1G0uO#/PQ!0MxO1G0uO#0UQ!0MvO,5;VOOQ!0Lh'#GW'#GWO#0rQ!0MzO'#JlO!$wQlO1G0uO#2}Q!fO'#JwO%[QlO'#JwO#3XQ`O,5:eOOQ!0Lh'#D_'#D_OOQ!0Lf1G1O1G1OO%[QlO1G1OOOQ!0Lf1G1f1G1fO#3^Q`O1G1OO#5rQ!0MxO1G1PO#5yQ!0MxO1G1PO#8aQ!0MxO1G1PO#8hQ!0MxO1G1PO#;OQ!0MxO1G1PO#=fQ!0MxO1G1PO#=mQ!0MxO1G1PO#=tQ!0MxO1G1PO#@[Q!0MxO1G1PO#@cQ!0MxO1G1PO#BpQ?MtO'#CiO#DkQ?MtO1G1`O#DrQ?MtO'#JsO#EVQ!0MxO,5?[OOQ!0Lb-E<n-E<nO#GdQ!0MxO1G1PO#HaQ!0MzO1G1POOQ!0Lf1G1P1G1PO#IdQMjO'#J|O#InQ`O,5:xO#IsQ!0MxO1G1cO#JgQ,UO,5<WO#JoQ,UO,5<XO#JwQ,UO'#FoO#K`Q`O'#FnOOQO'#KY'#KYOOQO'#In'#InO#KeQ,UO1G1nOOQ!0Lf1G1n1G1nOOOW1G1y1G1yO#KvQ?MtO'#JrO#LQQ`O,5<bO!)[QlO,5<bOOOW-E<m-E<mOOQ!0Lf1G1l1G1lO#LVQpO'#KXOOQ!0Lf,5<d,5<dO#L_QpO,5<dO#LdQMhO'#DTOOOO'#Ib'#IbO#LkO#@ItO,59mOOQ!0Lh,59m,59mO%[QlO1G2PO!8lQ`O'#IrO#LvQ`O,5<zOOQ!0Lh,5<w,5<wO!,TQMhO'#IuO#MdQMjO,5=XO!,TQMhO'#IwO#NVQMjO,5=ZO!&zQMhO,5=]OOQO1G2S1G2SO#NaQ!dO'#CrO#NtQ(CWO'#ErO$ |QpO'#GbO$!dQ!dO,5<sO$!kQ`O'#K[O9eQ`O'#K[O$!yQ`O,5<uO$#aQ!dO'#C{O!,TQMhO,5<tO$#kQ`O'#GZO$$PQ`O,5<tO$$UQ!dO'#GWO$$cQ!dO'#K]O$$mQ`O'#K]O!&zQMhO'#K]O$$rQ`O,5<xO$$wQlO'#JvO$%RQpO'#GcO#$`QpO'#GcO$%dQ`O'#GgO!3oQ`O'#GkO$%iQ!0LrO'#ItO$%tQpO,5<|OOQ!0Lp,5<|,5<|O$%{QpO'#GcO$&YQpO'#GdO$&kQpO'#GdO$&pQMjO,5=XO$'QQMjO,5=ZOOQ!0Lh,5=^,5=^O!,TQMhO,5@VO!,TQMhO,5@VO$'bQ`O'#IyO$'vQ`O,5@UO$(OQ`O,59aOOQ!0Lh,59i,59iO$(TQ`O,5@VO$)TQ$IYO,59uOOQ!0Lh'#Jp'#JpO$)vQMjO,5<kO$*iQMjO,5<mO@zQ`O,5<oOOQ!0Lh,5<p,5<pO$*sQ`O,5<vO$*xQMjO,5<{O$+YQ`O'#KPO!$wQlO1G2RO$+_Q`O1G2RO9eQ`O'#KSO9eQ`O'#EtO%[QlO'#EtO9eQ`O'#I{O$+dQ!0LrO,5@{OOQ[1G2}1G2}OOQ[1G4`1G4`OOQ!0Lf1G/|1G/|OOQ!0Lf1G/z1G/zO$-fQ!0MxO1G0UOOQ[1G2y1G2yO!&zQMhO1G2yO%[QlO1G2yO#.tQ`O1G2yO$/jQMhO'#EkOOQ!0Lb,5@T,5@TO$/wQ!0LrO,5@TOOQ[1G.u1G.uO!ByQ!0LrO1G.uO!CUQpO1G.uO!C^QMhO1G.uO$0YQ`O1G0uO$0_Q`O'#CiO$0jQ`O'#KeO$0rQ`O,5=|O$0wQ`O'#KeO$0|Q`O'#KeO$1[Q`O'#JRO$1jQ`O,5AOO$1rQ!fO1G1iOOQ!0Lf1G1k1G1kO9kQ`O1G3fO@zQ`O1G3fO$1yQ`O1G3fO$2OQ`O1G3fO!DiQ`O1G3fO9uQ!0LrO1G3fOOQ[1G3f1G3fO!EcQ`O1G3UO!&zQMhO1G3RO$2TQ`O1G3ROOQ[1G3S1G3SO!&zQMhO1G3SO$2YQ`O1G3SO$2bQpO'#HQOOQ[1G3U1G3UO!6_QpO'#I}O!EhQ!bO1G3XOOQ[1G3X1G3XOOQ[,5=r,5=rO$2jQMhO,5=tO9kQ`O,5=tO$%dQ`O,5=vO9`Q`O,5=vO!CUQpO,5=vO!C^QMhO,5=vO:dQMhO,5=vO$2xQ`O'#KcO$3TQ`O,5=wOOQ[1G.k1G.kO$3YQ!0LrO1G.kO@zQ`O1G.kO$3eQ`O1G.kO9uQ!0LrO1G.kO$5mQ!fO,5AQO$5zQ`O,5AQO9eQ`O,5AQO$6VQlO,5>PO$6^Q`O,5>POOQ[1G3i1G3iO`QlO1G3iOOQ[1G3o1G3oOOQ[1G3q1G3qO?TQ`O1G3sO$6cQlO1G3uO$:gQlO'#HtOOQ[1G3x1G3xO$:tQ`O'#HzO?YQ`O'#H|OOQ[1G4O1G4OO$:|QlO1G4OO9uQ!0LrO1G4UOOQ[1G4W1G4WOOQ!0Lb'#G_'#G_O9uQ!0LrO1G4YO9uQ!0LrO1G4[O$?TQ`O,5@bO!)[QlO,5;`O9eQ`O,5;`O?YQ`O,5:XO!)[QlO,5:XO!CUQpO,5:XO$?YQ?MtO,5:XOOQO,5;`,5;`O$?dQpO'#IeO$?zQ`O,5@aOOQ!0Lf1G/r1G/rO$@SQpO'#IkO$@^Q`O,5@pOOQ!0Lb1G0y1G0yO#$`QpO,5:XOOQO'#Ig'#IgO$@fQpO,5:qOOQ!0Ln,5:q,5:qO#(ZQ`O1G0ZOOQ!0Lf1G0Z1G0ZO%[QlO1G0ZOOQ!0Lf1G0t1G0tO?YQ`O1G0tO!CUQpO1G0tO!C^QMhO1G0tOOQ!0Lb1G5|1G5|O!ByQ!0LrO1G0^OOQO1G0m1G0mO%[QlO1G0mO$@mQ!0LrO1G0mO$@xQ!0LrO1G0mO!CUQpO1G0^ODWQpO1G0^O$AWQ!0LrO1G0mOOQO1G0^1G0^O$AlQ!0MxO1G0mPOOO-E<[-E<[POOO1G.h1G.hOOOO1G/i1G/iO$AvQ!bO,5<iO$BOQ!fO1G4jOOQO1G4p1G4pO%[QlO,5?OO$BYQ`O1G5zO$BbQ`O1G6YO$BjQ!fO1G6ZO9eQ`O,5?UO$BtQ!0MxO1G6WO%[QlO1G6WO$CUQ!0LrO1G6WO$CgQ`O1G6VO$CgQ`O1G6VO9eQ`O1G6VO$CoQ`O,5?XO9eQ`O,5?XOOQO,5?X,5?XO$DTQ`O,5?XO$+YQ`O,5?XOOQO-E<k-E<kOOQS1G0a1G0aOOQS1G0c1G0cO#.lQ`O1G0cOOQ[7+(e7+(eO!&zQMhO7+(eO%[QlO7+(eO$DcQ`O7+(eO$DnQMhO7+(eO$D|Q!0MzO,5=XO$GXQ!0MzO,5=ZO$IdQ!0MzO,5=XO$KuQ!0MzO,5=ZO$NWQ!0MzO,59uO%!]Q!0MzO,5<kO%$hQ!0MzO,5<mO%&sQ!0MzO,5<{OOQ!0Lf7+&a7+&aO%)UQ!0MxO7+&aO%)xQlO'#IfO%*VQ`O,5@cO%*_Q!fO,5@cOOQ!0Lf1G0P1G0PO%*iQ`O7+&jOOQ!0Lf7+&j7+&jO%*nQ?MtO,5:fO%[QlO7+&zO%*xQ?MtO,5:bO%+VQ?MtO,5:jO%+aQ?MtO,5:lO%+kQMhO'#IiO%+uQ`O,5@hOOQ!0Lh1G0d1G0dOOQO1G1r1G1rOOQO1G1s1G1sO%+}Q!jO,5<ZO!)[QlO,5<YOOQO-E<l-E<lOOQ!0Lf7+'Y7+'YOOOW7+'e7+'eOOOW1G1|1G1|O%,YQ`O1G1|OOQ!0Lf1G2O1G2OOOOO,59o,59oO%,_Q!dO,59oOOOO-E<`-E<`OOQ!0Lh1G/X1G/XO%,fQ!0MxO7+'kOOQ!0Lh,5?^,5?^O%-YQMhO1G2fP%-aQ`O'#IrPOQ!0Lh-E<p-E<pO%-}QMjO,5?aOOQ!0Lh-E<s-E<sO%.pQMjO,5?cOOQ!0Lh-E<u-E<uO%.zQ!dO1G2wO%/RQ!dO'#CrO%/iQMhO'#KSO$$wQlO'#JvOOQ!0Lh1G2_1G2_O%/sQ`O'#IqO%0[Q`O,5@vO%0[Q`O,5@vO%0dQ`O,5@vO%0oQ`O,5@vOOQO1G2a1G2aO%0}QMjO1G2`O$+YQ`O'#K[O!,TQMhO1G2`O%1_Q(CWO'#IsO%1lQ`O,5@wO!&zQMhO,5@wO%1tQ!dO,5@wOOQ!0Lh1G2d1G2dO%4UQ!fO'#CiO%4`Q`O,5=POOQ!0Lb,5<},5<}O%4hQpO,5<}OOQ!0Lb,5=O,5=OOCwQ`O,5<}O%4sQpO,5<}OOQ!0Lb,5=R,5=RO$+YQ`O,5=VOOQO,5?`,5?`OOQO-E<r-E<rOOQ!0Lp1G2h1G2hO#$`QpO,5<}O$$wQlO,5=PO%5RQ`O,5=OO%5^QpO,5=OO!,TQMhO'#IuO%6WQMjO1G2sO!,TQMhO'#IwO%6yQMjO1G2uO%7TQMjO1G5qO%7_QMjO1G5qOOQO,5?e,5?eOOQO-E<w-E<wOOQO1G.{1G.{O!,TQMhO1G5qO!,TQMhO1G5qO!:]QpO,59wO%[QlO,59wOOQ!0Lh,5<j,5<jO%7lQ`O1G2ZO!,TQMhO1G2bO%7qQ!0MxO7+'mOOQ!0Lf7+'m7+'mO!$wQlO7+'mO%8eQ`O,5;`OOQ!0Lb,5?g,5?gOOQ!0Lb-E<y-E<yO%8jQ!dO'#K^O#(ZQ`O7+(eO4UQ!fO7+(eO$DfQ`O7+(eO%8tQ!0MvO'#CiO%9XQ!0MvO,5=SO%9lQ`O,5=SO%9tQ`O,5=SOOQ!0Lb1G5o1G5oOOQ[7+$a7+$aO!ByQ!0LrO7+$aO!CUQpO7+$aO!$wQlO7+&aO%9yQ`O'#JQO%:bQ`O,5APOOQO1G3h1G3hO9kQ`O,5APO%:bQ`O,5APO%:jQ`O,5APOOQO,5?m,5?mOOQO-E=P-E=POOQ!0Lf7+'T7+'TO%:oQ`O7+)QO9uQ!0LrO7+)QO9kQ`O7+)QO@zQ`O7+)QO%:tQ`O7+)QOOQ[7+)Q7+)QOOQ[7+(p7+(pO%:yQ!0MvO7+(mO!&zQMhO7+(mO!E^Q`O7+(nOOQ[7+(n7+(nO!&zQMhO7+(nO%;TQ`O'#KbO%;`Q`O,5=lOOQO,5?i,5?iOOQO-E<{-E<{OOQ[7+(s7+(sO%<rQpO'#HZOOQ[1G3`1G3`O!&zQMhO1G3`O%[QlO1G3`O%<yQ`O1G3`O%=UQMhO1G3`O9uQ!0LrO1G3bO$%dQ`O1G3bO9`Q`O1G3bO!CUQpO1G3bO!C^QMhO1G3bO%=dQ`O'#JPO%=xQ`O,5@}O%>QQpO,5@}OOQ!0Lb1G3c1G3cOOQ[7+$V7+$VO@zQ`O7+$VO9uQ!0LrO7+$VO%>]Q`O7+$VO%[QlO1G6lO%[QlO1G6mO%>bQ!0LrO1G6lO%>lQlO1G3kO%>sQ`O1G3kO%>xQlO1G3kOOQ[7+)T7+)TO9uQ!0LrO7+)_O`QlO7+)aOOQ['#Kh'#KhOOQ['#JS'#JSO%?PQlO,5>`OOQ[,5>`,5>`O%[QlO'#HuO%?^Q`O'#HwOOQ[,5>f,5>fO9eQ`O,5>fOOQ[,5>h,5>hOOQ[7+)j7+)jOOQ[7+)p7+)pOOQ[7+)t7+)tOOQ[7+)v7+)vO%?cQpO1G5|O%?}Q?MtO1G0zO%@XQ`O1G0zOOQO1G/s1G/sO%@dQ?MtO1G/sO?YQ`O1G/sO!)[QlO'#DmOOQO,5?P,5?POOQO-E<c-E<cOOQO,5?V,5?VOOQO-E<i-E<iO!CUQpO1G/sOOQO-E<e-E<eOOQ!0Ln1G0]1G0]OOQ!0Lf7+%u7+%uO#(ZQ`O7+%uOOQ!0Lf7+&`7+&`O?YQ`O7+&`O!CUQpO7+&`OOQO7+%x7+%xO$AlQ!0MxO7+&XOOQO7+&X7+&XO%[QlO7+&XO%@nQ!0LrO7+&XO!ByQ!0LrO7+%xO!CUQpO7+%xO%@yQ!0LrO7+&XO%AXQ!0MxO7++rO%[QlO7++rO%AiQ`O7++qO%AiQ`O7++qOOQO1G4s1G4sO9eQ`O1G4sO%AqQ`O1G4sOOQS7+%}7+%}O#(ZQ`O<<LPO4UQ!fO<<LPO%BPQ`O<<LPOOQ[<<LP<<LPO!&zQMhO<<LPO%[QlO<<LPO%BXQ`O<<LPO%BdQ!0MzO,5?aO%DoQ!0MzO,5?cO%FzQ!0MzO1G2`O%I]Q!0MzO1G2sO%KhQ!0MzO1G2uO%MsQ!fO,5?QO%[QlO,5?QOOQO-E<d-E<dO%M}Q`O1G5}OOQ!0Lf<<JU<<JUO%NVQ?MtO1G0uO&!^Q?MtO1G1PO&!eQ?MtO1G1PO&$fQ?MtO1G1PO&$mQ?MtO1G1PO&&nQ?MtO1G1PO&(oQ?MtO1G1PO&(vQ?MtO1G1PO&(}Q?MtO1G1PO&+OQ?MtO1G1PO&+VQ?MtO1G1PO&+^Q!0MxO<<JfO&-UQ?MtO1G1PO&.RQ?MvO1G1PO&/UQ?MvO'#JlO&1[Q?MtO1G1cO&1iQ?MtO1G0UO&1sQMjO,5?TOOQO-E<g-E<gO!)[QlO'#FqOOQO'#KZ'#KZOOQO1G1u1G1uO&1}Q`O1G1tO&2SQ?MtO,5?[OOOW7+'h7+'hOOOO1G/Z1G/ZO&2^Q!dO1G4xOOQ!0Lh7+(Q7+(QP!&zQMhO,5?^O!,TQMhO7+(cO&2eQ`O,5?]O9eQ`O,5?]O$+YQ`O,5?]OOQO-E<o-E<oO&2sQ`O1G6bO&2sQ`O1G6bO&2{Q`O1G6bO&3WQMjO7+'zO&3hQ!dO,5?_O&3rQ`O,5?_O!&zQMhO,5?_OOQO-E<q-E<qO&3wQ!dO1G6cO&4RQ`O1G6cO&4ZQ`O1G2kO!&zQMhO1G2kOOQ!0Lb1G2i1G2iOOQ!0Lb1G2j1G2jO%4hQpO1G2iO!CUQpO1G2iOCwQ`O1G2iOOQ!0Lb1G2q1G2qO&4`QpO1G2iO&4nQ`O1G2kO$+YQ`O1G2jOCwQ`O1G2jO$$wQlO1G2kO&4vQ`O1G2jO&5jQMjO,5?aOOQ!0Lh-E<t-E<tO&6]QMjO,5?cOOQ!0Lh-E<v-E<vO!,TQMhO7++]O&6gQMjO7++]O&6qQMjO7++]OOQ!0Lh1G/c1G/cO&7OQ`O1G/cOOQ!0Lh7+'u7+'uO&7TQMjO7+'|O&7eQ!0MxO<<KXOOQ!0Lf<<KX<<KXO&8XQ`O1G0zO!&zQMhO'#IzO&8^Q`O,5@xO&:`Q!fO<<LPO!&zQMhO1G2nO&:gQ!0LrO1G2nOOQ[<<G{<<G{O!ByQ!0LrO<<G{O&:xQ!0MxO<<I{OOQ!0Lf<<I{<<I{OOQO,5?l,5?lO&;lQ`O,5?lO&;qQ`O,5?lOOQO-E=O-E=OO&<PQ`O1G6kO&<PQ`O1G6kO9kQ`O1G6kO@zQ`O<<LlOOQ[<<Ll<<LlO&<XQ`O<<LlO9uQ!0LrO<<LlO9kQ`O<<LlOOQ[<<LX<<LXO%:yQ!0MvO<<LXOOQ[<<LY<<LYO!E^Q`O<<LYO&<^QpO'#I|O&<iQ`O,5@|O!)[QlO,5@|OOQ[1G3W1G3WOOQO'#JO'#JOO9uQ!0LrO'#JOO&<qQpO,5=uOOQ[,5=u,5=uO&<xQpO'#EgO&=PQpO'#GeO&=UQ`O7+(zO&=ZQ`O7+(zOOQ[7+(z7+(zO!&zQMhO7+(zO%[QlO7+(zO&=cQ`O7+(zOOQ[7+(|7+(|O9uQ!0LrO7+(|O$%dQ`O7+(|O9`Q`O7+(|O!CUQpO7+(|O&=nQ`O,5?kOOQO-E<}-E<}OOQO'#H^'#H^O&=yQ`O1G6iO9uQ!0LrO<<GqOOQ[<<Gq<<GqO@zQ`O<<GqO&>RQ`O7+,WO&>WQ`O7+,XO%[QlO7+,WO%[QlO7+,XOOQ[7+)V7+)VO&>]Q`O7+)VO&>bQlO7+)VO&>iQ`O7+)VOOQ[<<Ly<<LyOOQ[<<L{<<L{OOQ[-E=Q-E=QOOQ[1G3z1G3zO&>nQ`O,5>aOOQ[,5>c,5>cO&>sQ`O1G4QO9eQ`O7+&fO!)[QlO7+&fOOQO7+%_7+%_O&>xQ?MtO1G6ZO?YQ`O7+%_OOQ!0Lf<<Ia<<IaOOQ!0Lf<<Iz<<IzO?YQ`O<<IzOOQO<<Is<<IsO$AlQ!0MxO<<IsO%[QlO<<IsOOQO<<Id<<IdO!ByQ!0LrO<<IdO&?SQ!0LrO<<IsO&?_Q!0MxO<= ^O&?oQ`O<= ]OOQO7+*_7+*_O9eQ`O7+*_OOQ[ANAkANAkO&?wQ!fOANAkO!&zQMhOANAkO#(ZQ`OANAkO4UQ!fOANAkO&@OQ`OANAkO%[QlOANAkO&@WQ!0MzO7+'zO&BiQ!0MzO,5?aO&DtQ!0MzO,5?cO&GPQ!0MzO7+'|O&IbQ!fO1G4lO&IlQ?MtO7+&aO&KpQ?MvO,5=XO&MwQ?MvO,5=ZO&NXQ?MvO,5=XO&NiQ?MvO,5=ZO&NyQ?MvO,59uO'#PQ?MvO,5<kO'%SQ?MvO,5<mO''hQ?MvO,5<{O')^Q?MtO7+'kO')kQ?MtO7+'mO')xQ`O,5<]OOQO7+'`7+'`OOQ!0Lh7+*d7+*dO')}QMjO<<K}OOQO1G4w1G4wO'*UQ`O1G4wO'*aQ`O1G4wO'*oQ`O7++|O'*oQ`O7++|O!&zQMhO1G4yO'*wQ!dO1G4yO'+RQ`O7++}O'+ZQ`O7+(VO'+fQ!dO7+(VOOQ!0Lb7+(T7+(TOOQ!0Lb7+(U7+(UO!CUQpO7+(TOCwQ`O7+(TO'+pQ`O7+(VO!&zQMhO7+(VO$+YQ`O7+(UO'+uQ`O7+(VOCwQ`O7+(UO'+}QMjO<<NwO!,TQMhO<<NwOOQ!0Lh7+$}7+$}O',XQ!dO,5?fOOQO-E<x-E<xO',cQ!0MvO7+(YO!&zQMhO7+(YOOQ[AN=gAN=gO9kQ`O1G5WOOQO1G5W1G5WO',sQ`O1G5WO',xQ`O7+,VO',xQ`O7+,VO9uQ!0LrOANBWO@zQ`OANBWOOQ[ANBWANBWO'-QQ`OANBWOOQ[ANAsANAsOOQ[ANAtANAtO'-VQ`O,5?hOOQO-E<z-E<zO'-bQ?MtO1G6hOOQO,5?j,5?jOOQO-E<|-E<|OOQ[1G3a1G3aO'-lQ`O,5=POOQ[<<Lf<<LfO!&zQMhO<<LfO&=UQ`O<<LfO'-qQ`O<<LfO%[QlO<<LfOOQ[<<Lh<<LhO9uQ!0LrO<<LhO$%dQ`O<<LhO9`Q`O<<LhO'-yQpO1G5VO'.UQ`O7+,TOOQ[AN=]AN=]O9uQ!0LrOAN=]OOQ[<= r<= rOOQ[<= s<= sO'.^Q`O<= rO'.cQ`O<= sOOQ[<<Lq<<LqO'.hQ`O<<LqO'.mQlO<<LqOOQ[1G3{1G3{O?YQ`O7+)lO'.tQ`O<<JQO'/PQ?MtO<<JQOOQO<<Hy<<HyOOQ!0LfAN?fAN?fOOQOAN?_AN?_O$AlQ!0MxOAN?_OOQOAN?OAN?OO%[QlOAN?_OOQO<<My<<MyOOQ[G27VG27VO!&zQMhOG27VO#(ZQ`OG27VO'/ZQ!fOG27VO4UQ!fOG27VO'/bQ`OG27VO'/jQ?MtO<<JfO'/wQ?MvO1G2`O'1mQ?MvO,5?aO'3pQ?MvO,5?cO'5sQ?MvO1G2sO'7vQ?MvO1G2uO'9yQ?MtO<<KXO':WQ?MtO<<I{OOQO1G1w1G1wO!,TQMhOANAiOOQO7+*c7+*cO':eQ`O7+*cO':pQ`O<= hO':xQ!dO7+*eOOQ!0Lb<<Kq<<KqO$+YQ`O<<KqOCwQ`O<<KqO';SQ`O<<KqO!&zQMhO<<KqOOQ!0Lb<<Ko<<KoO!CUQpO<<KoO';_Q!dO<<KqOOQ!0Lb<<Kp<<KpO';iQ`O<<KqO!&zQMhO<<KqO$+YQ`O<<KpO';nQMjOANDcO';xQ!0MvO<<KtOOQO7+*r7+*rO9kQ`O7+*rO'<YQ`O<= qOOQ[G27rG27rO9uQ!0LrOG27rO@zQ`OG27rO!)[QlO1G5SO'<bQ`O7+,SO'<jQ`O1G2kO&=UQ`OANBQOOQ[ANBQANBQO!&zQMhOANBQO'<oQ`OANBQOOQ[ANBSANBSO9uQ!0LrOANBSO$%dQ`OANBSOOQO'#H_'#H_OOQO7+*q7+*qOOQ[G22wG22wOOQ[ANE^ANE^OOQ[ANE_ANE_OOQ[ANB]ANB]O'<wQ`OANB]OOQ[<<MW<<MWO!)[QlOAN?lOOQOG24yG24yO$AlQ!0MxOG24yO#(ZQ`OLD,qOOQ[LD,qLD,qO!&zQMhOLD,qO'<|Q!fOLD,qO'=TQ?MvO7+'zO'>yQ?MvO,5?aO'@|Q?MvO,5?cO'CPQ?MvO7+'|O'DuQMjOG27TOOQO<<M}<<M}OOQ!0LbANA]ANA]O$+YQ`OANA]OCwQ`OANA]O'EVQ!dOANA]OOQ!0LbANAZANAZO'E^Q`OANA]O!&zQMhOANA]O'EiQ!dOANA]OOQ!0LbANA[ANA[OOQO<<N^<<N^OOQ[LD-^LD-^O9uQ!0LrOLD-^O'EsQ?MtO7+*nOOQO'#Gf'#GfOOQ[G27lG27lO&=UQ`OG27lO!&zQMhOG27lOOQ[G27nG27nO9uQ!0LrOG27nOOQ[G27wG27wO'E}Q?MtOG25WOOQOLD*eLD*eOOQ[!$(!]!$(!]O#(ZQ`O!$(!]O!&zQMhO!$(!]O'FXQ!0MzOG27TOOQ!0LbG26wG26wO$+YQ`OG26wO'HjQ`OG26wOCwQ`OG26wO'HuQ!dOG26wO!&zQMhOG26wOOQ[!$(!x!$(!xOOQ[LD-WLD-WO&=UQ`OLD-WOOQ[LD-YLD-YOOQ[!)9Ew!)9EwO#(ZQ`O!)9EwOOQ!0LbLD,cLD,cO$+YQ`OLD,cOCwQ`OLD,cO'H|Q`OLD,cO'IXQ!dOLD,cOOQ[!$(!r!$(!rOOQ[!.K;c!.K;cO'I`Q?MvOG27TOOQ!0Lb!$( }!$( }O$+YQ`O!$( }OCwQ`O!$( }O'KUQ`O!$( }OOQ!0Lb!)9Ei!)9EiO$+YQ`O!)9EiOCwQ`O!)9EiOOQ!0Lb!.K;T!.K;TO$+YQ`O!.K;TOOQ!0Lb!4/0o!4/0oO!)[QlO'#DzO1PQ`O'#EXO'KaQ!fO'#JrO'KhQ!L^O'#DvO'KoQlO'#EOO'KvQ!fO'#CiO'N^Q!fO'#CiO!)[QlO'#EQO'NnQlO,5;ZO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO'#IpO(!qQ`O,5<iO!)[QlO,5;eO(!yQMhO,5;eO($dQMhO,5;eO!)[QlO,5;wO!&zQMhO'#GmO(!yQMhO'#GmO!&zQMhO'#GoO(!yQMhO'#GoO1SQ`O'#DZO1SQ`O'#DZO!&zQMhO'#GPO(!yQMhO'#GPO!&zQMhO'#GRO(!yQMhO'#GRO!&zQMhO'#GaO(!yQMhO'#GaO!)[QlO,5:jO($kQpO'#D_O($uQpO'#JvO!)[QlO,5@oO'NnQlO1G0uO(%PQ?MtO'#CiO!)[QlO1G2PO!&zQMhO'#IuO(!yQMhO'#IuO!&zQMhO'#IwO(!yQMhO'#IwO(%ZQ!dO'#CrO!&zQMhO,5<tO(!yQMhO,5<tO'NnQlO1G2RO!)[QlO7+&zO!&zQMhO1G2`O(!yQMhO1G2`O!&zQMhO'#IuO(!yQMhO'#IuO!&zQMhO'#IwO(!yQMhO'#IwO!&zQMhO1G2bO(!yQMhO1G2bO'NnQlO7+'mO'NnQlO7+&aO!&zQMhOANAiO(!yQMhOANAiO(%nQ`O'#EoO(%sQ`O'#EoO(%{Q`O'#F]O(&QQ`O'#EyO(&VQ`O'#KTO(&bQ`O'#KRO(&mQ`O,5;ZO(&rQMjO,5<eO(&yQ`O'#GYO('OQ`O'#GYO('TQ`O,5<eO(']Q`O,5<gO('eQ`O,5;ZO('mQ?MtO1G1`O('tQ`O,5<tO('yQ`O,5<tO((OQ`O,5<vO((TQ`O,5<vO((YQ`O1G2RO((_Q`O1G0uO((dQMjO<<K}O((kQMjO<<K}O((rQMhO'#F|O9`Q`O'#F{OAuQ`O'#EnO!)[QlO,5;tO!3oQ`O'#GYO!3oQ`O'#GYO!3oQ`O'#G[O!3oQ`O'#G[O!,TQMhO7+(cO!,TQMhO7+(cO%.zQ!dO1G2wO%.zQ!dO1G2wO!&zQMhO,5=]O!&zQMhO,5=]",stateData:"()x~O'|OS'}OSTOS(ORQ~OPYOQYOSfOY!VOaqOdzOeyOl!POpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_XO!iuO!lZO!oYO!pYO!qYO!svO!uwO!xxO!|]O$W|O$niO%h}O%j!QO%l!OO%m!OO%n!OO%q!RO%s!SO%v!TO%w!TO%y!UO&W!WO&^!XO&`!YO&b!ZO&d![O&g!]O&m!^O&s!_O&u!`O&w!aO&y!bO&{!cO(TSO(VTO(YUO(aVO(o[O~OWtO~P`OPYOQYOSfOd!jOe!iOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_!eO!iuO!lZO!oYO!pYO!qYO!svO!u!gO!x!hO$W!kO$niO(T!dO(VTO(YUO(aVO(o[O~Oa!wOs!nO!S!oO!b!yO!c!vO!d!vO!|<VO#T!pO#U!pO#V!xO#W!pO#X!pO#[!zO#]!zO(U!lO(VTO(YUO(e!mO(o!sO~O(O!{O~OP]XR]X[]Xa]Xj]Xr]X!Q]X!S]X!]]X!l]X!p]X#R]X#S]X#`]X#kfX#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#v]X#x]X#z]X#{]X$Q]X'z]X(a]X(r]X(y]X(z]X~O!g%RX~P(qO_!}O(V#PO(W!}O(X#PO~O_#QO(X#PO(Y#PO(Z#QO~Ox#SO!U#TO(b#TO(c#VO~OPYOQYOSfOd!jOe!iOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_!eO!iuO!lZO!oYO!pYO!qYO!svO!u!gO!x!hO$W!kO$niO(T<ZO(VTO(YUO(aVO(o[O~O![#ZO!]#WO!Y(hP!Y(vP~P+}O!^#cO~P`OPYOQYOSfOd!jOe!iOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_!eO!iuO!lZO!oYO!pYO!qYO!svO!u!gO!x!hO$W!kO$niO(VTO(YUO(aVO(o[O~Op#mO![#iO!|]O#i#lO#j#iO(T<[O!k(sP~P.iO!l#oO(T#nO~O!x#sO!|]O%h#tO~O#k#uO~O!g#vO#k#uO~OP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!]$_O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO#x$UO#z$WO#{$XO(aVO(r$YO(y#|O(z#}O~Oa(fX'z(fX'w(fX!k(fX!Y(fX!_(fX%i(fX!g(fX~P1qO#S$dO#`$eO$Q$eOP(gXR(gX[(gXj(gXr(gX!Q(gX!S(gX!](gX!l(gX!p(gX#R(gX#n(gX#o(gX#p(gX#q(gX#r(gX#s(gX#t(gX#u(gX#v(gX#x(gX#z(gX#{(gX(a(gX(r(gX(y(gX(z(gX!_(gX%i(gX~Oa(gX'z(gX'w(gX!Y(gX!k(gXv(gX!g(gX~P4UO#`$eO~O$]$hO$_$gO$f$mO~OSfO!_$nO$i$oO$k$qO~Oh%VOj%dOk%dOp%WOr%XOs$tOt$tOz%YO|%ZO!O%]O!S${O!_$|O!i%bO!l$xO#j%cO$W%`O$t%^O$v%_O$y%aO(T$sO(VTO(YUO(a$uO(y$}O(z%POg(^P~Ol%[O~P7eO!l%eO~O!S%hO!_%iO(T%gO~O!g%mO~Oa%nO'z%nO~O!Q%rO~P%[O(U!lO~P%[O%n%vO~P%[Oh%VO!l%eO(T%gO(U!lO~Oe%}O!l%eO(T%gO~Oj$RO~O!_&PO(T%gO(U!lO(VTO(YUO`)WP~O!Q&SO!l&RO%j&VO&T&WO~P;SO!x#sO~O%s&YO!S)SX!_)SX(T)SX~O(T&ZO~Ol!PO!u&`O%j!QO%l!OO%m!OO%n!OO%q!RO%s!SO%v!TO%w!TO~Od&eOe&dO!x&bO%h&cO%{&aO~P<bOd&hOeyOl!PO!_&gO!u&`O!xxO!|]O%h}O%l!OO%m!OO%n!OO%q!RO%s!SO%v!TO%w!TO%y!UO~Ob&kO#`&nO%j&iO(U!lO~P=gO!l&oO!u&sO~O!l#oO~O!_XO~Oa%nO'x&{O'z%nO~Oa%nO'x'OO'z%nO~Oa%nO'x'QO'z%nO~O'w]X!Y]Xv]X!k]X&[]X!_]X%i]X!g]X~P(qO!b'_O!c'WO!d'WO(U!lO(VTO(YUO~Os'UO!S'TO!['XO(e'SO!^(iP!^(xP~P@nOn'bO!_'`O(T%gO~Oe'gO!l%eO(T%gO~O!Q&SO!l&RO~Os!nO!S!oO!|<VO#T!pO#U!pO#W!pO#X!pO(U!lO(VTO(YUO(e!mO(o!sO~O!b'mO!c'lO!d'lO#V!pO#['nO#]'nO~PBYOa%nOh%VO!g#vO!l%eO'z%nO(r'pO~O!p'tO#`'rO~PChOs!nO!S!oO(VTO(YUO(e!mO(o!sO~O!_XOs(mX!S(mX!b(mX!c(mX!d(mX!|(mX#T(mX#U(mX#V(mX#W(mX#X(mX#[(mX#](mX(U(mX(V(mX(Y(mX(e(mX(o(mX~O!c'lO!d'lO(U!lO~PDWO(P'xO(Q'xO(R'zO~O_!}O(V'|O(W!}O(X'|O~O_#QO(X'|O(Y'|O(Z#QO~Ov(OO~P%[Ox#SO!U#TO(b#TO(c(RO~O![(TO!Y'WX!Y'^X!]'WX!]'^X~P+}O!](VO!Y(hX~OP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!](VO!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO#x$UO#z$WO#{$XO(aVO(r$YO(y#|O(z#}O~O!Y(hX~PHRO!Y([O~O!Y(uX!](uX!g(uX!k(uX(r(uX~O#`(uX#k#dX!^(uX~PJUO#`(]O!Y(wX!](wX~O!](^O!Y(vX~O!Y(aO~O#`$eO~PJUO!^(bO~P`OR#zO!Q#yO!S#{O!l#xO(aVOP!na[!naj!nar!na!]!na!p!na#R!na#n!na#o!na#p!na#q!na#r!na#s!na#t!na#u!na#v!na#x!na#z!na#{!na(r!na(y!na(z!na~Oa!na'z!na'w!na!Y!na!k!nav!na!_!na%i!na!g!na~PKlO!k(cO~O!g#vO#`(dO(r'pO!](tXa(tX'z(tX~O!k(tX~PNXO!S%hO!_%iO!|]O#i(iO#j(hO(T%gO~O!](jO!k(sX~O!k(lO~O!S%hO!_%iO#j(hO(T%gO~OP(gXR(gX[(gXj(gXr(gX!Q(gX!S(gX!](gX!l(gX!p(gX#R(gX#n(gX#o(gX#p(gX#q(gX#r(gX#s(gX#t(gX#u(gX#v(gX#x(gX#z(gX#{(gX(a(gX(r(gX(y(gX(z(gX~O!g#vO!k(gX~P! uOR(nO!Q(mO!l#xO#S$dO!|!{a!S!{a~O!x!{a%h!{a!_!{a#i!{a#j!{a(T!{a~P!#vO!x(rO~OPYOQYOSfOd!jOe!iOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_XO!iuO!lZO!oYO!pYO!qYO!svO!u!gO!x!hO$W!kO$niO(T!dO(VTO(YUO(aVO(o[O~Oh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O<sO!S${O!_$|O!i>VO!l$xO#j<yO$W%`O$t<uO$v<wO$y%aO(T(vO(VTO(YUO(a$uO(y$}O(z%PO~O#k(xO~O![(zO!k(kP~P%[O(e(|O(o[O~O!S)OO!l#xO(e(|O(o[O~OP<UOQ<UOSfOd>ROe!iOpkOr<UOskOtkOzkO|<UO!O<UO!SWO!WkO!XkO!_!eO!i<XO!lZO!o<UO!p<UO!q<UO!s<YO!u<]O!x!hO$W!kO$n>PO(T)]O(VTO(YUO(aVO(o[O~O!]$_Oa$qa'z$qa'w$qa!k$qa!Y$qa!_$qa%i$qa!g$qa~Ol)dO~P!&zOh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O%]O!S${O!_$|O!i%bO!l$xO#j%cO$W%`O$t%^O$v%_O$y%aO(T(vO(VTO(YUO(a$uO(y$}O(z%PO~Og(pP~P!,TO!Q)iO!g)hO!_$^X$Z$^X$]$^X$_$^X$f$^X~O!g)hO!_({X$Z({X$]({X$_({X$f({X~O!Q)iO~P!.^O!Q)iO!_({X$Z({X$]({X$_({X$f({X~O!_)kO$Z)oO$])jO$_)jO$f)pO~O![)sO~P!)[O$]$hO$_$gO$f)wO~On$zX!Q$zX#S$zX'y$zX(y$zX(z$zX~OgmXg$zXnmX!]mX#`mX~P!0SOx)yO(b)zO(c)|O~On*VO!Q*OO'y*PO(y$}O(z%PO~Og)}O~P!1WOg*WO~Oh%VOr%XOs$tOt$tOz%YO|%ZO!O<sO!S*YO!_*ZO!i>VO!l$xO#j<yO$W%`O$t<uO$v<wO$y%aO(VTO(YUO(a$uO(y$}O(z%PO~Op*`O![*^O(T*XO!k)OP~P!1uO#k*aO~O!l*bO~Oh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O<sO!S${O!_$|O!i>VO!l$xO#j<yO$W%`O$t<uO$v<wO$y%aO(T*dO(VTO(YUO(a$uO(y$}O(z%PO~O![*gO!Y)PP~P!3tOr*sOs!nO!S*iO!b*qO!c*kO!d*kO!l*bO#[*rO%`*mO(U!lO(VTO(YUO(e!mO~O!^*pO~P!5iO#S$dOn(`X!Q(`X'y(`X(y(`X(z(`X!](`X#`(`X~Og(`X$O(`X~P!6kOn*xO#`*wOg(_X!](_X~O!]*yOg(^X~Oj%dOk%dOl%dO(T&ZOg(^P~Os*|O~Og)}O(T&ZO~O!l+SO~O(T(vO~Op+WO!S%hO![#iO!_%iO!|]O#i#lO#j#iO(T%gO!k(sP~O!g#vO#k+XO~O!S%hO![+ZO!](^O!_%iO(T%gO!Y(vP~Os'[O!S+]O![+[O(VTO(YUO(e(|O~O!^(xP~P!9|O!]+^Oa)TX'z)TX~OP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO#x$UO#z$WO#{$XO(aVO(r$YO(y#|O(z#}O~Oa!ja!]!ja'z!ja'w!ja!Y!ja!k!jav!ja!_!ja%i!ja!g!ja~P!:tOR#zO!Q#yO!S#{O!l#xO(aVOP!ra[!raj!rar!ra!]!ra!p!ra#R!ra#n!ra#o!ra#p!ra#q!ra#r!ra#s!ra#t!ra#u!ra#v!ra#x!ra#z!ra#{!ra(r!ra(y!ra(z!ra~Oa!ra'z!ra'w!ra!Y!ra!k!rav!ra!_!ra%i!ra!g!ra~P!=[OR#zO!Q#yO!S#{O!l#xO(aVOP!ta[!taj!tar!ta!]!ta!p!ta#R!ta#n!ta#o!ta#p!ta#q!ta#r!ta#s!ta#t!ta#u!ta#v!ta#x!ta#z!ta#{!ta(r!ta(y!ta(z!ta~Oa!ta'z!ta'w!ta!Y!ta!k!tav!ta!_!ta%i!ta!g!ta~P!?rOh%VOn+gO!_'`O%i+fO~O!g+iOa(]X!_(]X'z(]X!](]X~Oa%nO!_XO'z%nO~Oh%VO!l%eO~Oh%VO!l%eO(T%gO~O!g#vO#k(xO~Ob+tO%j+uO(T+qO(VTO(YUO!^)XP~O!]+vO`)WX~O[+zO~O`+{O~O!_&PO(T%gO(U!lO`)WP~O%j,OO~P;SOh%VO#`,SO~Oh%VOn,VO!_$|O~O!_,XO~O!Q,ZO!_XO~O%n%vO~O!x,`O~Oe,eO~Ob,fO(T#nO(VTO(YUO!^)VP~Oe%}O~O%j!QO(T&ZO~P=gO[,kO`,jO~OPYOQYOSfOdzOeyOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!iuO!lZO!oYO!pYO!qYO!svO!xxO!|]O$niO%h}O(VTO(YUO(aVO(o[O~O!_!eO!u!gO$W!kO(T!dO~P!FyO`,jOa%nO'z%nO~OPYOQYOSfOd!jOe!iOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_!eO!iuO!lZO!oYO!pYO!qYO!svO!x!hO$W!kO$niO(T!dO(VTO(YUO(aVO(o[O~Oa,pOl!OO!uwO%l!OO%m!OO%n!OO~P!IcO!l&oO~O&^,vO~O!_,xO~O&o,zO&q,{OP&laQ&laS&laY&laa&lad&lae&lal&lap&lar&las&lat&laz&la|&la!O&la!S&la!W&la!X&la!_&la!i&la!l&la!o&la!p&la!q&la!s&la!u&la!x&la!|&la$W&la$n&la%h&la%j&la%l&la%m&la%n&la%q&la%s&la%v&la%w&la%y&la&W&la&^&la&`&la&b&la&d&la&g&la&m&la&s&la&u&la&w&la&y&la&{&la'w&la(T&la(V&la(Y&la(a&la(o&la!^&la&e&lab&la&j&la~O(T-QO~Oh!eX!]!RX!^!RX!g!RX!g!eX!l!eX#`!RX~O!]!eX!^!eX~P#!iO!g-VO#`-UOh(jX!]#hX!^#hX!g(jX!l(jX~O!](jX!^(jX~P##[Oh%VO!g-XO!l%eO!]!aX!^!aX~Os!nO!S!oO(VTO(YUO(e!mO~OP<UOQ<UOSfOd>ROe!iOpkOr<UOskOtkOzkO|<UO!O<UO!SWO!WkO!XkO!_!eO!i<XO!lZO!o<UO!p<UO!q<UO!s<YO!u<]O!x!hO$W!kO$n>PO(VTO(YUO(aVO(o[O~O(T=QO~P#$qO!]-]O!^(iX~O!^-_O~O!g-VO#`-UO!]#hX!^#hX~O!]-`O!^(xX~O!^-bO~O!c-cO!d-cO(U!lO~P#$`O!^-fO~P'_On-iO!_'`O~O!Y-nO~Os!{a!b!{a!c!{a!d!{a#T!{a#U!{a#V!{a#W!{a#X!{a#[!{a#]!{a(U!{a(V!{a(Y!{a(e!{a(o!{a~P!#vO!p-sO#`-qO~PChO!c-uO!d-uO(U!lO~PDWOa%nO#`-qO'z%nO~Oa%nO!g#vO#`-qO'z%nO~Oa%nO!g#vO!p-sO#`-qO'z%nO(r'pO~O(P'xO(Q'xO(R-zO~Ov-{O~O!Y'Wa!]'Wa~P!:tO![.PO!Y'WX!]'WX~P%[O!](VO!Y(ha~O!Y(ha~PHRO!](^O!Y(va~O!S%hO![.TO!_%iO(T%gO!Y'^X!]'^X~O#`.VO!](ta!k(taa(ta'z(ta~O!g#vO~P#,wO!](jO!k(sa~O!S%hO!_%iO#j.ZO(T%gO~Op.`O!S%hO![.]O!_%iO!|]O#i._O#j.]O(T%gO!]'aX!k'aX~OR.dO!l#xO~Oh%VOn.gO!_'`O%i.fO~Oa#ci!]#ci'z#ci'w#ci!Y#ci!k#civ#ci!_#ci%i#ci!g#ci~P!:tOn>]O!Q*OO'y*PO(y$}O(z%PO~O#k#_aa#_a#`#_a'z#_a!]#_a!k#_a!_#_a!Y#_a~P#/sO#k(`XP(`XR(`X[(`Xa(`Xj(`Xr(`X!S(`X!l(`X!p(`X#R(`X#n(`X#o(`X#p(`X#q(`X#r(`X#s(`X#t(`X#u(`X#v(`X#x(`X#z(`X#{(`X'z(`X(a(`X(r(`X!k(`X!Y(`X'w(`Xv(`X!_(`X%i(`X!g(`X~P!6kO!].tO!k(kX~P!:tO!k.wO~O!Y.yO~OP$[OR#zO!Q#yO!S#{O!l#xO!p$[O(aVO[#mia#mij#mir#mi!]#mi#R#mi#o#mi#p#mi#q#mi#r#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi'z#mi(r#mi(y#mi(z#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#n#mi~P#3cO#n$OO~P#3cOP$[OR#zOr$aO!Q#yO!S#{O!l#xO!p$[O#n$OO#o$PO#p$PO#q$PO(aVO[#mia#mij#mi!]#mi#R#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi'z#mi(r#mi(y#mi(z#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#r#mi~P#6QO#r$QO~P#6QOP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO(aVOa#mi!]#mi#x#mi#z#mi#{#mi'z#mi(r#mi(y#mi(z#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#v#mi~P#8oOP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO(aVO(z#}Oa#mi!]#mi#z#mi#{#mi'z#mi(r#mi(y#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#x$UO~P#;VO#x#mi~P#;VO#v$SO~P#8oOP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO#x$UO(aVO(y#|O(z#}Oa#mi!]#mi#{#mi'z#mi(r#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#z#mi~P#={O#z$WO~P#={OP]XR]X[]Xj]Xr]X!Q]X!S]X!l]X!p]X#R]X#S]X#`]X#kfX#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#v]X#x]X#z]X#{]X$Q]X(a]X(r]X(y]X(z]X!]]X!^]X~O$O]X~P#@jOP$[OR#zO[<mOj<bOr<kO!Q#yO!S#{O!l#xO!p$[O#R<bO#n<_O#o<`O#p<`O#q<`O#r<aO#s<bO#t<bO#u<lO#v<cO#x<eO#z<gO#{<hO(aVO(r$YO(y#|O(z#}O~O$O.{O~P#BwO#S$dO#`<nO$Q<nO$O(gX!^(gX~P! uOa'da!]'da'z'da'w'da!k'da!Y'dav'da!_'da%i'da!g'da~P!:tO[#mia#mij#mir#mi!]#mi#R#mi#r#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi'z#mi(r#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~OP$[OR#zO!Q#yO!S#{O!l#xO!p$[O#n$OO#o$PO#p$PO#q$PO(aVO(y#mi(z#mi~P#EyOn>]O!Q*OO'y*PO(y$}O(z%POP#miR#mi!S#mi!l#mi!p#mi#n#mi#o#mi#p#mi#q#mi(a#mi~P#EyO!]/POg(pX~P!1WOg/RO~Oa$Pi!]$Pi'z$Pi'w$Pi!Y$Pi!k$Piv$Pi!_$Pi%i$Pi!g$Pi~P!:tO$]/SO$_/SO~O$]/TO$_/TO~O!g)hO#`/UO!_$cX$Z$cX$]$cX$_$cX$f$cX~O![/VO~O!_)kO$Z/XO$])jO$_)jO$f/YO~O!]<iO!^(fX~P#BwO!^/ZO~O!g)hO$f({X~O$f/]O~Ov/^O~P!&zOx)yO(b)zO(c/aO~O!S/dO~O(y$}On%aa!Q%aa'y%aa(z%aa!]%aa#`%aa~Og%aa$O%aa~P#L{O(z%POn%ca!Q%ca'y%ca(y%ca!]%ca#`%ca~Og%ca$O%ca~P#MnO!]fX!gfX!kfX!k$zX(rfX~P!0SOp%WO![/mO!](^O(T/lO!Y(vP!Y)PP~P!1uOr*sO!b*qO!c*kO!d*kO!l*bO#[*rO%`*mO(U!lO(VTO(YUO~Os<}O!S/nO![+[O!^*pO(e<|O!^(xP~P$ [O!k/oO~P#/sO!]/pO!g#vO(r'pO!k)OX~O!k/uO~OnoX!QoX'yoX(yoX(zoX~O!g#vO!koX~P$#OOp/wO!S%hO![*^O!_%iO(T%gO!k)OP~O#k/xO~O!Y$zX!]$zX!g%RX~P!0SO!]/yO!Y)PX~P#/sO!g/{O~O!Y/}O~OpkO(T0OO~P.iOh%VOr0TO!g#vO!l%eO(r'pO~O!g+iO~Oa%nO!]0XO'z%nO~O!^0ZO~P!5iO!c0[O!d0[O(U!lO~P#$`Os!nO!S0]O(VTO(YUO(e!mO~O#[0_O~Og%aa!]%aa#`%aa$O%aa~P!1WOg%ca!]%ca#`%ca$O%ca~P!1WOj%dOk%dOl%dO(T&ZOg'mX!]'mX~O!]*yOg(^a~Og0hO~On0jO#`0iOg(_a!](_a~OR0kO!Q0kO!S0lO#S$dOn}a'y}a(y}a(z}a!]}a#`}a~Og}a$O}a~P$(cO!Q*OO'y*POn$sa(y$sa(z$sa!]$sa#`$sa~Og$sa$O$sa~P$)_O!Q*OO'y*POn$ua(y$ua(z$ua!]$ua#`$ua~Og$ua$O$ua~P$*QO#k0oO~Og%Ta!]%Ta#`%Ta$O%Ta~P!1WO!g#vO~O#k0rO~O!]+^Oa)Ta'z)Ta~OR#zO!Q#yO!S#{O!l#xO(aVOP!ri[!rij!rir!ri!]!ri!p!ri#R!ri#n!ri#o!ri#p!ri#q!ri#r!ri#s!ri#t!ri#u!ri#v!ri#x!ri#z!ri#{!ri(r!ri(y!ri(z!ri~Oa!ri'z!ri'w!ri!Y!ri!k!riv!ri!_!ri%i!ri!g!ri~P$+oOh%VOr%XOs$tOt$tOz%YO|%ZO!O<sO!S${O!_$|O!i>VO!l$xO#j<yO$W%`O$t<uO$v<wO$y%aO(VTO(YUO(a$uO(y$}O(z%PO~Op0{O%]0|O(T0zO~P$.VO!g+iOa(]a!_(]a'z(]a!](]a~O#k1SO~O[]X!]fX!^fX~O!]1TO!^)XX~O!^1VO~O[1WO~Ob1YO(T+qO(VTO(YUO~O!_&PO(T%gO`'uX!]'uX~O!]+vO`)Wa~O!k1]O~P!:tO[1`O~O`1aO~O#`1fO~On1iO!_$|O~O(e(|O!^)UP~Oh%VOn1rO!_1oO%i1qO~O[1|O!]1zO!^)VX~O!^1}O~O`2POa%nO'z%nO~O(T#nO(VTO(YUO~O#S$dO#`$eO$Q$eOP(gXR(gX[(gXr(gX!Q(gX!S(gX!](gX!l(gX!p(gX#R(gX#n(gX#o(gX#p(gX#q(gX#r(gX#s(gX#t(gX#u(gX#v(gX#x(gX#z(gX#{(gX(a(gX(r(gX(y(gX(z(gX~Oj2SO&[2TOa(gX~P$3pOj2SO#`$eO&[2TO~Oa2VO~P%[Oa2XO~O&e2[OP&ciQ&ciS&ciY&cia&cid&cie&cil&cip&cir&cis&cit&ciz&ci|&ci!O&ci!S&ci!W&ci!X&ci!_&ci!i&ci!l&ci!o&ci!p&ci!q&ci!s&ci!u&ci!x&ci!|&ci$W&ci$n&ci%h&ci%j&ci%l&ci%m&ci%n&ci%q&ci%s&ci%v&ci%w&ci%y&ci&W&ci&^&ci&`&ci&b&ci&d&ci&g&ci&m&ci&s&ci&u&ci&w&ci&y&ci&{&ci'w&ci(T&ci(V&ci(Y&ci(a&ci(o&ci!^&cib&ci&j&ci~Ob2bO!^2`O&j2aO~P`O!_XO!l2dO~O&q,{OP&liQ&liS&liY&lia&lid&lie&lil&lip&lir&lis&lit&liz&li|&li!O&li!S&li!W&li!X&li!_&li!i&li!l&li!o&li!p&li!q&li!s&li!u&li!x&li!|&li$W&li$n&li%h&li%j&li%l&li%m&li%n&li%q&li%s&li%v&li%w&li%y&li&W&li&^&li&`&li&b&li&d&li&g&li&m&li&s&li&u&li&w&li&y&li&{&li'w&li(T&li(V&li(Y&li(a&li(o&li!^&li&e&lib&li&j&li~O!Y2jO~O!]!aa!^!aa~P#BwOs!nO!S!oO![2pO(e!mO!]'XX!^'XX~P@nO!]-]O!^(ia~O!]'_X!^'_X~P!9|O!]-`O!^(xa~O!^2wO~P'_Oa%nO#`3QO'z%nO~Oa%nO!g#vO#`3QO'z%nO~Oa%nO!g#vO!p3UO#`3QO'z%nO(r'pO~Oa%nO'z%nO~P!:tO!]$_Ov$qa~O!Y'Wi!]'Wi~P!:tO!](VO!Y(hi~O!](^O!Y(vi~O!Y(wi!](wi~P!:tO!](ti!k(tia(ti'z(ti~P!:tO#`3WO!](ti!k(tia(ti'z(ti~O!](jO!k(si~O!S%hO!_%iO!|]O#i3]O#j3[O(T%gO~O!S%hO!_%iO#j3[O(T%gO~On3dO!_'`O%i3cO~Oh%VOn3dO!_'`O%i3cO~O#k%aaP%aaR%aa[%aaa%aaj%aar%aa!S%aa!l%aa!p%aa#R%aa#n%aa#o%aa#p%aa#q%aa#r%aa#s%aa#t%aa#u%aa#v%aa#x%aa#z%aa#{%aa'z%aa(a%aa(r%aa!k%aa!Y%aa'w%aav%aa!_%aa%i%aa!g%aa~P#L{O#k%caP%caR%ca[%caa%caj%car%ca!S%ca!l%ca!p%ca#R%ca#n%ca#o%ca#p%ca#q%ca#r%ca#s%ca#t%ca#u%ca#v%ca#x%ca#z%ca#{%ca'z%ca(a%ca(r%ca!k%ca!Y%ca'w%cav%ca!_%ca%i%ca!g%ca~P#MnO#k%aaP%aaR%aa[%aaa%aaj%aar%aa!S%aa!]%aa!l%aa!p%aa#R%aa#n%aa#o%aa#p%aa#q%aa#r%aa#s%aa#t%aa#u%aa#v%aa#x%aa#z%aa#{%aa'z%aa(a%aa(r%aa!k%aa!Y%aa'w%aa#`%aav%aa!_%aa%i%aa!g%aa~P#/sO#k%caP%caR%ca[%caa%caj%car%ca!S%ca!]%ca!l%ca!p%ca#R%ca#n%ca#o%ca#p%ca#q%ca#r%ca#s%ca#t%ca#u%ca#v%ca#x%ca#z%ca#{%ca'z%ca(a%ca(r%ca!k%ca!Y%ca'w%ca#`%cav%ca!_%ca%i%ca!g%ca~P#/sO#k}aP}a[}aa}aj}ar}a!l}a!p}a#R}a#n}a#o}a#p}a#q}a#r}a#s}a#t}a#u}a#v}a#x}a#z}a#{}a'z}a(a}a(r}a!k}a!Y}a'w}av}a!_}a%i}a!g}a~P$(cO#k$saP$saR$sa[$saa$saj$sar$sa!S$sa!l$sa!p$sa#R$sa#n$sa#o$sa#p$sa#q$sa#r$sa#s$sa#t$sa#u$sa#v$sa#x$sa#z$sa#{$sa'z$sa(a$sa(r$sa!k$sa!Y$sa'w$sav$sa!_$sa%i$sa!g$sa~P$)_O#k$uaP$uaR$ua[$uaa$uaj$uar$ua!S$ua!l$ua!p$ua#R$ua#n$ua#o$ua#p$ua#q$ua#r$ua#s$ua#t$ua#u$ua#v$ua#x$ua#z$ua#{$ua'z$ua(a$ua(r$ua!k$ua!Y$ua'w$uav$ua!_$ua%i$ua!g$ua~P$*QO#k%TaP%TaR%Ta[%Taa%Taj%Tar%Ta!S%Ta!]%Ta!l%Ta!p%Ta#R%Ta#n%Ta#o%Ta#p%Ta#q%Ta#r%Ta#s%Ta#t%Ta#u%Ta#v%Ta#x%Ta#z%Ta#{%Ta'z%Ta(a%Ta(r%Ta!k%Ta!Y%Ta'w%Ta#`%Tav%Ta!_%Ta%i%Ta!g%Ta~P#/sOa#cq!]#cq'z#cq'w#cq!Y#cq!k#cqv#cq!_#cq%i#cq!g#cq~P!:tO![3lO!]'YX!k'YX~P%[O!].tO!k(ka~O!].tO!k(ka~P!:tO!Y3oO~O$O!na!^!na~PKlO$O!ja!]!ja!^!ja~P#BwO$O!ra!^!ra~P!=[O$O!ta!^!ta~P!?rOg']X!]']X~P!,TO!]/POg(pa~OSfO!_4TO$d4UO~O!^4YO~Ov4ZO~P#/sOa$mq!]$mq'z$mq'w$mq!Y$mq!k$mqv$mq!_$mq%i$mq!g$mq~P!:tO!Y4]O~P!&zO!S4^O~O!Q*OO'y*PO(z%POn'ia(y'ia!]'ia#`'ia~Og'ia$O'ia~P%-fO!Q*OO'y*POn'ka(y'ka(z'ka!]'ka#`'ka~Og'ka$O'ka~P%.XO(r$YO~P#/sO!YfX!Y$zX!]fX!]$zX!g%RX#`fX~P!0SOp%WO(T=WO~P!1uOp4bO!S%hO![4aO!_%iO(T%gO!]'eX!k'eX~O!]/pO!k)Oa~O!]/pO!g#vO!k)Oa~O!]/pO!g#vO(r'pO!k)Oa~Og$|i!]$|i#`$|i$O$|i~P!1WO![4jO!Y'gX!]'gX~P!3tO!]/yO!Y)Pa~O!]/yO!Y)Pa~P#/sOP]XR]X[]Xj]Xr]X!Q]X!S]X!Y]X!]]X!l]X!p]X#R]X#S]X#`]X#kfX#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#v]X#x]X#z]X#{]X$Q]X(a]X(r]X(y]X(z]X~Oj%YX!g%YX~P%2OOj4oO!g#vO~Oh%VO!g#vO!l%eO~Oh%VOr4tO!l%eO(r'pO~Or4yO!g#vO(r'pO~Os!nO!S4zO(VTO(YUO(e!mO~O(y$}On%ai!Q%ai'y%ai(z%ai!]%ai#`%ai~Og%ai$O%ai~P%5oO(z%POn%ci!Q%ci'y%ci(y%ci!]%ci#`%ci~Og%ci$O%ci~P%6bOg(_i!](_i~P!1WO#`5QOg(_i!](_i~P!1WO!k5VO~Oa$oq!]$oq'z$oq'w$oq!Y$oq!k$oqv$oq!_$oq%i$oq!g$oq~P!:tO!Y5ZO~O!]5[O!_)QX~P#/sOa$zX!_$zX%^]X'z$zX!]$zX~P!0SO%^5_OaoX!_oX'zoX!]oX~P$#OOp5`O(T#nO~O%^5_O~Ob5fO%j5gO(T+qO(VTO(YUO!]'tX!^'tX~O!]1TO!^)Xa~O[5kO~O`5lO~O[5pO~Oa%nO'z%nO~P#/sO!]5uO#`5wO!^)UX~O!^5xO~Or6OOs!nO!S*iO!b!yO!c!vO!d!vO!|<VO#T!pO#U!pO#V!pO#W!pO#X!pO#[5}O#]!zO(U!lO(VTO(YUO(e!mO(o!sO~O!^5|O~P%;eOn6TO!_1oO%i6SO~Oh%VOn6TO!_1oO%i6SO~Ob6[O(T#nO(VTO(YUO!]'sX!^'sX~O!]1zO!^)Va~O(VTO(YUO(e6^O~O`6bO~Oj6eO&[6fO~PNXO!k6gO~P%[Oa6iO~Oa6iO~P%[Ob2bO!^6nO&j2aO~P`O!g6pO~O!g6rOh(ji!](ji!^(ji!g(ji!l(jir(ji(r(ji~O!]#hi!^#hi~P#BwO#`6sO!]#hi!^#hi~O!]!ai!^!ai~P#BwOa%nO#`6|O'z%nO~Oa%nO!g#vO#`6|O'z%nO~O!](tq!k(tqa(tq'z(tq~P!:tO!](jO!k(sq~O!S%hO!_%iO#j7TO(T%gO~O!_'`O%i7WO~On7[O!_'`O%i7WO~O#k'iaP'iaR'ia['iaa'iaj'iar'ia!S'ia!l'ia!p'ia#R'ia#n'ia#o'ia#p'ia#q'ia#r'ia#s'ia#t'ia#u'ia#v'ia#x'ia#z'ia#{'ia'z'ia(a'ia(r'ia!k'ia!Y'ia'w'iav'ia!_'ia%i'ia!g'ia~P%-fO#k'kaP'kaR'ka['kaa'kaj'kar'ka!S'ka!l'ka!p'ka#R'ka#n'ka#o'ka#p'ka#q'ka#r'ka#s'ka#t'ka#u'ka#v'ka#x'ka#z'ka#{'ka'z'ka(a'ka(r'ka!k'ka!Y'ka'w'kav'ka!_'ka%i'ka!g'ka~P%.XO#k$|iP$|iR$|i[$|ia$|ij$|ir$|i!S$|i!]$|i!l$|i!p$|i#R$|i#n$|i#o$|i#p$|i#q$|i#r$|i#s$|i#t$|i#u$|i#v$|i#x$|i#z$|i#{$|i'z$|i(a$|i(r$|i!k$|i!Y$|i'w$|i#`$|iv$|i!_$|i%i$|i!g$|i~P#/sO#k%aiP%aiR%ai[%aia%aij%air%ai!S%ai!l%ai!p%ai#R%ai#n%ai#o%ai#p%ai#q%ai#r%ai#s%ai#t%ai#u%ai#v%ai#x%ai#z%ai#{%ai'z%ai(a%ai(r%ai!k%ai!Y%ai'w%aiv%ai!_%ai%i%ai!g%ai~P%5oO#k%ciP%ciR%ci[%cia%cij%cir%ci!S%ci!l%ci!p%ci#R%ci#n%ci#o%ci#p%ci#q%ci#r%ci#s%ci#t%ci#u%ci#v%ci#x%ci#z%ci#{%ci'z%ci(a%ci(r%ci!k%ci!Y%ci'w%civ%ci!_%ci%i%ci!g%ci~P%6bO!]'Ya!k'Ya~P!:tO!].tO!k(ki~O$O#ci!]#ci!^#ci~P#BwOP$[OR#zO!Q#yO!S#{O!l#xO!p$[O(aVO[#mij#mir#mi#R#mi#o#mi#p#mi#q#mi#r#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi$O#mi(r#mi(y#mi(z#mi!]#mi!^#mi~O#n#mi~P%NdO#n<_O~P%NdOP$[OR#zOr<kO!Q#yO!S#{O!l#xO!p$[O#n<_O#o<`O#p<`O#q<`O(aVO[#mij#mi#R#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi$O#mi(r#mi(y#mi(z#mi!]#mi!^#mi~O#r#mi~P&!lO#r<aO~P&!lOP$[OR#zO[<mOj<bOr<kO!Q#yO!S#{O!l#xO!p$[O#R<bO#n<_O#o<`O#p<`O#q<`O#r<aO#s<bO#t<bO#u<lO(aVO#x#mi#z#mi#{#mi$O#mi(r#mi(y#mi(z#mi!]#mi!^#mi~O#v#mi~P&$tOP$[OR#zO[<mOj<bOr<kO!Q#yO!S#{O!l#xO!p$[O#R<bO#n<_O#o<`O#p<`O#q<`O#r<aO#s<bO#t<bO#u<lO#v<cO(aVO(z#}O#z#mi#{#mi$O#mi(r#mi(y#mi!]#mi!^#mi~O#x<eO~P&&uO#x#mi~P&&uO#v<cO~P&$tOP$[OR#zO[<mOj<bOr<kO!Q#yO!S#{O!l#xO!p$[O#R<bO#n<_O#o<`O#p<`O#q<`O#r<aO#s<bO#t<bO#u<lO#v<cO#x<eO(aVO(y#|O(z#}O#{#mi$O#mi(r#mi!]#mi!^#mi~O#z#mi~P&)UO#z<gO~P&)UOa#|y!]#|y'z#|y'w#|y!Y#|y!k#|yv#|y!_#|y%i#|y!g#|y~P!:tO[#mij#mir#mi#R#mi#r#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi$O#mi(r#mi!]#mi!^#mi~OP$[OR#zO!Q#yO!S#{O!l#xO!p$[O#n<_O#o<`O#p<`O#q<`O(aVO(y#mi(z#mi~P&,QOn>^O!Q*OO'y*PO(y$}O(z%POP#miR#mi!S#mi!l#mi!p#mi#n#mi#o#mi#p#mi#q#mi(a#mi~P&,QO#S$dOP(`XR(`X[(`Xj(`Xn(`Xr(`X!Q(`X!S(`X!l(`X!p(`X#R(`X#n(`X#o(`X#p(`X#q(`X#r(`X#s(`X#t(`X#u(`X#v(`X#x(`X#z(`X#{(`X$O(`X'y(`X(a(`X(r(`X(y(`X(z(`X!](`X!^(`X~O$O$Pi!]$Pi!^$Pi~P#BwO$O!ri!^!ri~P$+oOg']a!]']a~P!1WO!^7nO~O!]'da!^'da~P#BwO!Y7oO~P#/sO!g#vO(r'pO!]'ea!k'ea~O!]/pO!k)Oi~O!]/pO!g#vO!k)Oi~Og$|q!]$|q#`$|q$O$|q~P!1WO!Y'ga!]'ga~P#/sO!g7vO~O!]/yO!Y)Pi~P#/sO!]/yO!Y)Pi~O!Y7yO~Oh%VOr8OO!l%eO(r'pO~Oj8QO!g#vO~Or8TO!g#vO(r'pO~O!Q*OO'y*PO(z%POn'ja(y'ja!]'ja#`'ja~Og'ja$O'ja~P&5RO!Q*OO'y*POn'la(y'la(z'la!]'la#`'la~Og'la$O'la~P&5tOg(_q!](_q~P!1WO#`8VOg(_q!](_q~P!1WO!Y8WO~Og%Oq!]%Oq#`%Oq$O%Oq~P!1WOa$oy!]$oy'z$oy'w$oy!Y$oy!k$oyv$oy!_$oy%i$oy!g$oy~P!:tO!g6rO~O!]5[O!_)Qa~O!_'`OP$TaR$Ta[$Taj$Tar$Ta!Q$Ta!S$Ta!]$Ta!l$Ta!p$Ta#R$Ta#n$Ta#o$Ta#p$Ta#q$Ta#r$Ta#s$Ta#t$Ta#u$Ta#v$Ta#x$Ta#z$Ta#{$Ta(a$Ta(r$Ta(y$Ta(z$Ta~O%i7WO~P&8fO%^8[Oa%[i!_%[i'z%[i!]%[i~Oa#cy!]#cy'z#cy'w#cy!Y#cy!k#cyv#cy!_#cy%i#cy!g#cy~P!:tO[8^O~Ob8`O(T+qO(VTO(YUO~O!]1TO!^)Xi~O`8dO~O(e(|O!]'pX!^'pX~O!]5uO!^)Ua~O!^8nO~P%;eO(o!sO~P$&YO#[8oO~O!_1oO~O!_1oO%i8qO~On8tO!_1oO%i8qO~O[8yO!]'sa!^'sa~O!]1zO!^)Vi~O!k8}O~O!k9OO~O!k9RO~O!k9RO~P%[Oa9TO~O!g9UO~O!k9VO~O!](wi!^(wi~P#BwOa%nO#`9_O'z%nO~O!](ty!k(tya(ty'z(ty~P!:tO!](jO!k(sy~O%i9bO~P&8fO!_'`O%i9bO~O#k$|qP$|qR$|q[$|qa$|qj$|qr$|q!S$|q!]$|q!l$|q!p$|q#R$|q#n$|q#o$|q#p$|q#q$|q#r$|q#s$|q#t$|q#u$|q#v$|q#x$|q#z$|q#{$|q'z$|q(a$|q(r$|q!k$|q!Y$|q'w$|q#`$|qv$|q!_$|q%i$|q!g$|q~P#/sO#k'jaP'jaR'ja['jaa'jaj'jar'ja!S'ja!l'ja!p'ja#R'ja#n'ja#o'ja#p'ja#q'ja#r'ja#s'ja#t'ja#u'ja#v'ja#x'ja#z'ja#{'ja'z'ja(a'ja(r'ja!k'ja!Y'ja'w'jav'ja!_'ja%i'ja!g'ja~P&5RO#k'laP'laR'la['laa'laj'lar'la!S'la!l'la!p'la#R'la#n'la#o'la#p'la#q'la#r'la#s'la#t'la#u'la#v'la#x'la#z'la#{'la'z'la(a'la(r'la!k'la!Y'la'w'lav'la!_'la%i'la!g'la~P&5tO#k%OqP%OqR%Oq[%Oqa%Oqj%Oqr%Oq!S%Oq!]%Oq!l%Oq!p%Oq#R%Oq#n%Oq#o%Oq#p%Oq#q%Oq#r%Oq#s%Oq#t%Oq#u%Oq#v%Oq#x%Oq#z%Oq#{%Oq'z%Oq(a%Oq(r%Oq!k%Oq!Y%Oq'w%Oq#`%Oqv%Oq!_%Oq%i%Oq!g%Oq~P#/sO!]'Yi!k'Yi~P!:tO$O#cq!]#cq!^#cq~P#BwO(y$}OP%aaR%aa[%aaj%aar%aa!S%aa!l%aa!p%aa#R%aa#n%aa#o%aa#p%aa#q%aa#r%aa#s%aa#t%aa#u%aa#v%aa#x%aa#z%aa#{%aa$O%aa(a%aa(r%aa!]%aa!^%aa~On%aa!Q%aa'y%aa(z%aa~P&IyO(z%POP%caR%ca[%caj%car%ca!S%ca!l%ca!p%ca#R%ca#n%ca#o%ca#p%ca#q%ca#r%ca#s%ca#t%ca#u%ca#v%ca#x%ca#z%ca#{%ca$O%ca(a%ca(r%ca!]%ca!^%ca~On%ca!Q%ca'y%ca(y%ca~P&LQOn>^O!Q*OO'y*PO(z%PO~P&IyOn>^O!Q*OO'y*PO(y$}O~P&LQOR0kO!Q0kO!S0lO#S$dOP}a[}aj}an}ar}a!l}a!p}a#R}a#n}a#o}a#p}a#q}a#r}a#s}a#t}a#u}a#v}a#x}a#z}a#{}a$O}a'y}a(a}a(r}a(y}a(z}a!]}a!^}a~O!Q*OO'y*POP$saR$sa[$saj$san$sar$sa!S$sa!l$sa!p$sa#R$sa#n$sa#o$sa#p$sa#q$sa#r$sa#s$sa#t$sa#u$sa#v$sa#x$sa#z$sa#{$sa$O$sa(a$sa(r$sa(y$sa(z$sa!]$sa!^$sa~O!Q*OO'y*POP$uaR$ua[$uaj$uan$uar$ua!S$ua!l$ua!p$ua#R$ua#n$ua#o$ua#p$ua#q$ua#r$ua#s$ua#t$ua#u$ua#v$ua#x$ua#z$ua#{$ua$O$ua(a$ua(r$ua(y$ua(z$ua!]$ua!^$ua~On>^O!Q*OO'y*PO(y$}O(z%PO~OP%TaR%Ta[%Taj%Tar%Ta!S%Ta!l%Ta!p%Ta#R%Ta#n%Ta#o%Ta#p%Ta#q%Ta#r%Ta#s%Ta#t%Ta#u%Ta#v%Ta#x%Ta#z%Ta#{%Ta$O%Ta(a%Ta(r%Ta!]%Ta!^%Ta~P''VO$O$mq!]$mq!^$mq~P#BwO$O$oq!]$oq!^$oq~P#BwO!^9oO~O$O9pO~P!1WO!g#vO!]'ei!k'ei~O!g#vO(r'pO!]'ei!k'ei~O!]/pO!k)Oq~O!Y'gi!]'gi~P#/sO!]/yO!Y)Pq~Or9wO!g#vO(r'pO~O[9yO!Y9xO~P#/sO!Y9xO~Oj:PO!g#vO~Og(_y!](_y~P!1WO!]'na!_'na~P#/sOa%[q!_%[q'z%[q!]%[q~P#/sO[:UO~O!]1TO!^)Xq~O`:YO~O#`:ZO!]'pa!^'pa~O!]5uO!^)Ui~P#BwO!S:]O~O!_1oO%i:`O~O(VTO(YUO(e:eO~O!]1zO!^)Vq~O!k:hO~O!k:iO~O!k:jO~O!k:jO~P%[O#`:mO!]#hy!^#hy~O!]#hy!^#hy~P#BwO%i:rO~P&8fO!_'`O%i:rO~O$O#|y!]#|y!^#|y~P#BwOP$|iR$|i[$|ij$|ir$|i!S$|i!l$|i!p$|i#R$|i#n$|i#o$|i#p$|i#q$|i#r$|i#s$|i#t$|i#u$|i#v$|i#x$|i#z$|i#{$|i$O$|i(a$|i(r$|i!]$|i!^$|i~P''VO!Q*OO'y*PO(z%POP'iaR'ia['iaj'ian'iar'ia!S'ia!l'ia!p'ia#R'ia#n'ia#o'ia#p'ia#q'ia#r'ia#s'ia#t'ia#u'ia#v'ia#x'ia#z'ia#{'ia$O'ia(a'ia(r'ia(y'ia!]'ia!^'ia~O!Q*OO'y*POP'kaR'ka['kaj'kan'kar'ka!S'ka!l'ka!p'ka#R'ka#n'ka#o'ka#p'ka#q'ka#r'ka#s'ka#t'ka#u'ka#v'ka#x'ka#z'ka#{'ka$O'ka(a'ka(r'ka(y'ka(z'ka!]'ka!^'ka~O(y$}OP%aiR%ai[%aij%ain%air%ai!Q%ai!S%ai!l%ai!p%ai#R%ai#n%ai#o%ai#p%ai#q%ai#r%ai#s%ai#t%ai#u%ai#v%ai#x%ai#z%ai#{%ai$O%ai'y%ai(a%ai(r%ai(z%ai!]%ai!^%ai~O(z%POP%ciR%ci[%cij%cin%cir%ci!Q%ci!S%ci!l%ci!p%ci#R%ci#n%ci#o%ci#p%ci#q%ci#r%ci#s%ci#t%ci#u%ci#v%ci#x%ci#z%ci#{%ci$O%ci'y%ci(a%ci(r%ci(y%ci!]%ci!^%ci~O$O$oy!]$oy!^$oy~P#BwO$O#cy!]#cy!^#cy~P#BwO!g#vO!]'eq!k'eq~O!]/pO!k)Oy~O!Y'gq!]'gq~P#/sOr:|O!g#vO(r'pO~O[;QO!Y;PO~P#/sO!Y;PO~Og(_!R!](_!R~P!1WOa%[y!_%[y'z%[y!]%[y~P#/sO!]1TO!^)Xy~O!]5uO!^)Uq~O(T;XO~O!_1oO%i;[O~O!k;_O~O%i;dO~P&8fOP$|qR$|q[$|qj$|qr$|q!S$|q!l$|q!p$|q#R$|q#n$|q#o$|q#p$|q#q$|q#r$|q#s$|q#t$|q#u$|q#v$|q#x$|q#z$|q#{$|q$O$|q(a$|q(r$|q!]$|q!^$|q~P''VO!Q*OO'y*PO(z%POP'jaR'ja['jaj'jan'jar'ja!S'ja!l'ja!p'ja#R'ja#n'ja#o'ja#p'ja#q'ja#r'ja#s'ja#t'ja#u'ja#v'ja#x'ja#z'ja#{'ja$O'ja(a'ja(r'ja(y'ja!]'ja!^'ja~O!Q*OO'y*POP'laR'la['laj'lan'lar'la!S'la!l'la!p'la#R'la#n'la#o'la#p'la#q'la#r'la#s'la#t'la#u'la#v'la#x'la#z'la#{'la$O'la(a'la(r'la(y'la(z'la!]'la!^'la~OP%OqR%Oq[%Oqj%Oqr%Oq!S%Oq!l%Oq!p%Oq#R%Oq#n%Oq#o%Oq#p%Oq#q%Oq#r%Oq#s%Oq#t%Oq#u%Oq#v%Oq#x%Oq#z%Oq#{%Oq$O%Oq(a%Oq(r%Oq!]%Oq!^%Oq~P''VOg%e!Z!]%e!Z#`%e!Z$O%e!Z~P!1WO!Y;hO~P#/sOr;iO!g#vO(r'pO~O[;kO!Y;hO~P#/sO!]'pq!^'pq~P#BwO!]#h!Z!^#h!Z~P#BwO#k%e!ZP%e!ZR%e!Z[%e!Za%e!Zj%e!Zr%e!Z!S%e!Z!]%e!Z!l%e!Z!p%e!Z#R%e!Z#n%e!Z#o%e!Z#p%e!Z#q%e!Z#r%e!Z#s%e!Z#t%e!Z#u%e!Z#v%e!Z#x%e!Z#z%e!Z#{%e!Z'z%e!Z(a%e!Z(r%e!Z!k%e!Z!Y%e!Z'w%e!Z#`%e!Zv%e!Z!_%e!Z%i%e!Z!g%e!Z~P#/sOr;tO!g#vO(r'pO~O!Y;uO~P#/sOr;|O!g#vO(r'pO~O!Y;}O~P#/sOP%e!ZR%e!Z[%e!Zj%e!Zr%e!Z!S%e!Z!l%e!Z!p%e!Z#R%e!Z#n%e!Z#o%e!Z#p%e!Z#q%e!Z#r%e!Z#s%e!Z#t%e!Z#u%e!Z#v%e!Z#x%e!Z#z%e!Z#{%e!Z$O%e!Z(a%e!Z(r%e!Z!]%e!Z!^%e!Z~P''VOr<QO!g#vO(r'pO~Ov(fX~P1qO!Q%rO~P!)[O(U!lO~P!)[O!YfX!]fX#`fX~P%2OOP]XR]X[]Xj]Xr]X!Q]X!S]X!]]X!]fX!l]X!p]X#R]X#S]X#`]X#`fX#kfX#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#v]X#x]X#z]X#{]X$Q]X(a]X(r]X(y]X(z]X~O!gfX!k]X!kfX(rfX~P'LTOP<UOQ<UOSfOd>ROe!iOpkOr<UOskOtkOzkO|<UO!O<UO!SWO!WkO!XkO!_XO!i<XO!lZO!o<UO!p<UO!q<UO!s<YO!u<]O!x!hO$W!kO$n>PO(T)]O(VTO(YUO(aVO(o[O~O!]<iO!^$qa~Oh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O<tO!S${O!_$|O!i>WO!l$xO#j<zO$W%`O$t<vO$v<xO$y%aO(T(vO(VTO(YUO(a$uO(y$}O(z%PO~Ol)dO~P(!yOr!eX(r!eX~P#!iOr(jX(r(jX~P##[O!^]X!^fX~P'LTO!YfX!Y$zX!]fX!]$zX#`fX~P!0SO#k<^O~O!g#vO#k<^O~O#`<nO~Oj<bO~O#`=OO!](wX!^(wX~O#`<nO!](uX!^(uX~O#k=PO~Og=RO~P!1WO#k=XO~O#k=YO~Og=RO(T&ZO~O!g#vO#k=ZO~O!g#vO#k=PO~O$O=[O~P#BwO#k=]O~O#k=^O~O#k=cO~O#k=dO~O#k=eO~O#k=fO~O$O=gO~P!1WO$O=hO~P!1WOl=sO~P7eOk#S#T#U#W#X#[#i#j#u$n$t$v$y%]%^%h%i%j%q%s%v%w%y%{~(OT#o!X'|(U#ps#n#qr!Q'}$]'}(T$_(e~",goto:"$9Y)]PPPPPP)^PP)aP)rP+W/]PPPP6mPP7TPP=QPPP@tPA^PA^PPPA^PCfPA^PA^PA^PCjPCoPD^PIWPPPI[PPPPI[L_PPPLeMVPI[PI[PP! eI[PPPI[PI[P!#lI[P!'S!(X!(bP!)U!)Y!)U!,gPPPPPPP!-W!(XPP!-h!/YP!2iI[I[!2n!5z!:h!:h!>gPPP!>oI[PPPPPPPPP!BOP!C]PPI[!DnPI[PI[I[I[I[I[PI[!FQP!I[P!LbP!Lf!Lp!Lt!LtP!IXP!Lx!LxP#!OP#!SI[PI[#!Y#%_CjA^PA^PA^A^P#&lA^A^#)OA^#+vA^#.SA^A^#.r#1W#1W#1]#1f#1W#1qPP#1WPA^#2ZA^#6YA^A^6mPPP#:_PPP#:x#:xP#:xP#;`#:xPP#;fP#;]P#;]#;y#;]#<e#<k#<n)aP#<q)aP#<z#<z#<zP)aP)aP)aP)aPP)aP#=Q#=TP#=T)aP#=XP#=[P)aP)aP)aP)aP)aP)a)aPP#=b#=h#=s#=y#>P#>V#>]#>k#>q#>{#?R#?]#?c#?s#?y#@k#@}#AT#AZ#Ai#BO#Cs#DR#DY#Et#FS#Gt#HS#HY#H`#Hf#Hp#Hv#H|#IW#Ij#IpPPPPPPPPPPP#IvPPPPPPP#Jk#Mx$ b$ i$ qPPP$']P$'f$*_$0x$0{$1O$1}$2Q$2X$2aP$2g$2jP$3W$3[$4S$5b$5g$5}PP$6S$6Y$6^$6a$6e$6i$7e$7|$8e$8i$8l$8o$8y$8|$9Q$9UR!|RoqOXst!Z#d%m&r&t&u&w,s,x2[2_Y!vQ'`-e1o5{Q%tvQ%|yQ&T|Q&j!VS'W!e-]Q'f!iS'l!r!yU*k$|*Z*oQ+o%}S+|&V&WQ,d&dQ-c'_Q-m'gQ-u'mQ0[*qQ1b,OQ1y,eR<{<Y%SdOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+],p,s,x-i-q.P.V.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3l4z6T6e6f6i6|8t9T9_S#q]<V!r)_$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SU+P%]<s<tQ+t&PQ,f&gQ,m&oQ0x+gQ0}+iQ1Y+uQ2R,kQ3`.gQ5`0|Q5f1TQ6[1zQ7Y3dQ8`5gR9e7['QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>S!S!nQ!r!v!y!z$|'W'_'`'l'm'n*k*o*q*r-]-c-e-u0[0_1o5{5}%[$ti#v$b$c$d$x${%O%Q%^%_%c)y*R*T*V*Y*a*g*w*x+f+i,S,V.f/P/d/m/x/y/{0`0b0i0j0o1f1i1q3c4^4_4j4o5Q5[5_6S7W7v8Q8V8[8q9b9p9y:P:`:r;Q;[;d;k<l<m<o<p<q<r<u<v<w<x<y<z=S=T=U=V=X=Y=]=^=_=`=a=b=c=d=g=h>P>X>Y>]>^Q&X|Q'U!eS'[%i-`Q+t&PQ,P&WQ,f&gQ0n+SQ1Y+uQ1_+{Q2Q,jQ2R,kQ5f1TQ5o1aQ6[1zQ6_1|Q6`2PQ8`5gQ8c5lQ8|6bQ:X8dQ:f8yQ;V:YR<}*ZrnOXst!V!Z#d%m&i&r&t&u&w,s,x2[2_R,h&k&z^OPXYstuvwz!Z!`!g!j!o#S#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'b'r(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>R>S[#]WZ#W#Z'X(T!b%jm#h#i#l$x%e%h(^(h(i(j*Y*^*b+Z+[+^,o-V.T.Z.[.]._/m/p2d3[3]4a6r7TQ%wxQ%{yW&Q|&V&W,OQ&_!TQ'c!hQ'e!iQ(q#sS+n%|%}Q+r&PQ,_&bQ,c&dS-l'f'gQ.i(rQ1R+oQ1X+uQ1Z+vQ1^+zQ1t,`S1x,d,eQ2|-mQ5e1TQ5i1WQ5n1`Q6Z1yQ8_5gQ8b5kQ8f5pQ:T8^R;T:U!U$zi$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>Y!^%yy!i!u%{%|%}'V'e'f'g'k'u*j+n+o-Y-l-m-t0R0U1R2u2|3T4r4s4v7}9{Q+h%wQ,T&[Q,W&]Q,b&dQ.h(qQ1s,_U1w,c,d,eQ3e.iQ6U1tS6Y1x1yQ8x6Z#f>T#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^o>U<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=hW%Ti%V*y>PS&[!Q&iQ&]!RQ&^!SU*}%[%d=sR,R&Y%]%Si#v$b$c$d$x${%O%Q%^%_%c)y*R*T*V*Y*a*g*w*x+f+i,S,V.f/P/d/m/x/y/{0`0b0i0j0o1f1i1q3c4^4_4j4o5Q5[5_6S7W7v8Q8V8[8q9b9p9y:P:`:r;Q;[;d;k<l<m<o<p<q<r<u<v<w<x<y<z=S=T=U=V=X=Y=]=^=_=`=a=b=c=d=g=h>P>X>Y>]>^T)z$u){V+P%]<s<tW'[!e%i*Z-`S(}#y#zQ+c%rQ+y&SS.b(m(nQ1j,XQ5T0kR8i5u'QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>S$i$^c#Y#e%q%s%u(S(Y(t(y)R)S)T)U)V)W)X)Y)Z)[)^)`)b)g)q+d+x-Z-x-}.S.U.s.v.z.|.}/O/b0p2k2n3O3V3k3p3q3r3s3t3u3v3w3x3y3z3{3|4P4Q4X5X5c6u6{7Q7a7b7k7l8k9X9]9g9m9n:o;W;`<W=vT#TV#U'RkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SQ'Y!eR2q-]!W!nQ!e!r!v!y!z$|'W'_'`'l'm'n*Z*k*o*q*r-]-c-e-u0[0_1o5{5}R1l,ZnqOXst!Z#d%m&r&t&u&w,s,x2[2_Q&y!^Q'v!xS(s#u<^Q+l%zQ,]&_Q,^&aQ-j'dQ-w'oS.r(x=PS0q+X=ZQ1P+mQ1n,[Q2c,zQ2e,{Q2m-WQ2z-kQ2}-oS5Y0r=eQ5a1QS5d1S=fQ6t2oQ6x2{Q6}3SQ8]5bQ9Y6vQ9Z6yQ9^7OR:l9V$d$]c#Y#e%s%u(S(Y(t(y)R)S)T)U)V)W)X)Y)Z)[)^)`)b)g)q+d+x-Z-x-}.S.U.s.v.z.}/O/b0p2k2n3O3V3k3p3q3r3s3t3u3v3w3x3y3z3{3|4P4Q4X5X5c6u6{7Q7a7b7k7l8k9X9]9g9m9n:o;W;`<W=vS(o#p'iQ)P#zS+b%q.|S.c(n(pR3^.d'QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SS#q]<VQ&t!XQ&u!YQ&w![Q&x!]R2Z,vQ'a!hQ+e%wQ-h'cS.e(q+hQ2x-gW3b.h.i0w0yQ6w2yW7U3_3a3e5^U9a7V7X7ZU:q9c9d9fS;b:p:sQ;p;cR;x;qU!wQ'`-eT5y1o5{!Q_OXZ`st!V!Z#d#h%e%m&i&k&r&t&u&w(j,s,x.[2[2_]!pQ!r'`-e1o5{T#q]<V%^{OPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&o&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+]+g,p,s,x-i-q.P.V.g.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3d3l4z6T6e6f6i6|7[8t9T9_S(}#y#zS.b(m(n!s=l$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SU$fd)_,mS(p#p'iU*v%R(w4OU0m+O.n7gQ5^0xQ7V3`Q9d7YR:s9em!tQ!r!v!y!z'`'l'm'n-e-u1o5{5}Q't!uS(f#g2US-s'k'wQ/s*]Q0R*jQ3U-vQ4f/tQ4r0TQ4s0UQ4x0^Q7r4`S7}4t4vS8R4y4{Q9r7sQ9v7yQ9{8OQ:Q8TS:{9w9xS;g:|;PS;s;h;iS;{;t;uS<P;|;}R<S<QQ#wbQ's!uS(e#g2US(g#m+WQ+Y%fQ+j%xQ+p&OU-r'k't'wQ.W(fU/r*]*`/wQ0S*jQ0V*lQ1O+kQ1u,aS3R-s-vQ3Z.`S4e/s/tQ4n0PS4q0R0^Q4u0WQ6W1vQ7P3US7q4`4bQ7u4fU7|4r4x4{Q8P4wQ8v6XS9q7r7sQ9u7yQ9}8RQ:O8SQ:c8wQ:y9rS:z9v9xQ;S:QQ;^:dS;f:{;PS;r;g;hS;z;s;uS<O;{;}Q<R<PQ<T<SQ=o=jQ={=tR=|=uV!wQ'`-e%^aOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&o&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+]+g,p,s,x-i-q.P.V.g.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3d3l4z6T6e6f6i6|7[8t9T9_S#wz!j!r=i$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SR=o>R%^bOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&o&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+]+g,p,s,x-i-q.P.V.g.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3d3l4z6T6e6f6i6|7[8t9T9_Q%fj!^%xy!i!u%{%|%}'V'e'f'g'k'u*j+n+o-Y-l-m-t0R0U1R2u2|3T4r4s4v7}9{S&Oz!jQ+k%yQ,a&dW1v,b,c,d,eU6X1w1x1yS8w6Y6ZQ:d8x!r=j$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SQ=t>QR=u>R%QeOPXYstuvw!Z!`!g!o#S#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&r&t&u&w&{'T'b'r(V(](d(x(z)O)}*i+X+]+g,p,s,x-i-q.P.V.g.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3d3l4z6T6e6f6i6|7[8t9T9_Y#bWZ#W#Z(T!b%jm#h#i#l$x%e%h(^(h(i(j*Y*^*b+Z+[+^,o-V.T.Z.[.]._/m/p2d3[3]4a6r7TQ,n&o!p=k$Z$n)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SR=n'XU']!e%i*ZR2s-`%SdOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+],p,s,x-i-q.P.V.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3l4z6T6e6f6i6|8t9T9_!r)_$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SQ,m&oQ0x+gQ3`.gQ7Y3dR9e7[!b$Tc#Y%q(S(Y(t(y)Z)[)`)g+x-x-}.S.U.s.v/b0p3O3V3k3{5X5c6{7Q7a9]:o<W!P<d)^)q-Z.|2k2n3p3y3z4P4X6u7b7k7l8k9X9g9m9n;W;`=v!f$Vc#Y%q(S(Y(t(y)W)X)Z)[)`)g+x-x-}.S.U.s.v/b0p3O3V3k3{5X5c6{7Q7a9]:o<W!T<f)^)q-Z.|2k2n3p3v3w3y3z4P4X6u7b7k7l8k9X9g9m9n;W;`=v!^$Zc#Y%q(S(Y(t(y)`)g+x-x-}.S.U.s.v/b0p3O3V3k3{5X5c6{7Q7a9]:o<WQ4_/kz>S)^)q-Z.|2k2n3p4P4X6u7b7k7l8k9X9g9m9n;W;`=vQ>X>ZR>Y>['QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SS$oh$pR4U/U'XgOPWXYZhstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n$p%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/U/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>ST$kf$qQ$ifS)j$l)nR)v$qT$jf$qT)l$l)n'XhOPWXYZhstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n$p%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/U/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>ST$oh$pQ$rhR)u$p%^jOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&o&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+]+g,p,s,x-i-q.P.V.g.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3d3l4z6T6e6f6i6|7[8t9T9_!s>Q$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>S#glOPXZst!Z!`!o#S#d#o#{$n%m&k&n&o&r&t&u&w&{'T'b)O)s*i+]+g,p,s,x-i.g/V/n0]0l1r2S2T2V2X2[2_2a3d4T4z6T6e6f6i7[8t9T!U%Ri$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>Y#f(w#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^Q+T%aQ/c*Oo4O<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=h!U$yi$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>YQ*c$zU*l$|*Z*oQ+U%bQ0W*m#f=q#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^n=r<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=hQ=w>TQ=x>UQ=y>VR=z>W!U%Ri$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>Y#f(w#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^o4O<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=hnoOXst!Z#d%m&r&t&u&w,s,x2[2_S*f${*YQ-R'OQ-S'QR4i/y%[%Si#v$b$c$d$x${%O%Q%^%_%c)y*R*T*V*Y*a*g*w*x+f+i,S,V.f/P/d/m/x/y/{0`0b0i0j0o1f1i1q3c4^4_4j4o5Q5[5_6S7W7v8Q8V8[8q9b9p9y:P:`:r;Q;[;d;k<l<m<o<p<q<r<u<v<w<x<y<z=S=T=U=V=X=Y=]=^=_=`=a=b=c=d=g=h>P>X>Y>]>^Q,U&]Q1h,WQ5s1gR8h5tV*n$|*Z*oU*n$|*Z*oT5z1o5{S0P*i/nQ4w0]T8S4z:]Q+j%xQ0V*lQ1O+kQ1u,aQ6W1vQ8v6XQ:c8wR;^:d!U%Oi$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>Yx*R$v)e*S*u+V/v0d0e4R4g5R5S5W7p8U:R:x=p=}>OS0`*t0a#f<o#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^n<p<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=h!d=S(u)c*[*e.j.m.q/_/k/|0v1e3h4[4h4l5r7]7`7w7z8X8Z9t9|:S:};R;e;j;v>Z>[`=T3}7c7f7j9h:t:w;yS=_.l3iT=`7e9k!U%Qi$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>Y|*T$v)e*U*t+V/g/v0d0e4R4g4|5R5S5W7p8U:R:x=p=}>OS0b*u0c#f<q#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^n<r<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=h!h=U(u)c*[*e.k.l.q/_/k/|0v1e3f3h4[4h4l5r7]7^7`7w7z8X8Z9t9|:S:};R;e;j;v>Z>[d=V3}7d7e7j9h9i:t:u:w;yS=a.m3jT=b7f9lrnOXst!V!Z#d%m&i&r&t&u&w,s,x2[2_Q&f!UR,p&ornOXst!V!Z#d%m&i&r&t&u&w,s,x2[2_R&f!UQ,Y&^R1d,RsnOXst!V!Z#d%m&i&r&t&u&w,s,x2[2_Q1p,_S6R1s1tU8p6P6Q6US:_8r8sS;Y:^:aQ;m;ZR;w;nQ&m!VR,i&iR6_1|R:f8yW&Q|&V&W,OR1Z+vQ&r!WR,s&sR,y&xT2],x2_R,}&yQ,|&yR2f,}Q'y!{R-y'ySsOtQ#dXT%ps#dQ#OTR'{#OQ#RUR'}#RQ){$uR/`){Q#UVR(Q#UQ#XWU(W#X(X.QQ(X#YR.Q(YQ-^'YR2r-^Q.u(yS3m.u3nR3n.vQ-e'`R2v-eY!rQ'`-e1o5{R'j!rQ/Q)eR4S/QU#_W%h*YU(_#_(`.RQ(`#`R.R(ZQ-a']R2t-at`OXst!V!Z#d%m&i&k&r&t&u&w,s,x2[2_S#hZ%eU#r`#h.[R.[(jQ(k#jQ.X(gW.a(k.X3X7RQ3X.YR7R3YQ)n$lR/W)nQ$phR)t$pQ$`cU)a$`-|<jQ-|<WR<j)qQ/q*]W4c/q4d7t9sU4d/r/s/tS7t4e4fR9s7u$e*Q$v(u)c)e*[*e*t*u+Q+R+V.l.m.o.p.q/_/g/i/k/v/|0d0e0v1e3f3g3h3}4R4[4g4h4l4|5O5R5S5W5r7]7^7_7`7e7f7h7i7j7p7w7z8U8X8Z9h9i9j9t9|:R:S:t:u:v:w:x:};R;e;j;v;y=p=}>O>Z>[Q/z*eU4k/z4m7xQ4m/|R7x4lS*o$|*ZR0Y*ox*S$v)e*t*u+V/v0d0e4R4g5R5S5W7p8U:R:x=p=}>O!d.j(u)c*[*e.l.m.q/_/k/|0v1e3h4[4h4l5r7]7`7w7z8X8Z9t9|:S:};R;e;j;v>Z>[U/h*S.j7ca7c3}7e7f7j9h:t:w;yQ0a*tQ3i.lU4}0a3i9kR9k7e|*U$v)e*t*u+V/g/v0d0e4R4g4|5R5S5W7p8U:R:x=p=}>O!h.k(u)c*[*e.l.m.q/_/k/|0v1e3f3h4[4h4l5r7]7^7`7w7z8X8Z9t9|:S:};R;e;j;v>Z>[U/j*U.k7de7d3}7e7f7j9h9i:t:u:w;yQ0c*uQ3j.mU5P0c3j9lR9l7fQ*z%UR0g*zQ5]0vR8Y5]Q+_%kR0u+_Q5v1jS8j5v:[R:[8kQ,[&_R1m,[Q5{1oR8m5{Q1{,fS6]1{8zR8z6_Q1U+rW5h1U5j8a:VQ5j1XQ8a5iR:V8bQ+w&QR1[+wQ2_,xR6m2_YrOXst#dQ&v!ZQ+a%mQ,r&rQ,t&tQ,u&uQ,w&wQ2Y,sS2],x2_R6l2[Q%opQ&z!_Q&}!aQ'P!bQ'R!cQ'q!uQ+`%lQ+l%zQ,Q&XQ,h&mQ-P&|W-p'k's't'wQ-w'oQ0X*nQ1P+mQ1c,PS2O,i,lQ2g-OQ2h-RQ2i-SQ2}-oW3P-r-s-v-xQ5a1QQ5m1_Q5q1eQ6V1uQ6a2QQ6k2ZU6z3O3R3UQ6}3SQ8]5bQ8e5oQ8g5rQ8l5zQ8u6WQ8{6`S9[6{7PQ9^7OQ:W8cQ:b8vQ:g8|Q:n9]Q;U:XQ;]:cQ;a:oQ;l;VR;o;^Q%zyQ'd!iQ'o!uU+m%{%|%}Q-W'VU-k'e'f'gS-o'k'uQ0Q*jS1Q+n+oQ2o-YS2{-l-mQ3S-tS4p0R0UQ5b1RQ6v2uQ6y2|Q7O3TU7{4r4s4vQ9z7}R;O9{S$wi>PR*{%VU%Ui%V>PR0f*yQ$viS(u#v+iS)c$b$cQ)e$dQ*[$xS*e${*YQ*t%OQ*u%QQ+Q%^Q+R%_Q+V%cQ.l<oQ.m<qQ.o<uQ.p<wQ.q<yQ/_)yQ/g*RQ/i*TQ/k*VQ/v*aS/|*g/mQ0d*wQ0e*xl0v+f,V.f1i1q3c6S7W8q9b:`:r;[;dQ1e,SQ3f=SQ3g=UQ3h=XS3}<l<mQ4R/PS4[/d4^Q4g/xQ4h/yQ4l/{Q4|0`Q5O0bQ5R0iQ5S0jQ5W0oQ5r1fQ7]=]Q7^=_Q7_=aQ7`=cQ7e<pQ7f<rQ7h<vQ7i<xQ7j<zQ7p4_Q7w4jQ7z4oQ8U5QQ8X5[Q8Z5_Q9h=YQ9i=TQ9j=VQ9t7vQ9|8QQ:R8VQ:S8[Q:t=^Q:u=`Q:v=bQ:w=dQ:x9pQ:}9yQ;R:PQ;e=gQ;j;QQ;v;kQ;y=hQ=p>PQ=}>XQ>O>YQ>Z>]R>[>^Q+O%]Q.n<sR7g<tnpOXst!Z#d%m&r&t&u&w,s,x2[2_Q!fPS#fZ#oQ&|!`W'h!o*i0]4zQ(P#SQ)Q#{Q)r$nS,l&k&nQ,q&oQ-O&{S-T'T/nQ-g'bQ.x)OQ/[)sQ0s+]Q0y+gQ2W,pQ2y-iQ3a.gQ4W/VQ5U0lQ6Q1rQ6c2SQ6d2TQ6h2VQ6j2XQ6o2aQ7Z3dQ7m4TQ8s6TQ9P6eQ9Q6fQ9S6iQ9f7[Q:a8tR:k9T#[cOPXZst!Z!`!o#d#o#{%m&k&n&o&r&t&u&w&{'T'b)O*i+]+g,p,s,x-i.g/n0]0l1r2S2T2V2X2[2_2a3d4z6T6e6f6i7[8t9TQ#YWQ#eYQ%quQ%svS%uw!gS(S#W(VQ(Y#ZQ(t#uQ(y#xQ)R$OQ)S$PQ)T$QQ)U$RQ)V$SQ)W$TQ)X$UQ)Y$VQ)Z$WQ)[$XQ)^$ZQ)`$_Q)b$aQ)g$eW)q$n)s/V4TQ+d%tQ+x&RS-Z'X2pQ-x'rS-}(T.PQ.S(]Q.U(dQ.s(xQ.v(zQ.z<UQ.|<XQ.}<YQ/O<]Q/b)}Q0p+XQ2k-UQ2n-XQ3O-qQ3V.VQ3k.tQ3p<^Q3q<_Q3r<`Q3s<aQ3t<bQ3u<cQ3v<dQ3w<eQ3x<fQ3y<gQ3z<hQ3{.{Q3|<kQ4P<nQ4Q<{Q4X<iQ5X0rQ5c1SQ6u=OQ6{3QQ7Q3WQ7a3lQ7b=PQ7k=RQ7l=ZQ8k5wQ9X6sQ9]6|Q9g=[Q9m=eQ9n=fQ:o9_Q;W:ZQ;`:mQ<W#SR=v>SR#[WR'Z!el!tQ!r!v!y!z'`'l'm'n-e-u1o5{5}S'V!e-]U*j$|*Z*oS-Y'W'_S0U*k*qQ0^*rQ2u-cQ4v0[R4{0_R({#xQ!fQT-d'`-e]!qQ!r'`-e1o5{Q#p]R'i<VR)f$dY!uQ'`-e1o5{Q'k!rS'u!v!yS'w!z5}S-t'l'mQ-v'nR3T-uT#kZ%eS#jZ%eS%km,oU(g#h#i#lS.Y(h(iQ.^(jQ0t+^Q3Y.ZU3Z.[.]._S7S3[3]R9`7Td#^W#W#Z%h(T(^*Y+Z.T/mr#gZm#h#i#l%e(h(i(j+^.Z.[.]._3[3]7TS*]$x*bQ/t*^Q2U,oQ2l-VQ4`/pQ6q2dQ7s4aQ9W6rT=m'X+[V#aW%h*YU#`W%h*YS(U#W(^U(Z#Z+Z/mS-['X+[T.O(T.TV'^!e%i*ZQ$lfR)x$qT)m$l)nR4V/UT*_$x*bT*h${*YQ0w+fQ1g,VQ3_.fQ5t1iQ6P1qQ7X3cQ8r6SQ9c7WQ:^8qQ:p9bQ;Z:`Q;c:rQ;n;[R;q;dnqOXst!Z#d%m&r&t&u&w,s,x2[2_Q&l!VR,h&itmOXst!U!V!Z#d%m&i&r&t&u&w,s,x2[2_R,o&oT%lm,oR1k,XR,g&gQ&U|S+}&V&WR1^,OR+s&PT&p!W&sT&q!W&sT2^,x2_",nodeNames:" ArithOp ArithOp ?. JSXStartTag LineComment BlockComment Script Hashbang ExportDeclaration export Star as VariableName String Escape from ; default FunctionDeclaration async function VariableDefinition > < TypeParamList in out const TypeDefinition extends ThisType this LiteralType ArithOp Number BooleanLiteral TemplateType InterpolationEnd Interpolation InterpolationStart NullType null VoidType void TypeofType typeof MemberExpression . PropertyName [ TemplateString Escape Interpolation super RegExp ] ArrayExpression Spread , } { ObjectExpression Property async get set PropertyDefinition Block : NewTarget new NewExpression ) ( ArgList UnaryExpression delete LogicOp BitOp YieldExpression yield AwaitExpression await ParenthesizedExpression ClassExpression class ClassBody MethodDeclaration Decorator @ MemberExpression PrivatePropertyName CallExpression TypeArgList CompareOp < declare Privacy static abstract override PrivatePropertyDefinition PropertyDeclaration readonly accessor Optional TypeAnnotation Equals StaticBlock FunctionExpression ArrowFunction ParamList ParamList ArrayPattern ObjectPattern PatternProperty Privacy readonly Arrow MemberExpression BinaryExpression ArithOp ArithOp ArithOp ArithOp BitOp CompareOp instanceof satisfies CompareOp BitOp BitOp BitOp LogicOp LogicOp ConditionalExpression LogicOp LogicOp AssignmentExpression UpdateOp PostfixExpression CallExpression InstantiationExpression TaggedTemplateExpression DynamicImport import ImportMeta JSXElement JSXSelfCloseEndTag JSXSelfClosingTag JSXIdentifier JSXBuiltin JSXIdentifier JSXNamespacedName JSXMemberExpression JSXSpreadAttribute JSXAttribute JSXAttributeValue JSXEscape JSXEndTag JSXOpenTag JSXFragmentTag JSXText JSXEscape JSXStartCloseTag JSXCloseTag PrefixCast < ArrowFunction TypeParamList SequenceExpression InstantiationExpression KeyofType keyof UniqueType unique ImportType InferredType infer TypeName ParenthesizedType FunctionSignature ParamList NewSignature IndexedType TupleType Label ArrayType ReadonlyType ObjectType MethodType PropertyType IndexSignature PropertyDefinition CallSignature TypePredicate asserts is NewSignature new UnionType LogicOp IntersectionType LogicOp ConditionalType ParameterizedType ClassDeclaration abstract implements type VariableDeclaration let var using TypeAliasDeclaration InterfaceDeclaration interface EnumDeclaration enum EnumBody NamespaceDeclaration namespace module AmbientDeclaration declare GlobalDeclaration global ClassDeclaration ClassBody AmbientFunctionDeclaration ExportGroup VariableName VariableName ImportDeclaration defer ImportGroup ForStatement for ForSpec ForInSpec ForOfSpec of WhileStatement while WithStatement with DoStatement do IfStatement if else SwitchStatement switch SwitchBody CaseLabel case DefaultLabel TryStatement try CatchClause catch FinallyClause finally ReturnStatement return ThrowStatement throw BreakStatement break ContinueStatement continue DebuggerStatement debugger LabeledStatement ExpressionStatement SingleExpression SingleClassItem",maxTerm:380,context:trackNewline,nodeProps:[["isolate",-8,5,6,14,37,39,51,53,55,""],["group",-26,9,17,19,68,207,211,215,216,218,221,224,234,237,243,245,247,249,252,258,264,266,268,270,272,274,275,"Statement",-34,13,14,32,35,36,42,51,54,55,57,62,70,72,76,80,82,84,85,110,111,120,121,136,139,141,142,143,144,145,147,148,167,169,171,"Expression",-23,31,33,37,41,43,45,173,175,177,178,180,181,182,184,185,186,188,189,190,201,203,205,206,"Type",-3,88,103,109,"ClassItem"],["openedBy",23,"<",38,"InterpolationStart",56,"[",60,"{",73,"(",160,"JSXStartCloseTag"],["closedBy",-2,24,168,">",40,"InterpolationEnd",50,"]",61,"}",74,")",165,"JSXEndTag"]],propSources:[jsHighlight],skippedNodes:[0,5,6,278],repeatNodeCount:37,tokenData:"$Fq07[R!bOX%ZXY+gYZ-yZ[+g[]%Z]^.c^p%Zpq+gqr/mrs3cst:_tuEruvJSvwLkwx! Yxy!'iyz!(sz{!)}{|!,q|}!.O}!O!,q!O!P!/Y!P!Q!9j!Q!R#:O!R![#<_![!]#I_!]!^#Jk!^!_#Ku!_!`$![!`!a$$v!a!b$*T!b!c$,r!c!}Er!}#O$-|#O#P$/W#P#Q$4o#Q#R$5y#R#SEr#S#T$7W#T#o$8b#o#p$<r#p#q$=h#q#r$>x#r#s$@U#s$f%Z$f$g+g$g#BYEr#BY#BZ$A`#BZ$ISEr$IS$I_$A`$I_$I|Er$I|$I}$Dk$I}$JO$Dk$JO$JTEr$JT$JU$A`$JU$KVEr$KV$KW$A`$KW&FUEr&FU&FV$A`&FV;'SEr;'S;=`I|<%l?HTEr?HT?HU$A`?HUOEr(n%d_$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z&j&hT$i&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c&j&zP;=`<%l&c'|'U]$i&j(Z!bOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}!b(SU(Z!bOY'}Zw'}x#O'}#P;'S'};'S;=`(f<%lO'}!b(iP;=`<%l'}'|(oP;=`<%l&}'[(y]$i&j(WpOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(rp)wU(WpOY)rZr)rs#O)r#P;'S)r;'S;=`*Z<%lO)rp*^P;=`<%l)r'[*dP;=`<%l(r#S*nX(Wp(Z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g#S+^P;=`<%l*g(n+dP;=`<%l%Z07[+rq$i&j(Wp(Z!b'|0/lOX%ZXY+gYZ&cZ[+g[p%Zpq+gqr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p$f%Z$f$g+g$g#BY%Z#BY#BZ+g#BZ$IS%Z$IS$I_+g$I_$JT%Z$JT$JU+g$JU$KV%Z$KV$KW+g$KW&FU%Z&FU&FV+g&FV;'S%Z;'S;=`+a<%l?HT%Z?HT?HU+g?HUO%Z07[.ST(X#S$i&j'}0/lO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c07[.n_$i&j(Wp(Z!b'}0/lOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z)3p/x`$i&j!p),Q(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`0z!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW1V`#v(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`2X!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW2d_#v(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'At3l_(V':f$i&j(Z!bOY4kYZ5qZr4krs7nsw4kwx5qx!^4k!^!_8p!_#O4k#O#P5q#P#o4k#o#p8p#p;'S4k;'S;=`:X<%lO4k(^4r_$i&j(Z!bOY4kYZ5qZr4krs7nsw4kwx5qx!^4k!^!_8p!_#O4k#O#P5q#P#o4k#o#p8p#p;'S4k;'S;=`:X<%lO4k&z5vX$i&jOr5qrs6cs!^5q!^!_6y!_#o5q#o#p6y#p;'S5q;'S;=`7h<%lO5q&z6jT$d`$i&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c`6|TOr6yrs7]s;'S6y;'S;=`7b<%lO6y`7bO$d``7eP;=`<%l6y&z7kP;=`<%l5q(^7w]$d`$i&j(Z!bOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}!r8uZ(Z!bOY8pYZ6yZr8prs9hsw8pwx6yx#O8p#O#P6y#P;'S8p;'S;=`:R<%lO8p!r9oU$d`(Z!bOY'}Zw'}x#O'}#P;'S'};'S;=`(f<%lO'}!r:UP;=`<%l8p(^:[P;=`<%l4k%9[:hh$i&j(Wp(Z!bOY%ZYZ&cZq%Zqr<Srs&}st%ZtuCruw%Zwx(rx!^%Z!^!_*g!_!c%Z!c!}Cr!}#O%Z#O#P&c#P#R%Z#R#SCr#S#T%Z#T#oCr#o#p*g#p$g%Z$g;'SCr;'S;=`El<%lOCr(r<__WS$i&j(Wp(Z!bOY<SYZ&cZr<Srs=^sw<Swx@nx!^<S!^!_Bm!_#O<S#O#P>`#P#o<S#o#pBm#p;'S<S;'S;=`Cl<%lO<S(Q=g]WS$i&j(Z!bOY=^YZ&cZw=^wx>`x!^=^!^!_?q!_#O=^#O#P>`#P#o=^#o#p?q#p;'S=^;'S;=`@h<%lO=^&n>gXWS$i&jOY>`YZ&cZ!^>`!^!_?S!_#o>`#o#p?S#p;'S>`;'S;=`?k<%lO>`S?XSWSOY?SZ;'S?S;'S;=`?e<%lO?SS?hP;=`<%l?S&n?nP;=`<%l>`!f?xWWS(Z!bOY?qZw?qwx?Sx#O?q#O#P?S#P;'S?q;'S;=`@b<%lO?q!f@eP;=`<%l?q(Q@kP;=`<%l=^'`@w]WS$i&j(WpOY@nYZ&cZr@nrs>`s!^@n!^!_Ap!_#O@n#O#P>`#P#o@n#o#pAp#p;'S@n;'S;=`Bg<%lO@ntAwWWS(WpOYApZrAprs?Ss#OAp#O#P?S#P;'SAp;'S;=`Ba<%lOAptBdP;=`<%lAp'`BjP;=`<%l@n#WBvYWS(Wp(Z!bOYBmZrBmrs?qswBmwxApx#OBm#O#P?S#P;'SBm;'S;=`Cf<%lOBm#WCiP;=`<%lBm(rCoP;=`<%l<S%9[C}i$i&j(o%1l(Wp(Z!bOY%ZYZ&cZr%Zrs&}st%ZtuCruw%Zwx(rx!Q%Z!Q![Cr![!^%Z!^!_*g!_!c%Z!c!}Cr!}#O%Z#O#P&c#P#R%Z#R#SCr#S#T%Z#T#oCr#o#p*g#p$g%Z$g;'SCr;'S;=`El<%lOCr%9[EoP;=`<%lCr07[FRk$i&j(Wp(Z!b$]#t(T,2j(e$I[OY%ZYZ&cZr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$g%Z$g;'SEr;'S;=`I|<%lOEr+dHRk$i&j(Wp(Z!b$]#tOY%ZYZ&cZr%Zrs&}st%ZtuGvuw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Gv![!^%Z!^!_*g!_!c%Z!c!}Gv!}#O%Z#O#P&c#P#R%Z#R#SGv#S#T%Z#T#oGv#o#p*g#p$g%Z$g;'SGv;'S;=`Iv<%lOGv+dIyP;=`<%lGv07[JPP;=`<%lEr(KWJ_`$i&j(Wp(Z!b#p(ChOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KWKl_$i&j$Q(Ch(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z,#xLva(z+JY$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sv%ZvwM{wx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KWNW`$i&j#z(Ch(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'At! c_(Y';W$i&j(WpOY!!bYZ!#hZr!!brs!#hsw!!bwx!$xx!^!!b!^!_!%z!_#O!!b#O#P!#h#P#o!!b#o#p!%z#p;'S!!b;'S;=`!'c<%lO!!b'l!!i_$i&j(WpOY!!bYZ!#hZr!!brs!#hsw!!bwx!$xx!^!!b!^!_!%z!_#O!!b#O#P!#h#P#o!!b#o#p!%z#p;'S!!b;'S;=`!'c<%lO!!b&z!#mX$i&jOw!#hwx6cx!^!#h!^!_!$Y!_#o!#h#o#p!$Y#p;'S!#h;'S;=`!$r<%lO!#h`!$]TOw!$Ywx7]x;'S!$Y;'S;=`!$l<%lO!$Y`!$oP;=`<%l!$Y&z!$uP;=`<%l!#h'l!%R]$d`$i&j(WpOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(r!Q!&PZ(WpOY!%zYZ!$YZr!%zrs!$Ysw!%zwx!&rx#O!%z#O#P!$Y#P;'S!%z;'S;=`!']<%lO!%z!Q!&yU$d`(WpOY)rZr)rs#O)r#P;'S)r;'S;=`*Z<%lO)r!Q!'`P;=`<%l!%z'l!'fP;=`<%l!!b/5|!'t_!l/.^$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#&U!)O_!k!Lf$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z-!n!*[b$i&j(Wp(Z!b(U%&f#q(ChOY%ZYZ&cZr%Zrs&}sw%Zwx(rxz%Zz{!+d{!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW!+o`$i&j(Wp(Z!b#n(ChOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z+;x!,|`$i&j(Wp(Z!br+4YOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z,$U!.Z_!]+Jf$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[!/ec$i&j(Wp(Z!b!Q.2^OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!0p!P!Q%Z!Q![!3Y![!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#%|!0ya$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!2O!P!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#%|!2Z_![!L^$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!3eg$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!3Y![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S!3Y#S#X%Z#X#Y!4|#Y#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!5Vg$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx{%Z{|!6n|}%Z}!O!6n!O!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!6wc$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!8_c$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[!9uf$i&j(Wp(Z!b#o(ChOY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcxz!;Zz{#-}{!P!;Z!P!Q#/d!Q!^!;Z!^!_#(i!_!`#7S!`!a#8i!a!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z?O!;fb$i&j(Wp(Z!b!X7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z>^!<w`$i&j(Z!b!X7`OY!<nYZ&cZw!<nwx!=yx!P!<n!P!Q!Eq!Q!^!<n!^!_!Gr!_!}!<n!}#O!KS#O#P!Dy#P#o!<n#o#p!Gr#p;'S!<n;'S;=`!L]<%lO!<n<z!>Q^$i&j!X7`OY!=yYZ&cZ!P!=y!P!Q!>|!Q!^!=y!^!_!@c!_!}!=y!}#O!CW#O#P!Dy#P#o!=y#o#p!@c#p;'S!=y;'S;=`!Ek<%lO!=y<z!?Td$i&j!X7`O!^&c!_#W&c#W#X!>|#X#Z&c#Z#[!>|#[#]&c#]#^!>|#^#a&c#a#b!>|#b#g&c#g#h!>|#h#i&c#i#j!>|#j#k!>|#k#m&c#m#n!>|#n#o&c#p;'S&c;'S;=`&w<%lO&c7`!@hX!X7`OY!@cZ!P!@c!P!Q!AT!Q!}!@c!}#O!Ar#O#P!Bq#P;'S!@c;'S;=`!CQ<%lO!@c7`!AYW!X7`#W#X!AT#Z#[!AT#]#^!AT#a#b!AT#g#h!AT#i#j!AT#j#k!AT#m#n!AT7`!AuVOY!ArZ#O!Ar#O#P!B[#P#Q!@c#Q;'S!Ar;'S;=`!Bk<%lO!Ar7`!B_SOY!ArZ;'S!Ar;'S;=`!Bk<%lO!Ar7`!BnP;=`<%l!Ar7`!BtSOY!@cZ;'S!@c;'S;=`!CQ<%lO!@c7`!CTP;=`<%l!@c<z!C][$i&jOY!CWYZ&cZ!^!CW!^!_!Ar!_#O!CW#O#P!DR#P#Q!=y#Q#o!CW#o#p!Ar#p;'S!CW;'S;=`!Ds<%lO!CW<z!DWX$i&jOY!CWYZ&cZ!^!CW!^!_!Ar!_#o!CW#o#p!Ar#p;'S!CW;'S;=`!Ds<%lO!CW<z!DvP;=`<%l!CW<z!EOX$i&jOY!=yYZ&cZ!^!=y!^!_!@c!_#o!=y#o#p!@c#p;'S!=y;'S;=`!Ek<%lO!=y<z!EnP;=`<%l!=y>^!Ezl$i&j(Z!b!X7`OY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#W&}#W#X!Eq#X#Z&}#Z#[!Eq#[#]&}#]#^!Eq#^#a&}#a#b!Eq#b#g&}#g#h!Eq#h#i&}#i#j!Eq#j#k!Eq#k#m&}#m#n!Eq#n#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}8r!GyZ(Z!b!X7`OY!GrZw!Grwx!@cx!P!Gr!P!Q!Hl!Q!}!Gr!}#O!JU#O#P!Bq#P;'S!Gr;'S;=`!J|<%lO!Gr8r!Hse(Z!b!X7`OY'}Zw'}x#O'}#P#W'}#W#X!Hl#X#Z'}#Z#[!Hl#[#]'}#]#^!Hl#^#a'}#a#b!Hl#b#g'}#g#h!Hl#h#i'}#i#j!Hl#j#k!Hl#k#m'}#m#n!Hl#n;'S'};'S;=`(f<%lO'}8r!JZX(Z!bOY!JUZw!JUwx!Arx#O!JU#O#P!B[#P#Q!Gr#Q;'S!JU;'S;=`!Jv<%lO!JU8r!JyP;=`<%l!JU8r!KPP;=`<%l!Gr>^!KZ^$i&j(Z!bOY!KSYZ&cZw!KSwx!CWx!^!KS!^!_!JU!_#O!KS#O#P!DR#P#Q!<n#Q#o!KS#o#p!JU#p;'S!KS;'S;=`!LV<%lO!KS>^!LYP;=`<%l!KS>^!L`P;=`<%l!<n=l!Ll`$i&j(Wp!X7`OY!LcYZ&cZr!Lcrs!=ys!P!Lc!P!Q!Mn!Q!^!Lc!^!_# o!_!}!Lc!}#O#%P#O#P!Dy#P#o!Lc#o#p# o#p;'S!Lc;'S;=`#&Y<%lO!Lc=l!Mwl$i&j(Wp!X7`OY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#W(r#W#X!Mn#X#Z(r#Z#[!Mn#[#](r#]#^!Mn#^#a(r#a#b!Mn#b#g(r#g#h!Mn#h#i(r#i#j!Mn#j#k!Mn#k#m(r#m#n!Mn#n#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(r8Q# vZ(Wp!X7`OY# oZr# ors!@cs!P# o!P!Q#!i!Q!}# o!}#O#$R#O#P!Bq#P;'S# o;'S;=`#$y<%lO# o8Q#!pe(Wp!X7`OY)rZr)rs#O)r#P#W)r#W#X#!i#X#Z)r#Z#[#!i#[#])r#]#^#!i#^#a)r#a#b#!i#b#g)r#g#h#!i#h#i)r#i#j#!i#j#k#!i#k#m)r#m#n#!i#n;'S)r;'S;=`*Z<%lO)r8Q#$WX(WpOY#$RZr#$Rrs!Ars#O#$R#O#P!B[#P#Q# o#Q;'S#$R;'S;=`#$s<%lO#$R8Q#$vP;=`<%l#$R8Q#$|P;=`<%l# o=l#%W^$i&j(WpOY#%PYZ&cZr#%Prs!CWs!^#%P!^!_#$R!_#O#%P#O#P!DR#P#Q!Lc#Q#o#%P#o#p#$R#p;'S#%P;'S;=`#&S<%lO#%P=l#&VP;=`<%l#%P=l#&]P;=`<%l!Lc?O#&kn$i&j(Wp(Z!b!X7`OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#W%Z#W#X#&`#X#Z%Z#Z#[#&`#[#]%Z#]#^#&`#^#a%Z#a#b#&`#b#g%Z#g#h#&`#h#i%Z#i#j#&`#j#k#&`#k#m%Z#m#n#&`#n#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z9d#(r](Wp(Z!b!X7`OY#(iZr#(irs!Grsw#(iwx# ox!P#(i!P!Q#)k!Q!}#(i!}#O#+`#O#P!Bq#P;'S#(i;'S;=`#,`<%lO#(i9d#)th(Wp(Z!b!X7`OY*gZr*grs'}sw*gwx)rx#O*g#P#W*g#W#X#)k#X#Z*g#Z#[#)k#[#]*g#]#^#)k#^#a*g#a#b#)k#b#g*g#g#h#)k#h#i*g#i#j#)k#j#k#)k#k#m*g#m#n#)k#n;'S*g;'S;=`+Z<%lO*g9d#+gZ(Wp(Z!bOY#+`Zr#+`rs!JUsw#+`wx#$Rx#O#+`#O#P!B[#P#Q#(i#Q;'S#+`;'S;=`#,Y<%lO#+`9d#,]P;=`<%l#+`9d#,cP;=`<%l#(i?O#,o`$i&j(Wp(Z!bOY#,fYZ&cZr#,frs!KSsw#,fwx#%Px!^#,f!^!_#+`!_#O#,f#O#P!DR#P#Q!;Z#Q#o#,f#o#p#+`#p;'S#,f;'S;=`#-q<%lO#,f?O#-tP;=`<%l#,f?O#-zP;=`<%l!;Z07[#.[b$i&j(Wp(Z!b(O0/l!X7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z07[#/o_$i&j(Wp(Z!bT0/lOY#/dYZ&cZr#/drs#0nsw#/dwx#4Ox!^#/d!^!_#5}!_#O#/d#O#P#1p#P#o#/d#o#p#5}#p;'S#/d;'S;=`#6|<%lO#/d06j#0w]$i&j(Z!bT0/lOY#0nYZ&cZw#0nwx#1px!^#0n!^!_#3R!_#O#0n#O#P#1p#P#o#0n#o#p#3R#p;'S#0n;'S;=`#3x<%lO#0n05W#1wX$i&jT0/lOY#1pYZ&cZ!^#1p!^!_#2d!_#o#1p#o#p#2d#p;'S#1p;'S;=`#2{<%lO#1p0/l#2iST0/lOY#2dZ;'S#2d;'S;=`#2u<%lO#2d0/l#2xP;=`<%l#2d05W#3OP;=`<%l#1p01O#3YW(Z!bT0/lOY#3RZw#3Rwx#2dx#O#3R#O#P#2d#P;'S#3R;'S;=`#3r<%lO#3R01O#3uP;=`<%l#3R06j#3{P;=`<%l#0n05x#4X]$i&j(WpT0/lOY#4OYZ&cZr#4Ors#1ps!^#4O!^!_#5Q!_#O#4O#O#P#1p#P#o#4O#o#p#5Q#p;'S#4O;'S;=`#5w<%lO#4O00^#5XW(WpT0/lOY#5QZr#5Qrs#2ds#O#5Q#O#P#2d#P;'S#5Q;'S;=`#5q<%lO#5Q00^#5tP;=`<%l#5Q05x#5zP;=`<%l#4O01p#6WY(Wp(Z!bT0/lOY#5}Zr#5}rs#3Rsw#5}wx#5Qx#O#5}#O#P#2d#P;'S#5};'S;=`#6v<%lO#5}01p#6yP;=`<%l#5}07[#7PP;=`<%l#/d)3h#7ab$i&j$Q(Ch(Wp(Z!b!X7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;ZAt#8vb$Z#t$i&j(Wp(Z!b!X7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z'Ad#:Zp$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!3Y!P!Q%Z!Q![#<_![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S#<_#S#U%Z#U#V#?i#V#X%Z#X#Y!4|#Y#b%Z#b#c#>_#c#d#Bq#d#l%Z#l#m#Es#m#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#<jk$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!3Y!P!Q%Z!Q![#<_![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S#<_#S#X%Z#X#Y!4|#Y#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#>j_$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#?rd$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!R#AQ!R!S#AQ!S!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#AQ#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#A]f$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!R#AQ!R!S#AQ!S!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#AQ#S#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#Bzc$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!Y#DV!Y!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#DV#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#Dbe$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!Y#DV!Y!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#DV#S#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#E|g$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![#Ge![!^%Z!^!_*g!_!c%Z!c!i#Ge!i#O%Z#O#P&c#P#R%Z#R#S#Ge#S#T%Z#T#Z#Ge#Z#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#Gpi$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![#Ge![!^%Z!^!_*g!_!c%Z!c!i#Ge!i#O%Z#O#P&c#P#R%Z#R#S#Ge#S#T%Z#T#Z#Ge#Z#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z*)x#Il_!g$b$i&j$O)Lv(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z)[#Jv_al$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z04f#LS^h#)`#R-<U(Wp(Z!b$n7`OY*gZr*grs'}sw*gwx)rx!P*g!P!Q#MO!Q!^*g!^!_#Mt!_!`$ f!`#O*g#P;'S*g;'S;=`+Z<%lO*g(n#MXX$k&j(Wp(Z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g(El#M}Z#r(Ch(Wp(Z!bOY*gZr*grs'}sw*gwx)rx!_*g!_!`#Np!`#O*g#P;'S*g;'S;=`+Z<%lO*g(El#NyX$Q(Ch(Wp(Z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g(El$ oX#s(Ch(Wp(Z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g*)x$!ga#`*!Y$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`0z!`!a$#l!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(K[$#w_#k(Cl$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z*)x$%Vag!*r#s(Ch$f#|$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`$&[!`!a$'f!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$&g_#s(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$'qa#r(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`!a$(v!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$)R`#r(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(Kd$*`a(r(Ct$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!a%Z!a!b$+e!b#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$+p`$i&j#{(Ch(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#`$,}_!|$Ip$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z04f$.X_!S0,v$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(n$/]Z$i&jO!^$0O!^!_$0f!_#i$0O#i#j$0k#j#l$0O#l#m$2^#m#o$0O#o#p$0f#p;'S$0O;'S;=`$4i<%lO$0O(n$0VT_#S$i&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c#S$0kO_#S(n$0p[$i&jO!Q&c!Q![$1f![!^&c!_!c&c!c!i$1f!i#T&c#T#Z$1f#Z#o&c#o#p$3|#p;'S&c;'S;=`&w<%lO&c(n$1kZ$i&jO!Q&c!Q![$2^![!^&c!_!c&c!c!i$2^!i#T&c#T#Z$2^#Z#o&c#p;'S&c;'S;=`&w<%lO&c(n$2cZ$i&jO!Q&c!Q![$3U![!^&c!_!c&c!c!i$3U!i#T&c#T#Z$3U#Z#o&c#p;'S&c;'S;=`&w<%lO&c(n$3ZZ$i&jO!Q&c!Q![$0O![!^&c!_!c&c!c!i$0O!i#T&c#T#Z$0O#Z#o&c#p;'S&c;'S;=`&w<%lO&c#S$4PR!Q![$4Y!c!i$4Y#T#Z$4Y#S$4]S!Q![$4Y!c!i$4Y#T#Z$4Y#q#r$0f(n$4lP;=`<%l$0O#1[$4z_!Y#)l$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$6U`#x(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z+;p$7c_$i&j(Wp(Z!b(a+4QOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[$8qk$i&j(Wp(Z!b(T,2j$_#t(e$I[OY%ZYZ&cZr%Zrs&}st%Ztu$8buw%Zwx(rx}%Z}!O$:f!O!Q%Z!Q![$8b![!^%Z!^!_*g!_!c%Z!c!}$8b!}#O%Z#O#P&c#P#R%Z#R#S$8b#S#T%Z#T#o$8b#o#p*g#p$g%Z$g;'S$8b;'S;=`$<l<%lO$8b+d$:qk$i&j(Wp(Z!b$_#tOY%ZYZ&cZr%Zrs&}st%Ztu$:fuw%Zwx(rx}%Z}!O$:f!O!Q%Z!Q![$:f![!^%Z!^!_*g!_!c%Z!c!}$:f!}#O%Z#O#P&c#P#R%Z#R#S$:f#S#T%Z#T#o$:f#o#p*g#p$g%Z$g;'S$:f;'S;=`$<f<%lO$:f+d$<iP;=`<%l$:f07[$<oP;=`<%l$8b#Jf$<{X!_#Hb(Wp(Z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g,#x$=sa(y+JY$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p#q$+e#q;'S%Z;'S;=`+a<%lO%Z)>v$?V_!^(CdvBr$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z?O$@a_!q7`$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[$Aq|$i&j(Wp(Z!b'|0/l$]#t(T,2j(e$I[OX%ZXY+gYZ&cZ[+g[p%Zpq+gqr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$f%Z$f$g+g$g#BYEr#BY#BZ$A`#BZ$ISEr$IS$I_$A`$I_$JTEr$JT$JU$A`$JU$KVEr$KV$KW$A`$KW&FUEr&FU&FV$A`&FV;'SEr;'S;=`I|<%l?HTEr?HT?HU$A`?HUOEr07[$D|k$i&j(Wp(Z!b'}0/l$]#t(T,2j(e$I[OY%ZYZ&cZr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$g%Z$g;'SEr;'S;=`I|<%lOEr",tokenizers:[noSemicolon,noSemicolonType,operatorToken,jsx,2,3,4,5,6,7,8,9,10,11,12,13,14,insertSemicolon,new LocalTokenGroup("$S~RRtu[#O#Pg#S#T#|~_P#o#pb~gOx~~jVO#i!P#i#j!U#j#l!P#l#m!q#m;'S!P;'S;=`#v<%lO!P~!UO!U~~!XS!Q![!e!c!i!e#T#Z!e#o#p#Z~!hR!Q![!q!c!i!q#T#Z!q~!tR!Q![!}!c!i!}#T#Z!}~#QR!Q![!P!c!i!P#T#Z!P~#^R!Q![#g!c!i#g#T#Z#g~#jS!Q![#g!c!i#g#T#Z#g#q#r!P~#yP;=`<%l!P~$RO(c~~",141,340),new LocalTokenGroup("j~RQYZXz{^~^O(Q~~aP!P!Qd~iO(R~~",25,323)],topRules:{Script:[0,7],SingleExpression:[1,276],SingleClassItem:[2,277]},dialects:{jsx:0,ts:15175},dynamicPrecedences:{80:1,82:1,94:1,169:1,199:1},specialized:[{term:327,get:h=>spec_identifier[h]||-1},{term:343,get:h=>spec_word[h]||-1},{term:95,get:h=>spec_LessThan[h]||-1}],tokenPrec:15201}),snippets=[snippetCompletion("function ${name}(${params}) {\n	${}\n}",{label:"function",detail:"definition",type:"keyword"}),snippetCompletion("for (let ${index} = 0; ${index} < ${bound}; ${index}++) {\n	${}\n}",{label:"for",detail:"loop",type:"keyword"}),snippetCompletion("for (let ${name} of ${collection}) {\n	${}\n}",{label:"for",detail:"of loop",type:"keyword"}),snippetCompletion("do {\n	${}\n} while (${})",{label:"do",detail:"loop",type:"keyword"}),snippetCompletion("while (${}) {\n	${}\n}",{label:"while",detail:"loop",type:"keyword"}),snippetCompletion(`try {
	\${}
} catch (\${error}) {
	\${}
}`,{label:"try",detail:"/ catch block",type:"keyword"}),snippetCompletion("if (${}) {\n	${}\n}",{label:"if",detail:"block",type:"keyword"}),snippetCompletion(`if (\${}) {
	\${}
} else {
	\${}
}`,{label:"if",detail:"/ else block",type:"keyword"}),snippetCompletion(`class \${name} {
	constructor(\${params}) {
		\${}
	}
}`,{label:"class",detail:"definition",type:"keyword"}),snippetCompletion('import {${names}} from "${module}"\n${}',{label:"import",detail:"named",type:"keyword"}),snippetCompletion('import ${name} from "${module}"\n${}',{label:"import",detail:"default",type:"keyword"})],typescriptSnippets=snippets.concat([snippetCompletion("interface ${name} {\n	${}\n}",{label:"interface",detail:"definition",type:"keyword"}),snippetCompletion("type ${name} = ${type}",{label:"type",detail:"definition",type:"keyword"}),snippetCompletion("enum ${name} {\n	${}\n}",{label:"enum",detail:"definition",type:"keyword"})]),cache=new NodeWeakMap,ScopeNodes=new Set(["Script","Block","FunctionExpression","FunctionDeclaration","ArrowFunction","MethodDeclaration","ForStatement"]);function defID(h){return(r,o)=>{let u=r.node.getChild("VariableDefinition");return u&&o(u,h),!0}}const functionContext=["FunctionDeclaration"],gatherCompletions={FunctionDeclaration:defID("function"),ClassDeclaration:defID("class"),ClassExpression:()=>!0,EnumDeclaration:defID("constant"),TypeAliasDeclaration:defID("type"),NamespaceDeclaration:defID("namespace"),VariableDefinition(h,r){h.matchContext(functionContext)||r(h,"variable")},TypeDefinition(h,r){r(h,"type")},__proto__:null};function getScope(h,r){let o=cache.get(r);if(o)return o;let u=[],g=!0;function k(A,R){let q=h.sliceString(A.from,A.to);u.push({label:q,type:R})}return r.cursor(IterMode.IncludeAnonymous).iterate(A=>{if(g)g=!1;else if(A.name){let R=gatherCompletions[A.name];if(R&&R(A,k)||ScopeNodes.has(A.name))return!1}else if(A.to-A.from>8192){for(let R of getScope(h,A.node))u.push(R);return!1}}),cache.set(r,u),u}const Identifier=/^[\w$\xa1-\uffff][\w$\d\xa1-\uffff]*$/,dontComplete=["TemplateString","String","RegExp","LineComment","BlockComment","VariableDefinition","TypeDefinition","Label","PropertyDefinition","PropertyName","PrivatePropertyDefinition","PrivatePropertyName","JSXText","JSXAttributeValue","JSXOpenTag","JSXCloseTag","JSXSelfClosingTag",".","?."];function localCompletionSource(h){let r=syntaxTree(h.state).resolveInner(h.pos,-1);if(dontComplete.indexOf(r.name)>-1)return null;let o=r.name=="VariableName"||r.to-r.from<20&&Identifier.test(h.state.sliceDoc(r.from,r.to));if(!o&&!h.explicit)return null;let u=[];for(let g=r;g;g=g.parent)ScopeNodes.has(g.name)&&(u=u.concat(getScope(h.state.doc,g)));return{options:u,from:o?r.from:h.pos,validFor:Identifier}}const javascriptLanguage=LRLanguage.define({name:"javascript",parser:parser.configure({props:[indentNodeProp.add({IfStatement:continuedIndent({except:/^\s*({|else\b)/}),TryStatement:continuedIndent({except:/^\s*({|catch\b|finally\b)/}),LabeledStatement:flatIndent,SwitchBody:h=>{let r=h.textAfter,o=/^\s*\}/.test(r),u=/^\s*(case|default)\b/.test(r);return h.baseIndent+(o?0:u?1:2)*h.unit},Block:delimitedIndent({closing:"}"}),ArrowFunction:h=>h.baseIndent+h.unit,"TemplateString BlockComment":()=>null,"Statement Property":continuedIndent({except:/^\s*{/}),JSXElement(h){let r=/^\s*<\//.test(h.textAfter);return h.lineIndent(h.node.from)+(r?0:h.unit)},JSXEscape(h){let r=/\s*\}/.test(h.textAfter);return h.lineIndent(h.node.from)+(r?0:h.unit)},"JSXOpenTag JSXSelfClosingTag"(h){return h.column(h.node.from)+h.unit}}),foldNodeProp.add({"Block ClassBody SwitchBody EnumBody ObjectExpression ArrayExpression ObjectType":foldInside,BlockComment(h){return{from:h.from+2,to:h.to-2}}})]}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"`"]},commentTokens:{line:"//",block:{open:"/*",close:"*/"}},indentOnInput:/^\s*(?:case |default:|\{|\}|<\/)$/,wordChars:"$"}}),jsxSublanguage={test:h=>/^JSX/.test(h.name),facet:defineLanguageFacet({commentTokens:{block:{open:"{/*",close:"*/}"}}})},typescriptLanguage=javascriptLanguage.configure({dialect:"ts"},"typescript"),jsxLanguage=javascriptLanguage.configure({dialect:"jsx",props:[sublanguageProp.add(h=>h.isTop?[jsxSublanguage]:void 0)]}),tsxLanguage=javascriptLanguage.configure({dialect:"jsx ts",props:[sublanguageProp.add(h=>h.isTop?[jsxSublanguage]:void 0)]},"typescript");let kwCompletion=h=>({label:h,type:"keyword"});const keywords="break case const continue default delete export extends false finally in instanceof let new return static super switch this throw true typeof var yield".split(" ").map(kwCompletion),typescriptKeywords=keywords.concat(["declare","implements","private","protected","public"].map(kwCompletion));function javascript(h={}){let r=h.jsx?h.typescript?tsxLanguage:jsxLanguage:h.typescript?typescriptLanguage:javascriptLanguage,o=h.typescript?typescriptSnippets.concat(typescriptKeywords):snippets.concat(keywords);return new LanguageSupport(r,[javascriptLanguage.data.of({autocomplete:ifNotIn(dontComplete,completeFromList(o))}),javascriptLanguage.data.of({autocomplete:localCompletionSource}),h.jsx?autoCloseTags$1:[]])}function findOpenTag(h){for(;;){if(h.name=="JSXOpenTag"||h.name=="JSXSelfClosingTag"||h.name=="JSXFragmentTag")return h;if(h.name=="JSXEscape"||!h.parent)return null;h=h.parent}}function elementName$1(h,r,o=h.length){for(let u=r==null?void 0:r.firstChild;u;u=u.nextSibling)if(u.name=="JSXIdentifier"||u.name=="JSXBuiltin"||u.name=="JSXNamespacedName"||u.name=="JSXMemberExpression")return h.sliceString(u.from,Math.min(u.to,o));return""}const android=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),autoCloseTags$1=EditorView.inputHandler.of((h,r,o,u,g)=>{if((android?h.composing:h.compositionStarted)||h.state.readOnly||r!=o||u!=">"&&u!="/"||!javascriptLanguage.isActiveAt(h.state,r,-1))return!1;let k=g(),{state:A}=k,R=A.changeByRange(q=>{var _;let{head:ee}=q,te=syntaxTree(A).resolveInner(ee-1,-1),ne;if(te.name=="JSXStartTag"&&(te=te.parent),!(A.doc.sliceString(ee-1,ee)!=u||te.name=="JSXAttributeValue"&&te.to>ee)){if(u==">"&&te.name=="JSXFragmentTag")return{range:q,changes:{from:ee,insert:"</>"}};if(u=="/"&&te.name=="JSXStartCloseTag"){let re=te.parent,oe=re.parent;if(oe&&re.from==ee-2&&((ne=elementName$1(A.doc,oe.firstChild,ee))||((_=oe.firstChild)===null||_===void 0?void 0:_.name)=="JSXFragmentTag")){let le=`${ne}>`;return{range:EditorSelection.cursor(ee+le.length,-1),changes:{from:ee,insert:le}}}}else if(u==">"){let re=findOpenTag(te);if(re&&re.name=="JSXOpenTag"&&!/^\/?>|^<\//.test(A.doc.sliceString(ee,ee+2))&&(ne=elementName$1(A.doc,re,ee)))return{range:q,changes:{from:ee,insert:`</${ne}>`}}}}return{range:q}});return R.changes.empty?!1:(h.dispatch([k,A.update(R,{userEvent:"input.complete",scrollIntoView:!0})]),!0)}),Targets=["_blank","_self","_top","_parent"],Charsets=["ascii","utf-8","utf-16","latin1","latin1"],Methods=["get","post","put","delete"],Encs=["application/x-www-form-urlencoded","multipart/form-data","text/plain"],Bool=["true","false"],S={},Tags={a:{attrs:{href:null,ping:null,type:null,media:null,target:Targets,hreflang:null}},abbr:S,address:S,area:{attrs:{alt:null,coords:null,href:null,target:null,ping:null,media:null,hreflang:null,type:null,shape:["default","rect","circle","poly"]}},article:S,aside:S,audio:{attrs:{src:null,mediagroup:null,crossorigin:["anonymous","use-credentials"],preload:["none","metadata","auto"],autoplay:["autoplay"],loop:["loop"],controls:["controls"]}},b:S,base:{attrs:{href:null,target:Targets}},bdi:S,bdo:S,blockquote:{attrs:{cite:null}},body:S,br:S,button:{attrs:{form:null,formaction:null,name:null,value:null,autofocus:["autofocus"],disabled:["autofocus"],formenctype:Encs,formmethod:Methods,formnovalidate:["novalidate"],formtarget:Targets,type:["submit","reset","button"]}},canvas:{attrs:{width:null,height:null}},caption:S,center:S,cite:S,code:S,col:{attrs:{span:null}},colgroup:{attrs:{span:null}},command:{attrs:{type:["command","checkbox","radio"],label:null,icon:null,radiogroup:null,command:null,title:null,disabled:["disabled"],checked:["checked"]}},data:{attrs:{value:null}},datagrid:{attrs:{disabled:["disabled"],multiple:["multiple"]}},datalist:{attrs:{data:null}},dd:S,del:{attrs:{cite:null,datetime:null}},details:{attrs:{open:["open"]}},dfn:S,div:S,dl:S,dt:S,em:S,embed:{attrs:{src:null,type:null,width:null,height:null}},eventsource:{attrs:{src:null}},fieldset:{attrs:{disabled:["disabled"],form:null,name:null}},figcaption:S,figure:S,footer:S,form:{attrs:{action:null,name:null,"accept-charset":Charsets,autocomplete:["on","off"],enctype:Encs,method:Methods,novalidate:["novalidate"],target:Targets}},h1:S,h2:S,h3:S,h4:S,h5:S,h6:S,head:{children:["title","base","link","style","meta","script","noscript","command"]},header:S,hgroup:S,hr:S,html:{attrs:{manifest:null}},i:S,iframe:{attrs:{src:null,srcdoc:null,name:null,width:null,height:null,sandbox:["allow-top-navigation","allow-same-origin","allow-forms","allow-scripts"],seamless:["seamless"]}},img:{attrs:{alt:null,src:null,ismap:null,usemap:null,width:null,height:null,crossorigin:["anonymous","use-credentials"]}},input:{attrs:{alt:null,dirname:null,form:null,formaction:null,height:null,list:null,max:null,maxlength:null,min:null,name:null,pattern:null,placeholder:null,size:null,src:null,step:null,value:null,width:null,accept:["audio/*","video/*","image/*"],autocomplete:["on","off"],autofocus:["autofocus"],checked:["checked"],disabled:["disabled"],formenctype:Encs,formmethod:Methods,formnovalidate:["novalidate"],formtarget:Targets,multiple:["multiple"],readonly:["readonly"],required:["required"],type:["hidden","text","search","tel","url","email","password","datetime","date","month","week","time","datetime-local","number","range","color","checkbox","radio","file","submit","image","reset","button"]}},ins:{attrs:{cite:null,datetime:null}},kbd:S,keygen:{attrs:{challenge:null,form:null,name:null,autofocus:["autofocus"],disabled:["disabled"],keytype:["RSA"]}},label:{attrs:{for:null,form:null}},legend:S,li:{attrs:{value:null}},link:{attrs:{href:null,type:null,hreflang:null,media:null,sizes:["all","16x16","16x16 32x32","16x16 32x32 64x64"]}},map:{attrs:{name:null}},mark:S,menu:{attrs:{label:null,type:["list","context","toolbar"]}},meta:{attrs:{content:null,charset:Charsets,name:["viewport","application-name","author","description","generator","keywords"],"http-equiv":["content-language","content-type","default-style","refresh"]}},meter:{attrs:{value:null,min:null,low:null,high:null,max:null,optimum:null}},nav:S,noscript:S,object:{attrs:{data:null,type:null,name:null,usemap:null,form:null,width:null,height:null,typemustmatch:["typemustmatch"]}},ol:{attrs:{reversed:["reversed"],start:null,type:["1","a","A","i","I"]},children:["li","script","template","ul","ol"]},optgroup:{attrs:{disabled:["disabled"],label:null}},option:{attrs:{disabled:["disabled"],label:null,selected:["selected"],value:null}},output:{attrs:{for:null,form:null,name:null}},p:S,param:{attrs:{name:null,value:null}},pre:S,progress:{attrs:{value:null,max:null}},q:{attrs:{cite:null}},rp:S,rt:S,ruby:S,samp:S,script:{attrs:{type:["text/javascript"],src:null,async:["async"],defer:["defer"],charset:Charsets}},section:S,select:{attrs:{form:null,name:null,size:null,autofocus:["autofocus"],disabled:["disabled"],multiple:["multiple"]}},slot:{attrs:{name:null}},small:S,source:{attrs:{src:null,type:null,media:null}},span:S,strong:S,style:{attrs:{type:["text/css"],media:null,scoped:null}},sub:S,summary:S,sup:S,table:S,tbody:S,td:{attrs:{colspan:null,rowspan:null,headers:null}},template:S,textarea:{attrs:{dirname:null,form:null,maxlength:null,name:null,placeholder:null,rows:null,cols:null,autofocus:["autofocus"],disabled:["disabled"],readonly:["readonly"],required:["required"],wrap:["soft","hard"]}},tfoot:S,th:{attrs:{colspan:null,rowspan:null,headers:null,scope:["row","col","rowgroup","colgroup"]}},thead:S,time:{attrs:{datetime:null}},title:S,tr:S,track:{attrs:{src:null,label:null,default:null,kind:["subtitles","captions","descriptions","chapters","metadata"],srclang:null}},ul:{children:["li","script","template","ul","ol"]},var:S,video:{attrs:{src:null,poster:null,width:null,height:null,crossorigin:["anonymous","use-credentials"],preload:["auto","metadata","none"],autoplay:["autoplay"],mediagroup:["movie"],muted:["muted"],controls:["controls"]}},wbr:S},GlobalAttrs={accesskey:null,class:null,contenteditable:Bool,contextmenu:null,dir:["ltr","rtl","auto"],draggable:["true","false","auto"],dropzone:["copy","move","link","string:","file:"],hidden:["hidden"],id:null,inert:["inert"],itemid:null,itemprop:null,itemref:null,itemscope:["itemscope"],itemtype:null,lang:["ar","bn","de","en-GB","en-US","es","fr","hi","id","ja","pa","pt","ru","tr","zh"],spellcheck:Bool,autocorrect:Bool,autocapitalize:Bool,style:null,tabindex:null,title:null,translate:["yes","no"],rel:["stylesheet","alternate","author","bookmark","help","license","next","nofollow","noreferrer","prefetch","prev","search","tag"],role:"alert application article banner button cell checkbox complementary contentinfo dialog document feed figure form grid gridcell heading img list listbox listitem main navigation region row rowgroup search switch tab table tabpanel textbox timer".split(" "),"aria-activedescendant":null,"aria-atomic":Bool,"aria-autocomplete":["inline","list","both","none"],"aria-busy":Bool,"aria-checked":["true","false","mixed","undefined"],"aria-controls":null,"aria-describedby":null,"aria-disabled":Bool,"aria-dropeffect":null,"aria-expanded":["true","false","undefined"],"aria-flowto":null,"aria-grabbed":["true","false","undefined"],"aria-haspopup":Bool,"aria-hidden":Bool,"aria-invalid":["true","false","grammar","spelling"],"aria-label":null,"aria-labelledby":null,"aria-level":null,"aria-live":["off","polite","assertive"],"aria-multiline":Bool,"aria-multiselectable":Bool,"aria-owns":null,"aria-posinset":null,"aria-pressed":["true","false","mixed","undefined"],"aria-readonly":Bool,"aria-relevant":null,"aria-required":Bool,"aria-selected":["true","false","undefined"],"aria-setsize":null,"aria-sort":["ascending","descending","none","other"],"aria-valuemax":null,"aria-valuemin":null,"aria-valuenow":null,"aria-valuetext":null},eventAttributes="beforeunload copy cut dragstart dragover dragleave dragenter dragend drag paste focus blur change click load mousedown mouseenter mouseleave mouseup keydown keyup resize scroll unload".split(" ").map(h=>"on"+h);for(let h of eventAttributes)GlobalAttrs[h]=null;class Schema{constructor(r,o){this.tags={...Tags,...r},this.globalAttrs={...GlobalAttrs,...o},this.allTags=Object.keys(this.tags),this.globalAttrNames=Object.keys(this.globalAttrs)}}Schema.default=new Schema;function elementName(h,r,o=h.length){if(!r)return"";let u=r.firstChild,g=u&&u.getChild("TagName");return g?h.sliceString(g.from,Math.min(g.to,o)):""}function findParentElement(h,r=!1){for(;h;h=h.parent)if(h.name=="Element")if(r)r=!1;else return h;return null}function allowedChildren(h,r,o){let u=o.tags[elementName(h,findParentElement(r))];return(u==null?void 0:u.children)||o.allTags}function openTags(h,r){let o=[];for(let u=findParentElement(r);u&&!u.type.isTop;u=findParentElement(u.parent)){let g=elementName(h,u);if(g&&u.lastChild.name=="CloseTag")break;g&&o.indexOf(g)<0&&(r.name=="EndTag"||r.from>=u.firstChild.to)&&o.push(g)}return o}const identifier=/^[:\-\.\w\u00b7-\uffff]*$/;function completeTag(h,r,o,u,g){let k=/\s*>/.test(h.sliceDoc(g,g+5))?"":">",A=findParentElement(o,o.name=="StartTag"||o.name=="TagName");return{from:u,to:g,options:allowedChildren(h.doc,A,r).map(R=>({label:R,type:"type"})).concat(openTags(h.doc,o).map((R,q)=>({label:"/"+R,apply:"/"+R+k,type:"type",boost:99-q}))),validFor:/^\/?[:\-\.\w\u00b7-\uffff]*$/}}function completeCloseTag(h,r,o,u){let g=/\s*>/.test(h.sliceDoc(u,u+5))?"":">";return{from:o,to:u,options:openTags(h.doc,r).map((k,A)=>({label:k,apply:k+g,type:"type",boost:99-A})),validFor:identifier}}function completeStartTag(h,r,o,u){let g=[],k=0;for(let A of allowedChildren(h.doc,o,r))g.push({label:"<"+A,type:"type"});for(let A of openTags(h.doc,o))g.push({label:"</"+A+">",type:"type",boost:99-k++});return{from:u,to:u,options:g,validFor:/^<\/?[:\-\.\w\u00b7-\uffff]*$/}}function completeAttrName(h,r,o,u,g){let k=findParentElement(o),A=k?r.tags[elementName(h.doc,k)]:null,R=A&&A.attrs?Object.keys(A.attrs):[],q=A&&A.globalAttrs===!1?R:R.length?R.concat(r.globalAttrNames):r.globalAttrNames;return{from:u,to:g,options:q.map(_=>({label:_,type:"property"})),validFor:identifier}}function completeAttrValue(h,r,o,u,g){var k;let A=(k=o.parent)===null||k===void 0?void 0:k.getChild("AttributeName"),R=[],q;if(A){let _=h.sliceDoc(A.from,A.to),ee=r.globalAttrs[_];if(!ee){let te=findParentElement(o),ne=te?r.tags[elementName(h.doc,te)]:null;ee=(ne==null?void 0:ne.attrs)&&ne.attrs[_]}if(ee){let te=h.sliceDoc(u,g).toLowerCase(),ne='"',re='"';/^['"]/.test(te)?(q=te[0]=='"'?/^[^"]*$/:/^[^']*$/,ne="",re=h.sliceDoc(g,g+1)==te[0]?"":te[0],te=te.slice(1),u++):q=/^[^\s<>='"]*$/;for(let oe of ee)R.push({label:oe,apply:ne+oe+re,type:"constant"})}}return{from:u,to:g,options:R,validFor:q}}function htmlCompletionFor(h,r){let{state:o,pos:u}=r,g=syntaxTree(o).resolveInner(u,-1),k=g.resolve(u);for(let A=u,R;k==g&&(R=g.childBefore(A));){let q=R.lastChild;if(!q||!q.type.isError||q.from<q.to)break;k=g=R,A=q.from}return g.name=="TagName"?g.parent&&/CloseTag$/.test(g.parent.name)?completeCloseTag(o,g,g.from,u):completeTag(o,h,g,g.from,u):g.name=="StartTag"||g.name=="IncompleteTag"?completeTag(o,h,g,u,u):g.name=="StartCloseTag"||g.name=="IncompleteCloseTag"?completeCloseTag(o,g,u,u):g.name=="OpenTag"||g.name=="SelfClosingTag"||g.name=="AttributeName"?completeAttrName(o,h,g,g.name=="AttributeName"?g.from:u,u):g.name=="Is"||g.name=="AttributeValue"||g.name=="UnquotedAttributeValue"?completeAttrValue(o,h,g,g.name=="Is"?u:g.from,u):r.explicit&&(k.name=="Element"||k.name=="Text"||k.name=="Document")?completeStartTag(o,h,g,u):null}function htmlCompletionSource(h){return htmlCompletionFor(Schema.default,h)}function htmlCompletionSourceWith(h){let{extraTags:r,extraGlobalAttributes:o}=h,u=o||r?new Schema(r,o):Schema.default;return g=>htmlCompletionFor(u,g)}const jsonParser=javascriptLanguage.parser.configure({top:"SingleExpression"}),defaultNesting=[{tag:"script",attrs:h=>h.type=="text/typescript"||h.lang=="ts",parser:typescriptLanguage.parser},{tag:"script",attrs:h=>h.type=="text/babel"||h.type=="text/jsx",parser:jsxLanguage.parser},{tag:"script",attrs:h=>h.type=="text/typescript-jsx",parser:tsxLanguage.parser},{tag:"script",attrs(h){return/^(importmap|speculationrules|application\/(.+\+)?json)$/i.test(h.type)},parser:jsonParser},{tag:"script",attrs(h){return!h.type||/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^module$|^$/i.test(h.type)},parser:javascriptLanguage.parser},{tag:"style",attrs(h){return(!h.lang||h.lang=="css")&&(!h.type||/^(text\/)?(x-)?(stylesheet|css)$/i.test(h.type))},parser:cssLanguage.parser}],defaultAttrs=[{name:"style",parser:cssLanguage.parser.configure({top:"Styles"})}].concat(eventAttributes.map(h=>({name:h,parser:javascriptLanguage.parser}))),htmlPlain=LRLanguage.define({name:"html",parser:parser$2.configure({props:[indentNodeProp.add({Element(h){let r=/^(\s*)(<\/)?/.exec(h.textAfter);return h.node.to<=h.pos+r[0].length?h.continue():h.lineIndent(h.node.from)+(r[2]?0:h.unit)},"OpenTag CloseTag SelfClosingTag"(h){return h.column(h.node.from)+h.unit},Document(h){if(h.pos+/\s*/.exec(h.textAfter)[0].length<h.node.to)return h.continue();let r=null,o;for(let u=h.node;;){let g=u.lastChild;if(!g||g.name!="Element"||g.to!=u.to)break;r=u=g}return r&&!((o=r.lastChild)&&(o.name=="CloseTag"||o.name=="SelfClosingTag"))?h.lineIndent(r.from)+h.unit:null}}),foldNodeProp.add({Element(h){let r=h.firstChild,o=h.lastChild;return!r||r.name!="OpenTag"?null:{from:r.to,to:o.name=="CloseTag"?o.from:h.to}}}),bracketMatchingHandle.add({"OpenTag CloseTag":h=>h.getChild("TagName")})]}),languageData:{commentTokens:{block:{open:"<!--",close:"-->"}},indentOnInput:/^\s*<\/\w+\W$/,wordChars:"-_"}}),htmlLanguage=htmlPlain.configure({wrap:configureNesting(defaultNesting,defaultAttrs)});function html(h={}){let r="",o;h.matchClosingTags===!1&&(r="noMatch"),h.selfClosingTags===!0&&(r=(r?r+" ":"")+"selfClosing"),(h.nestedLanguages&&h.nestedLanguages.length||h.nestedAttributes&&h.nestedAttributes.length)&&(o=configureNesting((h.nestedLanguages||[]).concat(defaultNesting),(h.nestedAttributes||[]).concat(defaultAttrs)));let u=o?htmlPlain.configure({wrap:o,dialect:r}):r?htmlLanguage.configure({dialect:r}):htmlLanguage;return new LanguageSupport(u,[htmlLanguage.data.of({autocomplete:htmlCompletionSourceWith(h)}),h.autoCloseTags!==!1?autoCloseTags:[],javascript().support,css().support])}const selfClosers=new Set("area base br col command embed frame hr img input keygen link meta param source track wbr menuitem".split(" ")),autoCloseTags=EditorView.inputHandler.of((h,r,o,u,g)=>{if(h.composing||h.state.readOnly||r!=o||u!=">"&&u!="/"||!htmlLanguage.isActiveAt(h.state,r,-1))return!1;let k=g(),{state:A}=k,R=A.changeByRange(q=>{var _,ee,te;let ne=A.doc.sliceString(q.from-1,q.to)==u,{head:re}=q,oe=syntaxTree(A).resolveInner(re,-1),le;if(ne&&u==">"&&oe.name=="EndTag"){let pe=oe.parent;if(((ee=(_=pe.parent)===null||_===void 0?void 0:_.lastChild)===null||ee===void 0?void 0:ee.name)!="CloseTag"&&(le=elementName(A.doc,pe.parent,re))&&!selfClosers.has(le)){let de=re+(A.doc.sliceString(re,re+1)===">"?1:0),he=`</${le}>`;return{range:q,changes:{from:re,to:de,insert:he}}}}else if(ne&&u=="/"&&oe.name=="IncompleteCloseTag"){let pe=oe.parent;if(oe.from==re-2&&((te=pe.lastChild)===null||te===void 0?void 0:te.name)!="CloseTag"&&(le=elementName(A.doc,pe,re))&&!selfClosers.has(le)){let de=re+(A.doc.sliceString(re,re+1)===">"?1:0),he=`${le}>`;return{range:EditorSelection.cursor(re+he.length,-1),changes:{from:re,to:de,insert:he}}}}return{range:q}});return R.changes.empty?!1:(h.dispatch([k,A.update(R,{userEvent:"input.complete",scrollIntoView:!0})]),!0)}),data=defineLanguageFacet({commentTokens:{block:{open:"<!--",close:"-->"}}}),headingProp=new NodeProp,commonmark=parser$3.configure({props:[foldNodeProp.add(h=>!h.is("Block")||h.is("Document")||isHeading(h)!=null||isList(h)?void 0:(r,o)=>({from:o.doc.lineAt(r.from).to,to:r.to})),headingProp.add(isHeading),indentNodeProp.add({Document:()=>null}),languageDataProp.add({Document:data})]});function isHeading(h){let r=/^(?:ATX|Setext)Heading(\d)$/.exec(h.name);return r?+r[1]:void 0}function isList(h){return h.name=="OrderedList"||h.name=="BulletList"}function findSectionEnd(h,r){let o=h;for(;;){let u=o.nextSibling,g;if(!u||(g=isHeading(u.type))!=null&&g<=r)break;o=u}return o.to}const headerIndent=foldService.of((h,r,o)=>{for(let u=syntaxTree(h).resolveInner(o,-1);u&&!(u.from<r);u=u.parent){let g=u.type.prop(headingProp);if(g==null)continue;let k=findSectionEnd(u,g);if(k>o)return{from:o,to:k}}return null});function mkLang(h){return new Language(data,h,[],"markdown")}const commonmarkLanguage=mkLang(commonmark),extended=commonmark.configure([GFM,Subscript,Superscript,Emoji,{props:[foldNodeProp.add({Table:(h,r)=>({from:r.doc.lineAt(h.from).to,to:h.to})})]}]),markdownLanguage=mkLang(extended);function getCodeParser(h,r){return o=>{if(o&&h){let u=null;if(o=/\S*/.exec(o)[0],typeof h=="function"?u=h(o):u=LanguageDescription.matchLanguageName(h,o,!0),u instanceof LanguageDescription)return u.support?u.support.language.parser:ParseContext.getSkippingParser(u.load());if(u)return u.parser}return r?r.parser:null}}class Context{constructor(r,o,u,g,k,A,R){this.node=r,this.from=o,this.to=u,this.spaceBefore=g,this.spaceAfter=k,this.type=A,this.item=R}blank(r,o=!0){let u=this.spaceBefore+(this.node.name=="Blockquote"?">":"");if(r!=null){for(;u.length<r;)u+=" ";return u}else{for(let g=this.to-this.from-u.length-this.spaceAfter.length;g>0;g--)u+=" ";return u+(o?this.spaceAfter:"")}}marker(r,o){let u=this.node.name=="OrderedList"?String(+itemNumber(this.item,r)[2]+o):"";return this.spaceBefore+u+this.type+this.spaceAfter}}function getContext(h,r){let o=[],u=[];for(let g=h;g;g=g.parent){if(g.name=="FencedCode")return u;(g.name=="ListItem"||g.name=="Blockquote")&&o.push(g)}for(let g=o.length-1;g>=0;g--){let k=o[g],A,R=r.lineAt(k.from),q=k.from-R.from;if(k.name=="Blockquote"&&(A=/^ *>( ?)/.exec(R.text.slice(q))))u.push(new Context(k,q,q+A[0].length,"",A[1],">",null));else if(k.name=="ListItem"&&k.parent.name=="OrderedList"&&(A=/^( *)\d+([.)])( *)/.exec(R.text.slice(q)))){let _=A[3],ee=A[0].length;_.length>=4&&(_=_.slice(0,_.length-4),ee-=4),u.push(new Context(k.parent,q,q+ee,A[1],_,A[2],k))}else if(k.name=="ListItem"&&k.parent.name=="BulletList"&&(A=/^( *)([-+*])( {1,4}\[[ xX]\])?( +)/.exec(R.text.slice(q)))){let _=A[4],ee=A[0].length;_.length>4&&(_=_.slice(0,_.length-4),ee-=4);let te=A[2];A[3]&&(te+=A[3].replace(/[xX]/," ")),u.push(new Context(k.parent,q,q+ee,A[1],_,te,k))}}return u}function itemNumber(h,r){return/^(\s*)(\d+)(?=[.)])/.exec(r.sliceString(h.from,h.from+10))}function renumberList(h,r,o,u=0){for(let g=-1,k=h;;){if(k.name=="ListItem"){let R=itemNumber(k,r),q=+R[2];if(g>=0){if(q!=g+1)return;o.push({from:k.from+R[1].length,to:k.from+R[0].length,insert:String(g+2+u)})}g=q}let A=k.nextSibling;if(!A)break;k=A}}function normalizeIndent(h,r){let o=/^[ \t]*/.exec(h)[0].length;if(!o||r.facet(indentUnit)!="	")return h;let u=countColumn(h,4,o),g="";for(let k=u;k>0;)k>=4?(g+="	",k-=4):(g+=" ",k--);return g+h.slice(o)}const insertNewlineContinueMarkup=({state:h,dispatch:r})=>{let o=syntaxTree(h),{doc:u}=h,g=null,k=h.changeByRange(A=>{if(!A.empty||!markdownLanguage.isActiveAt(h,A.from,-1)&&!markdownLanguage.isActiveAt(h,A.from,1))return g={range:A};let R=A.from,q=u.lineAt(R),_=getContext(o.resolveInner(R,-1),u);for(;_.length&&_[_.length-1].from>R-q.from;)_.pop();if(!_.length)return g={range:A};let ee=_[_.length-1];if(ee.to-ee.spaceAfter.length>R-q.from)return g={range:A};let te=R>=ee.to-ee.spaceAfter.length&&!/\S/.test(q.text.slice(ee.to));if(ee.item&&te){let pe=ee.node.firstChild,de=ee.node.getChild("ListItem","ListItem");if(pe.to>=R||de&&de.to<R||q.from>0&&!/[^\s>]/.test(u.lineAt(q.from-1).text)){let he=_.length>1?_[_.length-2]:null,ae,se="";he&&he.item?(ae=q.from+he.from,se=he.marker(u,1)):ae=q.from+(he?he.to:0);let ce=[{from:ae,to:R,insert:se}];return ee.node.name=="OrderedList"&&renumberList(ee.item,u,ce,-2),he&&he.node.name=="OrderedList"&&renumberList(he.item,u,ce),{range:EditorSelection.cursor(ae+se.length),changes:ce}}else{let he=blankLine(_,h,q);return{range:EditorSelection.cursor(R+he.length+1),changes:{from:q.from,insert:he+h.lineBreak}}}}if(ee.node.name=="Blockquote"&&te&&q.from){let pe=u.lineAt(q.from-1),de=/>\s*$/.exec(pe.text);if(de&&de.index==ee.from){let he=h.changes([{from:pe.from+de.index,to:pe.to},{from:q.from+ee.from,to:q.to}]);return{range:A.map(he),changes:he}}}let ne=[];ee.node.name=="OrderedList"&&renumberList(ee.item,u,ne);let re=ee.item&&ee.item.from<q.from,oe="";if(!re||/^[\s\d.)\-+*>]*/.exec(q.text)[0].length>=ee.to)for(let pe=0,de=_.length-1;pe<=de;pe++)oe+=pe==de&&!re?_[pe].marker(u,1):_[pe].blank(pe<de?countColumn(q.text,4,_[pe+1].from)-oe.length:null);let le=R;for(;le>q.from&&/\s/.test(q.text.charAt(le-q.from-1));)le--;return oe=normalizeIndent(oe,h),nonTightList(ee.node,h.doc)&&(oe=blankLine(_,h,q)+h.lineBreak+oe),ne.push({from:le,to:R,insert:h.lineBreak+oe}),{range:EditorSelection.cursor(le+oe.length+1),changes:ne}});return g?!1:(r(h.update(k,{scrollIntoView:!0,userEvent:"input"})),!0)};function isMark(h){return h.name=="QuoteMark"||h.name=="ListMark"}function nonTightList(h,r){if(h.name!="OrderedList"&&h.name!="BulletList")return!1;let o=h.firstChild,u=h.getChild("ListItem","ListItem");if(!u)return!1;let g=r.lineAt(o.to),k=r.lineAt(u.from),A=/^[\s>]*$/.test(g.text);return g.number+(A?0:1)<k.number}function blankLine(h,r,o){let u="";for(let g=0,k=h.length-2;g<=k;g++)u+=h[g].blank(g<k?countColumn(o.text,4,h[g+1].from)-u.length:null,g<k);return normalizeIndent(u,r)}function contextNodeForDelete(h,r){let o=h.resolveInner(r,-1),u=r;isMark(o)&&(u=o.from,o=o.parent);for(let g;g=o.childBefore(u);)if(isMark(g))u=g.from;else if(g.name=="OrderedList"||g.name=="BulletList")o=g.lastChild,u=o.to;else break;return o}const deleteMarkupBackward=({state:h,dispatch:r})=>{let o=syntaxTree(h),u=null,g=h.changeByRange(k=>{let A=k.from,{doc:R}=h;if(k.empty&&markdownLanguage.isActiveAt(h,k.from)){let q=R.lineAt(A),_=getContext(contextNodeForDelete(o,A),R);if(_.length){let ee=_[_.length-1],te=ee.to-ee.spaceAfter.length+(ee.spaceAfter?1:0);if(A-q.from>te&&!/\S/.test(q.text.slice(te,A-q.from)))return{range:EditorSelection.cursor(q.from+te),changes:{from:q.from+te,to:A}};if(A-q.from==te&&(!ee.item||q.from<=ee.item.from||!/\S/.test(q.text.slice(0,ee.to)))){let ne=q.from+ee.from;if(ee.item&&ee.node.from<ee.item.from&&/\S/.test(q.text.slice(ee.from,ee.to))){let re=ee.blank(countColumn(q.text,4,ee.to)-countColumn(q.text,4,ee.from));return ne==q.from&&(re=normalizeIndent(re,h)),{range:EditorSelection.cursor(ne+re.length),changes:{from:ne,to:q.from+ee.to,insert:re}}}if(ne<A)return{range:EditorSelection.cursor(ne),changes:{from:ne,to:A}}}}}return u={range:k}});return u?!1:(r(h.update(g,{scrollIntoView:!0,userEvent:"delete"})),!0)},markdownKeymap=[{key:"Enter",run:insertNewlineContinueMarkup},{key:"Backspace",run:deleteMarkupBackward}],htmlNoMatch=html({matchClosingTags:!1});function markdown(h={}){let{codeLanguages:r,defaultCodeLanguage:o,addKeymap:u=!0,base:{parser:g}=commonmarkLanguage,completeHTMLTags:k=!0,pasteURLAsLink:A=!0,htmlTagLanguage:R=htmlNoMatch}=h;if(!(g instanceof MarkdownParser))throw new RangeError("Base parser provided to `markdown` should be a Markdown parser");let q=h.extensions?[h.extensions]:[],_=[R.support,headerIndent],ee;A&&_.push(pasteURLAsLink),o instanceof LanguageSupport?(_.push(o.support),ee=o.language):o&&(ee=o);let te=r||ee?getCodeParser(r,ee):void 0;q.push(parseCode({codeParser:te,htmlParser:R.language.parser})),u&&_.push(Prec.high(keymap.of(markdownKeymap)));let ne=mkLang(g.configure(q));return k&&_.push(ne.data.of({autocomplete:htmlTagCompletion})),new LanguageSupport(ne,_)}function htmlTagCompletion(h){let{state:r,pos:o}=h,u=/<[:\-\.\w\u00b7-\uffff]*$/.exec(r.sliceDoc(o-25,o));if(!u)return null;let g=syntaxTree(r).resolveInner(o,-1);for(;g&&!g.type.isTop;){if(g.name=="CodeBlock"||g.name=="FencedCode"||g.name=="ProcessingInstructionBlock"||g.name=="CommentBlock"||g.name=="Link"||g.name=="Image")return null;g=g.parent}return{from:o-u[0].length,to:o,options:htmlTagCompletions(),validFor:/^<[:\-\.\w\u00b7-\uffff]*$/}}let _tagCompletions=null;function htmlTagCompletions(){if(_tagCompletions)return _tagCompletions;let h=htmlCompletionSource(new CompletionContext(EditorState.create({extensions:htmlNoMatch}),0,!0));return _tagCompletions=h?h.options:[]}const nonPlainText=/code|horizontalrule|html|link|comment|processing|escape|entity|image|mark|url/i,pasteURLAsLink=EditorView.domEventHandlers({paste:(h,r)=>{var o;let{main:u}=r.state.selection;if(u.empty)return!1;let g=(o=h.clipboardData)===null||o===void 0?void 0:o.getData("text/plain");if(!g||!/^(https?:\/\/|mailto:|xmpp:|www\.)/.test(g)||(/^www\./.test(g)&&(g="https://"+g),!markdownLanguage.isActiveAt(r.state,u.from,1)))return!1;let k=syntaxTree(r.state),A=!1;return k.iterate({from:u.from,to:u.to,enter:R=>{(R.from>u.from||nonPlainText.test(R.name))&&(A=!0)},leave:R=>{R.to<u.to&&(A=!0)}}),A?!1:(r.dispatch({changes:[{from:u.from,insert:"["},{from:u.to,insert:`](${g})`}],userEvent:"input.paste",scrollIntoView:!0}),!0)}});class CodeEditorController extends Controller{connect(){if(this.cm)return;const r=()=>this.initializeCodeMirror(),o=u=>{if(!u)return!1;const g=getComputedStyle(u);return!(g.display==="none"||g.visibility==="hidden"||!u.offsetParent&&g.position!=="fixed")};document.head&&this.element.isConnected&&o(this.element)?r():requestAnimationFrame(()=>{document.head&&this.element.isConnected&&o(this.element)&&r()})}async initializeCodeMirror(){const r=this.textareaTarget||this.element.querySelector("textarea");if(!r)return;const o=EditorView.theme({"&":{color:"#000",backgroundColor:"#fff"},".cm-content":{caretColor:"#000"},".cm-cursor, .cm-dropCursor":{borderLeft:"1px solid #000"},"&.cm-focused .cm-selectionBackground, .cm-selectionBackground, ::selection":{backgroundColor:"#d9d9d9"},".cm-gutters":{backgroundColor:"#f7f7f7",color:"#999",borderRight:"1px solid #ddd"}},{dark:!1}),u=EditorView.theme({"&":{maxHeight:"60vh"},".cm-scroller":{overflowY:"auto"}}),g=[tags$1.heading,tags$1.heading1,tags$1.heading2,tags$1.heading3,tags$1.heading4,tags$1.heading5,tags$1.heading6].filter(Boolean);tags$1.headingMark&&g.push(tags$1.headingMark);const k=HighlightStyle.define([{tag:g,color:"#00f"},{tag:tags$1.keyword,color:"#708"},{tag:tags$1.atom,color:"#219"},{tag:tags$1.number,color:"#164"},{tag:tags$1.definition(tags$1.variableName),color:"#00f"},{tag:tags$1.variableName,color:"#000"},{tag:tags$1.propertyName,color:"#00c"},{tag:tags$1.typeName,color:"#085"},{tag:tags$1.className,color:"#05a"},{tag:tags$1.string,color:"#a11"},{tag:tags$1.special(tags$1.string),color:"#f50"},{tag:tags$1.comment,color:"#a50"},{tag:tags$1.meta,color:"#555"},{tag:tags$1.link,color:"#00c",textDecoration:"underline"},{tag:tags$1.tagName,color:"#170"},{tag:tags$1.attributeName,color:"#00c"},{tag:tags$1.bracket,color:"#997"},{tag:tags$1.contentSeparator,color:"#888"},{tag:tags$1.quote,color:"#090"},{tag:tags$1.strong,fontWeight:"bold"},{tag:tags$1.emphasis,fontStyle:"italic"},{tag:tags$1.strikethrough,textDecoration:"line-through"},{tag:tags$1.invalid,color:"#f00"}]),A=EditorView.updateListener.of(ee=>{ee.docChanged&&(r.value=ee.state.doc.toString())}),R=[basicSetup,markdown(),o,u,syntaxHighlighting(k),A],q=document.createElement("div");q.className="cm-container",r.parentElement.insertBefore(q,r),this.cm=new EditorView({doc:r.value||"",parent:q,extensions:R}),r.hidden=!0,r.setAttribute("aria-hidden","true"),r.value=this.cm.state.doc.toString();const _=r.closest("form");_&&!this._syncedOnSubmit&&(this._syncedOnSubmit=!0,_.addEventListener("submit",()=>{r.value=this.cm.state.doc.toString()})),this.editor=this.cm,this.boundInsertHandler||(this.boundInsertHandler=this.handleInsertText.bind(this),this.element.addEventListener("code-editor:insert-text",this.boundInsertHandler)),this.dispatch("ready",{detail:{view:this.cm}}),this.dispatch("initialized",{detail:{view:this.cm}}),this.element.dataset.codemirrorReady="true",this.element.classList.add("codemirror-initialized"),window.codeEditorInstances||(window.codeEditorInstances=new WeakMap),window.codeEditorInstances.set(this.element,this.cm),queueMicrotask(()=>requestAnimationFrame(()=>{}))}isVisible(r){if(!r)return!1;const o=getComputedStyle(r);return!(o.display==="none"||o.visibility==="hidden"||!r.offsetParent&&o.position!=="fixed")}insertText(r){if(console.log("=== CodeEditor insertText called ==="),console.log("Text to insert:",r),console.log("Editor available:",!!this.editor),this.editor&&this.editor.state){const o=this.editor.state.selection.main.head;console.log("Current cursor position:",o);const u=this.editor.state.update({changes:{from:o,insert:r}});this.editor.dispatch(u),this.editor.focus(),console.log("Text insertion completed successfully")}else console.warn("CodeMirror 6 editor not available for text insertion")}handleInsertText(r){console.log("=== CodeEditor received insert-text event ===");const o=r.detail.text;o&&(console.log("Inserting text via event:",o),this.insertText(o),this.dispatch("text-inserted",{detail:{text:o}}))}disconnect(){var r;try{(r=this.cm)==null||r.destroy()}finally{this.cm=null}this.editor=null,this.resizeHandler&&window.removeEventListener("resize",this.resizeHandler),this.orientationHandler&&window.removeEventListener("orientationchange",this.orientationHandler),this.boundInsertHandler&&(this.element.removeEventListener("code-editor:insert-text",this.boundInsertHandler),this.boundInsertHandler=null),window.codeEditorInstances&&window.codeEditorInstances.delete(this.element),this.element&&this.element.dataset&&delete this.element.dataset.codemirrorReady}}Ce(CodeEditorController,"targets",["textarea"]);class VideoPlayerController extends Controller{connect(){console.log("VideoPlayer controller connected"),console.log("hasVideoTarget:",this.hasVideoTarget),console.log("videoTargets length:",this.videoTargets?this.videoTargets.length:"undefined"),console.log("All targets:",this.element.querySelectorAll('[data-video-player-target="video"]')),document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{console.log("DOMContentLoaded - calling initializePlayer"),this.initializePlayer()}):(console.log("Document already ready - calling initializePlayer"),this.initializePlayer())}disconnect(){this.player&&(this.player.dispose(),this.player=null)}initializePlayer(){console.log("initializePlayer called"),console.log("hasVideoTarget:",this.hasVideoTarget),console.log("videoTargets:",this.videoTargets);const r=this.element.querySelector('[data-video-player-target="video"]');if(console.log("Video element found:",r),!r){console.error("Video target element not found in controller element:",this.element);return}if(this.hasVideoTarget){console.log("Using hasVideoTarget path");const o=this.videoTarget;console.log("Video target:",o),console.log("Video target ID:",o.id),this.setupPlayer(o)}else console.log("Using direct query selector path"),console.log("Direct video element:",r),console.log("Direct video element ID:",r.id),this.setupPlayer(r)}setupPlayer(r){if(typeof videojs>"u"){console.error("Video.js library is not available");return}if(r.classList.contains("vjs-tech")){console.log("Video.js player already initialized for this element");return}this.player&&(console.log("Disposing existing player"),this.player.dispose(),this.player=null),r.classList.contains("video-js")||r.classList.add("video-js","vjs-default-skin");const o={fluid:!0,responsive:!0,controls:!0,playbackRates:[.5,1,1.25,1.5,2,4],language:"ja"};try{console.log("Attempting to initialize Video.js player with element:",r.id),this.player=videojs(r,o,()=>{console.log("Video.js player is ready")}),console.log("Player created successfully:",this.player)}catch(u){console.error("Failed to initialize Video.js player:",u)}}}Ce(VideoPlayerController,"targets",["video"]);var ja$1={exports:{}},ja=ja$1.exports,hasRequiredJa;function requireJa(){return hasRequiredJa||(hasRequiredJa=1,(function(h,r){(function(o,u){u(r)})(ja,(function(o){var u=typeof window<"u"&&window.flatpickr!==void 0?window.flatpickr:{l10ns:{}},g={weekdays:{shorthand:["","","","","","",""],longhand:["","","","","","",""]},months:{shorthand:["1","2","3","4","5","6","7","8","9","10","11","12"],longhand:["1","2","3","4","5","6","7","8","9","10","11","12"]},time_24hr:!0,rangeSeparator:"  ",monthAriaLabel:"",amPM:["",""],yearAriaLabel:"",hourAriaLabel:"",minuteAriaLabel:""};u.l10ns.ja=g;var k=u.l10ns;o.Japanese=g,o.default=k,Object.defineProperty(o,"__esModule",{value:!0})}))})(ja$1,ja$1.exports)),ja$1.exports}var jaExports=requireJa();class FlatpickrController extends Controller{connect(){console.log("Flatpickr controller connected"),this.initializeFlatpickr()}initializeFlatpickr(){const r={mode:this.modeValue||"single",dateFormat:this.dateFormatValue||"Y/m/d",allowInput:!1,clickOpens:!0,locale:this.localeValue==="ja"?jaExports.Japanese:"default"};this.modeValue==="range"&&(r.mode="range",r.dateFormat="Y/m/d",r.separator="  ");const o=_=>_?_ instanceof Date?_.getFullYear():typeof _=="object"&&_.dateObj instanceof Date?_.dateObj.getFullYear():null:null,u=_=>{_&&_.setAttribute("aria-label",_.getAttribute("aria-label")||"")},g=(_,ee,te,ne)=>{const re=String(ne);_.innerHTML="";for(let oe=te;oe>=ee;oe-=1){const le=document.createElement("option");le.value=String(oe),le.textContent=`${oe}`,le.value===re&&(le.selected=!0),_.appendChild(le)}},k=(_,ee,te)=>{if(!_||!ee||!te)return;let ne=o(_.config.minDate),re=o(_.config.maxDate);const oe=_.currentYear;typeof ne!="number"&&(ne=oe-5),typeof re!="number"&&(re=oe+5),oe<ne&&(ne=oe-1),oe>re&&(re=oe+1);let le=ee.querySelector("select.flatpickr-yearDropdown");le||(le=document.createElement("select"),le.classList.add("flatpickr-yearDropdown"),le.setAttribute("aria-label",""),le.addEventListener("change",ae=>{const se=parseInt(ae.target.value,10);!Number.isNaN(se)&&se!==_.currentYear&&_.changeYear(se)}),ee.insertBefore(le,ee.firstChild)),le.classList.contains("flatpickr-monthDropdown-months")||le.classList.add("flatpickr-monthDropdown-months");const pe=le.dataset.yearRange?le.dataset.yearRange.split(":"):null,[de,he]=pe?pe.map(ae=>parseInt(ae,10)):[];de!==ne||he!==re?(g(le,ne,re,oe),le.dataset.yearRange=`${ne}:${re}`):le.value=String(oe),le.value=String(oe),te.style.display="none",te.setAttribute("aria-hidden","true")},A=_=>{const ee=_==null?void 0:_.calendarContainer;if(!ee)return;const te=ee.querySelector(".flatpickr-current-month");if(!te)return;const ne=te.querySelector(".numInputWrapper"),re=Array.from(te.querySelectorAll(".flatpickr-monthDropdown-months")).find(le=>!le.classList.contains("flatpickr-yearDropdown")),oe=te.querySelector(".cur-month");k(_,te,ne),u(re),oe&&(oe.style.display=re?"none":""),re?te.appendChild(re):oe&&te.appendChild(oe)},R=(_,ee)=>{const te=r[_];Array.isArray(te)?r[_]=[...te,ee]:te?r[_]=[te,ee]:r[_]=[ee]},q=(_,ee,te)=>A(te);R("onReady",q),R("onMonthChange",q),R("onYearChange",q),this.flatpickr=flatpickr(this.inputTarget,r),A(this.flatpickr),console.log("Flatpickr initialized with options:",r)}disconnect(){this.flatpickr&&this.flatpickr.destroy()}}Ce(FlatpickrController,"targets",["input"]),Ce(FlatpickrController,"values",{mode:String,dateFormat:String,locale:String});window.videojs=videojs;window.flatpickr=flatpickr;window.startPasskeyAuthentication=startPasskeyAuthentication;window.startPasskeyRegistration=startPasskeyRegistration;console.log("Passkey functions loaded globally:",{auth:!!window.startPasskeyAuthentication,reg:!!window.startPasskeyRegistration});window.ActiveStorage||(window.ActiveStorage=ActiveStorage,start(),console.log("ActiveStorage initialized"));async function loadVideoJS(){return window.videojs?(console.log("Video.js already available:",!!window.videojs),window.videojs):(console.warn("Video.js not found on window object"),null)}window.loadVideoJS=loadVideoJS;console.log("Pre-loading Video.js...");loadVideoJS().then(()=>{console.log("Video.js pre-loaded successfully, window.videojs available:",!!window.videojs)}).catch(h=>{console.warn("Video.js pre-loading failed:",h)});const application=Application.start();window.Stimulus=application;application.register("code-editor",CodeEditorController);application.register("video-player",VideoPlayerController);application.register("flatpickr",FlatpickrController);console.log("Application loaded with esbuild (CodeMirror dynamic)");window.checkActiveStorageStatus=function(){var r,o;const h={available:typeof window.ActiveStorage<"u",directUpload:typeof((r=window.ActiveStorage)==null?void 0:r.DirectUpload)=="function",started:((o=window.ActiveStorage)==null?void 0:o.started)||!1};return console.log("ActiveStorage Status:",h),h};document.addEventListener("turbo:before-fetch-request",h=>{const r=document.querySelector('meta[name="csrf-token"]').getAttribute("content");r&&(h.detail.fetchOptions.headers["X-CSRF-Token"]=r)});console.log("ActiveStorage initialized and ready");console.log("[Vite entry] application.js loaded at",new Date);location.pathname.startsWith("/posts/new")&&__vitePreload(()=>import("./new-Df5F4foJ.js").then(h=>h._),__vite__mapDeps([0,1]));
//# sourceMappingURL=application-r853pATi.js.map
