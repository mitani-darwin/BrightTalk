# ğŸ“ BrightTalk â€” READMEï¼ˆæ”¹è¨‚ç‰ˆï¼‰

BrightTalk ã¯ã€Ruby on Rails 8 ã¨ Vite ã‚’ãƒ™ãƒ¼ã‚¹ã«ã—ãŸ  
ãƒ¢ãƒ€ãƒ³ãª Web ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã§ã™ã€‚  
Markdown ã‚¨ãƒ‡ã‚£ã‚¿ã€å‹•ç”»ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã€Passkeyãƒ­ã‚°ã‚¤ãƒ³ãªã©ã‚’çµ±åˆã—ã€  
é–‹ç™ºè€…ãƒ»ã‚¯ãƒªã‚¨ã‚¤ã‚¿ãƒ¼ãŒå¿«é©ã«æŠ•ç¨¿ãƒ»å…±æœ‰ã§ãã‚‹ç’°å¢ƒã‚’æä¾›ã—ã¾ã™ã€‚

---

## ğŸš€ ä¸»ãªç‰¹å¾´

### ğŸ“ æŠ•ç¨¿ãƒ»ç·¨é›†æ©Ÿèƒ½
- Markdownå¯¾å¿œã‚¨ãƒ‡ã‚£ã‚¿ï¼ˆCodeMirror 6ï¼‰
- ç”»åƒãƒ»å‹•ç”»ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ï¼ˆActiveStorage + S3ï¼‰
- è‡ªå‹•ä¿å­˜ï¼ä¸‹æ›¸ãç®¡ç†  
- ã‚³ãƒ¡ãƒ³ãƒˆãƒ»ã„ã„ã­ãƒ»ã‚«ãƒ†ã‚´ãƒªãƒ¼åˆ†é¡å¯¾å¿œ  

### ğŸ¥ ãƒ¡ãƒ‡ã‚£ã‚¢å¯¾å¿œ
- Video.js ã«ã‚ˆã‚‹å‹•ç”»å†ç”Ÿï¼ˆStimulusã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©åˆ¶å¾¡ï¼‰
- è¤‡æ•°ç”»åƒï¼å‹•ç”»ã®ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰å¯¾å¿œ  
- S3ä¸Šã®å‹•ç”»ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°  

### ğŸ” èªè¨¼ãƒ»ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†
- Devise + WebAuthnï¼ˆPasskeyå¯¾å¿œï¼‰
- ãƒ­ã‚°ã‚¤ãƒ³å¿…é ˆã§ã‚³ãƒ¡ãƒ³ãƒˆãƒ»æŠ•ç¨¿
- ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç·¨é›†ãƒ»ã‚¢ãƒã‚¿ãƒ¼è¨­å®š

### ğŸ’¬ ã‚³ãƒ¡ãƒ³ãƒˆæ©Ÿèƒ½
- æœ‰æ–™ã‚³ãƒ¡ãƒ³ãƒˆã¯ä¸Šä½è¡¨ç¤ºï¼ˆ`paid: true`ï¼‰  
- ç„¡æ–™ã‚³ãƒ¡ãƒ³ãƒˆã¨ã®å·®åˆ¥åŒ–ï¼ˆè£…é£¾ãƒ»è‰²å¤‰æ›´ï¼‰  
- ãƒ­ã‚°ã‚¤ãƒ³ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã¿æŠ•ç¨¿å¯èƒ½  

### ğŸ’» ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
- **Vite + Stimulus + Turbo**
- CodeMirror 6 ãƒ™ãƒ¼ã‚¹ã® Markdown ã‚¨ãƒ‡ã‚£ã‚¿
- Flatpickr ã«ã‚ˆã‚‹æ—¥ä»˜é¸æŠ
- Bootstrap 5 + Font Awesome + Bootstrap Icons

### â˜ï¸ ã‚¤ãƒ³ãƒ•ãƒ©ãƒ»ãƒ‡ãƒ—ãƒ­ã‚¤
- Kamal ã«ã‚ˆã‚‹ AWS EC2 / Lightsail ãƒ‡ãƒ—ãƒ­ã‚¤
- S3 + CloudFront é€£æº
- SQLite3ï¼ˆè»½é‡æ§‹æˆï¼‰ã¾ãŸã¯ PostgreSQLï¼ˆæœ¬ç•ªæ‹¡å¼µå¯ï¼‰
- CI/CD: GitHub Actions

---

## ğŸ›  æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

| åˆ†é¡ | ä½¿ç”¨æŠ€è¡“ |
|------|------------|
| **è¨€èª** | Ruby 3.4.4 / JavaScript (ES2023) |
| **ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯** | Ruby on Rails 8.0.2 |
| **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰** | Vite + Stimulus + Turbo |
| **ã‚¨ãƒ‡ã‚£ã‚¿** | CodeMirror 6 |
| **å‹•ç”»ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼** | Video.js |
| **CSS Framework** | Bootstrap 5 |
| **ã‚¢ã‚¤ã‚³ãƒ³** | Font Awesome 6 / Bootstrap Icons |
| **èªè¨¼** | Devise + WebAuthn (Passkey) |
| **ç”»åƒå‡¦ç†** | ruby-vips + image_processing |
| **ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸** | AWS S3 |
| **ãƒ‡ãƒ—ãƒ­ã‚¤** | Kamal |
| **CI/CD** | GitHub Actions |

---

## ğŸ“‹ å‹•ä½œç’°å¢ƒ

- macOS ã¾ãŸã¯ Linux ç’°å¢ƒ
- Ruby 3.4.4+
- Node.js LTSï¼ˆ18 ä»¥ä¸Šï¼‰
- Yarn or npm
- libvipsï¼ˆç”»åƒå‡¦ç†ç”¨ï¼‰

---

## âš™ï¸ ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †

### 1ï¸âƒ£ ãƒªãƒã‚¸ãƒˆãƒªã‚’ã‚¯ãƒ­ãƒ¼ãƒ³
```bash
git clone https://github.com/mitani-darwin/BrightTalk.git
cd BrightTalk
```

### 2ï¸âƒ£ ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
```bash
bundle install
npm install
```

### 3ï¸âƒ£ ã‚·ã‚¹ãƒ†ãƒ ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
```bash
# macOS
brew install vips
# Ubuntu/Debian
sudo apt install libvips
```

### 4ï¸âƒ£ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­å®š
```bash
bin/rails db:create
bin/rails db:migrate
bin/rails db:seed
```

### 5ï¸âƒ£ ç’°å¢ƒå¤‰æ•°è¨­å®šï¼ˆ`.env`ï¼‰
```bash
AWS_ACCESS_KEY_ID=your_key
AWS_SECRET_ACCESS_KEY=your_secret
AWS_REGION=ap-northeast-1
AWS_S3_BUCKET=brighttalk-bucket
```

---

## ğŸ§© é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•

Vite + Rails ä¸¡æ–¹ã‚’çµ±åˆçš„ã«å‹•ä½œã•ã›ã‚‹ï¼š
```bash
bin/dev
```

ã‚¢ã‚¯ã‚»ã‚¹ï¼š  
ğŸ‘‰ http://localhost:3000

---

## ğŸ§ª ãƒ†ã‚¹ãƒˆ

### Railså´
```bash
bin/rails test
```

### JavaScriptï¼ˆVite + Nodeï¼‰
```bash
npm run test:all
```
ï¼ˆ`package.json` ã«ã‚ˆã‚Šã€å„Stimulusã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ã¨ã‚¨ãƒ‡ã‚£ã‚¿ã‚’å€‹åˆ¥ãƒ†ã‚¹ãƒˆï¼‰

---

## ğŸ“¦ ãƒ‡ãƒ—ãƒ­ã‚¤

Kamal ã‚’ä½¿ç”¨ã—ã¦AWSã¸ãƒ‡ãƒ—ãƒ­ã‚¤ã€‚

```bash
kamal setup   # åˆå›ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
kamal deploy  # æ›´æ–°ãƒ‡ãƒ—ãƒ­ã‚¤
```

è¨­å®šã¯ `config/deploy.yml` ã§ç®¡ç†ã€‚

---

## ğŸ¨ ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ»UIãƒ¡ãƒ¢

- èƒŒæ™¯è‰²ä¾‹ï¼š`#caf5f7`  
- æœ‰æ–™ã‚³ãƒ¡ãƒ³ãƒˆã¯æ·¡ã„ã‚´ãƒ¼ãƒ«ãƒ‰èƒŒæ™¯ï¼ˆ`#fff6d5`ï¼‰  
- CodeMirrorãƒ†ãƒ¼ãƒï¼šãƒ©ã‚¤ãƒˆï¼ˆcustomizedï¼‰  
- Video.jsï¼šãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚¹ã‚­ãƒ³ä½¿ç”¨ï¼ˆStimulusé€£æºæ¸ˆï¼‰

---

## ğŸ§± ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆï¼ˆä¸»è¦ï¼‰

```
app/
 â”œâ”€ controllers/
 â”‚   â”œâ”€ application_controller.rb
 â”‚   â”œâ”€ comments_controller.rb
 â”‚   â””â”€ video_player_controller.js
 â”œâ”€ views/
 â”‚   â”œâ”€ layouts/application.html.erb
 â”‚   â””â”€ posts/
 â”œâ”€ javascript/
 â”‚   â”œâ”€ controllers/
 â”‚   â”œâ”€ application.js
 â”‚   â””â”€ stylesheets/
 â”œâ”€ models/
 â”‚   â”œâ”€ user.rb
 â”‚   â”œâ”€ post.rb
 â”‚   â””â”€ comment.rb
config/
 â”œâ”€ application.rb
 â”œâ”€ environments/
 â”œâ”€ deploy.yml
 â””â”€ vite.json
package.json
Gemfile
```

---

## ğŸ¤ ã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³

1. ãƒ–ãƒ©ãƒ³ãƒã‚’åˆ‡ã‚‹ï¼š  
   ```bash
   git checkout -b feature/awesome
   ```
2. ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„ï¼šRubocop / ESLint æº–æ‹   
3. PRã‚’é€ã‚‹å‰ã«ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ

---

## ğŸ“„ ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

MIT License.  
è©³ç´°ã¯ [LICENSE](LICENSE) ã‚’å‚ç…§ã€‚

---

## ğŸŒŸ é–‹ç™ºãƒ¡ãƒ¢

- `application.js` â†’ Viteã‚¨ãƒ³ãƒˆãƒª  
- `Video.js` ã¯ Stimulus ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©çµŒç”±ã§åˆæœŸåŒ–æ¸ˆ  
- `ActiveStorage` ã¯ direct uploadå¯¾å¿œ  
- `Passkey.js` â†’ WebAuthnãƒ­ã‚¸ãƒƒã‚¯å…¨ä½“ã‚’ç®¡ç†  
- ã‚³ãƒ¡ãƒ³ãƒˆæ©Ÿèƒ½ã¯æœ‰æ–™/ç„¡æ–™åˆ¤å®šã‚’ `User#paid?` ã§åˆ¶å¾¡  
- iOSã‚¢ãƒ—ãƒªï¼ˆSwiftï¼‰é€£æºã‚’æƒ³å®šï¼ˆAPIãƒ¬ã‚¹ãƒãƒ³ã‚¹æ•´å‚™æ¸ˆï¼‰

---

## ğŸ’¬ Contact

- Author: **darwin2008**
- Repository: [BrightTalk GitHub](https://github.com/mitani-darwin/BrightTalk)
- Issues: GitHub Issues ã«ã¦å—ä»˜ä¸­

---

âœ¨ **BrightTalk â€“ æ˜ã‚‹ã„å¯¾è©±ã§ã€çŸ¥è­˜ã¨å‰µé€ ã‚’ã¤ãªããƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã€‚**
